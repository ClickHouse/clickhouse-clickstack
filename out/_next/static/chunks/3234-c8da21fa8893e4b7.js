(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3234],{6379:(e,t,a)=>{"use strict";a.d(t,{FC:()=>K,yI:()=>R});var r=a(6029),n=a(75155),l=a(55729),i=a(75828),s=a.n(i),o=a(25605),c=a(43465),d=a(86508),u=a(7913),h=a(92205),m=a(56721),g=a(14693),p=a(13297),x=a(40684),f=a(8454),y=a(2893),v=a(47122),j=a(31292),w=a(88140),b=a(64370),C=a(93463),k=a(82641),_=a(37659),S=a(92917),A=a(23648),D=a(43152),z=a(7565),T=a(43736),P=a.n(T);let E=(0,l.memo)(e=>{let t,a=(0,n.c)(8),{p:l,previous:i,numberFormat:s}=e,o=l.color??"",c=l.name??l.dataKey,d=i?.value;return a[0]!==s||a[1]!==l.opacity||a[2]!==l.strokeDasharray||a[3]!==l.value||a[4]!==o||a[5]!==c||a[6]!==d?(t=(0,r.jsx)(A.H,{color:o,name:c,value:l.value,numberFormat:s,indicator:"line",strokeDasharray:l.strokeDasharray,opacity:l.opacity,previous:d}),a[0]=s,a[1]=l.opacity,a[2]=l.strokeDasharray,a[3]=l.value,a[4]=o,a[5]=c,a[6]=d,a[7]=t):t=a[7],t}),N=(0,u.withErrorBoundary)((0,l.memo)(e=>{let t,a=(0,n.c)(22),{active:l,payload:i,label:s,numberFormat:o,lineDataMap:c,previousPeriodOffsetSeconds:d}=e;a[0]!==i?(t=new Map(i.map(F)),a[0]=i,a[1]=t):t=a[1];let u=t;if(l&&i&&i.length){let e,t,n,l,h,m=1e3*s;a[2]!==m?(e=(0,r.jsx)(z.H,{value:m}),a[2]=m,a[3]=e):e=a[3],a[4]!==s||a[5]!==d?(t=null!=d&&(0,r.jsxs)(r.Fragment,{children:[" (vs ",(0,r.jsx)(z.H,{value:(s-d)*1e3}),")"]}),a[4]=s,a[5]=d,a[6]=t):t=a[6],a[7]!==e||a[8]!==t?(n=(0,r.jsxs)(r.Fragment,{children:[e,t]}),a[7]=e,a[8]=t,a[9]=n):n=a[9];let g=n;if(a[10]!==c||a[11]!==o||a[12]!==i||a[13]!==u){let e;a[15]!==c||a[16]!==o||a[17]!==u?(e=e=>{let t=c[e.dataKey]?.previousPeriodKey,a=t!==e.dataKey&&t?u.get(t):void 0;return(0,r.jsx)(E,{p:e,numberFormat:o,previous:a},e.dataKey)},a[15]=c,a[16]=o,a[17]=u,a[18]=e):e=a[18],l=i.sort(q).map(e),a[10]=c,a[11]=o,a[12]=i,a[13]=u,a[14]=l}else l=a[14];return a[19]!==g||a[20]!==l?(h=(0,r.jsx)(A.l,{header:g,children:l}),a[19]=g,a[20]=l,a[21]=h):h=a[21],h}return null}),{onError:console.error,fallback:(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-8 font-monospace bg-danger-transparent",children:"An error occurred while rendering the tooltip."})});function M(e){let t,a,i,s,o,c=(0,n.c)(21),{entry:d,expanded:u,isSelected:h,isDisabled:m,onToggle:g}=e,[p,x]=(0,l.useState)(!1),f=p||u,y=m?.3:1,v=h?600:400;c[0]!==d.color||c[1]!==y||c[2]!==v?(t={color:d.color,opacity:y,fontWeight:v,cursor:"pointer"},c[0]=d.color,c[1]=y,c[2]=v,c[3]=t):t=c[3],c[4]!==g?(a=e=>{g?g(e.shiftKey):x(I)},c[4]=g,c[5]=a):a=c[5];let j=h?"Click to show all (Shift+click to deselect)":"Click to show only this (Shift+click for multi-select)",w=m?.3:1,b=d.payload?.strokeDasharray,C=h?2.5:1.5;return c[6]!==d.color||c[7]!==w||c[8]!==b||c[9]!==C?(i=(0,r.jsx)("div",{children:(0,r.jsx)("svg",{width:"12",height:"4",children:(0,r.jsx)("line",{x1:"0",y1:"2",x2:"12",y2:"2",stroke:d.color,opacity:w,strokeDasharray:b,strokeWidth:C})})}),c[6]=d.color,c[7]=w,c[8]=b,c[9]=C,c[10]=i):i=c[10],c[11]!==d.value||c[12]!==f||c[13]!==h?(s=f||h?d.value:(0,S.kU)(`${d.value}`,35),c[11]=d.value,c[12]=f,c[13]=h,c[14]=s):s=c[14],c[15]!==s||c[16]!==t||c[17]!==a||c[18]!==j||c[19]!==i?(o=(0,r.jsxs)("span",{className:`d-flex gap-1 items-center justify-center ${P().legendItem}`,style:t,role:"button",onClick:a,title:j,children:[i,s]}),c[15]=s,c[16]=t,c[17]=a,c[18]=j,c[19]=i,c[20]=o):o=c[20],o}function I(e){return!e}let L=(0,l.memo)(e=>{let{payload:t=[],lineDataMap:a,allLineData:n=[],selectedSeries:i=new Set,onToggleSeries:o}=e,c=i.size>0,d=(0,l.useMemo)(()=>n.length>0?n.map(e=>({dataKey:e.dataKey,value:e.displayName||e.dataKey,color:e.color,payload:{strokeDasharray:e.isDashed?"4 3":"0"}})):t,[n,t]),u=(0,l.useMemo)(()=>{let e=new Map;return d.forEach((t,r)=>{let n=a[t.dataKey]?.currentPeriodKey||"";e.has(n)||e.set(n,r)}),d.sort((t,r)=>{let n=a[t.dataKey]?.currentPeriodKey??"",l=a[r.dataKey]?.currentPeriodKey??"",i=e.get(n)??0;return(e.get(l)??0)-i||t.dataKey.localeCompare(r.dataKey)})},[d,a]),h=u.slice(0,4),m=u.slice(4);return(0,r.jsxs)("div",{className:P().legend,children:[h.map((e,t)=>{let a=i.has(e.value);return(0,r.jsx)(M,{entry:e,isSelected:a,isDisabled:c&&!a,onToggle:t=>o?.(e.value,t)},`item-${t}`)}),m.length?(0,r.jsxs)(_.A,{withinPortal:!0,withArrow:!0,closeOnEscape:!0,closeOnClickOutside:!0,children:[(0,r.jsx)(_.A.Target,{children:(0,r.jsxs)("div",{className:s()(P().legendItem,P().legendMoreLink),children:["+",m.length," more"]})}),(0,r.jsx)(_.A.Dropdown,{p:"xs",children:(0,r.jsx)("div",{className:P().legendTooltipContent,children:m.map((e,t)=>{let a=i.has(e.value);return(0,r.jsx)(M,{entry:e,isSelected:a,isDisabled:c&&!a,onToggle:t=>o?.(e.value,t)},`item-${t}`)})})})]}):null]})}),R=60,K=(0,l.memo)(function({graphResults:e,setIsClickActive:t,isClickActive:a,dateRange:n,lineData:i,referenceLines:s,logReferenceTimestamp:u,displayType:_=k.t2.Line,numberFormat:A,isLoading:T,timestampKey:P="ts_bucket",onTimeRangeSelect:E,showLegend:M=!0,previousPeriodOffsetSeconds:I,selectedSeriesNames:K,onToggleSeries:F,granularity:q,dateRangeEndInclusive:H=!0}){let B=(0,l.useId)().replace(/:/g,""),[X,W]=(0,l.useState)(!1),V=_===k.t2.StackedBar?h.E:m.Q,Y=(0,l.useMemo)(()=>{let e=K&&K.size>0;return i.map(e=>e.dataKey).slice(0,R).filter((t,a)=>{let r=i[a]?.displayName??t;return!e||K.has(r)}).map(e=>{let t=i.findIndex(t=>t.dataKey===e),a=i[t]?.color,n=i[t]?.isDashed?"4 3":"0",l=i[t]?.displayName??e;return"stacked_bar"===_?(0,r.jsx)(g.y,{type:"monotone",dataKey:e,name:l,fill:a,opacity:1,stackId:"1",isAnimationActive:!1,shape:(0,r.jsx)(e=>{let{x:t,y:a,width:n,height:l,fill:i}=e;return(0,r.jsx)("rect",{x:t,y:a,width:n,height:l&&l>0?l+.5:0,fill:i})},{dataKey:e})},e):(0,r.jsx)(p.G,{dataKey:e,type:"monotone",stroke:a,fillOpacity:1,...X?{fill:"none",strokeDasharray:n}:{fill:`url(#time-chart-lin-grad-${B}-${a?.replace("#","").toLowerCase()})`,strokeDasharray:n},name:l,isAnimationActive:!1,connectNulls:!0},e)})},[i,_,B,X,K]),G=(0,l.useMemo)(()=>{if(!(K&&K.size>0))return[0,"auto"];let t=1/0,a=-1/0;if(e.forEach(e=>{i.forEach(r=>{let n=r.displayName||r.dataKey;if(K.has(n)){let n=e[r.dataKey];"number"!=typeof n||isNaN(n)||(t=Math.min(t,n),a=Math.max(a,n))}})}),t!==1/0&&a!==-1/0){let e=(a-t)*.1;return[Math.max(0,t-e),a+e]}return["auto","auto"]},[e,i,K]),O=(0,l.useRef)([0,0]),$=(0,z.a)(),Q=(0,l.useCallback)((e,t)=>$(1e3*e,{format:0===t?"normal":"time"}),[$]),U=(0,l.useCallback)((e,t)=>A?(0,S.ZV)(e,{...A,average:!0,mantissa:0,unit:void 0}):new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e),[A]),[J,Z]=(0,l.useState)(),[ee,et]=(0,l.useState)(),ea=(0,l.useRef)(null),er=(0,l.useMemo)(()=>{let e={};return i.forEach(t=>{e[t.dataKey]=t}),e},[i]),en=(0,l.useMemo)(()=>{let e=(0,D.W6)(n[0],q),t=(0,D.W6)(n[1],q);if((0,o.A)(n[1],t)&&!H&&(t=(0,c.A)(t,{seconds:(0,D.qL)(q)})),_===k.t2.StackedBar){let a=(0,D.qL)(q)/2;e=(0,c.A)(e,{seconds:a}),t=(0,d.A)(t,{seconds:a})}return[e.getTime()/1e3,t.getTime()/1e3]},[n,q,H,_]);return(0,r.jsx)(x.u,{width:"100%",height:"100%",minWidth:0,onResize:(e,t)=>{O.current=[e??1,t??1]},className:T?"effect-pulse":"",children:(0,r.jsxs)(V,{width:500,height:300,data:e,syncId:"hdx",syncMethod:"value",onMouseEnter:()=>W(!0),onMouseLeave:e=>{W(!1),Z(void 0),et(void 0),ea.current=null},onMouseDown:e=>{null!=e&&null!=e.chartX&&null!=e.chartY&&(Z(e.activeLabel),ea.current=e.chartX)},onMouseMove:e=>{W(!0),null!=J&&(et(e.activeLabel),t(void 0))},onMouseUp:e=>{let t=0;if(null!=ea.current&&e?.chartX!=null&&(t=Math.abs(e.chartX-ea.current)),e?.activeLabel!=null&&J===e.activeLabel)Z(void 0),et(void 0),ea.current=null;else if(null!=J&&null!=ee&&t>=20){try{E?.(new Date(1e3*Number.parseInt(J<=ee?J:ee)),new Date(1e3*Number.parseInt(ee>=J?ee:J)))}catch(e){console.error("failed to highlight range",e)}Z(void 0),et(void 0),ea.current=null}else Z(void 0),et(void 0),ea.current=null},onClick:(e,a)=>{null!=e&&null!=e.chartX&&null!=e.chartY&&null!=e.activeLabel&&null==J?t({x:e.chartX,y:e.chartY,activeLabel:e.activeLabel,xPerc:e.chartX/O.current[0],yPerc:e.chartY/O.current[1],activePayload:e.activePayload}):t(void 0),a.stopPropagation()},children:[(0,r.jsx)("defs",{children:S.lm.map(e=>(0,r.jsxs)("linearGradient",{id:`time-chart-lin-grad-${B}-${e.replace("#","").toLowerCase()}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:e,stopOpacity:.15}),(0,r.jsx)("stop",{offset:"10%",stopColor:e,stopOpacity:.003})]},e))}),X&&(0,r.jsx)(f.d,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),(0,r.jsx)(y.W,{dataKey:P??"ts_bucket",domain:en,interval:"preserveStartEnd",scale:"time",type:"number",tickFormatter:Q,minTickGap:100,tick:{fontSize:11,fontFamily:"IBM Plex Mono, monospace"}}),(0,r.jsx)(v.h,{width:40,minTickGap:25,tickFormatter:U,tick:{fontSize:11,fontFamily:"IBM Plex Mono, monospace"},domain:G}),Y,null==a&&(0,r.jsx)(j.m,{content:(0,r.jsx)(N,{numberFormat:A,lineDataMap:er,previousPeriodOffsetSeconds:I}),wrapperStyle:{zIndex:1}}),s,J&&ee?(0,r.jsx)(w.T,{x1:J,x2:ee,strokeOpacity:.3}):null,M&&(0,r.jsx)(b.s,{iconSize:10,verticalAlign:"bottom",content:(0,r.jsx)(L,{lineDataMap:er,allLineData:i,selectedSeries:K||new Set,onToggleSeries:F}),offset:-100}),null!=a?(0,r.jsx)(C.e,{x:a.activeLabel,stroke:"#ccc"}):null,null!=u?(0,r.jsx)(C.e,{x:u,stroke:"#ff5d5b",strokeDasharray:"3 3",label:"Event"}):null]})})});function F(e){return[e.dataKey,e]}function q(e,t){return t.value-e.value}},9211:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(6029),n=a(75155),l=a(1909),i=a(38206);function s(e){let t,a,s,o,c,d=(0,n.c)(16),{field:u,fieldState:h}=(0,l.as)(e),{value:m,onChange:g,onBlur:p,name:x,ref:f}=u;d[0]!==e?({onCreate:t,allowDeselect:s,...a}=e,d[0]=e,d[1]=t,d[2]=a,d[3]=s):(t=d[1],a=d[2],s=d[3]);let y=void 0===s||s,v=e.data?.find(e=>"string"==typeof e?e===m:!("value"in e)||e.value===m);d[4]!==y||d[5]!==g||d[6]!==t?(o=e=>{"_create_new_value"===e&&null!=t?t():(null!==e||y)&&g(e)},d[4]=y,d[5]=g,d[6]=t,d[7]=o):o=d[7];let j=o,w=h.error?.message,b=null==v?null:m;return d[8]!==x||d[9]!==p||d[10]!==f||d[11]!==j||d[12]!==a||d[13]!==w||d[14]!==b?(c=(0,r.jsx)(i.l,{...a,error:w,value:b,onChange:j,onBlur:p,name:x,ref:f}),d[8]=x,d[9]=p,d[10]=f,d[11]=j,d[12]=a,d[13]=w,d[14]=b,d[15]=c):c=d[15],c}},11104:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(6029),n=a(75155),l=a(75828),i=a.n(l),s=a(63085),o=a(76013),c=a(3635);let d=function(e){let t,a,l=(0,n.c)(9),{value:d,onChange:u,options:h}=e;if(l[0]!==u||l[1]!==h||l[2]!==d){let e;l[4]!==u||l[5]!==d?(e=e=>{let{icon:t,label:a,value:n,disabled:l}=e;return(0,r.jsx)(s.m,{label:a,children:(0,r.jsx)(o.M,{size:"xs",me:2,className:i()({"text-brand":d===n,"text-muted-hover":d!==n}),disabled:l,onClick:()=>u(n),children:t})},n)},l[4]=u,l[5]=d,l[6]=e):e=l[6],t=h.map(e),l[0]=u,l[1]=h,l[2]=d,l[3]=t}else t=l[3];return l[7]!==t?(a=(0,r.jsx)(c.Y,{className:"bg-muted px-2 py-2 rounded fs-8",align:"center",gap:0,wrap:"nowrap",children:t}),l[7]=t,l[8]=a):a=l[8],a}},15628:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(6029),n=a(75155),l=a(3635),i=a(34834);let s=function(e){let t,a,s,o,c=(0,n.c)(10),{title:d,toolbarItems:u,children:h,disableReactiveContainer:m}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t={flexGrow:1},c[0]=t):t=c[0],c[1]!==d||c[2]!==u?(a=(!!d||!!u?.length)&&(0,r.jsxs)(l.Y,{justify:"space-between",align:"start",wrap:"nowrap",children:[(0,r.jsx)("span",{style:{flex:1,flexShrink:1,overflow:"hidden"},children:d}),u&&(0,r.jsx)(l.Y,{flex:0,wrap:"nowrap",gap:5,children:u})]}),c[1]=d,c[2]=u,c[3]=a):a=c[3],c[4]!==h||c[5]!==m?(s=m?h:(0,r.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,r.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:0,top:0},children:h})}),c[4]=h,c[5]=m,c[6]=s):s=c[6],c[7]!==a||c[8]!==s?(o=(0,r.jsxs)(i.B,{h:"100%",w:"100%",style:t,children:[a,s]}),c[7]=a,c[8]=s,c[9]=o):o=c[9],o}},17421:(e,t,a)=>{"use strict";a.d(t,{P:()=>i});var r=a(6029);a(55729);var n=a(87383),l=a(8737);let i=({data:e,filename:t,children:a,className:i,title:s,disabled:o=!1,onExportStart:c,onExportComplete:d,onExportError:u,...h})=>{let{CSVDownloader:m}=(0,n.jG)();return o||0===e.length?(0,r.jsx)("div",{className:i,title:o?"Export disabled":"No data to export",style:{opacity:.5,cursor:"not-allowed"},...h,children:a}):(0,r.jsx)(l.N,{className:i,title:s,onClick:()=>{try{if(0===e.length)return void u?.(Error("No data to export"));c?.(),d?.()}catch(e){u?.(e instanceof Error?e:Error("Export failed"))}},...h,children:(0,r.jsx)(m,{data:e,filename:t,config:{quotes:!0,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0},style:{color:"inherit",textDecoration:"none",background:"none",border:"none",padding:0,cursor:"pointer",display:"block",width:"100%",height:"100%"},children:a})})}},23648:(e,t,a)=>{"use strict";a.d(t,{H:()=>m,l:()=>g});var r=a(6029),n=a(75155),l=a(55729),i=a(49109),s=a(33958),o=a(92917),c=a(43736),d=a.n(c);let u=new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:2}),h=e=>{let t,a,l=(0,n.c)(7),{current:o,previous:c}=e;if(l[0]!==o||l[1]!==c){a=Symbol.for("react.early_return_sentinel");e:{let e,n,d=0===c?0===o?0:void 0:(o-c)/c;if(void 0==d){a=null;break e}let h=d>0?i.A:s.A;l[4]===Symbol.for("react.memo_cache_sentinel")?(e={display:"inline-flex",alignItems:"center",gap:0},l[4]=e):e=l[4],l[5]!==h?(n=(0,r.jsx)(h,{size:12}),l[5]=h,l[6]=n):n=l[6],t=(0,r.jsxs)("span",{style:e,children:["(",n,u.format(Math.abs(d)),")"]})}l[0]=o,l[1]=c,l[2]=t,l[3]=a}else t=l[2],a=l[3];return a!==Symbol.for("react.early_return_sentinel")?a:t},m=(0,l.memo)(e=>{let t,a,l,i,s,c,d,u,m,g=(0,n.c)(27),{color:p,name:x,value:f,numberFormat:y,indicator:v,strokeDasharray:j,opacity:w,previous:b}=e,C=void 0===v?"line":v;return g[0]!==p||g[1]!==C||g[2]!==w||g[3]!==j?(t="square"===C?(0,r.jsx)("svg",{width:"12",height:"12",children:(0,r.jsx)("rect",{width:"12",height:"12",fill:p,rx:"2"})}):"line"===C?(0,r.jsx)("svg",{width:"12",height:"4",children:(0,r.jsx)("line",{x1:"0",y1:"2",x2:"12",y2:"2",stroke:p,opacity:w,strokeDasharray:j})}):null,g[0]=p,g[1]=C,g[2]=w,g[3]=j,g[4]=t):t=g[4],g[5]!==t?(a=(0,r.jsx)("div",{children:t}),g[5]=t,g[6]=a):a=g[6],g[7]!==p?(l={color:p},g[7]=p,g[8]=l):l=g[8],g[9]!==x?(i=(0,o.kU)(x,50),g[9]=x,g[10]=i):i=g[10],g[11]!==l||g[12]!==i?(s=(0,r.jsx)("span",{style:l,children:i}),g[11]=l,g[12]=i,g[13]=s):s=g[13],g[14]!==y||g[15]!==f?(c=y?(0,o.ZV)(f,y):f,g[14]=y,g[15]=f,g[16]=c):c=g[16],g[17]!==b||g[18]!==f?(d=null!=b&&(0,r.jsx)(h,{current:f,previous:b}),g[17]=b,g[18]=f,g[19]=d):d=g[19],g[20]!==s||g[21]!==c||g[22]!==d?(u=(0,r.jsxs)("div",{children:[s,": ",c," ",d]}),g[20]=s,g[21]=c,g[22]=d,g[23]=u):u=g[23],g[24]!==a||g[25]!==u?(m=(0,r.jsxs)("div",{className:"d-flex gap-2 items-center justify-center",children:[a,u]}),g[24]=a,g[25]=u,g[26]=m):m=g[26],m}),g=e=>{let t,a,l,i=(0,n.c)(7),{header:s,children:o}=e;return i[0]!==s?(t=null!=s&&(0,r.jsx)("div",{className:d().chartTooltipHeader,children:s}),i[0]=s,i[1]=t):t=i[1],i[2]!==o?(a=(0,r.jsx)("div",{className:d().chartTooltipContent,children:o}),i[2]=o,i[3]=a):a=i[3],i[4]!==t||i[5]!==a?(l=(0,r.jsxs)("div",{className:d().chartTooltip,children:[t,a]}),i[4]=t,i[5]=a,i[6]=l):l=i[6],l}},34011:e=>{e.exports={tableWrapper:"Table_tableWrapper__u_gzk",tableBorderless:"Table_tableBorderless__C8oJ4",tableDensityZero:"Table_tableDensityZero___MyCd",tableDensityCompact:"Table_tableDensityCompact__VH49r",tableDensityComfortable:"Table_tableDensityComfortable__yAVt1",tableInteractive:"Table_tableInteractive__g4nmr",emptyMessage:"Table_emptyMessage__Grj3p",tableCellButton:"Table_tableCellButton__q1n1W",cursorColResize:"Table_cursorColResize__8J2BT"}},40228:(e,t,a)=>{"use strict";a.d(t,{S:()=>V});var r=a(6029),n=a(75155),l=a(55729),i=a(82203),s=a.n(i),o=a(11370),c=a(86508),d=a(35467),u=a(76089),h=a(82641),m=a(95991),g=a(37659),p=a(34834),x=a(3635),f=a(92789),y=a(43517),v=a(63085),j=a(25062),w=a(27166),b=a(24589),C=a(78341),k=a(41279),_=a(9841),S=a(45556),A=a(16232),D=a(6876),z=a(43152),T=a(6379),P=a(91021),E=a(57389),N=a(81973),M=a(15628),I=a(35871),L=a(11104),R=a(99082),K=a(88339);function F(e){let t,a,l,i,o,c,d,u,h,j,w,b,C,_,S,A,D,z,T,P,E,N,M,I,L,R=(0,n.c)(70),{activeClickPayload:K,buildSearchUrl:F,onDismiss:V}=e,Y=null!=K&&null!=K.activePayload&&K.activePayload.length>0;if(!Y)return null;if(R[0]!==K.activePayload||R[1]!==K.x||R[2]!==K.y||R[3]!==F||R[4]!==Y||R[5]!==V){let e,n,N,M=K.activePayload.filter(W).sort(X);R[27]===Symbol.for("react.memo_cache_sentinel")?(e={position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:199},R[27]=e):e=R[27],R[28]!==V?(C=(0,r.jsx)(m.Z,{children:(0,r.jsx)("div",{style:e,onClick:e=>{e.stopPropagation(),e.preventDefault(),V()},onMouseDown:B})}),R[28]=V,R[29]=C):C=R[29],l=g.A,E=Y,R[30]!==V?(o=e=>{e||V()},R[30]=V,R[31]=o):o=R[31],c="bottom-start",d=4,u=!0,h=!0,j=!0,w="md";let I=K.x??0,L=K.y??0;R[32]!==I||R[33]!==L?(b=(0,r.jsx)(g.A.Target,{children:(0,r.jsx)("div",{style:{position:"absolute",left:I,top:L,width:1,height:1,pointerEvents:"none"}})}),R[32]=I,R[33]=L,R[34]=b):b=R[34],a=g.A.Dropdown,D="xs",z=300,T=H,P=q,t=p.B,i="xs",R[35]===Symbol.for("react.memo_cache_sentinel")?(_={maxHeight:"220px",overflowY:"auto"},R[35]=_):_=R[35],R[36]!==F?(n=F()??"/search",R[36]=F,R[37]=n):n=R[37],R[38]===Symbol.for("react.memo_cache_sentinel")?(N=(0,r.jsxs)(x.Y,{gap:"xs",children:[(0,r.jsx)(k.A,{size:16}),"View All Events"]}),R[38]=N):N=R[38],R[39]!==V||R[40]!==n?(S=(0,r.jsx)(s(),{"data-testid":"chart-view-events-link",href:n,onClick:V,children:N}),R[39]=V,R[40]=n,R[41]=S):S=R[41],A=M.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.c,{}),(0,r.jsx)(y.E,{c:"gray.5",size:"xs",children:"Filter by group:"}),M.map((e,t)=>{let a=F(e.dataKey,e.value);return(0,r.jsx)(v.m,{label:e.name,withArrow:!0,color:"gray",position:"right",children:(0,r.jsx)(s(),{"data-testid":`chart-view-events-link-${e.dataKey}`,href:a??"/search",onClick:V,children:(0,r.jsxs)(x.Y,{gap:"xs",children:[(0,r.jsx)(k.A,{size:12}),(0,r.jsx)(y.E,{size:"xs",truncate:!0,flex:"1",children:e.name})]})})},t)})]}),R[0]=K.activePayload,R[1]=K.x,R[2]=K.y,R[3]=F,R[4]=Y,R[5]=V,R[6]=t,R[7]=a,R[8]=l,R[9]=i,R[10]=o,R[11]=c,R[12]=d,R[13]=u,R[14]=h,R[15]=j,R[16]=w,R[17]=b,R[18]=C,R[19]=_,R[20]=S,R[21]=A,R[22]=D,R[23]=z,R[24]=T,R[25]=P,R[26]=E}else t=R[6],a=R[7],l=R[8],i=R[9],o=R[10],c=R[11],d=R[12],u=R[13],h=R[14],j=R[15],w=R[16],b=R[17],C=R[18],_=R[19],S=R[20],A=R[21],D=R[22],z=R[23],T=R[24],P=R[25],E=R[26];return R[42]!==t||R[43]!==i||R[44]!==_||R[45]!==S||R[46]!==A?(N=(0,r.jsxs)(t,{gap:i,style:_,children:[S,A]}),R[42]=t,R[43]=i,R[44]=_,R[45]=S,R[46]=A,R[47]=N):N=R[47],R[48]!==a||R[49]!==N||R[50]!==D||R[51]!==z||R[52]!==T||R[53]!==P?(M=(0,r.jsx)(a,{p:D,maw:z,onClick:T,onMouseDown:P,children:N}),R[48]=a,R[49]=N,R[50]=D,R[51]=z,R[52]=T,R[53]=P,R[54]=M):M=R[54],R[55]!==l||R[56]!==o||R[57]!==c||R[58]!==d||R[59]!==u||R[60]!==h||R[61]!==j||R[62]!==w||R[63]!==b||R[64]!==M||R[65]!==E?(I=(0,r.jsxs)(l,{opened:E,onChange:o,position:c,offset:d,withinPortal:u,closeOnEscape:h,withArrow:j,shadow:w,children:[b,M]}),R[55]=l,R[56]=o,R[57]=c,R[58]=d,R[59]=u,R[60]=h,R[61]=j,R[62]=w,R[63]=b,R[64]=M,R[65]=E,R[66]=I):I=R[66],R[67]!==C||R[68]!==I?(L=(0,r.jsxs)(r.Fragment,{children:[C,I]}),R[67]=C,R[68]=I,R[69]=L):L=R[69],L}function q(e){return e.stopPropagation()}function H(e){return e.stopPropagation()}function B(e){e.stopPropagation()}function X(e,t){return t.value-e.value}function W(e){return null!=e.value&&!e.dataKey?.endsWith(z.wt)}let V=(0,l.memo)(function({config:e,disableQueryChunking:t,disableDrillDown:a,enableParallelQueries:n,enabled:i=!0,logReferenceTimestamp:s,onTimeRangeSelect:m,queryKeyPrefix:g,referenceLines:p,setDisplayType:f,showDisplaySwitcher:v=!0,showLegend:k=!0,sourceId:q,hiddenSeries:H,title:B,toolbarPrefix:X,toolbarSuffix:W,showMVOptimizationIndicator:V=!0,showDateRangeIndicator:Y=!0}){let[G,O]=(0,C.j)(!1),[$,Q]=(0,l.useState)(new Set),U=(0,l.useCallback)((e,t)=>{Q(a=>{let r=new Set(a);return t?r.has(e)?r.delete(e):r.add(e):r.has(e)&&1===r.size?r.clear():(r.clear(),r.add(e)),r})},[]),J=e.dateRange,{displayType:Z,dateRange:ee,granularity:et,fillNulls:ea}=(0,z.GJ)(e),er=(0,l.useMemo)(()=>(0,z.O7)(e),[e]),{data:en}=(0,E.d)(er),{data:el,isLoading:ei}=D.Ay.useMe(),{data:es,isLoading:eo,isError:ec,error:ed,isPlaceholderData:eu,isSuccess:eh}=(0,P.HD)(er,{placeholderData:e=>e,queryKey:[g,er,"chunked",{disableQueryChunking:t,enableParallelQueries:n,parallelizeWhenPossible:el?.team?.parallelizeWhenPossible}],enabled:i&&!ei,enableQueryChunking:!t,enableParallelQueries:n&&el?.team?.parallelizeWhenPossible}),em=(0,l.useMemo)(()=>{let e=!1===er.alignDateRangeToGranularity?(0,z.r4)(J):(0,u.Ol)((0,z.r4)(J),er.granularity);return{...er,dateRange:e}},[er,J]),eg=(0,l.useMemo)(()=>e.compareToPreviousPeriod?(0,o.A)(ee[0],em.dateRange[0]):void 0,[e.compareToPreviousPeriod,ee,em.dateRange]),{data:ep,isLoading:ex}=(0,P.HD)(em,{placeholderData:e=>e,queryKey:[g,em,"chunked"],enabled:!!(i&&e.compareToPreviousPeriod),enableQueryChunking:!0});(0,l.useEffect)(()=>{!ec&&G&&O.close()},[ec,G,O]);let ef=eo||ex||!es?.isComplete||e.compareToPreviousPeriod&&!ep?.isComplete||eu,{data:ey}=(0,N.Fo)({id:q||e.source}),{graphResults:ev,timestampColumn:ej,groupColumns:ew,valueColumns:eb,isSingleValueColumn:eC,lineData:ek}=(0,l.useMemo)(()=>{let t={graphResults:[],timestampColumn:void 0,lineData:[],groupColumns:[],valueColumns:[],isSingleValueColumn:!0};if(null==es||!eh)return t;try{return(0,z.zg)({currentPeriodResponse:es,previousPeriodResponse:e.compareToPreviousPeriod?ep:void 0,dateRange:ee,granularity:et,generateEmptyBuckets:(0,z.xu)(ea),source:ey,hiddenSeries:H,previousPeriodOffsetSeconds:eg})}catch(e){return console.error(e),t}},[es,ee,et,eh,ea,ey,e.compareToPreviousPeriod,ep,H,eg]),[e_,eS]=(0,l.useState)(Z),eA=(0,l.useMemo)(()=>f?Z:e_,[e_,Z,f]),eD=(0,l.useCallback)(e=>{f?f(e):eS(e)},[f]);(0,l.useEffect)(()=>{e.compareToPreviousPeriod&&eS(h.t2.Line)},[e.compareToPreviousPeriod]);let[ez,eT]=(0,l.useState)(void 0),eP=(0,l.useCallback)(e=>{null==ey||a||eT(e)},[ey,a]),eE=(0,l.useMemo)(()=>ez?.activeLabel!=null?new Date(1e3*Number.parseInt(ez.activeLabel)):void 0,[ez]),eN=(0,l.useCallback)((t,a)=>{let r;if(null==eE||null==ey)return null;let n=t?.split(z.Hx),l=[];if(n?.length&&ew?.length&&(!(eC??!0)||(ew?.length??0)===0&&(eb?.length??0)>0?n.slice(1):n).forEach((e,t)=>{null!=ew[t]&&l.push({column:ew[t],value:e})}),a&&Array.isArray(e.select)&&e.select.length>0){let t;if((eC??!0)&&1===e.select.length){let a=e.select[0],r="string"==typeof a?void 0:a.aggFn;z.gT.find(e=>e.value===r)?.isAttributable!==!1&&(t="string"==typeof a?a:a.valueExpression)}else if(n?.length&&(eb?.length??0)>0){let a=n[0],r=eb?.findIndex(e=>e===a);if(null!=r&&r>=0&&r<e.select.length){let a=e.select[r],n="string"==typeof a?void 0:a.aggFn;z.gT.find(e=>e.value===n)?.isAttributable!==!1&&(t="string"==typeof a?a:a.valueExpression)}}t&&(r={expression:t,value:a})}let i=(0,c.A)(eE,{seconds:(0,z.qL)(et)});return(0,z.VH)({source:ey,config:e,dateRange:[eE,i],groupFilters:l,valueRangeFilter:r})},[eE,e,et,ey,ew,eb,eC]),eM=(0,l.useMemo)(()=>{let t=[];X&&X.length>0&&t.push(...X),ey&&V&&t.push((0,r.jsx)(R.A,{config:er,source:ey,variant:"icon"},"db-time-chart-mv-indicator"));let a=en?.optimizedConfig?.dateRange,n=!1!==er.alignDateRangeToGranularity;if(Y&&(a||n)){let l=n?void 0:en?.explanations.find(e=>e.success)?.mvConfig.minGranularity;t.push((0,r.jsx)(I.A,{originalDateRange:e.dateRange,effectiveDateRange:a||er.dateRange,mvGranularity:l},"db-time-chart-date-range-indicator"))}return v&&t.push((0,r.jsx)(L.A,{value:eA,onChange:eD,options:[{value:h.t2.Line,label:"Display as Line Chart",icon:(0,r.jsx)(_.A,{})},{value:h.t2.StackedBar,label:e.compareToPreviousPeriod?"Bar Chart Unavailable When Comparing to Previous Period":"Display as Bar Chart",icon:(0,r.jsx)(S.A,{}),disabled:e.compareToPreviousPeriod}]},"db-time-chart-display-switcher")),W&&W.length>0&&t.push(...W),t},[e,eA,eD,v,ey,X,W,V,Y,en,er]);return(0,r.jsx)(M.A,{title:B,toolbarItems:eM,children:eo&&!es?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):ec?(0,r.jsxs)("div",{className:"h-100 w-100 d-flex g-1 flex-column align-items-center justify-content-center text-muted overflow-auto",children:[(0,r.jsx)(y.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsx)(j.$,{className:"mx-auto",variant:"danger",onClick:()=>O.open(),children:(0,r.jsxs)(x.Y,{gap:"xxs",children:[(0,r.jsx)(A.A,{size:16}),"See Error Details"]})}),(0,r.jsx)(w.a,{opened:G,onClose:()=>O.close(),title:"Error Details",children:(0,r.jsxs)(x.Y,{align:"start",children:[(0,r.jsx)(y.E,{size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(b.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:ed.message}),ed instanceof d.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(K.V,{data:ed?.query})]})]})})]}):0===ev.length?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F,{activeClickPayload:ez,buildSearchUrl:eN,onDismiss:()=>eT(void 0)}),(0,r.jsx)(T.FC,{dateRange:ee,displayType:eA,graphResults:ev,isClickActive:ez,lineData:ek,isLoading:ef,logReferenceTimestamp:s,numberFormat:e.numberFormat,onTimeRangeSelect:m,referenceLines:p,setIsClickActive:eP,showLegend:k,timestampKey:ej?.name,previousPeriodOffsetSeconds:eg,selectedSeriesNames:$,onToggleSeries:U,granularity:et,dateRangeEndInclusive:er.dateRangeEndInclusive})]})})})},43736:e=>{e.exports={legend:"HDXLineChart_legend__lPU01",legendItem:"HDXLineChart_legendItem____Qwu",legendMoreLink:"HDXLineChart_legendMoreLink__16Wq1",legendTooltipContent:"HDXLineChart_legendTooltipContent__tHXLT",chartTooltip:"HDXLineChart_chartTooltip__hEAmh",chartTooltipHeader:"HDXLineChart_chartTooltipHeader__l9Fb7",chartTooltipContent:"HDXLineChart_chartTooltipContent__vtVBK"}},48423:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var r=a(6029),n=a(75828),l=a.n(n),i=a(3635),s=a(43517),o=a(25062),c=a(97767),d=a(67872),u=a(2485),h=a(79220),m=a(68593),g=a(34011),p=a.n(g);function x({isLast:e,header:t,lastItemButtons:a}){return(0,r.jsx)("th",{className:"overflow-hidden",colSpan:t.colSpan,style:{width:t.getSize()===m.k?"100%":t.getSize(),minWidth:t.getSize()===m.k?0:t.getSize()},children:(0,r.jsxs)(i.Y,{wrap:"nowrap",gap:0,align:"center",children:[t.column.getCanSort()?(0,r.jsx)(o.$,{size:"xxs",p:1,variant:"subtle",color:"gray",onClick:t.column.getToggleSortingHandler(),flex:"1",justify:"space-between","data-testid":"raw-log-table-sort-button",children:(0,r.jsxs)(r.Fragment,{children:[t.isPlaceholder?null:(0,r.jsx)(s.E,{truncate:"end",size:"xs",flex:"1",children:(0,h.Kv)(t.column.columnDef.header,t.getContext())}),t.column.getIsSorted()&&(0,r.jsx)("div",{"data-testid":"raw-log-table-sort-indicator",className:"asc"===t.column.getIsSorted()?"sorted-asc":"sorted-desc",children:(0,r.jsx)(r.Fragment,{children:"asc"===t.column.getIsSorted()?(0,r.jsx)(c.A,{size:12}):(0,r.jsx)(d.A,{size:12})})})]})}):(0,r.jsx)(s.E,{truncate:"end",size:"xs",flex:"1",children:(0,h.Kv)(t.column.columnDef.header,t.getContext())}),(0,r.jsxs)(i.Y,{gap:0,wrap:"nowrap",align:"center",children:[t.column.getCanResize()&&!e&&(0,r.jsx)("div",{onMouseDown:t.getResizeHandler(),onTouchStart:t.getResizeHandler(),className:l()(`resizer ${p().cursorColResize}`,t.column.getIsResizing()&&"isResizing"),children:(0,r.jsx)(u.A,{size:12})}),e&&(0,r.jsx)(i.Y,{gap:2,wrap:"nowrap",children:a})]})]})},t.id)}},55024:(e,t,a)=>{"use strict";a.d(t,{u:()=>n});var r=a(75155);let n=(e,t,a)=>{let n,l,i=(0,r.c)(14);i[0]!==a?(n=void 0===a?{}:a,i[0]=a,i[1]=n):n=i[1];let{maxRows:s,groupColumnName:o}=n,c=void 0===s?4e3:s;e:{let a,r;if(!Array.isArray(e)||0===e.length||!Array.isArray(t)||0===t.length){let e,t;i[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],i[2]=e):e=i[2],i[3]!==c?(t={csvData:e,maxRows:c,isDataEmpty:!0,actualRowCount:0,isLimited:!1},i[3]=c,i[4]=t):t=i[4],l=t;break e}i[5]!==t||i[6]!==e||i[7]!==o||i[8]!==c?(a=((e,t,a={})=>{let{groupColumnName:r}=a;if(!Array.isArray(e))return console.warn("CSV Export: data must be an array"),[];if(!Array.isArray(t)||0===t.length)return console.warn("CSV Export: columns must be a non-empty array"),[];let n=t.filter(e=>!e||"string"!=typeof e.dataKey||"string"!=typeof e.displayName);return n.length>0?(console.warn("CSV Export: Invalid column structure detected",n),[]):e.filter(e=>null!=e&&"object"==typeof e).map((e,a)=>{try{return{...null!=r?{[r]:e.group??""}:{},...Object.fromEntries(t.map(({displayName:t,dataKey:a})=>{let r=e[a];return null==r?[t,""]:"object"==typeof r?[t,JSON.stringify(r)]:[t,String(r)]}))}}catch(e){return console.warn(`CSV Export: Error processing row ${a}:`,e),{}}}).filter(e=>Object.keys(e).length>0)})(e.slice(0,c),t,{groupColumnName:o}),i[5]=t,i[6]=e,i[7]=o,i[8]=c,i[9]=a):a=i[9];let n=a,s=e.length>c;i[10]!==n||i[11]!==c||i[12]!==s?(r={csvData:n,maxRows:c,isDataEmpty:!1,actualRowCount:n.length,isLimited:s},i[10]=n,i[11]=c,i[12]=s,i[13]=r):r=i[13],l=r}return l}},68593:(e,t,a)=>{"use strict";a.d(t,{k:()=>r});let r=99999},78744:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var r=a(75155),n=a(67264),l=a.n(n),i=a(67270),s=a(76089),o=a(93251),c=a(95099),d=a(6876),u=a(49672),h=a(78550),m=a(57389),g=a(81973),p=a(92917),x=a(69519);let f=async({queryKey:e,pageParam:t,signal:a,meta:r})=>{if(null==r)throw Error("Query missing client meta");let{queryClient:n,metadata:l,hasPreviousQueries:o,optimizedConfig:c,source:d}=r,h=!o||t.offset>0||t.windowIndex>0,m=e[2],g=(0,u.W)({queryTimeout:m}),p=e[1],f=c??p,y=(0,s.jN)(f)?function(e,t){let[a,r]=e.dateRange,n=((0,s.es)(e.orderBy)?(0,x.Me)(a,r):(0,x.so)(a,r))[t.windowIndex];if(null==n)throw Error("Invalid time window for page param");return n}(f,t):{startTime:f.dateRange[0],endTime:f.dateRange[1],windowIndex:0,direction:"DESC"},v={...f,dateRange:[y.startTime,y.endTime],limit:{limit:f.limit?.limit,offset:t.offset}},j=await (0,i.PV)(v,l,d?.querySettings),w=m?new AbortController:void 0;w&&m&&setTimeout(()=>w.abort(),1e3*m);let b=(await g.query({query:j.sql,query_params:j.params,format:"JSONCompactEachRowWithNamesAndTypes",abort_signal:w?.signal||a,connectionId:f.connection})).stream().getReader(),C=[];h&&n.setQueryData(e,e=>{let a={data:[],meta:[],chSql:{sql:"",params:{}},window:y};return null==e?{pages:[a],pageParams:[t]}:{pages:[...e.pages,a],pageParams:[...e.pageParams,t]}});let k=[],_=[];async function S(){let{done:a,value:r}=await b.read();if(!a&&null!=r){if(C.push(...r),C.length>=2){let a=r;if(0===k.length){let e=C[0].json(),t=C[1].json();if(e.length!==t.length)throw Error("Invalid JSONCompactEachRowWithNamesAndTypes header rows");for(let a=0;a<e.length;a++)k.push({name:e[a],type:t[a]});a=a.slice(2)}let l=[];for(let e=0;e<a.length;e++){let t=a[e].json(),r={};for(let e=0;e<t.length;e++)r[k[e].name]=t[e];l.push(r),_.push(r)}h&&n.setQueryData(e,e=>{if(null==e)return{pages:[{data:l,meta:k,chSql:j,window:y}],pageParams:[t]};let a=e.pages.slice(0,-1),r=e.pages[e.pages.length-1];return{pages:[...a,{...r,data:[...r.data??[],...l],meta:k,chSql:j,window:y}],pageParams:e.pageParams}})}return await S()}}function A(){n.setQueryData(e,e=>{if(null!=e)return{pages:e.pages.slice(0,-1),pageParams:e.pageParams.slice(0,-1)}})}try{await S()}catch(e){throw h&&A(),e}if(!h)return{data:_,meta:k,chSql:j,window:y};let D=n.getQueryData(e);if(null==D)throw Error("Data not found in cache");let{pages:z}=D,T=z[z.length-1];return A(),T};function y(e,t){var a;let n,i,u,y,j,w,b,C,k,_,S=(0,r.c)(35),{isLive:A,enabled:D,queryKeyPrefix:z}=void 0===t?{}:t,T=void 0===D||D,P=void 0===z?"":z,{data:E,isLoading:N}=d.Ay.useMe(),M=[P,e,E?.team?.queryTimeout],I=(0,o.jE)(),L=(0,h.Ge)(),R=I.getQueriesData({queryKey:[P,(0,p.cJ)(e,["dateRange"])]}).filter(v).length>0,K=!!T;S[0]!==K?(n={enabled:K,placeholderData:void 0},S[0]=K,S[1]=n):n=S[1];let{data:F,isLoading:q}=(0,m.d)(e,n),H=e?.source;S[2]!==H?(i={id:H},S[2]=H,S[3]=i):i=S[3];let{data:B,isLoading:X}=(0,g.Fo)(i);S[4]!==A?(u=e=>A?e:void 0,S[4]=A,S[5]=u):u=S[5];let W=T&&!N&&!q&&!X;S[6]===Symbol.for("react.memo_cache_sentinel")?(y={windowIndex:0,offset:0},S[6]=y):y=S[6],S[7]!==e?(j=(t,a)=>(function(e,t,a){if(null==e)return;let[r,n]=a.dateRange,l=(0,s.es)(a.orderBy)?(0,x.Me)(r,n):(0,x.so)(r,n),i=e.window,o=t.filter(e=>e.window.windowIndex===i.windowIndex).reduce((e,t)=>e+t.data.length,0);if(e.data.length>0)return{windowIndex:i.windowIndex,offset:o};let c=(0,s.jN)(a),d=i.windowIndex+1;if(c&&d<l.length)return{windowIndex:d,offset:0}})(t,a,e),S[7]=e,S[8]=j):j=S[8];let V=F?.optimizedConfig;S[9]!==R||S[10]!==L||S[11]!==I||S[12]!==B||S[13]!==V?(w={queryClient:I,hasPreviousQueries:R,metadata:L,optimizedConfig:V,source:B},S[9]=R,S[10]=L,S[11]=I,S[12]=B,S[13]=V,S[14]=w):w=S[14];let Y=w;S[15]!==A?(b=A?l()("30s"):l()("5m"),S[15]=A,S[16]=b):b=S[16];let G=A?5:void 0;S[17]!==M||S[18]!==j||S[19]!==Y||S[20]!==b||S[21]!==G||S[22]!==u||S[23]!==W?(C={queryKey:M,placeholderData:u,enabled:W,initialPageParam:y,getNextPageParam:j,staleTime:1/0,meta:Y,queryFn:f,gcTime:b,retry:1,refetchOnWindowFocus:!1,maxPages:G},S[17]=M,S[18]=j,S[19]=Y,S[20]=b,S[21]=G,S[22]=u,S[23]=W,S[24]=C):C=S[24];let{data:O,fetchNextPage:$,hasNextPage:Q,isFetching:U,isError:J,error:Z,isLoading:ee}=(0,c.q)(C);S[25]!==O?(k=null==(a=O)||0===a.pages.length?null:{meta:a.pages[0].meta,data:a.pages.flatMap(e=>e.data),chSql:a.pages[0].chSql,window:a.pages[a.pages.length-1].window},S[25]=O,S[26]=k):k=S[26];let et=k,ea=U||N||q,er=ee||N||q;return S[27]!==Z||S[28]!==$||S[29]!==et||S[30]!==Q||S[31]!==J||S[32]!==ea||S[33]!==er?(_={isError:J,error:Z,data:et,fetchNextPage:$,hasNextPage:Q,isFetching:ea,isLoading:er},S[27]=Z,S[28]=$,S[29]=et,S[30]=Q,S[31]=J,S[32]=ea,S[33]=er,S[34]=_):_=S[34],_}function v(e){let[,t]=e;return null!=t}},88339:(e,t,a)=>{"use strict";a.d(t,{A:()=>y,V:()=>f});var r=a(6029),n=a(75155),l=a(55729),i=a(65234),s=a.n(i),o=a(15215),c=a(73854),d=a(25062),u=a(22623),h=a(90515),m=a(45172),g=a(95352),p=a(91021);function x(e){let t,a,i,o,c=(0,n.c)(12),{text:u,size:g}=e,p=void 0===g?"md":g,[x,f]=(0,l.useState)(!1),y="xs"===p?14:16,v="xs"===p?"compact-xs":"sm",j=(void 0===u?"":u)??"";c[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>f(!0),c[0]=t):t=c[0];let w=x?"light":"default";c[1]!==x||c[2]!==y?(a=x?(0,r.jsx)(h.A,{size:y,className:"me-2"}):(0,r.jsx)(m.A,{size:y,className:"me-2"}),c[1]=x,c[2]=y,c[3]=a):a=c[3];let b=x?"Copied!":"Copy";return c[4]!==v||c[5]!==w||c[6]!==a||c[7]!==b?(i=(0,r.jsxs)(d.$,{variant:w,size:v,className:"position-absolute top-0 end-0",children:[a,b]}),c[4]=v,c[5]=w,c[6]=a,c[7]=b,c[8]=i):i=c[8],c[9]!==j||c[10]!==i?(o=(0,r.jsx)(s(),{text:j,onCopy:t,children:i}),c[9]=j,c[10]=i,c[11]=o):o=c[11],o}function f(e){let t,a,l,i,s,d,u=(0,n.c)(14),{data:h,formatData:m,enableCopy:p,copyButtonSize:f}=e,y=void 0===m||m,v=void 0!==p&&p,j=void 0===f?"md":f;u[0]!==h||u[1]!==y?(t=y?function(e){try{if(null!=e)return(0,c.GP)(e);return e}catch{return e}}(h):h,u[0]=h,u[1]=y,u[2]=t):t=u[2];let w=t;return u[3]===Symbol.for("react.memo_cache_sentinel")?(a={lineNumbers:!1,foldGutter:!1,highlightActiveLine:!1,highlightActiveLineGutter:!1},l=[(0,o.ll)()],u[3]=a,u[4]=l):(a=u[3],l=u[4]),u[5]!==w?(i=(0,r.jsx)(g.Ay,{indentWithTab:!1,value:w,theme:"dark",basicSetup:a,extensions:l,editable:!1}),u[5]=w,u[6]=i):i=u[6],u[7]!==j||u[8]!==w||u[9]!==v?(s=v&&(0,r.jsx)(x,{text:w,size:j}),u[7]=j,u[8]=w,u[9]=v,u[10]=s):s=u[10],u[11]!==i||u[12]!==s?(d=(0,r.jsxs)("div",{className:"position-relative",children:[i,s]}),u[11]=i,u[12]=s,u[13]=d):d=u[13],d}function y(e){let t,a,l=(0,n.c)(3),{config:i}=e,{data:s}=(0,p.zu)(i);return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={overflow:"hidden"},l[0]=t):t=l[0],l[1]!==s?(a=(0,r.jsx)(u.t,{flex:"auto",shadow:"none",radius:"sm",style:t,children:(0,r.jsx)(f,{data:s,formatData:!1})}),l[1]=s,l[2]=a):a=l[2],a}},99082:(e,t,a)=>{"use strict";a.d(t,{A:()=>M});var r=a(6029),n=a(75155),l=a(55729),i=a(63085),s=a(76013),o=a(43085),c=a(15683),d=a(27798),u=a(57389),h=a(27166),m=a(43517),g=a(45005),p=a(3635),x=a(39603),f=a(76089),y=a(34834),v=a(48378),j=a(46181),w=a(11088),b=a(67747),C=a(7565);function k({config:e}){let t=(0,l.useMemo)(()=>(0,f.AB)(e.dimensionColumns),[e.dimensionColumns]),a=(0,l.useMemo)(()=>{let t=new Map;for(let{sourceColumn:a="",aggFn:r}of e.aggregatedColumns)t.has(a)?t.get(a)?.push(r):t.set(a,[r]);return Array.from(t.entries()).sort(([e],[t])=>e.localeCompare(t))},[e.aggregatedColumns]);return(0,r.jsxs)(y.B,{gap:"md",children:[(0,r.jsxs)(v.x,{columns:2,children:[(0,r.jsxs)(v.x.Col,{span:1,children:[(0,r.jsxs)(p.Y,{align:"center",mb:"xs",gap:"xs",children:[(0,r.jsx)(m.E,{size:"sm",fw:500,children:"Granularity"}),(0,r.jsx)(i.m,{multiline:!0,maw:400,label:`
              The size of the time buckets into which data is pre-aggregated. 
              Aggregate values can vary slightly between materialized views and the base source 
              table when the selected time range does not align with the view's granularity.
            `,children:(0,r.jsx)(b.A,{size:16})})]}),(0,r.jsx)(j.a,{children:e.minGranularity})]}),e.minDate&&(0,r.jsxs)(v.x.Col,{span:1,children:[(0,r.jsx)(m.E,{size:"sm",fw:500,mb:"xs",children:"Minimum Date"}),(0,r.jsx)(j.a,{children:(0,r.jsx)(C.H,{value:e.minDate,format:"withYear"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.E,{size:"sm",fw:500,mb:"xs",children:"Available Group and Filter Columns"}),(0,r.jsx)(p.Y,{gap:"xs",children:t.map(e=>(0,r.jsx)(j.a,{children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.E,{size:"sm",fw:500,mb:"sm",children:"Available Aggregated Columns"}),(0,r.jsxs)(w.X,{children:[(0,r.jsx)(w.X.Thead,{children:(0,r.jsxs)(w.X.Tr,{children:[(0,r.jsx)(w.X.Th,{children:"Column"}),(0,r.jsx)(w.X.Th,{children:"Aggregation"})]})}),(0,r.jsx)(w.X.Tbody,{children:a.map(([e,t])=>(0,r.jsxs)(w.X.Tr,{children:[(0,r.jsx)(w.X.Td,{children:e}),(0,r.jsx)(w.X.Td,{children:(0,r.jsx)(p.Y,{gap:"xs",children:t.map(e=>(0,r.jsx)(j.a,{children:e},e))})})]},e))})]})]})]})}function _(e){return`mv-${e.databaseName}-${e.tableName}`}function S(e){let t,a,l,s,c,d,u,f,y,v,j,w,b=(0,n.c)(33),{mvConfigs:C,explanations:S,opened:T,onClose:P}=e,E=C.length>1;b[0]!==S?(t=new Map(S.map(z)),b[0]=S,b[1]=t):t=b[1];let N=t;if(b[2]!==S||b[3]!==E||b[4]!==P||b[5]!==T){let e=S.find(D)?.mvConfig;l=h.a,c=E?"Materialized Views":"Materialized View",d=T,u=P,f="lg";let t=E?"materialized views":"a materialized view";b[14]!==t?(y=(0,r.jsxs)(m.E,{size:"sm",mb:"sm",children:["This source is configured with"," ",t," for accelerating some aggregations."]}),b[14]=t,b[15]=y):y=b[15],a=g.n,s=e&&_(e),b[2]=S,b[3]=E,b[4]=P,b[5]=T,b[6]=a,b[7]=l,b[8]=s,b[9]=c,b[10]=d,b[11]=u,b[12]=f,b[13]=y}else a=b[6],l=b[7],s=b[8],c=b[9],d=b[10],u=b[11],f=b[12],y=b[13];if(b[16]!==N||b[17]!==C){let e;b[19]!==N?(e=e=>{let t=_(e),a=N.get(t),n=!!a?.errors.length,l=a?.success,s=a?.rowEstimate?.toLocaleString()??"N/A";return(0,r.jsxs)(g.n.Item,{value:t,children:[(0,r.jsx)(g.n.Control,{px:"xs",children:(0,r.jsxs)(p.Y,{justify:"space-between",children:[(0,r.jsx)(m.E,{children:e.tableName}),l?(0,r.jsx)(i.m,{label:`Estimated rows scanned: ${s}`,children:(0,r.jsx)(o.E,{me:"md",color:"var(--color-bg-success)",children:"Active"})}):n?(0,r.jsx)(i.m,{label:"This materialized view is not compatible with the selected query.",children:(0,r.jsx)(o.E,{me:"md",color:"var(--color-bg-warning)",children:"Incompatible"})}):a?(0,r.jsx)(i.m,{label:`Estimated rows scanned: ${s}`,children:(0,r.jsx)(o.E,{me:"md",color:"gray",children:"Skipped"})}):null]})}),(0,r.jsx)(g.n.Panel,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k,{config:e}),n&&(0,r.jsxs)(x.F,{color:"red",mt:"xs",children:[(0,r.jsx)(m.E,{size:"sm",fw:500,mb:"xs",children:"The query cannot be accelerated using this materialized view for the following reason(s):"}),a.errors.map(A)]})]})})]},t)},b[19]=N,b[20]=e):e=b[20],v=C.map(e),b[16]=N,b[17]=C,b[18]=v}else v=b[18];return b[21]!==a||b[22]!==s||b[23]!==v?(j=(0,r.jsx)(a,{defaultValue:s,children:v}),b[21]=a,b[22]=s,b[23]=v,b[24]=j):j=b[24],b[25]!==l||b[26]!==c||b[27]!==d||b[28]!==u||b[29]!==f||b[30]!==y||b[31]!==j?(w=(0,r.jsxs)(l,{title:c,opened:d,onClose:u,size:f,children:[y,j]}),b[25]=l,b[26]=c,b[27]=d,b[28]=u,b[29]=f,b[30]=y,b[31]=j,b[32]=w):w=b[32],w}function A(e,t){return(0,r.jsx)(m.E,{size:"sm",mt:"xs",children:e},t)}function D(e){return e.success}function z(e){return[_(e.mvConfig),e]}let T="var(--color-bg-warning)",P="var(--color-bg-success)";function E(e){let t,a=(0,n.c)(3),{isInWarningState:l,onClick:o}=e;return a[0]!==l||a[1]!==o?(t=l?(0,r.jsx)(i.m,{label:"Not Accelerated",children:(0,r.jsx)(s.M,{onClick:o,children:(0,r.jsx)(c.A,{size:16,color:T})})}):(0,r.jsx)(i.m,{label:"Accelerated",children:(0,r.jsx)(s.M,{onClick:o,children:(0,r.jsx)(d.A,{size:18,color:P})})}),a[0]=l,a[1]=o,a[2]=t):t=a[2],t}function N(e){let t,a=(0,n.c)(4),{isInWarningState:l,onClick:i}=e,s=l?T:P,c=l?"Not Accelerated":"Accelerated";return a[0]!==i||a[1]!==s||a[2]!==c?(t=(0,r.jsx)(o.E,{color:s,onClick:i,className:"cursor-pointer",children:c}),a[0]=i,a[1]=s,a[2]=c,a[3]=t):t=a[3],t}function M(e){let t,a,i,s,o=(0,n.c)(12),{source:c,config:d,variant:h}=e,m=void 0===h?"badge":h,[g,p]=(0,l.useState)(!1),{data:x}=(0,u.d)(d);o[0]!==c.materializedViews?(t=c.materializedViews??[],o[0]=c.materializedViews,o[1]=t):t=o[1];let f=t;if(!f?.length)return null;let y=!!d&&!!x&&!x?.optimizedConfig;return o[2]!==y||o[3]!==m?(a="icon"===m?(0,r.jsx)(E,{isInWarningState:y,onClick:()=>p(!0)}):(0,r.jsx)(N,{isInWarningState:y,onClick:()=>p(!0)}),o[2]=y,o[3]=m,o[4]=a):a=o[4],o[5]!==x||o[6]!==g||o[7]!==f?(i=x&&(0,r.jsx)(S,{mvConfigs:f,explanations:x.explanations,opened:g,onClose:()=>p(!1)}),o[5]=x,o[6]=g,o[7]=f,o[8]=i):i=o[8],o[9]!==a||o[10]!==i?(s=(0,r.jsxs)(r.Fragment,{children:[a,i]}),o[9]=a,o[10]=i,o[11]=s):s=o[11],s}}}]);