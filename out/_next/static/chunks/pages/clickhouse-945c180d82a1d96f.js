(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5380],{225:(e,t,s)=>{"use strict";s.d(t,{z:()=>i});var a=s(6029),n=s(75155),r=s(98142);let i=()=>{let e,t=(0,n.c)(2);if(r.bp){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("span",{children:["Please open an issue on"," ",(0,a.jsx)("a",{href:"https://github.com/hyperdxio/hyperdx/issues",target:"_blank",children:"GitHub"}),"."]}),t[0]=e):e=t[0],e}return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("span",{children:"Please contact support."}),t[1]=e):e=t[1],e}},1639:(e,t,s)=>{"use strict";s.d(t,{A:()=>L});var a=s(6029),n=s(75155),r=s(55729),i=s(71024),l=s.n(i),o=s(92884),c=s(36006),d=s.n(c),u=s(35467),m=s(76089),h=s(43517),p=s(60481),x=s(25062),g=s(3635),f=s(27166),b=s(24589),y=s(92789),v=s(78341),_=s(88849),j=s(16232),S=s(43152),w=s(91021),E=s(7565),C=s(92917),N=s(15628),k=s(88339);let A=["rgba(253, 231, 37, 1.0)","rgba(181, 222, 43, 0.92)","rgba(110, 206, 88, 0.9)","rgba(53, 183, 121, 0.8)","rgba(31, 158, 137, 0.8)","rgba(38, 130, 142, 0.7)","rgba(49, 104, 142, 0.7)","rgba(62, 73, 137, 0.7)","hsla(259, 35%, 25%, 0.7)"].reverse(),T={stroke:"rgba(102,102,102,1)",font:"12px IBM Plex Mono, monospace",grid:{show:!0,stroke:"rgba(52,58,64)",dash:[3,3],width:1},border:{show:!0,stroke:"rgba(102,102,102,1)",width:1}},I={width:1500,height:600,mode:2,ms:1,legend:{show:!1},scales:{x:{time:!0}},axes:[{...T},{...T}],series:[{},{label:"Latency",paths:function(e){let{disp:t}=e;return(e,s,a,n)=>(o.default.orient(e,s,(a,n,r,i,l,o,c,d,u,m,h,p,x,g,f)=>{let[b,y,v]=e.data[s],_=b.length,j=t.fill.values(e,s),S=t.fill.lookup??[...new Set(j)],w=S.map(e=>new Path2D),E=_-y.lastIndexOf(y[0]),C=y[1]-y[0],N=o(b[E]-b[0],i,m,d)-o(0,i,m,d),k=c(C,l,h,u)-c(0,l,h,u),A=y.slice(0,E).map(e=>Math.round(c(e,l,h,u)-k/2)),T=Array.from({length:_/E},(e,t)=>Math.round(o(b[t*E],i,m,d)-N/2));for(let e=0;e<_;e++)if(v[e]>0&&b[e]>=(i.min??-1/0)&&b[e]<=(i.max??1/0)&&y[e]>=(l.min??-1/0)&&y[e]<=(l.max??1/0)){let t=T[~~(e/E)],s=A[e%E];g(w[j[e]],t,s,N,k)}e.ctx.save(),e.ctx.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),w.forEach((t,s)=>{e.ctx.fillStyle=S[s],e.ctx.fill(t)}),e.ctx.restore()}),null)}({disp:{fill:{lookup:A,values:(e,t)=>{let s=e.data[t][2],a=1/0,n=-1/0;for(let e=0;e<s.length;e++)s[e]>0&&(a=Math.min(a,s[e]),n=Math.max(n,s[e]));let r=e=>Math.log(e)/Math.log(20),i=r(n)-r(a),l=A.length,o=Array(s.length);for(let e=0;e<s.length;e++)o[e]=0===s[e]?-1:Math.max(Math.min(l-1,Math.floor(Math.max(l*(r(s[e])-r(a)),1e-32)/i)),0);return o}}}}),facets:[{scale:"x",auto:!0,sorted:1},{scale:"y",auto:!0}]}]};function R(e){let t,s,r,i,l,o,c=(0,n.c)(18),{config:d,enabled:y,onFilter:_,title:E,toolbarPrefix:C,toolbarSuffix:A}=e,T=void 0===y||y,I=d.dateRange,R=(0,m.tA)(I,245),L=d.select[0].valueExpression,M=d.select[0].countExpression??"count()";c[0]!==L?(t=(0,S.eY)(L),c[0]=L,c[1]=t):t=c[1];let z=t;c[2]!==d||c[3]!==z||c[4]!==L?(s=z?{...d,where:"",orderBy:void 0,granularity:void 0,select:[{aggFn:"min",aggCondition:"value_calc >= 0",aggConditionLanguage:"sql",valueExpression:"value_calc",alias:"min"},{aggFn:"max",valueExpression:"value_calc",alias:"max"}],with:[{name:"min_max_calc",chartConfig:{...d,select:[{valueExpression:L,alias:"value_calc"}],orderBy:void 0}}],timestampValueExpression:"__hdx_time_bucket",from:{databaseName:"",tableName:"min_max_calc"}}:{...d,orderBy:void 0,granularity:void 0,select:[{aggFn:"min",valueExpression:L,aggCondition:`${L} >= 0`,aggConditionLanguage:"sql",alias:"min"},{aggFn:"max",valueExpression:L,aggCondition:"",alias:"max"}]},c[2]=d,c[3]=z,c[4]=L,c[5]=s):s=c[5];let D=s;c[6]!==D?(r=["heatmap",D],c[6]=D,c[7]=r):r=c[7],c[8]!==T||c[9]!==r?(i={queryKey:r,enabled:T},c[8]=T,c[9]=r,c[10]=i):i=c[10];let{data:P,isLoading:F,error:O}=(0,w.HD)(D,i),[V,B]=(0,v.j)(),H=Number.parseInt(P?.data?.[0]?.min??"0",10),W=Number.parseInt(P?.data?.[0]?.max??"0",10),q=z?{...d,where:"",select:[{valueExpression:"sum(value_count)",alias:"count"}],groupBy:[{valueExpression:`widthBucket(value_calc, ${H}, ${W}, 80)`,alias:"x_bucket"}],with:[{name:"bucket_calc",chartConfig:{...d,select:[{valueExpression:L,alias:"value_calc"},{valueExpression:M,alias:"value_count"}],granularity:R,orderBy:void 0}}],timestampValueExpression:"__hdx_time_bucket",from:{databaseName:"",tableName:"bucket_calc"},orderBy:[{valueExpression:"x_bucket",ordering:"ASC"}],granularity:R}:{...d,select:[{valueExpression:M,alias:"count"}],groupBy:[{valueExpression:`widthBucket(${L}, ${H}, ${W}, 80)`,alias:"x_bucket"}],orderBy:[{valueExpression:"x_bucket",ordering:"ASC"}],granularity:R},{data:J,isLoading:K,error:G}=(0,w.HD)(q,{queryKey:["heatmap_bucket",q],enabled:!!P&&null!=q}),Y=(0,S.Ht)(I[0],I[1],R),U=(0,u.zo)(J?.meta??[]),Z=[],X=[],Q=[];if(null!=J&&null!=U){let e=0;for(let t=0;t<Y.length;t++){let s=Y[t].getTime();for(let t=0;t<=81;t++){let a=J?.data?.[e];null!=a&&new Date(a[U.name]).getTime()==s&&a.x_bucket==t?(Z.push(new Date(a[U.name]).getTime()),X.push(H+a.x_bucket*((W-H)/80)),Q.push(Number.parseInt(a.count,10)),e++):(Z.push(s),X.push(H+(W-H)/80*t),Q.push(0))}}}c[11]!==C||c[12]!==A?(l=[],C&&C.length>0&&l.push(...C),A&&A.length>0&&l.push(...A),c[11]=C,c[12]=A,c[13]=l):l=c[13];let ee=l,et=G||O,es=K||F?(0,a.jsx)(h.E,{size:"sm",ta:"center",p:"xl",children:"Loading..."}):et?(0,a.jsxs)(p.a,{p:"xl",ta:"center",h:"100%",children:[(0,a.jsx)(h.E,{size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,a.jsx)(x.$,{className:"mx-auto",variant:"subtle",color:"red",onClick:()=>B.open(),children:(0,a.jsxs)(g.Y,{gap:"xxs",children:[(0,a.jsx)(j.A,{size:16}),"See Error Details"]})}),(0,a.jsx)(f.a,{opened:V,onClose:()=>B.close(),title:"Error Details",children:(0,a.jsxs)(g.Y,{align:"start",children:[(0,a.jsx)(h.E,{size:"sm",ta:"center",children:"Error Message:"}),(0,a.jsx)(b.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:et.message}),et instanceof u.p1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,a.jsx)(k.V,{data:et?.query,enableCopy:!0})]})]})})]}):Z.length<2||Y?.length<2?(0,a.jsx)(h.E,{size:"sm",ta:"center",p:"xl",children:"Not enough data points to render heatmap. Try expanding your search criteria."}):(0,a.jsx)($,{data:[Z,X,Q],numberFormat:d.numberFormat,onFilter:_},JSON.stringify(d));return c[14]!==es||c[15]!==E||c[16]!==ee?(o=(0,a.jsx)(N.A,{title:E,toolbarItems:ee,disableReactiveContainer:!0,children:es}),c[14]=es,c[15]=E,c[16]=ee,c[17]=o):o=c[17],o}let L=l()(()=>Promise.resolve(R),{ssr:!1});function $(e){let t,s,i,l,o,c,u,m,p,x,g,f,b,v,j,S,w,N,k=(0,n.c)(41),{data:A,numberFormat:T,onFilter:R}=e,[L,$]=(0,r.useState)(void 0),[z,D]=(0,r.useState)(void 0),{ref:P,width:F,height:O}=(0,_.L)();k[0]!==T?(t=e=>T?(0,C.ZV)(e,{...T,average:!0,mantissa:0,unit:void 0}):new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e),k[0]=T,k[1]=t):t=k[1];let V=t;k[2]!==V?(s=null!=I&&null!=I.axes?{axes:[I.axes[0],{...I.axes[1],values:(e,t)=>t.map(V)}]}:{},k[2]=V,k[3]=s):s=k[3],k[4]===Symbol.for("react.memo_cache_sentinel")?(i={setScale:!1,x:!0,y:!0,dist:5},k[4]=i):i=k[4],k[5]===Symbol.for("react.memo_cache_sentinel")?(l={drag:i,show:!0,focus:{prox:100}},k[5]=l):l=k[5],k[6]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{let{xVal:t,yVal:s,countVal:a,closestDistance:n,closestIndex:r,xCoord:i,yCoord:l,xSize:o,ySize:c}=e;D({xVal:t,yVal:s,countVal:a,closestDistance:n,closestIndex:r,xCoord:i,yCoord:l,xSize:o,ySize:c})},k[6]=o):o=k[6],k[7]!==V?(c=function({proximity:e,yFormatter:t,xFormatter:s,onPointHighlight:a}){let n=-1;return{hooks:{setCursor:t=>{let{top:s,left:r}=t.cursor;if(null==s||null==r)return;let[i,l,o]=t.data[1],c=0,d=1/0;for(let e=0;e<i.length;e++){let a=Math.sqrt((t.valToPos(i[e],"x")-r)**2+(t.valToPos(l[e],"y")-s)**2);a<d&&o[e]>0&&(c=e,d=a)}let u=i.length-l.lastIndexOf(l[0]),m=l[1]-l[0],h=i[u]-i[0],p=Math.abs(t.valToPos(h,"x")-t.valToPos(0,"x")),x=Math.abs(t.valToPos(m,"y")-t.valToPos(0,"y")),g=t.valToPos(i[c],"x"),f=t.valToPos(l[c],"y"),b=o[c],y=i[c],v=l[c],{offsetLeft:_,offsetTop:j}=t.over;d<e&&c!==n&&(n=c,a({xVal:y,yVal:v,countVal:b,closestDistance:d,closestIndex:c,xCoord:g+_,yCoord:f+j,xSize:p,ySize:x}))}}}}({proximity:20,yFormatter:V,xFormatter:M,onPointHighlight:o}),k[7]=V,k[8]=c):c=k[8],k[9]===Symbol.for("react.memo_cache_sentinel")?(u={hooks:{setSelect:e=>{let{offsetLeft:t,offsetTop:s}=e.over,a=e.posToVal(e.select.left,"x"),n=e.posToVal(e.select.left+e.select.width,"x"),r=e.posToVal(e.select.top,"y"),i=e.posToVal(e.select.top+e.select.height,"y");setTimeout(()=>{$({top:e.select.top+s,left:e.select.left+t,width:e.select.width,height:e.select.height,xMin:a,xMax:n,yMin:i,yMax:r})},20)}}},k[9]=u):u=k[9],k[10]!==c?(m=[c,u],k[10]=c,k[11]=m):m=k[11],k[12]!==O||k[13]!==s||k[14]!==m||k[15]!==F?(p={...I,...s,width:F,height:O,cursor:l,plugins:m},k[12]=O,k[13]=s,k[14]=m,k[15]=F,k[16]=p):p=k[16];let B=p;return k[17]===Symbol.for("react.memo_cache_sentinel")?(x={width:"100%",height:"100%",position:"relative"},k[17]=x):x=k[17],k[18]!==L?(g=()=>{null!=L&&$(void 0)},k[18]=L,k[19]=g):g=k[19],k[20]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{D(void 0)},k[20]=f):f=k[20],k[21]===Symbol.for("react.memo_cache_sentinel")?(b=[],k[21]=b):b=k[21],k[22]!==A?(v=[b,A],k[22]=A,k[23]=v):v=k[23],k[24]!==B||k[25]!==v?(j=(0,a.jsx)(d(),{options:B,data:v,resetScales:!0}),k[24]=B,k[25]=v,k[26]=j):j=k[26],k[27]!==z||k[28]!==V||k[29]!==F?(S=null!=z&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{position:"absolute",top:z.yCoord,left:z.xCoord,width:z.xSize,height:z.ySize,pointerEvents:"none",background:"rgba(255, 255, 255, 0.8)"}}),(0,a.jsxs)("div",{className:"px-2 py-1 fs-8",style:{position:"absolute",top:z.yCoord+5,...z.xCoord>2*F/3?{right:F-z.xCoord+10}:{left:z.xCoord+10},backdropFilter:"blur(8px)",backgroundColor:"rgba(#1A1D23 0.75)",border:"1px solid #5F6776",borderRadius:2,pointerEvents:"none"},children:[(0,a.jsx)(h.E,{size:"10px",pt:"4px",children:"Click & Drag to Select Data"}),(0,a.jsx)(y.c,{my:"xs"}),(0,a.jsx)("div",{children:(0,a.jsx)(E.H,{value:z.xVal})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Y Value:"})," ",V(z.yVal)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Count Value:"})," ",new Intl.NumberFormat("en-US",{notation:"standard",compactDisplay:"short"}).format(z.countVal)]})]})]}),k[27]=z,k[28]=V,k[29]=F,k[30]=S):S=k[30],k[31]!==O||k[32]!==R||k[33]!==L?(w=null!=L&&null!=R&&(0,a.jsx)("div",{className:"px-2 py-1 fs-8",style:{backdropFilter:"blur(4px)",backgroundColor:"rgba(#1A1D23 0.4)",border:"1px solid #5F6776",borderRadius:2,position:"absolute",bottom:O-L?.top+4,left:L?.left},onClick:e=>{e.stopPropagation(),R?.(L.xMin/1e3,L.xMax/1e3,L.yMin,L.yMax)},role:"button",children:"Filter by Selection"}),k[31]=O,k[32]=R,k[33]=L,k[34]=w):w=k[34],k[35]!==P||k[36]!==g||k[37]!==j||k[38]!==S||k[39]!==w?(N=(0,a.jsxs)("div",{ref:P,style:x,onClick:g,onMouseLeave:f,children:[j,S,w]}),k[35]=P,k[36]=g,k[37]=j,k[38]=S,k[39]=w,k[40]=N):N=k[40],N}function M(e){return`${new Date(e).toLocaleString()}`}},2326:e=>{e.exports={wrapper:"PlaybarSlider_wrapper__WAjbf",markers:"PlaybarSlider_markers__X51XN",markerDot:"PlaybarSlider_markerDot__X23nO"}},17273:(e,t,s)=>{"use strict";s.d(t,{A:()=>x,S:()=>p});var a=s(6029),n=s(1909),r=s(60481),i=s(78253),l=s(8468),o=s(74860),c=s(24196),d=s(46466),u=s(36011),m=s.n(u);let h="hdx-search-where-language";function p(){try{let e=window.localStorage.getItem(h);if("sql"===e||"lucene"===e)return e}catch{}return null}function x({tableConnection:e,tableConnections:t,control:s,name:u,onSubmit:p,onLanguageChange:x,enableHotkey:g,size:f="sm",showLabel:b=!0,label:y="WHERE",allowMultiline:v=!0,sqlQueryHistoryType:_,luceneQueryHistoryType:j,sqlPlaceholder:S="SQL WHERE clause (ex. column = 'foo')",lucenePlaceholder:w="Search your events w/ Lucene ex. column:foo",width:E="100%",maxWidth:C="100%",minWidth:N,"data-testid":k,additionalSuggestions:A,languageName:T=`${u}Language`}){let{field:I}=(0,n.as)({control:s,name:T}),R=I.value??"lucene",L="sql"===R,$=e?{tableConnection:e}:{tableConnections:t},M="xs"===f?m().sizeXs:m().sizeSm;return(0,a.jsxs)(r.a,{className:m().root,style:{width:E,maxWidth:C,minWidth:N},children:[(0,a.jsx)(i.s,{align:"center",className:`${m().languageSwitch} ${M}`,"data-testid":"where-language-switch",onMouseDown:e=>e.preventDefault(),children:(0,a.jsx)(o.A,{language:R,onLanguageChange:e=>{try{window.localStorage.setItem(h,e)}catch{}I.onChange(e),x?.(e)}})}),(0,a.jsxs)(r.a,{className:`${m().inputWrapper} ${M}`,children:[L?(0,a.jsx)(d.Z,{...$,control:s,name:u,placeholder:S,onSubmit:p,label:b?y:void 0,queryHistoryType:_,enableHotkey:g,allowMultiline:v,size:f,additionalSuggestions:A}):(0,a.jsx)(c.A,{...$,control:s,name:u,onSubmit:p,placeholder:w,queryHistoryType:j,enableHotkey:g,size:f,"data-testid":k,additionalSuggestions:A}),g&&(0,a.jsx)(r.a,{className:m().shortcutHint,title:"Press / or s to focus search","aria-hidden":!0,children:(0,a.jsx)(l.u,{size:"xs",children:"/"})})]})]})}},18006:(e,t,s)=>{"use strict";s.d(t,{N4:()=>r,OH:()=>i,z4:()=>n});var a=s(37901);function n(e=[]){return e.map(({sqlExpression:e,alias:t})=>({valueExpression:e,alias:t||e}))}function r(e,t=[],s,n){let i=new Map,l=new Map,o=new Map,c=(0,a.bn)(n);try{for(let e of s)for(let{sqlExpression:s,luceneExpression:a,alias:n}of t){let t=n||s,r=c.includes(s.split(".")[0])?`toString(${s})`:s;l.set(t,r),a&&o.set(t,a);let d=e[t];d&&"string"==typeof d&&(i.has(t)||i.set(t,new Set),i.get(t).add(d))}}catch(e){console.error("Error extracting attributes from data",e)}return Array.from(i.entries()).flatMap(([t,s])=>[...s].map(s=>({displayedKey:t,value:s,sql:l.get(t),lucene:o.get(t),source:e})))}function i(e){try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}},20699:e=>{e.exports={timelineRow:"TimelineChart_timelineRow__qebNk",timelineRowActive:"TimelineChart_timelineRowActive__V6ZZf",labelContainer:"TimelineChart_labelContainer__6r6Eb"}},24196:(e,t,s)=>{"use strict";s.d(t,{A:()=>I});var a=s(6029),n=s(75155),r=s(55729),i=s(1909),l=s(66692),o=s(54167),c=s(3635),d=s(21604),u=s(78550),m=s(92917);let h=Date.now();function p(e){let{databaseName:t,tableName:s,connectionId:a}=e;return{connection:a,from:{databaseName:t,tableName:s},timestampValueExpression:"",select:"",where:"",dateRange:[new Date(h-432e5),new Date(h)]}}function x(e){return{value:e,label:e}}function g(e){return null!==e.jsType}var f=s(75828),b=s.n(f),y=s(1885),v=s(37659),_=s(94193),j=s(8737),S=s(74860),w=s(45862),E=s.n(w);function C({inputRef:e,value:t,onChange:s,placeholder:n="Search your events for anything...",autocompleteOptions:i,size:l="sm",aboveSuggestions:o,belowSuggestions:c,showSuggestionsOnEmpty:d,suggestionsHeader:u="Properties",zIndex:h=999,onLanguageChange:p,language:x,onSubmit:g,queryHistoryType:f,"data-testid":w}){let[C,N]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1),T=(0,r.useCallback)(e=>{N(e),A(e)},[N]),[I,R]=(0,r.useState)("auto"),[L,$]=(0,r.useState)(720),[M,z]=(0,r.useState)(-1),[D,P]=(0,r.useState)(-1),[F,O]=(0,m.mk)(f),V=(0,r.useMemo)(()=>f&&F?F.map(e=>({value:e,label:e})):[],[F,f]),B=null!=t&&0===t.length&&V.length>0&&f,H=(0,r.useMemo)(()=>new y.A(i??[],{keys:["value"],threshold:0,ignoreLocation:!0}),[i]),W=(0,m.d7)(t??"",200),q=(0,r.useMemo)(()=>{let e=W.split(" "),t=e[e.length-1];return 0===t.length&&d?i??[]:H.search(t).map(e=>e.item)},[W,H,i,d]),J=a=>{z(-1),s(null==t?a:t.split(" ").slice(0,-1).join(" ")+`${t.split(" ").length>1?" ":""}${a}`),e.current?.focus()},K=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{K.current&&R(K.current.clientWidth),e.current&&$(e.current.clientWidth)},[x,p,e]);let G="xs"===l?32:"lg"===l?44:38;return(0,a.jsx)("div",{className:E().root,style:{"--autocomplete-base-height":`${G}px`},"data-expanded":C?"true":void 0,children:(0,a.jsxs)(v.A,{opened:k,onChange:A,position:"bottom-start",offset:8,width:"target",withinPortal:!0,closeOnClickOutside:!0,closeOnEscape:!0,styles:{dropdown:{maxWidth:L>300?L:720,width:"100%",zIndex:h}},children:[(0,a.jsx)(v.A.Target,{children:(0,a.jsx)(_.T,{ref:e,placeholder:n,className:b()(E().textarea,!C&&E().collapseFade,C&&E().focused),value:t,size:l,autosize:!0,minRows:1,maxRows:C?4:1,"data-testid":w,onChange:e=>s(e.target.value),onFocus:()=>{z(-1),P(-1),T(!0)},onBlur:()=>{z(-1),P(-1),T(!1)},onKeyDown:e=>{"Escape"===e.key&&e.target instanceof HTMLTextAreaElement&&(e.preventDefault(),A(!1),e.target.blur()),"Tab"===e.key&&e.target instanceof HTMLTextAreaElement&&q.length>0&&M<q.length&&M>=0&&(e.preventDefault(),J(q[M].value)),"Enter"===e.key&&e.target instanceof HTMLTextAreaElement&&(q.length>0&&M<q.length&&M>=0?(e.preventDefault(),J(q[M].value)):e.shiftKey||(e.preventDefault(),f&&t&&O(t),g?.())),"ArrowDown"===e.key&&e.target instanceof HTMLTextAreaElement&&q.length>0&&z(Math.min(M+1,q.length-1,9)),"ArrowUp"===e.key&&e.target instanceof HTMLTextAreaElement&&q.length>0&&z(Math.max(M-1,0))},rightSectionWidth:I,rightSection:null!=x&&null!=p?(0,a.jsx)("div",{ref:K,children:(0,a.jsx)(S.A,{language:x,onLanguageChange:p})}):void 0})}),(0,a.jsxs)(v.A.Dropdown,{className:E().dropdown,children:[null!=o&&(0,a.jsx)("div",{className:E().aboveSuggestions,children:o}),(0,a.jsx)("div",{children:q.length>0&&(0,a.jsxs)("div",{className:E().suggestionsSection,children:[(0,a.jsxs)("div",{className:E().suggestionsHeaderRow,children:[(0,a.jsx)("div",{className:E().suggestionsHeader,children:u}),q.length>10&&(0,a.jsxs)("div",{className:E().suggestionsLimit,children:["(Showing Top ",10,")"]})]}),q.slice(0,10).map(({value:e,label:t},s)=>(0,a.jsx)("div",{className:b()(E().suggestionItem,M===s&&E().selected),role:"button",onMouseOver:()=>{z(s)},onClick:()=>{J(e)},children:(0,a.jsx)("span",{className:E().suggestionLabel,children:t})},e))]})}),null!=c&&(0,a.jsx)("div",{className:E().belowSuggestions,children:c}),(0,a.jsx)("div",{children:B&&(0,a.jsxs)("div",{className:E().historySection,children:[(0,a.jsx)("div",{className:E().historyTitle,children:"Search History:"}),V.map(({value:e,label:t},n)=>(0,a.jsx)(j.N,{className:b()(E().historyItem,D===n&&E().selected),onMouseOver:()=>P(n),onClick:()=>{P(-1),s(e),O(e),A(!1),g?.()},children:(0,a.jsx)("span",{className:E().historyItemLabel,children:t})},e))]})})]})]})})}var N=s(67398),k=s.n(N);class A{formatFieldValue(e){return e.path.join(".")}formatFieldLabel(e){return`${e.path.join(".")} (${e.jsType})`}formatKeyValPair(e,t){return`${e}:"${t}"`}}let T=new A;function I(e){let t,s,h,f,b,y,v,_,j,S,w,E,N,A,I,R,L,$,M,z,D,P,F,O,V,B,H,W,q,J,K,G,Y,U,Z,X,Q,ee,et=(0,n.c)(78);et[0]!==e?({tableConnection:w,tableConnections:E,placeholder:j,size:S,zIndex:N,language:f,onLanguageChange:b,enableHotkey:h,onSubmit:y,additionalSuggestions:t,queryHistoryType:_,"data-testid":s,...v}=e,et[0]=e,et[1]=t,et[2]=s,et[3]=h,et[4]=f,et[5]=b,et[6]=y,et[7]=v,et[8]=_,et[9]=j,et[10]=S,et[11]=w,et[12]=E,et[13]=N):(t=et[1],s=et[2],h=et[3],f=et[4],b=et[5],y=et[6],v=et[7],_=et[8],j=et[9],S=et[10],w=et[11],E=et[12],N=et[13]);let es=void 0===j?"Search your events for anything...":j,ea=void 0===S?"sm":S,{field:en}=(0,i.as)(v),{onChange:er,value:ei}=en,el=(0,u.Ge)(),eo=(0,r.useRef)(null),[ec,ed]=(0,r.useState)(""),eu=w||E;et[14]!==t||et[15]!==eu?(A={tableConnection:eu,additionalSuggestions:t},et[14]=t,et[15]=eu,et[16]=A):A=et[16];let em=function(e,t,s){let a,i,l,o,c,d,h,f,b,y,v,_,j,S,w=(0,n.c)(39),{tableConnection:E,additionalSuggestions:C}=s;w[0]!==E?(a=E?Array.isArray(E)?E:[E]:[],w[0]=E,w[1]=a):a=w[1];let{data:N}=(0,u.Sh)(a);if(w[2]!==C||w[3]!==N||w[4]!==e){let t=(N??[]).filter(g);i=new Map,l=[...t.map(t=>{let s={value:e.formatFieldValue(t),label:e.formatFieldLabel(t)};return i.set(s.value,t),s}),...C?.map(x)??[]],w[2]=C,w[3]=N,w[4]=e,w[5]=i,w[6]=l}else i=w[5],l=w[6];let k=l;w[7]!==i||w[8]!==k?(o={fieldCompleteOptions:k,fieldCompleteMap:i},w[7]=i,w[8]=k,w[9]=o):o=w[9];let{fieldCompleteOptions:A,fieldCompleteMap:T}=o,[I,R]=(0,r.useState)(null);w[10]!==T||w[11]!==t?(c=()=>{let e=T.get(t);e&&R(e)},d=[T,t],w[10]=T,w[11]=t,w[12]=c,w[13]=d):(c=w[12],d=w[13]),(0,r.useEffect)(c,d),w[14]!==e||w[15]!==I||w[16]!==t?(h=()=>{I&&(t.startsWith(e.formatFieldValue(I))||R(null))},f=[I,R,t,e],w[14]=e,w[15]=I,w[16]=t,w[17]=h,w[18]=f):(h=w[17],f=w[18]),(0,r.useEffect)(h,f);let L=Array.isArray(E)?E.length>0?E[0]:void 0:E;w[19]!==L?(b=L??{tableName:"",databaseName:"",connectionId:""},w[19]=L,w[20]=b):b=w[20];let{data:$}=(0,u.n$)(b);w[21]!==$||w[22]!==I?(y=I&&$?[(0,m.uc)(I.path,$)]:[],w[21]=$,w[22]=I,w[23]=y):y=w[23];let M=y;w[24]!==E?(v=(0,m.$r)(E).map(p),w[24]=E,w[25]=v):v=w[25];let z=v;w[26]!==z||w[27]!==M?(_={chartConfigs:z,keys:M},w[26]=z,w[27]=M,w[28]=_):_=w[28];let{data:D}=(0,u.nT)(_);e:{let t;if(!D||!I){j=A;break e}if(w[29]!==e||w[30]!==I||w[31]!==D){let s;w[33]!==e||w[34]!==I?(s=t=>t.value.flatMap(t=>{if("string"==typeof t){let s=e.formatKeyValPair(e.formatFieldValue(I),t);return[{value:s,label:s}]}if("object"!=typeof t)return[];{let s=[];for(let[a,n]of Object.entries(t)){if("string"!=typeof a||"string"!=typeof n)return console.error("unknown type for autocomplete object ",t),[];let r=structuredClone(I);r.path.push(a);let i=e.formatKeyValPair(e.formatFieldValue(r),n);s.push({value:i,label:i})}return s}}),w[33]=e,w[34]=I,w[35]=s):s=w[35],t=D.flatMap(s),w[29]=e,w[30]=I,w[31]=D,w[32]=t}else t=w[32];j=t}let P=j;return w[36]!==A||w[37]!==P?(S=(0,u.Ii)([A,P]),w[36]=A,w[37]=P,w[38]=S):S=w[38],S}(T,null!=ei?`${ei}`:"",A);et[17]!==el||et[18]!==w||et[19]!==ei?(I=()=>{w&&(0,o.oU)({query:ei,tableConnection:w,metadata:el}).then(e=>{ed(e)})},R=[ei,w,el],et[17]=el,et[18]=w,et[19]=ei,et[20]=I,et[21]=R):(I=et[20],R=et[21]),(0,r.useEffect)(I,R),et[22]===Symbol.for("react.memo_cache_sentinel")?(L=["/","s"],et[22]=L):L=et[22],et[23]!==h?($=()=>{h&&eo.current?.focus()},et[23]=h,et[24]=$):$=et[24],et[25]===Symbol.for("react.memo_cache_sentinel")?(M={preventDefault:!0,enableOnFormTags:!1,enableOnContentEditable:!1},et[25]=M):M=et[25],et[26]!==h?(z=[h],et[26]=h,et[27]=z):z=et[27],(0,l.vC)(L,$,M,z),et[28]===Symbol.for("react.memo_cache_sentinel")?(D=(0,a.jsx)("div",{className:k().searchingHeader,children:"Searching for:"}),et[28]=D):D=et[28];let eh=""===ec?"Matching all events, enter a query to search.":ec;return et[29]!==eh?(P=(0,a.jsxs)(a.Fragment,{children:[D,(0,a.jsx)("div",{className:k().searchingDescription,children:eh})]}),et[29]=eh,et[30]=P):P=et[30],et[31]===Symbol.for("react.memo_cache_sentinel")?(F=(0,a.jsx)("div",{className:k().examplesLabel,children:"Examples:"}),et[31]=F):F=et[31],et[32]===Symbol.for("react.memo_cache_sentinel")?(O=(0,a.jsx)("span",{className:k().exampleLabel,children:"Full Text:"}),et[32]=O):O=et[32],et[33]!==er||et[34]!==ei?(V=(0,a.jsxs)("div",{className:k().exampleRow,children:[O,(0,a.jsx)("code",{className:k().exampleCode,role:"button",onClick:()=>{er(ei+(ei.length>0?" ":"")+"my log")},children:"my log"})]}),et[33]=er,et[34]=ei,et[35]=V):V=et[35],et[36]===Symbol.for("react.memo_cache_sentinel")?(B=(0,a.jsx)("span",{className:k().exampleLabel,children:"Substring:"}),et[36]=B):B=et[36],et[37]!==er||et[38]!==ei?(H=(0,a.jsxs)("div",{className:k().exampleRow,children:[B,(0,a.jsx)("code",{className:k().exampleCode,role:"button",onClick:()=>{er(ei+(ei.length>0?" ":"")+"*err*")},children:"*err*"})]}),et[37]=er,et[38]=ei,et[39]=H):H=et[39],et[40]===Symbol.for("react.memo_cache_sentinel")?(W=(0,a.jsx)("span",{className:k().exampleLabel,children:"Exact:"}),et[40]=W):W=et[40],et[41]!==er||et[42]!==ei?(q=(0,a.jsxs)("div",{className:k().exampleRow,children:[W,(0,a.jsxs)("code",{className:k().exampleCode,role:"button",onClick:()=>{er(ei+(ei.length>0?" ":"")+'level:"info"')},children:["level:",'"',"info",'"']})]}),et[41]=er,et[42]=ei,et[43]=q):q=et[43],et[44]===Symbol.for("react.memo_cache_sentinel")?(J=(0,a.jsx)("span",{className:k().exampleLabel,children:"Not:"}),et[44]=J):J=et[44],et[45]!==er||et[46]!==ei?(K=(0,a.jsxs)("div",{className:k().exampleRow,children:[J,(0,a.jsx)("code",{className:k().exampleCode,role:"button",onClick:()=>{er(ei+(ei.length>0?" ":"")+"-level:info")},children:"-level:info"})]}),et[45]=er,et[46]=ei,et[47]=K):K=et[47],et[48]===Symbol.for("react.memo_cache_sentinel")?(G=(0,a.jsx)("span",{className:k().exampleLabel,children:"Existence:"}),et[48]=G):G=et[48],et[49]!==er||et[50]!==ei?(Y=(0,a.jsxs)("div",{className:k().exampleRow,children:[G,(0,a.jsx)("code",{className:k().exampleCode,role:"button",onClick:()=>{er(ei+(ei.length>0?" ":"")+"service:*")},children:"service:*"})]}),et[49]=er,et[50]=ei,et[51]=Y):Y=et[51],et[52]===Symbol.for("react.memo_cache_sentinel")?(U=(0,a.jsx)("span",{className:k().exampleLabel,children:"Boolean:"}),et[52]=U):U=et[52],et[53]!==er||et[54]!==ei?(Z=(0,a.jsxs)("div",{className:k().exampleRow,children:[U,(0,a.jsx)("code",{className:k().exampleCode,role:"button",onClick:()=>{er(ei+(ei.length>0?" ":"")+'("foo" OR "bar")')},children:"(foo OR bar)"})]}),et[53]=er,et[54]=ei,et[55]=Z):Z=et[55],et[56]===Symbol.for("react.memo_cache_sentinel")?(X=(0,a.jsx)("a",{className:k().docsLink,target:"_blank",href:"https://clickhouse.com/docs/use-cases/observability/clickstack/search",rel:"noreferrer",children:(0,a.jsxs)(c.Y,{gap:5,children:[(0,a.jsx)(d.A,{size:14}),(0,a.jsx)("span",{children:"Docs"})]})}),et[56]=X):X=et[56],et[57]!==V||et[58]!==H||et[59]!==q||et[60]!==K||et[61]!==Y||et[62]!==Z?(Q=(0,a.jsxs)(a.Fragment,{children:[F,V,H,q,K,Y,Z,X]}),et[57]=V,et[58]=H,et[59]=q,et[60]=K,et[61]=Y,et[62]=Z,et[63]=Q):Q=et[63],et[64]!==em||et[65]!==s||et[66]!==f||et[67]!==er||et[68]!==b||et[69]!==y||et[70]!==es||et[71]!==_||et[72]!==ea||et[73]!==P||et[74]!==Q||et[75]!==ei||et[76]!==N?(ee=(0,a.jsx)(C,{inputRef:eo,value:ei,onChange:er,placeholder:es,autocompleteOptions:em,size:ea,zIndex:N,language:f,onLanguageChange:b,onSubmit:y,queryHistoryType:_,"data-testid":s,aboveSuggestions:P,belowSuggestions:Q}),et[64]=em,et[65]=s,et[66]=f,et[67]=er,et[68]=b,et[69]=y,et[70]=es,et[71]=_,et[72]=ea,et[73]=P,et[74]=Q,et[75]=ei,et[76]=N,et[77]=ee):ee=et[77],ee}},24885:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(55729);let n=function(e,t="right"){let[s,n]=(0,a.useState)(e),r=(0,a.useRef)(0),i=(0,a.useRef)(0),l="top"===t||"bottom"===t,o=l?"clientY":"clientX",c="right"===t||"top"===t?-1:1,d=(0,a.useCallback)(e=>{let t=l?window.innerHeight:window.innerWidth,s=e[o]-r.current,a=l?window.innerHeight:document.body.offsetWidth;n(Math.min(Math.max(10,i.current+s/t*100*c),(a-25)/t*100))},[l,o,c]),u=(0,a.useCallback)(()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d]),m=(0,a.useCallback)(e=>{e.preventDefault(),r.current=e[o],i.current=s,document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)},[o,s,d,u]);return(0,a.useEffect)(()=>()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d,u]),{size:s,startResize:m}}},25156:()=>{},26355:(e,t,s)=>{"use strict";s.d(t,{A:()=>M});var a=s(6029),n=s(75155),r=s(55729),i=s(75828),l=s.n(i),o=s(70921),c=s(67549),d=s(40399),u=s(91544),m=s.n(u),h=s(59513),p=s.n(h),x=s(77494),g=s.n(x),f=s(97554),b=s.n(f),y=s(64022),v=s.n(y),_=s(84450),j=s.n(_),S=s(22273),w=s(33958),E=s(88302),C=s(74805),N=s(65723),k=s.n(N);let A=(0,o.eU)({normallyExpanded:!1}),T=r.memo(r.forwardRef((e,t)=>{let s=(0,n.c)(19),{value:r}=e;if(g()(r)){let e;return s[0]!==t?(e=(0,a.jsx)("span",{ref:t,className:k().null,children:"null"}),s[0]=t,s[1]=e):e=s[1],e}if(j()(r)){let e;return s[2]!==t||s[3]!==r?(e=(0,a.jsx)("span",{ref:t,className:k().string,children:r}),s[2]=t,s[3]=r,s[4]=e):e=s[4],e}if(b()(r)){let e;return s[5]!==t||s[6]!==r?(e=(0,a.jsx)("span",{ref:t,className:k().number,children:r}),s[5]=t,s[6]=r,s[7]=e):e=s[7],e}if(p()(r)){let e,n=r?"true":"false";return s[8]!==t||s[9]!==n?(e=(0,a.jsx)("span",{ref:t,className:k().boolean,children:n}),s[8]=t,s[9]=n,s[10]=e):e=s[10],e}if(v()(r)){let e,n;return s[11]!==r?(e=Object.keys(r),s[11]=r,s[12]=e):e=s[12],s[13]!==t||s[14]!==e.length?(n=(0,a.jsxs)("span",{ref:t,className:k().object,children:["{}"," ",e.length," keys"]}),s[13]=t,s[14]=e.length,s[15]=n):n=s[15],n}if(m()(r)){let e;return s[16]!==t||s[17]!==r.length?(e=(0,a.jsxs)("span",{ref:t,className:k().array,children:["[]"," ",r.length," items"]}),s[16]=t,s[17]=r.length,s[18]=e):e=s[18],e}return null})),I=r.memo(e=>{let t,s,r,i=(0,n.c)(12),{keyName:l,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}=e,{getLineActions:h}=(0,c.md)(A);e:{let e;if(h){let e;i[0]!==h||i[1]!==u||i[2]!==l||i[3]!==o||i[4]!==m||i[5]!==d?(e=h({key:l,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}),i[0]=h,i[1]=u,i[2]=l,i[3]=o,i[4]=m,i[5]=d,i[6]=e):e=i[6],t=e;break e}i[7]===Symbol.for("react.memo_cache_sentinel")?(e=[],i[7]=e):e=i[7],t=e}let p=t;return i[8]!==p?(s=p.map(z),i[8]=p,i[9]=s):s=i[9],i[10]!==s?(r=(0,a.jsx)("div",{className:k().lineMenu,children:s}),i[10]=s,i[11]=r):r=i[11],r}),R=r.memo(({keyName:e,keyPath:t,value:s,disableMenu:n,isInParsedJson:i=!1,parsedJsonRootPath:o=[]})=>{let{normallyExpanded:d}=(0,c.md)(A),{ref:u,hovered:h}=(0,S.M)(),p=r.useMemo(()=>{if(!j()(s))return!1;try{if(s.startsWith("{")&&s.endsWith("}")||s.startsWith("[")&&s.endsWith("]"))return!!JSON.parse(s)}catch(e){return!1}},[s]),[x,g]=r.useState(d&&!p);r.useEffect(()=>{g(d&&!p)},[p,d]);let f=r.useMemo(()=>v()(s)&&Object.keys(s).length>0||m()(s)&&s.length>0||p,[p,s]),b=r.useCallback(()=>{f&&g(e=>!e)},[f]),y=r.useMemo(()=>{if(p)try{return JSON.parse(s)}catch(e){return null}return s},[p,s]),_=t.length,N=r.useMemo(()=>[...t,e],[e,t]),R=i||p,$=r.useMemo(()=>p?N:o,[p,N,o]),M=r.useRef(null),[z,D]=r.useState(!1),P=r.useCallback(()=>{D(!0)},[]),F=r.useCallback(()=>{D(!1)},[]);return r.useEffect(()=>{let e=M.current;return e?.addEventListener("selectstart",P),e?.addEventListener("mouseup",F),()=>{e?.removeEventListener("selectstart",P),e?.removeEventListener("mouseup",F)}},[F,P]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{ref:u,onClick:b,className:l()(k().line,{[k().nestedLine]:_>0,[k().expanded]:x,[k().expandable]:f}),style:{marginLeft:16*_},children:[(0,a.jsx)("div",{className:k().keyContainer,children:(0,a.jsxs)("div",{className:k().key,children:[f&&(x?(0,a.jsx)(w.A,{size:10}):(0,a.jsx)(E.A,{size:10})),e,(0,a.jsx)("div",{className:k().hoverContent,children:(0,a.jsx)(C.A,{size:14})})]})}),(0,a.jsx)("div",{className:k().valueContainer,children:p?x?(0,a.jsxs)("div",{className:k().object,children:["{}"," Parsed JSON"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T,{value:s,ref:M}),(0,a.jsx)("div",{className:k().jsonBtn,children:"Expand JSON"})]}):(0,a.jsx)(T,{value:s,ref:M})}),h&&!n&&!z&&(0,a.jsx)(I,{keyName:e,keyPath:N,value:s,isInParsedJson:i,parsedJsonRootPath:o})]},e),x&&f&&(0,a.jsx)(L,{data:y,keyPath:N,disableMenu:n,isInParsedJson:R,parsedJsonRootPath:$})]})});function L(e){let t,s,i,o,c,d,u,m=(0,n.c)(22),{data:h,keyPath:p,disableMenu:x,isInParsedJson:g,parsedJsonRootPath:f}=e;m[0]!==p?(t=void 0===p?[]:p,m[0]=p,m[1]=t):t=m[1];let b=t,y=void 0!==x&&x,v=void 0!==g&&g;m[2]!==f?(s=void 0===f?[]:f,m[2]=f,m[3]=s):s=m[3];let _=s,[j,S]=r.useState(!1);m[4]!==h?(i=Object.keys(h),m[4]=h,m[5]=i):i=m[5];let w=i.length;m[6]!==h||m[7]!==j?(o=j?Object.entries(h):Object.entries(h).slice(0,50),m[6]=h,m[7]=j,m[8]=o):o=m[8];let E=o,C=b?.length||0;return m[9]!==y||m[10]!==v||m[11]!==b||m[12]!==_||m[13]!==E?(c=E.map(e=>{let[t,s]=e;return(0,a.jsx)(R,{keyName:t,value:s,keyPath:b,disableMenu:y,isInParsedJson:v,parsedJsonRootPath:_},t)}),m[9]=y,m[10]=v,m[11]=b,m[12]=_,m[13]=E,m[14]=c):c=m[14],m[15]!==j||m[16]!==C||m[17]!==w?(d=w>50&&!j&&(0,a.jsx)("div",{className:l()(k().line,k().nestedLine,k().expandable),style:{marginLeft:16*C},onClick:()=>S(!0),children:(0,a.jsx)("div",{className:k().keyContainer,children:(0,a.jsxs)("div",{className:k().jsonBtn,children:["Expand ",w-50," more properties"]})})}),m[15]=j,m[16]=C,m[17]=w,m[18]=d):d=m[18],m[19]!==d||m[20]!==c?(u=(0,a.jsxs)(a.Fragment,{children:[c,d]}),m[19]=d,m[20]=c,m[21]=u):u=m[21],u}let $=e=>{let t,s,a,i=(0,n.c)(6),{children:l,initialValues:o}=e;i[0]!==o?(t=[[A,o]],i[0]=o,i[1]=t):t=i[1],(0,d.RH)(t);let u=(0,c.Xr)(A);return i[2]!==o||i[3]!==u?(s=()=>{u(o)},a=[o,u],i[2]=o,i[3]=u,i[4]=s,i[5]=a):(s=i[4],a=i[5]),r.useEffect(s,a),l},M=e=>{let t,s,r,i,o,d,u=(0,n.c)(17),{data:m,normallyExpanded:h,tabulate:p,lineWrap:x,getLineActions:g}=e,f=void 0!==h&&h,b=void 0!==p&&p;u[0]!==m?(t=Object.keys(m),u[0]=m,u[1]=t):t=u[1];let y=0===t.length;return u[2]!==g||u[3]!==f?(s={normallyExpanded:f,getLineActions:g},u[2]=g,u[3]=f,u[4]=s):s=u[4],u[5]!==x||u[6]!==b?(r=l()(k().container,{[k().withTabulate]:b,[k().withLineWrap]:x}),u[5]=x,u[6]=b,u[7]=r):r=u[7],u[8]!==m||u[9]!==y?(i=y?(0,a.jsx)("div",{children:"Empty"}):(0,a.jsx)(L,{data:m}),u[8]=m,u[9]=y,u[10]=i):i=u[10],u[11]!==r||u[12]!==i?(o=(0,a.jsx)("div",{className:r,children:i}),u[11]=r,u[12]=i,u[13]=o):o=u[13],u[14]!==s||u[15]!==o?(d=(0,a.jsx)(c.Kq,{children:(0,a.jsx)($,{initialValues:s,children:o})}),u[14]=s,u[15]=o,u[16]=d):d=u[16],d};function z(e){return(0,a.jsx)("button",{title:e.title,className:k().lineMenuBtn,onClick:t=>{e.onClick(),t.stopPropagation()},children:e.label},e.key)}},26674:(e,t,s)=>{"use strict";s.d(t,{S:()=>n,Y:()=>r});var a=s(55729);let n=(0,a.createContext)(0);function r(){return(0,a.useContext)(n)}},26837:(e,t,s)=>{"use strict";s.d(t,{W:()=>eS});var a=s(6029),n=s(55729),r=s(75155),i=s(84450),l=s.n(i),o=s(16943),c=s.n(o),d=s(82641),u=s(60481),m=s(45005),h=s(43517),p=s(78253),x=s(81973),g=s(18006),f=s(37901),b=s(65081),y=s(50374),v=s(64441),_=s(94937),j=s(75828),S=s.n(j),w=s(7913),E=s(63085),C=s(25062),N=s(94720),k=s(3635),A=s(70114),T=s(23474),I=s(54134),R=s(58333),L=s(7565),$=s(94364),M=s(72075),z=s(66773),D=s.n(z);let P=e=>{let t,s,n,i,l,o,c,d=(0,r.c)(19),{filename:u,function:m,lineno:h,colno:p,isLoading:x}=e,g=x?.8:1,f=x?"blur(1px)":"none";return d[0]!==g||d[1]!==f?(t={opacity:g,filter:f},d[0]=g,d[1]=f,d[2]=t):t=d[2],d[3]!==p||d[4]!==h?(s=(0,a.jsxs)("span",{children:[":",h,":",p]}),d[3]=p,d[4]=h,d[5]=s):s=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("span",{children:" in "}),d[6]=n):n=d[6],d[7]!==m?(i=m&&(0,a.jsx)("span",{style:{background:"#ffffff10",padding:"0 4px",borderRadius:4},children:m}),d[7]=m,d[8]=i):i=d[8],d[9]!==u||d[10]!==t||d[11]!==s||d[12]!==i?(l=(0,a.jsxs)("div",{className:" fs-8",style:t,children:[u,s,n,i]}),d[9]=u,d[10]=t,d[11]=s,d[12]=i,d[13]=l):l=d[13],d[14]!==x?(o=x&&(0,a.jsx)(N.a,{size:"xs",color:"gray"}),d[14]=x,d[15]=o):o=d[15],d[16]!==l||d[17]!==o?(c=(0,a.jsxs)(k.Y,{gap:"xs",display:"inline-flex",children:[l,o]}),d[16]=l,d[17]=o,d[18]=c):c=d[18],c},F=e=>{let t,s,i,l,o,c,d=(0,r.c)(15),{title:u,children:m,initiallyCollapsed:h}=e,[p,x]=n.useState(h??!1);return d[0]!==p?(t=()=>x(!p),s=p?(0,a.jsx)(A.A,{size:14,className:"me-2"}):(0,a.jsx)(T.A,{size:14,className:"me-2"}),d[0]=p,d[1]=t,d[2]=s):(t=d[1],s=d[2]),d[3]!==u?(i=(0,a.jsx)("div",{className:"fs-7",children:u}),d[3]=u,d[4]=i):i=d[4],d[5]!==t||d[6]!==s||d[7]!==i?(l=(0,a.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,i]}),d[5]=t,d[6]=s,d[7]=i,d[8]=l):l=d[8],d[9]!==m||d[10]!==p?(o=p?null:(0,a.jsx)("div",{className:"mb-4",children:m}),d[9]=m,d[10]=p,d[11]=o):o=d[11],d[12]!==l||d[13]!==o?(c=(0,a.jsxs)("div",{className:"my-3",children:[l,o]}),d[12]=l,d[13]=o,d[14]=c):c=d[14],c},O=e=>{let t,s,n=(0,r.c)(5),{children:i,title:l}=e;return n[0]!==l?(t=l&&(0,a.jsx)("div",{className:D().panelSectionWrapperTitle,children:l}),n[0]=l,n[1]=t):t=n[1],n[2]!==i||n[3]!==t?(s=(0,a.jsxs)("div",{className:D().panelSectionWrapper,children:[t,i]}),n[2]=i,n[3]=t,n[4]=s):s=n[4],s},V=e=>{let t,s,n,i,l=(0,r.c)(8),{label:o,value:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={paddingRight:20,marginRight:12,borderRight:"1px solid #ffffff20"},l[0]=t):t=l[0],l[1]!==o?(s=(0,a.jsx)("div",{children:o}),l[1]=o,l[2]=s):s=l[2],l[3]!==c?(n=(0,a.jsx)("div",{className:"fs-7",children:c}),l[3]=c,l[4]=n):n=l[4],l[5]!==s||l[6]!==n?(i=(0,a.jsxs)("div",{style:t,children:[s,n]}),l[5]=s,l[6]=n,l[7]=i):i=l[7],i},B=e=>{let t,s=(0,r.c)(3),{onClick:n,isOpen:i}=e,l=i?"chevron-up":"chevron-down";return s[0]!==n||s[1]!==l?(t=(0,a.jsx)(M.L,{label:"",biIcon:l,onClick:n}),s[0]=n,s[1]=l,s[2]=t):t=s[2],t},H=[{accessorKey:"filename",cell:e=>{let t,s,i,l,o,c,d,u,m,h=(0,r.c)(31),{row:p,table:x}=e,g=x.options.meta,[f,b]=n.useState(p.index===g.firstFrameIndex);h[0]!==f?(t=()=>{b(!f)},h[0]=f,h[1]=t):t=h[1];let y=t,v=p.original,{isLoading:_,enrichedFrame:j}=(0,$.f)(v),w=j??v,C=!!w.context_line;return h[2]!==C?(s=S()("w-100 py-2 px-4 d-flex justify-content-between align-items-center",{[D().stacktraceRowInteractive]:C}),h[2]=C,h[3]=s):s=h[3],h[4]!==w.in_app?(i=!w.in_app&&(0,a.jsx)(E.m,{label:"in_app: false",position:"top",withArrow:!0,color:"gray",children:(0,a.jsx)(I.A,{size:14,className:"me-2","aria-label":"in_app: false"})}),h[4]=w.in_app,h[5]=i):i=h[5],h[6]!==w||h[7]!==_?(l=w&&(0,a.jsx)(P,{colno:w.colno,filename:w.filename,lineno:w.lineno,function:w.function,isLoading:_}),h[6]=w,h[7]=_,h[8]=l):l=h[8],h[9]!==i||h[10]!==l?(o=(0,a.jsxs)("div",{children:[i,l]}),h[9]=i,h[10]=l,h[11]=o):o=h[11],h[12]!==y||h[13]!==C||h[14]!==f?(c=C&&(0,a.jsx)(B,{onClick:y,isOpen:f}),h[12]=y,h[13]=C,h[14]=f,h[15]=c):c=h[15],h[16]!==y||h[17]!==s||h[18]!==o||h[19]!==c?(d=(0,a.jsxs)("div",{className:s,onClick:y,children:[o,c]}),h[16]=y,h[17]=s,h[18]=o,h[19]=c,h[20]=d):d=h[20],h[21]!==w.context_line||h[22]!==w.lineno||h[23]!==w.post_context||h[24]!==w.pre_context||h[25]!==C||h[26]!==f?(u=f&&C&&(0,a.jsxs)("pre",{className:D().lineContext,children:[w.pre_context?.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:D().lineContextLineNo,children:(w.lineno??0)-(w.pre_context?.length??0)+t}),e]},e+t)),w.context_line&&(0,a.jsxs)("div",{className:D().lineContextCurrentLine,children:[(0,a.jsx)("span",{className:D().lineContextLineNo,children:w.lineno}),w.context_line]}),w.post_context?.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:D().lineContextLineNo,children:w.lineno+t+1}),e]},e+t))]}),h[21]=w.context_line,h[22]=w.lineno,h[23]=w.post_context,h[24]=w.pre_context,h[25]=C,h[26]=f,h[27]=u):u=h[27],h[28]!==d||h[29]!==u?(m=(0,a.jsxs)(a.Fragment,{children:[d,u]}),h[28]=d,h[29]=u,h[30]=m):m=h[30],m}}],W=e=>{let t,s=(0,r.c)(2),{url:n}=e;return s[0]!==n?(t=(0,a.jsx)("span",{title:n,children:n}),s[0]=n,s[1]=t):t=s[1],t},q=n.memo(e=>{let t,s=(0,r.c)(3),{status:n}=e;if(!n)return null;let i=n>=500?"text-danger bg-danger":n>=400?"text-warning bg-warning":"text-success bg-success",l=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${i}`;return s[0]!==n||s[1]!==l?(t=(0,a.jsx)("span",{className:l,children:n}),s[0]=n,s[1]=l,s[2]=t):t=s[2],t}),J=n.memo(e=>{let t,s=(0,r.c)(3),{level:n}=e;if(!n)return null;let i=n.includes("error")?"text-danger bg-danger":n.includes("warn")||n.includes("warning")?"text-warning bg-warning":"bg-muted",l=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${i}`;return s[0]!==n||s[1]!==l?(t=(0,a.jsx)("span",{className:l,children:n}),s[0]=n,s[1]=l,s[2]=t):t=s[2],t}),K=[{accessorKey:"category",header:"Category",size:180,cell:({row:e})=>(0,a.jsxs)("span",{className:"d-flex align-items-center gap-2",children:[e.original.category,"console"===e.original.category&&(0,a.jsx)(J,{level:e.original.level}),"fetch"===e.original.category||"xhr"===e.original.category?(0,a.jsx)(q,{status:e.original.data?.status_code}):null]})},{accessorKey:"message",header:"Data",size:99999,cell:({row:e})=>{if(e.original.data&&("fetch"===e.original.category||"xhr"===e.original.category)){let{method:t,url:s}=e.original.data;return(0,a.jsxs)("div",{className:"text-truncate",children:[(0,a.jsxs)("span",{children:[t," "]}),(0,a.jsx)("span",{title:s,children:(0,a.jsx)(W,{url:s})})]})}if("navigation"===e.original.category&&e.original.data){let{from:t,to:s}=e.original.data;return(0,a.jsxs)("div",{className:"text-truncate",children:[(0,a.jsx)("span",{title:t,children:(0,a.jsx)(W,{url:t})}),(0,a.jsx)("span",{children:" â†’ "}),(0,a.jsx)("span",{title:s,children:(0,a.jsx)(W,{url:s})})]})}if("console"===e.original.category){let{message:t}=e.original;return(0,a.jsx)("pre",{className:"mb-0 text-truncate fs-8",title:t,children:t})}return e.original.message?(0,a.jsx)("div",{className:"text-truncate",children:e.original.message}):(0,a.jsx)("span",{className:"text-muted",children:"Empty"})}},{header:"Timestamp",size:220,cell:({row:e})=>(0,a.jsx)("span",{className:"text-muted",children:(0,a.jsx)(L.H,{value:1e3*e.original.timestamp,format:"withMs"})})}],G=e=>{let t,s,a,i=(0,r.c)(11),{rows:l,maxRows:o}=e,c=void 0===o?5:o,[d,u]=n.useState(!1);i[0]!==d||i[1]!==c||i[2]!==l?(t=d?l:l.slice(0,c),i[0]=d,i[1]=c,i[2]=l,i[3]=t):t=i[3];let m=t,h=l.length??0,p=h>c?h-c:null;i[4]!==d?(s=()=>{u(!d)},i[4]=d,i[5]=s):s=i[5];let x=s;return i[6]!==x||i[7]!==p||i[8]!==d||i[9]!==m?(a={visibleRows:m,hiddenRowsCount:p,handleToggleMoreRows:x,isExpanded:d},i[6]=x,i[7]=p,i[8]=d,i[9]=m,i[10]=a):a=i[10],a},Y=e=>{let t,s,n,i,l,o,c,d,u,m,p,x,g,f,b=(0,r.c)(42),{logData:y,breadcrumbs:v,exceptionValues:_}=e,j=_[0];j?.stacktrace?.frames;e:{let e;if(!j?.stacktrace?.frames){let e;b[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],b[0]=e):e=b[0],t=e;break e}b[1]!==j?.stacktrace.frames?(e=j?.stacktrace.frames.slice().reverse(),b[1]=j?.stacktrace.frames,b[2]=e):e=b[2],t=e}let S=t;if(b[3]!==S){let e=S&&S.length?S.find(e=>e.in_app)??S.find(e=>!!e.function||!!e.filename)??S[0]:null;s=e?S.indexOf(e):-1,b[3]=S,b[4]=s}else s=b[4];let E=s;b[5]!==v||b[6]!==j||b[7]!==y?.timestamp?(n=()=>[...j&&v?[{category:"exception",timestamp:new Date(y?.timestamp??0).getTime()/1e3,message:`${j.type}: ${j.value} `}]:[],...v?.slice().reverse()??[]],b[5]=v,b[6]=j,b[7]=y?.timestamp,b[8]=n):n=b[8],y?.timestamp,b[9]!==n?(i=n(),b[9]=n,b[10]=i):i=b[10];let N=i,k=Math.max(5,E+1);b[11]!==S||b[12]!==k?(l={rows:S,maxRows:k},b[11]=S,b[12]=k,b[13]=l):l=b[13];let{handleToggleMoreRows:A,hiddenRowsCount:I,visibleRows:L,isExpanded:$}=G(l);b[14]!==N?(o={rows:N},b[14]=N,b[15]=o):o=b[15];let{handleToggleMoreRows:z,hiddenRowsCount:D,visibleRows:P,isExpanded:B}=G(o);return b[16]!==j?(c=j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(h.E,{fw:"bold",component:"span",size:"sm",variant:"danger",children:[j.type,":"," "]}),(0,a.jsx)("span",{className:"text-muted",children:j.value})]}),j.mechanism&&(0,a.jsxs)("div",{className:"d-flex gap-2 flex-wrap pt-3",children:[(0,a.jsx)(V,{label:"mechanism",value:j.mechanism?.type}),(0,a.jsx)(V,{label:"handled",value:j.mechanism?.handled?(0,a.jsx)("span",{className:"text-success",children:"true"}):(0,a.jsx)("span",{className:"text-danger",children:"false"})}),j.mechanism?.data?.function?(0,a.jsx)(V,{label:"function",value:j.mechanism.data.function}):null,j.mechanism?.data?.handler?(0,a.jsx)(V,{label:"handler",value:j.mechanism.data.handler}):null,j.mechanism?.data?.target?(0,a.jsx)(V,{label:"target",value:j.mechanism.data.target}):null]})]}),b[16]=j,b[17]=c):c=b[17],b[18]!==E?(d={firstFrameIndex:E},b[18]=E,b[19]=d):d=b[19],b[20]!==L||b[21]!==d?(u=(0,a.jsx)(w.ErrorBoundary,{onError:U,fallbackRender:Z,children:(0,a.jsx)(M.X,{hideHeader:!0,columns:H,data:L,density:"zero",tableMeta:d})}),b[20]=L,b[21]=d,b[22]=u):u=b[22],b[23]!==_[0].stacktrace?(m="string"==typeof _[0].stacktrace&&(0,a.jsx)("pre",{className:"px-4",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:_[0].stacktrace}),b[23]=_[0].stacktrace,b[24]=m):m=b[24],b[25]!==A||b[26]!==$||b[27]!==I?(p=I?(0,a.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:A,children:$?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{size:14,className:"me-2"})," Hide stack trace"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{size:14,className:"me-2"}),"Show ",I," more frames"]})}):null,b[25]=A,b[26]=$,b[27]=I,b[28]=p):p=b[28],b[29]!==u||b[30]!==m||b[31]!==p||b[32]!==c?(x=(0,a.jsxs)(O,{title:c,children:[u,m,p]}),b[29]=u,b[30]=m,b[31]=p,b[32]=c,b[33]=x):x=b[33],b[34]!==B||b[35]!==D||b[36]!==P||b[37]!==z?(g=P.length>0&&(0,a.jsx)(F,{title:"Breadcrumbs",children:(0,a.jsxs)(O,{children:[(0,a.jsx)(M.X,{columns:K,data:P,emptyMessage:"No breadcrumbs found"}),D?(0,a.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:z,children:B?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{size:14,className:"me-2"})," Hide breadcrumbs"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{size:14,className:"me-2"}),"Show ",D," more breadcrumbs"]})}):null]})}),b[34]=B,b[35]=D,b[36]=P,b[37]=z,b[38]=g):g=b[38],b[39]!==x||b[40]!==g?(f=(0,a.jsxs)("div",{children:[x,g]}),b[39]=x,b[40]=g,b[41]=f):f=b[41],f};function U(e){console.error(e)}function Z(){return(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering stacktrace"})}var X=s(65234),Q=s.n(X),ee=s(21510),et=s(60665),es=s(34027),ea=s(26355),en=s(78694);let er=function(e){let t="";return e&&(t=` ${({GET:"-X GET",POST:"-X POST",PUT:"-X PUT",PATCH:"-X PATCH",DELETE:"-X DELETE"})[e.toUpperCase()]}`)," \\\n"+t},ei=function(e){let t="";return e&&e.map(([e,s])=>{t+=` \\
-H "${e}: ${s.replace(/(\\|")/g,"\\$1")}"`}),t},el=function(e){let t="";return e&&(t+=` \\
-d "${JSON.stringify(e).replace(/(\\|")/g,"\\$1")}"`),t},eo=function(e){let t="";return e&&(t+=` \\
--data-raw ${/[\0-\x1F\x7F-\x9F!]|\'/.test(e)?"$'"+e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(e){let t=e.charCodeAt(0).toString(16);for(;t.length<4;)t="0"+t;return"\\u"+t})+"'":"'"+e+"'"}`),t},ec=function(e){let t="";return e&&Object.keys(e).forEach(s=>{let a=s.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`);if(e[s])"boolean"==typeof e[s]&&e[s]?t+=`--${a} `:"string"==typeof e[s]&&(t+=`--${a} ${e[s]} `);else throw Error(`Invalid Curl option ${s}`)}),t?` \\
${t}`:t},ed=function(e,t){let s="curl ";return s+=e.url,s+=er(e.method),s+=ei(e.headers),s+="string"==typeof e.body?eo(e.body):el(e.body),(s+=ec(t)).trim()},eu={base00:"#00000000",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#8378FF",base0E:"#ae81ff",base0F:"#cc6633"},em=(e,t)=>Object.entries(c()(t,(t,s)=>s.startsWith(e))).flatMap(([t,s])=>{let a=s;try{"string"==typeof s&&(a=JSON.parse(s))}catch(e){}let n=t.replace(e,"").replace("_","-"),r=[[n,`${a}`]];if(Array.isArray(a))r=a.map(e=>[n,`${e}`]);else if("object"==typeof a&&Object.keys(a).length>0)try{r=[[n,`${JSON.stringify(a)}`]]}catch(e){console.error(e)}return r}),eh=({body:e,theme:t,emptyMessage:s,notCollectedMessage:r})=>{let i=n.useCallback(e=>(0,a.jsx)("pre",{className:"d-inline text-break",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e}),[]),l=n.useMemo(()=>{if("string"!=typeof e)return null;try{if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))return JSON.parse(e)}catch(e){return null}},[e]);return(0,a.jsx)(a.Fragment,{children:null!=e&&""!=e?(0,a.jsx)("pre",{className:"m-0 px-4 py-3",style:{wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:l?(0,a.jsx)(ea.A,{data:l,normallyExpanded:!0}):"string"==typeof e?e:(0,a.jsx)(ee.d,{hideRoot:!0,invertTheme:!1,data:e,theme:t,valueRenderer:i})}):""===e?(0,a.jsx)("div",{className:"px-4 py-3",children:s}):(0,a.jsx)("div",{className:"px-4 py-3",children:r})})};function ep(e){let t,s,n,i,l,o,c,d,u,m,h,p,x,g,f,b=(0,r.c)(41),{eventAttributes:y}=e;b[0]!==y?(t=em("http.request.header.",y),b[0]=y,b[1]=t):t=b[1];let v=t;b[2]!==y?(s=em("http.response.header.",y),b[2]=y,b[3]=s):s=b[3];let _=s,j=y["http.url"],S=y["net.peer.ip"],w=y["http.status_code"],E=y["http.method"],N=y["http.request.body"],k=y["http.response.body"];b[4]!==E||b[5]!==N||b[6]!==v||b[7]!==j?(n=ed({method:E,headers:v,url:j,body:N}),b[4]=E,b[5]=N,b[6]=v,b[7]=j,b[8]=n):n=b[8];let A=n;return j||E||w?(b[9]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsxs)(C.$,{size:"xs",variant:"primary",children:[(0,a.jsx)(es.A,{size:14,className:"me-2"}),"Copy Request as Curl"]}),b[9]=i):i=b[9],b[10]!==A?(l=(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(Q(),{text:A,onCopy:ex,children:i})}),b[10]=A,b[11]=l):l=b[11],b[12]!==j?(o=j&&{label:"URL",value:j},b[12]=j,b[13]=o):o=b[13],b[14]!==E?(c=E&&{label:"Method",value:E},b[14]=E,b[15]=c):c=b[15],b[16]!==S?(d=S&&{label:"Remote Address",value:S},b[16]=S,b[17]=d):d=b[17],b[18]!==y||b[19]!==w?(u=w&&{label:"Status",value:`${w} ${y["http.status_text"]??""}`,className:w>=500?"text-danger":w>=400?"text-warning":"text-success"},b[18]=y,b[19]=w,b[20]=u):u=b[20],b[21]!==o||b[22]!==c||b[23]!==d||b[24]!==u?(m=(0,a.jsx)(en.$K,{children:(0,a.jsx)(M.X,{borderless:!0,density:"compact",columns:en.Qx,data:[o,c,d,u].filter(Boolean),hideHeader:!0})}),b[21]=o,b[22]=c,b[23]=d,b[24]=u,b[25]=m):m=b[25],b[26]!==v?(h=v.length>0&&(0,a.jsx)(en.iV,{title:`Request Headers (${v.length})`,initiallyCollapsed:!0,children:(0,a.jsx)(en.$K,{children:(0,a.jsx)(M.X,{borderless:!0,hideHeader:!0,density:"compact",columns:en.hF,data:v,emptyMessage:"No request headers collected"})})}),b[26]=v,b[27]=h):h=b[27],b[28]!==N?(p=null!=N&&(0,a.jsx)(en.iV,{title:"Request Body",children:(0,a.jsx)(en.$K,{children:(0,a.jsx)(eh,{body:N,theme:eu,emptyMessage:"Empty request",notCollectedMessage:"No request body collected"})})}),b[28]=N,b[29]=p):p=b[29],b[30]!==_?(x=_.length>0&&(0,a.jsx)(en.iV,{title:`Response Headers (${_.length})`,initiallyCollapsed:!0,children:(0,a.jsx)(en.$K,{children:(0,a.jsx)(M.X,{borderless:!0,hideHeader:!0,density:"compact",columns:en.hF,data:_,emptyMessage:"No response headers collected"})})}),b[30]=_,b[31]=x):x=b[31],b[32]!==k?(g=null!=k&&(0,a.jsx)(en.iV,{title:"Response Body",children:(0,a.jsx)(en.$K,{children:(0,a.jsx)(eh,{body:k,theme:eu,emptyMessage:"Empty response",notCollectedMessage:"No response body collected"})})}),b[32]=k,b[33]=g):g=b[33],b[34]!==m||b[35]!==h||b[36]!==p||b[37]!==x||b[38]!==g||b[39]!==l?(f=(0,a.jsxs)("div",{children:[l,m,h,p,x,g]}),b[34]=m,b[35]=h,b[36]=p,b[37]=x,b[38]=g,b[39]=l,b[40]=f):f=b[40],f):null}function ex(){et.$e.show({color:"green",message:"Curl command copied to clipboard"})}let eg=[{accessorKey:"Timestamp",header:"Timestamp",size:120,cell:({row:e})=>(0,a.jsx)("span",{className:"text-muted",title:e.original.Timestamp,children:(0,a.jsx)(L.H,{value:new Date(e.original.Timestamp).getTime(),format:"withMs"})})},{accessorKey:"Name",header:"Name",size:180,cell:({row:e})=>(0,a.jsx)("span",{className:"d-flex align-items-center gap-2",children:e.original.Name})},{accessorKey:"Attributes",header:"Attributes",size:400,cell:({row:e})=>{let t=e.original.Attributes;return t&&Object.keys(t).length>0?(0,a.jsx)(u.a,{children:(0,a.jsx)(b.z,{data:t})}):(0,a.jsx)("span",{className:"text-muted",children:"Empty"})}}],ef=e=>{let t,s,n,i,l,o=(0,r.c)(15),{spanEvents:c}=e;e:{let e;if(!c||0===c.length){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}o[1]!==c?(e=[...c.filter(eb)].sort(ey),o[1]=c,o[2]=e):e=o[2],t=e}let d=t;o[3]!==d?(s={rows:d,maxRows:5},o[3]=d,o[4]=s):s=o[4];let{handleToggleMoreRows:u,hiddenRowsCount:m,visibleRows:h,isExpanded:p}=G(s);if(!d||0===d.length){let e;return o[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:"p-3 text-muted fs-7",children:"No span events available for this trace"}),o[5]=e):e=o[5],e}return o[6]!==h?(n=(0,a.jsx)(w.ErrorBoundary,{onError:ev,fallbackRender:e_,children:(0,a.jsx)(M.X,{columns:eg,data:h,emptyMessage:"No span events found"})}),o[6]=h,o[7]=n):n=o[7],o[8]!==u||o[9]!==m||o[10]!==p?(i=m?(0,a.jsx)(C.$,{variant:"secondary",size:"xs",my:"sm",onClick:u,children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.A,{size:14,className:"me-2"})," Hide events"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{size:14,className:"me-2"}),"Show ",m," more events"]})}):null,o[8]=u,o[9]=m,o[10]=p,o[11]=i):i=o[11],o[12]!==n||o[13]!==i?(l=(0,a.jsx)("div",{children:(0,a.jsxs)(O,{children:[n,i]})}),o[12]=n,o[13]=i,o[14]=l):l=o[14],l};function eb(e){return"string"==typeof e.Timestamp&&"string"==typeof e.Name&&void 0!==e.Attributes}function ey(e,t){let s=new Date(e.Timestamp).getTime();return new Date(t.Timestamp).getTime()-s}function ev(e){console.error(e)}function e_(){return(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering span events"})}let ej={};function eS(e){let t,s,i,o,j,S,w,E,C,N,k,A,T,I,R,L,$,M,z,D,P,F,O,V,B,H,W,q,J,K,G=(0,r.c)(96),{source:U,rowId:Z,aliasWith:X,hideHeader:Q,"data-testid":ee}=e,et=void 0!==Q&&Q;G[0]!==X||G[1]!==Z||G[2]!==U?(t={source:U,rowId:Z,aliasWith:X},G[0]=X,G[1]=Z,G[2]=U,G[3]=t):t=G[3];let{data:es}=(0,f.k1)(t),{onPropertyAddClick:ea,generateSearchUrl:en}=(0,n.useContext)(y.D);G[4]!==U.highlightedRowAttributeExpressions||G[5]!==U.kind?(s=U.kind===d.GL.Trace||U.kind===d.GL.Log?U.highlightedRowAttributeExpressions??[]:[],G[4]=U.highlightedRowAttributeExpressions,G[5]=U.kind,G[6]=s):s=G[6];let er=s;G[7]!==er||G[8]!==es||G[9]!==U?(i=es?(0,g.N4)(U,er,es.data||[],es.meta||[]):[],G[7]=er,G[8]=es,G[9]=U,G[10]=i):i=G[10];let ei=i,el=es?.meta;G[11]!==el?(o=(0,f.bn)(el),G[11]=el,G[12]=o):o=G[12];let eo=o,ec=U.eventAttributesExpression;e:{let e,t;G[13]!==es?.data?.[0]?(e=es?.data?.[0]??{},G[13]=es?.data?.[0],G[14]=e):e=G[14],G[15]!==e?(t={...e},G[15]=e,G[16]=t):t=G[16];let s=t;if(!s){j=null;break e}j=s}let ed=j;G[17]===Symbol.for("react.memo_cache_sentinel")?(S=["ServiceName","SpanName","Duration","SeverityText","StatusCode","StatusMessage","SpanKind","TraceId","SpanId","ParentSpanId","ScopeName","ScopeVersion"],G[17]=S):S=G[17];let eu=S;G[18]===Symbol.for("react.memo_cache_sentinel")?(w=(e,t)=>""!==e&&!!eu.includes(t),G[18]=w):w=G[18],G[19]!==ed?(E=c()(ed,w),G[19]=ed,G[20]=E):E=G[20];let em=E,eh=ed?.__hdx_resource_attributes??ej,ex=ed?.__hdx_event_attributes??ej;G[21]!==ec||G[22]!==ed?(C=ec&&ed?.[ec]&&Object.keys(ed[ec]).length>0?{[ec]:ed[ec]}:{},G[21]=ec,G[22]=ed,G[23]=C):C=G[23];let eg=C;G[24]!==en?(N=(e,t)=>en?.({where:e,whereLanguage:t})??"/",G[24]=en,G[25]=N):N=G[25];let eb=N,ey=ec&&eg?.[ec],ev=ey?.["http.url"]!=null;t:{let e;if(!ec){k=eg;break t}let t=eg?.[ec];G[26]!==t||G[27]!==eg||G[28]!==ec||G[29]!==ev?(e=ev&&t?{[ec]:c()(t,ew)}:eg,G[26]=t,G[27]=eg,G[28]=ec,G[29]=ev,G[30]=e):e=G[30],k=e}let e_=k,eS=ed?.__hdx_events_exception_attributes??ej,eE=eS?.["exception.stacktrace"]||eS?.["exception.parsed_stacktrace"],eC=eE??"[]";try{let e;G[31]!==eE?(e=JSON.parse(eE),G[31]=eE,G[32]=e):e=G[32],eC=e}catch(e){}let eN=eS?.["exception.type"];G[33]!==eS?(A="string"!=typeof eS?.["exception.message"]?JSON.stringify(eS?.["exception.message"]):eS?.["exception.message"],G[33]=eS,G[34]=A):A=G[34];let ek=eS?.["exception.mechanism"];G[35]!==eC||G[36]!==eN||G[37]!==A||G[38]!==ek?(T=[{stacktrace:eC,type:eN,value:A,mechanism:ek}],G[35]=eC,G[36]=eN,G[37]=A,G[38]=ek,G[39]=T):T=G[39];let eA=T;G[40]!==ed?.__hdx_events_exception_attributes?(I=()=>Object.keys(ed?.__hdx_events_exception_attributes??{}).length>0,G[40]=ed?.__hdx_events_exception_attributes,G[41]=I):I=G[41],ed?.__hdx_events_exception_attributes;let eT=I();ed?.__hdx_span_events;let eI=Array.isArray(ed?.__hdx_span_events)&&ed?.__hdx_span_events.length>0;G[42]!==U?(R=(0,x.N8)(U),G[42]=U,G[43]=R):R=G[43];let eR=R;G[44]!==ed?(L=l()(ed?.__hdx_body)?ed.__hdx_body:ed?.__hdx_body!==void 0?JSON.stringify(ed.__hdx_body):void 0,G[44]=ed,G[45]=L):L=G[45];let eL=L;G[46]!==ed?.__hdx_severity_text||G[47]!==ed?.__hdx_timestamp||G[48]!==et||G[49]!==ei||G[50]!==eL||G[51]!==eR?($=!et&&(0,a.jsx)(u.a,{px:"sm",pt:"md",children:(0,a.jsx)(v.A,{attributes:ei,date:new Date(ed?.__hdx_timestamp??0),mainContent:eL,mainContentHeader:eR,severityText:ed?.__hdx_severity_text})}),G[46]=ed?.__hdx_severity_text,G[47]=ed?.__hdx_timestamp,G[48]=et,G[49]=ei,G[50]=eL,G[51]=eR,G[52]=$):$=G[52],G[53]===Symbol.for("react.memo_cache_sentinel")?(M=["exception","spanEvents","network","resourceAttributes","eventAttributes","topLevelAttributes"],G[53]=M):M=G[53],G[54]!==ex||G[55]!==ev?(z=ev&&(0,a.jsxs)(m.n.Item,{value:"network",children:[(0,a.jsx)(m.n.Control,{children:(0,a.jsx)(h.E,{size:"sm",ps:"md",children:"HTTP Request"})}),(0,a.jsx)(m.n.Panel,{children:(0,a.jsx)(u.a,{px:"md",children:(0,a.jsx)(ep,{eventAttributes:ex})})})]}),G[54]=ex,G[55]=ev,G[56]=z):z=G[56],G[57]!==eA||G[58]!==ed?.__hdx_timestamp||G[59]!==eT?(D=eT&&(0,a.jsxs)(m.n.Item,{value:"exception",children:[(0,a.jsx)(m.n.Control,{children:(0,a.jsx)(h.E,{size:"sm",ps:"md",children:"Exception"})}),(0,a.jsx)(m.n.Panel,{children:(0,a.jsx)(u.a,{px:"md",children:(0,a.jsx)(Y,{exceptionValues:eA,breadcrumbs:[],logData:{timestamp:ed?.__hdx_timestamp}})})})]}),G[57]=eA,G[58]=ed?.__hdx_timestamp,G[59]=eT,G[60]=D):D=G[60],G[61]!==ed?.__hdx_span_events||G[62]!==eI?(P=eI&&(0,a.jsxs)(m.n.Item,{value:"spanEvents",children:[(0,a.jsx)(m.n.Control,{children:(0,a.jsx)(h.E,{size:"sm",ps:"md",children:"Span Events"})}),(0,a.jsx)(m.n.Panel,{children:(0,a.jsx)(u.a,{px:"md",children:(0,a.jsx)(ef,{spanEvents:ed?.__hdx_span_events})})})]}),G[61]=ed?.__hdx_span_events,G[62]=eI,G[63]=P):P=G[63],G[64]!==eo||G[65]!==em?(F=Object.keys(em).length>0&&(0,a.jsxs)(m.n.Item,{value:"topLevelAttributes",children:[(0,a.jsx)(m.n.Control,{children:(0,a.jsx)(h.E,{size:"sm",ps:"md",children:"Top Level Attributes"})}),(0,a.jsx)(m.n.Panel,{children:(0,a.jsx)(u.a,{px:"md",children:(0,a.jsx)(b.z,{data:em,jsonColumns:eo})})})]}),G[64]=eo,G[65]=em,G[66]=F):F=G[66];let e$="log"===U.kind?"Log":"Span";return G[67]!==e$?(O=(0,a.jsx)(m.n.Control,{children:(0,a.jsxs)(h.E,{size:"sm",ps:"md",children:[e$," Attributes"]})}),G[67]=e$,G[68]=O):O=G[68],G[69]!==e_||G[70]!==eo?(V=(0,a.jsx)(m.n.Panel,{children:(0,a.jsx)(u.a,{px:"md",children:(0,a.jsx)(b.z,{data:e_,jsonColumns:eo})})}),G[69]=e_,G[70]=eo,G[71]=V):V=G[71],G[72]!==O||G[73]!==V?(B=(0,a.jsxs)(m.n.Item,{value:"eventAttributes",children:[O,V]}),G[72]=O,G[73]=V,G[74]=B):B=G[74],G[75]===Symbol.for("react.memo_cache_sentinel")?(H=(0,a.jsx)(m.n.Control,{children:(0,a.jsx)(h.E,{size:"sm",ps:"md",children:"Resource Attributes"})}),G[75]=H):H=G[75],G[76]!==eh?(W=Object.entries(eh),G[76]=eh,G[77]=W):W=G[77],G[78]!==eb||G[79]!==en||G[80]!==eo||G[81]!==ea||G[82]!==U.resourceAttributesExpression||G[83]!==W?(q=(0,a.jsxs)(m.n.Item,{value:"resourceAttributes",children:[H,(0,a.jsx)(m.n.Panel,{children:(0,a.jsx)(p.s,{wrap:"wrap",gap:"2px",mx:"md",mb:"lg",children:W.map(e=>{let[t,s]=e;return(0,n.createElement)(_.A,{...ea?{onPropertyAddClick:ea,sqlExpression:U.resourceAttributesExpression&&eo?.includes(U.resourceAttributesExpression)?`toString(${U.resourceAttributesExpression}.${t})`:`${U.resourceAttributesExpression}['${t}']`}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:en?eb:void 0,displayedKey:t,name:`${U.resourceAttributesExpression}.${t}`,value:s,key:t})})})})]}),G[78]=eb,G[79]=en,G[80]=eo,G[81]=ea,G[82]=U.resourceAttributesExpression,G[83]=W,G[84]=q):q=G[84],G[85]!==z||G[86]!==D||G[87]!==P||G[88]!==F||G[89]!==B||G[90]!==q?(J=(0,a.jsxs)(m.n,{mt:"sm",defaultValue:M,multiple:!0,variant:"noPadding",children:[z,D,P,F,B,q]}),G[85]=z,G[86]=D,G[87]=P,G[88]=F,G[89]=B,G[90]=q,G[91]=J):J=G[91],G[92]!==ee||G[93]!==$||G[94]!==J?(K=(0,a.jsxs)("div",{className:"flex-grow-1 overflow-auto","data-testid":ee,children:[$,J]}),G[92]=ee,G[93]=$,G[94]=J,G[95]=K):K=G[95],K}function ew(e,t){return!t.startsWith("http.")}},28450:(e,t,s)=>{"use strict";s.d(t,{FB:()=>_,Qg:()=>y,xD:()=>j});var a=s(6029),n=s(75155);s(55729);var r=s(82203),i=s.n(r),l=s(43465),o=s(67270),c=s(30039),d=s(43517),u=s(3635),m=s(43085),h=s(12482),p=s(49672),x=s(78550),g=s(81973),f=s(9897),b=s(7565);let y=(e,t)=>{let s,a,r,i=(0,n.c)(22),{dateRange:l,extraSelects:c,limit:d,logSource:u,order:m,where:f,whereLanguage:b}=e,y=(0,p.fu)(),v=(0,x.Ge)();return i[0]!==l||i[1]!==c||i[2]!==d||i[3]!==u.id||i[4]!==m||i[5]!==f||i[6]!==b?(s=["v2LogBatch",u.id,c,l,f,b,d,m],i[0]=l,i[1]=c,i[2]=d,i[3]=u.id,i[4]=m,i[5]=f,i[6]=b,i[7]=s):s=i[7],i[8]!==y||i[9]!==l||i[10]!==c||i[11]!==d||i[12]!==u||i[13]!==v||i[14]!==m||i[15]!==f||i[16]!==b?(a=async()=>{let e=await (0,o.PV)({select:[{valueExpression:(0,g.xg)(u),alias:"timestamp"},{valueExpression:`${u.serviceNameExpression}`,alias:"_service"},...c&&Array.isArray(c)?c:[]],from:u.from,dateRange:l,timestampValueExpression:u.timestampValueExpression,implicitColumnExpression:u.implicitColumnExpression,where:f,whereLanguage:b,connection:u.connection,limit:{limit:d??50,offset:0},orderBy:`${u.timestampValueExpression} ${m}`},v,u.querySettings);return await y.query({query:e.sql,query_params:e.params,connectionId:u.connection}).then(S)},i[8]=y,i[9]=l,i[10]=c,i[11]=d,i[12]=u,i[13]=v,i[14]=m,i[15]=f,i[16]=b,i[17]=a):a=i[17],i[18]!==t||i[19]!==s||i[20]!==a?(r={queryKey:s,queryFn:a,staleTime:3e5,...t},i[18]=t,i[19]=s,i[20]=a,i[21]=r):r=i[21],(0,h.I)(r)},v=e=>t=>{let s="#";try{s=`/search?q=${encodeURIComponent(`${e.resourceAttributesExpression}.k8s.pod.name:"${t["k8s.pod.name"]}"`)}&source=${e.id}&from=${new Date(t.timestamp).getTime()-9e5}&to=${new Date(t.timestamp).getTime()+1}`}catch(e){}return(0,a.jsxs)(c.K.Item,{children:[(0,a.jsx)(i(),{href:s,children:(0,a.jsx)(d.E,{size:"xs",fz:11,title:t.timestamp,c:"green",td:"underline",fw:"bold",children:(0,a.jsx)(b.H,{value:t.timestamp})})}),(0,a.jsxs)(u.Y,{gap:"xs",my:4,children:[(0,a.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:t["object.reason"]}),t["object.type"]&&(0,a.jsx)(m.E,{variant:"light",size:"xs",fw:"normal",color:"Normal"===t["object.type"]?"green":"yellow",children:t["object.type"]})]}),(0,a.jsx)(d.E,{size:"xs",children:t["object.note"]||t["object.message"]})]},t.id)},_=e=>{let t,s,r,i,o,m,h,p,x,g,f,_,j,S,C,N,k,A,T,I,R=(0,n.c)(82),{q:L,logSource:$,anchorEvent:M,dateRange:z}=e;R[0]!==z?.[0]?(t=z?.[0]??(0,l.A)(new Date,{days:1}),R[0]=z?.[0],R[1]=t):t=R[1];let D=t;R[2]!==z?.[1]?(s=z?.[1]??new Date,R[2]=z?.[1],R[3]=s):s=R[3];let P=s;R[4]!==P||R[5]!==D?(r=[D,P],R[4]=P,R[5]=D,R[6]=r):r=R[6];let F=`${$.eventAttributesExpression}.k8s.resource.name:"events" ${L}`;R[7]===Symbol.for("react.memo_cache_sentinel")?(i={valueExpression:"generateUUIDv4()",alias:"id"},R[7]=i):i=R[7];let O=`JSONExtractString(${$.eventAttributesExpression}['object'], 'metadata', 'creationTimestamp')`;R[8]!==O?(o={valueExpression:O,alias:"object.metadata.creationTimestamp"},R[8]=O,R[9]=o):o=R[9];let V=`JSONExtractString(${$.eventAttributesExpression}['object'], 'reason')`;R[10]!==V?(m={valueExpression:V,alias:"object.reason"},R[10]=V,R[11]=m):m=R[11];let B=`JSONExtractString(${$.eventAttributesExpression}['object'], 'note')`;R[12]!==B?(h={valueExpression:B,alias:"object.note"},R[12]=B,R[13]=h):h=R[13];let H=`JSONExtractString(${$.eventAttributesExpression}['object'], 'type')`;R[14]!==H?(p={valueExpression:H,alias:"object.type"},R[14]=H,R[15]=p):p=R[15];let W=`JSONExtractString(${$.eventAttributesExpression}['object'], 'message')`;R[16]!==W?(x={valueExpression:W,alias:"object.message"},R[16]=W,R[17]=x):x=R[17];let q=`JSONExtractString(${$.eventAttributesExpression}['object'], 'regarding', 'name')`;R[18]!==q?(g={valueExpression:q,alias:"k8s.pod.name"},R[18]=q,R[19]=g):g=R[19];let J=`JSONExtractString(${$.eventAttributesExpression}['object'], 'regarding', 'uid')`;R[20]!==J?(f={valueExpression:J,alias:"k8s.pod.uid"},R[20]=J,R[21]=f):f=R[21];let K=`JSONExtractString(${$.eventAttributesExpression}['object'], 'type')`;R[22]!==K?(_={valueExpression:K,alias:"type"},R[22]=K,R[23]=_):_=R[23];let G=`JSONExtractString(${$.eventAttributesExpression}['object'], 'type')`;R[24]!==G?(j={valueExpression:G,alias:"severity_text"},R[24]=G,R[25]=j):j=R[25];let Y=`JSONExtractString(${$.eventAttributesExpression}['object'], 'note')`;R[26]!==Y?(S={valueExpression:Y,alias:"body"},R[26]=Y,R[27]=S):S=R[27],R[28]!==h||R[29]!==p||R[30]!==x||R[31]!==g||R[32]!==f||R[33]!==_||R[34]!==j||R[35]!==S||R[36]!==o||R[37]!==m?(C=[i,o,m,h,p,x,g,f,_,j,S],R[28]=h,R[29]=p,R[30]=x,R[31]=g,R[32]=f,R[33]=_,R[34]=j,R[35]=S,R[36]=o,R[37]=m,R[38]=C):C=R[38],R[39]!==$||R[40]!==C||R[41]!==r||R[42]!==F?(N={dateRange:r,limit:50,logSource:$,order:"desc",where:F,whereLanguage:"lucene",extraSelects:C},R[39]=$,R[40]=C,R[41]=r,R[42]=F,R[43]=N):N=R[43];let{data:U,isLoading:Z}=y(N);R[44]!==U?.data?(k=U?.data||[],R[44]=U?.data,R[45]=k):k=R[45],R[46]!==k?(A=k.sort(w),R[46]=k,R[47]=A):A=R[47];let X=A;R[48]!==X||R[49]!==M?(T=M?X.filter(e=>new Date(e.timestamp)<new Date(M.timestamp)):[],R[48]=X,R[49]=M,R[50]=T):T=R[50];let Q=T;R[51]!==X||R[52]!==M?(I=M?X.filter(e=>new Date(e.timestamp)>new Date(M.timestamp)):[],R[51]=X,R[52]=M,R[53]=I):I=R[53];let ee=I;if(Z){let e;return R[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(d.E,{color:"muted",ta:"center",children:"Loading..."}),R[54]=e):e=R[54],e}if(0===X.length){let e;return R[55]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(d.E,{color:"muted",ta:"center",children:"No events"}),R[55]=e):e=R[55],e}if(M){let e,t,s,n,r,i,l;return R[56]!==$||R[57]!==ee?(e=ee.map(v($)),R[56]=$,R[57]=ee,R[58]=e):e=R[58],R[59]!==M.timestamp?(t=(0,a.jsx)(b.H,{value:M.timestamp}),R[59]=M.timestamp,R[60]=t):t=R[60],R[61]!==M.timestamp||R[62]!==t?(s=(0,a.jsx)(d.E,{size:"xs",fz:11,title:M.timestamp,children:t}),R[61]=M.timestamp,R[62]=t,R[63]=s):s=R[63],R[64]!==M.label?(n=(0,a.jsx)(u.Y,{gap:"xs",my:4,children:(0,a.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:M.label})}),R[64]=M.label,R[65]=n):n=R[65],R[66]!==M.timestamp||R[67]!==s||R[68]!==n?(r=(0,a.jsxs)(c.K.Item,{ref:E,children:[s,n]},M.timestamp),R[66]=M.timestamp,R[67]=s,R[68]=n,R[69]=r):r=R[69],R[70]!==$||R[71]!==Q?(i=Q.map(v($)),R[70]=$,R[71]=Q,R[72]=i):i=R[72],R[73]!==e||R[74]!==r||R[75]!==i?(l=(0,a.jsxs)(c.K,{bulletSize:12,lineWidth:1,children:[e,r,i]}),R[73]=e,R[74]=r,R[75]=i,R[76]=l):l=R[76],l}{let e,t;return R[77]!==X||R[78]!==$?(e=X.map(v($)),R[77]=X,R[78]=$,R[79]=e):e=R[79],R[80]!==e?(t=(0,a.jsx)(c.K,{bulletSize:12,lineWidth:1,children:e}),R[80]=e,R[81]=t):t=R[81],t}},j=e=>{let t=(0,n.c)(6),{status:s}=e;switch(s){case f.h.Pending:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(m.E,{variant:"light",color:"yellow",fw:"normal",tt:"none",size:"md",children:"Pending"}),t[0]=e):e=t[0],e}case f.h.Running:{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(m.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Running"}),t[1]=e):e=t[1],e}case f.h.Succeeded:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(m.E,{variant:"light",color:"indigo",fw:"normal",tt:"none",size:"md",children:"Succeeded"}),t[2]=e):e=t[2],e}case f.h.Failed:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(m.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Failed"}),t[3]=e):e=t[3],e}case f.h.Unknown:{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[4]=e):e=t[4],e}default:{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[5]=e):e=t[5],e}}};function S(e){return e.json()}function w(e,t){return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()}function E(e){null!==e&&e.scrollIntoView({block:"nearest"})}},31451:(e,t,s)=>{"use strict";s.d(t,{Q$:()=>f,nt:()=>v,vN:()=>g,xj:()=>x});var a=s(75155),n=s(36722),r=s.n(n),i=s(76089),l=s(12482),o=s(43152),c=s(46061),d=s(91021),u=s(81973);async function m(){let e=await window.loadPyodide();await e.loadPackage("micropip");let t=e.pyimport("micropip"),s=new URL("/jsonpickle-4.1.1-py3-none-any.whl",window.location.origin);await t.install(s.href);let a=new URL("/drain3-0.9.11-py3-none-any.whl",window.location.origin);return await t.install(a.href),e}class h{constructor(e){this.pyodide=e,this.id=Math.random().toString(36).substring(2,15),this.minerVariableName=`m_${this.id}`}async init(){await this.pyodide.runPythonAsync(`
import js
import json
from drain3 import TemplateMiner
from drain3.template_miner_config import TemplateMinerConfig

${this.minerVariableName} = TemplateMiner(None, TemplateMinerConfig())
    `)}async minePatterns(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        ${s}.append(${this.minerVariableName}.add_log_message(log))
      json.dumps(${s})
    `))}async matchLogs(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        match = ${this.minerVariableName}.match(log)
        ${s}.append(match.cluster_id if match else None)
      json.dumps(${s})
    `))}}async function p(e,t){let s=new h(t);return await s.init(),{miner:s,patterns:await s.minePatterns(e)}}let x="__hdx_pattern_field",g="__hdx_timestamp",f="__hdx_severity_text",b="__hdx_status_code";function y(e){return r()(e[x])}function v(e){let t,s,n,r,h,v=(0,a.c)(22),{config:S,samples:w,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:N,totalCount:k,enabled:A}=e,T=void 0===A||A;v[0]!==E||v[1]!==S||v[2]!==T||v[3]!==w||v[4]!==C||v[5]!==N?(t={config:S,samples:w,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:N,enabled:T},v[0]=E,v[1]=S,v[2]=T,v[3]=w,v[4]=C,v[5]=N,v[6]=t):t=v[6];let{data:I,isLoading:R,patternQueryConfig:L}=function(e){var t;let s,n,r,i,o,h,v,_,j,S,w,E,C,N,k,A,T=(0,a.c)(36),{config:I,samples:R,bodyValueExpression:L,severityTextExpression:$,statusCodeExpression:M,enabled:z}=e,D=void 0===z||z,P=`${L} as ${x}`;T[0]!==I.timestampValueExpression?(s=(0,u.AF)(I.timestampValueExpression),T[0]=I.timestampValueExpression,T[1]=s):s=T[1];let F=`${s} as ${g}`;T[2]!==$?(n=$?[`${$} as ${f}`]:[],T[2]=$,T[3]=n):n=T[3],T[4]!==M?(r=M?[`${M} as ${b}`]:[],T[4]=M,T[5]=r):r=T[5],T[6]!==P||T[7]!==F||T[8]!==n||T[9]!==r?(i=[P,F,...n,...r],T[6]=P,T[7]=F,T[8]=n,T[9]=r,T[10]=i):i=T[10];let O=i.join(",");T[11]===Symbol.for("react.memo_cache_sentinel")?(o=[{ordering:"DESC",valueExpression:"rand()"}],T[11]=o):o=T[11],T[12]!==R?(h={limit:R},T[12]=R,T[13]=h):h=T[13],T[14]!==I||T[15]!==h||T[16]!==O?(v={...I,select:O,orderBy:o,limit:h},T[14]=I,T[15]=h,T[16]=O,T[17]=v):v=T[17];let V=(0,c.YB)(v),B=null!=V&&D;T[18]!==B?(_={enabled:B},T[18]=B,T[19]=_):_=T[19];let{data:H,isLoading:W}=(0,d.HD)(V??I,_);T[20]!==D?(j={enabled:D},T[20]=D,T[21]=j):j=T[21];let{data:q,isLoading:J}=(t=j,(A=(0,a.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(N=["pyodide"],A[0]=N):N=A[0],A[1]!==t.enabled?(k={queryKey:N,queryFn:m,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1,enabled:t.enabled},A[1]=t.enabled,A[2]=k):k=A[2],(0,l.I)(k));T[22]!==I?(S=["patterns",I],T[22]=I,T[23]=S):S=T[23],T[24]!==V||T[25]!==q||T[26]!==H?(w=()=>{if(null==V)throw Error("Unexpected configWithPrimaryAndPartitionKey is null");return p(H?.data.map(y)??[],q).then(e=>{let t=[],s=e.patterns;for(let e=0;e<s.length;e++){let a=s[e],n=H?.data[e];t.push({...n,__hdx_patternId:a.cluster_id,__hdx_pattern:a.template_mined})}return{...H,data:t,additionalKeysLength:V.additionalKeysLength,miner:e.miner}})},T[24]=V,T[25]=q,T[26]=H,T[27]=w):w=T[27];let K=null!=H&&null!=q&&D;T[28]!==S||T[29]!==w||T[30]!==K?(E={queryKey:S,queryFn:w,refetchOnWindowFocus:!1,enabled:K},T[28]=S,T[29]=w,T[30]=K,T[31]=E):E=T[31];let G=(0,l.I)(E),Y=G.isLoading||W||J;return T[32]!==V||T[33]!==G||T[34]!==Y?(C={...G,isLoading:Y,patternQueryConfig:V},T[32]=V,T[33]=G,T[34]=Y,T[35]=C):C=T[35],C}(t),$=I?.data.length,M=k&&$?k/$:1;v[7]!==S.dateRange?(s=(0,i.tA)(S.dateRange,24),n=(0,o.Ht)(S.dateRange[0],S.dateRange[1],s),v[7]=S.dateRange,v[8]=s,v[9]=n):(s=v[8],n=v[9]);let z=n;if(v[10]!==S.dateRange||v[11]!==s||v[12]!==I?.data||v[13]!==M||v[14]!==z){let e=I?.data.reduce(j,{});r={},Object.entries(e??{}).forEach(e=>{let[t,a]=e,n=z.reduce(_,{}),i=a.reduce((e,t)=>{let a=t[g],n=(0,o.W6)(new Date(a),s).getTime();return e[n]=(e[n]||0)+1,e},n),l=Math.max(Math.round(a.length*M),1),c=a.at(-1);r[t]={id:t,pattern:c?.__hdx_pattern,count:l,countStr:`~${l}`,severityText:c?.[f],statusCode:c?.[b],samples:a,__hdx_pattern_trend:{data:Object.entries(i).map(e=>{let[t,s]=e;return{bucket:Number.parseInt(t)/1e3,count:Math.round(s*M)}}),granularity:s,dateRange:S.dateRange}}}),v[10]=S.dateRange,v[11]=s,v[12]=I?.data,v[13]=M,v[14]=z,v[15]=r}else r=v[15];let D=r,P=I?.miner;return v[16]!==D||v[17]!==R||v[18]!==L||v[19]!==$||v[20]!==P?(h={data:D,isLoading:R,miner:P,sampledRowCount:$,patternQueryConfig:L},v[16]=D,v[17]=R,v[18]=L,v[19]=$,v[20]=P,v[21]=h):h=v[21],h}function _(e,t){return e[t.getTime()]=0,e}function j(e,t){let s=`${t.__hdx_patternId}`;return e[s]=e[s]||[],e[s].push(t),e}},32479:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var a=s(75155),n=s(55729),r=s(76089),i=s(2489),l=s(43152);let o=e=>{let t,s,o,c,d,u=(0,a.c)(15),{searchedTimeRange:m,onTimeRangeSelect:h,isLive:p}=e,[x,g]=n.useState(!1),f="visible"===(0,i.f)()&&p;u[0]!==h||u[1]!==m?(t=()=>{let e=1e3*Math.round((m[1].getTime()-m[0].getTime())/1e3),t=new Date;h(new Date(t.getTime()-e),t),g(!0),setTimeout(()=>{g(!1)},1e3)},u[0]=h,u[1]=m,u[2]=t):t=u[2];let b=t;u[3]!==m?(s=(0,r.tA)(m),u[3]=m,u[4]=s):s=u[4];let y=s,v=n.useRef(null);return u[5]!==y||u[6]!==f||u[7]!==b?(o=()=>(f?(v.current&&window.clearInterval(v.current),v.current=window.setInterval(()=>{b()},1e3*(0,l.qL)(y))):v.current&&window.clearInterval(v.current),()=>{v.current&&window.clearInterval(v.current)}),c=[f,y,b],u[5]=y,u[6]=f,u[7]=b,u[8]=o,u[9]=c):(o=u[8],c=u[9]),n.useEffect(o,c),u[10]!==y||u[11]!==f||u[12]!==x||u[13]!==b?(d={granularityOverride:y,isRefreshEnabled:f,manualRefreshCooloff:x,refresh:b},u[10]=y,u[11]=f,u[12]=x,u[13]=b,u[14]=d):d=u[14],d}},36011:e=>{e.exports={root:"SearchWhereInput_root__IzMOd",inputWrapper:"SearchWhereInput_inputWrapper__7mdT7",sizeXs:"SearchWhereInput_sizeXs__MfgMj",sizeSm:"SearchWhereInput_sizeSm__B7Xwd",languageSwitch:"SearchWhereInput_languageSwitch__dZQ28",shortcutHint:"SearchWhereInput_shortcutHint__NwHbY"}},37901:(e,t,s)=>{"use strict";s.d(t,{$_:()=>h,bn:()=>x,dD:()=>g,k1:()=>p});var a,n=s(6029),r=s(75155),i=s(46375),l=s(82641),o=s(60481),c=s(91021),d=s(81973),u=s(18006),m=s(65081),h=((a={}).TIMESTAMP="__hdx_timestamp",a.BODY="__hdx_body",a.TRACE_ID="__hdx_trace_id",a.SPAN_ID="__hdx_span_id",a.SEVERITY_TEXT="__hdx_severity_text",a.SERVICE_NAME="__hdx_service_name",a.RESOURCE_ATTRIBUTES="__hdx_resource_attributes",a.EVENT_ATTRIBUTES="__hdx_event_attributes",a.EVENTS_EXCEPTION_ATTRIBUTES="__hdx_events_exception_attributes",a.SPAN_EVENTS="__hdx_span_events",a);function p(e){let t,s,a,n,o,m,h,p,x,g,f,b=(0,r.c)(62),{source:y,rowId:v,aliasWith:_}=e;b[0]!==y?(t=(0,d.N8)(y),b[0]=y,b[1]=t):t=b[1];let j=t,S=y.traceIdExpression,w=y.spanIdExpression,E=y.severityTextExpression||y.statusCodeExpression;if(b[2]!==j||b[3]!==w||b[4]!==S||b[5]!==E||b[6]!==y){let e,t,r,i,o,m,h,p,x,g,f,v=y.kind===l.GL.Trace||y.kind===l.GL.Log?(0,u.z4)(y.highlightedRowAttributeExpressions):[];n=c.HD,s=y.connection,b[10]===Symbol.for("react.memo_cache_sentinel")?(e={valueExpression:"*"},b[10]=e):e=b[10],b[11]!==y?(t=(0,d.xg)(y),b[11]=y,b[12]=t):t=b[12],b[13]!==t?(r={valueExpression:t,alias:"__hdx_timestamp"},b[13]=t,b[14]=r):r=b[14],b[15]!==j?(i=j?[{valueExpression:j,alias:"__hdx_body"}]:[],b[15]=j,b[16]=i):i=b[16],b[17]!==S?(o=S?[{valueExpression:S,alias:"__hdx_trace_id"}]:[],b[17]=S,b[18]=o):o=b[18],b[19]!==w?(m=w?[{valueExpression:w,alias:"__hdx_span_id"}]:[],b[19]=w,b[20]=m):m=b[20],b[21]!==E?(h=E?[{valueExpression:E,alias:"__hdx_severity_text"}]:[],b[21]=E,b[22]=h):h=b[22],b[23]!==y.serviceNameExpression?(p=y.serviceNameExpression?[{valueExpression:y.serviceNameExpression,alias:"__hdx_service_name"}]:[],b[23]=y.serviceNameExpression,b[24]=p):p=b[24],b[25]!==y.resourceAttributesExpression?(x=y.resourceAttributesExpression?[{valueExpression:y.resourceAttributesExpression,alias:"__hdx_resource_attributes"}]:[],b[25]=y.resourceAttributesExpression,b[26]=x):x=b[26],b[27]!==y.eventAttributesExpression?(g=y.eventAttributesExpression?[{valueExpression:y.eventAttributesExpression,alias:"__hdx_event_attributes"}]:[],b[27]=y.eventAttributesExpression,b[28]=g):g=b[28],b[29]!==y.kind||b[30]!==y.spanEventsValueExpression?(f=y.kind===l.GL.Trace&&y.spanEventsValueExpression?[{valueExpression:`${y.spanEventsValueExpression}.Attributes[indexOf(${y.spanEventsValueExpression}.Name, 'exception')]`,alias:"__hdx_events_exception_attributes"},{valueExpression:y.spanEventsValueExpression,alias:"__hdx_span_events"}]:[],b[29]=y.kind,b[30]=y.spanEventsValueExpression,b[31]=f):f=b[31],a=[e,r,...i,...o,...m,...h,...p,...x,...g,...f,...v],b[2]=j,b[3]=w,b[4]=S,b[5]=E,b[6]=y,b[7]=s,b[8]=a,b[9]=n}else s=b[7],a=b[8],n=b[9];let C=v??"0=1";b[32]===Symbol.for("react.memo_cache_sentinel")?(o={limit:1},b[32]=o):o=b[32],b[33]!==_?(m=_&&_.length>0?{with:_}:{},b[33]=_,b[34]=m):m=b[34],b[35]!==y.from||b[36]!==s||b[37]!==a||b[38]!==C||b[39]!==m?(h={connection:s,select:a,where:C,from:y.from,limit:o,...m},b[35]=y.from,b[36]=s,b[37]=a,b[38]=C,b[39]=m,b[40]=h):h=b[40],b[41]!==_||b[42]!==v||b[43]!==y?(p=["row_side_panel",v,_,y],b[41]=_,b[42]=v,b[43]=y,b[44]=p):p=b[44];let N=null!=v;b[45]!==N||b[46]!==p?(x={queryKey:p,enabled:N},b[45]=N,b[46]=p,b[47]=x):x=b[47];let k=n(h,x);e:{let e,t,s;if(!k.data?.data?.[0]){g=k.data;break e}let a=k.data.data[0];if(b[48]!==a){if(e={...a},a.__hdx_resource_attributes){let t,s=a.__hdx_resource_attributes;b[50]!==s?(t=(0,i.flatten)(s),b[50]=s,b[51]=t):t=b[51],e.__hdx_resource_attributes=t}if(a.__hdx_event_attributes){let t,s=a.__hdx_event_attributes;b[52]!==s?(t=(0,i.flatten)(s),b[52]=s,b[53]=t):t=b[53],e.__hdx_event_attributes=t}b[48]=a,b[49]=e}else e=b[49];b[54]!==e?(t=[e],b[54]=e,b[55]=t):t=b[55],b[56]!==k.data||b[57]!==t?(s={...k.data,data:t},b[56]=k.data,b[57]=t,b[58]=s):s=b[58],g=s}let A=g;return b[59]!==A||b[60]!==k?(f={...k,data:A},b[59]=A,b[60]=k,b[61]=f):f=b[61],f}function x(e){return e?.filter(e=>"JSON"===e.type||e.type.startsWith("JSON(")).map(e=>e.name)??[]}function g(e){let t,s,a,i,l,c=(0,r.c)(16),{source:d,rowId:u,aliasWith:h,"data-testid":g}=e;c[0]!==h||c[1]!==u||c[2]!==d?(t={source:d,rowId:u,aliasWith:h},c[0]=h,c[1]=u,c[2]=d,c[3]=t):t=c[3];let{data:f}=p(t);e:{let e,t;c[4]!==f?.data?.[0]?(e=f?.data?.[0]??{},c[4]=f?.data?.[0],c[5]=e):e=c[5],c[6]!==e?(t={...e},c[6]=e,c[7]=t):t=c[7];let a=t;if(!a){s=null;break e}s=a}let b=s,y=f?.meta;c[8]!==y?(a=x(y),c[8]=y,c[9]=a):a=c[9];let v=a;return c[10]!==b||c[11]!==v?(i=(0,n.jsx)(o.a,{mx:"md",my:"sm",children:(0,n.jsx)(m.z,{data:b,jsonColumns:v})}),c[10]=b,c[11]=v,c[12]=i):i=c[12],c[13]!==g||c[14]!==i?(l=(0,n.jsx)("div",{className:"flex-grow-1 overflow-auto","data-testid":g,children:i}),c[13]=g,c[14]=i,c[15]=l):l=c[15],l}},40147:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(75155),n=s(80519),r=s.n(n),i=s(3145),l=s(78550);function o(e){let t,s=(0,a.c)(6);s[0]!==e?(t=(0,i.VO)(e),s[0]=e,s[1]=t):t=s[1];let{data:n,isLoading:o}=(0,l.n$)(t);if(e&&!o){let e;return s[2]!==n?(e={isLoading:!1,getFieldExpression:(e,t,s)=>n?.includes(e)?r().format(`${void 0===s?"toString":s}(??.??)`,[e,t]):r().format("??[?]",[e,t])},s[2]=n,s[3]=e):e=s[3],e}{let e;return s[4]!==o?(e={isLoading:o,getFieldExpression:void 0},s[4]=o,s[5]=e):e=s[5],e}}},45862:e=>{e.exports={root:"AutocompleteInput_root__4aZ0r",textarea:"AutocompleteInput_textarea__90yii",focused:"AutocompleteInput_focused__puBi_",collapseFade:"AutocompleteInput_collapseFade__GOMDH",aboveSuggestions:"AutocompleteInput_aboveSuggestions__aaRAR",suggestionsSection:"AutocompleteInput_suggestionsSection__tpfoD",suggestionsHeaderRow:"AutocompleteInput_suggestionsHeaderRow___m20z",suggestionsHeader:"AutocompleteInput_suggestionsHeader__8ivOI",suggestionsLimit:"AutocompleteInput_suggestionsLimit__jvv5c",suggestionItem:"AutocompleteInput_suggestionItem__cgp5x",selected:"AutocompleteInput_selected__1YH4P",suggestionLabel:"AutocompleteInput_suggestionLabel__ygOCA",belowSuggestions:"AutocompleteInput_belowSuggestions__X0P0_",historySection:"AutocompleteInput_historySection__ZcsPH",historyTitle:"AutocompleteInput_historyTitle__s_n4W",historyItem:"AutocompleteInput_historyItem__txvhH",historyItemLabel:"AutocompleteInput_historyItemLabel__PZTlb",dropdown:"AutocompleteInput_dropdown__CzHbR"}},46061:(e,t,s)=>{"use strict";s.d(t,{rD:()=>eV,Ho:()=>eF,YB:()=>eO});var a=s(6029),n=s(75155),r=s(55729),i=s(75828),l=s.n(i),o=s(92799),c=s(84450),d=s.n(c),u=s(90310),m=s.n(u),h=s(67264),p=s.n(h),x=s(66692),g=s(2893),f=s(47122),b=s(14693),y=s(31292),v=s(40684),_=s(92205),j=s(35467),S=s(76089),w=s(27166),E=s(78253),C=s(60481),N=s(3635),k=s(8737),A=s(63085),T=s(43517),I=s(24589),R=s(94502),L=s(73454),$=s(6620),M=s(38314),z=s(24602),D=s(40387),P=s(95316),F=s(12482),O=s(39696),V=s(79220),B=s(21440),H=s(6876),W=s(61410),q=s(91021),J=s(55024),K=s(78550),G=s(78744),Y=s(31451),U=s(70727),Z=s(39785),X=s(81973),Q=s(68593),ee=s(7565),et=s(57820),es=s(92917),ea=s(37659),en=s(78341),er=s(45172),ei=s(9385),el=s(96413),eo=s(50374),ec=s(90515),ed=s(74620),eu=s.n(ed);let em=e=>{let t,s,r,i,o,c=(0,n.c)(19),{onClick:d,className:u,title:m,tabIndex:h,children:p,variant:x,isActive:g,iconSize:f}=e,b=void 0===h?-1:h,y=void 0===x?"default":x,v=void 0!==g&&g,_=void 0===f?14:f;c[0]!==d?(t=e=>{e.stopPropagation(),e.preventDefault(),d(e)},c[0]=d,c[1]=t):t=c[1];let j=t;c[2]!==u||c[3]!==v||c[4]!==y?(s="copy"===y?l()(eu().iconActionButton,{[eu().copied]:v}):u,c[2]=u,c[3]=v,c[4]=y,c[5]=s):s=c[5];let S=s,w=!m;return c[6]!==p||c[7]!==_||c[8]!==v?(r=v?(0,a.jsx)(ec.A,{size:_}):p,c[6]=p,c[7]=_,c[8]=v,c[9]=r):r=c[9],c[10]!==S||c[11]!==j||c[12]!==r||c[13]!==b?(i=(0,a.jsx)(k.N,{onClick:j,component:"div",className:S,tabIndex:b,role:"button",children:r}),c[10]=S,c[11]=j,c[12]=r,c[13]=b,c[14]=i):i=c[14],c[15]!==w||c[16]!==i||c[17]!==m?(o=(0,a.jsx)(A.m,{label:m,position:"top",withArrow:!0,disabled:w,openDelay:300,closeDelay:100,fz:"xs",children:i}),c[15]=w,c[16]=i,c[17]=m,c[18]=o):o=c[18],o},eh=({children:e,cellValue:t,tableContainerRef:s,wrapLinesEnabled:n,columnName:i,isChart:o=!1})=>{let[c,{close:d,open:u}]=(0,en.j)(!1),[m,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)(!1),g=(0,r.useRef)(void 0),f=(0,r.useRef)(void 0);(0,r.useEffect)(()=>()=>{g.current&&clearTimeout(g.current),f.current&&clearTimeout(f.current)},[]);let{onPropertyAddClick:b}=(0,r.useContext)(eo.D),y=i&&b&&null!=t,v=()=>{p||(g.current&&clearTimeout(g.current),u())},_=()=>{g.current=setTimeout(()=>{d()},100)},j=()=>{d(),x(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{x(!1)},1e3)},S=async()=>{try{let e="string"==typeof t?t:String(t??"");await navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)}catch(e){console.error("Failed to copy to clipboard:",e)}},w=y?3:1;return o?(0,a.jsx)("div",{className:l()(eu().fieldText,{[eu().chart]:o}),style:{display:"flex",alignItems:"center"},children:e}):(0,a.jsx)("div",{className:l()(eu().fieldText,{[eu().truncated]:!n&&!o,[eu().wrapped]:n,[eu().chart]:o}),children:(0,a.jsxs)(ea.A,{width:20*w+4*(w-1),position:"top-start",offset:5,opened:c,portalProps:{target:s??void 0},closeOnClickOutside:!1,clickOutsideEvents:[],children:[(0,a.jsx)(ea.A.Target,{children:(0,a.jsx)("span",{onMouseEnter:v,onMouseLeave:_,onClick:j,tabIndex:-1,"aria-hidden":"true",style:{cursor:"pointer"},children:e})}),(0,a.jsx)(ea.A.Dropdown,{style:{pointerEvents:"auto"},onMouseEnter:v,onMouseLeave:_,className:eu().fieldTextPopover,children:(0,a.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,a.jsx)(em,{onClick:S,variant:"copy",isActive:m,title:m?"Copied!":"Copy field value",children:(0,a.jsx)(er.A,{size:14})}),y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(em,{onClick:()=>{y&&(b(i,"string"==typeof t?t:String(t??""),"include"),j())},variant:"copy",title:"Toggle filter for this value",children:(0,a.jsx)(ei.A,{size:14})}),(0,a.jsx)(em,{onClick:()=>{y&&(b(i,"string"==typeof t?t:String(t??""),"exclude"),j())},variant:"copy",title:"Exclude this value",children:(0,a.jsx)(el.A,{size:14})})]})]})})]})})};var ep=s(56795);let ex=({row:e,getRowWhere:t,sourceId:s,isWrapped:n,onToggleWrap:i})=>{let[l,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),u=async()=>{try{let{[U.ZO.ID]:t,...s}=e,a=Object.entries(s).reduce((e,[t,s])=>{if("string"==typeof s&&s.startsWith("{")||s.startsWith("["))try{e[t]=JSON.parse(s)}catch{e[t]=s}else e[t]=s;return e},{}),n=JSON.stringify(a,null,2);await navigator.clipboard.writeText(n),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy row data to clipboard:",e)}},m=async()=>{try{let a=t(e),n=new URL(window.location.href);n.searchParams.set("rowWhere",a.where),s&&n.searchParams.set("rowSource",s),await navigator.clipboard.writeText(n.toString()),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error("Failed to copy URL to clipboard:",e)}};return(0,a.jsxs)("div",{className:eu().rowButtons,children:[!n&&(0,a.jsx)(em,{onClick:i,variant:"copy",title:"Wrap All Lines",children:(0,a.jsx)(z.A,{size:16})}),(0,a.jsx)(em,{onClick:u,variant:"copy",isActive:l,title:l?"Copied entire row as JSON!":"Copy entire row as JSON",children:(0,a.jsx)(er.A,{size:16})}),(0,a.jsx)(em,{onClick:m,variant:"copy",isActive:c,title:c?"Copied shareable link!":"Copy shareable link to this specific row",children:(0,a.jsx)(ep.A,{size:16})})]})};var eg=s(48423),ef=s(22623),eb=s(59029),ey=s(74011),ev=s(97767),e_=s(67872);let ej=({searchQuery:e,onSearchChange:t,matchIndices:s,currentMatchIndex:n,onPreviousMatch:i,onNextMatch:l,isVisible:o,onVisibilityChange:c,containerRef:d})=>{let[u,m]=(0,r.useState)(!1),h=(0,r.useRef)(null),p=o??u,x=(0,r.useCallback)(()=>{void 0!==o?c?.(!1):m(!1),t("")},[o,t,c]),g=(0,r.useCallback)(()=>{void 0!==o?c?.(!0):m(!0),setTimeout(()=>{h.current?.focus(),h.current?.select()},0)},[o,c]),f=(0,r.useCallback)(e=>{if((e.metaKey||e.ctrlKey)&&"f"===e.key){if(d&&!(0,es.dS)(d))return;e.preventDefault(),g()}"Escape"===e.key&&p&&x()},[p,x,g]);(0,r.useEffect)(()=>(window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}),[f]);let b=(0,r.useCallback)(e=>{"Enter"===e.key&&s.length>0&&(e.shiftKey?i():l(),e.preventDefault())},[s.length,i,l]);return p?(0,a.jsx)(ef.t,{p:"xs",withBorder:!0,shadow:"md",pos:"absolute",top:8,right:8,style:{zIndex:2},miw:400,maw:500,role:"search","aria-label":"Table search",children:(0,a.jsxs)(N.Y,{gap:"xs",align:"center",wrap:"nowrap",children:[(0,a.jsx)(eb.k,{ref:h,placeholder:"Find in table...",value:e,onChange:e=>t(e.target.value),onKeyDown:b,size:"xs",style:{flex:1,minWidth:0},"aria-label":"Search table contents","aria-describedby":s.length>0?"search-match-count":void 0,rightSection:e?(0,a.jsx)(k.N,{onClick:()=>t(""),display:"flex",style:{alignItems:"center"},title:"Clear search","aria-label":"Clear search",children:(0,a.jsx)(ey.A,{size:14})}):null}),s.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(T.E,{id:"search-match-count",size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},"aria-live":"polite",children:[n+1," of ",s.length]}),(0,a.jsxs)(N.Y,{gap:4,children:[(0,a.jsx)(k.N,{onClick:i,display:"flex",style:{alignItems:"center"},title:"Previous match (Shift+Enter)","aria-label":"Previous match",children:(0,a.jsx)(ev.A,{size:16})}),(0,a.jsx)(k.N,{onClick:l,display:"flex",style:{alignItems:"center"},title:"Next match (Enter)","aria-label":"Next match",children:(0,a.jsx)(e_.A,{size:16})})]})]}):e?(0,a.jsx)(T.E,{size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},role:"status","aria-live":"polite",children:"No matches"}):null,(0,a.jsx)(k.N,{onClick:x,display:"flex",style:{alignItems:"center"},title:"Close search (Esc)","aria-label":"Close search",children:(0,a.jsx)(ey.A,{size:16})})]})}):null},eS=e=>{let t,s,r,i=(0,n.c)(17),{searchQuery:l,matchIndices:o,currentMatchIndex:c,dedupedRows:d,tableRows:u,getRowId:m,onMatchClick:h}=e;if(!l||0===o.length||0===u.length)return null;if(i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",zIndex:1},i[0]=t):t=i[0],i[1]!==c||i[2]!==d||i[3]!==m||i[4]!==o||i[5]!==h||i[6]!==u){let e;i[8]!==c||i[9]!==d||i[10]!==m||i[11]!==o.length||i[12]!==h||i[13]!==u?(e=(e,t)=>{let s=d[e];if(!s)return null;let n=u.findIndex(e=>m(e.original)===m(s));if(-1===n)return null;let r=n/u.length*100,i=100/u.length,l=t===c;return(0,a.jsx)(C.a,{pos:"absolute",top:`${r}%`,right:0,w:"100%",h:`${i}%`,bg:l?"var(--mantine-color-orange-5)":"var(--mantine-color-yellow-5)",style:{cursor:"pointer",pointerEvents:"auto",minHeight:1,maxHeight:4},onClick:()=>h(t),title:`Match ${t+1} of ${o.length}`},`match-indicator-${e}`)},i[8]=c,i[9]=d,i[10]=m,i[11]=o.length,i[12]=h,i[13]=u,i[14]=e):e=i[14],s=o.map(e),i[1]=c,i[2]=d,i[3]=m,i[4]=o,i[5]=h,i[6]=u,i[7]=s}else s=i[7];return i[15]!==s?(r=(0,a.jsx)(C.a,{pos:"absolute",right:0,top:0,bottom:0,w:8,style:t,children:s}),i[15]=s,i[16]=r):r=i[16],r};var ew=s(88339),eE=s(17421),eC=s(41038),eN=s(81055),ek=s(70114);let eA=(0,r.memo)(e=>{let t,s,r,i,o,c=(0,n.c)(17),{columnsLength:d,children:u,virtualKey:m,source:h,rowId:p,measureElement:x,virtualIndex:g}=e,f=(()=>{let e,t=(0,n.c)(3),[,s]=(0,eC.ZA)("rowWhere"),[,a]=(0,eC.ZA)("rowSource");return t[0]!==s||t[1]!==a?(e=(e,t)=>{s(e),a(t??null)},t[0]=s,t[1]=a,t[2]=e):e=t[2],e})(),b=`expanded-row-${p}`,y=`${m}-expanded`;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=l()("mx-2 mb-2 rounded",eu().expandedRowContent),c[0]=t):t=c[0],c[1]!==f||c[2]!==p||c[3]!==h?.id?(s=f&&(0,a.jsx)("button",{type:"button",className:l()("position-absolute top-0 end-0 mt-1 me-1 p-1 border-0 bg-transparent text-muted rounded",eu().expandButton),onClick:()=>f(p,h?.id),title:"Open in sidebar","aria-label":"Open in sidebar",style:{zIndex:1,fontSize:"12px",lineHeight:1},children:(0,a.jsx)(eN.A,{size:14})}),c[1]=f,c[2]=p,c[3]=h?.id,c[4]=s):s=c[4],c[5]!==u||c[6]!==s?(r=(0,a.jsx)("div",{className:t,children:(0,a.jsx)("div",{className:"position-relative",children:(0,a.jsxs)("div",{className:"px-3 pt-2 position-relative",children:[s,u]})})}),c[5]=u,c[6]=s,c[7]=r):r=c[7],c[8]!==d||c[9]!==r?(i=(0,a.jsx)("td",{colSpan:d,className:"p-0 border-0",children:r}),c[8]=d,c[9]=r,c[10]=i):i=c[10],c[11]!==x||c[12]!==b||c[13]!==y||c[14]!==i||c[15]!==g?(o=(0,a.jsx)("tr",{"data-testid":b,className:eu().expandedRow,"data-index":g,ref:x,children:i},y),c[11]=x,c[12]=b,c[13]=y,c[14]=i,c[15]=g,c[16]=o):o=c[16],o}),eT=(0,r.memo)(e=>{let t,s,r,i,o,c,d=(0,n.c)(16),{rowId:u,isExpanded:m,highlightedLineId:h,toggleRowExpansion:p}=e,x=h===u,g=h!==u;d[0]!==m||d[1]!==x||d[2]!==g?(t=l()(eu().expandButton,{[eu().expanded]:m,"text-brand":x,"text-muted":g}),d[0]=m,d[1]=x,d[2]=g,d[3]=t):t=d[3],d[4]!==u||d[5]!==p?(s=e=>{e.stopPropagation(),p(u)},d[4]=u,d[5]=p,d[6]=s):s=d[6];let f=`${m?"Collapse":"Expand"} log details`;return d[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(ek.A,{size:16}),d[7]=r):r=d[7],d[8]!==m||d[9]!==t||d[10]!==s||d[11]!==f?(i=(0,a.jsx)("button",{type:"button",className:t,onClick:s,"aria-expanded":m,"aria-label":f,children:r}),d[8]=m,d[9]=t,d[10]=s,d[11]=f,d[12]=i):i=d[12],d[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)("span",{className:eu().expandButtonSeparator}),d[13]=o):o=d[13],d[14]!==i?(c=(0,a.jsxs)("span",{className:"d-flex align-items-center justify-content-center",children:[i,o]}),d[14]=i,d[15]=c):c=d[15],c});eT.displayName="ExpandButton";var eI=s(61629);let eR="NULL",eL={duration:e=>e.duration>=0?e.duration:eR,severityText:e=>e.severityText??e.statusCode,default:(e,t)=>e[t]},e$=e=>e[U.ZO.ID];function eM(e,t){return(eL[e]??eL.default)(t,e)}let ez=()=>null,eD=e=>{let t,s,r,i,l,o,c,d,u,m,h=(0,n.c)(17),{data:p,dateRange:x,color:j}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={position:"relative",width:"100%",height:"100%"},s={position:"absolute",left:0,right:0,bottom:0,top:0},h[0]=t,h[1]=s):(t=h[0],s=h[1]),h[2]===Symbol.for("react.memo_cache_sentinel")?(r={top:4,left:0,right:4,bottom:0},h[2]=r):r=h[2];let S=x[0].getTime()/1e3,w=x[1].getTime()/1e3;h[3]!==S||h[4]!==w?(i=[S,w],h[3]=S,h[4]=w,h[5]=i):i=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(l={fontSize:12,fontFamily:"IBM Plex Mono, monospace"},h[6]=l):l=h[6],h[7]!==i?(o=(0,a.jsx)(g.W,{dataKey:"bucket",domain:i,interval:"preserveStartEnd",scale:"time",type:"number",tickFormatter:eB,minTickGap:50,tick:l}),h[7]=i,h[8]=o):o=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)(f.h,{width:40,minTickGap:25,tickFormatter:eH,tick:{fontSize:12,fontFamily:"IBM Plex Mono, monospace"}}),h[9]=c):c=h[9];let E=j||es.lm[0];return h[10]!==E?(d=(0,a.jsx)(b.y,{isAnimationActive:!1,dataKey:"count",stackId:"a",fill:E,maxBarSize:24}),h[10]=E,h[11]=d):d=h[11],h[12]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsx)(y.m,{content:(0,a.jsx)(ez,{})}),h[12]=u):u=h[12],h[13]!==p||h[14]!==d||h[15]!==o?(m=(0,a.jsx)("div",{style:t,children:(0,a.jsx)("div",{style:s,children:(0,a.jsx)(v.u,{width:"100%",height:"100%",minWidth:0,children:(0,a.jsxs)(_.E,{width:500,height:300,data:p,syncId:"hdx",syncMethod:"value",margin:r,children:[o,c,d,u]})})})}),h[13]=p,h[14]=d,h[15]=o,h[16]=m):m=h[16],m},eP=e=>{let t,s,r,i,l=(0,n.c)(12),{opened:o,onClose:c,config:d}=e;l[0]!==d?(t=["SqlModal",d],l[0]=d,l[1]=t):t=l[1],l[2]!==o||l[3]!==t?(s={queryKey:t,placeholderData:eW,enabled:o},l[2]=o,l[3]=t,l[4]=s):s=l[4];let{data:u,isLoading:m}=(0,q.zu)(d,s);return l[5]!==m||l[6]!==u?(r=u?(0,a.jsx)(ew.V,{data:u,enableCopy:!0}):m?(0,a.jsxs)("div",{className:"text-center my-2",children:[(0,a.jsx)("div",{className:"d-inline-block me-2",children:(0,a.jsx)(R.A,{size:14,className:"spin-animate"})}),"Loading SQL..."]}):(0,a.jsx)("div",{className:"text-center my-2",children:"No SQL available"}),l[5]=m,l[6]=u,l[7]=r):r=l[7],l[8]!==c||l[9]!==o||l[10]!==r?(i=(0,a.jsx)(w.a,{opened:o,onClose:c,title:"Generated SQL",size:"auto",children:r}),l[8]=c,l[9]=o,l[10]=r,l[11]=i):i=l[11],i},eF=(0,r.memo)(({tableId:e,displayedColumns:t,fetchNextPage:s,hasNextPage:i,highlightedLineId:c,isLive:u,isLoading:h,rows:p,generateRowId:g,onInstructionsClick:f,onRowDetailsClick:b,onScroll:y,onSettingsClick:v,onShowPatternsClick:_,wrapLines:S=!1,columnNameMap:w,showServiceColumn:F=!0,dedupRows:H,isError:W,error:K,columnTypeMap:G,dateRange:Y,loadingDate:X,config:ea,onChildModalOpen:en,renderRowDetails:er,source:ei,onExpandedRowsChange:el,collapseAllRows:eo,enableSorting:ec=!1,onSortingChange:ed,sortOrder:em,showExpandButton:ep=!0,getRowWhere:ef,variant:eb="default"})=>{let ey=(0,r.useMemo)(()=>{let e=new Set;return(H?p.filter(t=>{let s=g(t);return!e.has(s.where)&&(e.add(s.where),!0)}):p).map(e=>{let t=g(e);return{...e,[U.ZO.ID]:t.where,[U.ZO.ALIAS_WITH]:t.aliasWith}})},[p,H,g]),ev=(0,r.useCallback)(e=>{b?.(e)},[b]),{userPreferences:{isUTC:e_}}=(0,et.HW)(),[eC,eN]=(0,es.Mj)(`${e}-column-sizes`,{}),[ek,eL]=(0,r.useState)(null),ez=(0,r.useCallback)(e=>(e&&eL(e),()=>{eL(null)}),[]),{data:eF}=(0,q.Kc)(ea),eO=(0,es.ZC)(u);(0,r.useEffect)(()=>{u&&!1===eO&&null!=ek&&(ek.scrollTop=0)},[u,eO,ek]);let eV=(0,r.useMemo)(()=>(function(e){let t={},s=Math.min(e.length,100);for(let a=0;a<s;a++){let s=e[a];Object.keys(s).forEach(e=>{let a=s[e];(a?.length||0)>0&&512>(a?.length||0)&&d()(a)&&null!=(0,es.lO)(a)&&(t[e]=(t[e]??0)+1)})}let a=0,n="";for(let[e,s]of Object.entries(t))s>a&&(a=s,n=e);if(a>0)return n})(ey),[ey]),{csvData:eB,maxRows:eH,isLimited:eW}=(0,J.u)(ey,t.map(e=>({dataKey:e,displayName:w?.[e]??e}))),{expandedRows:eq,toggleRowExpansion:eJ,collapseAllRows:eK}=(e=>{let t,s,a,i,l=(0,n.c)(9);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={},l[0]=t):t=l[0];let[o,c]=(0,r.useState)(t);l[1]!==e?(s=t=>{c(s=>{let a={...s,[t]:!s[t]},n=Object.values(a).some(Boolean);return e?.(n),a})},l[1]=e,l[2]=s):s=l[2];let d=s;l[3]!==e?(a=()=>{c({}),e?.(!1)},l[3]=e,l[4]=a):a=l[4];let u=a;return l[5]!==u||l[6]!==o||l[7]!==d?(i={expandedRows:o,toggleRowExpansion:d,collapseAllRows:u},l[5]=u,l[6]=o,l[7]=d,l[8]=i):i=l[8],i})(el);(0,r.useEffect)(()=>{eo&&eK()},[eo,eK]);let eG=function({rows:e,searchableColumns:t,debounceMs:s=300,onVisibilityChange:a}){let[n,i]=(0,r.useState)(""),[l]=(0,Z.o)(n,s),[o,c]=(0,r.useState)(0),[d,u]=(0,r.useState)([]),[m,h]=(0,r.useState)(!1),p=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(!l.trim()){u([]),c(0);return}let s=l.toLowerCase(),a=[];e.forEach((e,n)=>{t.map(t=>{let s=e[t];return null!=s?String(s).toLowerCase():""}).join(" ").includes(s)&&a.push(n)});let n=d.length;u(a),0===n&&a.length>0?(c(0),p.current=!0):a.length>0&&o>=a.length&&(c(a.length-1),p.current=!0)},[l,e,t]),(0,r.useEffect)(()=>{a?.(m)},[m,a]);let x=(0,r.useCallback)(e=>{i(e),e||(u([]),c(0),p.current=!1)},[]),g=(0,r.useCallback)(()=>{p.current=!0,c(e=>e>0?e-1:d.length-1)},[d.length]),f=(0,r.useCallback)(()=>{p.current=!0,c(e=>e<d.length-1?e+1:0)},[d.length]),b=(0,r.useCallback)(e=>{p.current=!0,c(e)},[]),y=(0,r.useCallback)(()=>{i(""),u([]),c(0),p.current=!1,h(!1)},[]),v=(0,r.useCallback)(()=>{p.current=!1},[]);return{searchQuery:l,inputValue:n,setInputValue:i,matchIndices:d,currentMatchIndex:o,isSearchVisible:m,setIsSearchVisible:h,shouldScrollToMatch:p.current,clearShouldScrollToMatch:v,handlePreviousMatch:g,handleNextMatch:f,handleMatchClick:b,handleSearchChange:x,resetSearch:y}}({rows:ey,searchableColumns:t,debounceMs:300}),eY=(0,r.useMemo)(()=>[...ep?[{id:"expand-btn",accessorKey:U.ZO.ID,header:()=>"",cell:e=>{let t=e.getValue(),s=eq[t]??!1;return(0,a.jsx)(eT,{rowId:t,isExpanded:s,highlightedLineId:c,toggleRowExpansion:eJ})},size:32,enableResizing:!1,enableSorting:!1,meta:{className:"text-center"}}]:[],...t.map((e,s)=>{let n=G.get(e)?._type,r=n===j.A2.Date,i=e===eV;return{meta:{column:e,jsColumnType:n},id:eF?.[e]?`"${e}"`:e,enableSorting:n!==j.A2.Dynamic,accessorFn:m()(eM)(e),header:`${w?.[e]??e}${r?e_?" (UTC)":" (Local)":""}`,cell:t=>{let s=t.getValue();if("__hdx_pattern_trend"===e)return(0,a.jsx)("div",{style:{height:50,width:"100%"},children:(0,a.jsx)(eD,{data:s.data,dateRange:s.dateRange,color:(0,es.aw)(t.row.original.severityText??t.row.original.statusCode)})});if(r){let e=new Date(s);return(0,a.jsx)("span",{className:"text-muted",children:(0,a.jsx)(ee.H,{value:e,format:"withMs"})})}let n="string"==typeof s?s:`${s}`;if(e===eV)return(0,a.jsx)(eI.A,{level:n});let i=n.length>500?`${n.slice(0,500)}...`:n,o=!!eG.searchQuery&&eG.matchIndices.length>0&&eG.matchIndices[eG.currentMatchIndex]===t.row.index,c=eG.searchQuery?((e,t,s={})=>{if(!t.trim())return e;let n=s.isCurrentMatch?s.currentMatchBackgroundColor||"var(--mantine-color-orange-5)":s.backgroundColor||"var(--mantine-color-yellow-3)",r=e.toLowerCase(),i=t.toLowerCase(),l=[],o=0,c=r.indexOf(i);for(;-1!==c;)c>o&&l.push(e.slice(o,c)),l.push((0,a.jsx)("mark",{style:{backgroundColor:n,color:s.textColor||"var(--color-text-inverted)",padding:0},children:e.slice(c,c+t.length)},`${c}-${o}`)),o=c+t.length,c=r.indexOf(i,o);return o<e.length&&l.push(e.slice(o)),l.length>0?(0,a.jsx)(a.Fragment,{children:l}):e})(i,eG.searchQuery,{isCurrentMatch:o}):i;return(0,a.jsx)("span",{className:l()({"text-muted":s===eR}),children:c})},size:s===t.length-1?Q.k:eC[e]??(r?170:i?115:160)}})],[e_,c,t,eC,w,G,eV,eq,eJ,ep,eF,eG.searchQuery,eG.matchIndices,eG.currentMatchIndex]),eU=(0,r.useCallback)(e=>{if(e){let{scrollHeight:t,scrollTop:a,clientHeight:n}=e;t-a-n<500&&!h&&i&&s?.({cancelRefetch:!1})}},[s,h,i]);(0,r.useEffect)(()=>{eU(ek)},[eU,ek]);let eZ=(0,r.useMemo)(()=>{let t={data:ey,columns:eY,getCoreRowModel:(0,O.HT)(),enableSorting:ec,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(em??[]);ed?.(t??null)}else ed?.(e??null)},state:{sorting:em??[]},enableColumnResizing:!0,columnResizeMode:"onChange"};return e?{...t,state:{columnSizing:eC},onColumnSizingChange:e=>{let t=e instanceof Function?e():e;eN({...eC,...t})}}:t},[eY,ey,e,em,ec,ed,eC,eN]),eX=(0,V.N4)(eZ),{rows:eQ}=eX.getRowModel(),e0=(0,B.Te)({count:eQ.length,getScrollElement:(0,r.useCallback)(()=>ek,[ek]),estimateSize:(0,r.useCallback)(()=>23,[]),overscan:30,paddingEnd:20}),e1=e0.getVirtualItems(),e2=e0.getTotalSize(),[e3,e4]=(0,r.useMemo)(()=>e1.length>0?[Math.max(0,e1[0].start-e0.options.scrollMargin),Math.max(0,e2-e1[e1.length-1].end)]:[0,0],[e1,e0.options.scrollMargin,e2]),[e5,e6]=(0,r.useState)(!1),[e7,e8]=(0,es.Mj)(`${e}-wrap-lines`,S??!1),[e9,te]=(0,r.useState)(!1),tt=e=>{te(e),en?.(e)};(0,r.useEffect)(()=>{if(eG.shouldScrollToMatch)if(eG.matchIndices.length>0&&e0&&eG.currentMatchIndex<eG.matchIndices.length&&eG.searchQuery.trim()){let e=ey[eG.matchIndices[eG.currentMatchIndex]];if(e){let t=eQ.findIndex(t=>e$(t.original)===e$(e));-1!==t?requestAnimationFrame(()=>{e0.scrollToIndex(t,{align:"center"}),eG.clearShouldScrollToMatch()}):eG.clearShouldScrollToMatch()}else eG.clearShouldScrollToMatch()}else eG.clearShouldScrollToMatch()},[eG.shouldScrollToMatch,eG.currentMatchIndex,eG.matchIndices,eG.searchQuery,eG.clearShouldScrollToMatch,e0,eQ,ey]),(0,r.useEffect)(()=>{if(e5||!c||null==e0)return;let e=ey.findIndex(e=>e$(e)===c);-1==e&&c?ey.length<1e3&&!h&&i&&s?.({cancelRefetch:!1}):(e6(!0),null==e0.getVirtualItems().find(t=>t.index===e)&&e0.scrollToIndex(e,{align:"center"}))},[ey,c,s,e0,e5,h,i]);let ts=(0,r.useCallback)(e=>{if(null==c)return;let t=ey.findIndex(e=>e$(e)===c)+e;t<0||t>=ey.length||ev(ey[t])},[c,ev,ey]);return(0,x.vC)(["ArrowRight","ArrowDown","j"],e=>{e.preventDefault(),ts(1)}),(0,x.vC)(["ArrowLeft","ArrowUp","k"],e=>{e.preventDefault(),ts(-1)}),(0,a.jsx)(E.s,{direction:"column",h:"100%",children:(0,a.jsxs)(C.a,{pos:"relative",style:{flex:1,minHeight:0},children:[(0,a.jsx)(ej,{searchQuery:eG.inputValue,onSearchChange:eG.handleSearchChange,matchIndices:eG.matchIndices,currentMatchIndex:eG.currentMatchIndex,onPreviousMatch:eG.handlePreviousMatch,onNextMatch:eG.handleNextMatch,isVisible:eG.isSearchVisible,onVisibilityChange:eG.setIsSearchVisible,containerRef:ek}),(0,a.jsxs)("div",{"data-testid":"search-results-table",className:l()("overflow-auto h-100 fs-8",eu().tableWrapper,{[eu().muted]:"muted"===eb}),onScroll:e=>{if(eU(e.target),null!=e.target){let{scrollTop:t}=e.target;y?.(t)}},ref:ez,children:[ea&&(0,a.jsx)(eP,{opened:e9,onClose:()=>tt(!1),config:ea}),(0,a.jsxs)("table",{className:l()("w-100",eu().table),id:e,children:[(0,a.jsx)("thead",{className:eu().tableHead,children:t.length>0&&eX.getHeaderGroups().map(t=>(0,a.jsx)("tr",{children:t.headers.map((s,n)=>{let r=n===t.headers.length-1;return(0,a.jsx)(eg.A,{header:s,isLast:r,lastItemButtons:(0,a.jsxs)(N.Y,{gap:8,mr:8,children:[e&&Object.keys(eC).length>0&&(0,a.jsx)(k.N,{onClick:()=>eN({}),title:"Reset Column Widths",children:(0,a.jsx)(A.m,{label:"Reset Column Widths",children:(0,a.jsx)(L.A,{size:16})})}),ea&&(0,a.jsx)(k.N,{onClick:()=>tt(!0),title:"Show Generated SQL",tabIndex:0,children:(0,a.jsx)(A.m,{label:"Show Generated SQL",children:(0,a.jsx)($.A,{size:16})})}),(0,a.jsx)(k.N,{onClick:()=>e8(e=>!e),title:`${e7?"Disable":"Enable"}  Wrap Lines`,children:(0,a.jsx)(A.m,{label:`${e7?"Disable":"Enable"} Wrap Lines`,children:e7?(0,a.jsx)(M.A,{size:16}):(0,a.jsx)(z.A,{size:16})})}),(0,a.jsx)(eE.P,{data:eB,filename:`hyperdx_search_results_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}`,className:"fs-6",children:(0,a.jsx)(A.m,{label:`Download Table as CSV (max ${eH.toLocaleString()} rows)${eW?" - data truncated":""}`,children:(0,a.jsx)(D.A,{size:16})})}),null!=v&&(0,a.jsx)(k.N,{onClick:()=>v(),title:"Settings",children:(0,a.jsx)(A.m,{label:"Settings",children:(0,a.jsx)(P.A,{size:16})})})]})},s.id)})},t.id))}),(0,a.jsxs)("tbody",{children:[e3>0&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:99999,style:{height:`${e3}px`}})}),e1.map(e=>{let t=eQ[e.index],s=e$(t.original),n=eq[s]??!1;return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)("tr",{"data-testid":`table-row-${s}`,className:l()(eu().tableRow,{[eu().tableRow__selected]:c&&c===s}),"data-index":e.index,ref:e0.measureElement,children:[ep&&(0,a.jsx)("td",{className:"align-top overflow-hidden",style:{width:"40px"},children:(0,V.Kv)(t.getVisibleCells()[0].column.columnDef.cell,t.getVisibleCells()[0].getContext())}),(0,a.jsx)("td",{className:"align-top overflow-hidden p-0",colSpan:eY.length-!!ep,children:(0,a.jsxs)("button",{type:"button",className:l()(eu().rowContentButton,{[eu().isWrapped]:e7,[eu().isTruncated]:!e7}),onClick:e=>{ev(t.original)},"aria-label":"View details for log entry",children:[t.getVisibleCells().slice(+!!ep).map(e=>{let t=e.column.columnDef.meta?.className,s=e.column.getSize(),n=e.getValue();return(0,a.jsx)("div",{className:l()("flex-shrink-0 overflow-hidden position-relative",t),style:{width:s===Q.k?"auto":`${s}px`,flex:s===Q.k?"1":"none"},children:(0,a.jsx)("div",{className:eu().fieldTextContainer,children:(0,a.jsx)(eh,{cellValue:n,wrapLinesEnabled:e7,tableContainerRef:ek,columnName:e.column.columnDef.meta?.column,isChart:e.column.columnDef.meta?.column==="__hdx_pattern_trend",children:(0,V.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)}),ef&&(0,a.jsx)(ex,{row:t.original,getRowWhere:ef,sourceId:ei?.id,isWrapped:e7,onToggleWrap:()=>e8(!e7)})]})})]}),ep&&n&&(0,a.jsx)(eA,{columnsLength:eY.length,virtualKey:e.key.toString(),source:ei,rowId:s,measureElement:e0.measureElement,virtualIndex:e.index,children:er?.({id:s,aliasWith:t.original[U.ZO.ALIAS_WITH],...t.original})})]},e.key)}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:800,children:(0,a.jsx)("div",{className:"rounded fs-7 bg-muted text-center d-flex align-items-center justify-content-center mt-3",children:h?(0,a.jsxs)("div",{className:"my-3",children:[(0,a.jsx)("div",{className:"d-inline-block",children:(0,a.jsx)(R.A,{size:14,className:"spin-animate"})})," ",null!=X&&(0,a.jsxs)(a.Fragment,{children:["Searched ",(0,a.jsx)(ee.H,{value:X}),"."," "]}),"Loading results",Y?.[0]!=null&&Y?.[1]!=null?(0,a.jsxs)(a.Fragment,{children:[" ","across"," ",(0,o.A)(Y?.[1],Y?.[0])," ","(",(0,a.jsx)(ee.H,{value:Y?.[0],format:"withYear"})," ","to"," ",(0,a.jsx)(ee.H,{value:Y?.[1],format:"withYear"}),")"]}):null,"..."]}):!1==i&&!1==h&&ey.length>0?(0,a.jsx)("div",{className:"my-3",children:"End of Results"}):W?(0,a.jsxs)("div",{className:"my-3",children:[(0,a.jsx)(T.E,{ta:"center",size:"sm",children:"Error loading results, please check your query or try again."}),(0,a.jsxs)(C.a,{p:"sm",children:[(0,a.jsx)(C.a,{mt:"sm",children:(0,a.jsx)(I.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:K?.message})}),K instanceof j.p1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,a.jsx)(E.s,{w:"100%",ta:"initial",align:"center",justify:"center",children:(0,a.jsx)(ew.V,{data:K?.query})})]})]})]}):!1==i&&!1==h&&0===ey.length?(0,a.jsxs)("div",{className:"my-3","data-testid":"db-row-table-no-results",children:["No results found.",(0,a.jsx)(T.E,{mt:"sm",children:"Try checking the query explainer in the search bar if there are any search syntax issues."}),Y?.[0]!=null&&Y?.[1]!=null?(0,a.jsxs)(T.E,{mt:"sm",children:["Searched Time Range:"," ",(0,o.A)(Y?.[1],Y?.[0])," ","(",(0,a.jsx)(ee.H,{value:Y?.[0],format:"withYear"})," ","to"," ",(0,a.jsx)(ee.H,{value:Y?.[1],format:"withYear"}),")"]}):null]}):(0,a.jsx)("div",{})})})}),e4>0&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:99999,style:{height:`${e4}px`}})})]})]})]}),(0,a.jsx)(eS,{searchQuery:eG.searchQuery,matchIndices:eG.matchIndices,currentMatchIndex:eG.currentMatchIndex,dedupedRows:ey,tableRows:eQ,getRowId:e$,onMatchClick:eG.handleMatchClick})]})})});function eO(e){let t,s,a=(0,n.c)(12);a[0]!==e.connection||a[1]!==e.from.databaseName||a[2]!==e.from.tableName?(t={databaseName:e.from.databaseName,tableName:e.from.tableName,connectionId:e.connection},a[0]=e.connection,a[1]=e.from.databaseName,a[2]=e.from.tableName,a[3]=t):t=a[3];let{data:r}=(0,K.Z2)(t),i=r?.primary_key,l=r?.partition_key;e:{let t,n;if(null==i||null==l){s=void 0;break e}a[4]!==e.select||a[5]!==l||a[6]!==i?(t=function(e,t,s){let a=new Set([...(0,j.bZ)(s),...(0,j.bZ)(t)]);if("string"==typeof e){let t=new Set((0,S.AB)(e)),s=[...a].filter(e=>!t.has(e));return{select:[...t,...s].join(","),additionalKeysLength:s.length}}{let t=[...a].map(e=>({valueExpression:e}));return{select:[...e,...t],additionalKeysLength:t.length}}}(e.select,i,l),a[4]=e.select,a[5]=l,a[6]=i,a[7]=t):t=a[7];let{select:r,additionalKeysLength:o}=t;a[8]!==o||a[9]!==e||a[10]!==r?(n={...e,select:r,additionalKeysLength:o},a[8]=o,a[9]=e,a[10]=r,a[11]=n):n=a[11],s=n}return s}let eV=(0,r.memo)(function({config:e,sourceId:t,onError:s,onRowDetailsClick:n,highlightedLineId:i,enabled:l=!0,isLive:o=!1,queryKeyPrefix:c,onScroll:d,denoiseResults:u=!1,onChildModalOpen:m,onExpandedRowsChange:h,collapseAllRows:x,showExpandButton:g=!0,renderRowDetails:f,onSortingChange:b,initialSortBy:y,variant:v="default"}){var _;let{data:S}=H.Ay.useMe(),[w,E]=(0,r.useState)(y?.[0]??null),N=(0,r.useMemo)(()=>w?[w]:[],[w]),k=(0,r.useCallback)(e=>{b?.(e),E(e?.[0]??null)},[E,b]),A=(0,es.ZC)(t);(0,r.useEffect)(()=>{A&&A!==t&&k(null)},[t]);let I=(0,es.ZC)(y);(0,r.useEffect)(()=>{let e=y?.[0]??null,t=I?.[0]??null;JSON.stringify(e)!==JSON.stringify(t)&&E(e)},[y,I]);let R=(0,r.useMemo)(()=>{let t={...(0,W.Nz)(S?.team),...e};return N.length&&(t.orderBy=N.map(e=>({valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}))),t},[S,e,N]),L=eO(R),{data:$,fetchNextPage:M,hasNextPage:z,isFetching:D,isError:P,error:O}=(0,G.A)(L??e,{enabled:l&&null!=L&&("string"==typeof(_=e.select)?_.split(",").filter(e=>e.trim().length>0).length:_.length)>0,isLive:o,queryKeyPrefix:c}),V=(0,r.useMemo)(()=>(function(e,t){if(null==e||null==t)return new Map;let s=e.slice(0,e.length-t);return new Map(s?.map(e=>[e.name,{...e,_type:(0,j.rj)(e.type)}]))})($?.meta,L?.additionalKeysLength),[$,L]),B=(0,r.useMemo)(()=>Array.from(V.keys()),[V]),q=(0,r.useMemo)(()=>B.filter(e=>{let t=V.get(e)?._type;return(0,j.Zo)(t)}),[B,V]),J=(0,r.useMemo)(()=>($?.data??[]).map(e=>{let t={...e};return q.forEach(s=>{V.get(s)?._type===j.A2.JSON?t[s]=JSON.stringify(e[s]).replace(/\//g,"\\/"):t[s]=JSON.stringify(e[s])}),t}),[$,q,V]),K=(0,r.useMemo)(()=>(0,j.D7)($?.chSql??{sql:"",params:{}}),[$]),Z=(0,U.Ay)({meta:$?.meta,aliasMap:K}),Q=(0,r.useCallback)(e=>n?.(Z(e)),[n,Z]);(0,r.useEffect)(()=>{P&&s&&O&&s(O)},[P,s,O]);let{data:ee}=(0,X.Fo)({id:t}),et=B[B.length-1],ea=(0,Y.nt)({config:e,samples:1e4,bodyValueExpression:et??"",severityTextExpression:ee?.severityTextExpression??"",totalCount:void 0,enabled:u}),en=(0,F.I)({queryKey:["noisy-patterns",e],queryFn:async()=>Object.values(ea.data).filter(e=>e.count/(ea.sampledRowCount??1)>.1),enabled:u&&null!=ea.data&&Object.values(ea.data).length>0&&null!=ea.miner}),er=(0,r.useMemo)(()=>en.data?.map(e=>e.id)??[],[en.data]),ei=(0,F.I)({queryKey:["denoised-rows",e,u,...u?[J]:[],er,et],queryFn:async()=>{if(!u)return[];if(0===er.length)return J;let e=await ea.miner?.matchLogs(J.map(e=>e[et]));return J.filter((t,s)=>{let a=e?.[s];return!er.includes(`${a}`)})},placeholderData:(t,s)=>{if(s?.queryKey?.[0]==="denoised-rows"&&s?.queryKey?.[1]===e)return t},gcTime:o?p()("30s"):p()("5m"),enabled:u&&en.isSuccess&&J.length>0&&null!=ea.miner}),el=u?D||ei.isFetching||en.isFetching||ea.isLoading:D,eo=$?.window?.direction==="ASC"?$?.window?.endTime:$?.window?.startTime;return(0,a.jsxs)(a.Fragment,{children:[u&&(0,a.jsxs)(C.a,{mb:"xxs",px:"sm",children:[(0,a.jsx)(T.E,{fw:"bold",fz:"xs",mb:"xxs",children:"Removed Noisy Event Patterns"}),(0,a.jsxs)(C.a,{mah:100,style:{overflow:"auto"},children:[en.data?.map(e=>(0,a.jsx)(T.E,{fz:"xs",children:e.pattern},e.id)),0===er.length&&(0,a.jsx)(T.E,{fz:"xs",children:"No noisy patterns found"})]})]}),(0,a.jsx)(eF,{isLive:o,wrapLines:!1,displayedColumns:B,highlightedLineId:i,rows:u?ei?.data??[]:J,renderRowDetails:f,isLoading:el,fetchNextPage:M,hasNextPage:z,onRowDetailsClick:Q,onScroll:d,generateRowId:Z,isError:P,error:O??void 0,columnTypeMap:V,dateRange:e.dateRange,loadingDate:eo,config:R,onChildModalOpen:m,source:ee,onExpandedRowsChange:h,collapseAllRows:x,showExpandButton:g,enableSorting:!0,onSortingChange:k,sortOrder:N,getRowWhere:Z,variant:v})]})});function eB(){return""}function eH(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function eW(e){return e??""}},50374:(e,t,s)=>{"use strict";s.d(t,{D:()=>e0,A:()=>e3});var a,n,r=s(6029),i=s(75155),l=s(55729),o=s(86508),c=s(84450),d=s.n(c),u=s(41038),m=s(7913),h=s(66692),p=s(82641),x=s(60481),g=s(78253),f=s(10174),b=s(34834),y=s(64441),v=s(24885);function _(e){let t,s,a,n=(0,i.c)(13),{hasLogSource:r}=e,[o,c]=(0,u.ZA)("traceWhere"),[d,m]=(0,u.ZA)("logWhere"),h=!!o||!!(r&&d),[p,x]=(0,l.useState)(h);n[0]!==m||n[1]!==c?(t=e=>{c(e.traceWhere||null),m(e.logWhere||null)},n[0]=m,n[1]=c,n[2]=t):t=n[2];let g=t;n[3]!==m||n[4]!==c?(s=()=>{c(null),m(null)},n[3]=m,n[4]=c,n[5]=s):s=n[5];let f=s;return n[6]!==f||n[7]!==h||n[8]!==p||n[9]!==d||n[10]!==g||n[11]!==o?(a={traceWhere:o,logWhere:d,isFilterActive:h,isFilterExpanded:p,setIsFilterExpanded:x,onSubmit:g,clear:f},n[6]=f,n[7]=h,n[8]=p,n[9]=d,n[10]=g,n[11]=o,n[12]=a):a=n[12],a}var j=s(78694),S=s(81973),w=s(96958),E=s(18006),C=s(26674),N=s(3635),k=s(43517),A=s(43085),T=s(98287);function I(e){let t,s,a,n,l=(0,i.c)(9),{traceId:o,dateRange:c,traceTableSourceId:d}=e;l[0]!==d?(t={id:d},l[0]=d,l[1]=t):t=l[1];let{data:u}=(0,S.Fo)(t);return l[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsxs)(N.Y,{gap:0,children:[(0,r.jsx)(k.E,{size:"sm",ps:"sm",children:"Service Map"}),(0,r.jsx)(A.E,{size:"xs",ms:"xs",color:"gray",autoContrast:!0,radius:"sm",children:"Beta"})]}),l[2]=s):s=l[2],l[3]!==c||l[4]!==o||l[5]!==u?(a=u?(0,r.jsx)(T.A,{traceTableSource:u,traceId:o,dateRange:c,isSingleTrace:!0}):null,l[3]=c,l[4]=o,l[5]=u,l[6]=a):a=l[6],l[7]!==a?(n=(0,r.jsxs)(b.B,{w:"100%",children:[s,a]}),l[7]=a,l[8]=n):n=l[8],n}var R=s(76539),L=s(43465),$=s(66631),M=s(76089),z=s(90124),D=s(62801),P=s(44595),F=s(53993),O=s(43152),V=s(40228),B=s(28450);let H=e=>{let t,s,a,n,c,d,u,m,h,p,x,g,f,b,y,v,_,j,S,w,E,C,k,A,T,I=(0,i.c)(73),{fieldPrefix:R,metricSource:F,timestamp:B,title:H,where:W}=e,[q,J]=(0,l.useState)("30m"),[K,G]=(0,l.useState)("sm");if(I[0]!==q||I[1]!==B){let e={"30m":{minutes:15},"1h":{minutes:30},"1d":{hours:12}}[q];t=(0,L.A)(new Date(B),e),s=(0,$.A)([(0,o.A)(new Date(B),e),new Date]),I[0]=q,I[1]=B,I[2]=t,I[3]=s}else t=I[2],s=I[3];I[4]!==t||I[5]!==s?(a=[t,s],I[4]=t,I[5]=s,I[6]=a):a=I[6];let Y=a;e:{switch(K){case"sm":{let e;I[7]===Symbol.for("react.memo_cache_sentinel")?(e={cols:3,height:200},I[7]=e):e=I[7],n=e;break e}case"md":{let e;I[8]===Symbol.for("react.memo_cache_sentinel")?(e={cols:2,height:250},I[8]=e):e=I[8],n=e;break e}case"lg":{let e;I[9]===Symbol.for("react.memo_cache_sentinel")?(e={cols:1,height:320},I[9]=e):e=I[9],n=e;break e}}n=void 0}let{cols:U,height:Z}=n;I[10]!==Y?(c=(0,M.tA)(Y),I[10]=Y,I[11]=c):c=I[11];let X=c,Q=`infra-subpanel-${R}`;I[12]!==H?(d=(0,r.jsx)("h4",{className:"fs-6 m-0",children:H}),I[12]=H,I[13]=d):d=I[13],I[14]===Symbol.for("react.memo_cache_sentinel")?(u=[{label:"30m",value:"30m"},{label:"1h",value:"1h"},{label:"1d",value:"1d"}],I[14]=u):u=I[14],I[15]===Symbol.for("react.memo_cache_sentinel")?(m=e=>J(e),I[15]=m):m=I[15],I[16]!==q?(h=(0,r.jsx)(z.I,{size:"xs",data:u,value:q,onChange:m}),I[16]=q,I[17]=h):h=I[17],I[18]!==h||I[19]!==d?(p=(0,r.jsxs)(N.Y,{align:"center",children:[d,h]}),I[18]=h,I[19]=d,I[20]=p):p=I[20],I[21]===Symbol.for("react.memo_cache_sentinel")?(x=[{label:"SM",value:"sm"},{label:"MD",value:"md"},{label:"LG",value:"lg"}],I[21]=x):x=I[21],I[22]===Symbol.for("react.memo_cache_sentinel")?(g=e=>G(e),I[22]=g):g=I[22],I[23]!==K?(f=(0,r.jsx)(N.Y,{align:"center",children:(0,r.jsx)(z.I,{size:"xs",data:x,value:K,onChange:g})}),I[23]=K,I[24]=f):f=I[24],I[25]!==p||I[26]!==f?(b=(0,r.jsxs)(N.Y,{justify:"space-between",align:"center",children:[p,f]}),I[25]=p,I[26]=f,I[27]=b):b=I[27],I[28]!==Y||I[29]!==R||I[30]!==X||I[31]!==F||I[32]!==W?(y=(0,O.ik)({dateRange:Y,granularity:X,seriesReturnType:"column",series:[{type:"time",where:W,groupBy:[],aggFn:"avg",field:`${R}cpu.utilization - Gauge`,table:"metrics",numberFormat:O.p2}]},{metric:F}),I[28]=Y,I[29]=R,I[30]=X,I[31]=F,I[32]=W,I[33]=y):y=I[33];let ee=B/1e3;I[34]!==y||I[35]!==ee?(v=(0,r.jsx)(V.S,{title:"CPU Usage (%)",config:y,showDisplaySwitcher:!1,logReferenceTimestamp:ee}),I[34]=y,I[35]=ee,I[36]=v):v=I[36],I[37]!==Z||I[38]!==v?(_=(0,r.jsx)(D.Z,{"data-testid":"cpu-usage-card",children:(0,r.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:v})}),I[37]=Z,I[38]=v,I[39]=_):_=I[39],I[40]!==Y||I[41]!==R||I[42]!==X||I[43]!==F||I[44]!==W?(j=(0,O.ik)({dateRange:Y,granularity:X,seriesReturnType:"column",series:[{type:"time",where:W,groupBy:[],aggFn:"avg",field:`${R}memory.usage - Gauge`,table:"metrics",numberFormat:O.JD}]},{metric:F}),I[40]=Y,I[41]=R,I[42]=X,I[43]=F,I[44]=W,I[45]=j):j=I[45];let et=B/1e3;I[46]!==j||I[47]!==et?(S=(0,r.jsx)(V.S,{title:"Memory Used",config:j,showDisplaySwitcher:!1,logReferenceTimestamp:et}),I[46]=j,I[47]=et,I[48]=S):S=I[48],I[49]!==Z||I[50]!==S?(w=(0,r.jsx)(D.Z,{"data-testid":"memory-usage-card",children:(0,r.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:S})}),I[49]=Z,I[50]=S,I[51]=w):w=I[51],I[52]!==Y||I[53]!==R||I[54]!==X||I[55]!==F||I[56]!==W?(E=(0,O.ik)({dateRange:Y,granularity:X,seriesReturnType:"column",series:[{type:"time",where:W,groupBy:[],aggFn:"avg",field:`${R}filesystem.available - Gauge`,table:"metrics",numberFormat:O.nH}]},{metric:F}),I[52]=Y,I[53]=R,I[54]=X,I[55]=F,I[56]=W,I[57]=E):E=I[57];let es=B/1e3;return I[58]!==E||I[59]!==es?(C=(0,r.jsx)(V.S,{title:"Disk Available",config:E,showDisplaySwitcher:!1,logReferenceTimestamp:es}),I[58]=E,I[59]=es,I[60]=C):C=I[60],I[61]!==Z||I[62]!==C?(k=(0,r.jsx)(D.Z,{"data-testid":"disk-usage-card",children:(0,r.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:C})}),I[61]=Z,I[62]=C,I[63]=k):k=I[63],I[64]!==U||I[65]!==_||I[66]!==w||I[67]!==k?(A=(0,r.jsxs)(P.r,{mt:"md",cols:U,children:[_,w,k]}),I[64]=U,I[65]=_,I[66]=w,I[67]=k,I[68]=A):A=I[68],I[69]!==b||I[70]!==A||I[71]!==Q?(T=(0,r.jsxs)("div",{"data-testid":Q,children:[b,A]}),I[69]=b,I[70]=A,I[71]=Q,I[72]=T):T=I[72],T},W=({rowData:e,rowId:t,source:s})=>{let{data:a}=(0,S.Fo)({id:s.metricSourceId}),n=e?.__hdx_resource_attributes["k8s.pod.uid"],i=e?.__hdx_resource_attributes["k8s.node.name"],l=new Date(e?.__hdx_timestamp).getTime();return(0,r.jsxs)(b.B,{my:"md",gap:40,children:[n&&(0,r.jsxs)("div",{children:[a&&(0,r.jsx)(H,{title:"Pod",where:`${a.resourceAttributesExpression}.k8s.pod.uid:"${n}"`,fieldPrefix:"k8s.pod.",timestamp:l,metricSource:a}),s&&(0,r.jsxs)(D.Z,{p:"md",mt:"xl",children:[(0,r.jsx)(D.Z.Section,{p:"md",py:"xs",children:"Pod Timeline"}),(0,r.jsx)(D.Z.Section,{children:(0,r.jsx)(F.F,{viewportProps:{style:{maxHeight:280}},children:(0,r.jsx)(x.a,{p:"md",py:"sm",children:(0,r.jsx)(B.FB,{logSource:s,q:`\`k8s.pod.uid\`:"${n}"`,dateRange:[(0,L.A)(new Date(l),{days:1}),(0,o.A)(new Date(l),{days:1})],anchorEvent:{label:(0,r.jsx)("div",{className:"text-brand",children:"This Event"}),timestamp:new Date(l).toISOString()}})})})})]})]}),i&&a&&(0,r.jsx)(H,{metricSource:a,title:"Node",where:`${a.resourceAttributesExpression}.k8s.node.name:"${i}"`,fieldPrefix:"k8s.node.",timestamp:l})]})};var q=s(37901),J=s(26837),K=s(82203),G=s.n(K),Y=s(94720),U=s(40147),Z=s(57030),X=s(71434),Q=s.n(X),ee=s(1909),et=s(14262),es=s.n(et),ea=s(3145),en=s(53061),er=s(47268),ei=s(23935),el=s(24589),eo=s(92789),ec=s(70114),ed=s(23474),eu=s(54134),em=s(225),eh=s(24196),ep=s(78744),ex=s(70727),eg=s(75828),ef=s.n(eg),eb=s(63085),ey=s(21440),ev=s(7565),e_=s(92917),ej=s(83101),eS=s.n(ej),ew=s(20699),eE=s.n(ew);let eC=(0,l.memo)(function(e){let t,s,a,n,l,o,c,d,u,m,h,p,x,g,f=(0,i.c)(30),{marker:b,eventStart:y,eventEnd:v,height:_}=e,j=(0,ev.a)(),S=v-y,w=b.timestamp-y,E=S>0?w/S*100:0;f[0]!==b.attributes?(t=Object.entries(b.attributes),f[0]=b.attributes,f[1]=t):t=f[1];let C=t;f[2]!==j||f[3]!==b.timestamp?(s=j(new Date(b.timestamp),{format:"withMs"}),f[2]=j,f[3]=b.timestamp,f[4]=s):s=f[4],f[5]!==s?(a=(0,r.jsx)(k.E,{size:"xxs",c:"dimmed",mb:"xxs",children:s}),f[5]=s,f[6]=a):a=f[6],f[7]!==b.name?(n=(0,r.jsx)(k.E,{size:"xs",children:b.name}),f[7]=b.name,f[8]=n):n=f[8],f[9]!==C?(l=C.length>0&&(0,r.jsxs)("div",{style:{fontSize:10,marginTop:4},children:[C.slice(0,5).map(eL),C.length>5&&(0,r.jsxs)("div",{style:{fontStyle:"italic"},children:["...and ",C.length-5," more"]})]}),f[9]=C,f[10]=l):l=f[10],f[11]!==a||f[12]!==n||f[13]!==l?(o=(0,r.jsxs)("div",{children:[a,n,l]}),f[11]=a,f[12]=n,f[13]=l,f[14]=o):o=f[14];let N=o;f[15]===Symbol.for("react.memo_cache_sentinel")?(c={transition:"fade"},d={fontSize:11,maxWidth:350,wordBreak:"break-word"},f[15]=c,f[16]=d):(c=f[15],d=f[16]),f[17]!==E?(u=E.toFixed(6),f[17]=E,f[18]=u):u=f[18];let A=`${u}%`;return f[19]!==A?(m={position:"absolute",left:A,top:"50%",transform:"translate(-50%, -50%)",width:8,height:8,cursor:"pointer",zIndex:10,pointerEvents:"auto"},f[19]=A,f[20]=m):m=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)("div",{style:{width:8,height:8,backgroundColor:"var(--color-bg-success)",transform:"rotate(45deg)",border:"1px solid #333",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}}),f[21]=h):h=f[21],f[22]!==_?(p=(0,r.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:1,height:_,backgroundColor:"var(--color-bg-success)",opacity:.4,zIndex:-1}}),f[22]=_,f[23]=p):p=f[23],f[24]!==m||f[25]!==p?(x=(0,r.jsxs)("div",{style:m,onMouseEnter:e$,onClick:eM,children:[h,p]}),f[24]=m,f[25]=p,f[26]=x):x=f[26],f[27]!==x||f[28]!==N?(g=(0,r.jsx)(eb.m,{label:N,color:"var(--color-bg-surface)",withArrow:!0,multiline:!0,transitionProps:c,style:d,children:x}),f[27]=x,f[28]=N,f[29]=g):g=f[29],g}),eN=(0,l.memo)(function(e){let t,s,a,n,l,o,c=(0,i.c)(25),{events:d,maxVal:u,height:m,eventStyles:h,onEventHover:p,scale:x,offset:g}=e,f=p??ez;c[0]!==m?(t={width:0,flexGrow:1,height:m,position:"relative"},c[0]=m,c[1]=t):t=c[1];let b=-1*g*x;c[2]!==b?(s=b.toFixed(6),c[2]=b,c[3]=s):s=c[3];let y=`${s}%`;if(c[4]!==y?(a=(0,r.jsx)("div",{style:{marginRight:y}}),c[4]=y,c[5]=a):a=c[5],c[6]!==d?(n=d??[],c[6]=d,c[7]=n):n=c[7],c[8]!==h||c[9]!==m||c[10]!==u||c[11]!==f||c[12]!==x||c[13]!==n){let e;c[15]!==h||c[16]!==m||c[17]!==u||c[18]!==f||c[19]!==x?(e=(e,t,s)=>{let a=(e.minWidthPerc??0)/100,n=s[t-1],i=n?.start!=null?n?.start+u*a:0,l=Math.max(n?.end??0,i),o=x*Math.max((e.end-e.start)/u,a)*100,c=x*((e.start-l)/u*100);return(0,r.jsx)(eb.m,{label:e.tooltip,color:"gray",withArrow:!0,multiline:!0,transitionProps:{transition:"fade-right"},style:{fontSize:11,maxWidth:300,wordBreak:"break-word"},children:(0,r.jsxs)("div",{onMouseEnter:()=>f(e.id),className:"d-flex align-items-center h-100 cursor-pointer text-truncate hover-opacity",style:{userSelect:"none",backgroundColor:e.color,minWidth:`${o.toFixed(6)}%`,width:`${o.toFixed(6)}%`,marginLeft:`${c.toFixed(6)}%`,position:"relative",..."function"==typeof h?h(e):h},children:[(0,r.jsx)("div",{style:{margin:"auto"},className:"px-2",children:e.body}),e.markers?.map((t,s)=>(0,r.jsx)(eC,{marker:t,eventStart:e.start,eventEnd:e.end,height:m},`${e.id}-marker-${s}`))]})},e.id)},c[15]=h,c[16]=m,c[17]=u,c[18]=f,c[19]=x,c[20]=e):e=c[20],l=n.map(e),c[8]=h,c[9]=m,c[10]=u,c[11]=f,c[12]=x,c[13]=n,c[14]=l}else l=c[14];return c[21]!==t||c[22]!==a||c[23]!==l?(o=(0,r.jsxs)("div",{className:"d-flex overflow-hidden",style:t,children:[a,l]}),c[21]=t,c[22]=a,c[23]=l,c[24]=o):o=c[24],o});function ek(e){return e<1e3?`${Math.round(e)}ms`:e%1e3==0?`${Math.floor(e/1e3)}s`:`${(e/1e3).toFixed(3)}s`}function eA(e){let t,s,a,n,l,o,c,d,u,m,h,p=(0,i.c)(19),{maxVal:x,labelWidth:g,height:f,scale:b,offset:y}=e,v=(h=m=Math.pow(10,Math.floor(Math.log10(u=x/b/10))),u>=2*m&&(h=2*m),u>=5*m&&(h=5*m),h),_=Math.floor(x/v),j=v/x*100*b;if(p[0]!==f||p[1]!==v||p[2]!==_||p[3]!==j){t=[];for(let e=0;e<_;e++)t.push((0,r.jsx)("div",{style:{height:f,width:1,marginRight:-1,marginLeft:0===e?0:`${j.toFixed(6)}%`,background:"var(--color-border-muted)"},children:(0,r.jsx)("div",{className:"ms-2 fs-8.5",children:ek(e*v)})},e));p[0]=f,p[1]=v,p[2]=_,p[3]=j,p[4]=t}else t=p[4];p[5]===Symbol.for("react.memo_cache_sentinel")?(s={position:"sticky",top:0,height:24,paddingTop:4,zIndex:200,pointerEvents:"none",background:"var(--color-bg-body)"},a=ef()("d-flex align-items-center"),p[5]=s,p[6]=a):(s=p[5],a=p[6]),p[7]!==g?(n=(0,r.jsx)("div",{style:{width:g,minWidth:g}}),p[7]=g,p[8]=n):n=p[8];let S=-1*y*b;p[9]!==S?(l=S.toFixed(6),p[9]=S,p[10]=l):l=p[10];let w=`${l}%`;return p[11]!==w?(o=(0,r.jsx)("div",{style:{marginRight:w}}),p[11]=w,p[12]=o):o=p[12],p[13]!==o||p[14]!==t?(c=(0,r.jsxs)("div",{className:"d-flex w-100 overflow-hidden",children:[o,t]}),p[13]=o,p[14]=t,p[15]=c):c=p[15],p[16]!==n||p[17]!==c?(d=(0,r.jsx)("div",{style:s,children:(0,r.jsxs)("div",{className:`${a}`,children:[n,c]})}),p[16]=n,p[17]=c,p[18]=d):d=p[18],d}function eT(e){let t,s,a,n,l,o,c,d,u,m=(0,i.c)(24),{xPerc:h,overlay:p,labelWidth:x,color:g,height:f}=e,b=Math.min(Math.max(100*h,-1),100);m[0]!==b?(t=b.toFixed(6),m[0]=b,m[1]=t):t=m[1];let y=`${t}%`,v=h<=0?"none":"block";return m[2]!==v?(s={position:"sticky",top:0,height:0,zIndex:250,pointerEvents:"none",display:v},m[2]=v,m[3]=s):s=m[3],m[4]!==x?(a=(0,r.jsx)("div",{style:{width:x,minWidth:x}}),m[4]=x,m[5]=a):a=m[5],m[6]!==y?(n={marginLeft:y},m[6]=y,m[7]=n):n=m[7],m[8]!==p||m[9]!==h?(l=null!=p&&(0,r.jsx)("div",{style:{height:0,marginLeft:h<.5?12:-150,top:12,position:"relative"},children:(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"p-2 rounded border",style:{background:"var(--color-bg-surface)"},children:p})})}),m[8]=p,m[9]=h,m[10]=l):l=m[10],m[11]!==g||m[12]!==f?(o=(0,r.jsx)("div",{style:{height:f,width:1,background:g}}),m[11]=g,m[12]=f,m[13]=o):o=m[13],m[14]!==n||m[15]!==l||m[16]!==o?(c=(0,r.jsx)("div",{className:"w-100 overflow-hidden",children:(0,r.jsxs)("div",{style:n,children:[l,o]})}),m[14]=n,m[15]=l,m[16]=o,m[17]=c):c=m[17],m[18]!==a||m[19]!==c?(d=(0,r.jsxs)("div",{className:"d-flex",children:[a,c]}),m[18]=a,m[19]=c,m[20]=d):d=m[20],m[21]!==d||m[22]!==s?(u=(0,r.jsx)("div",{style:s,children:d}),m[21]=d,m[22]=s,m[23]=u):u=m[23],u}function eI(e){let t,s,a,n=(0,i.c)(11),{containerRef:o,maxVal:c,labelWidth:d,height:u,scale:m,offset:h,xPerc:p,setXPerc:x}=e,[g,f]=(0,l.useState)(!1);n[0]!==o||n[1]!==d||n[2]!==x?(t=()=>{let e=t=>{if(null!=o.current){let s=o.current,a=s.getBoundingClientRect(),n=(t.clientX-a.left-d)/(s.clientWidth-d);null!=e&&x(n)}},t=()=>f(!0),s=()=>f(!1),a=o.current;return a?.addEventListener("mousemove",e),a?.addEventListener("mouseleave",s),a?.addEventListener("mouseenter",t),()=>{a?.removeEventListener("mousemove",e),a?.removeEventListener("mouseleave",s),a?.removeEventListener("mouseenter",t)}},s=[o,d,x],n[0]=o,n[1]=d,n[2]=x,n[3]=t,n[4]=s):(t=n[3],s=n[4]),(0,l.useEffect)(t,s);let b=(h/100+Math.max(p,0)/m)*c;return n[5]!==b||n[6]!==u||n[7]!==d||n[8]!==g||n[9]!==p?(a=g?(0,r.jsx)(eT,{xPerc:Math.max(p,0),overlay:ek(Math.max(b,0)),height:u,labelWidth:d,color:"var(--color-bg-neutral)"}):null,n[5]=b,n[6]=u,n[7]=d,n[8]=g,n[9]=p,n[10]=a):a=n[10],a}function eR({rows:e,cursors:t,rowHeight:s,onMouseMove:a,onEventClick:n,labelWidth:i,className:o,style:c,onClick:d,scale:u=1,setScale:m=()=>{},initialScrollRowIndex:h,scaleWithScroll:p=!1}){let[x,g]=(0,l.useState)(0),f=(0,e_.ZC)(u),b=i/window.innerWidth*100,{size:y,startResize:_}=(0,v.A)(b,"left"),j=y/100*window.innerWidth,S=(0,l.useRef)(null),w=(e,t)=>{if(null!=S.current&&null!=t){let s=S.current,a=s.getBoundingClientRect(),n=e.clientX-a.left;e.clientY,a.top,t(Math.max((x/100+(n-j)/(s.clientWidth-j)/u)*A))}},E=(0,l.useMemo)(()=>({onDrag:e=>{g(t=>Math.min(Math.max(t-e.movementX*(.125/u),0),100-100/u))}}),[u,g]);(0,e_.i3)(S,E);let[C,N]=(0,l.useState)(0),k=e=>{p&&(e.preventDefault(),m(t=>Math.max(t-.001*e.deltaY,1)))};(0,l.useEffect)(()=>{null!=f&&f!=u&&g(e=>{let t=Math.max(Math.min(C,1),0);return Math.min(Math.max(e+100*t/f-100*t/u,0),100-100/u)})},[u,f,C]),(0,l.useEffect)(()=>{let e=S.current;if(null!=e)return e.addEventListener("wheel",k,{passive:!1}),()=>{e.removeEventListener("wheel",k)}});let A=(0,l.useMemo)(()=>{let t=0;for(let s of e??[])for(let e of s.events)t=Math.max(t,e.end);return 1.1*t},[e]),T=(0,ey.Te)({count:e?.length??0,getScrollElement:()=>S.current,estimateSize:()=>s,overscan:5}),I=T.getVirtualItems(),[R,L]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{null!=h&&!R&&h>=0&&(L(!0),T.scrollToIndex(h,{align:"center"}))},[h,R,T]),(0,r.jsxs)("div",{style:{position:"relative",...c},className:o,ref:S,onClick:e=>{w(e,d)},onMouseMove:e=>{w(e,a)},children:[(t??[]).map(e=>{let t=(e.start/A-x/100)*u;return(0,r.jsx)(eT,{xPerc:t,height:S.current?.getBoundingClientRect().height??300,labelWidth:j,color:e.color},e.id)}),(0,r.jsx)(eI,{containerRef:S,maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:j,scale:u,offset:x,xPerc:C,setXPerc:N}),(0,r.jsx)(eA,{maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:j,scale:u,offset:x}),(0,r.jsx)("div",{style:{height:`${T.getTotalSize()+32}px`,width:"100%",position:"relative"},children:(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${I?.[0]?.start??0}px)`},children:T.getVirtualItems().map(t=>{let a=e?.[t.index];return(0,r.jsxs)("div",{onClick:()=>n?.(a),"data-index":t.index,ref:T.measureElement,className:`${ef()("d-flex align-items-center overflow-hidden",a.className,eE().timelineRow,a.isActive&&eE().timelineRowActive)}`,style:{...a.style},children:[(0,r.jsxs)("div",{className:eE().labelContainer,style:{width:j,minWidth:j},children:[a.label,(0,r.jsx)("div",{className:eS().resizeHandle,onMouseDown:_,style:{backgroundColor:"var(--color-bg-neutral)"}})]}),(0,r.jsx)(eN,{events:a.events,height:s,maxVal:A,eventStyles:e=>({borderRadius:2,fontSize:.5*s,backgroundColor:e.isError?"var(--color-bg-danger)":"var(--color-bg-inverted)",color:"var(--color-text-inverted)"}),scale:u,offset:x})]},t.index)})})})]})}function eL(e){let[t,s]=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{style:{color:"var(--color-text-primary)"},children:[t,":"]})," ",String(s).length>50?String(s).substring(0,50)+"...":String(s)]},t)}function e$(e){return e.stopPropagation()}function eM(e){return e.stopPropagation()}function ez(){}var eD=s(59017),eP=s(66773),eF=s.n(eP);function eO(e){let t,s,a=(0,i.c)(6),{config:n,dateRangeStartInclusive:r,dateRange:l,enabled:o}=e;a[0]!==n||a[1]!==l||a[2]!==r?(t={...n,dateRange:l,dateRangeStartInclusive:r},a[0]=n,a[1]=l,a[2]=r,a[3]=t):t=a[3];let c=t;return a[4]!==o?(s={enabled:o},a[4]=o,a[5]=s):s=a[5],(0,ep.A)(c,s)}function eV(e){let t,s,a,n,r,l,o,c,d=(0,i.c)(32),{tableSource:u,focusDate:m,dateRange:h,traceId:x,enabled:g,hiddenRowExpression:f}=e;d[0]!==f||d[1]!==u||d[2]!==x?(t=function(e,t,s){let a={Body:e?.kind===p.GL.Trace?(0,S.pM)(e)??"":e?.kind===p.GL.Log?(0,S.N8)(e)??"":"",Timestamp:(0,S.xg)(e),Duration:e.durationExpression?(0,S.kg)(e):"",TraceId:e.traceIdExpression??"",SpanId:e.spanIdExpression??"",ParentSpanId:e.parentSpanIdExpression??"",StatusCode:e.statusCodeExpression??"",ServiceName:e.serviceNameExpression??"",SeverityText:e.severityTextExpression??"",SpanAttributes:e.eventAttributesExpression??"",SpanEvents:e.spanEventsValueExpression??""};if(e.highlightedTraceAttributeExpressions)for(let t of e.highlightedTraceAttributeExpressions)t.alias&&(a[t.alias]=t.sqlExpression);let n=[{valueExpression:a.Body,alias:"Body"},{valueExpression:a.Timestamp,alias:"Timestamp"},{valueExpression:a.SpanId,alias:"SpanId"},...a.ServiceName?[{valueExpression:a.ServiceName,alias:"ServiceName"}]:[],...s?[{valueExpression:s,valueExpressionLanguage:"lucene",alias:"__hdx_hidden"}]:[]];return(e.kind===p.GL.Trace||e.kind===p.GL.Log)&&n.push(...(0,E.z4)(e.highlightedTraceAttributeExpressions)),s&&(a.__hdx_hidden=s),e.kind===p.GL.Trace?n.push({valueExpression:a.Duration,alias:"Duration"},{valueExpression:a.ParentSpanId,alias:"ParentSpanId"},...a.StatusCode?[{valueExpression:a.StatusCode,alias:"StatusCode"}]:[],...a.SpanAttributes?[{valueExpression:a.SpanAttributes,alias:"SpanAttributes"}]:[],...a.SpanEvents?[{valueExpression:a.SpanEvents,alias:"SpanEvents"}]:[]):e.kind===p.GL.Log&&n.push(...a.SeverityText?[{valueExpression:a.SeverityText,alias:"SeverityText"}]:[]),{config:{select:n,from:e.from,timestampValueExpression:e.timestampValueExpression,where:`${a.TraceId} = '${t}'`,limit:{limit:5e4},connection:e.connection},alias:a,type:e.kind}}(u,x,f),d[0]=f,d[1]=u,d[2]=x,d[3]=t):t=d[3];let{config:b,alias:y,type:v}=t;d[4]!==h[0]||d[5]!==m?(s=[h[0],m],d[4]=h[0],d[5]=m,d[6]=s):s=d[6],d[7]!==b||d[8]!==g||d[9]!==s?(a={config:b,dateRangeStartInclusive:!0,dateRange:s,enabled:g},d[7]=b,d[8]=g,d[9]=s,d[10]=a):a=d[10];let{data:_,isFetching:j,error:w}=eO(a);d[11]!==h[1]||d[12]!==m?(n=[m,h[1]],d[11]=h[1],d[12]=m,d[13]=n):n=d[13],d[14]!==b||d[15]!==g||d[16]!==n?(r={config:b,dateRangeStartInclusive:!1,dateRange:n,enabled:g},d[14]=b,d[15]=g,d[16]=n,d[17]=r):r=d[17];let{data:C,isFetching:N,error:k}=eO(r),A=j||N,T=_?.meta??C?.meta,I=w||k;d[18]!==y||d[19]!==T?(l={meta:T,aliasMap:y},d[18]=y,d[19]=T,d[20]=l):l=d[20];let R=(0,ex.Ay)(l);e:{let e;if(!T||0===T.length){let e;d[21]===Symbol.for("react.memo_cache_sentinel")?(e=[],d[21]=e):e=d[21],o=e;break e}d[22]!==C?.data||d[23]!==_?.data||d[24]!==R||d[25]!==v?(e=[..._?.data??[],...C?.data??[]].map(e=>{let t=R((0,X.omit)(e,["SpanAttributes","SpanEvents","__hdx_hidden"]));return{...e,SpanId:e?.SpanId,__hdx_hidden:e?.__hdx_hidden,type:v,id:t.where,aliasWith:[]}}),d[22]=C?.data,d[23]=_?.data,d[24]=R,d[25]=v,d[26]=e):e=d[26],o=e}let L=o;return d[27]!==I||d[28]!==A||d[29]!==T||d[30]!==L?(c={rows:L,meta:T,isFetching:A,error:I},d[27]=I,d[28]=A,d[29]=T,d[30]=L,d[31]=c):c=d[31],c}function eB({traceTableSource:e,logTableSource:t,traceId:s,dateRange:a,focusDate:n,onClick:i,highlightedRowWhere:o,initialRowHighlightHint:c}){let{size:d,startResize:u}=(0,v.A)(30,"bottom"),m=(0,ev.a)(),{traceWhere:h,logWhere:g,clear:f,isFilterActive:b,isFilterExpanded:y,setIsFilterExpanded:j,onSubmit:S}=_({hasLogSource:!!t}),{control:w,handleSubmit:C,setValue:A}=(0,ee.mN)({defaultValues:{traceWhere:h??"",logWhere:g??""}}),T=(0,l.useCallback)(()=>{A("traceWhere",""),A("logWhere",""),f()},[f,A]),{rows:I,isFetching:R,meta:L,error:$}=eV({tableSource:e,focusDate:n,dateRange:a,traceId:s,hiddenRowExpression:h?`NOT (${h})`:void 0,enabled:!0}),{rows:M,isFetching:z,meta:D,error:P}=eV({tableSource:t||e,focusDate:n,dateRange:t?a:[a[1],a[0]],traceId:s,hiddenRowExpression:g?`NOT (${g})`:void 0,enabled:!!t}),F=R||z,O=$||P,V=(0,l.useMemo)(()=>[...I,...M],[I,M]);V.sort((e,t)=>{let s=es().fromString(e.Timestamp),a=es().fromString(t.Timestamp),n=s.getTimeT()-a.getTimeT();return 0===n?s.getNano()-a.getNano():n});let B=(0,l.useMemo)(()=>{let s=I?.filter(e=>!e.__hdx_hidden),a=(0,E.N4)(e,e.highlightedTraceAttributeExpressions,s,L);if(t&&M&&D){let e=M?.filter(e=>!e.__hdx_hidden);a.push(...(0,E.N4)(t,t.highlightedTraceAttributeExpressions,e,D))}return a.sort((e,t)=>e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value))},[e,I,L,t,M,D]);(0,l.useEffect)(()=>{if(c&&i&&null==o){let e=V.findIndex(e=>e.Timestamp===c.timestamp&&e.SpanId===c.spanId&&e.Body===c.body);-1!==e&&i?.({id:V[e].id,type:V[e].type??"",aliasWith:V[e].aliasWith})}},[c,V,i,o]);let H=(0,l.useMemo)(()=>new Set(I?.filter(e=>Q().isString(e.SpanId)&&e.SpanId.length>0).map(e=>e.SpanId)??[]),[I]),W=[],q=new Map,J=new Map;for(let e of V??[]){let{type:t,SpanId:s,ParentSpanId:a}=e;if(!s)continue;let n=t===p.GL.Log?`${s}-log`:s,r=t===p.GL.Log?s:a||"",i={...e,children:[]};if(t===p.GL.Trace){if(!J.has(n)){J.set(n,e.id);let t=`placeholder-${n}`,s=q.get(t);s&&(i.children=s.children||[],q.delete(t))}q.set(e.id,i)}if(t!==p.GL.Trace||r&&H.has(r)){let e=J.get(r),t=e?q.get(e):void 0;if(!t){let e=`placeholder-${r}`;(t=q.get(e))||(t={children:[]},q.set(e,t))}t.children.push(i)}else W.push(i)}let[K,G]=(0,l.useState)(new Set),[Y,U]=(0,l.useState)(!0),Z=(0,l.useCallback)(e=>{G(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[G]),X=(e,t,s=0)=>{e.__hdx_hidden||t.push({level:s,...e}),K.has(e.id)||e?.children?.forEach(e=>X(e,t,s+1))},et=[];W.length>0&&W.forEach(e=>X(e,et));let ep=et.length,ex=et.filter(e=>"Error"===e.StatusCode||e.SeverityText?.toLowerCase()==="error").length,eg=`${ep} span${1!==ep?"s":""}`,ef=`${ex} error${1!==ex?"s":""}`,eb=V?.reduce((e,t)=>Math.min(e,new Date(t.Timestamp).getTime()),Number.MAX_SAFE_INTEGER)??0,ey=eb===Number.MAX_SAFE_INTEGER?0:eb,ej=et.map((e,t)=>{let s=1e3*(e.Duration||0),a=new Date(e.Timestamp).getTime(),n=a-ey,l=n+s,{Body:c,ServiceName:d,id:u,type:h,aliasWith:x}=e,g=`${c}`;try{g="string"==typeof c?c:JSON.stringify(c)}catch(e){console.warn("DBTraceWaterfallChart: Couldn't JSON stringify Body",e)}let f=e.SpanAttributes||{},y=f["http.url"]||f["http.method"],v=f["http.url"],_=y&&v?`${g} ${v}`:g,j=Y&&e.SpanEvents?e.SpanEvents.map(e=>({timestamp:new Date(e.Timestamp).getTime()-ey,name:e.Name,attributes:e.Attributes||{}})):[],S="Error"==e.StatusCode||"error"===e.SeverityText,w=e.StatusCode||e.SeverityText,E="warn"===e.SeverityText,C=o===u;return{id:u,type:h,aliasWith:x,label:(0,r.jsx)("div",{className:`${function(e){let{isError:t,isWarn:s}=e;return t?"text-danger":s?"text-warning":""}({isError:S,isWarn:E})} ${C&&eF().traceTimelineLabelHighlighted} text-truncate cursor-pointer ps-2 ${eF().traceTimelineLabel}`,role:"button",onClick:()=>{i?.({id:u,type:h??"",aliasWith:x})},children:(0,r.jsxs)("div",{className:"d-flex align-items-center",style:{height:24},children:[Array.from({length:e.level}).map((e,t)=>(0,r.jsx)("div",{style:{borderLeft:"1px solid var(--color-border)",marginLeft:7,width:8,minWidth:8,maxWidth:8,flexGrow:1,flexShrink:0,height:"100%"}},t)),(0,r.jsxs)(en.o,{style:{opacity:+(e.children.length>0)},onClick:()=>{Z(u)},children:[K.has(u)?(0,r.jsx)(ec.A,{size:16,className:"me-1 text-muted-hover"}):(0,r.jsx)(ed.A,{size:16,className:"me-1 text-muted-hover"})," "]}),!b&&(0,r.jsx)(k.E,{span:!0,size:"xxs",me:"xs",pt:"2px",children:e.children.length>0?`(${e.children.length})`:""}),(0,r.jsxs)(N.Y,{gap:0,wrap:"nowrap",children:[h===p.GL.Log?(0,r.jsx)(eu.A,{size:14,className:"align-middle me-2","aria-label":"Correlated Log Line"}):null,(0,r.jsxs)(k.E,{size:"xxs",truncate:"end",span:!0,title:`${d}${y&&v?` | ${_}`:""}`,role:"button",children:[d?`${d} | `:"",_]})]})]})}),style:{marginTop:32*(0===t)},isActive:C,events:[{id:u,type:h,aliasWith:x,start:n,end:l,tooltip:`${_} ${s>=0?`took ${s.toFixed(4)}ms`:""} ${w?`| Status: ${w}`:""}${!isNaN(a)?` | Started at ${m(new Date(a),{format:"withMs"})}`:""}`,color:function(e){let{isError:t,isWarn:s,isHighlighted:a}=e;return t?a?(0,e_.sS)():(0,e_.cM)():s?a?(0,e_.qS)():(0,e_.AD)():a?"#A9AFB7":"#6A7077"}({isError:S,isWarn:E,isHighlighted:C}),body:(0,r.jsx)("span",{children:_}),minWidthPerc:1,isError:S,markers:j}]}}),ew=et.findIndex(e=>e.id===o),eE=d/100*window.innerHeight;return(0,r.jsxs)(r.Fragment,{children:[y&&(0,r.jsx)("form",{onSubmit:C(S),children:(0,r.jsxs)(x.a,{style:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",gap:"12px"},children:[(0,r.jsx)(k.E,{size:"xs",children:"Spans filter"}),(0,r.jsx)(eh.A,{tableConnection:(0,ea.VO)(e),placeholder:'Search trace spans w/ Lucene ex. StatusCode:"Error"',language:"lucene",name:"traceWhere",control:w,size:"xs",onSubmit:C(S),"data-testid":"trace-search-input"}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.E,{size:"xs",children:"Logs filter"}),(0,r.jsx)(eh.A,{tableConnection:(0,ea.VO)(t),placeholder:'Search trace logs w/ Lucene ex. SeverityText:"error"',language:"lucene",name:"logWhere",control:w,size:"xs",onSubmit:C(S),"data-testid":"log-search-input"})]})]})}),(0,r.jsxs)(N.Y,{my:"xs",justify:"space-between",children:[(0,r.jsxs)(N.Y,{gap:"md",children:[(0,r.jsxs)(k.E,{size:"xs",children:[eg,","," ",(0,r.jsx)("span",{className:ex?"text-danger":"",children:ef})]}),(0,r.jsx)(er.S,{size:"xs",label:"Show span events",checked:Y,onChange:()=>U(!Y)})]}),(0,r.jsxs)("span",{children:[(0,r.jsxs)(ei.M,{underline:"always",onClick:()=>j(e=>!e),size:"xs",children:[y?"Hide Filters":"Show Filters"," ",b&&"(active)"]}),b&&(0,r.jsx)(ei.M,{underline:"always",onClick:T,size:"xs",ms:"xs",children:"Clear Filters"})]})]}),!F&&!O&&(0,r.jsx)(eD.V,{attributes:B}),(0,r.jsx)("div",{style:{position:"relative",overflow:"hidden",maxHeight:`${eE}px`},children:F?(0,r.jsx)("div",{className:"my-3",children:"Loading Traces..."}):O?(0,r.jsxs)(x.a,{mt:"lg",children:[(0,r.jsx)(k.E,{my:"sm",size:"sm",children:"An error occurred while fetching trace data:"}),(0,r.jsx)(el.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:O.message})]}):null==V?(0,r.jsxs)("div",{children:["An unknown error occurred. ",(0,r.jsx)(em.z,{})]}):0===et.length?(0,r.jsx)("div",{className:"my-3",children:"No matching spans or logs found"}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(eR,{style:{overflowY:"auto",maxHeight:`${eE}px`},scale:1,setScale:()=>{},rowHeight:22,labelWidth:300,onClick:e=>{},onEventClick:e=>{i?.({id:e.id,type:e.type??"",aliasWith:e.aliasWith??[]})},cursors:[],rows:ej,initialScrollRowIndex:ew})})}),(0,r.jsx)(eo.c,{mt:"md",className:eS().resizeYHandle,onMouseDown:u,style:{position:"relative",bottom:0}})]})}let eH=e=>{let t,s,a,n=(0,i.c)(13),{traceSourceId:l,rumSessionId:o,dateRange:c,focusDate:d,serviceName:u,setSubDrawerOpen:m}=e;n[0]!==l?(t={id:l},n[0]=l,n[1]=t):t=n[1];let{data:h}=(0,S.Fo)(t),p=h?.sessionSourceId;n[2]!==p?(s={id:p},n[2]=p,n[3]=s):s=n[3];let{data:x,isLoading:g}=(0,S.Fo)(s);if(!h||!x&&g){let e;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(Y.a,{}),n[4]=e):e=n[4],e}return n[5]!==c||n[6]!==d||n[7]!==o||n[8]!==u||n[9]!==x||n[10]!==m||n[11]!==h?(a=(0,r.jsx)(r.Fragment,{children:x?o&&h?(0,r.jsx)(Z.A,{start:c[0],end:c[1],traceSource:h,session:{serviceName:u},sessionSource:x,rumSessionId:o,setDrawerOpen:m,initialTs:d.getTime()}):(0,r.jsx)("span",{className:"p-3 text-muted",children:"Session ID not found."}):(0,r.jsxs)("div",{className:"m-2 fs-8 p-4",children:["No correlated session source found.",(0,r.jsx)("br",{}),"Go to ",(0,r.jsx)(G(),{href:"/team#sources",children:"Team Settings"})," and update the"," ",(0,r.jsx)("strong",{children:h?.name})," source to include the correlated session source."]})}),n[5]=c,n[6]=d,n[7]=o,n[8]=u,n[9]=x,n[10]=m,n[11]=h,n[12]=a):a=n[12],a};function eW(e){return null===e.parentSpanId&&e.rumSessionId}function eq(e){return e.rumSessionId}var eJ=s(25062),eK=s(22623),eG=s(6892),eY=s(46466),eU=s(57478),eZ=((a=eZ||{}).Overview="overview",a.Parsed="parsed",a);function eX(e){let t,s,a,n,o,c,d,m,h,x,f,y,v,_,j,E,C,A,T,I,R,L,$,M=(0,i.c)(74),{childSourceId:z,traceId:D,dateRange:P,focusDate:F,parentSourceId:O,initialRowHighlightHint:V,"data-testid":B}=e;M[0]!==z?(t={defaultValues:{source:z}},M[0]=z,M[1]=t):t=M[1];let{control:H}=(0,ee.mN)(t);M[2]!==H?(s={control:H,name:"source"},M[2]=H,M[3]=s):s=M[3];let W=(0,ee.FH)(s);M[4]!==W?(a={id:W},M[4]=W,M[5]=a):a=M[5];let{data:K,isLoading:G}=(0,S.Fo)(a);M[6]!==O?(n={id:O},M[6]=O,M[7]=n):n=M[7];let{data:Y,isLoading:U}=(0,S.Fo)(n),Z=Y?.kind===p.GL.Log?Y:K?.kind===p.GL.Log?K:null,X=Y?.kind===p.GL.Trace?Y:K?.kind===p.GL.Trace?K:null;K?.kind===p.GL.Trace||(Y?.kind,p.GL.Trace);let{mutate:Q}=(0,S.sr)();M[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,u.os)(),M[8]=o):o=M[8];let[et,es]=(0,u.ZA)("eventRowWhere",o),er=Y?.traceIdExpression??"";M[9]!==er?(c={defaultValues:{traceIdExpression:er}},M[9]=er,M[10]=c):c=M[10];let{control:ei,handleSubmit:el,setValue:ec}=(0,ee.mN)(c);M[11]!==Y||M[12]!==ec?(d=()=>{Y?.traceIdExpression&&ec("traceIdExpression",Y.traceIdExpression)},M[11]=Y,M[12]=ec,M[13]=d):d=M[13];let ed=Y?.traceIdExpression;M[14]!==ed||M[15]!==ec?(m=[ed,ec],M[14]=ed,M[15]=ec,M[16]=m):m=M[16],(0,l.useEffect)(d,m);let[eu,em]=(0,l.useState)(!1);M[17]!==es?(h=()=>()=>{es(null)},M[17]=es,M[18]=h):h=M[18],M[19]!==es||M[20]!==D?(x=[D,es],M[19]=es,M[20]=D,M[21]=x):x=M[21],(0,l.useEffect)(h,x);let[eh,ep]=(0,l.useState)("overview"),ex=Y?.traceIdExpression,eg=D||"No trace id found for event";M[22]!==ex||M[23]!==eg?(f=(0,r.jsxs)(k.E,{size:"xs",me:"xs",children:[ex,":"," ",eg]}),M[22]=ex,M[23]=eg,M[24]=f):f=M[24],M[25]!==D?(y=null!=D&&(0,r.jsx)(eJ.$,{variant:"subtle",size:"xs",onClick:()=>em(eQ),children:(0,r.jsx)(eG.A,{size:14})}),M[25]=D,M[26]=y):y=M[26],M[27]!==f||M[28]!==y?(v=(0,r.jsxs)(g.s,{align:"center",children:[f,y]}),M[27]=f,M[28]=y,M[29]=v):v=M[29];let ef=Y?.kind===p.GL.Log?"Trace Source":"Correlated Log Source";return M[30]!==ef?(_=(0,r.jsx)(k.E,{size:"sm",children:ef}),M[30]=ef,M[31]=_):_=M[31],M[32]!==H?(j=(0,r.jsx)(eU.W,{control:H,name:"source",size:"xs"}),M[32]=H,M[33]=j):j=M[33],M[34]!==_||M[35]!==j?(E=(0,r.jsxs)(N.Y,{gap:"sm",children:[_,j]}),M[34]=_,M[35]=j,M[36]=E):E=M[36],M[37]!==v||M[38]!==E?(C=(0,r.jsxs)(g.s,{align:"center",justify:"space-between",mb:"sm",children:[v,E]}),M[37]=v,M[38]=E,M[39]=C):C=M[39],M[40]!==Y||M[41]!==O||M[42]!==eu||M[43]!==D||M[44]!==ei||M[45]!==el||M[46]!==Q?(A=(eu||!D)&&null!=O&&(0,r.jsxs)(b.B,{gap:"xs",children:[(0,r.jsx)(k.E,{size:"xs",children:"Trace ID Expression"}),(0,r.jsxs)(g.s,{align:"center",children:[(0,r.jsx)(eY.Z,{tableConnection:(0,ea.VO)(Y),name:"traceIdExpression",placeholder:"Log Trace ID Column (ex. trace_id)",control:ei,size:"xs",parentRef:"u">typeof document?document.body:null}),(0,r.jsx)(eJ.$,{ms:"sm",variant:"primary",onClick:el(e=>{let{traceIdExpression:t}=e;null!=Y&&Q({source:{...Y,traceIdExpression:t}})}),size:"xs",children:"Save"}),(0,r.jsx)(eJ.$,{ms:"sm",variant:"secondary",onClick:()=>em(!1),size:"xs",children:"Cancel"})]})]}),M[40]=Y,M[41]=O,M[42]=eu,M[43]=D,M[44]=ei,M[45]=el,M[46]=Q,M[47]=A):A=M[47],M[48]===Symbol.for("react.memo_cache_sentinel")?(T=(0,r.jsx)(eo.c,{my:"sm"}),M[48]=T):T=M[48],M[49]!==P||M[50]!==et?.id||M[51]!==F||M[52]!==V||M[53]!==Z||M[54]!==es||M[55]!==D||M[56]!==X?(I=X?.kind===p.GL.Trace&&D&&(0,r.jsx)(eB,{traceTableSource:X,logTableSource:Z,traceId:D,dateRange:P,focusDate:F,highlightedRowWhere:et?.id,onClick:es,initialRowHighlightHint:V}),M[49]=P,M[50]=et?.id,M[51]=F,M[52]=V,M[53]=Z,M[54]=es,M[55]=D,M[56]=X,M[57]=I):I=M[57],M[58]!==eh||M[59]!==et||M[60]!==Z||M[61]!==X?(R=null!=X&&null!=et&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.E,{size:"sm",my:"sm",children:"Event Details"}),(0,r.jsx)(w.A,{className:"fs-8 mt-2",items:[{text:"Overview",value:"overview"},{text:"Column Values",value:"parsed"}],activeItem:eh,onClick:e=>ep(e)}),"overview"===eh&&(0,r.jsx)(J.W,{source:et?.type===p.GL.Log&&Z?Z:X,rowId:et?.id,aliasWith:et?.aliasWith}),"parsed"===eh&&(0,r.jsx)(q.dD,{source:et?.type===p.GL.Log&&Z?Z:X,rowId:et?.id,aliasWith:et?.aliasWith})]}),M[58]=eh,M[59]=et,M[60]=Z,M[61]=X,M[62]=R):R=M[62],M[63]!==et||M[64]!==D||M[65]!==X?(L=null!=X&&!et&&D&&(0,r.jsx)(eK.t,{shadow:"xs",p:"xl",mt:"md",children:(0,r.jsx)(en.o,{mih:100,children:(0,r.jsx)(k.E,{size:"sm",children:"Please select a span above to view details."})})}),M[63]=et,M[64]=D,M[65]=X,M[66]=L):L=M[66],M[67]!==B||M[68]!==C||M[69]!==A||M[70]!==I||M[71]!==R||M[72]!==L?($=(0,r.jsxs)("div",{"data-testid":B,children:[C,A,T,I,R,L]}),M[67]=B,M[68]=C,M[69]=A,M[70]=I,M[71]=R,M[72]=L,M[73]=$):$=M[73],$}function eQ(e){return!e}let e0=(0,l.createContext)({});var e1=((n=e1||{}).Overview="overview",n.Parsed="parsed",n.Debug="debug",n.Trace="trace",n.ServiceMap="serviceMap",n.Context="context",n.Replay="replay",n.Infrastructure="infrastructure",n);let e2=({rowId:e,aliasWith:t,source:s,isNestedPanel:a=!1,setSubDrawerOpen:n,onClose:c,breadcrumbPath:h=[],onBreadcrumbClick:f})=>{let b,{data:v,isLoading:_,isSuccess:C}=(0,q.k1)({source:s,rowId:e,aliasWith:t}),{dbSqlRowTableConfig:N}=(0,l.useContext)(e0),k=(0,l.useCallback)(e=>{let t=h.length;if(t>e)c(),f?.(e);else{if(t===e)return;f?.(e)}},[h.length,f,c]),A=(0,l.useMemo)(()=>!!s.resourceAttributesExpression||!!s.eventAttributesExpression,[s.eventAttributesExpression,s.resourceAttributesExpression]),T="trace"===s.kind?"trace":A?"overview":"parsed",[L,$]=(0,u.ZA)("sidePanelTab",(0,u.Oq)(Object.values(e1)).withDefault(T)),[M,z]=(0,l.useState)(T),D=a?z:$,P=a?M:L,F=v?.data?.[0],O=F?.__hdx_timestamp;b=new Date("number"==typeof O?1e3*O:O);let V=(0,S.N8)(s),B=d()(F?.__hdx_body)?F.__hdx_body:F?.__hdx_body!==void 0?JSON.stringify(F.__hdx_body):void 0,H=F?.__hdx_severity_text,K=(0,l.useMemo)(()=>{let e=[];return(s.kind===p.GL.Trace||s.kind===p.GL.Log)&&s.highlightedRowAttributeExpressions&&e.push(...s.highlightedRowAttributeExpressions),s.serviceNameExpression&&e.push({sqlExpression:s.serviceNameExpression}),v?(0,E.N4)(s,e,v.data||[],v.meta||[]):[]},[s,v]),G=(0,l.useMemo)(()=>[(0,o.A)(b,{minutes:-60}),(0,o.A)(b,{minutes:60})],[b]),Y=(0,l.useMemo)(()=>[(0,o.A)(b,{hours:-4}),(0,o.A)(b,{hours:4})],[b]),Z=F?.__hdx_trace_id,X="log"===s.kind?s.traceSourceId:"trace"===s.kind?s.logSourceId:void 0,Q="trace"===s.kind?s.id:s.traceSourceId,ee=Z&&Q,{rumSessionId:et,rumServiceName:es}=(e=>{let t,s,a,n,r=(0,i.c)(42),{sourceId:l,traceId:o,dateRange:c,enabled:d}=e;r[0]!==l?(t={id:l},r[0]=l,r[1]=t):t=r[1];let{data:u}=(0,S.Fo)(t),{getFieldExpression:m}=(0,U.A)(u);e:{let e,t,a,n,i,l,c,d,h;if(!u||!o||!m){s=void 0;break e}let p=`${u.timestampValueExpression}`;r[2]!==p?(e={valueExpression:p,alias:"Timestamp"},r[2]=p,r[3]=e):e=r[3];let x=u.resourceAttributesExpression??"ResourceAttributes";r[4]!==m||r[5]!==x?(t=m(x,"rum.sessionId"),r[4]=m,r[5]=x,r[6]=t):t=r[6];let g=`${t}`;r[7]!==g?(a={valueExpression:g,alias:"rumSessionId"},r[7]=g,r[8]=a):a=r[8];let f=u.resourceAttributesExpression??"ResourceAttributes";r[9]!==m||r[10]!==f?(n=m(f,"service.name"),r[9]=m,r[10]=f,r[11]=n):n=r[11];let b=`${n}`;r[12]!==b?(i={valueExpression:b,alias:"serviceName"},r[12]=b,r[13]=i):i=r[13];let y=`${u.parentSpanIdExpression}`;r[14]!==y?(l={valueExpression:y,alias:"parentSpanId"},r[14]=y,r[15]=l):l=r[15],r[16]!==i||r[17]!==l||r[18]!==e||r[19]!==a?(c=[e,a,i,l],r[16]=i,r[17]=l,r[18]=e,r[19]=a,r[20]=c):c=r[20],r[21]===Symbol.for("react.memo_cache_sentinel")?(d={limit:1e4},r[21]=d):d=r[21];let v=`${u.traceIdExpression} = '${o}'`;r[22]!==u.connection||r[23]!==u.from||r[24]!==u.timestampValueExpression||r[25]!==c||r[26]!==v?(h={select:c,from:u.from,timestampValueExpression:u.timestampValueExpression,limit:d,connection:u.connection,where:v,whereLanguage:"sql"},r[22]=u.connection,r[23]=u.from,r[24]=u.timestampValueExpression,r[25]=c,r[26]=v,r[27]=h):h=r[27],s=h}let h=s,p=void 0!==d&&d&&!!u&&!!h;r[28]!==h||r[29]!==c||r[30]!==p?(a={config:h,dateRangeStartInclusive:!0,dateRange:c,enabled:p},r[28]=h,r[29]=c,r[30]=p,r[31]=a):a=r[31];let{data:x}=eO(a);t:{let e,t,s;r[32]!==x?.data?(e=x?.data||[],r[32]=x?.data,r[33]=e):e=r[33];let a=e;r[34]!==a?(t=a.find(eW),r[34]=a,r[35]=t):t=r[35];let i=t;if(!i){let e;r[36]!==a?(e=a.find(eq),r[36]=a,r[37]=e):e=r[37],i=e}if(i){let e;r[38]!==i.rumSessionId||r[39]!==i.serviceName?(e={rumServiceName:i.serviceName,rumSessionId:i.rumSessionId},r[38]=i.rumSessionId,r[39]=i.serviceName,r[40]=e):e=r[40],n=e;break t}r[41]===Symbol.for("react.memo_cache_sentinel")?(s={rumServiceName:void 0,rumSessionId:void 0},r[41]=s):s=r[41],n=s}return n})({sourceId:Q,traceId:Z,dateRange:G,enabled:null!=e}),ea=(0,l.useMemo)(()=>{try{if(!s?.resourceAttributesExpression||!F)return!1;let e=F.__hdx_resource_attributes;return e?.["k8s.pod.uid"]!=null||e?.["k8s.node.name"]!=null}catch(e){return console.error(e),!1}},[s,F]),en=(0,l.useMemo)(()=>{if(F)return{timestamp:F.__hdx_timestamp,spanId:F.__hdx_span_id,body:F.__hdx_body}},[F]);return _?(0,r.jsx)("div",{className:eF().loadingState,children:"Loading..."}):C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.a,{p:"sm",children:(0,r.jsx)(y.A,{date:b,attributes:K,mainContent:B,mainContentHeader:V,severityText:H,breadcrumbPath:h,onBreadcrumbClick:k})}),(0,r.jsx)(w.A,{"data-testid":"side-panel-tabs",className:"fs-8 mt-2",items:[...A?[{text:"Overview",value:"overview"}]:[],{text:"Column Values",value:"parsed"},{text:"Trace",value:"trace"},...ee?[{text:"Service Map",value:"serviceMap"}]:[],{text:"Surrounding Context",value:"context"},...null!=et?[{text:"Session Replay",value:"replay"}]:[],...ea?[{text:"Infrastructure",value:"infrastructure"}]:[]],activeItem:P,onClick:e=>D(e)}),"overview"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(J.W,{"data-testid":"side-panel-tab-overview",source:s,rowId:e,aliasWith:t,hideHeader:!0})}),"trace"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,r.jsx)(eX,{"data-testid":"side-panel-tab-trace",parentSourceId:s.id,childSourceId:X,traceId:Z,dateRange:G,focusDate:b,initialRowHighlightHint:en})})}),"serviceMap"===P&&ee&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(g.s,{p:"sm",flex:1,children:(0,r.jsx)(I,{traceId:Z,traceTableSourceId:Q,dateRange:G})})}),"parsed"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(q.dD,{"data-testid":"side-panel-tab-parsed",source:s,rowId:e,aliasWith:t})}),"context"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(R.A,{"data-testid":"side-panel-tab-context",source:s,dbSqlRowTableConfig:N,rowData:F,rowId:e,breadcrumbPath:h,onBreadcrumbClick:k})}),"replay"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)("div",{className:"overflow-hidden flex-grow-1",children:(0,r.jsx)(eH,{"data-testid":"side-panel-tab-replay",dateRange:Y,focusDate:b,setSubDrawerOpen:n,traceSourceId:Q,serviceName:es,rumSessionId:et})})}),"infrastructure"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,r.jsx)(W,{"data-testid":"side-panel-tab-infrastructure",source:s,rowData:F,rowId:e})})}),(0,r.jsx)(j.ir,{})]}):(0,r.jsx)("div",{className:eF().loadingState,children:"Error loading row data"})};function e3(e){let t,s,a,n,o,c,d,p,g,b,y,j,S,w=(0,i.c)(39),{onClose:E,rowId:N,aliasWith:k,source:A,isNestedPanel:T,breadcrumbPath:I,onBreadcrumbClick:R}=e;w[0]!==I?(t=void 0===I?[]:I,w[0]=I,w[1]=t):t=w[1];let L=t,$=(0,C.Y)()+10,{size:M,startResize:z}=(0,v.A)(80),[D,P]=(0,l.useState)(!1);(0,l.useContext)(e0),w[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,u.Oq)(Object.values(e1)),w[2]=s):s=w[2];let[,F]=(0,u.ZA)("tab",s);w[3]===Symbol.for("react.memo_cache_sentinel")?(a={},w[3]=a):a=w[3];let{clear:O}=_(a);w[4]!==O||w[5]!==T||w[6]!==E||w[7]!==F?(n=()=>{T||F(null),O(),E()},w[4]=O,w[5]=T,w[6]=E,w[7]=F,w[8]=n):n=w[8];let V=n;w[9]===Symbol.for("react.memo_cache_sentinel")?(o=["esc"],w[9]=o):o=w[9];let B=!1===D;w[10]!==B?(c={enabled:B},w[10]=B,w[11]=c):c=w[11],(0,h.vC)(o,V,c);let H=null!=N,W=!T;w[12]!==V||w[13]!==D?(d=()=>{D||V()},w[12]=V,w[13]=D,w[14]=d):d=w[14];let q=`${M}vw`;return w[15]===Symbol.for("react.memo_cache_sentinel")?(p={body:{padding:"0",height:"100vh"}},w[15]=p):p=w[15],w[16]!==z?(g=(0,r.jsx)(x.a,{className:eF().panelDragBar,onMouseDown:z}),w[16]=z,w[17]=g):g=w[17],w[18]!==V||w[19]!==k||w[20]!==L||w[21]!==T||w[22]!==R||w[23]!==N||w[24]!==A?(b=(0,r.jsx)(m.ErrorBoundary,{fallbackRender:e4,children:(0,r.jsx)(e2,{source:A,rowId:N,aliasWith:k,onClose:V,isNestedPanel:T,breadcrumbPath:L,setSubDrawerOpen:P,onBreadcrumbClick:R})}),w[18]=V,w[19]=k,w[20]=L,w[21]=T,w[22]=R,w[23]=N,w[24]=A,w[25]=b):b=w[25],w[26]!==g||w[27]!==b?(y=(0,r.jsxs)("div",{className:eF().panel,"data-testid":"row-side-panel",children:[g,b]}),w[26]=g,w[27]=b,w[28]=y):y=w[28],w[29]!==$||w[30]!==y?(j=(0,r.jsx)(C.S.Provider,{value:$,children:y}),w[29]=$,w[30]=y,w[31]=j):j=w[31],w[32]!==$||w[33]!==W||w[34]!==d||w[35]!==q||w[36]!==j||w[37]!==H?(S=(0,r.jsx)(f._,{opened:H,withCloseButton:!1,withOverlay:W,onClose:d,position:"right",size:q,styles:p,zIndex:$,children:j}),w[32]=$,w[33]=W,w[34]=d,w[35]=q,w[36]=j,w[37]=H,w[38]=S):S=w[38],S}function e4(e){return(0,r.jsxs)(b.B,{children:[(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),(0,r.jsx)("div",{className:"px-2 py-1 m-2 fs-7 font-monospace bg-body p-4",children:e?.error?.message})]})}},54167:(e,t,s)=>{"use strict";var a=s(31832);s(5062),s(75131),s(17769),a.N,a.M,a.P,t.oU=a.Q,a.O,a.L},55933:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/clickhouse",function(){return s(76115)}])},57030:(e,t,s)=>{"use strict";s.d(t,{A:()=>eE});var a=s(6029),n=s(75155),r=s(55729),i=s(75828),l=s.n(i),o=s(47687),c=s.n(o),d=s(41038),u=s(1909),m=s(3145),h=s(95991),p=s(90124),x=s(63085),g=s(76013),f=s(3635),b=s(25062),y=s(92789),v=s(79621),_=s(10822),j=s(62118),S=s(97684),w=s(39614),E=s(81244),C=s(12853),N=s(50374),k=s(17273),A=s(40147),T=s(66692),I=s(86823),R=s(97039),L=s(61441),$=s(10708),M=s(56795),z=s(61411),D=s(81055),P=s(90515),F=s(45172),O=s(94502),V=s(80925),B=s(92917),H=s(81408),W=s.n(H);function q(e){return Math.max(e.getCurrentTime(),0)}let J=(0,r.memo)(({url:e})=>{let t,s;try{t=new URL(e)}catch{}try{let e=new URLSearchParams(t?.search??"");for(let[t,a]of(s=[],e.entries()))s.push({key:t,value:a})}catch{}return(0,a.jsxs)(R.j,{shadow:"md",position:"bottom-start",children:[(0,a.jsx)(R.j.Target,{children:(0,a.jsx)("div",{className:W().playerHeaderUrl,children:e||"Session Player"})}),e&&(0,a.jsx)(R.j.Dropdown,{children:(0,a.jsxs)("table",{className:"table fs-8 mb-0",children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)($.A,{size:14})}),(0,a.jsx)("td",{children:t?.host})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(M.A,{size:14})}),(0,a.jsx)("td",{children:t?.pathname})]}),s&&s.length>0&&s.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("strong",{children:e.key})}),(0,a.jsx)("td",{children:e.value})]},e.key))]})})]})});function K({config:{dateRange:e,serviceName:t,sessionId:s,sourceId:n},focus:i,setPlayerTime:o,playerState:d,setPlayerState:u,playerSpeed:m,skipInactive:h,setPlayerStartTimestamp:p,setPlayerEndTimestamp:x,setPlayerFullWidth:b,playerFullWidth:y,resizeKey:v,getSessionSourceFieldExpression:_}){let j=(0,B.uy)(),S=(0,r.useRef)(null),w=(0,r.useRef)(null),E=(0,r.useRef)(null),C=(0,r.useRef)([]),N=(0,r.useRef)(0),[k,A]=(0,r.useState)(0),R=(0,r.useRef)(c()(A,100,{leading:!0,trailing:!0})),[$,M]=(0,r.useState)(!1),[H,K]=(0,r.useState)(!1),G="",{isFetching:Y,abort:U}=(0,V.S)({serviceName:t,sessionId:s,sourceId:n,startDate:e?.[0]??new Date,endDate:e?.[1]??new Date,limit:1e6,onEvent:e=>{try{let{b:t,ck:s,tcks:a}=e;if(G+=t,!s||s===a){let e=JSON.parse(G);null!=E.current?E.current.addEvent(e):(null!=p&&0===C.current.length&&p(e.timestamp),C.current.push(e)),R.current(e.timestamp),N.current=e.timestamp,G=""}}catch(e){j&&console.error(e),G=""}C.current.length>5&&M(!0)},onEnd:()=>{M(!0),K(!0),null!=x&&(null!=E.current?x(N.current??0):C.current.length>0&&x(C.current[C.current.length-1].timestamp??0))},getSessionSourceFieldExpression:_},{keepPreviousData:!0,shouldAbortPendingRequest:!0}),[Z,X]=(0,r.useState)(""),Q=(0,r.useCallback)(()=>{if(null!=E.current)try{E.current.play(q(E.current))}catch(e){console.error(e)}},[E]),ee=(0,r.useCallback)(e=>{if(null!=E.current)try{E.current.pause(e)}catch(e){console.error(e)}},[E]);(0,T.vC)(["space"],()=>{"playing"===d?u("paused"):"paused"===d&&u("playing")});let et=(0,r.useRef)(o);(0,r.useEffect)(()=>{et.current=o},[o]);let es=(0,r.useRef)(0),ea=(0,r.useCallback)(()=>{null!=E.current&&E.current.service.state.matches("playing")&&et.current(Math.round(E.current.getMetaData().startTime+q(E.current))),es.current=requestAnimationFrame(ea)},[]);(0,r.useEffect)(()=>(es.current=requestAnimationFrame(ea),()=>{cancelAnimationFrame(es.current)}),[ea]),(0,r.useEffect)(()=>{null!=E.current&&("playing"===d?Q():"paused"===d&&ee())},[d,Q,ee]),(0,r.useEffect)(()=>{null!=E.current&&("playing"===d?(ee(),E.current?.setConfig({speed:m,skipInactive:h}),Q()):"paused"===d&&E.current?.setConfig({speed:m,skipInactive:h}))},[d,m,h,ee,Q]);let en=(0,r.useCallback)(()=>{null!=S.current&&null!=w.current&&(w.current.style.transform="scale(0.0001)",window.requestAnimationFrame(()=>{if(null==S.current||null==w.current)return;let e=S.current.getBoundingClientRect(),t=E?.current?.iframe?.offsetWidth??1280,s=E?.current?.iframe?.offsetHeight??720,a=e.width/t,n=e.height/s;w.current.style.transform=`scale(${Math.min(a,n)})`}))},[S,w]);(0,r.useEffect)(()=>(window.addEventListener("resize",en),()=>window.removeEventListener("resize",en)),[en]),(0,r.useEffect)(()=>{en()},[v,en]);let[er,ei]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C.current.length<2||null==w.current||null!=E.current||(E.current=new I.B(C.current,{root:w.current,mouseTail:!0,pauseAnimation:!1,showWarning:j,skipInactive:!0}),ei(!0),j&&(window.__hdx_replayer=E.current),E.current.enableInteract(),E.current.on("event-cast",e=>{try{(e?.type===3&&e?.data?.source===4||4===e.type)&&setTimeout(()=>{en()},0),e?.type===4&&X(e.data.href)}catch(e){j&&console.error(e)}}),"playing"===d&&E.current.getMetaData().endTime>(i?.ts??0)&&(null!=i&&ee(i.ts-E.current.getMetaData().startTime),Q()),setTimeout(()=>{en()},0))},[en,i,ee,$,d,Q,j]),(0,r.useEffect)(()=>{$&&er&&!(k<(i?.ts?i.ts+1e3:1/0))&&i?.setBy!=="player"&&null!=E.current&&(ee(i?.ts==null?0:i?.ts-E.current.getMetaData().startTime),en(),"playing"===d&&Q())},[i,ee,u,d,Q,$,er,en,k]),(0,r.useEffect)(()=>()=>{null!=E.current&&(E.current?.destroy(),E.current=null),U()},[U]);let el=!1===$&&Y,eo=!1===H&&(E.current?.getMetaData()?.endTime??0)<(i?.ts??0);return(0,r.useEffect)(()=>{null!=E.current&&null!=i&&E.current.getMetaData().endTime>i.ts&&"playing"===d&&E.current?.service?.state?.matches("paused")&&(ee(i.ts-E.current.getMetaData().startTime),Q())},[k,i,d,ee,Q]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:W().playerHeader,children:[(0,a.jsx)(g.M,{onClick:()=>b(!y),size:"sm",color:"gray",children:y?(0,a.jsx)(z.A,{size:14}):(0,a.jsx)(D.A,{size:14})}),(0,a.jsx)(L.i,{value:Z,children:({copied:e,copy:t})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J,{url:Z}),(0,a.jsx)(g.M,{onClick:t,title:"Copy URL",variant:"secondary",size:"sm",children:e?(0,a.jsx)(P.A,{size:14}):(0,a.jsx)(F.A,{size:14})})]})})]}),(0,a.jsxs)("div",{className:W().playerContainer,children:[el||eo?(0,a.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[(0,a.jsx)(O.A,{className:"spin-animate",size:14}),eo?"Buffering to time...":"Loading replay..."]}):H&&null==E.current?(0,a.jsx)("div",{className:"text-center",children:"No replay available for this session, most likely due to this session starting and ending in a background tab."}):null,(0,a.jsx)("div",{ref:S,className:l()(W().domPlayerWrapper,"overflow-hidden",{"d-none":el||eo,started:(E.current?.getCurrentTime()??0)>0,[W().domPlayerWrapperPaused]:"paused"===d}),children:(0,a.jsx)("div",{className:"player rr-block",ref:w})})]})]})}var G=s(831),Y=s.n(G),U=s(4308),Z=s(91021),X=s(29766);let Q=X.Ay.object({body:X.Ay.string().nullish(),component:X.Ay.string().nullish(),durationInMs:X.Ay.number(),"error.message":X.Ay.string().nullish(),"http.method":X.Ay.string().nullish(),"http.status_code":X.Ay.string().nullish(),"http.url":X.Ay.string().nullish(),id:X.Ay.string(),"location.href":X.Ay.string().nullish(),"otel.library.name":X.Ay.string(),parent_span_id:X.Ay.string(),severity_text:X.Ay.string(),span_id:X.Ay.string(),span_name:X.Ay.string(),timestamp:X.Ay.string(),trace_id:X.Ay.string(),type:X.Ay.string().nullish()});var ee=s(9953),et=s(7565),es=s(2326),ea=s.n(es);let en=e=>{let t,s,i,l,o,c,d,u=(0,n.c)(28),{min:m,max:h,value:p,markers:g,playerState:f,onChange:b,setPlayerState:y}=e,v=(0,et.a)();u[0]!==v||u[1]!==m?(t=e=>{let t=Math.max(e-m,0),s=Math.floor(t/1e3/60),a=Math.floor(t/1e3%60),n=`${s}:${a<10?"0":""}${a}`,r=v(e,{format:"short"});return`${n} at ${r}`},u[0]=v,u[1]=m,u[2]=t):t=u[2];let _=t;u[3]!==g||u[4]!==h||u[5]!==m||u[6]!==b?(s=g?.map(e=>(0,a.jsx)(x.m,{color:e.isError?"red":"gray",label:(0,B.EJ)(e?.description??"",240,"...",/\n/),position:"top",withArrow:!0,children:(0,a.jsx)("div",{className:ea().markerDot,style:{backgroundColor:e.isSuccess?"var(--color-text-success)":e.isError?"var(--color-text-danger)":"var(--color-text-muted)",left:`${(e.ts-m)/(h-m)*100}%`},onClick:()=>b(e.ts)})},e.id)),u[3]=g,u[4]=h,u[5]=m,u[6]=b,u[7]=s):s=u[7];let j=s,[S,w]=r.useState(f);u[8]!==f||u[9]!==y?(i=()=>{w(f),y("paused")},u[8]=f,u[9]=y,u[10]=i):i=u[10];let E=i;u[11]!==S||u[12]!==y?(l=()=>{y(S)},u[11]=S,u[12]=y,u[13]=l):l=u[13];let C=l;u[14]!==j?(o=(0,a.jsx)("div",{className:ea().markers,children:j}),u[14]=j,u[15]=o):o=u[15];let N="playing"===f?"green":"gray",k=p||m;return u[16]!==E||u[17]!==C||u[18]!==h||u[19]!==m||u[20]!==b||u[21]!==N||u[22]!==k||u[23]!==_?(c=(0,a.jsx)(ee.A,{color:N,size:"sm",min:m,max:h,value:k,step:1e3,label:_,onChange:b,onMouseDown:E,onMouseUp:C}),u[16]=E,u[17]=C,u[18]=h,u[19]=m,u[20]=b,u[21]=N,u[22]=k,u[23]=_,u[24]=c):c=u[24],u[25]!==o||u[26]!==c?(d=(0,a.jsxs)("div",{className:ea().wrapper,children:[o,c]}),u[25]=o,u[26]=c,u[27]=d):d=u[27],d};function er(e){let{timestamp:t,durationInMs:s}=e,a=new Date(t).getTime(),n=new Date(a).getTime()+s;return{...e,startOffset:a,endOffset:n}}function ei(e){return e.data}function el(e){return e.success}function eo(e){return Q.safeParse(e)}var ec=s(34834),ed=s(67214),eu=s(53993),em=s(91104),eh=s(54396),ep=s(56906),ex=s(69986),eg=s(98632),ef=s(34027),eb=s(21440),ey=s(70727);let ev={navigation:(0,a.jsx)(eh.A,{size:14}),chat:(0,a.jsx)(ep.A,{size:14}),network:(0,a.jsx)(ex.A,{size:14}),custom:(0,a.jsx)(eg.A,{size:14})},e_=r.forwardRef((e,t)=>{let s,r,i,o,c,d,u,m,h,p,x=(0,n.c)(30),{dataIndex:g,event:f,isHighlighted:b,onClick:y,onTimeClick:v}=e;return x[0]!==f.isError||x[1]!==f.isSuccess||x[2]!==b?(s=l()(W().eventRow,{[W().eventRowError]:f.isError,[W().eventRowSuccess]:f.isSuccess,[W().eventRowHighlighted]:b}),x[0]=f.isError,x[1]=f.isSuccess,x[2]=b,x[3]=s):s=x[3],x[4]!==f.eventSource?(r=ev[f.eventSource]||(0,a.jsx)(ef.A,{size:14}),x[4]=f.eventSource,x[5]=r):r=x[5],x[6]!==r?(i=(0,a.jsx)("div",{className:W().eventRowIcon,children:r}),x[6]=r,x[7]=i):i=x[7],x[8]!==f.duration?(o=f.duration>0&&(0,a.jsxs)("span",{children:[f.duration,"ms"]}),x[8]=f.duration,x[9]=o):o=x[9],x[10]!==f.title||x[11]!==o?(c=(0,a.jsxs)("div",{className:W().eventRowTitle,children:[f.title," ",o]}),x[10]=f.title,x[11]=o,x[12]=c):c=x[12],x[13]!==f.description?(d=(0,a.jsx)("div",{className:W().eventRowDescription,title:f.description,children:f.description}),x[13]=f.description,x[14]=d):d=x[14],x[15]!==y||x[16]!==c||x[17]!==d?(u=(0,a.jsxs)("div",{className:W().eventRowContent,onClick:y,children:[c,d]}),x[15]=y,x[16]=c,x[17]=d,x[18]=u):u=x[18],x[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsx)(j.A,{size:12,className:"me-1"}),x[19]=m):m=x[19],x[20]!==f.formattedTimestamp||x[21]!==v?(h=(0,a.jsxs)("div",{className:W().eventRowTimestamp,onClick:v,children:[m,f.formattedTimestamp]}),x[20]=f.formattedTimestamp,x[21]=v,x[22]=h):h=x[22],x[23]!==g||x[24]!==t||x[25]!==s||x[26]!==i||x[27]!==u||x[28]!==h?(p=(0,a.jsxs)("div",{"data-index":g,ref:t,className:s,children:[i,u,h]}),x[23]=g,x[24]=t,x[25]=s,x[26]=i,x[27]=u,x[28]=h,x[29]=p):p=x[29],p}),ej=({queriedConfig:e,aliasMap:t,onClick:s,onTimeClick:n,focus:i,minTs:l,showRelativeTime:o,eventsFollowPlayerPosition:c})=>{let{data:d,isLoading:u}=(0,Z.HD)(e,{placeholderData:e=>e,queryKey:["SessionEventList",e]}),m=(0,et.a)(),h=r.useMemo(()=>d?.data?.map(e=>Q.safeParse(e)).filter(e=>e.success).map(e=>e.data)??[],[d?.data]),p=(0,ey.Ay)({meta:d?.meta,aliasMap:t}),x=r.useMemo(()=>h.map(e=>{let{timestamp:t,durationInMs:s}=e,a=new Date(t).getTime(),n=new Date(a).getTime()+s,r=e["http.url"]??"",i=Number(e["http.status_code"]??""),c=e["http.method"]??"",d=(0,B.Up)(r),u=""!=c&&null!=c&&null!=r&&""!=r,h=e["error.message"],p=e.body??"",x=e.component,g=e.span_name,f=e["location.href"]??"",b=e["otel.library.name"],y=(0,B.Up)(f),v="custom-action"===b,_="routeChange"===g||"documentLoad"===g,j=e.severity_text?.toLowerCase()==="error"||"error"===x||i>499;return{id:e.id,row:e,isError:j,isSuccess:!j&&i<400&&i>99,eventSource:_?"navigation":u?"network":v?"custom":"intercom.onShow"===g?"chat":"log",title:_?"Navigated":"console.error"===g?"console.error":"console.log"===g?"console.log":"console.warn"===g?"console.warn":r.length>0?`${i} ${c}`:"intercom.onShow"===g?"Intercom Chat Opened":v||"console"===x?g:"console.error",description:_?y:null!=h&&h.length>0?h:"console"===x?p??"":r.length>0?d:"",timestamp:new Date(a),formattedTimestamp:o?(0,B.ax)(a-l):m(a,{format:"time"}),duration:n-a}})??[],[h,o,l,m]),g=r.useRef(null),f=(0,eb.Te)({count:x.length,getScrollElement:()=>g.current,estimateSize:()=>36}),b=(0,em.D)(x.findIndex(e=>e.timestamp.getTime()>=(i?.ts??0)),500);return(r.useEffect(()=>{f&&b>=0&&c&&f.scrollToIndex(b,{align:"center"})},[b,c,f]),u)?(0,a.jsxs)(ec.B,{p:"sm",gap:"xs",children:[(0,a.jsx)(ed.E,{height:36}),(0,a.jsx)(ed.E,{height:36}),(0,a.jsx)(ed.E,{height:36})]}):(0,a.jsx)(eu.F,{h:"100%",scrollbarSize:4,viewportRef:g,children:(0,a.jsx)("div",{className:W().eventListContainer,children:(0,a.jsx)("div",{style:{height:`${f.getTotalSize()}px`,width:"100%",position:"relative"},children:f.getVirtualItems().map(e=>{let t=x[e.index];return(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},children:(0,a.jsx)(e_,{event:t,dataIndex:e.index,isHighlighted:b===e.index,ref:f.measureElement,onClick:()=>s(p(t.row)),onTimeClick:()=>n(t.timestamp.getTime())})},e.key)})})})})},eS=(0,r.memo)(function(e){let t,s,r,i,l,o=(0,n.c)(18),{playerState:c,setPlayerState:d,setFocus:u,playbackRange:m,focus:h,queriedConfig:p}=e,x=m[0].getTime(),g=m[1].getTime(),f=1e3*Math.ceil(m[1].getTime()/1e3),b=1e3*Math.floor(m[0].getTime()/1e3);o[0]!==p?(t={placeholderData:U.rX,queryKey:["PlayBar",p]},o[0]=p,o[1]=t):t=o[1];let{data:y}=(0,Z.HD)(p,t);y?.data,o[2]!==y?.data?(s=y?.data?.map(eo).filter(el).map(ei)??[],o[2]=y?.data,o[3]=s):s=o[3];let v=s;o[4]!==v||o[5]!==g||o[6]!==x?(r=Y()(v.map(er).filter(e=>{let{startOffset:t}=e;return t>=x&&t<=g}).map(e=>{let t=e.span_name,s=e["location.href"]??"",a=(0,B.Up)(s),n=e["error.message"]??"",r=e["http.url"]??"",i=Number(e["http.status_code"]??""),l=e["http.method"]??"",o=(0,B.Up)(r),c=e.severity_text?.toLowerCase()==="error"||"error"===e.component||"console"===e.component||i>=399;return{id:e.id,ts:e.startOffset,percentage:Math.round((e.startOffset-x)/(g-x)*100),description:"routeChange"===t||"documentLoad"===t?`Navigated to ${a}`:r.length>0?`${i} ${l}${r.length>0?` ${o}`:""}`:null!=n&&n.length>0?n:"intercom.onShow"===t?"Intercom Chat Opened":e.body??"",isError:c,isSuccess:!c&&i<400&&i>99}})??[],"percentage"),o[4]=v,o[5]=g,o[6]=x,o[7]=r):r=o[7];let _=r,j=h?.ts;return o[8]!==u?(i=e=>{u({ts:e,setBy:"slider"})},o[8]=u,o[9]=i):i=o[9],o[10]!==_||o[11]!==f||o[12]!==b||o[13]!==c||o[14]!==d||o[15]!==j||o[16]!==i?(l=(0,a.jsx)(en,{markers:_,min:b,max:f,value:j,onChange:i,setPlayerState:d,playerState:c}),o[10]=_,o[11]=f,o[12]=b,o[13]=c,o[14]=d,o[15]=j,o[16]=i,o[17]=l):l=o[17],l});function ew(e,t){let{valueExpression:s,alias:a}=t;return e[a]=s,e}function eE(e){let t,s,i,o,T,I,R,L,$,M,z,D,P,F,O,V,H,q,J,G,Y,U,Z,X,Q,ee,es,ea,en,er,ei,el,eo,ec,ed,eu,em,eh,ep,ex,eg,ef,eb,ey,ev,e_,eE,eN,ek,eA,eT,eI,eR,eL,e$,eM,ez,eD,eP,eF,eO,eV,eB,eH,eW,eq,eJ,eK,eG,eY=(0,n.c)(197),{traceSource:eU,sessionSource:eZ,session:eX,setDrawerOpen:eQ,rumSessionId:e0,start:e1,end:e2,initialTs:e3,whereLanguage:e4,onLanguageChange:e5}=e,e6=void 0===e4?"lucene":e4,[e7,e8]=(0,r.useState)(void 0);eY[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],eY[0]=t):t=eY[0];let[e9,te]=(0,r.useState)(t);eY[1]===Symbol.for("react.memo_cache_sentinel")?(s=d.GJ.withOptions({history:"replace"}),eY[1]=s):s=eY[1];let[tt,ts]=(0,d.ZA)("ts",s),ta=(0,B.ZC)(tt);eY[2]!==e3?(i=null!=e3?{ts:e3,setBy:"parent"}:void 0,eY[2]=e3,eY[3]=i):i=eY[3];let[tn,tr]=(0,r.useState)(i);eY[4]!==ta||eY[5]!==tt?(o=()=>{null==ta&&null!=tt&&tr({ts:tt,setBy:"url"})},T=[ta,tt],eY[4]=ta,eY[5]=tt,eY[6]=o,eY[7]=T):(o=eY[6],T=eY[7]),(0,r.useEffect)(o,T),eY[8]!==ts?(I=c()(async e=>{ts(e)},1e3),eY[8]=ts,eY[9]=I):I=eY[9];let ti=(0,r.useRef)(I).current;eY[10]!==ts?(R=()=>()=>{ts(null)},L=[ts],eY[10]=ts,eY[11]=R,eY[12]=L):(R=eY[11],L=eY[12]),(0,r.useEffect)(R,L),eY[13]!==ts?($=e=>{"player"===e.setBy?ti(e.ts):ts(e.ts),tr(e)},eY[13]=ts,eY[14]=$):$=eY[14];let tl=$,[to,tc]=(0,r.useState)("paused"),[td,tu]=(0,r.useState)(void 0);eY[15]===Symbol.for("react.memo_cache_sentinel")?(M={history:"push"},eY[15]=M):M=eY[15];let[tm,th]=(0,d.ZA)("session_q",M);eY[16]!==td||eY[17]!==tm?(z=()=>{null!=tm&&null==td&&tu(tm)},D=[tm,td],eY[16]=td,eY[17]=tm,eY[18]=z,eY[19]=D):(z=eY[18],D=eY[19]),(0,r.useEffect)(z,D);let tp=tm??"";eY[20]!==th?(P=()=>()=>{th(null,{history:"replace"})},F=[th],eY[20]=th,eY[21]=P,eY[22]=F):(P=eY[21],F=eY[22]),(0,r.useEffect)(P,F);let[tx,tg]=(0,r.useState)("highlighted"),[tf,tb]=(0,B.Mj)("hdx-session-subpanel-show-relative-time",!1),[ty,tv]=(0,B.Mj)("hdx-session-subpanel-player-speed",1),[t_,tj]=(0,B.Mj)("hdx-session-subpanel-skip-inactive",!0),[tS,tw]=(0,B.Mj)("hdx-session-subpanel-events-follow-player-position",!0),[tE,tC]=(0,r.useState)(e1.getTime()+144e5),[tN,tk]=(0,r.useState)(e2.getTime()-144e5);eY[23]!==tE?(O=new Date(tE),eY[23]=tE,eY[24]=O):O=eY[24],eY[25]!==tN?(V=new Date(tN),eY[25]=tN,eY[26]=V):V=eY[26],eY[27]!==O||eY[28]!==V?(H=[O,V],eY[27]=O,eY[28]=V,eY[29]=H):H=eY[29];let tA=H,{getFieldExpression:tT}=(0,A.A)(eZ);eY[30]!==e2||eY[31]!==e0||eY[32]!==tp||eY[33]!==e1||eY[34]!==tx||eY[35]!==eU||eY[36]!==e6?(q={traceSource:eU,rumSessionId:e0,where:tp,whereLanguage:e6,start:e1,end:e2,tab:tx},eY[30]=e2,eY[31]=e0,eY[32]=tp,eY[33]=e1,eY[34]=tx,eY[35]=eU,eY[36]=e6,eY[37]=q):q=eY[37];let{eventsConfig:tI,aliasMap:tR}=function(e){let t,s,a,r,i,l,o=(0,n.c)(96),{traceSource:c,rumSessionId:d,where:u,whereLanguage:m,start:h,end:p,tab:x}=e,{getFieldExpression:g}=(0,A.A)(c);e:{let e,s,a,n,r,i,l,d,u,m,h,p,x,f,b,y,v,_,j,S,w,E,C,N,k;if(!g){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}let A=c.eventAttributesExpression??"SpanAttributes";o[1]!==g||o[2]!==A?(e=g(A,"message"),o[1]=g,o[2]=A,o[3]=e):e=o[3];let T=`${e}`;o[4]!==T?(s={valueExpression:T,alias:"body"},o[4]=T,o[5]=s):s=o[5];let I=c.eventAttributesExpression??"SpanAttributes";o[6]!==g||o[7]!==I?(a=g(I,"component"),o[6]=g,o[7]=I,o[8]=a):a=o[8];let R=`${a}`;o[9]!==R?(n={valueExpression:R,alias:"component"},o[9]=R,o[10]=n):n=o[10];let L=`toFloat64OrZero(toString(${c.durationExpression})) * pow(10, 3) / pow(10, toInt8OrZero(toString(${c.durationPrecision})))`;o[11]!==L?(r={valueExpression:L,alias:"durationInMs"},o[11]=L,o[12]=r):r=o[12];let $=c.eventAttributesExpression??"SpanAttributes";o[13]!==g||o[14]!==$?(i=g($,"error.message"),o[13]=g,o[14]=$,o[15]=i):i=o[15];let M=`${i}`;o[16]!==M?(l={valueExpression:M,alias:"error.message"},o[16]=M,o[17]=l):l=o[17];let z=c.eventAttributesExpression??"SpanAttributes";o[18]!==g||o[19]!==z?(d=g(z,"http.method"),o[18]=g,o[19]=z,o[20]=d):d=o[20];let D=`${d}`;o[21]!==D?(u={valueExpression:D,alias:"http.method"},o[21]=D,o[22]=u):u=o[22];let P=c.eventAttributesExpression??"SpanAttributes";o[23]!==g||o[24]!==P?(m=g(P,"http.status_code"),o[23]=g,o[24]=P,o[25]=m):m=o[25];let F=`${m}`;o[26]!==F?(h={valueExpression:F,alias:"http.status_code"},o[26]=F,o[27]=h):h=o[27];let O=c.eventAttributesExpression??"SpanAttributes";o[28]!==g||o[29]!==O?(p=g(O,"http.url"),o[28]=g,o[29]=O,o[30]=p):p=o[30];let V=`${p}`;o[31]!==V?(x={valueExpression:V,alias:"http.url"},o[31]=V,o[32]=x):x=o[32];let B=`toString(cityHash64(${c.traceIdExpression}, ${c.parentSpanIdExpression}, ${c.spanIdExpression}))`;o[33]!==B?(f={valueExpression:B,alias:"id"},o[33]=B,o[34]=f):f=o[34];let H=c.eventAttributesExpression??"SpanAttributes";o[35]!==g||o[36]!==H?(b=g(H,"location.href"),o[35]=g,o[36]=H,o[37]=b):b=o[37];let W=`${b}`;o[38]!==W?(y={valueExpression:W,alias:"location.href"},o[38]=W,o[39]=y):y=o[39],o[40]===Symbol.for("react.memo_cache_sentinel")?(v={valueExpression:"ScopeName",alias:"otel.library.name"},o[40]=v):v=o[40];let q=`${c.parentSpanIdExpression}`;o[41]!==q?(_={valueExpression:q,alias:"parent_span_id"},o[41]=q,o[42]=_):_=o[42];let J=`${c.statusCodeExpression}`;o[43]!==J?(j={valueExpression:J,alias:"severity_text"},o[43]=J,o[44]=j):j=o[44];let K=`${c.spanIdExpression}`;o[45]!==K?(S={valueExpression:K,alias:"span_id"},o[45]=K,o[46]=S):S=o[46];let G=`${c.spanNameExpression}`;o[47]!==G?(w={valueExpression:G,alias:"span_name"},o[47]=G,o[48]=w):w=o[48];let Y=`${c.timestampValueExpression}`;o[49]!==Y?(E={valueExpression:Y,alias:"timestamp"},o[49]=Y,o[50]=E):E=o[50];let U=`${c.traceIdExpression}`;o[51]!==U?(C={valueExpression:U,alias:"trace_id"},o[51]=U,o[52]=C):C=o[52],o[53]===Symbol.for("react.memo_cache_sentinel")?(N={valueExpression:"CAST('span', 'String')",alias:"type"},o[53]=N):N=o[53],o[54]!==r||o[55]!==l||o[56]!==u||o[57]!==h||o[58]!==x||o[59]!==f||o[60]!==y||o[61]!==_||o[62]!==j||o[63]!==S||o[64]!==w||o[65]!==E||o[66]!==C||o[67]!==s||o[68]!==n?(k=[s,n,r,l,u,h,x,f,y,v,_,j,S,w,E,C,N],o[54]=r,o[55]=l,o[56]=u,o[57]=h,o[58]=x,o[59]=f,o[60]=y,o[61]=_,o[62]=j,o[63]=S,o[64]=w,o[65]=E,o[66]=C,o[67]=s,o[68]=n,o[69]=k):k=o[69],t=k}let f=t,b=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:>299 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[70]!==b?(s={type:"lucene",condition:b},o[70]=b,o[71]=s):s=o[71];let y=s;t:{let e;if(!g){a=void 0;break t}let t=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:* 
      OR ${c.eventAttributesExpression}.component:"console" 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[72]!==t?(e={type:"lucene",condition:t},o[72]=t,o[73]=e):e=o[73],a=e}let v=a;s:{let e,t,s,a;if(!g||!f||!v){r=void 0;break s}o[74]!==p||o[75]!==h?(e=[h,p],o[74]=p,o[75]=h,o[76]=e):e=o[76];let n=`${c.timestampValueExpression} ASC`;o[77]===Symbol.for("react.memo_cache_sentinel")?(t={limit:4e3,offset:0},o[77]=t):t=o[77];let i="highlighted"===x?y:v;o[78]!==i?(s=[i],o[78]=i,o[79]=s):s=o[79],o[80]!==f||o[81]!==s||o[82]!==e||o[83]!==n||o[84]!==c.connection||o[85]!==c.from||o[86]!==c.implicitColumnExpression||o[87]!==c.timestampValueExpression||o[88]!==u||o[89]!==m?(a={select:f,from:c.from,dateRange:e,whereLanguage:m,where:u,timestampValueExpression:c.timestampValueExpression,implicitColumnExpression:c.implicitColumnExpression,connection:c.connection,orderBy:n,limit:t,filters:s},o[80]=f,o[81]=s,o[82]=e,o[83]=n,o[84]=c.connection,o[85]=c.from,o[86]=c.implicitColumnExpression,o[87]=c.timestampValueExpression,o[88]=u,o[89]=m,o[90]=a):a=o[90],r=a}let _=r;a:{let e;if(!g){i=void 0;break a}o[91]!==f?(e=f.reduce(ew,{}),o[91]=f,o[92]=e):e=o[92],i=e}let j=i;return o[93]!==j||o[94]!==_?(l={eventsConfig:_,aliasMap:j},o[93]=j,o[94]=_,o[95]=l):l=o[95],l}(q),[tL,t$]=(0,r.useState)(!1);eY[38]!==ty||eY[39]!==tv?(J=()=>{1==ty?tv(2):2==ty?tv(4):4==ty?tv(8):8==ty&&tv(1)},eY[38]=ty,eY[39]=tv,eY[40]=J):J=eY[40];let tM=J,tz=tA[0].getTime(),tD=tA[1].getTime();eY[41]===Symbol.for("react.memo_cache_sentinel")?(G=()=>{tc(eC)},eY[41]=G):G=eY[41];let tP=G;eY[42]!==tn?.ts||eY[43]!==tz||eY[44]!==tl?(Y=()=>{tl({ts:Math.max((tn?.ts??tz)-15e3,tz),setBy:"skip-backward"})},eY[42]=tn?.ts,eY[43]=tz,eY[44]=tl,eY[45]=Y):Y=eY[45],tn?.ts;let tF=Y;eY[46]!==tn?.ts||eY[47]!==tD||eY[48]!==tz||eY[49]!==tl?(U=()=>{tl({ts:Math.min((tn?.ts??tz)+15e3,tD),setBy:"skip-forward"})},eY[46]=tn?.ts,eY[47]=tD,eY[48]=tz,eY[49]=tl,eY[50]=U):U=eY[50],tn?.ts;let tO=U;eY[51]!==tp||eY[52]!==e6?(Z={values:{where:tp,whereLanguage:e6}},eY[51]=tp,eY[52]=e6,eY[53]=Z):Z=eY[53];let{control:tV,handleSubmit:tB}=(0,u.mN)(Z);eY[54]!==th?(X=e=>{th(e.where)},eY[54]=th,eY[55]=X):X=eY[55];let tH=X;eY[56]!==eQ?(Q=e=>{eQ(!0),e8(e.where),te(e.aliasWith)},eY[56]=eQ,eY[57]=Q):Q=eY[57];let tW=Q;eY[58]!==tl?(ee=e=>{tl({ts:e,setBy:"timeline"})},eY[58]=tl,eY[59]=ee):ee=eY[59];let tq=ee;eY[60]!==tn?.setBy||eY[61]!==tn?.ts||eY[62]!==tl?(es=e=>{(tn?.setBy!=="player"||tn?.ts!==e)&&tl({ts:e,setBy:"player"})},eY[60]=tn?.setBy,eY[61]=tn?.ts,eY[62]=tl,eY[63]=es):es=eY[63];let tJ=es;eY[64]!==e9||eY[65]!==e7||eY[66]!==eQ||eY[67]!==eU?(ea=null!=e7&&eU&&(0,a.jsx)(h.Z,{children:(0,a.jsx)(N.A,{source:eU,rowId:e7,aliasWith:e9,onClose:()=>{eQ(!1),e8(void 0)}})}),eY[64]=e9,eY[65]=e7,eY[66]=eQ,eY[67]=eU,eY[68]=ea):ea=eY[68],eY[69]!==tL?(en=l()(W().eventList,{"d-none":tL}),eY[69]=tL,eY[70]=en):en=eY[70],eY[71]===Symbol.for("react.memo_cache_sentinel")?(er={zIndex:100,width:"100%"},eY[71]=er):er=eY[71],eY[72]!==tB||eY[73]!==tH?(ei=tB(tH),eY[72]=tB,eY[73]=tH,eY[74]=ei):ei=eY[74],eY[75]!==eU?(el=(0,m.VO)(eU),eY[75]=eU,eY[76]=el):el=eY[76],eY[77]!==tB||eY[78]!==tH?(eo=tB(tH),eY[77]=tB,eY[78]=tH,eY[79]=eo):eo=eY[79],eY[80]!==tV||eY[81]!==e5||eY[82]!==el||eY[83]!==eo?(ec=(0,a.jsx)(k.A,{tableConnection:el,control:tV,name:"where",size:"xs",showLabel:!1,enableHotkey:!0,onSubmit:eo,onLanguageChange:e5}),eY[80]=tV,eY[81]=e5,eY[82]=el,eY[83]=eo,eY[84]=ec):ec=eY[84],eY[85]!==ei||eY[86]!==ec?(ed=(0,a.jsx)("form",{style:er,onSubmit:ei,children:ec}),eY[85]=ei,eY[86]=ec,eY[87]=ed):ed=eY[87],eY[88]===Symbol.for("react.memo_cache_sentinel")?(eu=[{value:"highlighted",label:"Highlighted"},{value:"events",label:"All Events"}],eY[88]=eu):eu=eY[88],eY[89]===Symbol.for("react.memo_cache_sentinel")?(em=e=>tg(e),eY[89]=em):em=eY[89],eY[90]!==tx?(eh=(0,a.jsx)(p.I,{flex:1,size:"xs",data:eu,value:tx,onChange:em}),eY[90]=tx,eY[91]=eh):eh=eY[91];let tK=tS?"filled":"subtle";eY[92]!==tS||eY[93]!==tw?(ep=()=>tw(!tS),eY[92]=tS,eY[93]=tw,eY[94]=ep):ep=eY[94],eY[95]===Symbol.for("react.memo_cache_sentinel")?(ex=(0,a.jsx)(v.A,{size:18}),eY[95]=ex):ex=eY[95],eY[96]!==tK||eY[97]!==ep?(eg=(0,a.jsx)(x.m,{label:"Sync with player position",color:"gray",children:(0,a.jsx)(g.M,{size:"md",color:"gray",variant:tK,onClick:ep,children:ex})}),eY[96]=tK,eY[97]=ep,eY[98]=eg):eg=eY[98],eY[99]!==eh||eY[100]!==eg?(ef=(0,a.jsxs)(f.Y,{gap:6,children:[eh,eg]}),eY[99]=eh,eY[100]=eg,eY[101]=ef):ef=eY[101],eY[102]!==ed||eY[103]!==ef?(eb=(0,a.jsxs)("div",{className:W().eventListHeader,children:[ed,ef]}),eY[102]=ed,eY[103]=ef,eY[104]=eb):eb=eY[104],eY[105]!==tR||eY[106]!==tI||eY[107]!==tS||eY[108]!==tn||eY[109]!==tz||eY[110]!==tW||eY[111]!==tq||eY[112]!==tf?(ey=tI&&tR&&(0,a.jsx)(ej,{eventsFollowPlayerPosition:tS,aliasMap:tR,queriedConfig:tI,onClick:tW,focus:tn,onTimeClick:tq,minTs:tz,showRelativeTime:tf}),eY[105]=tR,eY[106]=tI,eY[107]=tS,eY[108]=tn,eY[109]=tz,eY[110]=tW,eY[111]=tq,eY[112]=tf,eY[113]=ey):ey=eY[113],eY[114]!==en||eY[115]!==eb||eY[116]!==ey?(ev=(0,a.jsxs)("div",{className:en,children:[eb,ey]}),eY[114]=en,eY[115]=eb,eY[116]=ey,eY[117]=ev):ev=eY[117],eY[118]!==e2||eY[119]!==tn||eY[120]!==tT||eY[121]!==tL||eY[122]!==ty||eY[123]!==to||eY[124]!==e0||eY[125]!==eX||eY[126]!==eZ||eY[127]!==tJ||eY[128]!==t_||eY[129]!==e1?(e_=tT&&(0,a.jsx)(K,{playerState:to,setPlayerState:tc,focus:tn,setPlayerTime:tJ,config:{serviceName:eX.serviceName,sourceId:eZ.id,sessionId:e0,dateRange:[e1,e2]},playerSpeed:ty,skipInactive:t_,setPlayerStartTimestamp:tC,setPlayerEndTimestamp:tk,setPlayerFullWidth:t$,playerFullWidth:tL,resizeKey:`${tL}`,getSessionSourceFieldExpression:tT}),eY[118]=e2,eY[119]=tn,eY[120]=tT,eY[121]=tL,eY[122]=ty,eY[123]=to,eY[124]=e0,eY[125]=eX,eY[126]=eZ,eY[127]=tJ,eY[128]=t_,eY[129]=e1,eY[130]=e_):e_=eY[130],eY[131]!==tI||eY[132]!==tn||eY[133]!==tA||eY[134]!==to||eY[135]!==tl?(eE=tI&&(0,a.jsx)(eS,{playerState:to,setPlayerState:tc,focus:tn,setFocus:tl,playbackRange:tA,queriedConfig:tI}),eY[131]=tI,eY[132]=tn,eY[133]=tA,eY[134]=to,eY[135]=tl,eY[136]=eE):eE=eY[136],eY[137]!==eE?(eN=(0,a.jsx)("div",{className:W().playerPlaybar,children:eE}),eY[137]=eE,eY[138]=eN):eN=eY[138],eY[139]!==tb||eY[140]!==tf?(ek=()=>tb(!tf),eY[139]=tb,eY[140]=tf,eY[141]=ek):ek=eY[141],eY[142]!==tn?.ts||eY[143]!==tD||eY[144]!==tz||eY[145]!==tf?(eA=tf?(0,a.jsxs)(a.Fragment,{children:[(0,B.ax)((tn?.ts??0)-tz),(0,a.jsxs)("span",{className:"fw-normal ms-2",children:[" / ",(0,B.ax)(tD-tz)]})]}):(0,a.jsx)(et.H,{value:tn?.ts||tz,format:"time"}),eY[142]=tn?.ts,eY[143]=tD,eY[144]=tz,eY[145]=tf,eY[146]=eA):eA=eY[146],eY[147]!==ek||eY[148]!==eA?(eT=(0,a.jsx)("div",{className:W().playerTimestamp,children:(0,a.jsx)(x.m,{label:"Toggle relative time",color:"gray",children:(0,a.jsx)(b.$,{variant:"subtle",color:"gray",onClick:ek,size:"compact-xs",children:eA})})}),eY[147]=ek,eY[148]=eA,eY[149]=eT):eT=eY[149];let tG=(tn?.ts||0)<=tz;eY[150]===Symbol.for("react.memo_cache_sentinel")?(eI=(0,a.jsx)(_.A,{size:18}),eY[150]=eI):eI=eY[150],eY[151]!==tF||eY[152]!==tG?(eR=(0,a.jsx)(x.m,{label:"Go 15 seconds back",color:"gray",children:(0,a.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tF,disabled:tG,children:eI})}),eY[151]=tF,eY[152]=tG,eY[153]=eR):eR=eY[153];let tY="playing"===to?"Pause":"Play";eY[154]!==to?(eL=(0,a.jsx)(g.M,{variant:"secondary",size:"lg",radius:"xl",onClick:tP,children:"paused"===to?(0,a.jsx)(j.A,{size:20}):(0,a.jsx)(S.A,{size:20})}),eY[154]=to,eY[155]=eL):eL=eY[155],eY[156]!==tY||eY[157]!==eL?(e$=(0,a.jsx)(x.m,{label:tY,color:"gray",children:eL}),eY[156]=tY,eY[157]=eL,eY[158]=e$):e$=eY[158];let tU=(tn?.ts||0)>=tD;return eY[159]===Symbol.for("react.memo_cache_sentinel")?(eM=(0,a.jsx)(w.A,{size:18}),eY[159]=eM):eM=eY[159],eY[160]!==tO||eY[161]!==tU?(ez=(0,a.jsx)(x.m,{label:"Skip 15 seconds",color:"gray",children:(0,a.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tO,disabled:tU,children:eM})}),eY[160]=tO,eY[161]=tU,eY[162]=ez):ez=eY[162],eY[163]!==eR||eY[164]!==e$||eY[165]!==ez?(eD=(0,a.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[eR,e$,ez]}),eY[163]=eR,eY[164]=e$,eY[165]=ez,eY[166]=eD):eD=eY[166],eY[167]!==t_?(eP=t_?(0,a.jsx)(E.A,{size:18,className:"pe-1"}):(0,a.jsx)(C.A,{size:18,className:"pe-1"}),eY[167]=t_,eY[168]=eP):eP=eY[168],eY[169]!==tj||eY[170]!==t_?(eF=()=>tj(!t_),eY[169]=tj,eY[170]=t_,eY[171]=eF):eF=eY[171],eY[172]===Symbol.for("react.memo_cache_sentinel")?(eO=(0,a.jsx)(y.c,{orientation:"vertical",ml:"sm"}),eY[172]=eO):eO=eY[172],eY[173]!==eP||eY[174]!==eF?(eV=(0,a.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eP,onClick:eF,children:["Skip Idle",eO]}),eY[173]=eP,eY[174]=eF,eY[175]=eV):eV=eY[175],eY[176]!==ty?(eB=(0,a.jsxs)("span",{className:"fw-bold pe-1",children:[ty,"x"]}),eY[176]=ty,eY[177]=eB):eB=eY[177],eY[178]===Symbol.for("react.memo_cache_sentinel")?(eH=(0,a.jsx)(y.c,{orientation:"vertical",ml:"sm"}),eY[178]=eH):eH=eY[178],eY[179]!==tM||eY[180]!==eB?(eW=(0,a.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eB,onClick:tM,children:["Speed",eH]}),eY[179]=tM,eY[180]=eB,eY[181]=eW):eW=eY[181],eY[182]!==eV||eY[183]!==eW?(eq=(0,a.jsxs)(f.Y,{align:"center",justify:"flex-end",gap:"xs",children:[eV,eW]}),eY[182]=eV,eY[183]=eW,eY[184]=eq):eq=eY[184],eY[185]!==eT||eY[186]!==eD||eY[187]!==eq?(eJ=(0,a.jsxs)("div",{className:W().playerToolbar,children:[eT,eD,eq]}),eY[185]=eT,eY[186]=eD,eY[187]=eq,eY[188]=eJ):eJ=eY[188],eY[189]!==e_||eY[190]!==eN||eY[191]!==eJ?(eK=(0,a.jsxs)("div",{className:W().player,children:[e_,eN,eJ]}),eY[189]=e_,eY[190]=eN,eY[191]=eJ,eY[192]=eK):eK=eY[192],eY[193]!==ea||eY[194]!==ev||eY[195]!==eK?(eG=(0,a.jsxs)("div",{className:W().wrapper,children:[ea,ev,eK]}),eY[193]=ea,eY[194]=ev,eY[195]=eK,eY[196]=eG):eG=eY[196],eG}function eC(e){return"playing"===e?"paused":"playing"}},59017:(e,t,s)=>{"use strict";s.d(t,{V:()=>d});var a=s(6029),n=s(75155),r=s(55729),i=s(23935),l=s(78253),o=s(50374),c=s(94937);function d(e){let t,s,d,m,h,p=(0,n.c)(21),{attributes:x}=e;p[0]!==x?(t=void 0===x?[]:x,p[0]=x,p[1]=t):t=p[1];let g=t,[f,b]=(0,r.useState)(!1),{onPropertyAddClick:y,generateSearchUrl:v,source:_}=(0,r.useContext)(o.D);p[2]!==g||p[3]!==f?(s=g.sort(u).slice(0,f?g.length:12),p[2]=g,p[3]=f,p[4]=s):s=p[4];let j=s,S=g.length-j.length;if(p[5]!==_?.id||p[6]!==v||p[7]!==y||p[8]!==j){let e;p[10]!==_?.id||p[11]!==v||p[12]!==y?(e=e=>{let{displayedKey:t,value:s,sql:n,lucene:r,source:i}=e;return(0,a.jsx)(c.A,{displayedKey:t,name:r||n,nameLanguage:r?"lucene":"sql",value:s,...y&&_?.id===i.id?{onPropertyAddClick:y,sqlExpression:n}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:v?(e,t)=>v({where:e||"",whereLanguage:t??"lucene",source:i}):void 0},`${t}-${s}-${i.id}`)},p[10]=_?.id,p[11]=v,p[12]=y,p[13]=e):e=p[13],d=j.map(e),p[5]=_?.id,p[6]=v,p[7]=y,p[8]=j,p[9]=d}else d=p[9];return p[14]!==g.length||p[15]!==S||p[16]!==f?(m=g.length>12&&(0,a.jsx)(i.M,{size:"xs",onClick:()=>b(!f),children:f?"Show Less":`Show ${S} More...`}),p[14]=g.length,p[15]=S,p[16]=f,p[17]=m):m=p[17],p[18]!==d||p[19]!==m?(h=(0,a.jsxs)(l.s,{wrap:"wrap",gap:"2px",mb:"md",align:"baseline",children:[d,m]}),p[18]=d,p[19]=m,p[20]=h):h=p[20],h}function u(e,t){return e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value)}},61629:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(6029),n=s(75155),r=s(43517),i=s(92917);function l(e){let t,s,l,o=(0,n.c)(7);o[0]!==e?({level:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]);let c=(0,i.lO)(t),d="error"===c?"red":"warn"===c?"var(--color-chart-warning)":"gray";return o[3]!==t||o[4]!==s||o[5]!==d?(l=(0,a.jsx)(r.E,{component:"span",size:"xs",c:d,...s,children:t}),o[3]=t,o[4]=s,o[5]=d,o[6]=l):l=o[6],l}},64441:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var a=s(6029),n=s(75155),r=s(55729),i=s(63085),l=s(8737),o=s(43517),c=s(60481),d=s(20294),u=s(78253),m=s(22623),h=s(25062),p=s(15216),x=s(16232),g=s(7565),f=s(57820),b=s(92917),y=s(59017),v=s(50374),_=s(61629);let j=e=>"getTime"in e&&!isNaN(e.getTime());function S(e){let t,s,r,u=(0,n.c)(9),{breadcrumbPath:m,onNavigateToLevel:h}=e;u[0]!==h?(t=e=>{h?.(e)},u[0]=h,u[1]=t):t=u[1];let p=t;e:{let e;if(0===m.length){let e;u[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],u[2]=e):e=u[2],s=e;break e}if(u[3]!==m||u[4]!==p){let t;e=[],m.forEach((t,s)=>{let n,r=t.rowData?(n=(t.rowData.__hdx_body||"").trim()).length>200?`${n.substring(0,197)}...`:n:"";e.push((0,a.jsx)(i.m,{label:r,disabled:!r,position:"bottom",withArrow:!0,children:(0,a.jsx)(l.N,{onClick:()=>p(s),style:{textDecoration:"none"},children:(0,a.jsx)(o.E,{size:"sm",c:"blue",style:{cursor:"pointer"},children:0===s?"Original Event":t.label})})},`crumb-${s}`))}),u[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(o.E,{size:"sm",children:"Selected Event"},"current"),u[6]=t):t=u[6],e.push(t),u[3]=m,u[4]=p,u[5]=e}else e=u[5];s=e}let x=s;return 0===m.length?null:(u[7]!==x?(r=(0,a.jsx)(c.a,{mb:"sm",pb:"sm",className:"border-bottom border-dark",children:(0,a.jsx)(d.B,{separator:"â€º",separatorMargin:"xs",children:x})}),u[7]=x,u[8]=r):r=u[8],r)}function w(e){let t,s,i,l,d,w,C,N,k,A,T,I,R,L=(0,n.c)(41),{attributes:$,mainContent:M,mainContentHeader:z,date:D,severityText:P,breadcrumbPath:F,onBreadcrumbClick:O}=e;L[0]!==$?(t=void 0===$?[]:$,L[0]=$,L[1]=t):t=L[1];let V=t,B=void 0===M?"":M;L[2]!==F?(s=void 0===F?[]:F,L[2]=F,L[3]=s):s=L[3];let H=s,[W,q]=r.useState(!1),{generateSearchUrl:J}=(0,r.useContext)(v.D),K=B.length>2e3;L[4]!==W||L[5]!==B?(i=W?B:B?.slice(0,2e3),L[4]=W,L[5]=B,L[6]=i):i=L[6];let G=i,[Y,U]=(0,r.useState)(null),[Z,X]=(0,r.useState)(0);L[7]!==Y?(l=()=>{if(!Y)return;let e=()=>{X(Y.offsetHeight)};e();let t=new ResizeObserver(e);return t.observe(Y),()=>{t.disconnect()}},d=[Y],L[7]=Y,L[8]=l,L[9]=d):(l=L[8],d=L[9]),(0,r.useEffect)(l,d);let{userPreferences:Q,setUserPreference:ee}=(0,f.HW)(),{expandSidebarHeader:et}=Q;return L[10]!==H||L[11]!==O?(w=(0,a.jsx)(S,{breadcrumbPath:H,onNavigateToLevel:O}),L[10]=H,L[11]=O,L[12]=w):w=L[12],L[13]!==P?(C=P&&(0,a.jsx)(_.A,{level:P}),L[13]=P,L[14]=C):C=L[14],L[15]!==D||L[16]!==P?(N=P&&j(D)&&(0,a.jsx)(o.E,{size:"xs",mx:"xs",children:"\xb7"}),L[15]=D,L[16]=P,L[17]=N):N=L[17],L[18]!==D?(k=j(D)&&(0,a.jsxs)(o.E,{size:"xs",children:[(0,a.jsx)(g.H,{value:D})," \xb7"," ",(0,b.Jk)(D)," ago"]}),L[18]=D,L[19]=k):k=L[19],L[20]!==C||L[21]!==N||L[22]!==k?(A=(0,a.jsxs)(u.s,{children:[C,N,k]}),L[20]=C,L[21]=N,L[22]=k,L[23]=A):A=L[23],L[24]!==W||L[25]!==et||L[26]!==Z||L[27]!==K||L[28]!==B||L[29]!==G||L[30]!==z||L[31]!==ee||L[32]!==Q?(T=B?(0,a.jsxs)(m.t,{p:"xs",mt:"sm",style:{maxHeight:et?void 0:120,overflow:"auto",overflowWrap:"break-word"},ref:U,children:[(0,a.jsxs)(u.s,{justify:"space-between",mb:"xs",children:[(0,a.jsx)(o.E,{size:"xs",children:z}),Z>=120&&(0,a.jsx)(h.$,{size:"compact-xs",variant:"subtle",onClick:()=>ee({...Q,expandSidebarHeader:!et}),children:et?(0,a.jsx)(p.A,{size:14}):(0,a.jsx)(x.A,{size:14})})]}),G,K&&(0,a.jsx)(h.$,{size:"compact-xs",variant:"subtle",color:"gray",onClick:()=>{q(E)},children:W?"Collapse":"Expand"})]}):(0,a.jsx)(m.t,{p:"xs",mt:"sm",children:(0,a.jsx)(o.E,{size:"xs",mb:"xs",children:"[Empty]"})}),L[24]=W,L[25]=et,L[26]=Z,L[27]=K,L[28]=B,L[29]=G,L[30]=z,L[31]=ee,L[32]=Q,L[33]=T):T=L[33],L[34]!==V?(I=(0,a.jsx)(c.a,{mt:"xs",children:(0,a.jsx)(y.V,{attributes:V})}),L[34]=V,L[35]=I):I=L[35],L[36]!==A||L[37]!==T||L[38]!==I||L[39]!==w?(R=(0,a.jsxs)(a.Fragment,{children:[w,A,T,I]}),L[36]=A,L[37]=T,L[38]=I,L[39]=w,L[40]=R):R=L[40],R}function E(e){return!e}},64501:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var a=s(6029),n=s(55729),r=s(88459),i=s(82641),l=s(27166),o=s(43517),c=s(92789),d=s(25062),u=s(78253),m=s(94720),h=s(60665),p=s(24583),x=s(43567),g=s(98142),f=s(93108),b=s(78550),y=s(81973),v=s(36600),_=s(24314),j=s(54970);async function S({connectionId:e,createSourceMutation:t,updateSourceMutation:s,logSourceDatabaseName:a,logSourceName:n,logSourceTableName:r,metricsSourceDatabaseName:l,metricsSourceName:o,sessionSourceDatabaseName:c,sessionSourceName:d,sessionSourceTableName:u,traceSourceDatabaseName:m,traceSourceName:h,traceSourceTableName:p,traceSourceHighlightedTraceAttributes:x,traceSourceMaterializedViews:g}){let f,b,y=a&&n&&r,v=l&&o;y&&(f=await t.mutateAsync({source:{kind:i.GL.Log,name:n,connection:e,from:{databaseName:a,tableName:r},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, SeverityText, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body",displayedTimestampValueExpression:"Timestamp"}}));let _=await t.mutateAsync({source:{kind:i.GL.Trace,name:h,connection:e,from:{databaseName:m,tableName:p},timestampValueExpression:"Timestamp",defaultTableSelectExpression:"Timestamp, ServiceName, StatusCode, round(Duration / 1e6), SpanName",serviceNameExpression:"ServiceName",eventAttributesExpression:"SpanAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"SpanName",durationExpression:"Duration",durationPrecision:9,parentSpanIdExpression:"ParentSpanId",spanKindExpression:"SpanKind",spanNameExpression:"SpanName",...y?{logSourceId:"l-758211293"}:{},statusCodeExpression:"StatusCode",statusMessageExpression:"StatusMessage",spanEventsValueExpression:"Events",highlightedTraceAttributeExpressions:x,materializedViews:g}});v&&(b=await t.mutateAsync({source:{kind:i.GL.Metric,name:o,connection:e,from:{databaseName:l,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:{[i.SX.Gauge]:"otel_metrics_gauge",[i.SX.Histogram]:"otel_metrics_histogram",[i.SX.Sum]:"otel_metrics_sum",[i.SX.Summary]:"otel_metrics_summary",[i.SX.ExponentialHistogram]:"otel_metrics_exponential_histogram"},resourceAttributesExpression:"ResourceAttributes",...y&&f?{logSourceId:f.id}:{}}}));let j=await t.mutateAsync({source:{kind:i.GL.Session,name:d,connection:e,from:{databaseName:c,tableName:u},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceSourceId:_.id,traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body"}});await Promise.all([...y&&f?[s.mutateAsync({source:{...f,sessionSourceId:j.id,traceSourceId:_.id,...v&&b?{metricSourceId:b.id}:{}}})]:[],s.mutateAsync({source:{..._,...y&&f?{logSourceId:f.id}:{},...v&&b?{metricSourceId:b.id}:{},sessionSourceId:j.id}})])}let w=(0,n.memo)(function({requireSource:e=!0}){let t=(0,v.Kh)(),{data:s}=(0,y.oE)(),{data:w}=(0,f.ZY)(),E=w?.length===0?"connection":s?.length===0&&e?"auto-detect":void 0,[C,N]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{null!=E&&null==C&&N(E)},[E,C]),(0,n.useEffect)(()=>{("auto-detect"===C||"source"===C)&&s&&s.length>0&&N("closed")},[C,s]);let k=(0,y.nd)(),A=(0,f.Ir)(),T=(0,y.sr)(),I=(0,y.YI)(),R=(0,b.Ge)(),[L,$]=(0,n.useState)(!1),[M,z]=(0,n.useState)(!1),[D,P]=(0,n.useState)([]),[F,O]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!g.Ju||"connection"!==C||w?.length!==0||F)return;O(!0);let e=window.location.origin;new r.aP({host:e,username:"default",password:""}).query({query:"SELECT 1",shouldSkipApplySettings:!0}).then(t=>{t.json().then(()=>{A.mutate({connection:{name:"Default",host:e,username:"default",password:""}},{onSuccess:()=>{N("auto-detect")}})})}).catch(()=>{})},[C,w,F,A]);let V=(0,n.useCallback)(async e=>{try{$(!0),z(!0);let t=await R.getOtelTables({connectionId:e});if(!t)return void N("source");let s=[];if(t.tables.logs){let a=await (0,y.Ys)({databaseName:t.database,tableName:t.tables.logs,connectionId:e,metadata:R});if(null!=a.timestampValueExpression){let n=await k.mutateAsync({source:{kind:i.GL.Log,name:"Logs",connection:e,from:{databaseName:t.database,tableName:t.tables.logs},...a,timestampValueExpression:a.timestampValueExpression}});s.push(n)}else console.error("Log source was found but missing required fields",a)}if(t.tables.traces){let a=await (0,y.Ys)({databaseName:t.database,tableName:t.tables.traces,connectionId:e,metadata:R});if(null!=a.timestampValueExpression){let n=await k.mutateAsync({source:{kind:i.GL.Trace,name:"Traces",connection:e,from:{databaseName:t.database,tableName:t.tables.traces},...a,timestampValueExpression:a.timestampValueExpression}});s.push(n)}else console.error("Trace source was found but missing required fields",a)}if(Object.values(t.tables.metrics).some(e=>null!=e)){let a={[i.SX.Gauge]:"",[i.SX.Histogram]:"",[i.SX.Sum]:"",[i.SX.Summary]:"",[i.SX.ExponentialHistogram]:""};t.tables.metrics.gauge&&(a[i.SX.Gauge]=t.tables.metrics.gauge),t.tables.metrics.histogram&&(a[i.SX.Histogram]=t.tables.metrics.histogram),t.tables.metrics.sum&&(a[i.SX.Sum]=t.tables.metrics.sum),t.tables.metrics.summary&&(a[i.SX.Summary]=t.tables.metrics.summary),t.tables.metrics.expHistogram&&(a[i.SX.ExponentialHistogram]=t.tables.metrics.expHistogram);let n=await k.mutateAsync({source:{kind:i.GL.Metric,name:"Metrics",connection:e,from:{databaseName:t.database,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:a,resourceAttributesExpression:"ResourceAttributes"}});s.push(n)}if(t.tables.sessions){let a=await (0,y.Ys)({databaseName:t.database,tableName:t.tables.sessions,connectionId:e,metadata:R}),n=s.find(e=>e.kind===i.GL.Trace);if(null!=a.timestampValueExpression&&null!=n){let r=await k.mutateAsync({source:{kind:i.GL.Session,name:"Sessions",connection:e,from:{databaseName:t.database,tableName:t.tables.sessions},...a,timestampValueExpression:a.timestampValueExpression,traceSourceId:n.id}});s.push(r)}else console.error("Session source was found but missing required fields",a)}if(0===s.length){console.error("No sources created due to missing required fields"),N("source");return}let a=s.find(e=>e.kind===i.GL.Log),n=s.find(e=>e.kind===i.GL.Trace),r=s.find(e=>e.kind===i.GL.Metric),l=s.find(e=>e.kind===i.GL.Session),o=[];a&&o.push(T.mutateAsync({source:{...a,...n?{traceSourceId:n.id}:{},...r?{metricSourceId:r.id}:{},...l?{sessionSourceId:l.id}:{}}})),n&&o.push(T.mutateAsync({source:{...n,...a?{logSourceId:a.id}:{},...r?{metricSourceId:r.id}:{},...l?{sessionSourceId:l.id}:{}}})),await Promise.all(o),P(s),h.$e.show({title:"Success",message:`Automatically detected and created ${s.length} source${s.length>1?"s":""}.`}),N("closed")}catch(e){console.error("Error auto-detecting sources:",e),h.$e.show({color:"red",title:"Error",message:"Failed to auto-detect telemetry sources. Please set up manually."}),N("source")}finally{$(!1)}},[R,k,T,N,P]);(0,n.useEffect)(()=>{"auto-detect"===C&&s?.length===0&&w&&w.length>0&&!1===L&&!1===M&&V(w[0].id)},[C,w,V,L,s,M]);let B=(0,n.useCallback)(async()=>{if(!g.Ju)try{if(s)for(let e of s)"local"===e.connection&&e.name.startsWith("Demo")&&"otel_v2"!==e.from.databaseName&&await I.mutateAsync({id:e.id});let e="";await A.mutateAsync({connection:{name:"Demo",host:"https://sql-clickhouse.clickhouse.com",username:"otel_demo",password:""}},{onSuccess(t){e=t.id},onError(e){console.error("Failed to create demo connection: ",e)}}),await S({connectionId:e,createConnectionMutation:A,createSourceMutation:k,deleteSourceMutation:I,logSourceDatabaseName:"otel_v2",logSourceName:"Demo Logs",logSourceTableName:"otel_logs",metricsSourceDatabaseName:"otel_v2",metricsSourceName:"Demo Metrics",sessionSourceDatabaseName:"otel_v2",sessionSourceName:"Demo Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_v2",traceSourceName:"Demo Traces",traceSourceTableName:"otel_traces",traceSourceMaterializedViews:[{databaseName:"otel_v2",tableName:"otel_traces_1m",dimensionColumns:"ServiceName, StatusCode",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"}]},{databaseName:"otel_v2",tableName:"otel_traces_1m_v2",dimensionColumns:"ServiceName, SpanName, SpanKind",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"},{mvColumn:"quantile__Duration",aggFn:"quantile",sourceColumn:"Duration"}]}],updateSourceMutation:T}),await S({connectionId:e,createConnectionMutation:A,createSourceMutation:k,deleteSourceMutation:I,sessionSourceDatabaseName:"otel_clickpy",sessionSourceName:"ClickPy Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_clickpy",traceSourceName:"ClickPy Traces",traceSourceTableName:"otel_traces",traceSourceHighlightedTraceAttributes:[{sqlExpression:"if((SpanAttributes['http.route']) LIKE '%dashboard%', concat('https://clickpy.clickhouse.com', path(SpanAttributes['http.target'])), '')",alias:"clickpy_link"}],updateSourceMutation:T}),h.$e.show({title:"Success",message:`Connected to ${t} demo server.`}),N("closed")}catch(e){console.error(e),h.$e.show({color:"red",title:"Error",message:`Could not connect to the ${t} demo server, please try again later.`})}},[t,k,A,T,I,s]);return(0,a.jsxs)(l.a,{"data-testid":"onboarding-modal",opened:null!=C&&"closed"!==C,onClose:()=>{},title:`Welcome to ${t}`,size:"xl",withCloseButton:!1,children:["connection"===C&&null!=w&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.E,{size:"sm",mb:"md",children:"Lets set up your connection to ClickHouse"}),0===w.length?(0,a.jsx)(x.B,{connection:{id:"",name:"Default",host:g.Ju?window.location.origin:"http://localhost:8123",username:"default",password:""},onSave:()=>{M?N("source"):N("auto-detect")},isNew:!0}):(0,a.jsx)(x.B,{connection:w[0],isNew:!1,onSave:()=>{M?N("source"):N("auto-detect")},showCancelButton:!1,showDeleteButton:!1}),!g.VO&&(0,a.jsx)(o.E,{size:"xs",mt:"md",children:"You can always add and edit connections later."}),!g.Ju&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.c,{label:"OR",my:"md"}),(0,a.jsx)(d.$,{"data-testid":"demo-server-button",variant:"secondary",w:"100%",onClick:B,children:"Connect to Demo Server"})]})]}),"auto-detect"===C&&(0,a.jsx)(a.Fragment,{children:L?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(u.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,a.jsx)(m.a,{size:"md",mb:"md"}),(0,a.jsx)(o.E,{size:"sm",c:"dimmed",mb:"md",children:"Detecting available tables..."}),(0,a.jsx)(d.$,{variant:"subtle",size:"xs",onClick:()=>{$(!1),N("source")},children:"Skip and setup manually"})]})}):D.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.$,{variant:"subtle",onClick:()=>N("connection"),p:"xs",mb:"md",children:[(0,a.jsx)(p.A,{size:14,className:"me-2"})," Back"]}),(0,a.jsxs)(o.E,{size:"sm",mb:"md",children:["We automatically detected and created"," ",D.length," source",D.length>1?"s":""," from your connection. You can review, edit, or continue."]}),(0,a.jsx)(j.v,{withCard:!1,variant:"default",showEmptyState:!1}),(0,a.jsxs)(u.s,{justify:"space-between",mt:"md",children:[(0,a.jsx)(d.$,{variant:"subtle",onClick:()=>{N("source")},children:"Add more sources"}),(0,a.jsx)(d.$,{variant:"primary",onClick:()=>{N("closed")},children:"Continue"})]})]}):(0,a.jsxs)(u.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,a.jsx)(o.E,{size:"sm",c:"dimmed",mb:"md",children:"No OTel tables detected automatically, please setup sources manually."}),(0,a.jsx)(d.$,{variant:"primary",onClick:()=>{N("source")},children:"Continue"})]})}),"source"===C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.$,{variant:"subtle",onClick:()=>N("connection"),p:"xs",mb:"md",children:[(0,a.jsx)(p.A,{size:14,className:"me-2"})," Back"]}),(0,a.jsx)(o.E,{size:"sm",mb:"md",children:"Lets set up a source table to query telemetry from."}),(0,a.jsx)(_.Eb,{isNew:!0,defaultName:"Logs",onCreate:()=>{N("closed")}}),(0,a.jsx)(o.E,{size:"xs",mt:"lg",children:"You can always add and edit sources later."})]})]})})},65081:(e,t,s)=>{"use strict";s.d(t,{z:()=>D});var a=s(6029),n=s(75155),r=s(55729),i=s(81278),l=s.n(i),o=s(67549),c=s(83595),d=s(60449),u=s.n(d),m=s(8737),h=s(56513),p=s(3635),x=s(96061),g=s(25062),f=s(60481),b=s(22623),y=s(43517),v=s(39785),_=s(60665),j=s(24602),S=s(95316),w=s(90515),E=s(9385),C=s(41279),N=s(9841),k=s(6723),A=s(23195),T=s(45172),I=s(26355),R=s(92917),L=s(50374);function $(e,t,s="JSONExtractString"){let a=e.slice(t.length);if(0===a.length)return null;let n=t[t.length-1],r=a.map(e=>`'${e}'`).join(", ");return`${s}(${n}, ${r})`}let M=(0,c.tG)("hdx_json_viewer_options",{normallyExpanded:!0,lineWrap:!0,tabulate:!0,filterBlanks:!1});function z(){let e,t,s,r,i,l,c,d,u,x,g,f,b,y,v,_,E=(0,n.c)(39),[C,N]=(0,o.fp)(M);return E[0]!==C||E[1]!==N?(e=()=>N({...C,lineWrap:!C.lineWrap}),E[0]=C,E[1]=N,E[2]=e):e=E[2],E[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(j.A,{size:14}),E[3]=t):t=E[3],E[4]!==e?(s=(0,a.jsx)(m.N,{color:"gray",onClick:e,children:t}),E[4]=e,E[5]=s):s=E[5],E[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(h.W.Target,{children:(0,a.jsx)(m.N,{children:(0,a.jsx)(S.A,{size:14})})}),E[6]=r):r=E[6],E[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(h.W.Label,{lh:1,py:6,children:"Properties view options"}),E[7]=i):i=E[7],E[8]!==C||E[9]!==N?(l=()=>N({...C,normallyExpanded:!C.normallyExpanded}),E[8]=C,E[9]=N,E[10]=l):l=E[10],E[11]!==C.normallyExpanded?(c=C.normallyExpanded?(0,a.jsx)(w.A,{size:14,className:"ps-2"}):null,E[11]=C.normallyExpanded,E[12]=c):c=E[12],E[13]!==l||E[14]!==c?(d=(0,a.jsx)(h.W.Item,{onClick:l,lh:"1",py:8,rightSection:c,children:"Expand all properties"}),E[13]=l,E[14]=c,E[15]=d):d=E[15],E[16]!==C.tabulate?(u=C.tabulate?(0,a.jsx)(w.A,{size:14,className:"ps-2"}):null,E[16]=C.tabulate,E[17]=u):u=E[17],E[18]!==C||E[19]!==N?(x=()=>N({...C,tabulate:!C.tabulate}),E[18]=C,E[19]=N,E[20]=x):x=E[20],E[21]!==u||E[22]!==x?(g=(0,a.jsx)(h.W.Item,{lh:"1",py:8,rightSection:u,onClick:x,children:"Tabulate"}),E[21]=u,E[22]=x,E[23]=g):g=E[23],E[24]!==C.filterBlanks?(f=C.filterBlanks?(0,a.jsx)(w.A,{size:14,className:"ps-2"}):null,E[24]=C.filterBlanks,E[25]=f):f=E[25],E[26]!==C||E[27]!==N?(b=()=>N({...C,filterBlanks:!C.filterBlanks}),E[26]=C,E[27]=N,E[28]=b):b=E[28],E[29]!==f||E[30]!==b?(y=(0,a.jsx)(h.W.Item,{lh:"1",py:8,rightSection:f,onClick:b,children:"Hide blank values"}),E[29]=f,E[30]=b,E[31]=y):y=E[31],E[32]!==g||E[33]!==y||E[34]!==d?(v=(0,a.jsxs)(h.W,{width:240,withinPortal:!1,children:[r,(0,a.jsxs)(h.W.Dropdown,{children:[i,d,g,y]})]}),E[32]=g,E[33]=y,E[34]=d,E[35]=v):v=E[35],E[36]!==v||E[37]!==s?(_=(0,a.jsxs)(p.Y,{children:[s,v]}),E[36]=v,E[37]=s,E[38]=_):_=E[38],_}function D(e){let t,s,i,c,d,m,h,j,S,w,D,F,O=(0,n.c)(31),{data:V,jsonColumns:B}=e;O[0]!==B?(t=void 0===B?[]:B,O[0]=B,O[1]=t):t=O[1];let H=t,{onPropertyAddClick:W,generateSearchUrl:q,generateChartUrl:J,displayedColumns:K,toggleColumn:G}=(0,r.useContext)(L.D),[Y,U]=(0,r.useState)(""),[Z]=(0,v.o)(Y,100),X=(0,o.md)(M);e:{let e;if(!V){s=null;break e}if(O[2]!==V||O[3]!==Z||O[4]!==X.filterBlanks){let t=Object.fromEntries(Object.entries(V).filter(P));X.filterBlanks&&(t=function e(t){if(null!==t&&""!==t){if(Array.isArray(t)){let s=t.map(e).filter(e=>void 0!==e);return s.length>0?s:void 0}if("object"==typeof t){let s={};for(let[a,n]of Object.entries(t)){let t=e(n);void 0!==t&&(s[a]=t)}return Object.keys(s).length>0?s:void 0}return t}}(t)),e=function e(t,s){if("object"!=typeof t||null===t||""===s)return t;let a={};for(let[n,r]of Object.entries(t))if(null!==r&&((n.toLowerCase().includes(s.toLowerCase())||"string"==typeof r&&r.toLowerCase().includes(s.toLowerCase()))&&(a[n]=r),"object"==typeof r)){let t=e(r,s);Object.keys(t).length>0&&(a[n]=t)}return a}(t,Z),O[2]=V,O[3]=Z,O[4]=X.filterBlanks,O[5]=e}else e=O[5];s=e}let Q=s;O[6]!==K||O[7]!==J||O[8]!==q||O[9]!==H||O[10]!==W||O[11]!==Q||O[12]!==G?(i=e=>{let{keyPath:t,value:s,isInParsedJson:n,parsedJsonRootPath:r}=e,i=[],o=(0,R.uc)(t,H),c=t.length>0&&H?.includes(t[0]);if(null!=W&&"string"==typeof s&&s&&"Timestamp"!=o&&"TimestampTime"!=o&&i.push({key:"add-to-search",label:(0,a.jsxs)(p.Y,{gap:2,children:[(0,a.jsx)(E.A,{size:14}),"Add to Filters"]}),title:"Add to Filters",onClick:()=>{let e;if(n&&r){let s=$(t,r);e=s||(c?`toString(${o})`:o)}else e=c?`toString(${o})`:o;W(e,s),_.$e.show({color:"green",message:`Added "${o} = ${s}" to filters`})}}),q&&"object"!=typeof s&&i.push({key:"search",label:(0,a.jsxs)(p.Y,{gap:2,children:[(0,a.jsx)(C.A,{size:14}),"Search"]}),title:"Search for this value only",onClick:()=>{let e=o;if(n&&r){let a="JSONExtractString";"number"==typeof s?a="JSONExtractFloat":"boolean"==typeof s&&(a="JSONExtractBool");let n=$(t,r,a);n&&(e=n)}let a=`${e} = ${"string"==typeof s?`'${s}'`:s}`;("Timestamp"==e||"TimestampTime"==e)&&(a=`${e} = parseDateTime64BestEffort('${s}', 9)`),l().push(q({where:a,whereLanguage:"sql"}))}}),J&&"number"==typeof s&&i.push({key:"chart",label:(0,a.jsx)(N.A,{size:14}),title:"Chart",onClick:()=>{let e=o;if(n&&r){let s=$(t,r);s&&(e=s)}l().push(J({aggFn:"avg",field:e,groupBy:[]}))}}),G&&"object"!=typeof s){let e=o;if(n&&r){let s=$(t,r);s&&(e=s)}let s=K?.includes(e);i.push({key:"toggle-column",label:s?(0,a.jsxs)(p.Y,{gap:2,children:[(0,a.jsx)(k.A,{size:14}),"Column"]}):(0,a.jsxs)(p.Y,{gap:2,children:[(0,a.jsx)(A.A,{size:14}),"Column"]}),title:s?`Remove ${o} column from results table`:`Add ${o} column to results table`,onClick:()=>{G(e),_.$e.show({color:"green",message:`Column "${o}" ${s?"removed from":"added to"} results table`})}})}return"object"==typeof s?i.push({key:"copy-object",label:"Copy Object",onClick:()=>{let e;e=n&&r?s:0===t.length?Q:u()(Q,t),window.navigator.clipboard.writeText(JSON.stringify(e,null,2)),_.$e.show({color:"green",message:"Copied object to clipboard"})}}):i.push({key:"copy-value",label:(0,a.jsxs)(p.Y,{gap:2,children:[(0,a.jsx)(T.A,{size:14}),"Copy Value"]}),onClick:()=>{window.navigator.clipboard.writeText("string"==typeof s?s:JSON.stringify(s,null,2)),_.$e.show({color:"green",message:"Value copied to clipboard"})}}),i},O[6]=K,O[7]=J,O[8]=q,O[9]=H,O[10]=W,O[11]=Q,O[12]=G,O[13]=i):i=O[13];let ee=i;return O[14]===Symbol.for("react.memo_cache_sentinel")?(c=e=>U(e.currentTarget.value),d=(0,a.jsx)(C.A,{size:16}),O[14]=c,O[15]=d):(c=O[14],d=O[15]),O[16]!==Y?(m=(0,a.jsx)(x.p,{size:"xs",w:"100%",maw:"400px",placeholder:"Search properties by key or value",value:Y,onChange:c,leftSection:d}),h=Y&&(0,a.jsx)(g.$,{variant:"secondary",size:"xs",onClick:()=>U(""),children:"Clear"}),O[16]=Y,O[17]=m,O[18]=h):(m=O[17],h=O[18]),O[19]===Symbol.for("react.memo_cache_sentinel")?(S=(0,a.jsx)("div",{className:"flex-grow-1"}),j=(0,a.jsx)(z,{}),O[19]=j,O[20]=S):(j=O[19],S=O[20]),O[21]!==m||O[22]!==h?(w=(0,a.jsx)(f.a,{py:"xs",children:(0,a.jsxs)(p.Y,{gap:"xs",children:[m,h,S,j]})}),O[21]=m,O[22]=h,O[23]=w):w=O[23],O[24]!==ee||O[25]!==X||O[26]!==Q?(D=(0,a.jsx)(b.t,{bg:"transparent",mt:"sm",children:null!=Q?(0,a.jsx)(I.A,{data:Q,getLineActions:ee,...X}):(0,a.jsx)(y.E,{children:"No data"})}),O[24]=ee,O[25]=X,O[26]=Q,O[27]=D):D=O[27],O[28]!==w||O[29]!==D?(F=(0,a.jsxs)("div",{className:"flex-grow-1 overflow-auto",children:[w,D]}),O[28]=w,O[29]=D,O[30]=F):F=O[30],F}function P(e){return!e[0].startsWith("__hdx_")}},65723:e=>{e.exports={container:"HyperJson_container__GNwuL",withTabulate:"HyperJson_withTabulate__MzU_L",key:"HyperJson_key__AQ6QF",withLineWrap:"HyperJson_withLineWrap__gfDDi",valueContainer:"HyperJson_valueContainer__Ui_5y",string:"HyperJson_string__vkc96",treeNode:"HyperJson_treeNode__bDzsg",line:"HyperJson_line__n3Ltu",lineMenu:"HyperJson_lineMenu__Sg84e",expanded:"HyperJson_expanded__gHv9Z",object:"HyperJson_object__ChLzl",array:"HyperJson_array__rJBNC",expandable:"HyperJson_expandable__futZ8",lineMenuBtn:"HyperJson_lineMenuBtn__QKgME",clickable:"HyperJson_clickable__UNRbd",value:"HyperJson_value__aSXTw",hoverable:"HyperJson_hoverable__oWIY9",hoverContent:"HyperJson_hoverContent__2Ir2x",jsonBtn:"HyperJson_jsonBtn__T1ObP",keyContainer:"HyperJson_keyContainer___KqED",number:"HyperJson_number__VFmbX",boolean:"HyperJson_boolean__KkQsQ",expandMoreProps:"HyperJson_expandMoreProps__uHkwZ"}},66773:e=>{e.exports={panel:"LogSidePanel_panel__JgveL",panelDragBar:"LogSidePanel_panelDragBar__sFi62",panelHeader:"LogSidePanel_panelHeader__Fl4jA",panelDetails:"LogSidePanel_panelDetails__wGBLr",panelContent:"LogSidePanel_panelContent__Olcws",severityChip:"LogSidePanel_severityChip__hIK7I",loadingState:"LogSidePanel_loadingState__b5y0C",panelSectionWrapper:"LogSidePanel_panelSectionWrapper__gOBKh",panelSectionWrapperTitle:"LogSidePanel_panelSectionWrapperTitle__eBMsG",kbdShortcuts:"LogSidePanel_kbdShortcuts__ogLDt",kbd:"LogSidePanel_kbd__gmxFq",kbdDivider:"LogSidePanel_kbdDivider____Gi4",lineContext:"LogSidePanel_lineContext__rCVjx",lineContextCurrentLine:"LogSidePanel_lineContextCurrentLine__K3t4J",lineContextLineNo:"LogSidePanel_lineContextLineNo__LuYmr",emptyMessage:"LogSidePanel_emptyMessage__6fbwp",traceTimelineLabel:"LogSidePanel_traceTimelineLabel___WCaD",traceTimelineLabelHighlighted:"LogSidePanel_traceTimelineLabelHighlighted__elopt",stacktraceRowInteractive:"LogSidePanel_stacktraceRowInteractive__i18zL"}},67398:e=>{e.exports={searchingHeader:"SearchInputV2_searchingHeader__n6jUL",searchingDescription:"SearchInputV2_searchingDescription__t0nLB",examplesLabel:"SearchInputV2_examplesLabel__xqeIs",exampleRow:"SearchInputV2_exampleRow__Soa_C",exampleLabel:"SearchInputV2_exampleLabel__5Xyqr",exampleCode:"SearchInputV2_exampleCode__frAb_",docsLink:"SearchInputV2_docsLink__3JECv"}},69922:(e,t,s)=>{"use strict";s.d(t,{w:()=>i});var a=s(6029),n=s(75155),r=s(60481);function i(e){let t,s,i=(0,n.c)(5),{children:l,style:o}=e;return i[0]!==o?(t={width:"100%",display:"flex",flexDirection:"column",background:"var(--color-bg-body)",borderRadius:"var(--mantine-radius-sm)",border:"1px solid var(--color-border)",...o},i[0]=o,i[1]=t):t=i[1],i[2]!==l||i[3]!==t?(s=(0,a.jsx)(r.a,{py:"sm",px:"xs",style:t,children:l}),i[2]=l,i[3]=t,i[4]=s):s=i[4],s}},70727:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>u,C2:()=>d,ZO:()=>c});var a=s(55729),n=s(6033),r=s.n(n),i=s(80519),l=s.n(i),o=s(35467);let c={ID:"__hyperdx_id",ALIAS_WITH:"__hyperdx_alias_with"};function d(e){return e?Object.entries(e).filter(([,e])=>null!=e&&""!==e.trim()).map(([e,t])=>({name:e,sql:{sql:t,params:{}},isSubquery:!1})):[]}function u({meta:e,aliasMap:t}){let s=(0,a.useMemo)(()=>new Map(e?.map(e=>{let s=null!=t?t[e.name]??e.name:e.name;return[e.name,{...e,valueExpr:s,jsType:(0,o.rj)(e.type)}]})),[e,t]),n=(0,a.useMemo)(()=>d(t),[t]);return(0,a.useCallback)(e=>{let{[c.ID]:t,[c.ALIAS_WITH]:a,...i}=e;return{where:Object.entries(i).map(([e,t])=>{let a=s.get(e),n=a?.type,i=a?.jsType,c=a?.valueExpr;if(null==n)throw Error(`Column type not found for ${e}, ${JSON.stringify(s)}`);if(null==c)throw Error(`valueExpr not found for ${e}, ${JSON.stringify(s)}`);switch(i){case o.A2.Date:return l().format("?=parseDateTime64BestEffort(?, 9)",[l().raw(c),t]);case o.A2.Array:case o.A2.Map:return l().format("?=JSONExtract(?, ?)",[l().raw(c),t,n]);case o.A2.Tuple:return l().format("toJSONString(?)=?",[l().raw(c),t]);case o.A2.JSON:return l().format("lower(hex(MD5(toString(?))))=?",[l().raw(c),r()(t).toString()]);case o.A2.Dynamic:if(null==t||"null"===t)return l().format("isNull(??)",[c]);return(t.length>1e3||e.length>1e3)&&console.warn("Search value/object key too large."),l().format("toJSONString(?) = coalesce(toJSONString(JSONExtract(?, 'Dynamic')), toJSONString(?))",[l().raw(c),t,t]);default:if(null==t)return l().format("isNull(?)",[l().raw(c)]);if(t.length>512)return l().format("lower(hex(MD5(leftUTF8(?, 1000))))=?",[l().raw(c),r()(t.substring(0,1e3)).toString()]);return l().format("?=?",[l().raw(c),t])}}).join(" AND "),aliasWith:n}},[s,n])}},72075:(e,t,s)=>{"use strict";s.d(t,{L:()=>x,X:()=>p});var a=s(6029),n=s(75155);s(55729);var r=s(75828),i=s.n(r),l=s(58333),o=s(23474),c=s(79220),d=s(39696),u=s(68593),m=s(34011),h=s.n(m);let p=({data:e=[],columns:t,emptyMessage:s,hideHeader:n,borderless:r,density:l="normal",interactive:o,tableMeta:m})=>{let p=(0,c.N4)({data:e,columns:t,meta:m,getCoreRowModel:(0,d.HT)()});return e.length?(0,a.jsx)("div",{className:i()(h().tableWrapper,{[h().tableBorderless]:r,[h().tableDensityZero]:"zero"===l,[h().tableDensityCompact]:"compact"===l,[h().tableDensityComfortable]:"comfortable"===l,[h().tableInteractive]:o}),children:(0,a.jsxs)("table",{children:[!n&&(0,a.jsx)("thead",{children:p.getHeaderGroups().map(e=>(0,a.jsx)("tr",{children:e.headers.map(e=>(0,a.jsx)("th",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)("tbody",{children:p.getRowModel().rows.map(e=>(0,a.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,a.jsx)("td",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}):(0,a.jsx)("div",{className:h().emptyMessage,children:s})},x=e=>{let t,s,r,i,c=(0,n.c)(12),{onClick:d,title:u,label:m,biIcon:p}=e;return c[0]!==m?(t=m&&(0,a.jsx)("span",{children:m}),c[0]=m,c[1]=t):t=c[1],c[2]!==p?(s="chevron-up"===p&&(0,a.jsx)(l.A,{size:14}),c[2]=p,c[3]=s):s=c[3],c[4]!==p?(r="chevron-down"===p&&(0,a.jsx)(o.A,{size:14}),c[4]=p,c[5]=r):r=c[5],c[6]!==d||c[7]!==t||c[8]!==s||c[9]!==r||c[10]!==u?(i=(0,a.jsxs)("button",{className:h().tableCellButton,title:u,onClick:d,children:[t,s,r]}),c[6]=d,c[7]=t,c[8]=s,c[9]=r,c[10]=u,c[11]=i):i=c[11],i}},74620:e=>{e.exports={tableWrapper:"LogTable_tableWrapper__1X2n1",muted:"LogTable_muted__aIZSq",table:"LogTable_table__l63_F",tableHead:"LogTable_tableHead__sTgaD",tableRow:"LogTable_tableRow__7BXPl",tableRow__selected:"LogTable_tableRow__selected__DoaNL",rowButtons:"LogTable_rowButtons__XTh2c",rowContentButton:"LogTable_rowContentButton__fjkQI",expandButton:"LogTable_expandButton__nKsH0",expandedRowContent:"LogTable_expandedRowContent__Ps6mn",expanded:"LogTable_expanded___w9XA",expandButtonSeparator:"LogTable_expandButtonSeparator__lYPgm",isWrapped:"LogTable_isWrapped__ksgah",isTruncated:"LogTable_isTruncated__jXz22",iconActionButton:"LogTable_iconActionButton__hO7Fo",copied:"LogTable_copied__wZME1",fieldTextContainer:"LogTable_fieldTextContainer__4Dj7Q",fieldText:"LogTable_fieldText__zVjaq",chart:"LogTable_chart__8kFaD",truncated:"LogTable_truncated__Hv6oN",wrapped:"LogTable_wrapped__Dz8eR",fieldTextPopover:"LogTable_fieldTextPopover__dygEB"}},76115:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>q});var a=s(6029),n=s(75155),r=s(55729),i=s(71024),l=s.n(i),o=s(41038),c=s(1909),d=s(15215),u=s(73854),m=s(82641),h=s(48378),p=s(34834),x=s(43517),g=s(90124),f=s(25062),b=s(3635),y=s(63085),v=s(76013),_=s(64488),j=s(60481),S=s(94502),w=s(95352),E=s(62453),C=s(40228),N=s(58153),k=s(56514),A=s(69922),T=s(1639),I=s(46061),R=s(91939),L=s(64501),$=s(32479),M=s(93108),z=s(387),D=s(92917);let P=(0,z.lr)("Past 1h",!1),F={databaseName:"system",tableName:"query_log"};function O(e){let t,s,r,i,l,o,c,d,u,g,f,b,y,v,_,j,S,w,E,N,k,T,I,R,L,$,M,z,D,P,F,O=(0,n.c)(56),{searchedTimeRange:V,connection:B,onTimeRangeSelect:H}=e;return O[0]===Symbol.for("react.memo_cache_sentinel")?(t={height:400},O[0]=t):t=O[0],O[1]===Symbol.for("react.memo_cache_sentinel")?(s=[{valueExpression:"avg(ProfileEvent_OSCPUVirtualTimeMicroseconds) / 1000000",alias:"CPU Cores"}],r={databaseName:"system",tableName:"metric_log"},O[1]=s,O[2]=r):(s=O[1],r=O[2]),O[3]!==B||O[4]!==V?(i={select:s,from:r,where:"",connection:B,dateRange:V,timestampValueExpression:"event_time",displayType:m.t2.Line},O[3]=B,O[4]=V,O[5]=i):i=O[5],O[6]!==H||O[7]!==i?(l=(0,a.jsx)(h.x.Col,{span:6,children:(0,a.jsx)(A.w,{style:t,children:(0,a.jsx)(C.S,{title:"CPU Usage (Cores)",config:i,onTimeRangeSelect:H})})}),O[6]=H,O[7]=i,O[8]=l):l=O[8],O[9]===Symbol.for("react.memo_cache_sentinel")?(o={height:400},O[9]=o):o=O[9],O[10]===Symbol.for("react.memo_cache_sentinel")?(c=[{valueExpression:"avg(CurrentMetric_MemoryTracking)",alias:"Bytes"}],d={databaseName:"system",tableName:"metric_log"},O[10]=c,O[11]=d):(c=O[10],d=O[11]),O[12]===Symbol.for("react.memo_cache_sentinel")?(u={output:"byte",mantissa:2},O[12]=u):u=O[12],O[13]!==B||O[14]!==V?(g={select:c,from:d,where:"",connection:B,dateRange:V,timestampValueExpression:"event_time",displayType:m.t2.Line,numberFormat:u},O[13]=B,O[14]=V,O[15]=g):g=O[15],O[16]!==H||O[17]!==g?(f=(0,a.jsx)(h.x.Col,{span:6,children:(0,a.jsx)(A.w,{style:o,children:(0,a.jsx)(C.S,{title:"Memory Usage",config:g,onTimeRangeSelect:H})})}),O[16]=H,O[17]=g,O[18]=f):f=O[18],O[19]===Symbol.for("react.memo_cache_sentinel")?(b={height:400},O[19]=b):b=O[19],O[20]===Symbol.for("react.memo_cache_sentinel")?(y=[{aggFn:"avg",aggCondition:"",valueExpression:"ProfileEvent_OSReadChars",alias:"Bytes Read"},{aggFn:"avg",aggCondition:"",valueExpression:"ProfileEvent_OSWriteChars",alias:"Bytes Written"}],v={databaseName:"system",tableName:"metric_log"},O[20]=y,O[21]=v):(y=O[20],v=O[21]),O[22]===Symbol.for("react.memo_cache_sentinel")?(_={output:"byte",mantissa:2},O[22]=_):_=O[22],O[23]!==B||O[24]!==V?(j={select:y,from:v,where:"",connection:B,dateRange:V,timestampValueExpression:"event_time",displayType:m.t2.Line,numberFormat:_},O[23]=B,O[24]=V,O[25]=j):j=O[25],O[26]!==H||O[27]!==j?(S=(0,a.jsx)(h.x.Col,{span:6,children:(0,a.jsx)(A.w,{style:b,children:(0,a.jsx)(C.S,{title:"Disk",config:j,onTimeRangeSelect:H})})}),O[26]=H,O[27]=j,O[28]=S):S=O[28],O[29]===Symbol.for("react.memo_cache_sentinel")?(w={height:400},O[29]=w):w=O[29],O[30]===Symbol.for("react.memo_cache_sentinel")?(E=[{aggFn:"avg",aggCondition:"",valueExpression:"CurrentMetric_S3Requests",alias:"All Requests"},{aggFn:"avg",aggCondition:"",valueExpression:"ProfileEvent_S3GetObject",alias:"GetObject Requests"},{aggFn:"avg",aggCondition:"",valueExpression:"ProfileEvent_S3PutObject",alias:"PutObject Requests"},{aggFn:"avg",aggCondition:"",valueExpression:"ProfileEvent_S3ListObjects",alias:"ListObjects Requests"},{aggFn:"avg",aggCondition:"",valueExpression:"ProfileEvent_S3UploadPart",alias:"UploadPart Requests"}],N={databaseName:"system",tableName:"metric_log"},O[30]=E,O[31]=N):(E=O[30],N=O[31]),O[32]!==B||O[33]!==V?(k={select:E,from:N,connection:B,where:"",dateRange:V,timestampValueExpression:"event_time",displayType:m.t2.Line},O[32]=B,O[33]=V,O[34]=k):k=O[34],O[35]!==H||O[36]!==k?(T=(0,a.jsx)(h.x.Col,{span:6,children:(0,a.jsx)(A.w,{style:w,children:(0,a.jsx)(C.S,{title:"S3 Requests",config:k,onTimeRangeSelect:H})})}),O[35]=H,O[36]=k,O[37]=T):T=O[37],O[38]===Symbol.for("react.memo_cache_sentinel")?(I={height:400},O[38]=I):I=O[38],O[39]===Symbol.for("react.memo_cache_sentinel")?(R=(0,a.jsxs)(p.B,{gap:0,children:[(0,a.jsx)(x.E,{size:"sm",mb:"xs",children:"Network"}),(0,a.jsx)(x.E,{size:"xs",mb:"sm",children:"Network activity for the entire machine, not only Clickhouse."})]}),L=[{aggFn:"avg",aggCondition:"",valueExpression:"value"}],$={databaseName:"system",tableName:"asynchronous_metric_log"},O[39]=R,O[40]=L,O[41]=$):(R=O[39],L=O[40],$=O[41]),O[42]===Symbol.for("react.memo_cache_sentinel")?(M=[{valueExpression:"metric"}],O[42]=M):M=O[42],O[43]===Symbol.for("react.memo_cache_sentinel")?(z={output:"byte",mantissa:2},O[43]=z):z=O[43],O[44]!==B||O[45]!==V?(D={select:L,from:$,where:"metric ILIKE 'NetworkReceiveBytes_%' OR metric ILIKE 'NetworkSendBytes_%'",groupBy:M,connection:B,dateRange:V,timestampValueExpression:"event_time",displayType:m.t2.Line,numberFormat:z},O[44]=B,O[45]=V,O[46]=D):D=O[46],O[47]!==H||O[48]!==D?(P=(0,a.jsx)(h.x.Col,{span:6,children:(0,a.jsx)(A.w,{style:I,children:(0,a.jsx)(C.S,{title:R,config:D,onTimeRangeSelect:H})})}),O[47]=H,O[48]=D,O[49]=P):P=O[49],O[50]!==f||O[51]!==S||O[52]!==T||O[53]!==P||O[54]!==l?(F=(0,a.jsxs)(h.x,{mt:"md",children:[l,f,S,T,P]}),O[50]=f,O[51]=S,O[52]=T,O[53]=P,O[54]=l,O[55]=F):F=O[55],F}function V(e){let t,s,r,i,l,c,d,u,f,b,y,v,_,j,S,w,E,N,k,T,I,L,$,M,z,D,P=(0,n.c)(51),{searchedTimeRange:O,connection:V,onTimeRangeSelect:B}=e;P[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.Oq)(["queries","rows","bytes"]).withDefault("queries"),P[0]=t):t=P[0];let[H,W]=(0,o.ZA)("insertsBy",t);P[1]!==H?(s="queries"===H?[{type:"sql_ast",operator:"=",left:"query_kind",right:"'Insert'"},{type:"sql_ast",operator:"=",left:"type",right:"'QueryStart'"}]:[{type:"sql",condition:"query_kind IN ('Insert', 'AsyncInsertFlush')"},{type:"sql_ast",operator:"=",left:"type",right:"'QueryFinish'"}],P[1]=H,P[2]=s):s=P[2];let q=s;P[3]!==H?(r="queries"===H?[{aggFn:"count",valueExpression:"",aggCondition:"",alias:"Queries"}]:"rows"===H?[{aggFn:"sum",valueExpression:"written_rows",aggCondition:"",alias:"Rows"}]:[{aggFn:"sum",valueExpression:"written_bytes",aggCondition:"",alias:"Bytes"}],P[3]=H,P[4]=r):r=P[4],P[5]===Symbol.for("react.memo_cache_sentinel")?(i=[{valueExpression:"tables"}],P[5]=i):i=P[5],P[6]!==H?(l="bytes"===H?{output:"byte",mantissa:2}:void 0,P[6]=H,P[7]=l):l=P[7],P[8]!==V||P[9]!==q||P[10]!==O||P[11]!==r||P[12]!==l?(c={select:r,from:F,where:"",timestampValueExpression:"event_time",dateRange:O,displayType:m.t2.Line,filters:q,groupBy:i,connection:V,numberFormat:l},P[8]=V,P[9]=q,P[10]=O,P[11]=r,P[12]=l,P[13]=c):c=P[13];let J=c;P[14]===Symbol.for("react.memo_cache_sentinel")?(d={height:400},P[14]=d):d=P[14];let K="queries"===H?"Queries":"rows"===H?"Rows":"Bytes";P[15]!==K?(u=(0,a.jsxs)(x.E,{size:"sm",children:["Insert"," ",K," ","Per Table"]}),P[15]=K,P[16]=u):u=P[16];let G=H??"queries";return P[17]!==W?(f=e=>{W(e)},P[17]=W,P[18]=f):f=P[18],P[19]===Symbol.for("react.memo_cache_sentinel")?(b=[{label:"Queries",value:"queries"},{label:"Rows",value:"rows"},{label:"Bytes",value:"bytes"}],P[19]=b):b=P[19],P[20]!==G||P[21]!==f?(y=[(0,a.jsx)(g.I,{size:"xs",value:G,onChange:f,data:b})],P[20]=G,P[21]=f,P[22]=y):y=P[22],P[23]!==J||P[24]!==B||P[25]!==y||P[26]!==u?(v=(0,a.jsx)(h.x.Col,{span:12,children:(0,a.jsx)(A.w,{style:d,children:(0,a.jsx)(C.S,{title:u,toolbarPrefix:y,config:J,onTimeRangeSelect:B})})}),P[23]=J,P[24]=B,P[25]=y,P[26]=u,P[27]=v):v=P[27],P[28]===Symbol.for("react.memo_cache_sentinel")?(_={height:200},P[28]=_):_=P[28],P[29]===Symbol.for("react.memo_cache_sentinel")?(j=[{aggFn:"max",valueExpression:"value",aggCondition:"metric = 'MaxPartCountForPartition'",aggConditionLanguage:"sql",alias:"Max Parts per Partition"}],S={databaseName:"system",tableName:"asynchronous_metric_log"},P[29]=j,P[30]=S):(j=P[29],S=P[30]),P[31]!==V||P[32]!==O?(w={select:j,from:S,where:"",timestampValueExpression:"event_time",dateRange:O,connection:V},P[31]=V,P[32]=O,P[33]=w):w=P[33],P[34]!==B||P[35]!==w?(E=(0,a.jsx)(h.x.Col,{span:12,children:(0,a.jsx)(A.w,{style:_,children:(0,a.jsx)(C.S,{title:"Max Active Parts per Partition",config:w,showDisplaySwitcher:!1,showLegend:!1,onTimeRangeSelect:B})})}),P[34]=B,P[35]=w,P[36]=E):E=P[36],P[37]===Symbol.for("react.memo_cache_sentinel")?(N={height:400},P[37]=N):N=P[37],P[38]===Symbol.for("react.memo_cache_sentinel")?(k=(0,a.jsxs)(p.B,{gap:0,children:[(0,a.jsx)(x.E,{size:"sm",mb:"sm",children:"Active Parts Per Partition"}),(0,a.jsx)(x.E,{size:"xs",mb:"md",children:"Recommended to stay under 300, ClickHouse will automatically throttle inserts after 1,000 parts per partition and stop inserts at 3,000 parts per partition."})]}),P[38]=k):k=P[38],P[39]===Symbol.for("react.memo_cache_sentinel")?(T=[{aggFn:"count",valueExpression:"",alias:"Part Count"},{aggFn:"sum",valueExpression:"rows",alias:"Rows"},{valueExpression:"database",alias:"Database"},{valueExpression:"table",alias:"Table"},{valueExpression:"partition",alias:"Partition"}],I={databaseName:"system",tableName:"parts"},P[39]=T,P[40]=I):(T=P[39],I=P[40]),P[41]===Symbol.for("react.memo_cache_sentinel")?(L=[{valueExpression:"database"},{valueExpression:"table"},{valueExpression:"partition"}],P[41]=L):L=P[41],P[42]===Symbol.for("react.memo_cache_sentinel")?($=[{valueExpression:"count()",ordering:"DESC"}],M={limit:100},P[42]=$,P[43]=M):($=P[42],M=P[43]),P[44]!==V||P[45]!==O?(z=(0,a.jsx)(h.x.Col,{span:12,children:(0,a.jsx)(A.w,{style:N,children:(0,a.jsx)(R.A,{title:k,config:{dateRange:O,select:T,from:I,where:"active=1",groupBy:L,connection:V,orderBy:$,limit:M,selectGroupBy:!1}})})}),P[44]=V,P[45]=O,P[46]=z):z=P[46],P[47]!==v||P[48]!==E||P[49]!==z?(D=(0,a.jsxs)(h.x,{mt:"md",children:[v,E,z]}),P[47]=v,P[48]=E,P[49]=z,P[50]=D):D=P[50],D}function B(){let e,t,s,i,l,d,u,p,g,w,k,B,W,q,J,K,G,Y,U,Z,X,Q,ee,et,es,ea,en,er,ei,el,eo,ec,ed,eu,em,eh,ep,ex,eg,ef,eb,ey,ev,e_,ej,eS,ew,eE,eC,eN,ek,eA,eT,eI=(0,n.c)(115),{data:eR}=(0,M.ZY)(),[eL,e$]=(0,o.ZA)("connection");eI[0]===Symbol.for("react.memo_cache_sentinel")?(e={latencyMin:o.YC,latencyMax:o.YC},eI[0]=e):e=eI[0];let[eM,ez]=(0,o.ab)(e);eI[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.Oq)(["selects","inserts","infrastructure"]).withDefault("selects"),eI[1]=t):t=eI[1];let[eD,eP]=(0,o.ZA)("tab",t),eF=eL??eR?.[0]?.id??"";eI[2]!==eF?(s={values:{connection:eF}},eI[2]=eF,eI[3]=s):s=eI[3];let{control:eO}=(0,c.mN)(s);eI[4]!==eO?(i={control:eO,name:"connection"},eI[4]=eO,eI[5]=i):i=eI[5];let eV=(0,c.FH)(i),eB=(0,D.ZC)(eV);eI[6]!==eB||eI[7]!==e$||eI[8]!==eV?(l=()=>{eB!==eV&&e$(eV??null)},d=[eV,e$,eB],eI[6]=eB,eI[7]=e$,eI[8]=eV,eI[9]=l,eI[10]=d):(l=eI[9],d=eI[10]),(0,r.useEffect)(l,d);let[eH,eW]=(0,r.useState)("Past 1h");eI[11]===Symbol.for("react.memo_cache_sentinel")?(u={initialDisplayValue:"Past 1h",initialTimeRange:P,setDisplayedTimeInputValue:eW},eI[11]=u):u=eI[11];let{searchedTimeRange:eq,onSearch:eJ,onTimeRangeSelect:eK}=(0,z.R0)(u),[eG]=(0,r.useState)(!1);eI[12]!==eG||eI[13]!==eK||eI[14]!==eq?(p={searchedTimeRange:eq,onTimeRangeSelect:eK,isLive:eG},eI[12]=eG,eI[13]=eK,eI[14]=eq,eI[15]=p):p=eI[15];let{manualRefreshCooloff:eY,refresh:eU}=(0,$.r)(p),{latencyMin:eZ,latencyMax:eX}=eM;eI[16]!==eX?(g=null!=eX?[{type:"sql_ast",operator:"<",left:"query_duration_ms",right:`${eX}`}]:[],eI[16]=eX,eI[17]=g):g=eI[17],eI[18]!==eZ?(w=null!=eZ?[{type:"sql_ast",operator:">",left:"query_duration_ms",right:`${eZ}`}]:[],eI[18]=eZ,eI[19]=w):w=eI[19],eI[20]!==g||eI[21]!==w?(k=[...g,...w],eI[20]=g,eI[21]=w,eI[22]=k):k=eI[22];let eQ=k;e:{if(null!=eM.latencyMin||null!=eM.latencyMax){let e;eI[23]!==eJ||eI[24]!==ez?(e=[(0,a.jsx)(f.$,{size:"xs",variant:"subtle",onClick:()=>{ez({latencyMin:null,latencyMax:null}),eJ("Past 1h")},children:"Reset"},"heatmap-reset-latency-filter")],eI[23]=eJ,eI[24]=ez,eI[25]=e):e=eI[25],B=e;break e}B=void 0}let e0=B;return eI[26]===Symbol.for("react.memo_cache_sentinel")?(W=(0,a.jsx)(L.A,{requireSource:!1}),eI[26]=W):W=eI[26],eI[27]===Symbol.for("react.memo_cache_sentinel")?(q=(0,a.jsx)(x.E,{size:"xl",children:"Clickhouse Dashboard"}),eI[27]=q):q=eI[27],eI[28]!==eO?(J=(0,a.jsxs)(b.Y,{children:[q,(0,a.jsx)(E.r,{control:eO,name:"connection",size:"xs"})]}),eI[28]=eO,eI[29]=J):J=eI[29],eI[30]!==eH||eI[31]!==eJ?(K=(0,a.jsx)("form",{onSubmit:e=>(e.preventDefault(),eJ(eH),!1),children:(0,a.jsx)(N.A,{inputValue:eH,setInputValue:eW,onSearch:eJ})}),eI[30]=eH,eI[31]=eJ,eI[32]=K):K=eI[32],eI[33]===Symbol.for("react.memo_cache_sentinel")?(G=(0,a.jsx)(S.A,{size:18}),eI[33]=G):G=eI[33],eI[34]!==eY||eI[35]!==eU?(Y=(0,a.jsx)(y.m,{withArrow:!0,label:"Refresh dashboard",fz:"xs",color:"gray",children:(0,a.jsx)(v.M,{onClick:eU,loading:eY,disabled:eY,variant:"secondary",title:"Refresh dashboard","aria-label":"Refresh dashboard",size:"lg",children:G})}),eI[34]=eY,eI[35]=eU,eI[36]=Y):Y=eI[36],eI[37]!==K||eI[38]!==Y?(U=(0,a.jsxs)(b.Y,{gap:"xs",children:[K,Y]}),eI[37]=K,eI[38]=Y,eI[39]=U):U=eI[39],eI[40]!==J||eI[41]!==U?(Z=(0,a.jsxs)(b.Y,{justify:"space-between",children:[J,U]}),eI[40]=J,eI[41]=U,eI[42]=Z):Z=eI[42],eI[43]===Symbol.for("react.memo_cache_sentinel")?(X=(0,a.jsxs)(_.t.List,{children:[(0,a.jsx)(_.t.Tab,{value:"selects",children:"Select"}),(0,a.jsx)(_.t.Tab,{value:"inserts",children:"Inserts"}),(0,a.jsx)(_.t.Tab,{value:"infrastructure",children:"Infrastructure"})]}),eI[43]=X):X=eI[43],eI[44]===Symbol.for("react.memo_cache_sentinel")?(Q={height:250},eI[44]=Q):Q=eI[44],eI[45]===Symbol.for("react.memo_cache_sentinel")?(ee=[{aggFn:"heatmap",valueExpression:"query_duration_ms"}],eI[45]=ee):ee=eI[45],eI[46]!==eF||eI[47]!==eQ||eI[48]!==eq?(et={displayType:m.t2.Heatmap,select:ee,from:F,dateRange:eq,granularity:"auto",timestampValueExpression:"event_time",connection:eF,where:"query_kind='Select' AND (\n                  type='ExceptionWhileProcessing' OR type='QueryFinish' \n                )",filters:eQ},eI[46]=eF,eI[47]=eQ,eI[48]=eq,eI[49]=et):et=eI[49],eI[50]!==eK||eI[51]!==ez?(es=(e,t,s,a)=>{eK(new Date(1e3*e),new Date(1e3*t)),ez({latencyMax:a,latencyMin:s})},eI[50]=eK,eI[51]=ez,eI[52]=es):es=eI[52],eI[53]!==e0||eI[54]!==et||eI[55]!==es?(ea=(0,a.jsx)(h.x.Col,{span:12,children:(0,a.jsx)(A.w,{style:Q,children:(0,a.jsx)(T.A,{title:"Query Latency",toolbarSuffix:e0,config:et,onFilter:es})})}),eI[53]=e0,eI[54]=et,eI[55]=es,eI[56]=ea):ea=eI[56],eI[57]===Symbol.for("react.memo_cache_sentinel")?(en={height:400},eI[57]=en):en=eI[57],eI[58]===Symbol.for("react.memo_cache_sentinel")?(er=[{aggFn:"count",valueExpression:"",aggCondition:"",alias:"Query Count"}],ei=[{valueExpression:"tables"},{valueExpression:"type"}],eI[58]=er,eI[59]=ei):(er=eI[58],ei=eI[59]),eI[60]===Symbol.for("react.memo_cache_sentinel")?(el={limit:1e3},eI[60]=el):el=eI[60],eI[61]!==eF||eI[62]!==eQ||eI[63]!==eq?(eo={select:er,groupBy:ei,selectGroupBy:!0,dateRange:eq,connection:eF,timestampValueExpression:"event_time",from:F,granularity:"auto",where:"query_kind='Select' AND (\n                  type='ExceptionWhileProcessing' OR type='QueryFinish' \n                  OR type='ExceptionBeforeStart'\n                )",filters:eQ,limit:el,displayType:m.t2.Line},eI[61]=eF,eI[62]=eQ,eI[63]=eq,eI[64]=eo):eo=eI[64],eI[65]!==eK?(ec=(e,t)=>{eK(e,t)},eI[65]=eK,eI[66]=ec):ec=eI[66],eI[67]!==eo||eI[68]!==ec?(ed=(0,a.jsx)(h.x.Col,{span:12,children:(0,a.jsx)(A.w,{style:en,children:(0,a.jsx)(C.S,{title:"Query Count by Table",config:eo,onTimeRangeSelect:ec})})}),eI[67]=eo,eI[68]=ec,eI[69]=ed):ed=eI[69],eI[70]===Symbol.for("react.memo_cache_sentinel")?(eu={height:400},eI[70]=eu):eu=eI[70],eI[71]===Symbol.for("react.memo_cache_sentinel")?(em=[{aggFn:"count",valueExpression:"",alias:"Count"},{aggFn:"sum",valueExpression:"query_duration_ms",alias:"Total Duration (ms)"},{aggFn:"any",valueExpression:"query",alias:"Query Example"}],eI[71]=em):em=eI[71],eI[72]===Symbol.for("react.memo_cache_sentinel")?(eh=[{valueExpression:"normalized_query_hash"},{valueExpression:"tables"}],eI[72]=eh):eh=eI[72],eI[73]===Symbol.for("react.memo_cache_sentinel")?(ep=[{valueExpression:"sum(query_duration_ms)",ordering:"DESC"}],eI[73]=ep):ep=eI[73],eI[74]===Symbol.for("react.memo_cache_sentinel")?(ex={type:"sql_ast",operator:"=",left:"query_kind",right:"'Select'"},eI[74]=ex):ex=eI[74],eI[75]!==eQ?(eg=[...eQ,ex],eI[75]=eQ,eI[76]=eg):eg=eI[76],eI[77]===Symbol.for("react.memo_cache_sentinel")?(ef={limit:20},eI[77]=ef):ef=eI[77],eI[78]!==eF||eI[79]!==eq||eI[80]!==eg?(eb=(0,a.jsx)(h.x.Col,{span:12,children:(0,a.jsx)(A.w,{style:eu,children:(0,a.jsx)(R.A,{title:"Most Time Consuming Query Patterns",config:{select:em,dateRange:eq,from:F,where:"(\n                  type='ExceptionWhileProcessing' OR type='QueryFinish' \n                )",timestampValueExpression:"event_time",groupBy:eh,connection:eF,orderBy:ep,filters:eg,selectGroupBy:!1,limit:ef}})})}),eI[78]=eF,eI[79]=eq,eI[80]=eg,eI[81]=eb):eb=eI[81],eI[82]===Symbol.for("react.memo_cache_sentinel")?(ey={height:400},ev=(0,a.jsx)(x.E,{size:"sm",mb:"md",children:"Slowest Queries"}),eI[82]=ey,eI[83]=ev):(ey=eI[82],ev=eI[83]),eI[84]===Symbol.for("react.memo_cache_sentinel")?(e_=[{valueExpression:"query_duration_ms",ordering:"DESC"}],eI[84]=e_):e_=eI[84],eI[85]===Symbol.for("react.memo_cache_sentinel")?(ej={type:"sql_ast",operator:"=",left:"query_kind",right:"'Select'"},eI[85]=ej):ej=eI[85],eI[86]!==eQ?(eS=[...eQ,ej],eI[86]=eQ,eI[87]=eS):eS=eI[87],eI[88]===Symbol.for("react.memo_cache_sentinel")?(ew={limit:100},eI[88]=ew):ew=eI[88],eI[89]!==eF||eI[90]!==eq||eI[91]!==eS?(eE=(0,a.jsx)(h.x.Col,{span:12,children:(0,a.jsxs)(A.w,{style:ey,children:[ev,(0,a.jsx)(I.rD,{renderRowDetails:H,config:{select:"event_time, query_kind, \n                read_rows,\n                formatReadableSize(memory_usage) as memory_usage,\n                query_duration_ms, \n                query",dateRange:eq,from:F,where:"(\n                  type='ExceptionWhileProcessing' OR type='QueryFinish' \n                )",timestampValueExpression:"event_time",connection:eF,orderBy:e_,filters:eS,limit:ew}})]})}),eI[89]=eF,eI[90]=eq,eI[91]=eS,eI[92]=eE):eE=eI[92],eI[93]!==ea||eI[94]!==ed||eI[95]!==eb||eI[96]!==eE?(eC=(0,a.jsx)(_.t.Panel,{value:"selects",children:(0,a.jsxs)(h.x,{mt:"md",children:[ea,ed,eb,eE]})}),eI[93]=ea,eI[94]=ed,eI[95]=eb,eI[96]=eE,eI[97]=eC):eC=eI[97],eI[98]!==eF||eI[99]!==eK||eI[100]!==eq?(eN=(0,a.jsx)(_.t.Panel,{value:"inserts",children:(0,a.jsx)(V,{searchedTimeRange:eq,connection:eF,onTimeRangeSelect:eK})}),eI[98]=eF,eI[99]=eK,eI[100]=eq,eI[101]=eN):eN=eI[101],eI[102]!==eF||eI[103]!==eK||eI[104]!==eq?(ek=(0,a.jsx)(_.t.Panel,{value:"infrastructure",children:(0,a.jsx)(O,{searchedTimeRange:eq,connection:eF,onTimeRangeSelect:eK})}),eI[102]=eF,eI[103]=eK,eI[104]=eq,eI[105]=ek):ek=eI[105],eI[106]!==eP||eI[107]!==eC||eI[108]!==eN||eI[109]!==ek||eI[110]!==eD?(eA=(0,a.jsxs)(_.t,{mt:"md",keepMounted:!1,defaultValue:"selects",onChange:eP,value:eD,children:[X,eC,eN,ek]}),eI[106]=eP,eI[107]=eC,eI[108]=eN,eI[109]=ek,eI[110]=eD,eI[111]=eA):eA=eI[111],eI[112]!==Z||eI[113]!==eA?(eT=(0,a.jsxs)(j.a,{p:"sm","data-testid":"clickhouse-dashboard-page",children:[W,Z,eA]}),eI[112]=Z,eI[113]=eA,eI[114]=eT):eT=eI[114],eT}function H(e){return(0,a.jsx)(w.Ay,{extensions:[(0,d.ll)()],editable:!1,value:(0,u.GP)(e.query),theme:"dark",lang:"sql",maxHeight:"200px"})}let W=l()(async()=>B,{ssr:!1});W.getLayout=k.D;let q=W},76539:(e,t,s)=>{"use strict";s.d(t,{A:()=>E,g:()=>w});var a,n=s(6029),r=s(75155),i=s(55729),l=s(67264),o=s.n(l),c=s(41038),d=s(1909),u=s(3145),m=s(78253),h=s(3635),p=s(90124),x=s(43085),g=s(39785),f=s(17273),b=s(81973),y=s(92917),v=s(37901),_=s(50374),j=s(46061),S=((a=S||{}).All="all",a.Custom="custom",a.Host="host",a.Node="k8s.node.name",a.Pod="k8s.pod.name",a.Service="service",a);function w(e){let t,s,a,n=(0,r.c)(11),l=(0,c.ZA)("contextRowId",c.tU),o=(0,c.ZA)("contextRowSource",c.tU);n[0]!==l||n[1]!==o?(t={contextRowId:l,contextRowSource:o},n[0]=l,n[1]=o,n[2]=t):t=n[2];let d=t,u=(0,i.useState)(null),m=(0,i.useState)(null);n[3]!==u||n[4]!==m?(s={contextRowId:u,contextRowSource:m},n[3]=u,n[4]=m,n[5]=s):s=n[5];let h=s,p=e?h:d;return n[6]!==p.contextRowId[0]||n[7]!==p.contextRowId[1]||n[8]!==p.contextRowSource[0]||n[9]!==p.contextRowSource[1]?(a={contextRowId:p.contextRowId[0],contextRowSource:p.contextRowSource[0],setContextRowId:p.contextRowId[1],setContextRowSource:p.contextRowSource[1]},n[6]=p.contextRowId[0],n[7]=p.contextRowId[1],n[8]=p.contextRowSource[0],n[9]=p.contextRowSource[1],n[10]=a):a=n[10],a}function E(e){let t,s,a,l,c,S,E,C,N,k,A,T,I,R,L,$,M,z,D,P,F,O,V,B,H,W,q,J,K=(0,r.c)(98),{source:G,dbSqlRowTableConfig:Y,rowData:U,rowId:Z,breadcrumbPath:X,onBreadcrumbClick:Q}=e;K[0]!==X?(t=void 0===X?[]:X,K[0]=X,K[1]=t):t=K[1];let ee=t,et=U[v.$_.TIMESTAMP];K[2]!==Y?(s=Y??{},K[2]=Y,K[3]=s):s=K[3];let{whereLanguage:es}=s,ea=void 0===es?"lucene":es;K[4]===Symbol.for("react.memo_cache_sentinel")?(a=o()("30s"),K[4]=a):a=K[4];let[en,er]=(0,i.useState)(a),[ei,el]=(0,i.useState)("all");K[5]!==ea?(l=ea??(0,f.S)()??"lucene",K[5]=ea,K[6]=l):l=K[6],K[7]!==l?(c={defaultValues:{where:"",whereLanguage:l}},K[7]=l,K[8]=c):c=K[8];let{control:eo}=(0,d.mN)(c);K[9]!==eo?(S={control:eo,name:"where"},K[9]=eo,K[10]=S):S=K[10];let ec=(0,d.FH)(S),[ed]=(0,g.o)(ec,1e3),{contextRowId:eu,contextRowSource:em,setContextRowId:eh,setContextRowSource:ep}=w(ee.length>0),ex=em||"";K[11]!==ex?(E={id:ex},K[11]=ex,K[12]=E):E=K[12];let{data:eg}=(0,b.Fo)(E);K[13]===Symbol.for("react.memo_cache_sentinel")?(C=[],K[13]=C):C=K[13];let[ef,eb]=(0,i.useState)(C);K[14]!==eh||K[15]!==ep?(N=()=>{eh(null),ep(null)},K[14]=eh,K[15]=ep,K[16]=N):N=K[16];let ey=N,{setChildModalOpen:ev}=(0,i.useContext)(_.D);K[17]!==eh||K[18]!==ep||K[19]!==G.id?(k=e=>{eh(e.where),eb(e.aliasWith),ep(G.id)},K[17]=eh,K[18]=ep,K[19]=G.id,K[20]=k):k=K[20];let e_=k;K[21]!==et?(A=new Date(et),K[21]=et,K[22]=A):A=K[22];let ej=A,eS=ej.getTime()-en/2;K[23]!==eS?(T=new Date(eS),K[23]=eS,K[24]=T):T=K[24];let ew=ej.getTime()+en/2;K[25]!==ew?(I=new Date(ew),K[25]=ew,K[26]=I):I=K[26],K[27]!==T||K[28]!==I?(R=[T,I],K[27]=T,K[28]=I,K[29]=R):R=K[29];let eE=R;K[30]!==U?(L=U[v.$_.RESOURCE_ATTRIBUTES]??{},K[30]=U,K[31]=L):L=K[31];let{"k8s.node.name":eC,"k8s.pod.name":eN,"host.name":ek,"service.name":eA}=L;K[32]===Symbol.for("react.memo_cache_sentinel")?($={field:"",value:""},K[32]=$):$=K[32];let eT=ed||"";K[33]!==eT?(M={field:"",value:eT},K[33]=eT,K[34]=M):M=K[34],K[35]!==eA?(z={field:"service.name",value:eA},K[35]=eA,K[36]=z):z=K[36],K[37]!==ek?(D={field:"host.name",value:ek},K[37]=ek,K[38]=D):D=K[38],K[39]!==eN?(P={field:"k8s.pod.name",value:eN},K[39]=eN,K[40]=P):P=K[40],K[41]!==eC?(F={field:"k8s.node.name",value:eC},K[41]=eC,K[42]=F):F=K[42],K[43]!==M||K[44]!==z||K[45]!==D||K[46]!==P||K[47]!==F?(O={all:$,custom:M,service:z,host:D,"k8s.pod.name":P,"k8s.node.name":F},K[43]=M,K[44]=z,K[45]=D,K[46]=P,K[47]=F,K[48]=O):O=K[48];let eI=O;K[49]!==eI||K[50]!==ea?(V=e=>{let t="sql"===ea,s=eI[e];return"all"===e?s.value:"custom"===e?s.value.trim():(0,y.ji)("ResourceAttributes",s.field,s.value,t)},K[49]=eI,K[50]=ea,K[51]=V):V=K[51];let eR=V;K[52]!==ek||K[53]!==eC||K[54]!==eN||K[55]!==eA?(B=function(){return[{label:"All",value:"all"},...eA?[{label:"Service",value:"service"}]:[],...ek?[{label:"Host",value:"host"}]:[],...eN?[{label:"Pod",value:"k8s.pod.name"}]:[],...eC?[{label:"Node",value:"k8s.node.name"}]:[],{label:"Custom",value:"custom"}]},K[52]=ek,K[53]=eC,K[54]=eN,K[55]=eA,K[56]=B):B=K[56];let eL=B;e:{let e,t,s;K[57]!==ei||K[58]!==eR?(e=eR(ei),K[57]=ei,K[58]=eR,K[59]=e):e=K[59];let a=e;if(!Y){let e,t,s=G.defaultTableSelectExpression||"";K[60]===Symbol.for("react.memo_cache_sentinel")?(e={limit:200},K[60]=e):e=K[60];let n=`${G.timestampValueExpression} DESC`;K[61]!==eE||K[62]!==ea||K[63]!==G.connection||K[64]!==G.from||K[65]!==G.timestampValueExpression||K[66]!==s||K[67]!==n||K[68]!==a?(t={connection:G.connection,from:G.from,timestampValueExpression:G.timestampValueExpression,select:s,limit:e,orderBy:n,where:a,whereLanguage:ea,dateRange:eE},K[61]=eE,K[62]=ea,K[63]=G.connection,K[64]=G.from,K[65]=G.timestampValueExpression,K[66]=s,K[67]=n,K[68]=a,K[69]=t):t=K[69],H=t;break e}K[70]===Symbol.for("react.memo_cache_sentinel")?(t=[],K[70]=t):t=K[70],K[71]!==Y||K[72]!==eE||K[73]!==ea||K[74]!==a?(s={...Y,where:a,whereLanguage:ea,dateRange:eE,filters:t},K[71]=Y,K[72]=eE,K[73]=ea,K[74]=a,K[75]=s):s=K[75],H=s}let e$=H;return K[76]!==eI||K[77]!==e$||K[78]!==ei||K[79]!==eo||K[80]!==eL||K[81]!==e_||K[82]!==en||K[83]!==Z||K[84]!==ev||K[85]!==G?(W=e$&&(0,n.jsxs)(m.s,{direction:"column",mih:"0px",style:{flexGrow:1},children:[(0,n.jsxs)(h.Y,{justify:"space-between",p:"sm",children:[(0,n.jsx)(p.I,{size:"xs",data:eL(),value:ei,onChange:e=>el(e)}),"custom"===ei&&(0,n.jsx)(f.A,{tableConnection:(0,u.VO)(G),control:eo,name:"where",enableHotkey:!0,size:"xs"}),(0,n.jsx)(p.I,{size:"xs",data:[{label:"100ms",value:o()("100ms").toString()},{label:"500ms",value:o()("500ms").toString()},{label:"1s",value:o()("1s").toString()},{label:"5s",value:o()("5s").toString()},{label:"30s",value:o()("30s").toString()},{label:"1m",value:o()("1m").toString()},{label:"5m",value:o()("5m").toString()},{label:"15m",value:o()("15m").toString()}],value:en.toString(),onChange:e=>er(Number(e))})]}),(0,n.jsx)(h.Y,{p:"sm",children:(0,n.jsxs)("div",{children:["all"!==ei&&(0,n.jsxs)(x.E,{size:"md",variant:"default",children:[ei,":",eI[ei].value]}),(0,n.jsxs)(x.E,{size:"md",variant:"default",children:["Time range: \xb1",o()(en/2)]})]})}),(0,n.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,n.jsx)(j.rD,{sourceId:G.id,highlightedLineId:Z,showExpandButton:!1,isLive:!1,config:e$,queryKeyPrefix:"context",onRowDetailsClick:e_,onChildModalOpen:ev})})]}),K[76]=eI,K[77]=e$,K[78]=ei,K[79]=eo,K[80]=eL,K[81]=e_,K[82]=en,K[83]=Z,K[84]=ev,K[85]=G,K[86]=W):W=K[86],K[87]!==ee||K[88]!==ef||K[89]!==eu||K[90]!==eg||K[91]!==ey||K[92]!==Q||K[93]!==U?(q=eu&&eg&&(0,n.jsx)(_.A,{source:eg,rowId:eu,aliasWith:ef,onClose:ey,isNestedPanel:!0,breadcrumbPath:[...ee,{label:"Surrounding Context",rowData:U}],onBreadcrumbClick:Q}),K[87]=ee,K[88]=ef,K[89]=eu,K[90]=eg,K[91]=ey,K[92]=Q,K[93]=U,K[94]=q):q=K[94],K[95]!==W||K[96]!==q?(J=(0,n.jsxs)(n.Fragment,{children:[W,q]}),K[95]=W,K[96]=q,K[97]=J):J=K[97],J}},78694:(e,t,s)=>{"use strict";s.d(t,{iV:()=>g,ir:()=>v,$K:()=>f,hF:()=>b,Qx:()=>y});var a=s(6029),n=s(75155),r=s(55729);s(82203);var i=s(75828),l=(s(63085),s(8468)),o=s(20158),c=s(70114),d=s(23474);s(38067),s(26355);s(94720),s(3635);var u=s(72075),m=s(68593);s(7565),s(94364);var h=s(92917),p=s(66773),x=s.n(p);let g=e=>{let t,s,i,l,o,u,m=(0,n.c)(15),{title:h,children:p,initiallyCollapsed:x}=e,[g,f]=r.useState(x??!1);return m[0]!==g?(t=()=>f(!g),s=g?(0,a.jsx)(c.A,{size:14,className:"me-2"}):(0,a.jsx)(d.A,{size:14,className:"me-2"}),m[0]=g,m[1]=t,m[2]=s):(t=m[1],s=m[2]),m[3]!==h?(i=(0,a.jsx)("div",{className:"fs-7",children:h}),m[3]=h,m[4]=i):i=m[4],m[5]!==t||m[6]!==s||m[7]!==i?(l=(0,a.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,i]}),m[5]=t,m[6]=s,m[7]=i,m[8]=l):l=m[8],m[9]!==p||m[10]!==g?(o=g?null:(0,a.jsx)("div",{className:"mb-4",children:p}),m[9]=p,m[10]=g,m[11]=o):o=m[11],m[12]!==l||m[13]!==o?(u=(0,a.jsxs)("div",{className:"my-3",children:[l,o]}),m[12]=l,m[13]=o,m[14]=u):u=m[14],u},f=e=>{let t,s,r=(0,n.c)(5),{children:i,title:l}=e;return r[0]!==l?(t=l&&(0,a.jsx)("div",{className:x().panelSectionWrapperTitle,children:l}),r[0]=l,r[1]=t):t=r[1],r[2]!==i||r[3]!==t?(s=(0,a.jsxs)("div",{className:x().panelSectionWrapper,children:[t,i]}),r[2]=i,r[3]=t,r[4]=s):s=r[4],s};m.k;let b=[{accessorKey:"0",header:"Header",size:260,cell:({row:e})=>(0,a.jsx)("div",{className:"text-truncate",title:e.original[0],children:e.original[0]})},{size:m.k,accessorKey:"1",header:"Value"}],y=[{accessorKey:"label",header:"Label",size:260,cell:({row:e})=>(0,a.jsx)("span",{children:e.original.label})},{size:m.k,accessorKey:"value",header:"Value",cell:({row:e})=>(0,a.jsx)("span",{className:e.original.className,children:e.original.value})}],v=()=>{let e,t,s,r,i,c=(0,n.c)(7),[d,u]=(0,h.Mj)("kbd-shortcuts-dismissed",!1);c[0]!==u?(e=()=>{u(!0)},c[0]=u,c[1]=e):e=c[1];let m=e;return d?null:(c[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(l.u,{className:"me-1",children:"â†"}),s=(0,a.jsx)(l.u,{children:"â†’"}),c[2]=t,c[3]=s):(t=c[2],s=c[3]),c[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsxs)("div",{children:["Use ",t,s," arrow keys or ",(0,a.jsx)(l.u,{className:"me-1",children:"k"}),(0,a.jsx)(l.u,{children:"j"})," to move through events"]}),(0,a.jsx)("div",{className:x().kbdDivider}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.u,{children:"ESC"})," to close"]})]}),c[4]=r):r=c[4],c[5]!==m?(i=(0,a.jsx)("div",{className:x().kbdShortcuts,children:(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center ",children:[r,(0,a.jsx)(o.J,{"aria-label":"Hide",onClick:m})]})}),c[5]=m,c[6]=i):i=c[6],i)}},80925:(e,t,s)=>{"use strict";s.d(t,{S:()=>g,t:()=>h});var a=s(55729),n=s(67843),r=s(35467),i=s(67270),l=s(12482),o=s(92917),c=s(40147),d=s(78550),u=s(49672),m=s(81973);function h({traceSource:e,sessionSource:t,dateRange:s,where:a,whereLanguage:n},o){let{enabled:m=!0}=o||{},{getFieldExpression:h,isLoading:p}=(0,c.A)(e),{getFieldExpression:x,isLoading:g}=(0,c.A)(t),f=["teamId","teamName","userEmail","userName"],b="sessions",y=(0,u.fu)(),v=(0,d.Ge)();return(0,l.I)({queryKey:["sessions",e?.id,t?.id,s,a,n],queryFn:async()=>{if(!e||!t||!h||!x)return[];let l=h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId"),[o,c,d]=await Promise.all([(0,i.PV)({select:[{valueExpression:`${e.serviceNameExpression}`,alias:"serviceName"},{valueExpression:l,alias:"sessionId"},{alias:"maxTimestamp",valueExpression:`MAX(${e.timestampValueExpression})`},{alias:"minTimestamp",valueExpression:`MIN(${e.timestampValueExpression})`},{aggFn:"count",alias:"sessionCount",valueExpression:"*"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.eventAttributesExpression}.component:"user-interaction"`,valueExpression:"",alias:"interactionCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.statusCodeExpression}:error`,valueExpression:"",alias:"errorCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.spanNameExpression}:"record init"`,valueExpression:"",alias:"recordingCount"},...f.map(t=>({valueExpression:`MAX(${h(e.eventAttributesExpression??"SpanAttributes",t)})`,alias:t}))],from:e.from,dateRange:s,where:`${e.resourceAttributesExpression}.rum.sessionId:*`,whereLanguage:"lucene",...a&&{filters:[{type:n??"lucene",condition:a}]},timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e.connection,groupBy:"serviceName, sessionId"},v,e.querySettings),(0,i.PV)({select:[{valueExpression:`DISTINCT ${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:t.from,dateRange:s,where:`${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b})`,whereLanguage:"sql",timestampValueExpression:t.timestampValueExpression,implicitColumnExpression:t.implicitColumnExpression,connection:t.connection},v,t.querySettings),(0,i.PV)({select:[{valueExpression:`DISTINCT ${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:e.from,dateRange:s,where:`(${e.spanNameExpression}='record init' OR ${e.spanNameExpression}='visibility') AND (${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b}))`,whereLanguage:"sql",timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e?.connection},v,e.querySettings)]),u=(0,r.kg)`
        WITH _${b} AS (${o}),
        ${b} AS (
          SELECT * 
          FROM _${b}
          ${a?"":"HAVING interactionCount > 0 OR recordingCount > 0"}
          ORDER BY maxTimestamp DESC
          LIMIT 500
        )
      `,m=a&&a.length>0?(0,r.kg)`
        ${u},
        sessionIdsWithRecordings AS (${c}),
        sessionIdsWithUserActivity AS (${d})
        SELECT *
        FROM ${b}
        WHERE ${b}.sessionId IN (
          SELECT sessionIdsWithRecordings.sessionId FROM sessionIdsWithRecordings
        ) OR ${b}.sessionId IN (
          SELECT sessionIdsWithUserActivity.sessionId FROM sessionIdsWithUserActivity
        )
      `:(0,r.kg)`
        ${u}
        SELECT *
        FROM ${b}
        `;return await y.query({query:m.sql,query_params:m.params,connectionId:e?.connection}).then(e=>e.json())},staleTime:3e5,...o,enabled:!!m&&!p&&!g})}class p extends Error{}async function*x(e){let t=e.getReader();try{for(;;){let{done:e,value:s}=await t.read();if(e)return;yield s}}finally{t.releaseLock()}}function g({serviceName:e,sessionId:t,sourceId:s,startDate:r,endDate:l,limit:c=100,onEvent:h,onEnd:g,resultsKey:f,getSessionSourceFieldExpression:b},y){let v=y?.keepPreviousData??!1,_=y?.shouldAbortPendingRequest??!0,j=(0,d.Ge)(),[S,w]=(0,a.useState)({key:"",data:[]}),[E,C]=(0,a.useState)(!0),[N,k]=(0,a.useState)(!0),A=(0,a.useRef)(null),[T,I]=(0,a.useState)("idle"),R=(0,a.useRef)(void 0),{data:L}=(0,m.Fo)({id:s}),$=(0,a.useCallback)(async({pageParam:s=0,limit:a})=>{if(!L)return;let o=[],d=0,y=r.getTime().toString(),_=l.getTime().toString(),S=(a??c).toString(),E=s.toString(),N=new AbortController;A.current=N,C(!0),I("fetching"),R.current="fetching";let T=await (0,i.PV)({select:[{valueExpression:m.kJ.implicitColumnExpression,alias:"b"},{valueExpression:`simpleJSONExtractInt(${m.kJ.implicitColumnExpression}, 'type')`,alias:"t"},{valueExpression:`${b(m.kJ.eventAttributesExpression,"rr-web.chunk")}`,alias:"ck"},{valueExpression:`${b(m.kJ.eventAttributesExpression,"rr-web.total-chunks")}`,alias:"tcks"}],dateRange:[new Date(parseInt(y)),new Date(parseInt(_))],from:L.from,whereLanguage:"lucene",where:`ServiceName:"${e}" AND ${m.kJ.resourceAttributesExpression}.rum.sessionId:"${t}"`,timestampValueExpression:L.timestampValueExpression,implicitColumnExpression:m.kJ.implicitColumnExpression,connection:L.connection,orderBy:`${L.timestampValueExpression} ASC`,limit:{limit:Math.min(1e6,parseInt(S)),offset:parseInt(E)}},j,L.querySettings),$=(async()=>{let e,t=(0,u.W)(),s=await t.query({query:T.sql,query_params:T.params,format:"JSONEachRow",connectionId:L.connection});for await(let t of(e=h||(v?e=>o.push(e):e=>w(t=>(0,n.Ay)(t,t=>{t.key=f??t.key??"DEFAULT_KEY",t.data.push(e)}))),x(s.stream())))for(let s of t)try{let t=s.json();d++,e(t)}catch{}g?.(),v&&w({key:f??"DEFAULT_KEY",data:o}),(0===d||d<c)&&k(!1)})();try{await Promise.race([$,new Promise((e,t)=>{setTimeout(()=>{t(new p("Timeout"))},18e4)})])}catch(e){e instanceof p?(C(!1),I("idle"),R.current="idle",N.abort(),console.warn("Closing event source due to timeout"),g?.(new p)):console.error(e)}N.abort(),C(!1),I("idle"),R.current="idle"},[L,e,t,r,l,c,v,w,h,g,f,j,b]),M=[t,r,l,c].join("||"),z=(0,o.ZC)(M);(0,a.useEffect)(()=>{z!=M&&("fetching"!==R.current||_)&&(_&&"fetching"===R.current&&A.current?.abort(),v||w({key:"",data:[]}),k(!0),$({pageParam:0}))},[z,M,_,$,v]);let D=(0,a.useCallback)(e=>{N&&"idle"===R.current&&S.data.length>0&&$({pageParam:S.data.length,limit:e?.limit}).then(()=>{e?.cb?.()})},[$,S.data.length,N]),P=(0,a.useCallback)(()=>{A.current?.abort()},[]);return{hasNextPage:N,isFetching:E,results:S.data,resultsKey:S.key,fetchNextPage:D,abort:P}}},81408:e=>{e.exports={wrapper:"SessionSubpanelV2_wrapper__5kN48",eventList:"SessionSubpanelV2_eventList__CJCVt",eventListHeader:"SessionSubpanelV2_eventListHeader__Hbhpi",eventListContainer:"SessionSubpanelV2_eventListContainer__r2wEN",eventRow:"SessionSubpanelV2_eventRow__XFl1t",eventRowError:"SessionSubpanelV2_eventRowError__61zDU",eventRowIcon:"SessionSubpanelV2_eventRowIcon__C371Y",eventRowTitle:"SessionSubpanelV2_eventRowTitle__BCmpn",eventRowSuccess:"SessionSubpanelV2_eventRowSuccess___a9Kd",eventRowHighlighted:"SessionSubpanelV2_eventRowHighlighted__YWXks",eventRowContent:"SessionSubpanelV2_eventRowContent__Y9_5z",eventRowTimestamp:"SessionSubpanelV2_eventRowTimestamp__MPRLq",eventRowDescription:"SessionSubpanelV2_eventRowDescription__XJ9b7",player:"SessionSubpanelV2_player___Erie",playerHeader:"SessionSubpanelV2_playerHeader__qMRJo",playerHeaderUrl:"SessionSubpanelV2_playerHeaderUrl__K3MEs",playerContainer:"SessionSubpanelV2_playerContainer__m7RnT",domPlayerWrapper:"SessionSubpanelV2_domPlayerWrapper__wKZpR",domPlayerWrapperPaused:"SessionSubpanelV2_domPlayerWrapperPaused__9xhaT",playerTimestamp:"SessionSubpanelV2_playerTimestamp__ebCzv",playerPlaybar:"SessionSubpanelV2_playerPlaybar__FEw0u",playerToolbar:"SessionSubpanelV2_playerToolbar__7sL7N"}},83101:e=>{e.exports={resizeHandle:"ResizablePanel_resizeHandle__4fEVM",resizeYHandle:"ResizablePanel_resizeYHandle__1pBbm"}},91939:(e,t,s)=>{"use strict";s.d(t,{A:()=>$});var a=s(6029),n=s(75155),r=s(55729),i=s(35467),l=s(43517),o=s(60481),c=s(24589),d=s(43152),u=s(82203),m=s.n(u),h=s(75828),p=s.n(h),x=s(8737),g=s(24602),f=s(40387),b=s(79220),y=s(39696),v=s(21440),_=s(17421),j=s(48423),S=s(55024),w=s(36600),E=s(68593),C=s(92917);let N=({data:e,groupColumnName:t,columns:s,getRowSearchLink:n,tableBottom:i,sorting:l,onSortingChange:o,variant:c="default"})=>{let d=(0,w.Kh)(),u=(0,r.useRef)(null),h=u.current?.clientWidth,N=s.filter(e=>!1!==e.visible).length+1,k=Math.min(100-s.filter(e=>!1!==e.visible).map(({columnWidthPercent:e})=>Math.max(null!=h?100/h*100:0,e??1/N*100)).reduce((e,t)=>e+t,0),75),A=[...null!=t?[{accessorKey:"group",header:t,size:null!=h?Math.max(k/100*h,100):200}]:[],...s.filter(e=>!1!==e.visible).map(({id:e,dataKey:t,displayName:s,numberFormat:r,columnWidthPercent:i},l)=>({id:e,accessorKey:t,header:s,accessorFn:e=>e[t],cell:({getValue:e,row:t})=>{let s=e(),i=s??null;if(r&&(i=(0,C.ZV)(s,r)),null==n)return i;let l=n(t.original);return l?(0,a.jsx)(m(),{href:l,className:p()("align-top overflow-hidden py-1 pe-3",{"text-break":D,"text-truncate":!D}),style:{display:"block",color:"inherit",textDecoration:"none"},children:i}):(0,a.jsx)("div",{className:p()("align-top overflow-hidden py-1 pe-3",{"text-break":D,"text-truncate":!D}),children:i})},size:l===N-2?E.k:null!=h&&null!=i?Math.max(i/100*h,100):null!=h?h/N:200,enableResizing:l!==N-2}))],T=(0,b.N4)({data:e,columns:A,getCoreRowModel:(0,y.HT)(),enableColumnResizing:!0,columnResizeMode:"onChange",enableSorting:!0,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(l);o?.(t??null)}else o?.(e??null)},state:{sorting:l}}),{rows:I}=T.getRowModel(),R=(0,v.Te)({count:I.length,getScrollElement:()=>u.current,estimateSize:(0,r.useCallback)(()=>58,[]),overscan:10,paddingEnd:20}),L=R.getVirtualItems(),$=R.getTotalSize(),[M,z]=(0,r.useMemo)(()=>L.length>0?[Math.max(0,L[0].start-R.options.scrollMargin),Math.max(0,$-L[L.length-1].end)]:[0,0],[L,R.options.scrollMargin,$]),[D,P]=(0,r.useState)(!1),{csvData:F}=(0,S.u)(e,s.map(e=>({dataKey:e.dataKey,displayName:e.displayName})),{groupColumnName:t});return(0,a.jsxs)("div",{className:"overflow-auto h-100 fs-8",ref:u,children:[(0,a.jsxs)("table",{className:"w-100",style:{tableLayout:"fixed",borderCollapse:"collapse",fontFamily:"var(--font-ibm-plex-mono)"},children:[(0,a.jsx)("thead",{style:{position:"sticky",top:0,background:"muted"===c?"var(--color-bg-muted)":"var(--color-bg-body)"},children:T.getHeaderGroups().map(e=>(0,a.jsx)("tr",{children:e.headers.map((t,s)=>(0,a.jsx)(j.A,{header:t,isLast:s===e.headers.length-1,lastItemButtons:(0,a.jsx)(a.Fragment,{children:s===e.headers.length-1&&(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)(x.N,{onClick:()=>P(e=>!e),children:(0,a.jsx)(g.A,{size:14})}),(0,a.jsx)(_.P,{data:F,filename:`${d}_table_results`,className:"fs-8 ms-2",title:"Download table as CSV",children:(0,a.jsx)(f.A,{size:14})})]})})},t.id))},e.id))}),(0,a.jsxs)("tbody",{children:[M>0&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:99999,style:{height:`${M}px`}})}),L.map(e=>{let t=I[e.index];return(0,a.jsx)("tr",{className:"bg-muted-hover","data-index":e.index,ref:R.measureElement,children:t.getVisibleCells().map(e=>(0,a.jsx)("td",{title:`${e.getValue()}`,children:(0,b.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.key)}),z>0&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:99999,style:{height:`${z}px`}})})]})]}),i]})};var k=s(57389),A=s(78744),T=s(81973),I=s(15628),R=s(99082),L=s(88339);function $(e){let t,s,u,m,h,p,x,g,f,b,y,v=(0,n.c)(56),{config:_,getRowSearchLink:j,enabled:S,queryKeyPrefix:w,onSortingChange:E,sort:$,hiddenColumns:P,title:F,toolbarPrefix:O,toolbarSuffix:V,showMVOptimizationIndicator:B,variant:H}=e,W=void 0===S||S;v[0]!==P?(t=void 0===P?[]:P,v[0]=P,v[1]=t):t=v[1];let q=t,J=void 0===B||B;v[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],v[2]=s):s=v[2];let[K,G]=(0,r.useState)(s);v[3]!==_.source?(u={id:_.source},v[3]=_.source,v[4]=u):u=v[4];let{data:Y}=(0,T.Fo)(u),U=$||K;v[5]!==E?(m=e=>{G(e),E&&E(e)},v[5]=E,v[6]=m):m=v[6];let Z=m;if(v[7]!==_||v[8]!==U){if(h=(0,d.Z7)(_),U.length){let e;v[10]!==U?(e=U.map(D),v[10]=U,v[11]=e):e=v[11],h.orderBy=e}v[7]=_,v[8]=U,v[9]=h}else h=v[9];let X=h,{data:Q}=(0,k.d)(X);v[12]!==W||v[13]!==w?(p={enabled:W,queryKeyPrefix:w},v[12]=W,v[13]=w,v[14]=p):p=v[14];let{data:ee,fetchNextPage:et,hasNextPage:es,isLoading:ea,isError:en,error:er}=(0,A.A)(X,p),{observerRef:ei}=(0,C.BL)(et);e:{let e;if("string"==typeof _.select){let e;v[15]===Symbol.for("react.memo_cache_sentinel")?(e=[],v[15]=e):e=v[15],x=e;break e}v[16]!==_.select?(e=_.select.reduce(z,[]),v[16]=_.select,v[17]=e):e=v[17],x=e}let el=x;t:{let e,t;v[18]!==ee?.data?(e=ee?.data??[],v[18]=ee?.data,v[19]=e):e=v[19];let s=e;if(0===s.length){let e;v[20]===Symbol.for("react.memo_cache_sentinel")?(e=[],v[20]=e):e=v[20],g=e;break t}if(v[21]!==el||v[22]!==_.numberFormat||v[23]!==q||v[24]!==X.groupBy||v[25]!==s[0]){let e=[];X.groupBy&&"string"==typeof X.groupBy&&(e=X.groupBy.split(",").map(M)),t=Object.keys(s?.[0]).filter(e=>!q.includes(e)).map(t=>({id:el.includes(t)?`"${t}"`:t,dataKey:t,displayName:t,numberFormat:e.includes(t)?void 0:_.numberFormat})),v[21]=el,v[22]=_.numberFormat,v[23]=q,v[24]=X.groupBy,v[25]=s[0],v[26]=t}else t=v[26];g=t}let eo=g;if(v[27]!==Q||v[28]!==X||v[29]!==J||v[30]!==Y||v[31]!==O||v[32]!==V){let e;if(f=[],O&&O.length>0&&f.push(...O),Y&&J){let e;v[34]!==X||v[35]!==Y?(e=(0,a.jsx)(R.A,{config:X,source:Y,variant:"icon"},"db-table-chart-mv-indicator"),v[34]=X,v[35]=Y,v[36]=e):e=v[36],f.push(e)}v[37]!==Q||v[38]!==X.dateRange?(e=(0,d.m9)({mvOptimizationData:Q,originalDateRange:X.dateRange}),v[37]=Q,v[38]=X.dateRange,v[39]=e):e=v[39];let t=e;t&&f.push(t),V&&V.length>0&&f.push(...V),v[27]=Q,v[28]=X,v[29]=J,v[30]=Y,v[31]=O,v[32]=V,v[33]=f}else f=v[33];let ec=f;return v[40]!==eo||v[41]!==ee||v[42]!==U||v[43]!==er||v[44]!==ei||v[45]!==j||v[46]!==Z||v[47]!==es||v[48]!==en||v[49]!==ea||v[50]!==H?(b=ea&&!ee?(0,a.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):en&&er?(0,a.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted overflow-scroll",children:[(0,a.jsx)(l.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,a.jsxs)(o.a,{mt:"sm",children:[(0,a.jsx)(l.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,a.jsx)(c.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:er.message}),er instanceof i.p1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,a.jsx)(L.V,{data:er?.query})]})]})]}):ee?.data.length===0?(0,a.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,a.jsx)(N,{data:ee?.data??[],columns:eo,getRowSearchLink:j,sorting:U,onSortingChange:Z,variant:H,tableBottom:es&&(0,a.jsx)(l.E,{ref:ei,ta:"center",children:"Loading..."})}),v[40]=eo,v[41]=ee,v[42]=U,v[43]=er,v[44]=ei,v[45]=j,v[46]=Z,v[47]=es,v[48]=en,v[49]=ea,v[50]=H,v[51]=b):b=v[51],v[52]!==b||v[53]!==F||v[54]!==ec?(y=(0,a.jsx)(I.A,{title:F,toolbarItems:ec,children:b}),v[52]=b,v[53]=F,v[54]=ec,v[55]=y):y=v[55],y}function M(e){return e.trim()}function z(e,t){return t.alias&&e.push(t.alias),e}function D(e){return{valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}}},94364:(e,t,s)=>{"use strict";s.d(t,{f:()=>a});let a=e=>({isLoading:!1,error:null,enrichedFrame:null})},94937:(e,t,s)=>{"use strict";s.d(t,{A:()=>v});var a=s(6029),n=s(75155),r=s(55729),i=s(82203),l=s.n(i),o=s(80519),c=s.n(o),d=s(37659),u=s(3635),m=s(43517),h=s(63085),p=s(34834),x=s(25062),g=s(56795),f=s(28975),b=s(41279),y=s(18006);function v(e){let t,s,i,o,v,_,j,S,w,E,C,N,k,A,T,I,R,L,$=(0,n.c)(62),{displayedKey:M,name:z,nameLanguage:D,sqlExpression:P,value:F,onPropertyAddClick:O,generateSearchUrl:V}=e,B=void 0===D?"lucene":D,[H,W]=(0,r.useState)(!1);$[0]!==F?(t=(0,y.OH)(F),$[0]=F,$[1]=t):t=$[1];let q=t;if(!(O||V||q)){let e,t=M||z;return $[2]!==z||$[3]!==t||$[4]!==F?(e=(0,a.jsxs)("div",{className:"bg-highlighted px-2 py-0.5 me-1 my-1",children:[t,": ",F]},z),$[2]=z,$[3]=t,$[4]=F,$[5]=e):e=$[5],e}if($[6]!==M||$[7]!==V||$[8]!==q||$[9]!==z||$[10]!==B||$[11]!==O||$[12]!==H||$[13]!==P||$[14]!==F){let e,t,n="sql"===B?c().format("? = ?",[c().raw(z),F]):`${z}:${"string"==typeof F?`"${F}"`:F}`;o=d.A,A="top",T=!1,v=!0,_=H,j=W,$[29]===Symbol.for("react.memo_cache_sentinel")?(e={wordBreak:"break-word"},$[29]=e):e=$[29],$[30]!==M||$[31]!==q||$[32]!==z||$[33]!==H||$[34]!==F?(t=q?(0,a.jsxs)("a",{href:encodeURI(F),target:"_blank",rel:"noopener noreferrer",className:"d-flex flex-row align-items-center bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",children:[M||z,(0,a.jsx)(g.A,{size:14,className:"ms-1"})]}):(0,a.jsxs)(u.Y,{className:"bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",wrap:"nowrap",gap:0,onClick:()=>W(!H),children:[M||z,":",(0,a.jsx)(m.E,{size:"xs",ms:4,maw:300,truncate:!0,children:F})]}),$[30]=M,$[31]=q,$[32]=z,$[33]=H,$[34]=F,$[35]=t):t=$[35],$[36]!==t||$[37]!==F?(S=(0,a.jsx)(d.A.Target,{children:(0,a.jsx)(h.m,{label:F,withArrow:!0,maw:400,multiline:!0,style:e,position:"bottom",children:t})}),$[36]=t,$[37]=F,$[38]=S):S=$[38],i=d.A.Dropdown,k=2,s=p.B,w=0,E="stretch",$[39]!==O||$[40]!==P||$[41]!==F?(C=O&&(0,a.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,a.jsx)(f.A,{size:14}),onClick:()=>{O(P,F),W(!1)},children:"Add to Search"}),$[39]=O,$[40]=P,$[41]=F,$[42]=C):C=$[42],N=V&&(0,a.jsx)(l(),{href:V(n,B),children:(0,a.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,a.jsx)(b.A,{size:14}),children:"Search This Value"})}),$[6]=M,$[7]=V,$[8]=q,$[9]=z,$[10]=B,$[11]=O,$[12]=H,$[13]=P,$[14]=F,$[15]=s,$[16]=i,$[17]=o,$[18]=v,$[19]=_,$[20]=j,$[21]=S,$[22]=w,$[23]=E,$[24]=C,$[25]=N,$[26]=k,$[27]=A,$[28]=T}else s=$[15],i=$[16],o=$[17],v=$[18],_=$[19],j=$[20],S=$[21],w=$[22],E=$[23],C=$[24],N=$[25],k=$[26],A=$[27],T=$[28];return $[43]!==s||$[44]!==w||$[45]!==E||$[46]!==C||$[47]!==N?(I=(0,a.jsxs)(s,{gap:w,justify:E,children:[C,N]}),$[43]=s,$[44]=w,$[45]=E,$[46]=C,$[47]=N,$[48]=I):I=$[48],$[49]!==i||$[50]!==I||$[51]!==k?(R=(0,a.jsx)(i,{p:k,children:I}),$[49]=i,$[50]=I,$[51]=k,$[52]=R):R=$[52],$[53]!==o||$[54]!==v||$[55]!==_||$[56]!==j||$[57]!==S||$[58]!==R||$[59]!==A||$[60]!==T?(L=(0,a.jsxs)(o,{position:A,withinPortal:T,withArrow:v,opened:_,onChange:j,children:[S,R]}),$[53]=o,$[54]=v,$[55]=_,$[56]=j,$[57]=S,$[58]=R,$[59]=A,$[60]=T,$[61]=L):L=$[61],L}},96958:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(6029),n=s(75155),r=s(75828),i=s.n(r);function l(e){let t,s,r,l,o,c,d,u,m,h,p,x=(0,n.c)(23);x[0]!==e?({children:s,onClick:l,active:t,className:r,style:c,...o}=e,x[0]=e,x[1]=t,x[2]=s,x[3]=r,x[4]=l,x[5]=o,x[6]=c):(t=x[1],s=x[2],r=x[3],l=x[4],o=x[5],c=x[6]);let g=!t;x[7]!==t||x[8]!==r||x[9]!==g?(d=i()("text-center cursor-pointer",{"fw-bold text-white-hover":t,"text-muted-hover":g},r),x[7]=t,x[8]=r,x[9]=g,x[10]=d):d=x[10],x[11]!==s?(u=(0,a.jsx)("span",{children:s}),x[11]=s,x[12]=u):u=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(m={height:2},x[13]=m):m=x[13];let f=t?"var(--color-text-brand)":"var(--color-border)";return x[14]!==f?(h=(0,a.jsx)("div",{className:"w-100 mt-2",style:m,children:(0,a.jsx)("div",{className:"h-100 w-100",style:{background:f}})}),x[14]=f,x[15]=h):h=x[15],x[16]!==l||x[17]!==o||x[18]!==c||x[19]!==d||x[20]!==u||x[21]!==h?(p=(0,a.jsxs)("div",{className:d,onClick:l,style:c,...o,children:[u,h]}),x[16]=l,x[17]=o,x[18]=c,x[19]=d,x[20]=u,x[21]=h,x[22]=p):p=x[22],p}function o(e){let t,s,r,o,c=(0,n.c)(14),{items:d,activeItem:u,className:m,onClick:h,"data-testid":p}=e;if(c[0]!==m?(t=i()("d-flex flex-wrap",m),c[0]=m,c[1]=t):t=c[1],c[2]!==u||c[3]!==d||c[4]!==h){let e;c[6]!==u||c[7]!==h?(e=e=>(0,a.jsx)(l,{"data-testid":`tab-${String(e.value).toLowerCase()}`,active:e.value===u,onClick:()=>h?.(e.value),children:(0,a.jsx)("span",{className:"mx-4 text-nowrap",children:e.text})},e.value),c[6]=u,c[7]=h,c[8]=e):e=c[8],s=d.map(e),c[2]=u,c[3]=d,c[4]=h,c[5]=s}else s=c[5];return c[9]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(l,{className:"flex-grow-1 pe-none",children:"\xa0"}),c[9]=r):r=c[9],c[10]!==p||c[11]!==t||c[12]!==s?(o=(0,a.jsxs)("div",{className:t,"data-testid":p,children:[s,r]}),c[10]=p,c[11]=t,c[12]=s,c[13]=o):o=c[13],o}}},e=>{e.O(0,[7756,883,2928,6171,5554,910,1606,1909,6747,3062,1445,2990,4607,9979,8855,5165,5948,9353,4528,8224,1021,6514,3234,8374,3172,6593,636,8792],()=>e(e.s=55933)),_N_E=e.O()}]);