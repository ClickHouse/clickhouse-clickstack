(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7712],{225:(e,t,s)=>{"use strict";s.d(t,{z:()=>i});var r=s(6029),n=s(75155),a=s(98142);let i=()=>{let e,t=(0,n.c)(2);if(a.bp){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)("span",{children:["Please open an issue on"," ",(0,r.jsx)("a",{href:"https://github.com/hyperdxio/hyperdx/issues",target:"_blank",children:"GitHub"}),"."]}),t[0]=e):e=t[0],e}return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("span",{children:"Please contact support."}),t[1]=e):e=t[1],e}},2326:e=>{e.exports={wrapper:"PlaybarSlider_wrapper__WAjbf",markers:"PlaybarSlider_markers__X51XN",markerDot:"PlaybarSlider_markerDot__X23nO"}},3061:(e,t,s)=>{"use strict";s.d(t,{A:()=>$});var r=s(6029),n=s(75155),a=s(38206),i=s(3635),l=s(94502),o=s(29594),c=s.n(o),d=s(2615),u=s(78075),m=s(93251),h=s(49672),p=s(81973),x=s(92917),g=s(78550);let f=e=>e.sourceMetricType?`${e.source}~${e.sourceMetricType}`:`${e.source}`,b=e=>{let[t,s]=e.split("~");return{sourceId:t,metricType:s}};function v(e){return e.isLoading}function y(e){return e.isFetching}function _(e){return e.data??[]}function j(e){return e.expression}function S(e){return e.isError}function w(e){return e.isFetching}function E(e){return e.isLoading}function C(e){let{isLoading:t,data:s}=e;return(void 0===s?[]:s).map(e=>{let{key:s,value:r}=e;return[s,{values:r.map(N),isLoading:t}]})}function N(e){return e.toString()}function k(e){let{data:t}=e;return!!t}function A(e){let[t,s]=e;return{key:t,data:s}}let T=e=>{let t,s,i,l=(0,n.c)(11),{filter:o,onChange:c,value:d,values:u,isLoading:m}=e;l[0]!==u?(t=u?.toSorted().map(L),l[0]=u,l[1]=t):t=l[1];let h=t,p=d??null;l[2]!==h?(s=h||[],l[2]=h,l[3]=s):s=l[3];let x=`dashboard-filter-select-${o.name}`;return l[4]!==o.name||l[5]!==m||l[6]!==c||l[7]!==p||l[8]!==s||l[9]!==x?(i=(0,r.jsx)(a.l,{placeholder:o.name,value:p,data:s,searchable:!0,clearable:!0,allowDeselect:!0,size:"xs",maxDropdownHeight:280,disabled:m,variant:"filled",w:200,limit:20,onChange:c,"data-testid":x}),l[4]=o.name,l[5]=m,l[6]=c,l[7]=p,l[8]=s,l[9]=x,l[10]=i):i=l[10],i},$=e=>{let t,s,a,o,N=(0,n.c)(13),{filters:$,dateRange:L,filterValues:I,onSetFilterValue:R}=e;N[0]!==L||N[1]!==$?(t={filters:$,dateRange:L},N[0]=L,N[1]=$,N[2]=t):t=N[2];let{data:M,isFetching:D}=function(e){let t,s,r,a,i,l,o,N,T,$,L=(0,n.c)(37),{filters:I,dateRange:R}=e,M=(0,g.Ge)();L[0]!==R||L[1]!==I?(t={filters:I,dateRange:R},L[0]=R,L[1]=I,L[2]=t):t=L[2];let{data:D,isFetching:z,isLoading:F}=function(e){let t,s,r,a,i,l,o=(0,n.c)(21),{filters:m,dateRange:S}=e,w=(0,h.fu)(),E=(0,g.Ge)(),{data:C,isLoading:N}=(0,p.oE)();if(o[0]!==m){for(let e of(t=new Map,m)){let s=f(e);t.has(s)?t.get(s).push(e):t.set(s,[e])}o[0]=m,o[1]=t}else t=o[1];let k=t;o[2]!==w||o[3]!==S||o[4]!==k||o[5]!==N||o[6]!==E||o[7]!==C?(s={queries:Array.from(k.entries()).filter(e=>{let[t]=e;return C?.some(e=>e.id===b(t).sourceId)}).map(e=>{let[t,s]=e,{sourceId:r,metricType:n}=b(t),a=C.find(e=>e.id===r),i=s.map(j),l=(0,x.U6)(a,n)??"",o={...c()(a,["timestampValueExpression","connection"]),from:{databaseName:a.from.databaseName,tableName:l},dateRange:S,source:a.id,where:"",whereLanguage:"sql",select:""};return{queryKey:["dashboard-filters-key-value-calls",r,n,S,i],enabled:!N,staleTime:3e5,queryFn:async e=>{let{signal:t}=e;return await (0,d.YR)({chartConfig:o,source:a,clickhouseClient:w,metadata:E,keys:i,signal:t})}}})},o[2]=w,o[3]=S,o[4]=k,o[5]=N,o[6]=E,o[7]=C,o[8]=s):s=o[8];let A=(0,u.E)(s);return o[9]!==A?(r=A.map(_).flat(),o[9]=A,o[10]=r):r=o[10],o[11]!==N||o[12]!==A?(a=N||A.some(y),o[11]=N,o[12]=A,o[13]=a):a=o[13],o[14]!==N||o[15]!==A?(i=N||A.every(v),o[14]=N,o[15]=A,o[16]=i):i=o[16],o[17]!==r||o[18]!==a||o[19]!==i?(l={data:r,isFetching:a,isLoading:i},o[17]=r,o[18]=a,o[19]=i,o[20]=l):l=o[20],l}(t),{data:P,isLoading:q}=(0,p.oE)();L[3]!==P?(s=P??[],L[3]=P,L[4]=s):s=L[4],L[5]!==s?(r=(0,x.Dt)(s,"id"),L[5]=s,L[6]=r):r=L[6];let O=r,V=(0,m.jE)();if(L[7]!==D||L[8]!==F||L[9]!==q||L[10]!==M||L[11]!==V||L[12]!==O){let e;L[14]!==F||L[15]!==q||L[16]!==M||L[17]!==V||L[18]!==O?(e=e=>{let{chartConfig:t,keys:s}=e,r=["dashboard-filter-key-values",t.from,s],n=O.get(t.source);return{queryKey:[...r,t],placeholderData:()=>{let e=V.getQueriesData({queryKey:r}).map(A).filter(k).toSorted((e,t)=>{let s=V.getQueryState(e.key)?.dataUpdatedAt??0;return(V.getQueryState(t.key)?.dataUpdatedAt??0)-s});return e[0]?.data},enabled:!F&&!q,staleTime:3e5,queryFn:async e=>{let{signal:r}=e;return M.getKeyValues({chartConfig:t,keys:s,limit:1e4,disableRowLimit:!0,signal:r,source:n})}}},L[14]=F,L[15]=q,L[16]=M,L[17]=V,L[18]=O,L[19]=e):e=L[19],a=D.map(e),L[7]=D,L[8]=F,L[9]=q,L[10]=M,L[11]=V,L[12]=O,L[13]=a}else a=L[13];L[20]!==a?(i={queries:a},L[20]=a,L[21]=i):i=L[21];let H=(0,u.E)(i);L[22]!==H?(l=new Map(H.flatMap(C)),L[22]=H,L[23]=l):l=L[23];let B=l;return L[24]!==F||L[25]!==H?(o=F||H.every(E),L[24]=F,L[25]=H,L[26]=o):o=L[26],L[27]!==z||L[28]!==H?(N=z||H.some(w),L[27]=z,L[28]=H,L[29]=N):N=L[29],L[30]!==H?(T=H.some(S),L[30]=H,L[31]=T):T=L[31],L[32]!==B||L[33]!==o||L[34]!==N||L[35]!==T?($={data:B,isLoading:o,isFetching:N,isError:T},L[32]=B,L[33]=o,L[34]=N,L[35]=T,L[36]=$):$=L[36],$}(t);return N[3]!==I||N[4]!==M||N[5]!==$||N[6]!==R?(s=Object.values($).map(e=>{let t=M?.get(e.expression);return(0,r.jsx)(T,{filter:e,isLoading:!t,onChange:t=>R(e.expression,t),values:t?.values,value:I[e.expression]?.included.values().next().value?.toString()},e.id)}),N[3]=I,N[4]=M,N[5]=$,N[6]=R,N[7]=s):s=N[7],N[8]!==D?(a=D&&(0,r.jsx)(l.A,{className:"spin-animate",size:12}),N[8]=D,N[9]=a):a=N[9],N[10]!==s||N[11]!==a?(o=(0,r.jsxs)(i.Y,{mt:"sm",children:[s,a]}),N[10]=s,N[11]=a,N[12]=o):o=N[12],o};function L(e){return{value:e,label:e}}},18006:(e,t,s)=>{"use strict";s.d(t,{N4:()=>a,OH:()=>i,z4:()=>n});var r=s(37901);function n(e=[]){return e.map(({sqlExpression:e,alias:t})=>({valueExpression:e,alias:t||e}))}function a(e,t=[],s,n){let i=new Map,l=new Map,o=new Map,c=(0,r.bn)(n);try{for(let e of s)for(let{sqlExpression:s,luceneExpression:r,alias:n}of t){let t=n||s,a=c.includes(s.split(".")[0])?`toString(${s})`:s;l.set(t,a),r&&o.set(t,r);let d=e[t];d&&"string"==typeof d&&(i.has(t)||i.set(t,new Set),i.get(t).add(d))}}catch(e){console.error("Error extracting attributes from data",e)}return Array.from(i.entries()).flatMap(([t,s])=>[...s].map(s=>({displayedKey:t,value:s,sql:l.get(t),lucene:o.get(t),source:e})))}function i(e){try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}},20699:e=>{e.exports={timelineRow:"TimelineChart_timelineRow__qebNk",timelineRowActive:"TimelineChart_timelineRowActive__V6ZZf",labelContainer:"TimelineChart_labelContainer__6r6Eb"}},24885:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(55729);let n=function(e,t="right"){let[s,n]=(0,r.useState)(e),a=(0,r.useRef)(0),i=(0,r.useRef)(0),l="top"===t||"bottom"===t,o=l?"clientY":"clientX",c="right"===t||"top"===t?-1:1,d=(0,r.useCallback)(e=>{let t=l?window.innerHeight:window.innerWidth,s=e[o]-a.current,r=l?window.innerHeight:document.body.offsetWidth;n(Math.min(Math.max(10,i.current+s/t*100*c),(r-25)/t*100))},[l,o,c]),u=(0,r.useCallback)(()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d]),m=(0,r.useCallback)(e=>{e.preventDefault(),a.current=e[o],i.current=s,document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)},[o,s,d,u]);return(0,r.useEffect)(()=>()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d,u]),{size:s,startResize:m}}},25156:()=>{},26355:(e,t,s)=>{"use strict";s.d(t,{A:()=>M});var r=s(6029),n=s(75155),a=s(55729),i=s(75828),l=s.n(i),o=s(70921),c=s(67549),d=s(40399),u=s(91544),m=s.n(u),h=s(59513),p=s.n(h),x=s(77494),g=s.n(x),f=s(97554),b=s.n(f),v=s(64022),y=s.n(v),_=s(84450),j=s.n(_),S=s(22273),w=s(33958),E=s(88302),C=s(74805),N=s(65723),k=s.n(N);let A=(0,o.eU)({normallyExpanded:!1}),T=a.memo(a.forwardRef((e,t)=>{let s=(0,n.c)(19),{value:a}=e;if(g()(a)){let e;return s[0]!==t?(e=(0,r.jsx)("span",{ref:t,className:k().null,children:"null"}),s[0]=t,s[1]=e):e=s[1],e}if(j()(a)){let e;return s[2]!==t||s[3]!==a?(e=(0,r.jsx)("span",{ref:t,className:k().string,children:a}),s[2]=t,s[3]=a,s[4]=e):e=s[4],e}if(b()(a)){let e;return s[5]!==t||s[6]!==a?(e=(0,r.jsx)("span",{ref:t,className:k().number,children:a}),s[5]=t,s[6]=a,s[7]=e):e=s[7],e}if(p()(a)){let e,n=a?"true":"false";return s[8]!==t||s[9]!==n?(e=(0,r.jsx)("span",{ref:t,className:k().boolean,children:n}),s[8]=t,s[9]=n,s[10]=e):e=s[10],e}if(y()(a)){let e,n;return s[11]!==a?(e=Object.keys(a),s[11]=a,s[12]=e):e=s[12],s[13]!==t||s[14]!==e.length?(n=(0,r.jsxs)("span",{ref:t,className:k().object,children:["{}"," ",e.length," keys"]}),s[13]=t,s[14]=e.length,s[15]=n):n=s[15],n}if(m()(a)){let e;return s[16]!==t||s[17]!==a.length?(e=(0,r.jsxs)("span",{ref:t,className:k().array,children:["[]"," ",a.length," items"]}),s[16]=t,s[17]=a.length,s[18]=e):e=s[18],e}return null})),$=a.memo(e=>{let t,s,a,i=(0,n.c)(12),{keyName:l,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}=e,{getLineActions:h}=(0,c.md)(A);e:{let e;if(h){let e;i[0]!==h||i[1]!==u||i[2]!==l||i[3]!==o||i[4]!==m||i[5]!==d?(e=h({key:l,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}),i[0]=h,i[1]=u,i[2]=l,i[3]=o,i[4]=m,i[5]=d,i[6]=e):e=i[6],t=e;break e}i[7]===Symbol.for("react.memo_cache_sentinel")?(e=[],i[7]=e):e=i[7],t=e}let p=t;return i[8]!==p?(s=p.map(D),i[8]=p,i[9]=s):s=i[9],i[10]!==s?(a=(0,r.jsx)("div",{className:k().lineMenu,children:s}),i[10]=s,i[11]=a):a=i[11],a}),L=a.memo(({keyName:e,keyPath:t,value:s,disableMenu:n,isInParsedJson:i=!1,parsedJsonRootPath:o=[]})=>{let{normallyExpanded:d}=(0,c.md)(A),{ref:u,hovered:h}=(0,S.M)(),p=a.useMemo(()=>{if(!j()(s))return!1;try{if(s.startsWith("{")&&s.endsWith("}")||s.startsWith("[")&&s.endsWith("]"))return!!JSON.parse(s)}catch(e){return!1}},[s]),[x,g]=a.useState(d&&!p);a.useEffect(()=>{g(d&&!p)},[p,d]);let f=a.useMemo(()=>y()(s)&&Object.keys(s).length>0||m()(s)&&s.length>0||p,[p,s]),b=a.useCallback(()=>{f&&g(e=>!e)},[f]),v=a.useMemo(()=>{if(p)try{return JSON.parse(s)}catch(e){return null}return s},[p,s]),_=t.length,N=a.useMemo(()=>[...t,e],[e,t]),L=i||p,R=a.useMemo(()=>p?N:o,[p,N,o]),M=a.useRef(null),[D,z]=a.useState(!1),F=a.useCallback(()=>{z(!0)},[]),P=a.useCallback(()=>{z(!1)},[]);return a.useEffect(()=>{let e=M.current;return e?.addEventListener("selectstart",F),e?.addEventListener("mouseup",P),()=>{e?.removeEventListener("selectstart",F),e?.removeEventListener("mouseup",P)}},[P,F]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{ref:u,onClick:b,className:l()(k().line,{[k().nestedLine]:_>0,[k().expanded]:x,[k().expandable]:f}),style:{marginLeft:16*_},children:[(0,r.jsx)("div",{className:k().keyContainer,children:(0,r.jsxs)("div",{className:k().key,children:[f&&(x?(0,r.jsx)(w.A,{size:10}):(0,r.jsx)(E.A,{size:10})),e,(0,r.jsx)("div",{className:k().hoverContent,children:(0,r.jsx)(C.A,{size:14})})]})}),(0,r.jsx)("div",{className:k().valueContainer,children:p?x?(0,r.jsxs)("div",{className:k().object,children:["{}"," Parsed JSON"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T,{value:s,ref:M}),(0,r.jsx)("div",{className:k().jsonBtn,children:"Expand JSON"})]}):(0,r.jsx)(T,{value:s,ref:M})}),h&&!n&&!D&&(0,r.jsx)($,{keyName:e,keyPath:N,value:s,isInParsedJson:i,parsedJsonRootPath:o})]},e),x&&f&&(0,r.jsx)(I,{data:v,keyPath:N,disableMenu:n,isInParsedJson:L,parsedJsonRootPath:R})]})});function I(e){let t,s,i,o,c,d,u,m=(0,n.c)(22),{data:h,keyPath:p,disableMenu:x,isInParsedJson:g,parsedJsonRootPath:f}=e;m[0]!==p?(t=void 0===p?[]:p,m[0]=p,m[1]=t):t=m[1];let b=t,v=void 0!==x&&x,y=void 0!==g&&g;m[2]!==f?(s=void 0===f?[]:f,m[2]=f,m[3]=s):s=m[3];let _=s,[j,S]=a.useState(!1);m[4]!==h?(i=Object.keys(h),m[4]=h,m[5]=i):i=m[5];let w=i.length;m[6]!==h||m[7]!==j?(o=j?Object.entries(h):Object.entries(h).slice(0,50),m[6]=h,m[7]=j,m[8]=o):o=m[8];let E=o,C=b?.length||0;return m[9]!==v||m[10]!==y||m[11]!==b||m[12]!==_||m[13]!==E?(c=E.map(e=>{let[t,s]=e;return(0,r.jsx)(L,{keyName:t,value:s,keyPath:b,disableMenu:v,isInParsedJson:y,parsedJsonRootPath:_},t)}),m[9]=v,m[10]=y,m[11]=b,m[12]=_,m[13]=E,m[14]=c):c=m[14],m[15]!==j||m[16]!==C||m[17]!==w?(d=w>50&&!j&&(0,r.jsx)("div",{className:l()(k().line,k().nestedLine,k().expandable),style:{marginLeft:16*C},onClick:()=>S(!0),children:(0,r.jsx)("div",{className:k().keyContainer,children:(0,r.jsxs)("div",{className:k().jsonBtn,children:["Expand ",w-50," more properties"]})})}),m[15]=j,m[16]=C,m[17]=w,m[18]=d):d=m[18],m[19]!==d||m[20]!==c?(u=(0,r.jsxs)(r.Fragment,{children:[c,d]}),m[19]=d,m[20]=c,m[21]=u):u=m[21],u}let R=e=>{let t,s,r,i=(0,n.c)(6),{children:l,initialValues:o}=e;i[0]!==o?(t=[[A,o]],i[0]=o,i[1]=t):t=i[1],(0,d.RH)(t);let u=(0,c.Xr)(A);return i[2]!==o||i[3]!==u?(s=()=>{u(o)},r=[o,u],i[2]=o,i[3]=u,i[4]=s,i[5]=r):(s=i[4],r=i[5]),a.useEffect(s,r),l},M=e=>{let t,s,a,i,o,d,u=(0,n.c)(17),{data:m,normallyExpanded:h,tabulate:p,lineWrap:x,getLineActions:g}=e,f=void 0!==h&&h,b=void 0!==p&&p;u[0]!==m?(t=Object.keys(m),u[0]=m,u[1]=t):t=u[1];let v=0===t.length;return u[2]!==g||u[3]!==f?(s={normallyExpanded:f,getLineActions:g},u[2]=g,u[3]=f,u[4]=s):s=u[4],u[5]!==x||u[6]!==b?(a=l()(k().container,{[k().withTabulate]:b,[k().withLineWrap]:x}),u[5]=x,u[6]=b,u[7]=a):a=u[7],u[8]!==m||u[9]!==v?(i=v?(0,r.jsx)("div",{children:"Empty"}):(0,r.jsx)(I,{data:m}),u[8]=m,u[9]=v,u[10]=i):i=u[10],u[11]!==a||u[12]!==i?(o=(0,r.jsx)("div",{className:a,children:i}),u[11]=a,u[12]=i,u[13]=o):o=u[13],u[14]!==s||u[15]!==o?(d=(0,r.jsx)(c.Kq,{children:(0,r.jsx)(R,{initialValues:s,children:o})}),u[14]=s,u[15]=o,u[16]=d):d=u[16],d};function D(e){return(0,r.jsx)("button",{title:e.title,className:k().lineMenuBtn,onClick:t=>{e.onClick(),t.stopPropagation()},children:e.label},e.key)}},26674:(e,t,s)=>{"use strict";s.d(t,{S:()=>n,Y:()=>a});var r=s(55729);let n=(0,r.createContext)(0);function a(){return(0,r.useContext)(n)}},26791:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>tr});var r=s(6029),n=s(75155),a=s(55729),i=s(71024),l=s.n(i),o=s(29594),c=s.n(o),d=s(41038),u=s(1909),m=s(3145),h=s(76089),p=s(82641),x=s(90124),g=s(48378),f=s(43517),b=s(63085),v=s(76013),y=s(25062),_=s(3635),j=s(64488),S=s(60481),w=s(9841),E=(0,s(41495).A)("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]),C=s(9385),N=s(45519),k=s(55533),A=s(94502),T=s(62118),$=s(43152),L=s(69922),I=s(82203),R=s.n(I),M=s(66692),D=s(2893),z=s(47122),F=s(31292),P=s(2055),q=s(40684),O=s(92205),V=s(35467),H=s(24589),B=s(91021),W=s(57389),K=s(81973),J=s(92917),G=s(15628),U=s(99082),Y=s(88339);function Q(e){let t,s,i,l,o,c,d,u,m,h,p,x,g,f,b=(0,n.c)(21),{graphResults:v,generateSearchUrl:y}=e;b[0]!==v?(t=v?.map(ee)??[],b[0]=v,b[1]=t):t=b[1];let _=t,j=(0,a.useRef)(null),S=(0,a.useRef)(void 0);b[2]===Symbol.for("react.memo_cache_sentinel")?(s=["esc"],i=()=>{S.current=void 0},b[2]=s,b[3]=i):(s=b[2],i=b[3]),(0,M.vC)(s,i),b[4]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{if(null!=j.current){if(null==S.current)return j.current.setState({isTooltipActive:!1});j.current.setState({isTooltipActive:!0,activeCoordinate:e.activeCoordinate,activeLabel:e.activeLabel,activePayload:e.activePayload})}},b[4]=l):l=b[4];let w=l;return b[5]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{null!=S.current&&w({activeCoordinate:S.current.activeCoordinate,activeLabel:S.current.activeLabel,activePayload:S.current.activePayload})},c=()=>{S.current=void 0},d=e=>{S.current=e,null!=e&&w({activeCoordinate:S.current.activeCoordinate,activeLabel:S.current.activeLabel,activePayload:S.current.activePayload})},b[5]=o,b[6]=c,b[7]=d):(o=b[5],c=b[6],d=b[7]),b[8]!==_?(u=_.length>1?[_[0].lower,_[_.length-1].upper]:void 0,b[8]=_,b[9]=u):u=b[9],b[10]===Symbol.for("react.memo_cache_sentinel")?(m={fontSize:12,fontFamily:"IBM Plex Mono, monospace"},b[10]=m):m=b[10],b[11]!==u?(h=(0,r.jsx)(D.W,{dataKey:"lower",domain:u,interval:"preserveStartEnd",type:"category",tickFormatter:X,tick:m}),b[11]=u,b[12]=h):h=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(z.h,{width:35,minTickGap:25,tickFormatter:Z,tick:{fontSize:12,fontFamily:"IBM Plex Mono, monospace"}}),b[13]=p):p=b[13],b[14]!==y?(x=(0,r.jsx)(F.m,{content:(0,r.jsx)(et,{generateSearchUrl:y}),active:!0}),b[14]=y,b[15]=x):x=b[15],b[16]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)(P.y,{dataKey:"height",stackId:"a",fill:"#50FA7B"}),b[16]=g):g=b[16],b[17]!==_||b[18]!==h||b[19]!==x?(f=(0,r.jsx)(q.u,{width:"100%",height:"100%",minWidth:0,children:(0,r.jsxs)(O.E,{width:500,height:300,data:_,className:"user-select-none cursor-crosshair",ref:j,onMouseMove:o,onMouseLeave:c,onClick:d,children:[h,p,x,g]})}),b[17]=_,b[18]=h,b[19]=x,b[20]=f):f=b[20],f}function Z(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function X(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function ee(e){return{lower:e[0],upper:e[1],height:e[2]}}let et=e=>{let t=(0,n.c)(21),{active:s,payload:a,generateSearchUrl:i}=e;if(s&&a&&a.length>0){let s,n,l,o,c,d,u,m,h,p=e.payload[0].payload;t[0]!==p.lower?(s=p.lower.toFixed(5),t[0]=p.lower,t[1]=s):s=t[1];let x=s;t[2]!==p.upper?(n=p.upper.toFixed(5),t[2]=p.upper,t[3]=n):n=t[3];let g=n;return t[4]===Symbol.for("react.memo_cache_sentinel")?(l={pointerEvents:"auto"},t[4]=l):l=t[4],t[5]!==x||t[6]!==g?(o=(0,r.jsxs)("div",{className:"mb-2",children:["Bucket: ",x," - ",g]}),t[5]=x,t[6]=g,t[7]=o):o=t[7],t[8]!==a?(c=a.map(en),t[8]=a,t[9]=c):c=t[9],t[10]!==i||t[11]!==x||t[12]!==g?(d=i&&(0,r.jsx)(R(),{href:i(x,g),className:"text-muted-hover cursor-pointer",onClick:ea,children:"View Events"}),t[10]=i,t[11]=x,t[12]=g,t[13]=d):d=t[13],t[14]!==d?(u=(0,r.jsx)("div",{className:"mt-2",children:d}),t[14]=d,t[15]=u):u=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)("div",{className:"text-muted fs-9 mt-2",children:"Click to Pin Tooltip â€¢ Approx value via SPDT algorithm"}),t[16]=m):m=t[16],t[17]!==o||t[18]!==c||t[19]!==u?(h=(0,r.jsxs)("div",{className:"bg-muted px-3 py-2 rounded fs-8",style:l,children:[o,c,u,m]}),t[17]=o,t[18]=c,t[19]=u,t[20]=h):h=t[20],h}return null};function es(e){let t,s,a,i,l,o,c,d=(0,n.c)(33),{config:u,queryKeyPrefix:m,enabled:h,title:p,toolbarPrefix:x,toolbarSuffix:g,showMVOptimizationIndicator:b}=e,v=void 0===b||b;d[0]!==u?(t=(0,J.cJ)(u,["granularity"]),d[0]=u,d[1]=t):t=d[1];let y=t;d[2]!==y||d[3]!==m?(s=[m,y],d[2]=y,d[3]=m,d[4]=s):s=d[4],d[5]!==h||d[6]!==s?(a={placeholderData:er,queryKey:s,enabled:h},d[5]=h,d[6]=s,d[7]=a):a=d[7];let{data:_,isLoading:j,isError:w,error:E}=(0,B.HD)(y,a),{data:C}=(0,W.d)(y),N=_?.data?.[0]?.data;d[8]!==u.source?(i={id:u.source},d[8]=u.source,d[9]=i):i=d[9];let{data:k}=(0,K.Fo)(i);if(d[10]!==C||d[11]!==y||d[12]!==v||d[13]!==k||d[14]!==x||d[15]!==g){let e;if(l=[],x&&x.length>0&&l.push(...x),k&&v){let e;d[17]!==y||d[18]!==k?(e=(0,r.jsx)(U.A,{config:y,source:k,variant:"icon"},"db-histogram-chart-mv-indicator"),d[17]=y,d[18]=k,d[19]=e):e=d[19],l.push(e)}d[20]!==C||d[21]!==y.dateRange?(e=(0,$.m9)({mvOptimizationData:C,originalDateRange:y.dateRange}),d[20]=C,d[21]=y.dateRange,d[22]=e):e=d[22];let t=e;t&&l.push(t),g&&g.length>0&&l.push(...g),d[10]=C,d[11]=y,d[12]=v,d[13]=k,d[14]=x,d[15]=g,d[16]=l}else l=d[16];let A=l;return d[23]!==N||d[24]!==_?.data||d[25]!==E||d[26]!==w||d[27]!==j?(o=j?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):w?(0,r.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted",children:[(0,r.jsx)(f.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsxs)(S.a,{mt:"sm",children:[(0,r.jsx)(f.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(H.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:E.message}),E instanceof V.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(Y.V,{data:E?.query})]})]})]}):_?.data.length===0?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,r.jsx)(Q,{graphResults:N}),d[23]=N,d[24]=_?.data,d[25]=E,d[26]=w,d[27]=j,d[28]=o):o=d[28],d[29]!==o||d[30]!==p||d[31]!==A?(c=(0,r.jsx)(G.A,{title:p,toolbarItems:A,children:o}),d[29]=o,d[30]=p,d[31]=A,d[32]=c):c=d[32],c}function er(e){return e}function en(e){return(0,r.jsxs)("div",{style:{color:e.color},children:["Number of Events: ",e.value]},e.name)}function ea(e){return e.stopPropagation()}var ei=s(78253),el=s(97039);function eo(e){let t,s,a,i,l,o,c,d=(0,n.c)(18),{title:u,value:m,color:h,percent:p,hoverCardContent:x,hoverCardPosition:g}=e,b=void 0===g?"right":g;d[0]===Symbol.for("react.memo_cache_sentinel")?(t={overflowWrap:"anywhere"},d[0]=t):t=d[0],d[1]!==u?(s=(0,r.jsx)(f.E,{size:"sm",style:t,pr:"xs",lineClamp:2,children:u}),d[1]=u,d[2]=s):s=d[2],d[3]!==m?(a=(0,r.jsx)(f.E,{size:"sm",children:m}),d[3]=m,d[4]=a):a=d[4],d[5]!==s||d[6]!==a?(i=(0,r.jsxs)(ei.s,{justify:"space-between",children:[s,a]}),d[5]=s,d[6]=a,d[7]=i):i=d[7];let v=`${p}%`;d[8]!==h||d[9]!==v?(l=(0,r.jsx)(S.a,{pt:"xs",children:(0,r.jsx)(S.a,{style:{width:v,height:8,backgroundColor:h,borderRadius:4}})}),d[8]=h,d[9]=v,d[10]=l):l=d[10],d[11]!==i||d[12]!==l?(o=(0,r.jsxs)(S.a,{children:[i,l]}),d[11]=i,d[12]=l,d[13]=o):o=d[13];let y=o;return d[14]!==x||d[15]!==b||d[16]!==y?(c=x?(0,r.jsxs)(el.j,{width:380,shadow:"md",position:b,withinPortal:!0,children:[(0,r.jsx)(el.j.Target,{children:y}),(0,r.jsx)(el.j.Dropdown,{children:x})]}):y,d[14]=x,d[15]=b,d[16]=y,d[17]=c):c=d[17],c}function ec(e){let t,s,a,i,l=(0,n.c)(17),{data:o,valueColumn:c,groupColumn:d,getRowSearchLink:u,columns:m,hoverCardPosition:h}=e;if(l[0]!==o||l[1]!==c){let e;l[4]!==c?(e=e=>e[c],l[4]=c,l[5]=e):e=l[5];let r=(o??[]).map(e);t=Math.max(...r),s=r.reduce(ed,0),l[0]=o,l[1]=c,l[2]=t,l[3]=s}else t=l[2],s=l[3];let p=s;return l[6]!==m||l[7]!==o||l[8]!==u||l[9]!==d||l[10]!==h||l[11]!==t||l[12]!==p||l[13]!==c?(a=o?.map((e,s)=>{let n=e[c],a=n/t*100,i=n/p*100,l=`${e[d]||"N/A"}`,o=m.length>0?(0,r.jsxs)(S.a,{children:[(0,r.jsx)(S.a,{mb:"xs",children:(0,r.jsx)(f.E,{size:"xs",style:{overflowWrap:"anywhere"},lineClamp:4,children:l})}),m.filter(e=>!1!==e.visible&&e.dataKey!==d).map(t=>{let s=e[t.dataKey];return(0,r.jsxs)(S.a,{children:[(0,r.jsxs)(f.E,{size:"xs",fw:500,span:!0,children:[t.displayName,":"," "]}),(0,r.jsx)(f.E,{size:"xs",span:!0,children:null!=t.numberFormat?(0,J.ZV)(s,t.numberFormat)??"N/A":s})]},t.displayName)})]}):null;return u?(0,r.jsx)(R(),{href:u(e),children:(0,r.jsx)(S.a,{mb:"sm",td:"none",className:"cursor-pointer",display:"block",c:"inherit",children:(0,r.jsx)(eo,{title:l,value:`${i.toFixed(2)}%`,color:(0,J.Yd)(l,s),percent:a,hoverCardContent:o,hoverCardPosition:h})})},l):(0,r.jsx)(S.a,{mb:"sm",children:(0,r.jsx)(eo,{title:l,value:`${i.toFixed(2)}%`,color:(0,J.Yd)(l,s),percent:a,hoverCardContent:o,hoverCardPosition:h})},l)}),l[6]=m,l[7]=o,l[8]=u,l[9]=d,l[10]=h,l[11]=t,l[12]=p,l[13]=c,l[14]=a):a=l[14],l[15]!==a?(i=(0,r.jsx)(r.Fragment,{children:a}),l[15]=a,l[16]=i):i=l[16],i}function ed(e,t){return e+t}function eu(e){let t,s,a,i,l,o,c,d,u,m=(0,n.c)(47),{config:h,getRowSearchLink:p,hoverCardPosition:x,queryKeyPrefix:g,enabled:b,valueColumn:v,groupColumn:y,hiddenSeries:_,title:j,toolbarItems:w,showMVOptimizationIndicator:E}=e;m[0]!==_?(t=void 0===_?[]:_,m[0]=_,m[1]=t):t=m[1];let C=t,N=void 0===E||E;m[2]!==h?(s=(0,J.cJ)(h,["granularity"]),m[2]=h,m[3]=s):s=m[3];let k=s;m[4]!==k||m[5]!==g?(a=[g,k],m[4]=k,m[5]=g,m[6]=a):a=m[6],m[7]!==b||m[8]!==a?(i={placeholderData:em,queryKey:a,enabled:b},m[7]=b,m[8]=a,m[9]=i):i=m[9];let{data:A,isLoading:T,isError:L,error:I}=(0,B.HD)(k,i),{data:R}=(0,W.d)(k);m[10]!==h.source?(l={id:h.source},m[10]=h.source,m[11]=l):l=m[11];let{data:M}=(0,K.Fo)(l);e:{let e,t,s;m[12]!==A?.data?(e=A?.data??[],m[12]=A?.data,m[13]=e):e=m[13];let r=e;if(0===r.length){let e;m[14]===Symbol.for("react.memo_cache_sentinel")?(e=[],m[14]=e):e=m[14],o=e;break e}m[15]!==C||m[16]!==r[0]?(t=Object.keys(r?.[0]).filter(e=>!C.includes(e)),m[15]=C,m[16]=r[0],m[17]=t):t=m[17],m[18]!==h.numberFormat||m[19]!==t?(s=t.map(e=>({dataKey:e,displayName:e,numberFormat:h.numberFormat})),m[18]=h.numberFormat,m[19]=t,m[20]=s):s=m[20],o=s}let D=o;if(m[21]!==R||m[22]!==k||m[23]!==N||m[24]!==M||m[25]!==w){let e;if(c=[],M&&N){let e;m[27]!==k||m[28]!==M?(e=(0,r.jsx)(U.A,{config:k,source:M,variant:"icon"},"db-list-bar-chart-mv-indicator"),m[27]=k,m[28]=M,m[29]=e):e=m[29],c.push(e)}m[30]!==R||m[31]!==k.dateRange?(e=(0,$.m9)({mvOptimizationData:R,originalDateRange:k.dateRange}),m[30]=R,m[31]=k.dateRange,m[32]=e):e=m[32];let t=e;t&&c.push(t),w&&w.length>0&&c.push(...w),m[21]=R,m[22]=k,m[23]=N,m[24]=M,m[25]=w,m[26]=c}else c=m[26];let z=c;return m[33]!==D||m[34]!==A||m[35]!==I||m[36]!==p||m[37]!==y||m[38]!==x||m[39]!==L||m[40]!==T||m[41]!==v?(d=T&&!A?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):L?(0,r.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted",children:[(0,r.jsx)(f.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsxs)(S.a,{mt:"sm",children:[(0,r.jsx)(f.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(H.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:I.message}),I instanceof V.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(Y.V,{data:I?.query})]})]})]}):A?.data.length===0?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,r.jsx)(ec,{data:A?.data??[],columns:D,getRowSearchLink:p,hoverCardPosition:x,groupColumn:y,valueColumn:v}),m[33]=D,m[34]=A,m[35]=I,m[36]=p,m[37]=y,m[38]=x,m[39]=L,m[40]=T,m[41]=v,m[42]=d):d=m[42],m[43]!==d||m[44]!==j||m[45]!==z?(u=(0,r.jsx)(G.A,{title:j,toolbarItems:z,children:d}),m[43]=d,m[44]=j,m[45]=z,m[46]=u):u=m[46],u}function em(e){return e}var eh=s(91939),ep=s(40228),ex=s(64501),eg=s(9211),ef=s(10174),eb=s(91758),ev=s(35729),ey=s(78550);function e_(e,t,s){return s?`${e}.\`${t}\``:`${e}['${t}']`}function ej(e,t){if(0===e.length)throw Error("Empty fields array passed while trying to build a coalesced field access query");if(e.length>100)throw Error(`Too many fields (${e.length}) passed while trying to build a coalesced field access query. Maximum allowed is 100`);if(1===e.length)if(t)return`if(toString(${e[0]}) != '', toString(${e[0]}), '')`;else return`nullif(${e[0]}, '')`;if(t){let t="";for(let s=0;s<e.length;s++){let r=e[s],n=s===e.length-1;t+=`if(
toString(${r}) != '',
toString(${r}),`,n?t+=`''
`:t+="\n"}for(let s=0;s<e.length;s++)t+=")";return`coalesce(
${t}
)`}{let t=e.map(e=>`nullif(${e}, '')`);return`coalesce(${t.join(", ")})`}}let eS="endpoint";function ew(e){let t,s,r,a,i=(0,n.c)(11),{source:l}=e;i[0]!==l?(t=(0,m.VO)(l),i[0]=l,i[1]=t):t=i[1];let o=t,{data:c,isLoading:d}=(0,ey.n$)(o),{data:u,isLoading:h}=(0,ey.Zh)(o);i[2]!==u?(s=void 0===u?[]:u,i[2]=u,i[3]=s):s=i[3];let p=s,x=!l||d||h;e:{let e;if(x||!c||!p){r=void 0;break e}if(i[4]!==p||i[5]!==c||i[6]!==l){let t,s,r,n,a,o,d;t=l?.eventAttributesExpression||"SpanAttributes",s=c.includes(t),r=function({spanAttributeField:e="SpanAttributes",isAttributeFieldJSON:t=!1}={}){let s=ej([e_(e,"db.query.text",t),e_(e,"db.statement",t)],t);return{duration:"Duration",durationPrecision:9,traceId:"TraceId",service:"ServiceName",spanName:"SpanName",spanKind:"SpanKind",severityText:"StatusCode",k8sResourceName:e_(e,"k8s.resource.name",t),k8sPodName:e_(e,"k8s.pod.name",t),serverAddress:e_(e,"server.address",t),httpHost:e_(e,"http.host",t),dbStatement:s}}({spanAttributeField:t,isAttributeFieldJSON:s}),n=!!p.find(e=>e.name===eS),a={duration:l.durationExpression||r.duration,durationPrecision:l.durationPrecision||r.durationPrecision,traceId:l.traceIdExpression||r.traceId,service:l.serviceNameExpression||r.service,spanName:l.spanNameExpression||r.spanName,spanKind:l.spanKindExpression||r.spanKind,severityText:l.severityTextExpression||r.severityText,httpHost:r.httpHost,serverAddress:r.serverAddress,k8sResourceName:r.k8sResourceName,k8sPodName:r.k8sPodName,dbStatement:r.dbStatement},o={endpoint:n?eS:a.spanName,durationInMillis:`${a.duration}/1e${a.durationPrecision-3}`,durationDivisorForMillis:`1e${a.durationPrecision-3}`},d={isEndpointNonEmpty:`NOT empty(${o.endpoint})`,isError:`lower(${a.severityText}) = 'error'`,isSpanKindServer:`${a.spanKind} IN ('Server', 'SPAN_KIND_SERVER')`,isDbSpan:`${a.dbStatement} <> ''`},e={...a,...d,...o},i[4]=p,i[5]=c,i[6]=l,i[7]=e}else e=i[7];r=e}let g=r;return i[8]!==g||i[9]!==x?(a={expressions:g,isLoading:x},i[8]=g,i[9]=x,i[10]=a):a=i[10],a}var eE=s(75359);function eC(e){let t,s,a,i,l,o,d,u,m,h,p,x,g,b,v,y,j,w=(0,n.c)(52),{source:E,dateRange:C,height:N,title:k,queryKeyPrefix:A,enabled:T,extraFilters:$}=e,I=void 0===N?350:N;w[0]!==$?(t=void 0===$?[]:$,w[0]=$,w[1]=t):t=w[1];let R=t;w[2]!==E?(s={source:E},w[2]=E,w[3]=s):s=w[3];let{expressions:M}=ew(s),D=E.id;w[4]!==E?(a=c()(E,["timestampValueExpression","connection","from"]),w[4]=E,w[5]=a):a=w[5];let z=M?.duration??"Duration";w[6]!==z?(i={alias:"p95_duration_ns",aggFn:"quantile",valueExpression:z,level:.95},w[6]=z,w[7]=i):i=w[7];let F=`p95_duration_ns / ${M?.durationDivisorForMillis}`;w[8]!==F?(l={alias:"p95",valueExpression:F},w[8]=F,w[9]=l):l=w[9],w[10]!==l||w[11]!==i?(o=[i,l],w[10]=l,w[11]=i,w[12]=o):o=w[12],w[13]!==R?(d=[...R],w[13]=R,w[14]=d):d=w[14],w[15]!==C||w[16]!==E.id||w[17]!==o||w[18]!==d||w[19]!==a?(u={source:D,...a,where:"",whereLanguage:"sql",select:o,dateRange:C,filters:d},w[15]=C,w[16]=E.id,w[17]=o,w[18]=d,w[19]=a,w[20]=u):u=w[20],w[21]!==A||w[22]!==E?(m=[A,E],w[21]=A,w[22]=E,w[23]=m):m=w[23];let P=(void 0===T||T)&&!!M;w[24]!==m||w[25]!==P?(h={placeholderData:eN,queryKey:m,enabled:P},w[24]=m,w[25]=P,w[26]=h):h=w[26];let{data:q,isLoading:O,isError:W,error:K}=(0,B.HD)(u,h),J=q?.data?.[0]?.p95;w[27]!==J?(p=Math.round(J??0),w[27]=J,w[28]=p):p=w[28];let G=p;return w[29]!==I?(x={height:I},w[29]=I,w[30]=x):x=w[30],w[31]!==k?(g=(0,r.jsx)(f.E,{size:"sm",children:k}),w[31]=k,w[32]=g):g=w[32],w[33]!==G?(b=(0,r.jsxs)(f.E,{size:"xs",children:["(Slower than ",G,"ms)"]}),w[33]=G,w[34]=b):b=w[34],w[35]!==g||w[36]!==b?(v=(0,r.jsxs)(_.Y,{justify:"space-between",align:"center",mb:"sm",children:[g,b]}),w[35]=g,w[36]=b,w[37]=v):v=w[37],w[38]!==q||w[39]!==C||w[40]!==K||w[41]!==M||w[42]!==R||w[43]!==W||w[44]!==O||w[45]!==G||w[46]!==E?(y=O&&!q?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):W?(0,r.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted",children:[(0,r.jsx)(f.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsxs)(S.a,{mt:"sm",children:[(0,r.jsx)(f.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(H.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:K.message}),K instanceof V.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(Y.V,{data:K?.query})]})]})]}):q?.data.length===0?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):E&&M&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(eE.A,{isNestedPanel:!0,breadcrumbPath:[{label:"Endpoint"}],sourceId:E.id,config:{source:E.id,...c()(E,["timestampValueExpression","connection","from"]),where:"",whereLanguage:"sql",select:[{valueExpression:E.timestampValueExpression,alias:"Timestamp"},{valueExpression:M.severityText,alias:"Severity"},{valueExpression:M.spanName,alias:"Span Name"},{valueExpression:M.durationInMillis,alias:"Duration (ms)"}],orderBy:[{valueExpression:M.durationInMillis,ordering:"DESC"}],limit:{limit:200},dateRange:C,filters:[...R,{type:"sql",condition:`${M.durationInMillis} > ${G}`}]},isLive:!1,queryKeyPrefix:"service-dashboard-slowest-transactions"})}),w[38]=q,w[39]=C,w[40]=K,w[41]=M,w[42]=R,w[43]=W,w[44]=O,w[45]=G,w[46]=E,w[47]=y):y=w[47],w[48]!==x||w[49]!==v||w[50]!==y?(j=(0,r.jsxs)(L.w,{style:x,children:[v,y]}),w[48]=x,w[49]=v,w[50]=y,w[51]=j):j=w[51],j}function eN(e){return e}var ek=s(26674),eA=s(66773),eT=s.n(eA);function e$(e){let t,s,a,i,l,o,u,m,h,x,b,v,y,_,j,S,w,E,C,N,k,A=(0,n.c)(61),{sourceId:T,service:I,searchedTimeRange:R}=e;A[0]!==T?(t={id:T},A[0]=T,A[1]=t):t=A[1];let{data:M}=(0,K.Fo)(t);A[2]!==M?(s={source:M},A[2]=M,A[3]=s):s=A[3];let{expressions:D}=ew(s),[z,F]=(0,d.ZA)("dbquery",d.tU);A[4]!==F?(a=()=>{F(null)},A[4]=F,A[5]=a):a=A[5];let P=a,q=(0,ek.Y)()+10,O=`${D?.dbStatement} IN ('${z}')`;if(A[6]!==O?(i={type:"sql",condition:O},A[6]=O,A[7]=i):i=A[7],A[8]!==D?.service||A[9]!==I||A[10]!==i){if(l=[i],I){let e,t=`${D?.service} IN ('${I}')`;A[12]!==t?(e={type:"sql",condition:t},A[12]=t,A[13]=e):e=A[13],l.push(e)}A[8]=D?.service,A[9]=I,A[10]=i,A[11]=l}else l=A[11];let V=l;return z?(A[14]===Symbol.for("react.memo_cache_sentinel")?(o={body:{padding:0}},A[14]=o):o=A[14],A[15]!==I?(u=I&&(0,r.jsxs)(f.E,{component:"span",c:"gray",fz:"xs",children:[(0,r.jsx)(eb.A,{size:14,className:"ms-3 me-1"}),I]}),A[15]=I,A[16]=u):u=A[16],A[17]!==z||A[18]!==u?(m=(0,r.jsxs)(r.Fragment,{children:["Details for ",z,u]}),A[17]=z,A[18]=u,A[19]=m):m=A[19],A[20]!==P||A[21]!==m?(h=(0,r.jsx)(ev.B,{header:m,onClose:P}),A[20]=P,A[21]=m,A[22]=h):h=A[22],A[23]===Symbol.for("react.memo_cache_sentinel")?(x={height:350},A[23]=x):x=A[23],A[24]!==V||A[25]!==D||A[26]!==R||A[27]!==M||A[28]!==T?(b=M&&D&&(0,r.jsx)(ep.S,{title:"Total Query Time",sourceId:T,hiddenSeries:["total_duration_ns"],config:{source:M.id,...c()(M,["timestampValueExpression","connection","from"]),where:"",whereLanguage:"sql",select:[{aggFn:"sum",valueExpression:D.duration,alias:"total_duration_ns",aggCondition:""},{valueExpression:`total_duration_ns / ${D.durationDivisorForMillis}`,alias:"Total Query Time"}],displayType:p.t2.Line,numberFormat:$.xh,filters:V,dateRange:R}}),A[24]=V,A[25]=D,A[26]=R,A[27]=M,A[28]=T,A[29]=b):b=A[29],A[30]!==b?(v=(0,r.jsx)(g.x.Col,{span:6,children:(0,r.jsx)(L.w,{style:x,children:b})}),A[30]=b,A[31]=v):v=A[31],A[32]===Symbol.for("react.memo_cache_sentinel")?(y={height:350},A[32]=y):y=A[32],A[33]!==V||A[34]!==D||A[35]!==R||A[36]!==M||A[37]!==T?(_=M&&D&&(0,r.jsx)(ep.S,{title:"Query Throughput",sourceId:T,config:{source:M.id,...c()(M,["timestampValueExpression","connection","from"]),where:"",whereLanguage:"sql",select:[{aggFn:"count",valueExpression:"value",alias:"Requests",aggCondition:"",aggConditionLanguage:"sql"}],numberFormat:{...$.x5,unit:"requests"},displayType:p.t2.Line,filters:V,dateRange:R}}),A[33]=V,A[34]=D,A[35]=R,A[36]=M,A[37]=T,A[38]=_):_=A[38],A[39]!==_?(j=(0,r.jsx)(g.x.Col,{span:6,children:(0,r.jsx)(L.w,{style:y,children:_})}),A[39]=_,A[40]=j):j=A[40],A[41]!==V||A[42]!==R||A[43]!==M?(S=M&&(0,r.jsx)(eC,{title:"Slowest 5% of Queries",source:M,dateRange:R,extraFilters:V}),A[41]=V,A[42]=R,A[43]=M,A[44]=S):S=A[44],A[45]!==S?(w=(0,r.jsx)(g.x.Col,{span:12,children:S}),A[45]=S,A[46]=w):w=A[46],A[47]!==v||A[48]!==j||A[49]!==w?(E=(0,r.jsx)(ev.y,{children:(0,r.jsxs)(g.x,{grow:!1,w:"100%",maw:"100%",overflow:"hidden",children:[v,j,w]})}),A[47]=v,A[48]=j,A[49]=w,A[50]=E):E=A[50],A[51]!==E||A[52]!==h?(C=(0,r.jsxs)("div",{className:eT().panel,children:[h,E]}),A[51]=E,A[52]=h,A[53]=C):C=A[53],A[54]!==q||A[55]!==C?(N=(0,r.jsx)(ek.S.Provider,{value:q,children:C}),A[54]=q,A[55]=C,A[56]=N):N=A[56],A[57]!==q||A[58]!==P||A[59]!==N?(k=(0,r.jsx)(ef._,{opened:!0,onClose:P,position:"right",size:"80vw",withCloseButton:!1,zIndex:q,styles:o,children:N}),A[57]=q,A[58]=P,A[59]=N,A[60]=k):k=A[60],k):null}function eL(e){let t,s,a,i,l,o,d,u,m=(0,n.c)(32),{source:h,dateRange:p,service:x,endpoint:g}=e,f=h?.from?.databaseName||"",b=h?.from?.tableName||"",v=h?.connection||"";m[0]!==f||m[1]!==b||m[2]!==v?(t={databaseName:f,tableName:b,connectionId:v},m[0]=f,m[1]=b,m[2]=v,m[3]=t):t=m[3];let{data:y}=(0,ey.n$)(t);m[4]!==h?(s={source:h},m[4]=h,m[5]=s):s=m[5];let{expressions:_}=ew(s);if(!h||!_)return null;let j=x&&`${_.service} = '${x}'`,S=g&&`${_.spanName} = '${g}'`,w=h.timestampValueExpression;m[6]!==p[0]?(a=p[0].getTime(),m[6]=p[0],m[7]=a):a=m[7];let E=h.timestampValueExpression;m[8]!==p[1]?(i=p[1].getTime(),m[8]=p[1],m[9]=i):i=m[9];let C=`${w} >=
        fromUnixTimestamp64Milli(${a}) AND
      ${E} <=
        fromUnixTimestamp64Milli(${i})`;m[10]!==C||m[11]!==j||m[12]!==S?(l=[j,S,C].filter(Boolean),m[10]=C,m[11]=j,m[12]=S,m[13]=l):l=m[13];let N=l.join(" AND "),k=`SELECT distinct ${_.traceId}
    FROM ${h.from.databaseName}.${h.from.tableName}
    WHERE ${N}
    `,A=`
    concat(
      ${_.spanName}, ' ',
      if(
        has(['HTTP DELETE', 'DELETE', 'HTTP GET', 'GET', 'HTTP HEAD', 'HEAD', 'HTTP OPTIONS', 'OPTIONS', 'HTTP PATCH', 'PATCH', 'HTTP POST', 'POST', 'HTTP PUT', 'PUT'], ${_.spanName}),
          COALESCE(
            NULLIF(${_.serverAddress}, ''),
            NULLIF(${_.httpHost}, '')
          ),
          ''
    ))`,T=h.eventAttributesExpression||"SpanAttributes";if((void 0===y?[]:y).includes(T)){let e;m[14]!==_.httpHost||m[15]!==_.serverAddress?(e=ej([_.serverAddress,_.httpHost],!0),m[14]=_.httpHost,m[15]=_.serverAddress,m[16]=e):e=m[16];let t=e;A=`
      concat(
        ${_.spanName}, ' ',
        if(
          has(['HTTP DELETE', 'DELETE', 'HTTP GET', 'GET', 'HTTP HEAD', 'HEAD', 'HTTP OPTIONS', 'OPTIONS', 'HTTP PATCH', 'PATCH', 'HTTP POST', 'POST', 'HTTP PUT', 'PUT'], ${_.spanName}),
          ${t},
          ''
        )
      )`}return m[17]===Symbol.for("react.memo_cache_sentinel")?(o={height:350,overflow:"auto"},m[17]=o):o=m[17],m[18]!==p||m[19]!==g||m[20]!==_.duration||m[21]!==_.durationInMillis||m[22]!==_.service||m[23]!==_.spanName||m[24]!==_.traceId||m[25]!==k||m[26]!==x||m[27]!==h||m[28]!==A?(d=h&&(0,r.jsx)(eu,{title:"20 Top Most Time Consuming Operations",groupColumn:"group",valueColumn:"Total Time Spent",config:{source:h.id,...c()(h,["timestampValueExpression","connection","from"]),where:"",whereLanguage:"sql",select:[{alias:"group",valueExpression:A},{alias:"Total Time Spent",aggFn:"sum",aggCondition:"",valueExpression:_.durationInMillis},{alias:"Number of Calls",valueExpression:"count()"},{alias:"Average Duration",aggFn:"avg",aggCondition:"",valueExpression:_.durationInMillis},{alias:"Min Duration",aggFn:"min",aggCondition:"",valueExpression:_.durationInMillis},{alias:"Max Duration",aggFn:"max",aggCondition:"",valueExpression:_.durationInMillis},{alias:"Number of Requests",aggFn:"count_distinct",aggCondition:"",valueExpression:_.traceId},{alias:"Calls per Request",valueExpression:'"Number of Calls" / "Average Duration"'}],selectGroupBy:!1,groupBy:"group",orderBy:'"Total Time Spent" DESC',filters:[...x?[{type:"sql",condition:`${_.service} = '${x}'`}]:[],{type:"sql",condition:`${_.traceId} IN (${k})`},{type:"sql",condition:`${_.duration} >= 0 AND ${_.spanName} != '${g}'`}],numberFormat:$.xh,dateRange:p,limit:{limit:200}}}),m[18]=p,m[19]=g,m[20]=_.duration,m[21]=_.durationInMillis,m[22]=_.service,m[23]=_.spanName,m[24]=_.traceId,m[25]=k,m[26]=x,m[27]=h,m[28]=A,m[29]=d):d=m[29],m[30]!==d?(u=(0,r.jsx)(L.w,{style:o,children:d}),m[30]=d,m[31]=u):u=m[31],u}function eI(e){let t,s,a,i,l,o,u,m,h,x,b,v,y,_,j,S,w,E,C,N,k,A,T=(0,n.c)(72),{sourceId:I,service:R,searchedTimeRange:M}=e;T[0]!==I?(t={id:I},T[0]=I,T[1]=t):t=T[1];let{data:D}=(0,K.Fo)(t);T[2]!==D?(s={source:D},T[2]=D,T[3]=s):s=T[3];let{expressions:z}=ew(s),[F,P]=(0,d.ZA)("endpoint",d.tU);T[4]!==P?(a=()=>{P(null)},T[4]=P,T[5]=a):a=T[5];let q=a,O=(0,ek.Y)()+10;e:{let e,t;if(!z){let e;T[6]===Symbol.for("react.memo_cache_sentinel")?(e=[],T[6]=e):e=T[6],i=e;break e}let s=`${z.endpoint} IN ('${F}') AND ${z.isSpanKindServer}`;if(T[7]!==s?(e={type:"sql",condition:s},T[7]=s,T[8]=e):e=T[8],T[9]!==z.service||T[10]!==R||T[11]!==e){if(t=[e],R){let e,s=`${z.service} IN ('${R}')`;T[13]!==s?(e={type:"sql",condition:s},T[13]=s,T[14]=e):e=T[14],t.push(e)}T[9]=z.service,T[10]=R,T[11]=e,T[12]=t}else t=T[12];i=t}let V=i;return F&&D?(T[15]===Symbol.for("react.memo_cache_sentinel")?(l={body:{padding:0}},T[15]=l):l=T[15],T[16]!==R?(o=R&&(0,r.jsxs)(f.E,{component:"span",c:"gray",fz:"xs",children:[(0,r.jsx)(eb.A,{size:14,className:"ms-3 me-1"}),R]}),T[16]=R,T[17]=o):o=T[17],T[18]!==F||T[19]!==o?(u=(0,r.jsxs)(r.Fragment,{children:["Details for ",F,o]}),T[18]=F,T[19]=o,T[20]=u):u=T[20],T[21]!==q||T[22]!==u?(m=(0,r.jsx)(ev.B,{header:u,onClose:q}),T[21]=q,T[22]=u,T[23]=m):m=T[23],T[24]===Symbol.for("react.memo_cache_sentinel")?(h={height:350},T[24]=h):h=T[24],T[25]!==V||T[26]!==z||T[27]!==M||T[28]!==D?(x=D&&z&&(0,r.jsx)(ep.S,{title:"Request Error Rate",sourceId:D.id,hiddenSeries:["total_count","error_count"],config:{source:D.id,...c()(D,["timestampValueExpression","connection","from"]),where:"",whereLanguage:"sql",select:[{valueExpression:"",aggFn:"count",alias:"error_count",aggCondition:z.isError,aggConditionLanguage:"sql"},{valueExpression:"",aggFn:"count",alias:"total_count"},{valueExpression:"error_count / total_count",alias:"Error Rate %"}],numberFormat:$.zE,filters:V,dateRange:M},showDisplaySwitcher:!1}),T[25]=V,T[26]=z,T[27]=M,T[28]=D,T[29]=x):x=T[29],T[30]!==x?(b=(0,r.jsx)(g.x.Col,{span:6,children:(0,r.jsx)(L.w,{style:h,children:x})}),T[30]=x,T[31]=b):b=T[31],T[32]===Symbol.for("react.memo_cache_sentinel")?(v={height:350},T[32]=v):v=T[32],T[33]!==V||T[34]!==z||T[35]!==M||T[36]!==D?(y=D&&z&&(0,r.jsx)(ep.S,{title:"Request Throughput",sourceId:D.id,config:{source:D.id,...c()(D,["timestampValueExpression","connection","from"]),where:"",whereLanguage:"sql",select:[{aggFn:"count",valueExpression:"value",alias:"Requests",aggCondition:"",aggConditionLanguage:"sql"}],displayType:p.t2.Line,numberFormat:{...$.x5,unit:"requests"},filters:V,dateRange:M}}),T[33]=V,T[34]=z,T[35]=M,T[36]=D,T[37]=y):y=T[37],T[38]!==y?(_=(0,r.jsx)(g.x.Col,{span:6,children:(0,r.jsx)(L.w,{style:v,children:y})}),T[38]=y,T[39]=_):_=T[39],T[40]!==F||T[41]!==M||T[42]!==R||T[43]!==D?(j=(0,r.jsx)(g.x.Col,{span:6,children:(0,r.jsx)(eL,{source:D,dateRange:M,service:R,endpoint:F})}),T[40]=F,T[41]=M,T[42]=R,T[43]=D,T[44]=j):j=T[44],T[45]!==V||T[46]!==M||T[47]!==D?(S=(0,r.jsx)(g.x.Col,{span:6,children:(0,r.jsx)(e2,{source:D,dateRange:M,extraFilters:V})}),T[45]=V,T[46]=M,T[47]=D,T[48]=S):S=T[48],T[49]!==V||T[50]!==z||T[51]!==M||T[52]!==D?(w=z&&(0,r.jsx)(eC,{title:"Slowest 5% of Transactions",source:D,dateRange:M,extraFilters:V}),T[49]=V,T[50]=z,T[51]=M,T[52]=D,T[53]=w):w=T[53],T[54]!==w?(E=(0,r.jsx)(g.x.Col,{span:12,children:w}),T[54]=w,T[55]=E):E=T[55],T[56]!==b||T[57]!==_||T[58]!==j||T[59]!==S||T[60]!==E?(C=(0,r.jsx)(ev.y,{children:(0,r.jsxs)(g.x,{grow:!1,w:"100%",maw:"100%",overflow:"hidden",children:[b,_,j,S,E]})}),T[56]=b,T[57]=_,T[58]=j,T[59]=S,T[60]=E,T[61]=C):C=T[61],T[62]!==C||T[63]!==m?(N=(0,r.jsxs)("div",{className:eT().panel,children:[m,C]}),T[62]=C,T[63]=m,T[64]=N):N=T[64],T[65]!==O||T[66]!==N?(k=(0,r.jsx)(ek.S.Provider,{value:O,children:N}),T[65]=O,T[66]=N,T[67]=k):k=T[67],T[68]!==O||T[69]!==q||T[70]!==k?(A=(0,r.jsx)(ef._,{opened:!0,onClose:q,position:"right",size:"80vw",withCloseButton:!1,zIndex:O,styles:l,children:k}),T[68]=O,T[69]=q,T[70]=k,T[71]=A):A=T[71],A):null}var eR=s(57478),eM=s(64467),eD=s(58153),ez=s(26814),eF=s(32479),eP=s(56514),eq=s(43370),eO=s(387),eV=s(11104),eH=s(60665),eB=s(6876),eW=s(62759);function eK(){eH.$e.show({message:"Error updating filters",color:"red"})}var eJ=s(98142),eG=s(3061),eU=s(45034);let eY=s(6379).yI;function eQ({appliedConfig:e,expressions:t,includeIsSpanKindServer:s=!0,includeNonEmptyEndpointFilter:r=!1}){let n=[...e.additionalFilters||[]];return s&&n.push({type:"sql",condition:t.isSpanKindServer}),e.service&&n.push({type:"sql",condition:`${t.service} IN ('${e.service}')`}),r&&n.push({type:"sql",condition:t.isEndpointNonEmpty}),n}function eZ(e){let t,s,a,i,l,o,c,d,u,m,h,p,x,g,f,b=(0,n.c)(38);b[0]!==e?({sourceId:i,onCreate:s,dateRange:t,...a}=e,b[0]=e,b[1]=t,b[2]=s,b[3]=a,b[4]=i):(t=b[1],s=b[2],a=b[3],i=b[4]),b[5]!==i?(l={id:i},b[5]=i,b[6]=l):l=b[6];let{data:v}=(0,K.Fo)(l);b[7]!==v?(o={source:v},b[7]=v,b[8]=o):o=b[8];let{expressions:y}=ew(o),_=v?.id,j=v?.timestampValueExpression||"",S=v?.from.databaseName||"",w=v?.from.tableName||"";b[9]!==S||b[10]!==w?(c={databaseName:S,tableName:w},b[9]=S,b[10]=w,b[11]=c):c=b[11];let E=v?.connection||"",C=`distinct(${y?.service})`;b[12]!==C?(d=[{alias:"service",valueExpression:C}],b[12]=C,b[13]=d):d=b[13];let N=`${y?.service} IS NOT NULL`;b[14]===Symbol.for("react.memo_cache_sentinel")?(u={limit:1e4},b[14]=u):u=b[14],b[15]!==t||b[16]!==d||b[17]!==N||b[18]!==_||b[19]!==j||b[20]!==c||b[21]!==E?(m={source:_,timestampValueExpression:j,from:c,connection:E,select:d,where:N,whereLanguage:"sql",limit:u,dateRange:t},b[15]=t,b[16]=d,b[17]=N,b[18]=_,b[19]=j,b[20]=c,b[21]=E,b[22]=m):m=b[22];let k=m;b[23]!==k?(h=["service-select",k],b[23]=k,b[24]=h):h=b[24];let A=!!v&&!!y;b[25]!==h||b[26]!==A?(p={placeholderData:e1,queryKey:h,enabled:A},b[25]=h,b[26]=A,b[27]=p):p=b[27];let{data:T,isLoading:$,isError:L}=(0,B.HD)(k,p);if(b[28]!==T?.data){let e,t=T?.data?.map(e0).filter(Boolean).sort(eX)||[];b[30]===Symbol.for("react.memo_cache_sentinel")?(e={value:"",label:"All Services"},b[30]=e):e=b[30],x=[e,...t],b[28]=T?.data,b[29]=x}else x=b[29];let I=x,R=$||L;b[31]===Symbol.for("react.memo_cache_sentinel")?(g={withinPortal:!1},b[31]=g):g=b[31];let M=$?"Loading more...":"No matches found";return b[32]!==s||b[33]!==a||b[34]!==R||b[35]!==M||b[36]!==I?(f=(0,r.jsx)(eg.A,{...a,data:I,disabled:R,comboboxProps:g,searchable:!0,placeholder:"All Services",maxDropdownHeight:280,onCreate:s,nothingFoundMessage:M}),b[32]=s,b[33]=a,b[34]=R,b[35]=M,b[36]=I,b[37]=f):f=b[37],f}function eX(e,t){return e.localeCompare(t,void 0,{sensitivity:"base"})}function e0(e){return e.service}function e1(e){return e}function e2(e){let t,s,i,l,o,d,u=(0,n.c)(11),{source:m,dateRange:h,appliedConfig:p,extraFilters:x}=e,g=void 0===p?{}:p,f=void 0===x?[]:x;u[0]!==m?(t={source:m},u[0]=m,u[1]=t):t=u[1];let{expressions:b}=ew(t),[v,y]=(0,a.useState)("line");u[2]===Symbol.for("react.memo_cache_sentinel")?(s={value:"line",label:"Display as Line Chart",icon:(0,r.jsx)(w.A,{})},u[2]=s):s=u[2],u[3]===Symbol.for("react.memo_cache_sentinel")?(i=[s,{value:"histogram",label:"Display as Histogram",icon:(0,r.jsx)(E,{})}],u[3]=i):i=u[3],u[4]!==v?(l=(0,r.jsx)(eV.A,{value:v,onChange:y,options:i},"display-switcher"),u[4]=v,u[5]=l):l=u[5];let _=l,j=L.w;u[6]===Symbol.for("react.memo_cache_sentinel")?(o={height:350},u[6]=o):o=u[6];let S=m&&b&&("line"===v?(0,r.jsx)(ep.S,{title:"Request Latency",toolbarSuffix:[_],showDisplaySwitcher:!1,sourceId:m.id,hiddenSeries:["p95_duration_ns","p50_duration_ns","avg_duration_ns"],config:{source:m.id,...c()(m,["timestampValueExpression","connection","from"]),where:g.where||"",whereLanguage:g.whereLanguage||"sql",select:[{alias:"p95_duration_ns",aggFn:"quantile",level:.95,valueExpression:b.duration,aggCondition:""},{alias:"95th Percentile",valueExpression:`p95_duration_ns / ${b.durationDivisorForMillis}`},{alias:"p50_duration_ns",aggFn:"quantile",level:.5,valueExpression:b.duration,aggCondition:""},{alias:"Median",valueExpression:`p50_duration_ns / ${b.durationDivisorForMillis}`},{alias:"avg_duration_ns",aggFn:"avg",valueExpression:b.duration,aggCondition:""},{alias:"Avg",valueExpression:`avg_duration_ns / ${b.durationDivisorForMillis}`}],filters:[...f,...eQ({appliedConfig:g,expressions:b})],numberFormat:$.xh,dateRange:h}}):(0,r.jsx)(es,{title:"Request Latency",toolbarSuffix:[_],config:{source:m.id,...c()(m,["timestampValueExpression","connection","from"]),where:g.where||"",whereLanguage:g.whereLanguage||"sql",select:[{alias:"data_nanoseconds",aggFn:"histogram",level:20,valueExpression:b.duration},{alias:"data",valueExpression:`arrayMap(bin -> (bin.1 / ${b.durationDivisorForMillis}, bin.2 / ${b.durationDivisorForMillis}, bin.3), data_nanoseconds)`}],filters:[...f,...eQ({appliedConfig:g,expressions:b})],dateRange:h}}));return u[7]!==j||u[8]!==o||u[9]!==S?(d=(0,r.jsx)(j,{style:o,children:S}),u[7]=j,u[8]=o,u[9]=S,u[10]=d):d=u[10],d}function e3(e){let t,s,i,l,o,u,m,b,v,y,_,j,S,w,E,C,N,k,A,T=(0,n.c)(123),{searchedTimeRange:I,appliedConfig:R}=e;T[0]!==R.source?(t={id:R.source},T[0]=R.source,T[1]=t):t=T[1];let{data:M}=(0,K.Fo)(t);T[2]!==M?(s={source:M},T[2]=M,T[3]=s):s=T[3];let{expressions:D}=ew(s);T[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,d.Oq)(["overall","endpoint"]).withDefault("overall"),T[4]=i):i=T[4];let[z,F]=(0,d.ZA)("reqChartType",i),[P,q]=(0,a.useState)("time"),O=I[0].getTime(),V=I[1].getTime();e:{let e,t,s,r,n,a,i,o,d,u,m,x,g,f,b,v,y,_,j,S,w,E,C;if(!M||!D){l=null;break e}if("overall"===z){let e,t,s,r,n,a,i,o=M.id;T[5]!==M?(e=c()(M,["timestampValueExpression","connection","from"]),T[5]=M,T[6]=e):e=T[6];let d=R.where||"",u=R.whereLanguage||"sql";T[7]===Symbol.for("react.memo_cache_sentinel")?(t={valueExpression:"",aggFn:"count",alias:"total_requests"},T[7]=t):t=T[7],T[8]!==D.isError?(s={valueExpression:"",aggFn:"count",aggCondition:D.isError,aggConditionLanguage:"sql",alias:"error_requests"},T[8]=D.isError,T[9]=s):s=T[9],T[10]===Symbol.for("react.memo_cache_sentinel")?(r={valueExpression:"error_requests / total_requests",alias:"error_rate"},T[10]=r):r=T[10],T[11]!==s?(n=[t,s,r],T[11]=s,T[12]=n):n=T[12],T[13]!==R||T[14]!==D?(a=eQ({appliedConfig:R,expressions:D}),T[13]=R,T[14]=D,T[15]=a):a=T[15],T[16]!==I||T[17]!==M.id||T[18]!==n||T[19]!==a||T[20]!==e||T[21]!==d||T[22]!==u?(i={source:o,...e,where:d,whereLanguage:u,displayType:p.t2.Line,select:n,numberFormat:$.zE,filters:a,dateRange:I},T[16]=I,T[17]=M.id,T[18]=n,T[19]=a,T[20]=e,T[21]=d,T[22]=u,T[23]=i):i=T[23],l=i;break e}let N=M.connection,k=M.id,A=M?.timestampValueExpression||"",L=M?.connection??"";T[24]!==M.from?(e=M?.from??{databaseName:"",tableName:""},T[24]=M.from,T[25]=e):e=T[25];let F=R.where||"",P=R.whereLanguage||"sql";T[26]!==D.isError?(t={valueExpression:"",aggFn:"count",alias:"error_count",aggCondition:D.isError,aggConditionLanguage:"sql"},T[26]=D.isError,T[27]=t):t=T[27],T[28]===Symbol.for("react.memo_cache_sentinel")?(s={valueExpression:"",aggFn:"count",alias:"total_count"},r={valueExpression:"error_count / total_count",alias:"error_rate"},T[28]=s,T[29]=r):(s=T[28],r=T[29]);let q=D?.endpoint;T[30]!==q?(n={valueExpression:q,alias:"endpoint"},T[30]=q,T[31]=n):n=T[31],T[32]!==t||T[33]!==n?(a=[t,s,r,n],T[32]=t,T[33]=n,T[34]=a):a=T[34],T[35]!==R||T[36]!==D?(i=eQ({appliedConfig:R,expressions:D}),T[35]=R,T[36]=D,T[37]=i):i=T[37],T[38]===Symbol.for("react.memo_cache_sentinel")?(o=[{valueExpression:"endpoint"}],d=[{valueExpression:"endpoint",ordering:"ASC"}],T[38]=o,T[39]=d):(o=T[38],d=T[39]),T[40]!==I?(u=(0,h.tA)(I),T[40]=I,T[41]=u):u=T[41],T[42]!==I||T[43]!==F||T[44]!==P||T[45]!==a||T[46]!==i||T[47]!==u||T[48]!==A||T[49]!==L||T[50]!==e?(m={timestampValueExpression:A,connection:L,from:e,where:F,whereLanguage:P,select:a,filters:i,groupBy:o,orderBy:d,dateRange:I,granularity:u},T[42]=I,T[43]=F,T[44]=P,T[45]=a,T[46]=i,T[47]=u,T[48]=A,T[49]=L,T[50]=e,T[51]=m):m=T[51];let O=m;T[52]!==O?(x={name:"error_series",chartConfig:O,isSubquery:!0},T[52]=O,T[53]=x):x=T[53],T[54]===Symbol.for("react.memo_cache_sentinel")?(g=[{valueExpression:"groupArray(error_rate)",alias:"error_rate"},{valueExpression:"endpoint"},{valueExpression:"groupArray(__hdx_time_bucket)",alias:"__hdx_time_buckets"}],f={databaseName:"",tableName:"error_series"},T[54]=g,T[55]=f):(g=T[54],f=T[55]),T[56]===Symbol.for("react.memo_cache_sentinel")?(b={limit:eY},T[56]=b):b=T[56],T[57]!==M.connection?(v={name:"selected_error_series",isSubquery:!0,chartConfig:{timestampValueExpression:"__hdx_time_bucket",connection:M.connection,select:g,from:f,where:"",groupBy:"endpoint",orderBy:"max(error_series.error_rate) DESC",limit:b}},T[57]=M.connection,T[58]=v):v=T[58],T[59]===Symbol.for("react.memo_cache_sentinel")?(y=[{valueExpression:"endpoint"},{valueExpression:"arrayJoin(arrayZip(error_rate, __hdx_time_buckets))",alias:"zipped"}],_={databaseName:"",tableName:"selected_error_series"},T[59]=y,T[60]=_):(y=T[59],_=T[60]),T[61]!==M.connection?(j={name:"zipped_error_series",isSubquery:!0,chartConfig:{timestampValueExpression:"__hdx_time_bucket",connection:M.connection,select:y,from:_,where:""}},T[61]=M.connection,T[62]=j):j=T[62],T[63]!==x||T[64]!==v||T[65]!==j?(S=[x,v,j],T[63]=x,T[64]=v,T[65]=j,T[66]=S):S=T[66],T[67]===Symbol.for("react.memo_cache_sentinel")?(w=[{valueExpression:"tupleElement(zipped, 1)",alias:"Error Rate %"},{valueExpression:"endpoint"},{valueExpression:"tupleElement(zipped, 2)",alias:"series_time_bucket"}],E={databaseName:"",tableName:"zipped_error_series"},T[67]=w,T[68]=E):(w=T[67],E=T[68]),T[69]!==I||T[70]!==M.connection||T[71]!==M.id||T[72]!==S?(C={timestampValueExpression:"series_time_bucket",connection:N,source:k,with:S,select:w,from:E,where:"",dateRange:I,displayType:p.t2.Line,numberFormat:$.zE,groupBy:"zipped, endpoint"},T[69]=I,T[70]=M.connection,T[71]=M.id,T[72]=S,T[73]=C):C=T[73],l=C}let H=l;return T[74]===Symbol.for("react.memo_cache_sentinel")?(o={height:350},T[74]=o):o=T[74],T[75]!==z||T[76]!==H||T[77]!==F||T[78]!==M?(u=M&&H&&(0,r.jsx)(ep.S,{title:"Request Error Rate",toolbarSuffix:[(0,r.jsx)(x.I,{size:"xs",value:z,onChange:F,data:[{label:"Overall",value:"overall"},{label:"By Endpoint",value:"endpoint"}]},"request-error-rate-segmented-control")],sourceId:M.id,hiddenSeries:["total_requests","error_requests"],config:H,showDisplaySwitcher:!1,disableQueryChunking:!0,disableDrillDown:!0}),T[75]=z,T[76]=H,T[77]=F,T[78]=M,T[79]=u):u=T[79],T[80]!==u?(m=(0,r.jsx)(g.x.Col,{span:6,children:(0,r.jsx)(L.w,{style:o,children:u})}),T[80]=u,T[81]=m):m=T[81],T[82]===Symbol.for("react.memo_cache_sentinel")?(b={height:350},T[82]=b):b=T[82],T[83]!==R||T[84]!==D||T[85]!==I||T[86]!==M?(v=M&&D&&(0,r.jsx)(ep.S,{title:"Request Throughput",sourceId:M.id,config:{source:M.id,...c()(M,["timestampValueExpression","connection","from"]),where:R.where||"",whereLanguage:R.whereLanguage||"sql",displayType:p.t2.Line,select:[{aggFn:"count",valueExpression:"value",alias:"Requests",aggCondition:"",aggConditionLanguage:"sql"}],numberFormat:{...$.x5,unit:"requests"},filters:eQ({appliedConfig:R,expressions:D}),dateRange:I}}),T[83]=R,T[84]=D,T[85]=I,T[86]=M,T[87]=v):v=T[87],T[88]!==v?(y=(0,r.jsx)(g.x.Col,{span:6,children:(0,r.jsx)(L.w,{style:b,children:v})}),T[88]=v,T[89]=y):y=T[89],T[90]===Symbol.for("react.memo_cache_sentinel")?(_={height:350,overflow:"auto"},T[90]=_):_=T[90],T[91]!==R||T[92]!==V||T[93]!==D||T[94]!==I||T[95]!==M||T[96]!==O?(j=M&&D&&(0,r.jsx)(eu,{title:"Top 20 Most Time Consuming Endpoints",groupColumn:"Endpoint",valueColumn:"Total (ms)",getRowSearchLink:e5,hiddenSeries:["duration_ns","total_requests","duration_p95_ns","duration_p50_ns","error_requests"],config:{source:M.id,...c()(M,["timestampValueExpression","connection","from"]),where:R.where||"",whereLanguage:R.whereLanguage||"sql",select:[{alias:"Endpoint",valueExpression:D.endpoint},{alias:"duration_ns",aggFn:"sum",valueExpression:D.duration,aggCondition:""},{alias:"Total (ms)",valueExpression:`duration_ns / ${D.durationDivisorForMillis}`,aggCondition:""},{alias:"total_requests",aggFn:"count",valueExpression:""},{alias:"Req/Min",valueExpression:`
                      total_requests /
                      age('mi', toDateTime(${O/1e3}), toDateTime(${V/1e3}))`},{alias:"duration_p95_ns",aggFn:"quantile",level:.95,valueExpression:D.duration,aggCondition:""},{alias:"P95 (ms)",valueExpression:`duration_p95_ns / ${D.durationDivisorForMillis}`},{alias:"duration_p50_ns",aggFn:"quantile",level:.5,valueExpression:D.duration,aggCondition:""},{alias:"Median (ms)",valueExpression:`duration_p50_ns / ${D.durationDivisorForMillis}`},{alias:"error_requests",aggFn:"count",valueExpression:"",aggCondition:D.isError,aggConditionLanguage:"sql"},{alias:"Errors/Min",valueExpression:`error_requests /
                      age('mi', toDateTime(${O/1e3}), toDateTime(${V/1e3}))`}],selectGroupBy:!1,groupBy:D.endpoint,orderBy:'"Total (ms)" DESC',filters:[...eQ({appliedConfig:R,expressions:D})],dateRange:I,numberFormat:$.xh,limit:{limit:20}}}),T[91]=R,T[92]=V,T[93]=D,T[94]=I,T[95]=M,T[96]=O,T[97]=j):j=T[97],T[98]!==j?(S=(0,r.jsx)(g.x.Col,{span:6,children:(0,r.jsx)(L.w,{style:_,children:j})}),T[98]=j,T[99]=S):S=T[99],T[100]!==R||T[101]!==I||T[102]!==M?(w=M&&(0,r.jsx)(e2,{appliedConfig:R,dateRange:I,source:M}),T[100]=R,T[101]=I,T[102]=M,T[103]=w):w=T[103],T[104]!==w?(E=(0,r.jsx)(g.x.Col,{span:6,children:w}),T[104]=w,T[105]=E):E=T[105],T[106]===Symbol.for("react.memo_cache_sentinel")?(C={height:350},T[106]=C):C=T[106],T[107]!==R||T[108]!==V||T[109]!==D||T[110]!==I||T[111]!==M||T[112]!==O||T[113]!==P?(N=M&&D&&(0,r.jsx)(eh.A,{title:(0,r.jsxs)(f.E,{size:"sm",children:["Top 20"," ","time"===P?"Most Time Consuming":"Highest Error Rate"]}),toolbarSuffix:[(0,r.jsx)(x.I,{size:"xs",value:P,onChange:e=>{("time"===e||"error"===e)&&q(e)},data:[{label:"Sort by Time",value:"time"},{label:"Sort by Errors",value:"error"}]},"top-endpoints-chart-segmented-control")],getRowSearchLink:e5,hiddenColumns:["total_count","p95_duration_ns","p50_duration_ns","duration_sum_ns","error_count"],config:{source:M.id,...c()(M,["timestampValueExpression","connection","from"]),where:R.where||"",whereLanguage:R.whereLanguage||"sql",select:[{alias:"Endpoint",valueExpression:D.endpoint},{alias:"total_count",valueExpression:"",aggFn:"count"},{alias:"Req/Min",valueExpression:`round(total_count /
                        age('mi', toDateTime(${O/1e3}), toDateTime(${V/1e3})), 1)`},{alias:"p95_duration_ns",valueExpression:D.duration,aggFn:"quantile",level:.95},{alias:"P95 (ms)",valueExpression:`round(p95_duration_ns / ${D.durationDivisorForMillis}, 2)`},{alias:"p50_duration_ns",valueExpression:D.duration,aggFn:"quantile",level:.5},{alias:"Median (ms)",valueExpression:`round(p50_duration_ns / ${D.durationDivisorForMillis}, 2)`},{alias:"duration_sum_ns",valueExpression:D.duration,aggFn:"sum"},{alias:"Total (ms)",valueExpression:`round(duration_sum_ns / ${D.durationDivisorForMillis}, 2)`},{alias:"error_count",valueExpression:"",aggCondition:D.isError,aggConditionLanguage:"sql",aggFn:"count"},{alias:"Errors/Min",valueExpression:`round(error_count /
                      age('mi', toDateTime(${O/1e3}), toDateTime(${V/1e3})), 1)`}],filters:eQ({appliedConfig:R,expressions:D,includeNonEmptyEndpointFilter:!0}),selectGroupBy:!1,groupBy:D.endpoint,dateRange:I,orderBy:"time"===P?'"Total (ms)" DESC':'"Errors/Min" DESC',limit:{limit:20}}}),T[107]=R,T[108]=V,T[109]=D,T[110]=I,T[111]=M,T[112]=O,T[113]=P,T[114]=N):N=T[114],T[115]!==N?(k=(0,r.jsx)(g.x.Col,{span:12,children:(0,r.jsx)(L.w,{style:C,children:N})}),T[115]=N,T[116]=k):k=T[116],T[117]!==y||T[118]!==S||T[119]!==E||T[120]!==k||T[121]!==m?(A=(0,r.jsxs)(g.x,{mt:"md",grow:!1,w:"100%",maw:"100%",overflow:"hidden",children:[m,y,S,E,k]}),T[117]=y,T[118]=S,T[119]=E,T[120]=k,T[121]=m,T[122]=A):A=T[122],A}function e5(e){let t=new URLSearchParams(window.location.search);return t.set("endpoint",`${e.Endpoint}`),window.location.pathname+"?"+t.toString()}function e4(e){let t,s,i,l,o,d,u,m,x,f,b,v,y,_,j,S,w,E=(0,n.c)(126),{searchedTimeRange:k,appliedConfig:A}=e;E[0]!==A.source?(t={id:A.source},E[0]=A.source,E[1]=t):t=E[1];let{data:T}=(0,K.Fo)(t);E[2]!==T?(s={source:T},E[2]=T,E[3]=s):s=E[3];let{expressions:I}=ew(s),[R,M]=(0,a.useState)("list");e:{let e,t,s,r,n,a,l,o,d,u,m,x,g,f,b,v,y,_,j,S;if(!T||!I){i=null;break e}E[4]!==T?(e=c()(T,["timestampValueExpression","connection","from"]),E[4]=T,E[5]=e):e=E[5];let w=A.where||"",C=A.whereLanguage||"sql";E[6]!==I.duration?(t={alias:"total_query_time_ns",aggFn:"sum",valueExpression:I.duration,aggCondition:""},E[6]=I.duration,E[7]=t):t=E[7];let N=`total_query_time_ns / ${I.durationDivisorForMillis}`;if(E[8]!==N?(s={alias:"total_query_time_ms",valueExpression:N},E[8]=N,E[9]=s):s=E[9],E[10]!==I.dbStatement?(r={alias:"Statement",valueExpression:I.dbStatement},E[10]=I.dbStatement,E[11]=r):r=E[11],E[12]!==r||E[13]!==t||E[14]!==s?(n=[t,s,r],E[12]=r,E[13]=t,E[14]=s,E[15]=n):n=E[15],E[16]!==A||E[17]!==I){let e;E[19]!==I.isDbSpan?(e={type:"sql",condition:I.isDbSpan},E[19]=I.isDbSpan,E[20]=e):e=E[20],a=[...eQ({expressions:I,appliedConfig:A,includeIsSpanKindServer:!1}),e],E[16]=A,E[17]=I,E[18]=a}else a=E[18];E[21]!==k?(l=(0,h.tA)(k),E[21]=k,E[22]=l):l=E[22],E[23]!==k||E[24]!==n||E[25]!==a||E[26]!==l||E[27]!==e||E[28]!==w||E[29]!==C?(o={...e,where:w,whereLanguage:C,select:n,groupBy:"Statement",filters:a,dateRange:k,granularity:l},E[23]=k,E[24]=n,E[25]=a,E[26]=l,E[27]=e,E[28]=w,E[29]=C,E[30]=o):o=E[30];let L=o;E[31]!==L?(d={name:"queries_by_total_time",isSubquery:!0,chartConfig:L},E[31]=L,E[32]=d):d=E[32],E[33]===Symbol.for("react.memo_cache_sentinel")?(u=[{valueExpression:"Statement"},{valueExpression:"groupArray(total_query_time_ms)",alias:"total_query_time_ms"},{valueExpression:"groupArray(__hdx_time_bucket)",alias:"__hdx_time_buckets"}],m={databaseName:"",tableName:"queries_by_total_time"},E[33]=u,E[34]=m):(u=E[33],m=E[34]),E[35]===Symbol.for("react.memo_cache_sentinel")?(x={limit:eY},E[35]=x):x=E[35],E[36]!==T.connection?(g={name:"top_queries_by_total_time",isSubquery:!0,chartConfig:{connection:T.connection,select:u,from:m,groupBy:"Statement",where:"",orderBy:"max(queries_by_total_time.total_query_time_ms) DESC",limit:x,timestampValueExpression:""}},E[36]=T.connection,E[37]=g):g=E[37],E[38]===Symbol.for("react.memo_cache_sentinel")?(f=[{valueExpression:"Statement"},{valueExpression:"arrayJoin(arrayZip(total_query_time_ms, __hdx_time_buckets))",alias:"zipped"}],b={databaseName:"",tableName:"top_queries_by_total_time"},E[38]=f,E[39]=b):(f=E[38],b=E[39]),E[40]!==T.connection?(v={name:"zipped_series",isSubquery:!0,chartConfig:{connection:T.connection,select:f,from:b,where:"",timestampValueExpression:""}},E[40]=T.connection,E[41]=v):v=E[41],E[42]!==d||E[43]!==g||E[44]!==v?(y=[d,g,v],E[42]=d,E[43]=g,E[44]=v,E[45]=y):y=E[45],E[46]===Symbol.for("react.memo_cache_sentinel")?(_=[{valueExpression:"Statement"},{valueExpression:"tupleElement(zipped, 1)",alias:"Total Query Time"},{valueExpression:"tupleElement(zipped, 2)",alias:"series_time_bucket"}],j={databaseName:"",tableName:"zipped_series"},E[46]=_,E[47]=j):(_=E[46],j=E[47]),E[48]!==k||E[49]!==T.connection||E[50]!==T.id||E[51]!==y?(S={with:y,select:_,from:j,where:"",displayType:p.t2.StackedBar,numberFormat:$.xh,groupBy:"Statement, zipped",dateRange:k,timestampValueExpression:"series_time_bucket",connection:T.connection,source:T.id},E[48]=k,E[49]=T.connection,E[50]=T.id,E[51]=y,E[52]=S):S=E[52],i=S}let D=i;t:{let e,t,s,r,n,a,i,o,d,u,m,x,g,f,b,v,y,_,j;if(!T||!I){l=null;break t}E[53]!==T?(e=c()(T,["timestampValueExpression","connection","from"]),E[53]=T,E[54]=e):e=E[54];let S=A.where||"",w=A.whereLanguage||"sql";if(E[55]===Symbol.for("react.memo_cache_sentinel")?(t={alias:"total_query_count",aggFn:"count",valueExpression:"",aggCondition:""},E[55]=t):t=E[55],E[56]!==I.dbStatement?(s=[t,{alias:"Statement",valueExpression:I.dbStatement}],E[56]=I.dbStatement,E[57]=s):s=E[57],E[58]!==A||E[59]!==I){let e;E[61]!==I.isDbSpan?(e={type:"sql",condition:I.isDbSpan},E[61]=I.isDbSpan,E[62]=e):e=E[62],r=[...eQ({expressions:I,appliedConfig:A,includeIsSpanKindServer:!1}),e],E[58]=A,E[59]=I,E[60]=r}else r=E[60];E[63]!==k?(n=(0,h.tA)(k),E[63]=k,E[64]=n):n=E[64],E[65]!==k||E[66]!==r||E[67]!==n||E[68]!==e||E[69]!==S||E[70]!==w||E[71]!==s?(a={...e,where:S,whereLanguage:w,select:s,groupBy:"Statement",filters:r,dateRange:k,granularity:n},E[65]=k,E[66]=r,E[67]=n,E[68]=e,E[69]=S,E[70]=w,E[71]=s,E[72]=a):a=E[72];let C=a;E[73]!==C?(i={name:"queries_by_total_count",isSubquery:!0,chartConfig:C},E[73]=C,E[74]=i):i=E[74],E[75]===Symbol.for("react.memo_cache_sentinel")?(o=[{valueExpression:"Statement"},{valueExpression:"groupArray(total_query_count)",alias:"total_query_count"},{valueExpression:"groupArray(__hdx_time_bucket)",alias:"__hdx_time_buckets"}],d={databaseName:"",tableName:"queries_by_total_count"},E[75]=o,E[76]=d):(o=E[75],d=E[76]),E[77]===Symbol.for("react.memo_cache_sentinel")?(u={limit:eY},E[77]=u):u=E[77],E[78]!==T.connection?(m={name:"top_queries_by_total_count",isSubquery:!0,chartConfig:{connection:T.connection,select:o,from:d,groupBy:"Statement",where:"",orderBy:"max(queries_by_total_count.total_query_count) DESC",limit:u,timestampValueExpression:""}},E[78]=T.connection,E[79]=m):m=E[79],E[80]===Symbol.for("react.memo_cache_sentinel")?(x=[{valueExpression:"Statement"},{valueExpression:"arrayJoin(arrayZip(total_query_count, __hdx_time_buckets))",alias:"zipped"}],g={databaseName:"",tableName:"top_queries_by_total_count"},E[80]=x,E[81]=g):(x=E[80],g=E[81]),E[82]!==T.connection?(f={name:"zipped_series",isSubquery:!0,chartConfig:{connection:T.connection,select:x,from:g,where:"",timestampValueExpression:""}},E[82]=T.connection,E[83]=f):f=E[83],E[84]!==i||E[85]!==m||E[86]!==f?(b=[i,m,f],E[84]=i,E[85]=m,E[86]=f,E[87]=b):b=E[87],E[88]===Symbol.for("react.memo_cache_sentinel")?(v=[{valueExpression:"Statement"},{valueExpression:"tupleElement(zipped, 1)",alias:"Total Query Count"},{valueExpression:"tupleElement(zipped, 2)",alias:"series_time_bucket"}],y={databaseName:"",tableName:"zipped_series"},E[88]=v,E[89]=y):(v=E[88],y=E[89]),E[90]===Symbol.for("react.memo_cache_sentinel")?(_={...$.x5,unit:"queries"},E[90]=_):_=E[90],E[91]!==k||E[92]!==T.connection||E[93]!==T.id||E[94]!==b?(j={with:b,select:v,from:y,where:"",displayType:p.t2.StackedBar,numberFormat:_,groupBy:"Statement, zipped",dateRange:k,timestampValueExpression:"series_time_bucket",connection:T.connection,source:T.id},E[91]=k,E[92]=T.connection,E[93]=T.id,E[94]=b,E[95]=j):j=E[95],l=j}let z=l;E[96]===Symbol.for("react.memo_cache_sentinel")?(o={label:"Show as List",icon:(0,r.jsx)(C.A,{size:14}),value:"list"},E[96]=o):o=E[96],E[97]===Symbol.for("react.memo_cache_sentinel")?(d=[o,{label:"Show as Table",icon:(0,r.jsx)(N.A,{size:14}),value:"table"}],E[97]=d):d=E[97],E[98]!==R?(u=(0,r.jsx)(eV.A,{value:R,onChange:M,options:d},"display-switcher"),E[98]=R,E[99]=u):u=E[99];let F=u;return E[100]===Symbol.for("react.memo_cache_sentinel")?(m={height:350},E[100]=m):m=E[100],E[101]!==T||E[102]!==D?(x=T&&D&&(0,r.jsx)(ep.S,{title:"Total Time Consumed per Query",sourceId:T.id,config:D,disableDrillDown:!0,disableQueryChunking:!0}),E[101]=T,E[102]=D,E[103]=x):x=E[103],E[104]!==x?(f=(0,r.jsx)(g.x.Col,{span:6,children:(0,r.jsx)(L.w,{style:m,children:x})}),E[104]=x,E[105]=f):f=E[105],E[106]===Symbol.for("react.memo_cache_sentinel")?(b={height:350},E[106]=b):b=E[106],E[107]!==T||E[108]!==z?(v=T&&z&&(0,r.jsx)(ep.S,{title:"Throughput per Query",sourceId:T.id,config:z,disableQueryChunking:!0,disableDrillDown:!0}),E[107]=T,E[108]=z,E[109]=v):v=E[109],E[110]!==v?(y=(0,r.jsx)(g.x.Col,{span:6,children:(0,r.jsx)(L.w,{style:b,children:v})}),E[110]=v,E[111]=y):y=E[111],E[112]===Symbol.for("react.memo_cache_sentinel")?(_={height:350,overflow:"auto"},E[112]=_):_=E[112],E[113]!==A||E[114]!==R||E[115]!==F||E[116]!==I||E[117]!==k||E[118]!==T?(j=T&&I&&("list"===R?(0,r.jsx)(eu,{title:"Top 20 Most Time Consuming Queries",toolbarItems:[F],groupColumn:"Statement",valueColumn:"Total",hoverCardPosition:"top-start",getRowSearchLink:e6,hiddenSeries:["total_duration_ns","total_queries","p95_duration_ns","p50_duration_ns"],config:{source:T.id,...c()(T,["timestampValueExpression","connection","from"]),where:A.where||"",whereLanguage:A.whereLanguage||"sql",dateRange:k,groupBy:"Statement",selectGroupBy:!1,orderBy:'"Total" DESC',select:[{alias:"Statement",valueExpression:I.dbStatement},{alias:"total_duration_ns",aggFn:"sum",valueExpression:I.duration,aggCondition:""},{alias:"Total",valueExpression:`total_duration_ns / ${I.durationDivisorForMillis}`},{alias:"total_queries",aggFn:"count",valueExpression:""},{alias:"Queries/Min",valueExpression:`total_queries / age('mi', toDateTime(${k[0].getTime()/1e3}), toDateTime(${k[1].getTime()/1e3}))`},{alias:"p95_duration_ns",aggFn:"quantile",level:.95,valueExpression:I.duration,aggCondition:""},{alias:"P95 (ms)",valueExpression:`p95_duration_ns / ${I.durationDivisorForMillis}`},{alias:"p50_duration_ns",aggFn:"quantile",level:.5,valueExpression:I.duration,aggCondition:""},{alias:"Median (ms)",valueExpression:`p50_duration_ns / ${I.durationDivisorForMillis}`}],filters:[...eQ({appliedConfig:A,expressions:I,includeIsSpanKindServer:!1}),{type:"sql",condition:I.isDbSpan}],limit:{limit:20}}}):(0,r.jsx)(eh.A,{title:"Top 20 Most Time Consuming Queries",toolbarSuffix:[F],getRowSearchLink:e6,hiddenColumns:["duration_ns","total_count","p95_duration_ns","p50_duration_ns"],config:{source:T.id,...c()(T,["timestampValueExpression","connection","from"]),where:A.where||"",whereLanguage:A.whereLanguage||"sql",dateRange:k,groupBy:"Statement",orderBy:'"Total" DESC',selectGroupBy:!1,select:[{alias:"Statement",valueExpression:I.dbStatement},{alias:"duration_ns",aggFn:"sum",valueExpression:I.duration,aggCondition:""},{alias:"Total",valueExpression:`duration_ns / ${I.durationDivisorForMillis}`},{alias:"total_count",aggFn:"count",valueExpression:""},{alias:"Queries/Min",valueExpression:`total_count / age('mi', toDateTime(${k[0].getTime()/1e3}), toDateTime(${k[1].getTime()/1e3}))`},{alias:"p95_duration_ns",aggFn:"quantile",valueExpression:I.duration,aggCondition:"",level:.95},{alias:"P95 (ms)",valueExpression:`p95_duration_ns / ${I.durationDivisorForMillis}`},{alias:"p50_duration_ns",aggFn:"quantile",valueExpression:I.duration,aggCondition:"",level:.5},{alias:"Median (ms)",valueExpression:`p50_duration_ns / ${I.durationDivisorForMillis}`}],filters:[...eQ({appliedConfig:A,expressions:I,includeIsSpanKindServer:!1}),{type:"sql",condition:I.isDbSpan}],limit:{limit:20}}})),E[113]=A,E[114]=R,E[115]=F,E[116]=I,E[117]=k,E[118]=T,E[119]=j):j=E[119],E[120]!==j?(S=(0,r.jsx)(g.x.Col,{span:12,children:(0,r.jsx)(L.w,{style:_,children:j})}),E[120]=j,E[121]=S):S=E[121],E[122]!==f||E[123]!==y||E[124]!==S?(w=(0,r.jsxs)(g.x,{mt:"md",grow:!1,w:"100%",maw:"100%",overflow:"hidden",children:[f,y,S]}),E[122]=f,E[123]=y,E[124]=S,E[125]=w):w=E[125],w}function e6(e){let t=new URLSearchParams(window.location.search);return t.set("dbquery",`${e.Statement}`),window.location.pathname+"?"+t.toString()}function e7(e){let t,s,a,i,l,o=(0,n.c)(12),{searchedTimeRange:d,appliedConfig:u}=e;o[0]!==u.source?(t={id:u.source},o[0]=u.source,o[1]=t):t=o[1];let{data:m}=(0,K.Fo)(t);o[2]!==m?(s={source:m},o[2]=m,o[3]=s):s=o[3];let{expressions:h}=ew(s);return o[4]===Symbol.for("react.memo_cache_sentinel")?(a={height:350},o[4]=a):a=o[4],o[5]!==u||o[6]!==h||o[7]!==d||o[8]!==m?(i=m&&h&&(0,r.jsx)(ep.S,{title:"Error Events per Service",sourceId:m.id,config:{source:m.id,...c()(m,["timestampValueExpression","connection","from"]),where:u.where||"",whereLanguage:u.whereLanguage||"sql",displayType:p.t2.StackedBar,select:[{valueExpression:"",aggFn:"count"}],numberFormat:$.x5,filters:[{type:"sql",condition:h.isError},...eQ({appliedConfig:u,expressions:h})],groupBy:m.serviceNameExpression||h.service,dateRange:d}}),o[5]=u,o[6]=h,o[7]=d,o[8]=m,o[9]=i):i=o[9],o[10]!==i?(l=(0,r.jsx)(g.x,{mt:"md",grow:!1,w:"100%",maw:"100%",overflow:"hidden",children:(0,r.jsx)(g.x.Col,{span:12,children:(0,r.jsx)(L.w,{style:a,children:i})})}),o[10]=i,o[11]=l):l=o[11],l}let e9=(0,eO.lr)("Past 1h",!1),e8={source:d.tU,where:d.tU,service:d.tU,whereLanguage:(0,d.Oq)(["sql","lucene"])};function te(){let e,t,s,i,l,o,c,h,x,g,w,E,C,N,$,L,I,R,M,D,z,F,P,q,O,V,H,B,W,G,U,Y,Q,Z,X,ee,et,es,er,en,ea,ei,el,eo=(0,n.c)(128);eo[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,d.Oq)(["http","database","errors"]).withDefault("http"),eo[0]=e):e=eo[0];let[ec,ed]=(0,d.ZA)("tab",e),{data:eu}=(0,K.oE)(),[em,eh]=(0,d.ab)(e8);e:{let e,s,r;if(!eu?.length){t=em;break e}eo[1]!==em.source||eo[2]!==eu?(s=eu?.filter(tt),e=s?.find(e=>e.id===em.source),eo[1]=em.source,eo[2]=eu,eo[3]=e,eo[4]=s):(e=eo[3],s=eo[4]);let n=e?em.source:s?.[0]?.id||"";eo[5]!==em||eo[6]!==n?(r={...em,source:n},eo[5]=em,eo[6]=n,eo[7]=r):r=eo[7],t=r}let ep=t,eg=ep?.service||"",ef=ep?.source??"";eo[8]!==eg||eo[9]!==ef?(s={defaultValues:{where:"",whereLanguage:"sql",service:eg,source:ef}},eo[8]=eg,eo[9]=ef,eo[10]=s):s=eo[10];let{control:eb,setValue:ev,handleSubmit:ey}=(0,u.mN)(s);eo[11]!==eb?(i={control:eb,name:"service"},eo[11]=eb,eo[12]=i):i=eo[12];let e_=(0,u.FH)(i),ej=(0,J.ZC)(e_);eo[13]!==eb?(l={control:eb,name:"source"},eo[13]=eb,eo[14]=l):l=eo[14];let eS=(0,u.FH)(l),ew=(0,J.ZC)(eS);eo[15]!==eS?(o={id:eS},eo[15]=eS,eo[16]=o):o=eo[16];let{data:eE}=(0,K.Fo)(o),[eC,eN]=(0,a.useState)(!1),ek=eS||"";eo[17]!==ek?(c={presetDashboard:p.K5.Services,sourceId:ek,enabled:!eJ.VO},eo[17]=ek,eo[18]=c):c=eo[18];let{filters:eA,filterValues:eT,setFilterValue:eL,filterQueries:eP,handleSaveFilter:eV,handleRemoveFilter:eY,isFetching:eQ,isMutationPending:eX}=function(e){let t,s,r,a,i,l,o=(0,n.c)(25),{presetDashboard:c,sourceId:d,enabled:u}=e,m=eB.Ay.useCreatePresetDashboardFilter(),h=eB.Ay.useUpdatePresetDashboardFilter(),p=eB.Ay.useDeletePresetDashboardFilter(),{data:x,refetch:g,isFetching:f}=eB.Ay.usePresetDashboardFilters(c,d||"",void 0===u||u);o[0]!==x?(t=x??[],o[0]=x,o[1]=t):t=o[1];let{filterValues:b,setFilterValue:v,filterQueries:y}=(0,eW.A)(t);o[2]!==g?(s=()=>{g(),eH.$e.show({message:"Filters updated",color:"green"})},o[2]=g,o[3]=s):s=o[3];let _=s;o[4]!==m||o[5]!==x||o[6]!==_||o[7]!==c||o[8]!==h?(r=e=>{let t={...e,presetDashboard:c};x?.find(t=>t.id===e.id)?h.mutate(t,{onSuccess:_,onError:eK}):m.mutate(t,{onSuccess:_,onError:eK})},o[4]=m,o[5]=x,o[6]=_,o[7]=c,o[8]=h,o[9]=r):r=o[9];let j=r;o[10]!==p||o[11]!==_||o[12]!==c?(a=e=>{p.mutate({id:e,presetDashboard:c},{onSuccess:_,onError:eK})},o[10]=p,o[11]=_,o[12]=c,o[13]=a):a=o[13];let S=a;o[14]!==x?(i=x??[],o[14]=x,o[15]=i):i=o[15];let w=m.isPending||h.isPending||p.isPending;return o[16]!==y||o[17]!==b||o[18]!==S||o[19]!==j||o[20]!==f||o[21]!==v||o[22]!==i||o[23]!==w?(l={filters:i,filterValues:b,setFilterValue:v,filterQueries:y,handleSaveFilter:j,handleRemoveFilter:S,isFetching:f,isMutationPending:w},o[16]=y,o[17]=b,o[18]=S,o[19]=j,o[20]=f,o[21]=v,o[22]=i,o[23]=w,o[24]=l):l=o[24],l}(c);eo[19]!==eP||eo[20]!==ep?(h={...ep,additionalFilters:eP},eo[19]=eP,eo[20]=ep,eo[21]=h):h=eo[21];let e0=h;eo[22]!==em.source||eo[23]!==ep.source||eo[24]!==eh?(x=()=>{ep.source&&ep.source!==em.source&&eh({source:ep.source})},g=[ep.source,em.source,eh],eo[22]=em.source,eo[23]=ep.source,eo[24]=eh,eo[25]=x,eo[26]=g):(x=eo[25],g=eo[26]),(0,a.useEffect)(x,g);let[e1,e2]=(0,a.useState)("Past 1h");eo[27]===Symbol.for("react.memo_cache_sentinel")?(w={initialDisplayValue:"Past 1h",initialTimeRange:e9,setDisplayedTimeInputValue:e2},eo[27]=w):w=eo[27];let{searchedTimeRange:e5,onSearch:e6,onTimeRangeSelect:te}=(0,eO.R0)(w),[ts]=(0,a.useState)(!1);eo[28]!==ts||eo[29]!==te||eo[30]!==e5?(E={searchedTimeRange:e5,onTimeRangeSelect:te,isLive:ts},eo[28]=ts,eo[29]=te,eo[30]=e5,eo[31]=E):E=eo[31];let{manualRefreshCooloff:tr,refresh:tn}=(0,eF.r)(E);eo[32]!==e1||eo[33]!==ey||eo[34]!==e6||eo[35]!==eh?(C=e=>{(void 0===e||e)&&e6(e1),ey(e=>{eh(e)})()},eo[32]=e1,eo[33]=ey,eo[34]=e6,eo[35]=eh,eo[36]=C):C=eo[36];let ta=C;eo[37]!==ta||eo[38]!==ew||eo[39]!==eS?(N=()=>{eS&&eS!=ew&&ta(!1)},$=[eS,ta,ew],eo[37]=ta,eo[38]=ew,eo[39]=eS,eo[40]=N,eo[41]=$):(N=eo[40],$=eo[41]),(0,a.useEffect)(N,$),eo[42]!==ta||eo[43]!==ej||eo[44]!==e_?(L=()=>{e_!=ej&&ta(!1)},I=[e_,ta,ej],eo[42]=ta,eo[43]=ej,eo[44]=e_,eo[45]=L,eo[46]=I):(L=eo[45],I=eo[46]),(0,a.useEffect)(L,I),eo[47]===Symbol.for("react.memo_cache_sentinel")?(R=(0,r.jsx)(ex.A,{requireSource:!1}),eo[47]=R):R=eo[47],eo[48]!==e5||eo[49]!==e_||eo[50]!==eS?(M=(0,r.jsx)(eI,{service:e_,searchedTimeRange:e5,sourceId:eS}),D=(0,r.jsx)(e$,{service:e_,searchedTimeRange:e5,sourceId:eS}),eo[48]=e5,eo[49]=e_,eo[50]=eS,eo[51]=M,eo[52]=D):(M=eo[51],D=eo[52]),eo[53]!==ta?(z=e=>(e.preventDefault(),ta(),!1),eo[53]=ta,eo[54]=z):z=eo[54],eo[55]===Symbol.for("react.memo_cache_sentinel")?(F=[p.GL.Trace],eo[55]=F):F=eo[55],eo[56]!==eb?(P=(0,r.jsx)(eR.W,{control:eb,name:"source",allowedSourceKinds:F}),eo[56]=eb,eo[57]=P):P=eo[57],eo[58]!==eb||eo[59]!==e5||eo[60]!==eS?(q=(0,r.jsx)(eZ,{sourceId:eS,control:eb,name:"service",dateRange:e5}),eo[58]=eb,eo[59]=e5,eo[60]=eS,eo[61]=q):q=eo[61],eo[62]!==eE?(O=(0,m.VO)(eE),eo[62]=eE,eo[63]=O):O=eo[63],eo[64]!==ev?(V=e=>ev("whereLanguage",e,{shouldDirty:!0}),eo[64]=ev,eo[65]=V):V=eo[65],eo[66]!==eb||eo[67]!==ta||eo[68]!==O||eo[69]!==V?(H=(0,r.jsx)(eM.Z,{tableConnection:O,onSubmit:ta,control:eb,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",onLanguageChange:V,language:"sql",label:"WHERE",enableHotkey:!0,allowMultiline:!0}),eo[66]=eb,eo[67]=ta,eo[68]=O,eo[69]=V,eo[70]=H):H=eo[70],eo[71]!==eE?(B=(0,m.VO)(eE),eo[71]=eE,eo[72]=B):B=eo[72],eo[73]!==ev?(W=e=>ev("whereLanguage",e,{shouldDirty:!0}),eo[73]=ev,eo[74]=W):W=eo[74],eo[75]!==eb||eo[76]!==ta||eo[77]!==B||eo[78]!==W?(G=(0,r.jsx)(eq.A,{tableConnection:B,control:eb,name:"where",onLanguageChange:W,language:"lucene",placeholder:"Search your events w/ Lucene ex. column:foo",enableHotkey:!0,onSubmit:ta}),eo[75]=eb,eo[76]=ta,eo[77]=B,eo[78]=W,eo[79]=G):G=eo[79],eo[80]!==eb||eo[81]!==H||eo[82]!==G?(U=(0,r.jsx)(ez.A,{name:"whereLanguage",control:eb,sqlInput:H,luceneInput:G}),eo[80]=eb,eo[81]=H,eo[82]=G,eo[83]=U):U=eo[83],eo[84]!==e1||eo[85]!==e6?(Y=(0,r.jsx)(eD.A,{inputValue:e1,setInputValue:e2,onSearch:e6}),eo[84]=e1,eo[85]=e6,eo[86]=Y):Y=eo[86],eo[87]===Symbol.for("react.memo_cache_sentinel")?(Q=!eJ.VO&&(0,r.jsx)(b.m,{withArrow:!0,label:"Edit Filters",fz:"xs",color:"gray",children:(0,r.jsx)(v.M,{variant:"secondary",onClick:()=>eN(!0),size:"lg",children:(0,r.jsx)(k.A,{size:18})})}),eo[87]=Q):Q=eo[87],eo[88]===Symbol.for("react.memo_cache_sentinel")?(Z=(0,r.jsx)(A.A,{size:18}),eo[88]=Z):Z=eo[88],eo[89]!==tr||eo[90]!==tn?(X=(0,r.jsx)(b.m,{withArrow:!0,label:"Refresh dashboard",fz:"xs",color:"gray",children:(0,r.jsx)(v.M,{onClick:tn,loading:tr,disabled:tr,variant:"secondary",title:"Refresh dashboard","aria-label":"Refresh dashboard",size:"lg",children:Z})}),eo[89]=tr,eo[90]=tn,eo[91]=X):X=eo[91],eo[92]===Symbol.for("react.memo_cache_sentinel")?(ee=(0,r.jsx)(y.$,{variant:"primary",type:"submit",px:"sm",leftSection:(0,r.jsx)(T.A,{size:16}),style:{flexShrink:0},children:"Run"}),eo[92]=ee):ee=eo[92],eo[93]!==P||eo[94]!==q||eo[95]!==U||eo[96]!==Y||eo[97]!==X?(et=(0,r.jsx)(_.Y,{gap:"xs",children:(0,r.jsxs)(_.Y,{justify:"space-between",gap:"xs",wrap:"nowrap",flex:1,children:[P,q,U,Y,Q,X,ee]})}),eo[93]=P,eo[94]=q,eo[95]=U,eo[96]=Y,eo[97]=X,eo[98]=et):et=eo[98],eo[99]!==z||eo[100]!==et?(es=(0,r.jsx)("form",{onSubmit:z,children:et}),eo[99]=z,eo[100]=et,eo[101]=es):es=eo[101],eo[102]!==eT||eo[103]!==eA||eo[104]!==e5||eo[105]!==eL?(er=(0,r.jsx)(eG.A,{filters:eA,filterValues:eT,onSetFilterValue:eL,dateRange:e5}),eo[102]=eT,eo[103]=eA,eo[104]=e5,eo[105]=eL,eo[106]=er):er=eo[106],eo[107]!==e0||eo[108]!==e5||eo[109]!==ed||eo[110]!==eE?.kind||eo[111]!==ec?(en=eE?.kind!=="trace"?(0,r.jsx)(_.Y,{align:"center",justify:"center",h:"300px",children:(0,r.jsx)(f.E,{c:"gray",children:"Please select a trace source"})}):(0,r.jsxs)(j.t,{mt:"md",keepMounted:!1,defaultValue:"http",onChange:ed,value:ec,children:[(0,r.jsxs)(j.t.List,{children:[(0,r.jsx)(j.t.Tab,{value:"http",children:"HTTP Service"}),(0,r.jsx)(j.t.Tab,{value:"database",children:"Database"}),(0,r.jsx)(j.t.Tab,{value:"errors",children:"Errors"})]}),(0,r.jsx)(j.t.Panel,{value:"http",children:(0,r.jsx)(e3,{appliedConfig:e0,searchedTimeRange:e5})}),(0,r.jsx)(j.t.Panel,{value:"database",children:(0,r.jsx)(e4,{appliedConfig:e0,searchedTimeRange:e5})}),(0,r.jsx)(j.t.Panel,{value:"errors",children:(0,r.jsx)(e7,{appliedConfig:e0,searchedTimeRange:e5})})]}),eo[107]=e0,eo[108]=e5,eo[109]=ed,eo[110]=eE?.kind,eo[111]=ec,eo[112]=en):en=eo[112],eo[113]===Symbol.for("react.memo_cache_sentinel")?(ea=()=>eN(!1),eo[113]=ea):ea=eo[113];let ti=eQ||eX;return eo[114]!==eA||eo[115]!==eY||eo[116]!==eV||eo[117]!==eC||eo[118]!==eE||eo[119]!==ti?(ei=(0,r.jsx)(eU.A,{opened:eC,onClose:ea,filters:eA,onSaveFilter:eV,onRemoveFilter:eY,source:eE,isLoading:ti}),eo[114]=eA,eo[115]=eY,eo[116]=eV,eo[117]=eC,eo[118]=eE,eo[119]=ti,eo[120]=ei):ei=eo[120],eo[121]!==M||eo[122]!==D||eo[123]!==es||eo[124]!==er||eo[125]!==en||eo[126]!==ei?(el=(0,r.jsxs)(S.a,{p:"sm","data-testid":"services-dashboard-page",children:[R,M,D,es,er,en,ei]}),eo[121]=M,eo[122]=D,eo[123]=es,eo[124]=er,eo[125]=en,eo[126]=ei,eo[127]=el):el=eo[127],el}function tt(e){return e.kind===p.GL.Trace}let ts=l()(async()=>te,{ssr:!1});ts.getLayout=eP.D;let tr=ts},26814:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(6029),n=s(75155),a=s(1909);function i(e){let t,s=(0,n.c)(2),{field:i}=(0,a.as)(e),l="sql"===i.value?e.sqlInput:e.luceneInput;return s[0]!==l?(t=(0,r.jsx)(r.Fragment,{children:l}),s[0]=l,s[1]=t):t=s[1],t}},26837:(e,t,s)=>{"use strict";s.d(t,{W:()=>eS});var r=s(6029),n=s(55729),a=s(75155),i=s(84450),l=s.n(i),o=s(16943),c=s.n(o),d=s(82641),u=s(60481),m=s(45005),h=s(43517),p=s(78253),x=s(81973),g=s(18006),f=s(37901),b=s(65081),v=s(50374),y=s(64441),_=s(94937),j=s(75828),S=s.n(j),w=s(7913),E=s(63085),C=s(25062),N=s(94720),k=s(3635),A=s(70114),T=s(23474),$=s(54134),L=s(58333),I=s(7565),R=s(94364),M=s(72075),D=s(66773),z=s.n(D);let F=e=>{let t,s,n,i,l,o,c,d=(0,a.c)(19),{filename:u,function:m,lineno:h,colno:p,isLoading:x}=e,g=x?.8:1,f=x?"blur(1px)":"none";return d[0]!==g||d[1]!==f?(t={opacity:g,filter:f},d[0]=g,d[1]=f,d[2]=t):t=d[2],d[3]!==p||d[4]!==h?(s=(0,r.jsxs)("span",{children:[":",h,":",p]}),d[3]=p,d[4]=h,d[5]=s):s=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("span",{children:" in "}),d[6]=n):n=d[6],d[7]!==m?(i=m&&(0,r.jsx)("span",{style:{background:"#ffffff10",padding:"0 4px",borderRadius:4},children:m}),d[7]=m,d[8]=i):i=d[8],d[9]!==u||d[10]!==t||d[11]!==s||d[12]!==i?(l=(0,r.jsxs)("div",{className:" fs-8",style:t,children:[u,s,n,i]}),d[9]=u,d[10]=t,d[11]=s,d[12]=i,d[13]=l):l=d[13],d[14]!==x?(o=x&&(0,r.jsx)(N.a,{size:"xs",color:"gray"}),d[14]=x,d[15]=o):o=d[15],d[16]!==l||d[17]!==o?(c=(0,r.jsxs)(k.Y,{gap:"xs",display:"inline-flex",children:[l,o]}),d[16]=l,d[17]=o,d[18]=c):c=d[18],c},P=e=>{let t,s,i,l,o,c,d=(0,a.c)(15),{title:u,children:m,initiallyCollapsed:h}=e,[p,x]=n.useState(h??!1);return d[0]!==p?(t=()=>x(!p),s=p?(0,r.jsx)(A.A,{size:14,className:"me-2"}):(0,r.jsx)(T.A,{size:14,className:"me-2"}),d[0]=p,d[1]=t,d[2]=s):(t=d[1],s=d[2]),d[3]!==u?(i=(0,r.jsx)("div",{className:"fs-7",children:u}),d[3]=u,d[4]=i):i=d[4],d[5]!==t||d[6]!==s||d[7]!==i?(l=(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,i]}),d[5]=t,d[6]=s,d[7]=i,d[8]=l):l=d[8],d[9]!==m||d[10]!==p?(o=p?null:(0,r.jsx)("div",{className:"mb-4",children:m}),d[9]=m,d[10]=p,d[11]=o):o=d[11],d[12]!==l||d[13]!==o?(c=(0,r.jsxs)("div",{className:"my-3",children:[l,o]}),d[12]=l,d[13]=o,d[14]=c):c=d[14],c},q=e=>{let t,s,n=(0,a.c)(5),{children:i,title:l}=e;return n[0]!==l?(t=l&&(0,r.jsx)("div",{className:z().panelSectionWrapperTitle,children:l}),n[0]=l,n[1]=t):t=n[1],n[2]!==i||n[3]!==t?(s=(0,r.jsxs)("div",{className:z().panelSectionWrapper,children:[t,i]}),n[2]=i,n[3]=t,n[4]=s):s=n[4],s},O=e=>{let t,s,n,i,l=(0,a.c)(8),{label:o,value:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={paddingRight:20,marginRight:12,borderRight:"1px solid #ffffff20"},l[0]=t):t=l[0],l[1]!==o?(s=(0,r.jsx)("div",{children:o}),l[1]=o,l[2]=s):s=l[2],l[3]!==c?(n=(0,r.jsx)("div",{className:"fs-7",children:c}),l[3]=c,l[4]=n):n=l[4],l[5]!==s||l[6]!==n?(i=(0,r.jsxs)("div",{style:t,children:[s,n]}),l[5]=s,l[6]=n,l[7]=i):i=l[7],i},V=e=>{let t,s=(0,a.c)(3),{onClick:n,isOpen:i}=e,l=i?"chevron-up":"chevron-down";return s[0]!==n||s[1]!==l?(t=(0,r.jsx)(M.L,{label:"",biIcon:l,onClick:n}),s[0]=n,s[1]=l,s[2]=t):t=s[2],t},H=[{accessorKey:"filename",cell:e=>{let t,s,i,l,o,c,d,u,m,h=(0,a.c)(31),{row:p,table:x}=e,g=x.options.meta,[f,b]=n.useState(p.index===g.firstFrameIndex);h[0]!==f?(t=()=>{b(!f)},h[0]=f,h[1]=t):t=h[1];let v=t,y=p.original,{isLoading:_,enrichedFrame:j}=(0,R.f)(y),w=j??y,C=!!w.context_line;return h[2]!==C?(s=S()("w-100 py-2 px-4 d-flex justify-content-between align-items-center",{[z().stacktraceRowInteractive]:C}),h[2]=C,h[3]=s):s=h[3],h[4]!==w.in_app?(i=!w.in_app&&(0,r.jsx)(E.m,{label:"in_app: false",position:"top",withArrow:!0,color:"gray",children:(0,r.jsx)($.A,{size:14,className:"me-2","aria-label":"in_app: false"})}),h[4]=w.in_app,h[5]=i):i=h[5],h[6]!==w||h[7]!==_?(l=w&&(0,r.jsx)(F,{colno:w.colno,filename:w.filename,lineno:w.lineno,function:w.function,isLoading:_}),h[6]=w,h[7]=_,h[8]=l):l=h[8],h[9]!==i||h[10]!==l?(o=(0,r.jsxs)("div",{children:[i,l]}),h[9]=i,h[10]=l,h[11]=o):o=h[11],h[12]!==v||h[13]!==C||h[14]!==f?(c=C&&(0,r.jsx)(V,{onClick:v,isOpen:f}),h[12]=v,h[13]=C,h[14]=f,h[15]=c):c=h[15],h[16]!==v||h[17]!==s||h[18]!==o||h[19]!==c?(d=(0,r.jsxs)("div",{className:s,onClick:v,children:[o,c]}),h[16]=v,h[17]=s,h[18]=o,h[19]=c,h[20]=d):d=h[20],h[21]!==w.context_line||h[22]!==w.lineno||h[23]!==w.post_context||h[24]!==w.pre_context||h[25]!==C||h[26]!==f?(u=f&&C&&(0,r.jsxs)("pre",{className:z().lineContext,children:[w.pre_context?.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:z().lineContextLineNo,children:(w.lineno??0)-(w.pre_context?.length??0)+t}),e]},e+t)),w.context_line&&(0,r.jsxs)("div",{className:z().lineContextCurrentLine,children:[(0,r.jsx)("span",{className:z().lineContextLineNo,children:w.lineno}),w.context_line]}),w.post_context?.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:z().lineContextLineNo,children:w.lineno+t+1}),e]},e+t))]}),h[21]=w.context_line,h[22]=w.lineno,h[23]=w.post_context,h[24]=w.pre_context,h[25]=C,h[26]=f,h[27]=u):u=h[27],h[28]!==d||h[29]!==u?(m=(0,r.jsxs)(r.Fragment,{children:[d,u]}),h[28]=d,h[29]=u,h[30]=m):m=h[30],m}}],B=e=>{let t,s=(0,a.c)(2),{url:n}=e;return s[0]!==n?(t=(0,r.jsx)("span",{title:n,children:n}),s[0]=n,s[1]=t):t=s[1],t},W=n.memo(e=>{let t,s=(0,a.c)(3),{status:n}=e;if(!n)return null;let i=n>=500?"text-danger bg-danger":n>=400?"text-warning bg-warning":"text-success bg-success",l=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${i}`;return s[0]!==n||s[1]!==l?(t=(0,r.jsx)("span",{className:l,children:n}),s[0]=n,s[1]=l,s[2]=t):t=s[2],t}),K=n.memo(e=>{let t,s=(0,a.c)(3),{level:n}=e;if(!n)return null;let i=n.includes("error")?"text-danger bg-danger":n.includes("warn")||n.includes("warning")?"text-warning bg-warning":"bg-muted",l=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${i}`;return s[0]!==n||s[1]!==l?(t=(0,r.jsx)("span",{className:l,children:n}),s[0]=n,s[1]=l,s[2]=t):t=s[2],t}),J=[{accessorKey:"category",header:"Category",size:180,cell:({row:e})=>(0,r.jsxs)("span",{className:"d-flex align-items-center gap-2",children:[e.original.category,"console"===e.original.category&&(0,r.jsx)(K,{level:e.original.level}),"fetch"===e.original.category||"xhr"===e.original.category?(0,r.jsx)(W,{status:e.original.data?.status_code}):null]})},{accessorKey:"message",header:"Data",size:99999,cell:({row:e})=>{if(e.original.data&&("fetch"===e.original.category||"xhr"===e.original.category)){let{method:t,url:s}=e.original.data;return(0,r.jsxs)("div",{className:"text-truncate",children:[(0,r.jsxs)("span",{children:[t," "]}),(0,r.jsx)("span",{title:s,children:(0,r.jsx)(B,{url:s})})]})}if("navigation"===e.original.category&&e.original.data){let{from:t,to:s}=e.original.data;return(0,r.jsxs)("div",{className:"text-truncate",children:[(0,r.jsx)("span",{title:t,children:(0,r.jsx)(B,{url:t})}),(0,r.jsx)("span",{children:" â†’ "}),(0,r.jsx)("span",{title:s,children:(0,r.jsx)(B,{url:s})})]})}if("console"===e.original.category){let{message:t}=e.original;return(0,r.jsx)("pre",{className:"mb-0 text-truncate fs-8",title:t,children:t})}return e.original.message?(0,r.jsx)("div",{className:"text-truncate",children:e.original.message}):(0,r.jsx)("span",{className:"text-muted",children:"Empty"})}},{header:"Timestamp",size:220,cell:({row:e})=>(0,r.jsx)("span",{className:"text-muted",children:(0,r.jsx)(I.H,{value:1e3*e.original.timestamp,format:"withMs"})})}],G=e=>{let t,s,r,i=(0,a.c)(11),{rows:l,maxRows:o}=e,c=void 0===o?5:o,[d,u]=n.useState(!1);i[0]!==d||i[1]!==c||i[2]!==l?(t=d?l:l.slice(0,c),i[0]=d,i[1]=c,i[2]=l,i[3]=t):t=i[3];let m=t,h=l.length??0,p=h>c?h-c:null;i[4]!==d?(s=()=>{u(!d)},i[4]=d,i[5]=s):s=i[5];let x=s;return i[6]!==x||i[7]!==p||i[8]!==d||i[9]!==m?(r={visibleRows:m,hiddenRowsCount:p,handleToggleMoreRows:x,isExpanded:d},i[6]=x,i[7]=p,i[8]=d,i[9]=m,i[10]=r):r=i[10],r},U=e=>{let t,s,n,i,l,o,c,d,u,m,p,x,g,f,b=(0,a.c)(42),{logData:v,breadcrumbs:y,exceptionValues:_}=e,j=_[0];j?.stacktrace?.frames;e:{let e;if(!j?.stacktrace?.frames){let e;b[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],b[0]=e):e=b[0],t=e;break e}b[1]!==j?.stacktrace.frames?(e=j?.stacktrace.frames.slice().reverse(),b[1]=j?.stacktrace.frames,b[2]=e):e=b[2],t=e}let S=t;if(b[3]!==S){let e=S&&S.length?S.find(e=>e.in_app)??S.find(e=>!!e.function||!!e.filename)??S[0]:null;s=e?S.indexOf(e):-1,b[3]=S,b[4]=s}else s=b[4];let E=s;b[5]!==y||b[6]!==j||b[7]!==v?.timestamp?(n=()=>[...j&&y?[{category:"exception",timestamp:new Date(v?.timestamp??0).getTime()/1e3,message:`${j.type}: ${j.value} `}]:[],...y?.slice().reverse()??[]],b[5]=y,b[6]=j,b[7]=v?.timestamp,b[8]=n):n=b[8],v?.timestamp,b[9]!==n?(i=n(),b[9]=n,b[10]=i):i=b[10];let N=i,k=Math.max(5,E+1);b[11]!==S||b[12]!==k?(l={rows:S,maxRows:k},b[11]=S,b[12]=k,b[13]=l):l=b[13];let{handleToggleMoreRows:A,hiddenRowsCount:$,visibleRows:I,isExpanded:R}=G(l);b[14]!==N?(o={rows:N},b[14]=N,b[15]=o):o=b[15];let{handleToggleMoreRows:D,hiddenRowsCount:z,visibleRows:F,isExpanded:V}=G(o);return b[16]!==j?(c=j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(h.E,{fw:"bold",component:"span",size:"sm",variant:"danger",children:[j.type,":"," "]}),(0,r.jsx)("span",{className:"text-muted",children:j.value})]}),j.mechanism&&(0,r.jsxs)("div",{className:"d-flex gap-2 flex-wrap pt-3",children:[(0,r.jsx)(O,{label:"mechanism",value:j.mechanism?.type}),(0,r.jsx)(O,{label:"handled",value:j.mechanism?.handled?(0,r.jsx)("span",{className:"text-success",children:"true"}):(0,r.jsx)("span",{className:"text-danger",children:"false"})}),j.mechanism?.data?.function?(0,r.jsx)(O,{label:"function",value:j.mechanism.data.function}):null,j.mechanism?.data?.handler?(0,r.jsx)(O,{label:"handler",value:j.mechanism.data.handler}):null,j.mechanism?.data?.target?(0,r.jsx)(O,{label:"target",value:j.mechanism.data.target}):null]})]}),b[16]=j,b[17]=c):c=b[17],b[18]!==E?(d={firstFrameIndex:E},b[18]=E,b[19]=d):d=b[19],b[20]!==I||b[21]!==d?(u=(0,r.jsx)(w.ErrorBoundary,{onError:Y,fallbackRender:Q,children:(0,r.jsx)(M.X,{hideHeader:!0,columns:H,data:I,density:"zero",tableMeta:d})}),b[20]=I,b[21]=d,b[22]=u):u=b[22],b[23]!==_[0].stacktrace?(m="string"==typeof _[0].stacktrace&&(0,r.jsx)("pre",{className:"px-4",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:_[0].stacktrace}),b[23]=_[0].stacktrace,b[24]=m):m=b[24],b[25]!==A||b[26]!==R||b[27]!==$?(p=$?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:A,children:R?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.A,{size:14,className:"me-2"})," Hide stack trace"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",$," more frames"]})}):null,b[25]=A,b[26]=R,b[27]=$,b[28]=p):p=b[28],b[29]!==u||b[30]!==m||b[31]!==p||b[32]!==c?(x=(0,r.jsxs)(q,{title:c,children:[u,m,p]}),b[29]=u,b[30]=m,b[31]=p,b[32]=c,b[33]=x):x=b[33],b[34]!==V||b[35]!==z||b[36]!==F||b[37]!==D?(g=F.length>0&&(0,r.jsx)(P,{title:"Breadcrumbs",children:(0,r.jsxs)(q,{children:[(0,r.jsx)(M.X,{columns:J,data:F,emptyMessage:"No breadcrumbs found"}),z?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:D,children:V?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.A,{size:14,className:"me-2"})," Hide breadcrumbs"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",z," more breadcrumbs"]})}):null]})}),b[34]=V,b[35]=z,b[36]=F,b[37]=D,b[38]=g):g=b[38],b[39]!==x||b[40]!==g?(f=(0,r.jsxs)("div",{children:[x,g]}),b[39]=x,b[40]=g,b[41]=f):f=b[41],f};function Y(e){console.error(e)}function Q(){return(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering stacktrace"})}var Z=s(65234),X=s.n(Z),ee=s(21510),et=s(60665),es=s(34027),er=s(26355),en=s(78694);let ea=function(e){let t="";return e&&(t=` ${({GET:"-X GET",POST:"-X POST",PUT:"-X PUT",PATCH:"-X PATCH",DELETE:"-X DELETE"})[e.toUpperCase()]}`)," \\\n"+t},ei=function(e){let t="";return e&&e.map(([e,s])=>{t+=` \\
-H "${e}: ${s.replace(/(\\|")/g,"\\$1")}"`}),t},el=function(e){let t="";return e&&(t+=` \\
-d "${JSON.stringify(e).replace(/(\\|")/g,"\\$1")}"`),t},eo=function(e){let t="";return e&&(t+=` \\
--data-raw ${/[\0-\x1F\x7F-\x9F!]|\'/.test(e)?"$'"+e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(e){let t=e.charCodeAt(0).toString(16);for(;t.length<4;)t="0"+t;return"\\u"+t})+"'":"'"+e+"'"}`),t},ec=function(e){let t="";return e&&Object.keys(e).forEach(s=>{let r=s.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`);if(e[s])"boolean"==typeof e[s]&&e[s]?t+=`--${r} `:"string"==typeof e[s]&&(t+=`--${r} ${e[s]} `);else throw Error(`Invalid Curl option ${s}`)}),t?` \\
${t}`:t},ed=function(e,t){let s="curl ";return s+=e.url,s+=ea(e.method),s+=ei(e.headers),s+="string"==typeof e.body?eo(e.body):el(e.body),(s+=ec(t)).trim()},eu={base00:"#00000000",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#8378FF",base0E:"#ae81ff",base0F:"#cc6633"},em=(e,t)=>Object.entries(c()(t,(t,s)=>s.startsWith(e))).flatMap(([t,s])=>{let r=s;try{"string"==typeof s&&(r=JSON.parse(s))}catch(e){}let n=t.replace(e,"").replace("_","-"),a=[[n,`${r}`]];if(Array.isArray(r))a=r.map(e=>[n,`${e}`]);else if("object"==typeof r&&Object.keys(r).length>0)try{a=[[n,`${JSON.stringify(r)}`]]}catch(e){console.error(e)}return a}),eh=({body:e,theme:t,emptyMessage:s,notCollectedMessage:a})=>{let i=n.useCallback(e=>(0,r.jsx)("pre",{className:"d-inline text-break",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e}),[]),l=n.useMemo(()=>{if("string"!=typeof e)return null;try{if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))return JSON.parse(e)}catch(e){return null}},[e]);return(0,r.jsx)(r.Fragment,{children:null!=e&&""!=e?(0,r.jsx)("pre",{className:"m-0 px-4 py-3",style:{wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:l?(0,r.jsx)(er.A,{data:l,normallyExpanded:!0}):"string"==typeof e?e:(0,r.jsx)(ee.d,{hideRoot:!0,invertTheme:!1,data:e,theme:t,valueRenderer:i})}):""===e?(0,r.jsx)("div",{className:"px-4 py-3",children:s}):(0,r.jsx)("div",{className:"px-4 py-3",children:a})})};function ep(e){let t,s,n,i,l,o,c,d,u,m,h,p,x,g,f,b=(0,a.c)(41),{eventAttributes:v}=e;b[0]!==v?(t=em("http.request.header.",v),b[0]=v,b[1]=t):t=b[1];let y=t;b[2]!==v?(s=em("http.response.header.",v),b[2]=v,b[3]=s):s=b[3];let _=s,j=v["http.url"],S=v["net.peer.ip"],w=v["http.status_code"],E=v["http.method"],N=v["http.request.body"],k=v["http.response.body"];b[4]!==E||b[5]!==N||b[6]!==y||b[7]!==j?(n=ed({method:E,headers:y,url:j,body:N}),b[4]=E,b[5]=N,b[6]=y,b[7]=j,b[8]=n):n=b[8];let A=n;return j||E||w?(b[9]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsxs)(C.$,{size:"xs",variant:"primary",children:[(0,r.jsx)(es.A,{size:14,className:"me-2"}),"Copy Request as Curl"]}),b[9]=i):i=b[9],b[10]!==A?(l=(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)(X(),{text:A,onCopy:ex,children:i})}),b[10]=A,b[11]=l):l=b[11],b[12]!==j?(o=j&&{label:"URL",value:j},b[12]=j,b[13]=o):o=b[13],b[14]!==E?(c=E&&{label:"Method",value:E},b[14]=E,b[15]=c):c=b[15],b[16]!==S?(d=S&&{label:"Remote Address",value:S},b[16]=S,b[17]=d):d=b[17],b[18]!==v||b[19]!==w?(u=w&&{label:"Status",value:`${w} ${v["http.status_text"]??""}`,className:w>=500?"text-danger":w>=400?"text-warning":"text-success"},b[18]=v,b[19]=w,b[20]=u):u=b[20],b[21]!==o||b[22]!==c||b[23]!==d||b[24]!==u?(m=(0,r.jsx)(en.$K,{children:(0,r.jsx)(M.X,{borderless:!0,density:"compact",columns:en.Qx,data:[o,c,d,u].filter(Boolean),hideHeader:!0})}),b[21]=o,b[22]=c,b[23]=d,b[24]=u,b[25]=m):m=b[25],b[26]!==y?(h=y.length>0&&(0,r.jsx)(en.iV,{title:`Request Headers (${y.length})`,initiallyCollapsed:!0,children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(M.X,{borderless:!0,hideHeader:!0,density:"compact",columns:en.hF,data:y,emptyMessage:"No request headers collected"})})}),b[26]=y,b[27]=h):h=b[27],b[28]!==N?(p=null!=N&&(0,r.jsx)(en.iV,{title:"Request Body",children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(eh,{body:N,theme:eu,emptyMessage:"Empty request",notCollectedMessage:"No request body collected"})})}),b[28]=N,b[29]=p):p=b[29],b[30]!==_?(x=_.length>0&&(0,r.jsx)(en.iV,{title:`Response Headers (${_.length})`,initiallyCollapsed:!0,children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(M.X,{borderless:!0,hideHeader:!0,density:"compact",columns:en.hF,data:_,emptyMessage:"No response headers collected"})})}),b[30]=_,b[31]=x):x=b[31],b[32]!==k?(g=null!=k&&(0,r.jsx)(en.iV,{title:"Response Body",children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(eh,{body:k,theme:eu,emptyMessage:"Empty response",notCollectedMessage:"No response body collected"})})}),b[32]=k,b[33]=g):g=b[33],b[34]!==m||b[35]!==h||b[36]!==p||b[37]!==x||b[38]!==g||b[39]!==l?(f=(0,r.jsxs)("div",{children:[l,m,h,p,x,g]}),b[34]=m,b[35]=h,b[36]=p,b[37]=x,b[38]=g,b[39]=l,b[40]=f):f=b[40],f):null}function ex(){et.$e.show({color:"green",message:"Curl command copied to clipboard"})}let eg=[{accessorKey:"Timestamp",header:"Timestamp",size:120,cell:({row:e})=>(0,r.jsx)("span",{className:"text-muted",title:e.original.Timestamp,children:(0,r.jsx)(I.H,{value:new Date(e.original.Timestamp).getTime(),format:"withMs"})})},{accessorKey:"Name",header:"Name",size:180,cell:({row:e})=>(0,r.jsx)("span",{className:"d-flex align-items-center gap-2",children:e.original.Name})},{accessorKey:"Attributes",header:"Attributes",size:400,cell:({row:e})=>{let t=e.original.Attributes;return t&&Object.keys(t).length>0?(0,r.jsx)(u.a,{children:(0,r.jsx)(b.z,{data:t})}):(0,r.jsx)("span",{className:"text-muted",children:"Empty"})}}],ef=e=>{let t,s,n,i,l,o=(0,a.c)(15),{spanEvents:c}=e;e:{let e;if(!c||0===c.length){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}o[1]!==c?(e=[...c.filter(eb)].sort(ev),o[1]=c,o[2]=e):e=o[2],t=e}let d=t;o[3]!==d?(s={rows:d,maxRows:5},o[3]=d,o[4]=s):s=o[4];let{handleToggleMoreRows:u,hiddenRowsCount:m,visibleRows:h,isExpanded:p}=G(s);if(!d||0===d.length){let e;return o[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:"p-3 text-muted fs-7",children:"No span events available for this trace"}),o[5]=e):e=o[5],e}return o[6]!==h?(n=(0,r.jsx)(w.ErrorBoundary,{onError:ey,fallbackRender:e_,children:(0,r.jsx)(M.X,{columns:eg,data:h,emptyMessage:"No span events found"})}),o[6]=h,o[7]=n):n=o[7],o[8]!==u||o[9]!==m||o[10]!==p?(i=m?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",my:"sm",onClick:u,children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L.A,{size:14,className:"me-2"})," Hide events"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",m," more events"]})}):null,o[8]=u,o[9]=m,o[10]=p,o[11]=i):i=o[11],o[12]!==n||o[13]!==i?(l=(0,r.jsx)("div",{children:(0,r.jsxs)(q,{children:[n,i]})}),o[12]=n,o[13]=i,o[14]=l):l=o[14],l};function eb(e){return"string"==typeof e.Timestamp&&"string"==typeof e.Name&&void 0!==e.Attributes}function ev(e,t){let s=new Date(e.Timestamp).getTime();return new Date(t.Timestamp).getTime()-s}function ey(e){console.error(e)}function e_(){return(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering span events"})}let ej={};function eS(e){let t,s,i,o,j,S,w,E,C,N,k,A,T,$,L,I,R,M,D,z,F,P,q,O,V,H,B,W,K,J,G=(0,a.c)(96),{source:Y,rowId:Q,aliasWith:Z,hideHeader:X,"data-testid":ee}=e,et=void 0!==X&&X;G[0]!==Z||G[1]!==Q||G[2]!==Y?(t={source:Y,rowId:Q,aliasWith:Z},G[0]=Z,G[1]=Q,G[2]=Y,G[3]=t):t=G[3];let{data:es}=(0,f.k1)(t),{onPropertyAddClick:er,generateSearchUrl:en}=(0,n.useContext)(v.D);G[4]!==Y.highlightedRowAttributeExpressions||G[5]!==Y.kind?(s=Y.kind===d.GL.Trace||Y.kind===d.GL.Log?Y.highlightedRowAttributeExpressions??[]:[],G[4]=Y.highlightedRowAttributeExpressions,G[5]=Y.kind,G[6]=s):s=G[6];let ea=s;G[7]!==ea||G[8]!==es||G[9]!==Y?(i=es?(0,g.N4)(Y,ea,es.data||[],es.meta||[]):[],G[7]=ea,G[8]=es,G[9]=Y,G[10]=i):i=G[10];let ei=i,el=es?.meta;G[11]!==el?(o=(0,f.bn)(el),G[11]=el,G[12]=o):o=G[12];let eo=o,ec=Y.eventAttributesExpression;e:{let e,t;G[13]!==es?.data?.[0]?(e=es?.data?.[0]??{},G[13]=es?.data?.[0],G[14]=e):e=G[14],G[15]!==e?(t={...e},G[15]=e,G[16]=t):t=G[16];let s=t;if(!s){j=null;break e}j=s}let ed=j;G[17]===Symbol.for("react.memo_cache_sentinel")?(S=["ServiceName","SpanName","Duration","SeverityText","StatusCode","StatusMessage","SpanKind","TraceId","SpanId","ParentSpanId","ScopeName","ScopeVersion"],G[17]=S):S=G[17];let eu=S;G[18]===Symbol.for("react.memo_cache_sentinel")?(w=(e,t)=>""!==e&&!!eu.includes(t),G[18]=w):w=G[18],G[19]!==ed?(E=c()(ed,w),G[19]=ed,G[20]=E):E=G[20];let em=E,eh=ed?.__hdx_resource_attributes??ej,ex=ed?.__hdx_event_attributes??ej;G[21]!==ec||G[22]!==ed?(C=ec&&ed?.[ec]&&Object.keys(ed[ec]).length>0?{[ec]:ed[ec]}:{},G[21]=ec,G[22]=ed,G[23]=C):C=G[23];let eg=C;G[24]!==en?(N=(e,t)=>en?.({where:e,whereLanguage:t})??"/",G[24]=en,G[25]=N):N=G[25];let eb=N,ev=ec&&eg?.[ec],ey=ev?.["http.url"]!=null;t:{let e;if(!ec){k=eg;break t}let t=eg?.[ec];G[26]!==t||G[27]!==eg||G[28]!==ec||G[29]!==ey?(e=ey&&t?{[ec]:c()(t,ew)}:eg,G[26]=t,G[27]=eg,G[28]=ec,G[29]=ey,G[30]=e):e=G[30],k=e}let e_=k,eS=ed?.__hdx_events_exception_attributes??ej,eE=eS?.["exception.stacktrace"]||eS?.["exception.parsed_stacktrace"],eC=eE??"[]";try{let e;G[31]!==eE?(e=JSON.parse(eE),G[31]=eE,G[32]=e):e=G[32],eC=e}catch(e){}let eN=eS?.["exception.type"];G[33]!==eS?(A="string"!=typeof eS?.["exception.message"]?JSON.stringify(eS?.["exception.message"]):eS?.["exception.message"],G[33]=eS,G[34]=A):A=G[34];let ek=eS?.["exception.mechanism"];G[35]!==eC||G[36]!==eN||G[37]!==A||G[38]!==ek?(T=[{stacktrace:eC,type:eN,value:A,mechanism:ek}],G[35]=eC,G[36]=eN,G[37]=A,G[38]=ek,G[39]=T):T=G[39];let eA=T;G[40]!==ed?.__hdx_events_exception_attributes?($=()=>Object.keys(ed?.__hdx_events_exception_attributes??{}).length>0,G[40]=ed?.__hdx_events_exception_attributes,G[41]=$):$=G[41],ed?.__hdx_events_exception_attributes;let eT=$();ed?.__hdx_span_events;let e$=Array.isArray(ed?.__hdx_span_events)&&ed?.__hdx_span_events.length>0;G[42]!==Y?(L=(0,x.N8)(Y),G[42]=Y,G[43]=L):L=G[43];let eL=L;G[44]!==ed?(I=l()(ed?.__hdx_body)?ed.__hdx_body:ed?.__hdx_body!==void 0?JSON.stringify(ed.__hdx_body):void 0,G[44]=ed,G[45]=I):I=G[45];let eI=I;G[46]!==ed?.__hdx_severity_text||G[47]!==ed?.__hdx_timestamp||G[48]!==et||G[49]!==ei||G[50]!==eI||G[51]!==eL?(R=!et&&(0,r.jsx)(u.a,{px:"sm",pt:"md",children:(0,r.jsx)(y.A,{attributes:ei,date:new Date(ed?.__hdx_timestamp??0),mainContent:eI,mainContentHeader:eL,severityText:ed?.__hdx_severity_text})}),G[46]=ed?.__hdx_severity_text,G[47]=ed?.__hdx_timestamp,G[48]=et,G[49]=ei,G[50]=eI,G[51]=eL,G[52]=R):R=G[52],G[53]===Symbol.for("react.memo_cache_sentinel")?(M=["exception","spanEvents","network","resourceAttributes","eventAttributes","topLevelAttributes"],G[53]=M):M=G[53],G[54]!==ex||G[55]!==ey?(D=ey&&(0,r.jsxs)(m.n.Item,{value:"network",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"HTTP Request"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(ep,{eventAttributes:ex})})})]}),G[54]=ex,G[55]=ey,G[56]=D):D=G[56],G[57]!==eA||G[58]!==ed?.__hdx_timestamp||G[59]!==eT?(z=eT&&(0,r.jsxs)(m.n.Item,{value:"exception",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Exception"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(U,{exceptionValues:eA,breadcrumbs:[],logData:{timestamp:ed?.__hdx_timestamp}})})})]}),G[57]=eA,G[58]=ed?.__hdx_timestamp,G[59]=eT,G[60]=z):z=G[60],G[61]!==ed?.__hdx_span_events||G[62]!==e$?(F=e$&&(0,r.jsxs)(m.n.Item,{value:"spanEvents",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Span Events"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(ef,{spanEvents:ed?.__hdx_span_events})})})]}),G[61]=ed?.__hdx_span_events,G[62]=e$,G[63]=F):F=G[63],G[64]!==eo||G[65]!==em?(P=Object.keys(em).length>0&&(0,r.jsxs)(m.n.Item,{value:"topLevelAttributes",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Top Level Attributes"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(b.z,{data:em,jsonColumns:eo})})})]}),G[64]=eo,G[65]=em,G[66]=P):P=G[66];let eR="log"===Y.kind?"Log":"Span";return G[67]!==eR?(q=(0,r.jsx)(m.n.Control,{children:(0,r.jsxs)(h.E,{size:"sm",ps:"md",children:[eR," Attributes"]})}),G[67]=eR,G[68]=q):q=G[68],G[69]!==e_||G[70]!==eo?(O=(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(b.z,{data:e_,jsonColumns:eo})})}),G[69]=e_,G[70]=eo,G[71]=O):O=G[71],G[72]!==q||G[73]!==O?(V=(0,r.jsxs)(m.n.Item,{value:"eventAttributes",children:[q,O]}),G[72]=q,G[73]=O,G[74]=V):V=G[74],G[75]===Symbol.for("react.memo_cache_sentinel")?(H=(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Resource Attributes"})}),G[75]=H):H=G[75],G[76]!==eh?(B=Object.entries(eh),G[76]=eh,G[77]=B):B=G[77],G[78]!==eb||G[79]!==en||G[80]!==eo||G[81]!==er||G[82]!==Y.resourceAttributesExpression||G[83]!==B?(W=(0,r.jsxs)(m.n.Item,{value:"resourceAttributes",children:[H,(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(p.s,{wrap:"wrap",gap:"2px",mx:"md",mb:"lg",children:B.map(e=>{let[t,s]=e;return(0,n.createElement)(_.A,{...er?{onPropertyAddClick:er,sqlExpression:Y.resourceAttributesExpression&&eo?.includes(Y.resourceAttributesExpression)?`toString(${Y.resourceAttributesExpression}.${t})`:`${Y.resourceAttributesExpression}['${t}']`}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:en?eb:void 0,displayedKey:t,name:`${Y.resourceAttributesExpression}.${t}`,value:s,key:t})})})})]}),G[78]=eb,G[79]=en,G[80]=eo,G[81]=er,G[82]=Y.resourceAttributesExpression,G[83]=B,G[84]=W):W=G[84],G[85]!==D||G[86]!==z||G[87]!==F||G[88]!==P||G[89]!==V||G[90]!==W?(K=(0,r.jsxs)(m.n,{mt:"sm",defaultValue:M,multiple:!0,variant:"noPadding",children:[D,z,F,P,V,W]}),G[85]=D,G[86]=z,G[87]=F,G[88]=P,G[89]=V,G[90]=W,G[91]=K):K=G[91],G[92]!==ee||G[93]!==R||G[94]!==K?(J=(0,r.jsxs)("div",{className:"flex-grow-1 overflow-auto","data-testid":ee,children:[R,K]}),G[92]=ee,G[93]=R,G[94]=K,G[95]=J):J=G[95],J}function ew(e,t){return!t.startsWith("http.")}},28450:(e,t,s)=>{"use strict";s.d(t,{FB:()=>_,Qg:()=>v,xD:()=>j});var r=s(6029),n=s(75155);s(55729);var a=s(82203),i=s.n(a),l=s(43465),o=s(67270),c=s(30039),d=s(43517),u=s(3635),m=s(43085),h=s(12482),p=s(49672),x=s(78550),g=s(81973),f=s(9897),b=s(7565);let v=(e,t)=>{let s,r,a,i=(0,n.c)(22),{dateRange:l,extraSelects:c,limit:d,logSource:u,order:m,where:f,whereLanguage:b}=e,v=(0,p.fu)(),y=(0,x.Ge)();return i[0]!==l||i[1]!==c||i[2]!==d||i[3]!==u.id||i[4]!==m||i[5]!==f||i[6]!==b?(s=["v2LogBatch",u.id,c,l,f,b,d,m],i[0]=l,i[1]=c,i[2]=d,i[3]=u.id,i[4]=m,i[5]=f,i[6]=b,i[7]=s):s=i[7],i[8]!==v||i[9]!==l||i[10]!==c||i[11]!==d||i[12]!==u||i[13]!==y||i[14]!==m||i[15]!==f||i[16]!==b?(r=async()=>{let e=await (0,o.PV)({select:[{valueExpression:(0,g.xg)(u),alias:"timestamp"},{valueExpression:`${u.serviceNameExpression}`,alias:"_service"},...c&&Array.isArray(c)?c:[]],from:u.from,dateRange:l,timestampValueExpression:u.timestampValueExpression,implicitColumnExpression:u.implicitColumnExpression,where:f,whereLanguage:b,connection:u.connection,limit:{limit:d??50,offset:0},orderBy:`${u.timestampValueExpression} ${m}`},y,u.querySettings);return await v.query({query:e.sql,query_params:e.params,connectionId:u.connection}).then(S)},i[8]=v,i[9]=l,i[10]=c,i[11]=d,i[12]=u,i[13]=y,i[14]=m,i[15]=f,i[16]=b,i[17]=r):r=i[17],i[18]!==t||i[19]!==s||i[20]!==r?(a={queryKey:s,queryFn:r,staleTime:3e5,...t},i[18]=t,i[19]=s,i[20]=r,i[21]=a):a=i[21],(0,h.I)(a)},y=e=>t=>{let s="#";try{s=`/search?q=${encodeURIComponent(`${e.resourceAttributesExpression}.k8s.pod.name:"${t["k8s.pod.name"]}"`)}&source=${e.id}&from=${new Date(t.timestamp).getTime()-9e5}&to=${new Date(t.timestamp).getTime()+1}`}catch(e){}return(0,r.jsxs)(c.K.Item,{children:[(0,r.jsx)(i(),{href:s,children:(0,r.jsx)(d.E,{size:"xs",fz:11,title:t.timestamp,c:"green",td:"underline",fw:"bold",children:(0,r.jsx)(b.H,{value:t.timestamp})})}),(0,r.jsxs)(u.Y,{gap:"xs",my:4,children:[(0,r.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:t["object.reason"]}),t["object.type"]&&(0,r.jsx)(m.E,{variant:"light",size:"xs",fw:"normal",color:"Normal"===t["object.type"]?"green":"yellow",children:t["object.type"]})]}),(0,r.jsx)(d.E,{size:"xs",children:t["object.note"]||t["object.message"]})]},t.id)},_=e=>{let t,s,a,i,o,m,h,p,x,g,f,_,j,S,C,N,k,A,T,$,L=(0,n.c)(82),{q:I,logSource:R,anchorEvent:M,dateRange:D}=e;L[0]!==D?.[0]?(t=D?.[0]??(0,l.A)(new Date,{days:1}),L[0]=D?.[0],L[1]=t):t=L[1];let z=t;L[2]!==D?.[1]?(s=D?.[1]??new Date,L[2]=D?.[1],L[3]=s):s=L[3];let F=s;L[4]!==F||L[5]!==z?(a=[z,F],L[4]=F,L[5]=z,L[6]=a):a=L[6];let P=`${R.eventAttributesExpression}.k8s.resource.name:"events" ${I}`;L[7]===Symbol.for("react.memo_cache_sentinel")?(i={valueExpression:"generateUUIDv4()",alias:"id"},L[7]=i):i=L[7];let q=`JSONExtractString(${R.eventAttributesExpression}['object'], 'metadata', 'creationTimestamp')`;L[8]!==q?(o={valueExpression:q,alias:"object.metadata.creationTimestamp"},L[8]=q,L[9]=o):o=L[9];let O=`JSONExtractString(${R.eventAttributesExpression}['object'], 'reason')`;L[10]!==O?(m={valueExpression:O,alias:"object.reason"},L[10]=O,L[11]=m):m=L[11];let V=`JSONExtractString(${R.eventAttributesExpression}['object'], 'note')`;L[12]!==V?(h={valueExpression:V,alias:"object.note"},L[12]=V,L[13]=h):h=L[13];let H=`JSONExtractString(${R.eventAttributesExpression}['object'], 'type')`;L[14]!==H?(p={valueExpression:H,alias:"object.type"},L[14]=H,L[15]=p):p=L[15];let B=`JSONExtractString(${R.eventAttributesExpression}['object'], 'message')`;L[16]!==B?(x={valueExpression:B,alias:"object.message"},L[16]=B,L[17]=x):x=L[17];let W=`JSONExtractString(${R.eventAttributesExpression}['object'], 'regarding', 'name')`;L[18]!==W?(g={valueExpression:W,alias:"k8s.pod.name"},L[18]=W,L[19]=g):g=L[19];let K=`JSONExtractString(${R.eventAttributesExpression}['object'], 'regarding', 'uid')`;L[20]!==K?(f={valueExpression:K,alias:"k8s.pod.uid"},L[20]=K,L[21]=f):f=L[21];let J=`JSONExtractString(${R.eventAttributesExpression}['object'], 'type')`;L[22]!==J?(_={valueExpression:J,alias:"type"},L[22]=J,L[23]=_):_=L[23];let G=`JSONExtractString(${R.eventAttributesExpression}['object'], 'type')`;L[24]!==G?(j={valueExpression:G,alias:"severity_text"},L[24]=G,L[25]=j):j=L[25];let U=`JSONExtractString(${R.eventAttributesExpression}['object'], 'note')`;L[26]!==U?(S={valueExpression:U,alias:"body"},L[26]=U,L[27]=S):S=L[27],L[28]!==h||L[29]!==p||L[30]!==x||L[31]!==g||L[32]!==f||L[33]!==_||L[34]!==j||L[35]!==S||L[36]!==o||L[37]!==m?(C=[i,o,m,h,p,x,g,f,_,j,S],L[28]=h,L[29]=p,L[30]=x,L[31]=g,L[32]=f,L[33]=_,L[34]=j,L[35]=S,L[36]=o,L[37]=m,L[38]=C):C=L[38],L[39]!==R||L[40]!==C||L[41]!==a||L[42]!==P?(N={dateRange:a,limit:50,logSource:R,order:"desc",where:P,whereLanguage:"lucene",extraSelects:C},L[39]=R,L[40]=C,L[41]=a,L[42]=P,L[43]=N):N=L[43];let{data:Y,isLoading:Q}=v(N);L[44]!==Y?.data?(k=Y?.data||[],L[44]=Y?.data,L[45]=k):k=L[45],L[46]!==k?(A=k.sort(w),L[46]=k,L[47]=A):A=L[47];let Z=A;L[48]!==Z||L[49]!==M?(T=M?Z.filter(e=>new Date(e.timestamp)<new Date(M.timestamp)):[],L[48]=Z,L[49]=M,L[50]=T):T=L[50];let X=T;L[51]!==Z||L[52]!==M?($=M?Z.filter(e=>new Date(e.timestamp)>new Date(M.timestamp)):[],L[51]=Z,L[52]=M,L[53]=$):$=L[53];let ee=$;if(Q){let e;return L[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.E,{color:"muted",ta:"center",children:"Loading..."}),L[54]=e):e=L[54],e}if(0===Z.length){let e;return L[55]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.E,{color:"muted",ta:"center",children:"No events"}),L[55]=e):e=L[55],e}if(M){let e,t,s,n,a,i,l;return L[56]!==R||L[57]!==ee?(e=ee.map(y(R)),L[56]=R,L[57]=ee,L[58]=e):e=L[58],L[59]!==M.timestamp?(t=(0,r.jsx)(b.H,{value:M.timestamp}),L[59]=M.timestamp,L[60]=t):t=L[60],L[61]!==M.timestamp||L[62]!==t?(s=(0,r.jsx)(d.E,{size:"xs",fz:11,title:M.timestamp,children:t}),L[61]=M.timestamp,L[62]=t,L[63]=s):s=L[63],L[64]!==M.label?(n=(0,r.jsx)(u.Y,{gap:"xs",my:4,children:(0,r.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:M.label})}),L[64]=M.label,L[65]=n):n=L[65],L[66]!==M.timestamp||L[67]!==s||L[68]!==n?(a=(0,r.jsxs)(c.K.Item,{ref:E,children:[s,n]},M.timestamp),L[66]=M.timestamp,L[67]=s,L[68]=n,L[69]=a):a=L[69],L[70]!==R||L[71]!==X?(i=X.map(y(R)),L[70]=R,L[71]=X,L[72]=i):i=L[72],L[73]!==e||L[74]!==a||L[75]!==i?(l=(0,r.jsxs)(c.K,{bulletSize:12,lineWidth:1,children:[e,a,i]}),L[73]=e,L[74]=a,L[75]=i,L[76]=l):l=L[76],l}{let e,t;return L[77]!==Z||L[78]!==R?(e=Z.map(y(R)),L[77]=Z,L[78]=R,L[79]=e):e=L[79],L[80]!==e?(t=(0,r.jsx)(c.K,{bulletSize:12,lineWidth:1,children:e}),L[80]=e,L[81]=t):t=L[81],t}},j=e=>{let t=(0,n.c)(6),{status:s}=e;switch(s){case f.h.Pending:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"yellow",fw:"normal",tt:"none",size:"md",children:"Pending"}),t[0]=e):e=t[0],e}case f.h.Running:{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Running"}),t[1]=e):e=t[1],e}case f.h.Succeeded:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"indigo",fw:"normal",tt:"none",size:"md",children:"Succeeded"}),t[2]=e):e=t[2],e}case f.h.Failed:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Failed"}),t[3]=e):e=t[3],e}case f.h.Unknown:{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[4]=e):e=t[4],e}default:{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[5]=e):e=t[5],e}}};function S(e){return e.json()}function w(e,t){return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()}function E(e){null!==e&&e.scrollIntoView({block:"nearest"})}},28959:(e,t,s)=>{"use strict";s.d(t,{RW:()=>m,Ye:()=>u,ae:()=>l,hd:()=>o,mA:()=>d});var r=s(75155),n=s(55729),a=s(67843),i=s(92917);let l="isRootSpan",o=(e,{stringifyKeys:t=!1}={})=>Object.entries(e).filter(([e,t])=>t.included.size>0||t.excluded.size>0||null!=t.range).flatMap(([e,s])=>{let r=[],n=t?`toString(${e})`:e;return s.included.size>0&&r.push({type:"sql",condition:`${n} IN (${Array.from(s.included).map(e=>"string"==typeof e?`'${e}'`:e).join(", ")})`}),s.excluded.size>0&&r.push({type:"sql",condition:`${n} NOT IN (${Array.from(s.excluded).map(e=>"string"==typeof e?`'${e}'`:e).join(", ")})`}),null!=s.range&&r.push({type:"sql",condition:`${n} BETWEEN ${s.range.min} AND ${s.range.max}`}),r}),c=e=>{let t=e.trim();return["true","false"].includes(t.toLowerCase())?"true"===t.toLowerCase():t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):t},d=e=>{let t=new Map;for(let s of e)if("sql"===s.type){if(s.condition.includes(" BETWEEN ")){let e=s.condition.match(/^(.+?)\s+BETWEEN\s+(.+?)\s+AND\s+(.+?)$/i);if(e){let[,s,r,n]=e,a=s.trim(),i=parseFloat(r.trim()),l=parseFloat(n.trim());t.has(a)?t.get(a).range={min:i,max:l}:t.set(a,{included:new Set,excluded:new Set,range:{min:i,max:l}});continue}}for(let e of function(e){let t=[],s=[],r="",n=!1;for(let t=0;t<e.length;t++){let a=e[t];if("'"===a&&(0===t||"\\"!==e[t-1])){n=!n,r+=a;continue}if(!n&&" AND "===e.slice(t,t+5).toUpperCase()){r.trim()&&s.push(r.trim()),r="",t+=4;continue}r+=a}for(let e of(r.trim()&&s.push(r.trim()),s)){if(e.toUpperCase().includes(" OR ")||e.includes("=")||e.includes("<")||e.includes(">"))continue;let s=e.includes("NOT IN");if(e.includes(" IN ")||e.includes(" NOT IN ")){let[r,n]=e.split(s?" NOT IN ":" IN ");if(r&&n){let e=r.trim(),a=n.trim(),i=function(e){let t=[],s="",r=!1;for(let n=0;n<e.length;n++){let a=e[n];if("'"===a&&(0===n||"\\"!==e[n-1])){r=!r,s+=a;continue}if(!r&&","===a){s.trim()&&t.push(c(s)),s="";continue}s+=a}return s.trim()&&t.push(c(s)),t}(a.startsWith("(")&&a.endsWith(")")?a.slice(1,-1):a);t.push({key:e,values:i,isExclude:s})}}}return t}(s.condition)){t.has(e.key)||t.set(e.key,{included:new Set,excluded:new Set});let s=t.get(e.key);e.values.forEach(t=>{e.isExclude?s.excluded.add(t):s.included.add(t)})}}return{filters:Object.fromEntries(t)}},u=({searchQuery:e=[],onFilterChange:t})=>{let s=n.useMemo(()=>{try{return d(e)}catch(e){return console.error(e),{filters:{}}}},[e]),[r,i]=n.useState({});n.useEffect(()=>{((e,t)=>{let s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(let r of s){if(!t[r]||e[r].included.size!==t[r].included.size)return!1;for(let s of e[r].included)if(!t[r].included.has(s))return!1;if(e[r].excluded.size!==t[r].excluded.size)return!1;for(let s of e[r].excluded)if(!t[r].excluded.has(s))return!1;if(e[r].range?.min!==t[r].range?.min||e[r].range?.max!==t[r].range?.max)return!1}return!0})(r,s.filters)||i(s.filters)},[s.filters]);let l=n.useCallback(e=>{t(o(e))},[t]),c=n.useCallback((e,t,s)=>{i(r=>{let n=(0,a.Ay)(r,r=>{if(r[e]||(r[e]={included:new Set,excluded:new Set}),"only"===s){r[e]={included:new Set([t]),excluded:new Set};return}if("exclude"===s){r[e].included.delete(t),r[e].excluded.has(t)?r[e].excluded.delete(t):r[e].excluded.add(t);return}r[e].excluded.delete(t),r[e].included.has(t)?r[e].included.delete(t):r[e].included.add(t)});return l(n),n})},[l]),u=n.useCallback((e,t)=>{i(s=>{let r=(0,a.Ay)(s,s=>{s[e]||(s[e]={included:new Set,excluded:new Set}),s[e].range=t});return l(r),r})},[l]),m=n.useCallback(e=>{i(t=>{let s=(0,a.Ay)(t,t=>{delete t[e]});return l(s),s})},[l]),h=n.useCallback(()=>{i(()=>({})),l({})},[l]);return{filters:r,setFilters:i,setFilterValue:c,setFilterRange:u,clearFilter:m,clearAllFilters:h}};function m(e){let t,s,n,l,o,c,d=(0,r.c)(18),{pinnedFilters:u,setPinnedFilters:m,pinnedFields:h,setPinnedFields:p}=function(e){let t,s,n,l,o,c,d,u=(0,r.c)(19);u[0]===Symbol.for("react.memo_cache_sentinel")?(t={},u[0]=t):t=u[0];let[m,h]=(0,i.Mj)("hdx-pinned-search-filters",t);u[1]===Symbol.for("react.memo_cache_sentinel")?(s={},u[1]=s):s=u[1];let[p,x]=(0,i.Mj)("hdx-pinned-fields",s);u[2]!==m||u[3]!==e?(n=e&&m[e]?m[e]:{},u[2]=m,u[3]=e,u[4]=n):n=u[4];let g=n;u[5]!==p||u[6]!==e?(l=e&&p[e]?p[e]:[],u[5]=p,u[6]=e,u[7]=l):l=u[7];let f=l;u[8]!==h||u[9]!==e?(o=t=>{e&&h(s=>(0,a.Ay)(s,s=>{s[e]=t instanceof Function?t(s[e]??{}):t}))},u[8]=h,u[9]=e,u[10]=o):o=u[10];let b=o;u[11]!==x||u[12]!==e?(c=t=>{e&&x(s=>(0,a.Ay)(s,s=>{s[e]=t instanceof Function?t(s[e]??[]):t}))},u[11]=x,u[12]=e,u[13]=c):c=u[13];let v=c;return u[14]!==f||u[15]!==g||u[16]!==v||u[17]!==b?(d={pinnedFilters:g,setPinnedFilters:b,pinnedFields:f,setPinnedFields:v},u[14]=f,u[15]=g,u[16]=v,u[17]=b,u[18]=d):d=u[18],d}(e);d[0]!==p||d[1]!==m?(t=(e,t)=>{m(s=>(0,a.Ay)(s,s=>{s[e]||(s[e]=[]);let r=s[e].findIndex(e=>e===t);return r>=0?s[e].splice(r,1):s[e].push(t),s})),p(t=>t.includes(e)?t:[...t,e])},d[0]=p,d[1]=m,d[2]=t):t=d[2];let x=t;d[3]!==p?(s=e=>{p(t=>{let s=t.findIndex(t=>t===e);return s>=0?t.filter((e,t)=>t!==s):[...t,e]})},d[3]=p,d[4]=s):s=d[4];let g=s;d[5]!==u?(n=(e,t)=>u[e]&&u[e].some(e=>e===t),d[5]=u,d[6]=n):n=d[6];let f=n;d[7]!==h?(l=e=>h.includes(e),d[7]=h,d[8]=l):l=d[8];let b=l;d[9]!==h?(o=()=>h,d[9]=h,d[10]=o):o=d[10];let v=o;return d[11]!==v||d[12]!==b||d[13]!==f||d[14]!==u||d[15]!==g||d[16]!==x?(c={toggleFilterPin:x,toggleFieldPin:g,isFilterPinned:f,isFieldPinned:b,getPinnedFields:v,pinnedFilters:u},d[11]=v,d[12]=b,d[13]=f,d[14]=u,d[15]=g,d[16]=x,d[17]=c):c=d[17],c}},31451:(e,t,s)=>{"use strict";s.d(t,{Q$:()=>f,nt:()=>y,vN:()=>g,xj:()=>x});var r=s(75155),n=s(36722),a=s.n(n),i=s(76089),l=s(12482),o=s(43152),c=s(46061),d=s(91021),u=s(81973);async function m(){let e=await window.loadPyodide();await e.loadPackage("micropip");let t=e.pyimport("micropip"),s=new URL("/jsonpickle-4.1.1-py3-none-any.whl",window.location.origin);await t.install(s.href);let r=new URL("/drain3-0.9.11-py3-none-any.whl",window.location.origin);return await t.install(r.href),e}class h{constructor(e){this.pyodide=e,this.id=Math.random().toString(36).substring(2,15),this.minerVariableName=`m_${this.id}`}async init(){await this.pyodide.runPythonAsync(`
import js
import json
from drain3 import TemplateMiner
from drain3.template_miner_config import TemplateMinerConfig

${this.minerVariableName} = TemplateMiner(None, TemplateMinerConfig())
    `)}async minePatterns(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        ${s}.append(${this.minerVariableName}.add_log_message(log))
      json.dumps(${s})
    `))}async matchLogs(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        match = ${this.minerVariableName}.match(log)
        ${s}.append(match.cluster_id if match else None)
      json.dumps(${s})
    `))}}async function p(e,t){let s=new h(t);return await s.init(),{miner:s,patterns:await s.minePatterns(e)}}let x="__hdx_pattern_field",g="__hdx_timestamp",f="__hdx_severity_text",b="__hdx_status_code";function v(e){return a()(e[x])}function y(e){let t,s,n,a,h,y=(0,r.c)(22),{config:S,samples:w,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:N,totalCount:k,enabled:A}=e,T=void 0===A||A;y[0]!==E||y[1]!==S||y[2]!==T||y[3]!==w||y[4]!==C||y[5]!==N?(t={config:S,samples:w,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:N,enabled:T},y[0]=E,y[1]=S,y[2]=T,y[3]=w,y[4]=C,y[5]=N,y[6]=t):t=y[6];let{data:$,isLoading:L,patternQueryConfig:I}=function(e){var t;let s,n,a,i,o,h,y,_,j,S,w,E,C,N,k,A,T=(0,r.c)(36),{config:$,samples:L,bodyValueExpression:I,severityTextExpression:R,statusCodeExpression:M,enabled:D}=e,z=void 0===D||D,F=`${I} as ${x}`;T[0]!==$.timestampValueExpression?(s=(0,u.AF)($.timestampValueExpression),T[0]=$.timestampValueExpression,T[1]=s):s=T[1];let P=`${s} as ${g}`;T[2]!==R?(n=R?[`${R} as ${f}`]:[],T[2]=R,T[3]=n):n=T[3],T[4]!==M?(a=M?[`${M} as ${b}`]:[],T[4]=M,T[5]=a):a=T[5],T[6]!==F||T[7]!==P||T[8]!==n||T[9]!==a?(i=[F,P,...n,...a],T[6]=F,T[7]=P,T[8]=n,T[9]=a,T[10]=i):i=T[10];let q=i.join(",");T[11]===Symbol.for("react.memo_cache_sentinel")?(o=[{ordering:"DESC",valueExpression:"rand()"}],T[11]=o):o=T[11],T[12]!==L?(h={limit:L},T[12]=L,T[13]=h):h=T[13],T[14]!==$||T[15]!==h||T[16]!==q?(y={...$,select:q,orderBy:o,limit:h},T[14]=$,T[15]=h,T[16]=q,T[17]=y):y=T[17];let O=(0,c.YB)(y),V=null!=O&&z;T[18]!==V?(_={enabled:V},T[18]=V,T[19]=_):_=T[19];let{data:H,isLoading:B}=(0,d.HD)(O??$,_);T[20]!==z?(j={enabled:z},T[20]=z,T[21]=j):j=T[21];let{data:W,isLoading:K}=(t=j,(A=(0,r.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(N=["pyodide"],A[0]=N):N=A[0],A[1]!==t.enabled?(k={queryKey:N,queryFn:m,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1,enabled:t.enabled},A[1]=t.enabled,A[2]=k):k=A[2],(0,l.I)(k));T[22]!==$?(S=["patterns",$],T[22]=$,T[23]=S):S=T[23],T[24]!==O||T[25]!==W||T[26]!==H?(w=()=>{if(null==O)throw Error("Unexpected configWithPrimaryAndPartitionKey is null");return p(H?.data.map(v)??[],W).then(e=>{let t=[],s=e.patterns;for(let e=0;e<s.length;e++){let r=s[e],n=H?.data[e];t.push({...n,__hdx_patternId:r.cluster_id,__hdx_pattern:r.template_mined})}return{...H,data:t,additionalKeysLength:O.additionalKeysLength,miner:e.miner}})},T[24]=O,T[25]=W,T[26]=H,T[27]=w):w=T[27];let J=null!=H&&null!=W&&z;T[28]!==S||T[29]!==w||T[30]!==J?(E={queryKey:S,queryFn:w,refetchOnWindowFocus:!1,enabled:J},T[28]=S,T[29]=w,T[30]=J,T[31]=E):E=T[31];let G=(0,l.I)(E),U=G.isLoading||B||K;return T[32]!==O||T[33]!==G||T[34]!==U?(C={...G,isLoading:U,patternQueryConfig:O},T[32]=O,T[33]=G,T[34]=U,T[35]=C):C=T[35],C}(t),R=$?.data.length,M=k&&R?k/R:1;y[7]!==S.dateRange?(s=(0,i.tA)(S.dateRange,24),n=(0,o.Ht)(S.dateRange[0],S.dateRange[1],s),y[7]=S.dateRange,y[8]=s,y[9]=n):(s=y[8],n=y[9]);let D=n;if(y[10]!==S.dateRange||y[11]!==s||y[12]!==$?.data||y[13]!==M||y[14]!==D){let e=$?.data.reduce(j,{});a={},Object.entries(e??{}).forEach(e=>{let[t,r]=e,n=D.reduce(_,{}),i=r.reduce((e,t)=>{let r=t[g],n=(0,o.W6)(new Date(r),s).getTime();return e[n]=(e[n]||0)+1,e},n),l=Math.max(Math.round(r.length*M),1),c=r.at(-1);a[t]={id:t,pattern:c?.__hdx_pattern,count:l,countStr:`~${l}`,severityText:c?.[f],statusCode:c?.[b],samples:r,__hdx_pattern_trend:{data:Object.entries(i).map(e=>{let[t,s]=e;return{bucket:Number.parseInt(t)/1e3,count:Math.round(s*M)}}),granularity:s,dateRange:S.dateRange}}}),y[10]=S.dateRange,y[11]=s,y[12]=$?.data,y[13]=M,y[14]=D,y[15]=a}else a=y[15];let z=a,F=$?.miner;return y[16]!==z||y[17]!==L||y[18]!==I||y[19]!==R||y[20]!==F?(h={data:z,isLoading:L,miner:F,sampledRowCount:R,patternQueryConfig:I},y[16]=z,y[17]=L,y[18]=I,y[19]=R,y[20]=F,y[21]=h):h=y[21],h}function _(e,t){return e[t.getTime()]=0,e}function j(e,t){let s=`${t.__hdx_patternId}`;return e[s]=e[s]||[],e[s].push(t),e}},32479:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var r=s(75155),n=s(55729),a=s(76089),i=s(2489),l=s(43152);let o=e=>{let t,s,o,c,d,u=(0,r.c)(15),{searchedTimeRange:m,onTimeRangeSelect:h,isLive:p}=e,[x,g]=n.useState(!1),f="visible"===(0,i.f)()&&p;u[0]!==h||u[1]!==m?(t=()=>{let e=1e3*Math.round((m[1].getTime()-m[0].getTime())/1e3),t=new Date;h(new Date(t.getTime()-e),t),g(!0),setTimeout(()=>{g(!1)},1e3)},u[0]=h,u[1]=m,u[2]=t):t=u[2];let b=t;u[3]!==m?(s=(0,a.tA)(m),u[3]=m,u[4]=s):s=u[4];let v=s,y=n.useRef(null);return u[5]!==v||u[6]!==f||u[7]!==b?(o=()=>(f?(y.current&&window.clearInterval(y.current),y.current=window.setInterval(()=>{b()},1e3*(0,l.qL)(v))):y.current&&window.clearInterval(y.current),()=>{y.current&&window.clearInterval(y.current)}),c=[f,v,b],u[5]=v,u[6]=f,u[7]=b,u[8]=o,u[9]=c):(o=u[8],c=u[9]),n.useEffect(o,c),u[10]!==v||u[11]!==f||u[12]!==x||u[13]!==b?(d={granularityOverride:v,isRefreshEnabled:f,manualRefreshCooloff:x,refresh:b},u[10]=v,u[11]=f,u[12]=x,u[13]=b,u[14]=d):d=u[14],d}},35729:(e,t,s)=>{"use strict";s.d(t,{B:()=>d,y:()=>u});var r=s(6029),n=s(55729),a=s(66692),i=s(60481),l=s(3635),o=s(43517),c=s(20158);let d=n.memo(({header:e,onClose:t,closeEsc:s=!0})=>((0,a.vC)(["esc"],()=>t?.(),{enabled:s}),(0,r.jsx)(i.a,{px:"md",py:"xs",className:"border-bottom border-dark",children:(0,r.jsxs)(l.Y,{justify:"space-between",align:"center",children:[(0,r.jsx)(o.E,{size:"md",children:e}),(0,r.jsx)(c.J,{onClick:t,"aria-label":"Close modal",variant:"subtle",size:"md"})]})}))),u=n.memo(({children:e})=>(0,r.jsx)(i.a,{className:"w-100 overflow-auto",px:"sm",py:"md",children:e}))},37901:(e,t,s)=>{"use strict";s.d(t,{$_:()=>h,bn:()=>x,dD:()=>g,k1:()=>p});var r,n=s(6029),a=s(75155),i=s(46375),l=s(82641),o=s(60481),c=s(91021),d=s(81973),u=s(18006),m=s(65081),h=((r={}).TIMESTAMP="__hdx_timestamp",r.BODY="__hdx_body",r.TRACE_ID="__hdx_trace_id",r.SPAN_ID="__hdx_span_id",r.SEVERITY_TEXT="__hdx_severity_text",r.SERVICE_NAME="__hdx_service_name",r.RESOURCE_ATTRIBUTES="__hdx_resource_attributes",r.EVENT_ATTRIBUTES="__hdx_event_attributes",r.EVENTS_EXCEPTION_ATTRIBUTES="__hdx_events_exception_attributes",r.SPAN_EVENTS="__hdx_span_events",r);function p(e){let t,s,r,n,o,m,h,p,x,g,f,b=(0,a.c)(62),{source:v,rowId:y,aliasWith:_}=e;b[0]!==v?(t=(0,d.N8)(v),b[0]=v,b[1]=t):t=b[1];let j=t,S=v.traceIdExpression,w=v.spanIdExpression,E=v.severityTextExpression||v.statusCodeExpression;if(b[2]!==j||b[3]!==w||b[4]!==S||b[5]!==E||b[6]!==v){let e,t,a,i,o,m,h,p,x,g,f,y=v.kind===l.GL.Trace||v.kind===l.GL.Log?(0,u.z4)(v.highlightedRowAttributeExpressions):[];n=c.HD,s=v.connection,b[10]===Symbol.for("react.memo_cache_sentinel")?(e={valueExpression:"*"},b[10]=e):e=b[10],b[11]!==v?(t=(0,d.xg)(v),b[11]=v,b[12]=t):t=b[12],b[13]!==t?(a={valueExpression:t,alias:"__hdx_timestamp"},b[13]=t,b[14]=a):a=b[14],b[15]!==j?(i=j?[{valueExpression:j,alias:"__hdx_body"}]:[],b[15]=j,b[16]=i):i=b[16],b[17]!==S?(o=S?[{valueExpression:S,alias:"__hdx_trace_id"}]:[],b[17]=S,b[18]=o):o=b[18],b[19]!==w?(m=w?[{valueExpression:w,alias:"__hdx_span_id"}]:[],b[19]=w,b[20]=m):m=b[20],b[21]!==E?(h=E?[{valueExpression:E,alias:"__hdx_severity_text"}]:[],b[21]=E,b[22]=h):h=b[22],b[23]!==v.serviceNameExpression?(p=v.serviceNameExpression?[{valueExpression:v.serviceNameExpression,alias:"__hdx_service_name"}]:[],b[23]=v.serviceNameExpression,b[24]=p):p=b[24],b[25]!==v.resourceAttributesExpression?(x=v.resourceAttributesExpression?[{valueExpression:v.resourceAttributesExpression,alias:"__hdx_resource_attributes"}]:[],b[25]=v.resourceAttributesExpression,b[26]=x):x=b[26],b[27]!==v.eventAttributesExpression?(g=v.eventAttributesExpression?[{valueExpression:v.eventAttributesExpression,alias:"__hdx_event_attributes"}]:[],b[27]=v.eventAttributesExpression,b[28]=g):g=b[28],b[29]!==v.kind||b[30]!==v.spanEventsValueExpression?(f=v.kind===l.GL.Trace&&v.spanEventsValueExpression?[{valueExpression:`${v.spanEventsValueExpression}.Attributes[indexOf(${v.spanEventsValueExpression}.Name, 'exception')]`,alias:"__hdx_events_exception_attributes"},{valueExpression:v.spanEventsValueExpression,alias:"__hdx_span_events"}]:[],b[29]=v.kind,b[30]=v.spanEventsValueExpression,b[31]=f):f=b[31],r=[e,a,...i,...o,...m,...h,...p,...x,...g,...f,...y],b[2]=j,b[3]=w,b[4]=S,b[5]=E,b[6]=v,b[7]=s,b[8]=r,b[9]=n}else s=b[7],r=b[8],n=b[9];let C=y??"0=1";b[32]===Symbol.for("react.memo_cache_sentinel")?(o={limit:1},b[32]=o):o=b[32],b[33]!==_?(m=_&&_.length>0?{with:_}:{},b[33]=_,b[34]=m):m=b[34],b[35]!==v.from||b[36]!==s||b[37]!==r||b[38]!==C||b[39]!==m?(h={connection:s,select:r,where:C,from:v.from,limit:o,...m},b[35]=v.from,b[36]=s,b[37]=r,b[38]=C,b[39]=m,b[40]=h):h=b[40],b[41]!==_||b[42]!==y||b[43]!==v?(p=["row_side_panel",y,_,v],b[41]=_,b[42]=y,b[43]=v,b[44]=p):p=b[44];let N=null!=y;b[45]!==N||b[46]!==p?(x={queryKey:p,enabled:N},b[45]=N,b[46]=p,b[47]=x):x=b[47];let k=n(h,x);e:{let e,t,s;if(!k.data?.data?.[0]){g=k.data;break e}let r=k.data.data[0];if(b[48]!==r){if(e={...r},r.__hdx_resource_attributes){let t,s=r.__hdx_resource_attributes;b[50]!==s?(t=(0,i.flatten)(s),b[50]=s,b[51]=t):t=b[51],e.__hdx_resource_attributes=t}if(r.__hdx_event_attributes){let t,s=r.__hdx_event_attributes;b[52]!==s?(t=(0,i.flatten)(s),b[52]=s,b[53]=t):t=b[53],e.__hdx_event_attributes=t}b[48]=r,b[49]=e}else e=b[49];b[54]!==e?(t=[e],b[54]=e,b[55]=t):t=b[55],b[56]!==k.data||b[57]!==t?(s={...k.data,data:t},b[56]=k.data,b[57]=t,b[58]=s):s=b[58],g=s}let A=g;return b[59]!==A||b[60]!==k?(f={...k,data:A},b[59]=A,b[60]=k,b[61]=f):f=b[61],f}function x(e){return e?.filter(e=>"JSON"===e.type||e.type.startsWith("JSON(")).map(e=>e.name)??[]}function g(e){let t,s,r,i,l,c=(0,a.c)(16),{source:d,rowId:u,aliasWith:h,"data-testid":g}=e;c[0]!==h||c[1]!==u||c[2]!==d?(t={source:d,rowId:u,aliasWith:h},c[0]=h,c[1]=u,c[2]=d,c[3]=t):t=c[3];let{data:f}=p(t);e:{let e,t;c[4]!==f?.data?.[0]?(e=f?.data?.[0]??{},c[4]=f?.data?.[0],c[5]=e):e=c[5],c[6]!==e?(t={...e},c[6]=e,c[7]=t):t=c[7];let r=t;if(!r){s=null;break e}s=r}let b=s,v=f?.meta;c[8]!==v?(r=x(v),c[8]=v,c[9]=r):r=c[9];let y=r;return c[10]!==b||c[11]!==y?(i=(0,n.jsx)(o.a,{mx:"md",my:"sm",children:(0,n.jsx)(m.z,{data:b,jsonColumns:y})}),c[10]=b,c[11]=y,c[12]=i):i=c[12],c[13]!==g||c[14]!==i?(l=(0,n.jsx)("div",{className:"flex-grow-1 overflow-auto","data-testid":g,children:i}),c[13]=g,c[14]=i,c[15]=l):l=c[15],l}},40147:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(75155),n=s(80519),a=s.n(n),i=s(3145),l=s(78550);function o(e){let t,s=(0,r.c)(6);s[0]!==e?(t=(0,i.VO)(e),s[0]=e,s[1]=t):t=s[1];let{data:n,isLoading:o}=(0,l.n$)(t);if(e&&!o){let e;return s[2]!==n?(e={isLoading:!1,getFieldExpression:(e,t,s)=>n?.includes(e)?a().format(`${void 0===s?"toString":s}(??.??)`,[e,t]):a().format("??[?]",[e,t])},s[2]=n,s[3]=e):e=s[3],e}{let e;return s[4]!==o?(e={isLoading:o,getFieldExpression:void 0},s[4]=o,s[5]=e):e=s[5],e}}},43370:(e,t,s)=>{"use strict";s.d(t,{A:()=>N});var r=s(6029),n=s(75155),a=s(55729),i=s(1909),l=s(66692),o=s(54167),c=s(3635),d=s(21604),u=s(1885),m=s(37659),h=s(94193),p=s(8737),x=s(92917),g=s(52154);function f(e){let t,s,i,l,o,c,d,f,y,_,j,S,w,E,C,N,k,A,T,$,L,I,R,M,D=(0,n.c)(86),{inputRef:z,value:F,onChange:P,placeholder:q,autocompleteOptions:O,size:V,aboveSuggestions:H,belowSuggestions:B,showSuggestionsOnEmpty:W,suggestionsHeader:K,zIndex:J,onLanguageChange:G,language:U,showHotkey:Y,onSubmit:Q,queryHistoryType:Z,"data-testid":X}=e,ee=void 0===q?"Search your events for anything...":q,et=void 0===V?"sm":V,es=void 0===K?"Properties":K,er=void 0===J?999:J,[en,ea]=(0,a.useState)(!1),[ei,el]=(0,a.useState)(!1);D[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{ea(e),el(e)},D[0]=t):t=D[0];let eo=t,[ec,ed]=(0,a.useState)("auto"),[eu,em]=(0,a.useState)(720),[eh,ep]=(0,a.useState)(-1),[ex,eg]=(0,a.useState)(-1),[ef,eb]=(0,x.mk)(Z);e:{let e;if(!Z||!ef){let e;D[1]===Symbol.for("react.memo_cache_sentinel")?(e=[],D[1]=e):e=D[1],s=e;break e}D[2]!==ef?(e=ef.map(v),D[2]=ef,D[3]=e):e=D[3],s=e}let ev=s,ey=null!=F&&0===F.length&&ev.length>0&&Z;D[4]!==O?(i=new u.A(O??[],{keys:["value"],threshold:0,ignoreLocation:!0}),D[4]=O,D[5]=i):i=D[5];let e_=i,ej=(0,x.d7)(F??"",200);if(D[6]!==O||D[7]!==ej||D[8]!==e_||D[9]!==W){t:{let e=ej.split(" "),t=e[e.length-1];if(0===t.length&&W){let e;D[11]!==O?(e=O??[],D[11]=O,D[12]=e):e=D[12],l=e;break t}l=e_.search(t).map(b)}D[6]=O,D[7]=ej,D[8]=e_,D[9]=W,D[10]=l}else l=D[10];let eS=l;D[13]!==P||D[14]!==Q||D[15]!==eb?(o=e=>{eg(-1),P(e),eb(e),el(!1),Q?.()},D[13]=P,D[14]=Q,D[15]=eb,D[16]=o):o=D[16];let ew=o;D[17]!==z||D[18]!==P||D[19]!==F?(c=e=>{ep(-1),P(null==F?e:F.split(" ").slice(0,-1).join(" ")+`${F.split(" ").length>1?" ":""}${e}`),z.current?.focus()},D[17]=z,D[18]=P,D[19]=F,D[20]=c):c=D[20];let eE=c,eC=(0,a.useRef)(null);D[21]!==z?(d=()=>{eC.current&&ed(eC.current.clientWidth),z.current&&em(z.current.clientWidth)},D[21]=z,D[22]=d):d=D[22],D[23]!==z||D[24]!==U||D[25]!==G?(f=[U,G,z],D[23]=z,D[24]=U,D[25]=G,D[26]=f):f=D[26],(0,a.useLayoutEffect)(d,f);let eN=eu>300?eu:720;return D[27]!==eN||D[28]!==er?(y={dropdown:{maxWidth:eN,width:"100%",zIndex:er}},D[27]=eN,D[28]=er,D[29]=y):y=D[29],D[30]===Symbol.for("react.memo_cache_sentinel")?(_={flexGrow:1,resize:"none"},D[30]=_):_=D[30],D[31]!==P?(j=e=>P(e.target.value),D[31]=P,D[32]=j):j=D[32],D[33]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{ep(-1),eg(-1),eo(!0)},w=()=>{ep(-1),eg(-1),eo(!1)},D[33]=S,D[34]=w):(S=D[33],w=D[34]),D[35]!==eE||D[36]!==Q||D[37]!==Z||D[38]!==eh||D[39]!==eb||D[40]!==eS||D[41]!==F?(E=e=>{"Escape"===e.key&&e.target instanceof HTMLTextAreaElement&&(e.preventDefault(),el(!1),e.target.blur()),"Tab"===e.key&&e.target instanceof HTMLTextAreaElement&&eS.length>0&&eh<eS.length&&eh>=0&&(e.preventDefault(),eE(eS[eh].value)),"Enter"===e.key&&e.target instanceof HTMLTextAreaElement&&(eS.length>0&&eh<eS.length&&eh>=0?(e.preventDefault(),eE(eS[eh].value)):e.shiftKey||(e.preventDefault(),Z&&F&&eb(F),Q?.())),"ArrowDown"===e.key&&e.target instanceof HTMLTextAreaElement&&eS.length>0&&ep(Math.min(eh+1,eS.length-1,9)),"ArrowUp"===e.key&&e.target instanceof HTMLTextAreaElement&&eS.length>0&&ep(Math.max(eh-1,0))},D[35]=eE,D[36]=Q,D[37]=Z,D[38]=eh,D[39]=eb,D[40]=eS,D[41]=F,D[42]=E):E=D[42],D[43]!==en||D[44]!==U||D[45]!==G||D[46]!==Y?(C=null!=U&&null!=G?(0,r.jsx)("div",{ref:eC,children:(0,r.jsx)(g.A,{showHotkey:Y&&en,language:U,onLanguageChange:G})}):void 0,D[43]=en,D[44]=U,D[45]=G,D[46]=Y,D[47]=C):C=D[47],D[48]!==X||D[49]!==z||D[50]!==ee||D[51]!==ec||D[52]!==et||D[53]!==j||D[54]!==E||D[55]!==C||D[56]!==F?(N=(0,r.jsx)(m.A.Target,{children:(0,r.jsx)(h.T,{ref:z,placeholder:ee,className:"fs-8",value:F,size:et,autosize:!0,minRows:1,maxRows:4,style:_,"data-testid":X,onChange:j,onFocus:S,onBlur:w,onKeyDown:E,rightSectionWidth:ec,rightSection:C})}),D[48]=X,D[49]=z,D[50]=ee,D[51]=ec,D[52]=et,D[53]=j,D[54]=E,D[55]=C,D[56]=F,D[57]=N):N=D[57],D[58]!==H?(k=null!=H&&(0,r.jsx)("div",{className:"d-flex p-2 flex-wrap px-3",children:H}),D[58]=H,D[59]=k):k=D[59],D[60]!==eE||D[61]!==eh||D[62]!==eS||D[63]!==es?(A=eS.length>0&&(0,r.jsxs)("div",{className:"border-top border-dark fs-8 py-2",children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between px-3 mb-2",children:[(0,r.jsx)("div",{className:"me-2 text-light",children:es}),eS.length>10&&(0,r.jsxs)("div",{className:"text-muted",children:["(Showing Top ",10,")"]})]}),eS.slice(0,10).map((e,t)=>{let{value:s,label:n}=e;return(0,r.jsx)("div",{className:`py-2 px-3 ${eh===t?"bg-muted":""}`,role:"button",onMouseOver:()=>{ep(t)},onClick:()=>{eE(s)},children:(0,r.jsx)("span",{className:"me-1",children:n})},s)})]}),D[60]=eE,D[61]=eh,D[62]=eS,D[63]=es,D[64]=A):A=D[64],D[65]!==A?(T=(0,r.jsx)("div",{children:A}),D[65]=A,D[66]=T):T=D[66],D[67]!==B?($=null!=B&&(0,r.jsx)("div",{className:"border-top px-3 pt-2 pb-1 fs-8 d-flex align-items-center text-muted flex-wrap",children:B}),D[67]=B,D[68]=$):$=D[68],D[69]!==ew||D[70]!==ev||D[71]!==ex||D[72]!==ey?(L=ey&&(0,r.jsxs)("div",{className:"border-top border-dark fs-8 py-2",children:[(0,r.jsx)("div",{className:"text-muted fs-8 fw-bold me-1 px-3",children:"Search History:"}),ev.map((e,t)=>{let{value:s,label:n}=e;return(0,r.jsx)(p.N,{className:`d-block w-100 text-start text-muted fw-normal px-3 py-2 fs-8 ${ex===t?"bg-muted":""}`,onMouseOver:()=>eg(t),onClick:()=>ew(s),children:(0,r.jsx)("span",{className:"me-1 text-truncate",children:n})},s)})]}),D[69]=ew,D[70]=ev,D[71]=ex,D[72]=ey,D[73]=L):L=D[73],D[74]!==L?(I=(0,r.jsx)("div",{children:L}),D[74]=L,D[75]=I):I=D[75],D[76]!==k||D[77]!==T||D[78]!==$||D[79]!==I?(R=(0,r.jsxs)(m.A.Dropdown,{className:"p-0",children:[k,T,$,I]}),D[76]=k,D[77]=T,D[78]=$,D[79]=I,D[80]=R):R=D[80],D[81]!==ei||D[82]!==y||D[83]!==N||D[84]!==R?(M=(0,r.jsxs)(m.A,{opened:ei,onChange:el,position:"bottom-start",offset:8,width:"target",withinPortal:!0,closeOnClickOutside:!0,closeOnEscape:!0,styles:y,children:[N,R]}),D[81]=ei,D[82]=y,D[83]=N,D[84]=R,D[85]=M):M=D[85],M}function b(e){return e.item}function v(e){return{value:e,label:e}}var y=s(78550);let _=Date.now();function j(e){let{databaseName:t,tableName:s,connectionId:r}=e;return{connection:r,from:{databaseName:t,tableName:s},timestampValueExpression:"",select:"",where:"",dateRange:[new Date(_-432e5),new Date(_)]}}function S(e){return{value:e,label:e}}function w(e){return null!==e.jsType}class E{formatFieldValue(e){return e.path.join(".")}formatFieldLabel(e){return`${e.path.join(".")} (${e.jsType})`}formatKeyValPair(e,t){return`${e}:"${t}"`}}let C=new E;function N(e){let t,s,u,m,h,p,g,b,v,_,E,N,k,A,T,$,L,I,R,M,D,z,F,P,q,O,V,H,B,W,K,J,G,U,Y,Q,Z,X=(0,n.c)(78);X[0]!==e?({tableConnection:E,tableConnections:N,placeholder:v,size:_,zIndex:k,language:m,onLanguageChange:h,enableHotkey:u,onSubmit:p,additionalSuggestions:t,queryHistoryType:b,"data-testid":s,...g}=e,X[0]=e,X[1]=t,X[2]=s,X[3]=u,X[4]=m,X[5]=h,X[6]=p,X[7]=g,X[8]=b,X[9]=v,X[10]=_,X[11]=E,X[12]=N,X[13]=k):(t=X[1],s=X[2],u=X[3],m=X[4],h=X[5],p=X[6],g=X[7],b=X[8],v=X[9],_=X[10],E=X[11],N=X[12],k=X[13]);let ee=void 0===v?"Search your events for anything...":v,et=void 0===_?"sm":_,{field:es}=(0,i.as)(g),{onChange:er,value:en}=es,ea=(0,y.Ge)(),ei=(0,a.useRef)(null),[el,eo]=(0,a.useState)(""),ec=E||N;X[14]!==t||X[15]!==ec?(A={tableConnection:ec,additionalSuggestions:t},X[14]=t,X[15]=ec,X[16]=A):A=X[16];let ed=function(e,t,s){let r,i,l,o,c,d,u,m,h,p,g,f,b,v,_=(0,n.c)(39),{tableConnection:E,additionalSuggestions:C}=s;_[0]!==E?(r=E?Array.isArray(E)?E:[E]:[],_[0]=E,_[1]=r):r=_[1];let{data:N}=(0,y.Sh)(r);if(_[2]!==C||_[3]!==N||_[4]!==e){let t=(N??[]).filter(w);i=new Map,l=[...t.map(t=>{let s={value:e.formatFieldValue(t),label:e.formatFieldLabel(t)};return i.set(s.value,t),s}),...C?.map(S)??[]],_[2]=C,_[3]=N,_[4]=e,_[5]=i,_[6]=l}else i=_[5],l=_[6];let k=l;_[7]!==i||_[8]!==k?(o={fieldCompleteOptions:k,fieldCompleteMap:i},_[7]=i,_[8]=k,_[9]=o):o=_[9];let{fieldCompleteOptions:A,fieldCompleteMap:T}=o,[$,L]=(0,a.useState)(null);_[10]!==T||_[11]!==t?(c=()=>{let e=T.get(t);e&&L(e)},d=[T,t],_[10]=T,_[11]=t,_[12]=c,_[13]=d):(c=_[12],d=_[13]),(0,a.useEffect)(c,d),_[14]!==e||_[15]!==$||_[16]!==t?(u=()=>{$&&(t.startsWith(e.formatFieldValue($))||L(null))},m=[$,L,t,e],_[14]=e,_[15]=$,_[16]=t,_[17]=u,_[18]=m):(u=_[17],m=_[18]),(0,a.useEffect)(u,m);let I=Array.isArray(E)?E.length>0?E[0]:void 0:E;_[19]!==I?(h=I??{tableName:"",databaseName:"",connectionId:""},_[19]=I,_[20]=h):h=_[20];let{data:R}=(0,y.n$)(h);_[21]!==R||_[22]!==$?(p=$&&R?[(0,x.uc)($.path,R)]:[],_[21]=R,_[22]=$,_[23]=p):p=_[23];let M=p;_[24]!==E?(g=(0,x.$r)(E).map(j),_[24]=E,_[25]=g):g=_[25];let D=g;_[26]!==D||_[27]!==M?(f={chartConfigs:D,keys:M},_[26]=D,_[27]=M,_[28]=f):f=_[28];let{data:z}=(0,y.nT)(f);e:{let t;if(!z||!$){b=A;break e}if(_[29]!==e||_[30]!==$||_[31]!==z){let s;_[33]!==e||_[34]!==$?(s=t=>t.value.flatMap(t=>{if("string"==typeof t){let s=e.formatKeyValPair(e.formatFieldValue($),t);return[{value:s,label:s}]}if("object"!=typeof t)return[];{let s=[];for(let[r,n]of Object.entries(t)){if("string"!=typeof r||"string"!=typeof n)return console.error("unknown type for autocomplete object ",t),[];let a=structuredClone($);a.path.push(r);let i=e.formatKeyValPair(e.formatFieldValue(a),n);s.push({value:i,label:i})}return s}}),_[33]=e,_[34]=$,_[35]=s):s=_[35],t=z.flatMap(s),_[29]=e,_[30]=$,_[31]=z,_[32]=t}else t=_[32];b=t}let F=b;return _[36]!==A||_[37]!==F?(v=(0,y.Ii)([A,F]),_[36]=A,_[37]=F,_[38]=v):v=_[38],v}(C,null!=en?`${en}`:"",A);X[17]!==ea||X[18]!==E||X[19]!==en?(T=()=>{E&&(0,o.oU)({query:en,tableConnection:E,metadata:ea}).then(e=>{eo(e)})},$=[en,E,ea],X[17]=ea,X[18]=E,X[19]=en,X[20]=T,X[21]=$):(T=X[20],$=X[21]),(0,a.useEffect)(T,$),X[22]!==u?(L=()=>{u&&ei.current?.focus()},X[22]=u,X[23]=L):L=X[23],X[24]===Symbol.for("react.memo_cache_sentinel")?(I={preventDefault:!0},X[24]=I):I=X[24],X[25]!==u?(R=[u],X[25]=u,X[26]=R):R=X[26],(0,l.vC)("/",L,I,R),X[27]===Symbol.for("react.memo_cache_sentinel")?(M=(0,r.jsx)("div",{className:"text-muted fs-8 fw-bold me-1",children:"Searching for:"}),X[27]=M):M=X[27];let eu=""===el?"Matching all events, enter a query to search.":el;return X[28]!==eu?(D=(0,r.jsxs)(r.Fragment,{children:[M,(0,r.jsx)("div",{className:"text-muted fs-8",children:eu})]}),X[28]=eu,X[29]=D):D=X[29],X[30]===Symbol.for("react.memo_cache_sentinel")?(z=(0,r.jsx)("div",{className:"me-2 mb-2 text-light",children:"Examples:"}),X[30]=z):z=X[30],X[31]===Symbol.for("react.memo_cache_sentinel")?(F=(0,r.jsx)("span",{className:"me-1",children:"Full Text:"}),X[31]=F):F=X[31],X[32]!==er||X[33]!==en?(P=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[F,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"my log")},children:"my log"})]}),X[32]=er,X[33]=en,X[34]=P):P=X[34],X[35]===Symbol.for("react.memo_cache_sentinel")?(q=(0,r.jsx)("span",{className:"me-1",children:"Substring:"}),X[35]=q):q=X[35],X[36]!==er||X[37]!==en?(O=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[q,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"*err*")},children:"*err*"})]}),X[36]=er,X[37]=en,X[38]=O):O=X[38],X[39]===Symbol.for("react.memo_cache_sentinel")?(V=(0,r.jsx)("span",{className:"me-1",children:"Exact:"}),X[39]=V):V=X[39],X[40]!==er||X[41]!==en?(H=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[V,(0,r.jsxs)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+'level:"info"')},children:["level:",'"',"info",'"']})]}),X[40]=er,X[41]=en,X[42]=H):H=X[42],X[43]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.jsx)("span",{className:"me-1",children:"Not:"}),X[43]=B):B=X[43],X[44]!==er||X[45]!==en?(W=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[B,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"-level:info")},children:"-level:info"})]}),X[44]=er,X[45]=en,X[46]=W):W=X[46],X[47]===Symbol.for("react.memo_cache_sentinel")?(K=(0,r.jsx)("span",{className:"me-1",children:"Existence:"}),X[47]=K):K=X[47],X[48]!==er||X[49]!==en?(J=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[K,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"service:*")},children:"service:*"})]}),X[48]=er,X[49]=en,X[50]=J):J=X[50],X[51]===Symbol.for("react.memo_cache_sentinel")?(G=(0,r.jsx)("span",{className:"me-1",children:"Boolean:"}),X[51]=G):G=X[51],X[52]!==er||X[53]!==en?(U=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[G,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+'("foo" OR "bar")')},children:"(foo OR bar)"})]}),X[52]=er,X[53]=en,X[54]=U):U=X[54],X[55]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,r.jsx)("a",{className:"text-muted mb-2",target:"_blank",href:"https://clickhouse.com/docs/use-cases/observability/clickstack/search",rel:"noreferrer",children:(0,r.jsxs)(c.Y,{gap:5,children:[(0,r.jsx)(d.A,{size:14}),(0,r.jsx)("span",{children:"Docs"})]})}),X[55]=Y):Y=X[55],X[56]!==P||X[57]!==O||X[58]!==H||X[59]!==W||X[60]!==J||X[61]!==U?(Q=(0,r.jsxs)(r.Fragment,{children:[z,P,O,H,W,J,U,Y]}),X[56]=P,X[57]=O,X[58]=H,X[59]=W,X[60]=J,X[61]=U,X[62]=Q):Q=X[62],X[63]!==ed||X[64]!==s||X[65]!==u||X[66]!==m||X[67]!==er||X[68]!==h||X[69]!==p||X[70]!==ee||X[71]!==b||X[72]!==et||X[73]!==D||X[74]!==Q||X[75]!==en||X[76]!==k?(Z=(0,r.jsx)(f,{inputRef:ei,value:en,onChange:er,placeholder:ee,autocompleteOptions:ed,size:et,zIndex:k,language:m,showHotkey:u,onLanguageChange:h,onSubmit:p,queryHistoryType:b,"data-testid":s,aboveSuggestions:D,belowSuggestions:Q}),X[63]=ed,X[64]=s,X[65]=u,X[66]=m,X[67]=er,X[68]=h,X[69]=p,X[70]=ee,X[71]=b,X[72]=et,X[73]=D,X[74]=Q,X[75]=en,X[76]=k,X[77]=Z):Z=X[77],Z}},45034:(e,t,s)=>{"use strict";s.d(t,{A:()=>F});var r=s(6029),n=s(75155),a=s(55729),i=s(1909),l=s(82641),o=s(96061),c=s(63085),d=s(59029),u=s(18341),m=s(3635),h=s(25062),p=s(34834),x=s(27166),g=s(92556),f=s(43517),b=s(22623),v=s(8737),y=s(53061),_=s(67747),j=s(9385),S=s(6892),w=s(90993),E=s(17283),C=s(94502),N=s(86761),k=s(57478),A=s(64467),T=s(81973),$=s(92917),L=s(53356),I=s.n(L);let R=e=>{let t,s,a,i,l,d=(0,n.c)(13),{children:u,label:m,tooltipText:h,error:p}=e,x=p&&(p.message||(p?.type==="required"?"This field is required":"Error"));return d[0]!==m?(t=(0,r.jsx)(o.p.Label,{children:m}),d[0]=m,d[1]=t):t=d[1],d[2]!==h?(s=h&&(0,r.jsx)(c.m,{label:h,children:(0,r.jsx)(_.A,{size:14,className:"ms-2"})}),d[2]=h,d[3]=s):s=d[3],d[4]!==x?(a=x&&(0,r.jsx)(o.p.Error,{color:"red",size:"sm",children:x}),d[4]=x,d[5]=a):a=d[5],d[6]!==u?(i=(0,r.jsx)("div",{className:"mt-1",children:u}),d[6]=u,d[7]=i):i=d[7],d[8]!==t||d[9]!==s||d[10]!==a||d[11]!==i?(l=(0,r.jsxs)("div",{children:[t,s,a,i]}),d[8]=t,d[9]=s,d[10]=a,d[11]=i,d[12]=l):l=d[12],l},M=e=>{let t,s,o,c,g,f,b,v,y,_,j,S,w,E,C,L,I,M,D,z,F,q,O,V,H,B,W,K,J,G=(0,n.c)(73),{filter:U,isNew:Y,source:Q,onSave:Z,onClose:X,onCancel:ee}=e;G[0]!==U?(t={defaultValues:U},G[0]=U,G[1]=t):t=G[1];let{handleSubmit:et,register:es,formState:er,control:en,reset:ea}=(0,i.mN)(t);G[2]!==U||G[3]!==ea?(s=()=>{ea(U)},o=[U,ea],G[2]=U,G[3]=ea,G[4]=s,G[5]=o):(s=G[4],o=G[5]),(0,a.useEffect)(s,o),G[6]!==en?(c={control:en,name:"source"},G[6]=en,G[7]=c):c=G[7];let ei=(0,i.FH)(c);G[8]!==ei?(g={id:ei},G[8]=ei,G[9]=g):g=G[9];let{data:el}=(0,T.Fo)(g);G[10]!==en?(f={control:en,name:"sourceMetricType"},G[10]=en,G[11]=f):f=G[11];let eo=(0,i.FH)(f);G[12]!==eo||G[13]!==el?(b=el&&(0,$.U6)(el,eo),G[12]=eo,G[13]=el,G[14]=b):b=G[14];let ec=b;G[15]!==el||G[16]!==ec?(v=ec?{connectionId:el.connection,databaseName:el.from.databaseName,tableName:ec}:void 0,G[15]=el,G[16]=ec,G[17]=v):v=G[17];let ed=v,eu=el?.kind===l.GL.Metric;G[18]===Symbol.for("react.memo_cache_sentinel")?(y=Object.values(l.SX),G[18]=y):y=G[18],G[19]!==el?.metricTables?(_=y.filter(e=>el?.metricTables?.[e]),G[19]=el?.metricTables,G[20]=_):_=G[20];let em=_,[eh,ep]=(0,a.useState)(null),ex=Y?"Add filter":"Edit filter";G[21]!==et||G[22]!==Z?(j=et(Z),G[21]=et,G[22]=Z,G[23]=j):j=G[23];let eg=er.errors.name;G[24]!==es?(S=es("name",{required:!0,minLength:1}),G[24]=es,G[25]=S):S=G[25],G[26]!==S?(w=(0,r.jsx)(d.k,{placeholder:"Name","data-testid":"filter-name-input",...S}),G[26]=S,G[27]=w):w=G[27],G[28]!==er.errors.name||G[29]!==w?(E=(0,r.jsx)(R,{label:"Name",error:eg,children:w}),G[28]=er.errors.name,G[29]=w,G[30]=E):E=G[30],G[31]===Symbol.for("react.memo_cache_sentinel")?(C={required:!0},L={withinPortal:!0},G[31]=C,G[32]=L):(C=G[31],L=G[32]),G[33]!==el?(I=(0,r.jsx)(N.A,{source:el,variant:"text"}),G[33]=el,G[34]=I):I=G[34];let ef=!!Q;return G[35]!==en||G[36]!==I||G[37]!==ef?(M=(0,r.jsx)(k.W,{control:en,name:"source","data-testid":"source-selector",rules:C,comboboxProps:L,sourceSchemaPreview:I,disabled:ef}),G[35]=en,G[36]=I,G[37]=ef,G[38]=M):M=G[38],G[39]!==er.errors.source||G[40]!==M?(D=(0,r.jsx)(R,{label:"Data source",tooltipText:"The data source that the filter values are queried from",error:er.errors.source,children:M}),G[39]=er.errors.source,G[40]=M,G[41]=D):D=G[41],G[42]!==en||G[43]!==er.errors.sourceMetricType||G[44]!==em||G[45]!==eu?(z=eu&&(0,r.jsx)(R,{label:"Metric type",tooltipText:"The metric table that the filter values are queried from",error:er.errors.sourceMetricType,children:(0,r.jsx)(i.xI,{control:en,name:"sourceMetricType",rules:{required:!0},render:e=>{let{field:t}=e,{onChange:s,value:n}=t;return(0,r.jsx)(u.s.Group,{value:n,onChange:e=>s(e),withAsterisk:!0,children:(0,r.jsx)(m.Y,{children:em.map(P)})})}})}),G[42]=en,G[43]=er.errors.sourceMetricType,G[44]=em,G[45]=eu,G[46]=z):z=G[46],G[47]===Symbol.for("react.memo_cache_sentinel")?(F={required:!0},G[47]=F):F=G[47],G[48]!==en||G[49]!==eh||G[50]!==ed?(q=(0,r.jsx)(A.Z,{tableConnection:ed,control:en,name:"expression",placeholder:"SQL column or expression",language:"sql",enableHotkey:!0,rules:F,parentRef:eh}),G[48]=en,G[49]=eh,G[50]=ed,G[51]=q):q=G[51],G[52]!==er.errors.expression||G[53]!==q?(O=(0,r.jsx)(R,{label:"Filter expression",tooltipText:"The SQL column or expression to filter on",error:er.errors.expression,children:q}),G[52]=er.errors.expression,G[53]=q,G[54]=O):O=G[54],G[55]!==ee?(V=(0,r.jsx)(h.$,{variant:"secondary",onClick:ee,children:"Cancel"}),G[55]=ee,G[56]=V):V=G[56],G[57]===Symbol.for("react.memo_cache_sentinel")?(H=(0,r.jsx)(h.$,{type:"submit",variant:"primary","data-testid":"save-filter-button",children:"Save filter"}),G[57]=H):H=G[57],G[58]!==V?(B=(0,r.jsxs)(m.Y,{justify:"space-between",my:"xs",children:[V,H]}),G[58]=V,G[59]=B):B=G[59],G[60]!==E||G[61]!==D||G[62]!==z||G[63]!==O||G[64]!==B?(W=(0,r.jsxs)(p.B,{children:[E,D,z,O,B]}),G[60]=E,G[61]=D,G[62]=z,G[63]=O,G[64]=B,G[65]=W):W=G[65],G[66]!==j||G[67]!==W?(K=(0,r.jsx)("div",{ref:ep,children:(0,r.jsx)("form",{onSubmit:j,children:W})}),G[66]=j,G[67]=W,G[68]=K):K=G[68],G[69]!==X||G[70]!==ex||G[71]!==K?(J=(0,r.jsx)(x.a,{title:ex,opened:!0,onClose:X,size:"sm",children:K}),G[69]=X,G[70]=ex,G[71]=K,G[72]=J):J=G[72],J},D=e=>{let t,s,a,i,l,o=(0,n.c)(8),{onCreateFilter:c,onClose:d}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(j.A,{}),s=(0,r.jsx)(g.h,{order:4,children:"No filters yet."}),a=(0,r.jsx)(f.E,{size:"sm",ta:"center",px:"xl",children:"Add filters to let users quickly narrow data on key columns. Saved filters will stay with this dashboard."}),o[0]=t,o[1]=s,o[2]=a):(t=o[0],s=o[1],a=o[2]),o[3]!==c?(i=(0,r.jsxs)(p.B,{align:"center",justify:"center",pt:"lg",pb:"xl","data-testid":"dashboard-filters-empty-state",children:[t,s,a,(0,r.jsx)(h.$,{variant:"primary",onClick:c,"data-testid":"add-filter-button",children:"Add new filter"})]}),o[3]=c,o[4]=i):i=o[4],o[5]!==d||o[6]!==i?(l=(0,r.jsx)(x.a,{opened:!0,onClose:d,size:"sm",children:i}),o[5]=d,o[6]=i,o[7]=l):l=o[7],l},z=e=>{let t,s,a,i,l,o,c,d=(0,n.c)(25),{filters:u,isLoading:g,onEdit:_,onRemove:j,onClose:N,onAddNew:k}=e,{data:A}=(0,T.oE)();if(d[0]!==u||d[1]!==_||d[2]!==j||d[3]!==A){let e;d[5]!==_||d[6]!==j||d[7]!==A?(e=e=>(0,r.jsxs)(b.t,{withBorder:!0,className:I().filterPaper,p:"xs",variant:"muted","data-testid":`dashboard-filter-item-${e.name}`,children:[(0,r.jsxs)(m.Y,{justify:"space-between",className:I().filterHeader,children:[(0,r.jsx)(f.E,{size:"xs",children:e.name}),(0,r.jsxs)(m.Y,{children:[(0,r.jsx)(v.N,{onClick:()=>_(e),className:I().filterActionButton,"data-testid":`edit-filter-button-${e.name}`,children:(0,r.jsx)(S.A,{size:16})}),(0,r.jsx)(v.N,{onClick:()=>j(e.id),className:`${I().filterActionButton} ${I().deleteButton}`,"data-testid":`delete-filter-button-${e.name}`,children:(0,r.jsx)(w.A,{size:16})})]})]}),(0,r.jsxs)(m.Y,{gap:"xs",children:[(0,r.jsx)(E.A,{size:14}),(0,r.jsx)(f.E,{size:"xs",children:A?.find(t=>t.id===e.source)?.name})]})]},e.id),d[5]=_,d[6]=j,d[7]=A,d[8]=e):e=d[8],t=u.map(e),d[0]=u,d[1]=_,d[2]=j,d[3]=A,d[4]=t}else t=d[4];return d[9]!==g?(s=g&&(0,r.jsx)(y.o,{children:(0,r.jsx)(C.A,{className:"spin-animate"})}),d[9]=g,d[10]=s):s=d[10],d[11]!==t||d[12]!==s?(a=(0,r.jsxs)(p.B,{className:I().filtersContainer,gap:"xs","data-testid":"dashboard-filters-list",children:[t,s]}),d[11]=t,d[12]=s,d[13]=a):a=d[13],d[14]!==N?(i=(0,r.jsx)(h.$,{variant:"secondary",onClick:N,"data-testid":"close-filters-button",children:"Close"}),d[14]=N,d[15]=i):i=d[15],d[16]!==k?(l=(0,r.jsx)(h.$,{variant:"primary",onClick:k,"data-testid":"add-filter-button",children:"Add new filter"}),d[16]=k,d[17]=l):l=d[17],d[18]!==i||d[19]!==l?(o=(0,r.jsxs)(m.Y,{justify:"space-between",my:"sm",children:[i,l]}),d[18]=i,d[19]=l,d[20]=o):o=d[20],d[21]!==N||d[22]!==a||d[23]!==o?(c=(0,r.jsxs)(x.a,{opened:!0,onClose:N,title:"Filters",size:"sm",className:I().modal,children:[a,o]}),d[21]=N,d[22]=a,d[23]=o,d[24]=c):c=d[24],c},F=e=>{let t,s,i,l,o,c=(0,n.c)(27),{opened:d,filters:u,isLoading:m,source:h,onClose:p,onSaveFilter:x,onRemoveFilter:g}=e,[f,b]=(0,a.useState)();c[0]!==d?(t=()=>{d&&b(void 0)},s=[d],c[0]=d,c[1]=t,c[2]=s):(t=c[1],s=c[2]),(0,a.useEffect)(t,s),c[3]!==u||c[4]!==g||c[5]!==f?.id?(i=e=>{e===f?.id&&b(u.find(t=>t.id!==e)),g(e)},c[3]=u,c[4]=g,c[5]=f?.id,c[6]=i):i=c[6];let v=i;c[7]!==h?.id?(l=()=>{b({id:"new",type:"QUERY_EXPRESSION",name:"",expression:"",source:h?.id??""})},c[7]=h?.id,c[8]=l):l=c[8];let y=l;c[9]!==x?(o=e=>{b(void 0),"new"===e.id?x({...e,id:crypto.randomUUID()}):x(e)},c[9]=x,c[10]=o):o=c[10];let _=o,j=!f&&0===u.length;if(!d)return null;if(j){let e;return c[11]!==y||c[12]!==p?(e=(0,r.jsx)(D,{onCreateFilter:y,onClose:p}),c[11]=y,c[12]=p,c[13]=e):e=c[13],e}if(f){let e,t;c[14]===Symbol.for("react.memo_cache_sentinel")?(e=()=>b(void 0),c[14]=e):e=c[14];let s="new"===f.id;return c[15]!==_||c[16]!==p||c[17]!==f||c[18]!==h||c[19]!==s?(t=(0,r.jsx)(M,{filter:f,onSave:_,onCancel:e,onClose:p,isNew:s,source:h}),c[15]=_,c[16]=p,c[17]=f,c[18]=h,c[19]=s,c[20]=t):t=c[20],t}{let e;return c[21]!==u||c[22]!==y||c[23]!==v||c[24]!==m||c[25]!==p?(e=(0,r.jsx)(z,{filters:u,onEdit:b,onRemove:v,onClose:p,onAddNew:y,isLoading:m}),c[21]=u,c[22]=y,c[23]=v,c[24]=m,c[25]=p,c[26]=e):e=c[26],e}};function P(e){return(0,r.jsx)(u.s,{value:e,label:e},e)}},46061:(e,t,s)=>{"use strict";s.d(t,{rD:()=>eO,Ho:()=>eP,YB:()=>eq});var r=s(6029),n=s(75155),a=s(55729),i=s(75828),l=s.n(i),o=s(92799),c=s(84450),d=s.n(c),u=s(90310),m=s.n(u),h=s(67264),p=s.n(h),x=s(66692),g=s(2893),f=s(47122),b=s(2055),v=s(31292),y=s(40684),_=s(92205),j=s(35467),S=s(76089),w=s(27166),E=s(78253),C=s(60481),N=s(3635),k=s(8737),A=s(63085),T=s(43517),$=s(24589),L=s(94502),I=s(73454),R=s(6620),M=s(38314),D=s(24602),z=s(40387),F=s(95316),P=s(12482),q=s(39696),O=s(79220),V=s(21440),H=s(6876),B=s(61410),W=s(91021),K=s(55024),J=s(78550),G=s(78744),U=s(31451),Y=s(70727),Q=s(39785),Z=s(81973),X=s(68593),ee=s(7565),et=s(57820),es=s(92917),er=s(37659),en=s(78341),ea=s(45172),ei=s(9385),el=s(96413),eo=s(50374),ec=s(90515),ed=s(74620),eu=s.n(ed);let em=e=>{let t,s,a,i,o,c=(0,n.c)(19),{onClick:d,className:u,title:m,tabIndex:h,children:p,variant:x,isActive:g,iconSize:f}=e,b=void 0===h?-1:h,v=void 0===x?"default":x,y=void 0!==g&&g,_=void 0===f?14:f;c[0]!==d?(t=e=>{e.stopPropagation(),e.preventDefault(),d(e)},c[0]=d,c[1]=t):t=c[1];let j=t;c[2]!==u||c[3]!==y||c[4]!==v?(s="copy"===v?l()(eu().iconActionButton,{[eu().copied]:y}):u,c[2]=u,c[3]=y,c[4]=v,c[5]=s):s=c[5];let S=s,w=!m;return c[6]!==p||c[7]!==_||c[8]!==y?(a=y?(0,r.jsx)(ec.A,{size:_}):p,c[6]=p,c[7]=_,c[8]=y,c[9]=a):a=c[9],c[10]!==S||c[11]!==j||c[12]!==a||c[13]!==b?(i=(0,r.jsx)(k.N,{onClick:j,component:"div",className:S,tabIndex:b,role:"button",children:a}),c[10]=S,c[11]=j,c[12]=a,c[13]=b,c[14]=i):i=c[14],c[15]!==w||c[16]!==i||c[17]!==m?(o=(0,r.jsx)(A.m,{label:m,position:"top",withArrow:!0,disabled:w,openDelay:300,closeDelay:100,fz:"xs",children:i}),c[15]=w,c[16]=i,c[17]=m,c[18]=o):o=c[18],o},eh=({children:e,cellValue:t,tableContainerRef:s,wrapLinesEnabled:n,columnName:i,isChart:o=!1})=>{let[c,{close:d,open:u}]=(0,en.j)(!1),[m,h]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),g=(0,a.useRef)(void 0),f=(0,a.useRef)(void 0);(0,a.useEffect)(()=>()=>{g.current&&clearTimeout(g.current),f.current&&clearTimeout(f.current)},[]);let{onPropertyAddClick:b}=(0,a.useContext)(eo.D),v=i&&b&&null!=t,y=()=>{p||(g.current&&clearTimeout(g.current),u())},_=()=>{g.current=setTimeout(()=>{d()},100)},j=()=>{d(),x(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{x(!1)},1e3)},S=async()=>{try{let e="string"==typeof t?t:String(t??"");await navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)}catch(e){console.error("Failed to copy to clipboard:",e)}},w=v?3:1;return o?(0,r.jsx)("div",{className:l()(eu().fieldText,{[eu().chart]:o}),style:{display:"flex",alignItems:"center"},children:e}):(0,r.jsx)("div",{className:l()(eu().fieldText,{[eu().truncated]:!n&&!o,[eu().wrapped]:n,[eu().chart]:o}),children:(0,r.jsxs)(er.A,{width:20*w+4*(w-1),position:"top-start",offset:5,opened:c,portalProps:{target:s??void 0},closeOnClickOutside:!1,clickOutsideEvents:[],children:[(0,r.jsx)(er.A.Target,{children:(0,r.jsx)("span",{onMouseEnter:y,onMouseLeave:_,onClick:j,tabIndex:-1,"aria-hidden":"true",style:{cursor:"pointer"},children:e})}),(0,r.jsx)(er.A.Dropdown,{style:{pointerEvents:"auto"},onMouseEnter:y,onMouseLeave:_,className:eu().fieldTextPopover,children:(0,r.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,r.jsx)(em,{onClick:S,variant:"copy",isActive:m,title:m?"Copied!":"Copy field value",children:(0,r.jsx)(ea.A,{size:14})}),v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(em,{onClick:()=>{v&&(b(i,"string"==typeof t?t:String(t??""),"include"),j())},variant:"copy",title:"Toggle filter for this value",children:(0,r.jsx)(ei.A,{size:14})}),(0,r.jsx)(em,{onClick:()=>{v&&(b(i,"string"==typeof t?t:String(t??""),"exclude"),j())},variant:"copy",title:"Exclude this value",children:(0,r.jsx)(el.A,{size:14})})]})]})})]})})};var ep=s(56795);let ex=({row:e,getRowWhere:t,sourceId:s,isWrapped:n,onToggleWrap:i})=>{let[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),u=async()=>{try{let{[Y.ZO.ID]:t,...s}=e,r=Object.entries(s).reduce((e,[t,s])=>{if("string"==typeof s&&s.startsWith("{")||s.startsWith("["))try{e[t]=JSON.parse(s)}catch{e[t]=s}else e[t]=s;return e},{}),n=JSON.stringify(r,null,2);await navigator.clipboard.writeText(n),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy row data to clipboard:",e)}},m=async()=>{try{let r=t(e),n=new URL(window.location.href);n.searchParams.set("rowWhere",r.where),s&&n.searchParams.set("rowSource",s),await navigator.clipboard.writeText(n.toString()),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error("Failed to copy URL to clipboard:",e)}};return(0,r.jsxs)("div",{className:eu().rowButtons,children:[!n&&(0,r.jsx)(em,{onClick:i,variant:"copy",title:"Wrap All Lines",children:(0,r.jsx)(D.A,{size:16})}),(0,r.jsx)(em,{onClick:u,variant:"copy",isActive:l,title:l?"Copied entire row as JSON!":"Copy entire row as JSON",children:(0,r.jsx)(ea.A,{size:16})}),(0,r.jsx)(em,{onClick:m,variant:"copy",isActive:c,title:c?"Copied shareable link!":"Copy shareable link to this specific row",children:(0,r.jsx)(ep.A,{size:16})})]})};var eg=s(48423),ef=s(22623),eb=s(59029),ev=s(74011),ey=s(97767),e_=s(67872);let ej=({searchQuery:e,onSearchChange:t,matchIndices:s,currentMatchIndex:n,onPreviousMatch:i,onNextMatch:l,isVisible:o,onVisibilityChange:c,containerRef:d})=>{let[u,m]=(0,a.useState)(!1),h=(0,a.useRef)(null),p=o??u,x=(0,a.useCallback)(()=>{void 0!==o?c?.(!1):m(!1),t("")},[o,t,c]),g=(0,a.useCallback)(()=>{void 0!==o?c?.(!0):m(!0),setTimeout(()=>{h.current?.focus(),h.current?.select()},0)},[o,c]),f=(0,a.useCallback)(e=>{if((e.metaKey||e.ctrlKey)&&"f"===e.key){if(d&&!(0,es.dS)(d))return;e.preventDefault(),g()}"Escape"===e.key&&p&&x()},[p,x,g]);(0,a.useEffect)(()=>(window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}),[f]);let b=(0,a.useCallback)(e=>{"Enter"===e.key&&s.length>0&&(e.shiftKey?i():l(),e.preventDefault())},[s.length,i,l]);return p?(0,r.jsx)(ef.t,{p:"xs",withBorder:!0,shadow:"md",pos:"absolute",top:8,right:8,style:{zIndex:2},miw:400,maw:500,role:"search","aria-label":"Table search",children:(0,r.jsxs)(N.Y,{gap:"xs",align:"center",wrap:"nowrap",children:[(0,r.jsx)(eb.k,{ref:h,placeholder:"Find in table...",value:e,onChange:e=>t(e.target.value),onKeyDown:b,size:"xs",style:{flex:1,minWidth:0},"aria-label":"Search table contents","aria-describedby":s.length>0?"search-match-count":void 0,rightSection:e?(0,r.jsx)(k.N,{onClick:()=>t(""),display:"flex",style:{alignItems:"center"},title:"Clear search","aria-label":"Clear search",children:(0,r.jsx)(ev.A,{size:14})}):null}),s.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(T.E,{id:"search-match-count",size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},"aria-live":"polite",children:[n+1," of ",s.length]}),(0,r.jsxs)(N.Y,{gap:4,children:[(0,r.jsx)(k.N,{onClick:i,display:"flex",style:{alignItems:"center"},title:"Previous match (Shift+Enter)","aria-label":"Previous match",children:(0,r.jsx)(ey.A,{size:16})}),(0,r.jsx)(k.N,{onClick:l,display:"flex",style:{alignItems:"center"},title:"Next match (Enter)","aria-label":"Next match",children:(0,r.jsx)(e_.A,{size:16})})]})]}):e?(0,r.jsx)(T.E,{size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},role:"status","aria-live":"polite",children:"No matches"}):null,(0,r.jsx)(k.N,{onClick:x,display:"flex",style:{alignItems:"center"},title:"Close search (Esc)","aria-label":"Close search",children:(0,r.jsx)(ev.A,{size:16})})]})}):null},eS=e=>{let t,s,a,i=(0,n.c)(17),{searchQuery:l,matchIndices:o,currentMatchIndex:c,dedupedRows:d,tableRows:u,getRowId:m,onMatchClick:h}=e;if(!l||0===o.length||0===u.length)return null;if(i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",zIndex:1},i[0]=t):t=i[0],i[1]!==c||i[2]!==d||i[3]!==m||i[4]!==o||i[5]!==h||i[6]!==u){let e;i[8]!==c||i[9]!==d||i[10]!==m||i[11]!==o.length||i[12]!==h||i[13]!==u?(e=(e,t)=>{let s=d[e];if(!s)return null;let n=u.findIndex(e=>m(e.original)===m(s));if(-1===n)return null;let a=n/u.length*100,i=100/u.length,l=t===c;return(0,r.jsx)(C.a,{pos:"absolute",top:`${a}%`,right:0,w:"100%",h:`${i}%`,bg:l?"var(--mantine-color-orange-5)":"var(--mantine-color-yellow-5)",style:{cursor:"pointer",pointerEvents:"auto",minHeight:1,maxHeight:4},onClick:()=>h(t),title:`Match ${t+1} of ${o.length}`},`match-indicator-${e}`)},i[8]=c,i[9]=d,i[10]=m,i[11]=o.length,i[12]=h,i[13]=u,i[14]=e):e=i[14],s=o.map(e),i[1]=c,i[2]=d,i[3]=m,i[4]=o,i[5]=h,i[6]=u,i[7]=s}else s=i[7];return i[15]!==s?(a=(0,r.jsx)(C.a,{pos:"absolute",right:0,top:0,bottom:0,w:8,style:t,children:s}),i[15]=s,i[16]=a):a=i[16],a};var ew=s(88339),eE=s(17421),eC=s(41038),eN=s(81055),ek=s(70114);let eA=(0,a.memo)(e=>{let t,s,a,i,o,c=(0,n.c)(17),{columnsLength:d,children:u,virtualKey:m,source:h,rowId:p,measureElement:x,virtualIndex:g}=e,f=(()=>{let e,t=(0,n.c)(3),[,s]=(0,eC.ZA)("rowWhere"),[,r]=(0,eC.ZA)("rowSource");return t[0]!==s||t[1]!==r?(e=(e,t)=>{s(e),r(t??null)},t[0]=s,t[1]=r,t[2]=e):e=t[2],e})(),b=`expanded-row-${p}`,v=`${m}-expanded`;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=l()("mx-2 mb-2 rounded",eu().expandedRowContent),c[0]=t):t=c[0],c[1]!==f||c[2]!==p||c[3]!==h?.id?(s=f&&(0,r.jsx)("button",{type:"button",className:l()("position-absolute top-0 end-0 mt-1 me-1 p-1 border-0 bg-transparent text-muted rounded",eu().expandButton),onClick:()=>f(p,h?.id),title:"Open in sidebar","aria-label":"Open in sidebar",style:{zIndex:1,fontSize:"12px",lineHeight:1},children:(0,r.jsx)(eN.A,{size:14})}),c[1]=f,c[2]=p,c[3]=h?.id,c[4]=s):s=c[4],c[5]!==u||c[6]!==s?(a=(0,r.jsx)("div",{className:t,children:(0,r.jsx)("div",{className:"position-relative",children:(0,r.jsxs)("div",{className:"px-3 pt-2 position-relative",children:[s,u]})})}),c[5]=u,c[6]=s,c[7]=a):a=c[7],c[8]!==d||c[9]!==a?(i=(0,r.jsx)("td",{colSpan:d,className:"p-0 border-0",children:a}),c[8]=d,c[9]=a,c[10]=i):i=c[10],c[11]!==x||c[12]!==b||c[13]!==v||c[14]!==i||c[15]!==g?(o=(0,r.jsx)("tr",{"data-testid":b,className:eu().expandedRow,"data-index":g,ref:x,children:i},v),c[11]=x,c[12]=b,c[13]=v,c[14]=i,c[15]=g,c[16]=o):o=c[16],o}),eT=(0,a.memo)(e=>{let t,s,a,i,o,c,d=(0,n.c)(16),{rowId:u,isExpanded:m,highlightedLineId:h,toggleRowExpansion:p}=e,x=h===u,g=h!==u;d[0]!==m||d[1]!==x||d[2]!==g?(t=l()(eu().expandButton,{[eu().expanded]:m,"text-brand":x,"text-muted":g}),d[0]=m,d[1]=x,d[2]=g,d[3]=t):t=d[3],d[4]!==u||d[5]!==p?(s=e=>{e.stopPropagation(),p(u)},d[4]=u,d[5]=p,d[6]=s):s=d[6];let f=`${m?"Collapse":"Expand"} log details`;return d[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(ek.A,{size:16}),d[7]=a):a=d[7],d[8]!==m||d[9]!==t||d[10]!==s||d[11]!==f?(i=(0,r.jsx)("button",{type:"button",className:t,onClick:s,"aria-expanded":m,"aria-label":f,children:a}),d[8]=m,d[9]=t,d[10]=s,d[11]=f,d[12]=i):i=d[12],d[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("span",{className:eu().expandButtonSeparator}),d[13]=o):o=d[13],d[14]!==i?(c=(0,r.jsxs)("span",{className:"d-flex align-items-center justify-content-center",children:[i,o]}),d[14]=i,d[15]=c):c=d[15],c});eT.displayName="ExpandButton";var e$=s(61629);let eL="NULL",eI={duration:e=>e.duration>=0?e.duration:eL,severityText:e=>e.severityText??e.statusCode,default:(e,t)=>e[t]},eR=e=>e[Y.ZO.ID];function eM(e,t){return(eI[e]??eI.default)(t,e)}let eD=()=>null,ez=e=>{let t,s,a,i,l,o,c,d,u,m,h=(0,n.c)(17),{data:p,dateRange:x,color:j}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={position:"relative",width:"100%",height:"100%"},s={position:"absolute",left:0,right:0,bottom:0,top:0},h[0]=t,h[1]=s):(t=h[0],s=h[1]),h[2]===Symbol.for("react.memo_cache_sentinel")?(a={top:4,left:0,right:4,bottom:0},h[2]=a):a=h[2];let S=x[0].getTime()/1e3,w=x[1].getTime()/1e3;h[3]!==S||h[4]!==w?(i=[S,w],h[3]=S,h[4]=w,h[5]=i):i=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(l={fontSize:12,fontFamily:"IBM Plex Mono, monospace"},h[6]=l):l=h[6],h[7]!==i?(o=(0,r.jsx)(g.W,{dataKey:"bucket",domain:i,interval:"preserveStartEnd",scale:"time",type:"number",tickFormatter:eV,minTickGap:50,tick:l}),h[7]=i,h[8]=o):o=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(f.h,{width:40,minTickGap:25,tickFormatter:eH,tick:{fontSize:12,fontFamily:"IBM Plex Mono, monospace"}}),h[9]=c):c=h[9];let E=j||es.lm[0];return h[10]!==E?(d=(0,r.jsx)(b.y,{isAnimationActive:!1,dataKey:"count",stackId:"a",fill:E,maxBarSize:24}),h[10]=E,h[11]=d):d=h[11],h[12]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)(v.m,{content:(0,r.jsx)(eD,{})}),h[12]=u):u=h[12],h[13]!==p||h[14]!==d||h[15]!==o?(m=(0,r.jsx)("div",{style:t,children:(0,r.jsx)("div",{style:s,children:(0,r.jsx)(y.u,{width:"100%",height:"100%",minWidth:0,children:(0,r.jsxs)(_.E,{width:500,height:300,data:p,syncId:"hdx",syncMethod:"value",margin:a,children:[o,c,d,u]})})})}),h[13]=p,h[14]=d,h[15]=o,h[16]=m):m=h[16],m},eF=e=>{let t,s,a,i,l=(0,n.c)(12),{opened:o,onClose:c,config:d}=e;l[0]!==d?(t=["SqlModal",d],l[0]=d,l[1]=t):t=l[1],l[2]!==o||l[3]!==t?(s={queryKey:t,placeholderData:eB,enabled:o},l[2]=o,l[3]=t,l[4]=s):s=l[4];let{data:u,isLoading:m}=(0,W.zu)(d,s);return l[5]!==m||l[6]!==u?(a=u?(0,r.jsx)(ew.V,{data:u,enableCopy:!0}):m?(0,r.jsxs)("div",{className:"text-center my-2",children:[(0,r.jsx)("div",{className:"d-inline-block me-2",children:(0,r.jsx)(L.A,{size:14,className:"spin-animate"})}),"Loading SQL..."]}):(0,r.jsx)("div",{className:"text-center my-2",children:"No SQL available"}),l[5]=m,l[6]=u,l[7]=a):a=l[7],l[8]!==c||l[9]!==o||l[10]!==a?(i=(0,r.jsx)(w.a,{opened:o,onClose:c,title:"Generated SQL",size:"auto",children:a}),l[8]=c,l[9]=o,l[10]=a,l[11]=i):i=l[11],i},eP=(0,a.memo)(({tableId:e,displayedColumns:t,fetchNextPage:s,hasNextPage:i,highlightedLineId:c,isLive:u,isLoading:h,rows:p,generateRowId:g,onInstructionsClick:f,onRowDetailsClick:b,onScroll:v,onSettingsClick:y,onShowPatternsClick:_,wrapLines:S=!1,columnNameMap:w,showServiceColumn:P=!0,dedupRows:H,isError:B,error:J,columnTypeMap:G,dateRange:U,loadingDate:Z,config:er,onChildModalOpen:en,renderRowDetails:ea,source:ei,onExpandedRowsChange:el,collapseAllRows:eo,enableSorting:ec=!1,onSortingChange:ed,sortOrder:em,showExpandButton:ep=!0,getRowWhere:ef,variant:eb="default"})=>{let ev=(0,a.useMemo)(()=>{let e=new Set;return(H?p.filter(t=>{let s=g(t);return!e.has(s.where)&&(e.add(s.where),!0)}):p).map(e=>{let t=g(e);return{...e,[Y.ZO.ID]:t.where,[Y.ZO.ALIAS_WITH]:t.aliasWith}})},[p,H,g]),ey=(0,a.useCallback)(e=>{b?.(e)},[b]),{userPreferences:{isUTC:e_}}=(0,et.HW)(),[eC,eN]=(0,es.Mj)(`${e}-column-sizes`,{}),[ek,eI]=(0,a.useState)(null),eD=(0,a.useCallback)(e=>(e&&eI(e),()=>{eI(null)}),[]),{data:eP}=(0,W.Kc)(er),eq=(0,es.ZC)(u);(0,a.useEffect)(()=>{u&&!1===eq&&null!=ek&&(ek.scrollTop=0)},[u,eq,ek]);let eO=(0,a.useMemo)(()=>(function(e){let t={},s=Math.min(e.length,100);for(let r=0;r<s;r++){let s=e[r];Object.keys(s).forEach(e=>{let r=s[e];(r?.length||0)>0&&512>(r?.length||0)&&d()(r)&&null!=(0,es.lO)(r)&&(t[e]=(t[e]??0)+1)})}let r=0,n="";for(let[e,s]of Object.entries(t))s>r&&(r=s,n=e);if(r>0)return n})(ev),[ev]),{csvData:eV,maxRows:eH,isLimited:eB}=(0,K.u)(ev,t.map(e=>({dataKey:e,displayName:w?.[e]??e}))),{expandedRows:eW,toggleRowExpansion:eK,collapseAllRows:eJ}=(e=>{let t,s,r,i,l=(0,n.c)(9);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={},l[0]=t):t=l[0];let[o,c]=(0,a.useState)(t);l[1]!==e?(s=t=>{c(s=>{let r={...s,[t]:!s[t]},n=Object.values(r).some(Boolean);return e?.(n),r})},l[1]=e,l[2]=s):s=l[2];let d=s;l[3]!==e?(r=()=>{c({}),e?.(!1)},l[3]=e,l[4]=r):r=l[4];let u=r;return l[5]!==u||l[6]!==o||l[7]!==d?(i={expandedRows:o,toggleRowExpansion:d,collapseAllRows:u},l[5]=u,l[6]=o,l[7]=d,l[8]=i):i=l[8],i})(el);(0,a.useEffect)(()=>{eo&&eJ()},[eo,eJ]);let eG=function({rows:e,searchableColumns:t,debounceMs:s=300,onVisibilityChange:r}){let[n,i]=(0,a.useState)(""),[l]=(0,Q.o)(n,s),[o,c]=(0,a.useState)(0),[d,u]=(0,a.useState)([]),[m,h]=(0,a.useState)(!1),p=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(!l.trim()){u([]),c(0);return}let s=l.toLowerCase(),r=[];e.forEach((e,n)=>{t.map(t=>{let s=e[t];return null!=s?String(s).toLowerCase():""}).join(" ").includes(s)&&r.push(n)});let n=d.length;u(r),0===n&&r.length>0?(c(0),p.current=!0):r.length>0&&o>=r.length&&(c(r.length-1),p.current=!0)},[l,e,t]),(0,a.useEffect)(()=>{r?.(m)},[m,r]);let x=(0,a.useCallback)(e=>{i(e),e||(u([]),c(0),p.current=!1)},[]),g=(0,a.useCallback)(()=>{p.current=!0,c(e=>e>0?e-1:d.length-1)},[d.length]),f=(0,a.useCallback)(()=>{p.current=!0,c(e=>e<d.length-1?e+1:0)},[d.length]),b=(0,a.useCallback)(e=>{p.current=!0,c(e)},[]),v=(0,a.useCallback)(()=>{i(""),u([]),c(0),p.current=!1,h(!1)},[]),y=(0,a.useCallback)(()=>{p.current=!1},[]);return{searchQuery:l,inputValue:n,setInputValue:i,matchIndices:d,currentMatchIndex:o,isSearchVisible:m,setIsSearchVisible:h,shouldScrollToMatch:p.current,clearShouldScrollToMatch:y,handlePreviousMatch:g,handleNextMatch:f,handleMatchClick:b,handleSearchChange:x,resetSearch:v}}({rows:ev,searchableColumns:t,debounceMs:300}),eU=(0,a.useMemo)(()=>[...ep?[{id:"expand-btn",accessorKey:Y.ZO.ID,header:()=>"",cell:e=>{let t=e.getValue(),s=eW[t]??!1;return(0,r.jsx)(eT,{rowId:t,isExpanded:s,highlightedLineId:c,toggleRowExpansion:eK})},size:32,enableResizing:!1,enableSorting:!1,meta:{className:"text-center"}}]:[],...t.map((e,s)=>{let n=G.get(e)?._type,a=n===j.A2.Date,i=e===eO;return{meta:{column:e,jsColumnType:n},id:eP?.[e]?`"${e}"`:e,enableSorting:n!==j.A2.Dynamic,accessorFn:m()(eM)(e),header:`${w?.[e]??e}${a?e_?" (UTC)":" (Local)":""}`,cell:t=>{let s=t.getValue();if("__hdx_pattern_trend"===e)return(0,r.jsx)("div",{style:{height:50,width:"100%"},children:(0,r.jsx)(ez,{data:s.data,dateRange:s.dateRange,color:(0,es.aw)(t.row.original.severityText??t.row.original.statusCode)})});if(a){let e=new Date(s);return(0,r.jsx)("span",{className:"text-muted",children:(0,r.jsx)(ee.H,{value:e,format:"withMs"})})}let n="string"==typeof s?s:`${s}`;if(e===eO)return(0,r.jsx)(e$.A,{level:n});let i=n.length>500?`${n.slice(0,500)}...`:n,o=!!eG.searchQuery&&eG.matchIndices.length>0&&eG.matchIndices[eG.currentMatchIndex]===t.row.index,c=eG.searchQuery?((e,t,s={})=>{if(!t.trim())return e;let n=s.isCurrentMatch?s.currentMatchBackgroundColor||"var(--mantine-color-orange-5)":s.backgroundColor||"var(--mantine-color-yellow-3)",a=e.toLowerCase(),i=t.toLowerCase(),l=[],o=0,c=a.indexOf(i);for(;-1!==c;)c>o&&l.push(e.slice(o,c)),l.push((0,r.jsx)("mark",{style:{backgroundColor:n,color:s.textColor||"var(--color-text-inverted)",padding:0},children:e.slice(c,c+t.length)},`${c}-${o}`)),o=c+t.length,c=a.indexOf(i,o);return o<e.length&&l.push(e.slice(o)),l.length>0?(0,r.jsx)(r.Fragment,{children:l}):e})(i,eG.searchQuery,{isCurrentMatch:o}):i;return(0,r.jsx)("span",{className:l()({"text-muted":s===eL}),children:c})},size:s===t.length-1?X.k:eC[e]??(a?170:i?115:160)}})],[e_,c,t,eC,w,G,eO,eW,eK,ep,eP,eG.searchQuery,eG.matchIndices,eG.currentMatchIndex]),eY=(0,a.useCallback)(e=>{if(e){let{scrollHeight:t,scrollTop:r,clientHeight:n}=e;t-r-n<500&&!h&&i&&s?.({cancelRefetch:!1})}},[s,h,i]);(0,a.useEffect)(()=>{eY(ek)},[eY,ek]);let eQ=(0,a.useMemo)(()=>{let t={data:ev,columns:eU,getCoreRowModel:(0,q.HT)(),enableSorting:ec,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(em??[]);ed?.(t??null)}else ed?.(e??null)},state:{sorting:em??[]},enableColumnResizing:!0,columnResizeMode:"onChange"};return e?{...t,state:{columnSizing:eC},onColumnSizingChange:e=>{let t=e instanceof Function?e():e;eN({...eC,...t})}}:t},[eU,ev,e,em,ec,ed,eC,eN]),eZ=(0,O.N4)(eQ),{rows:eX}=eZ.getRowModel(),e0=(0,V.Te)({count:eX.length,getScrollElement:(0,a.useCallback)(()=>ek,[ek]),estimateSize:(0,a.useCallback)(()=>23,[]),overscan:30,paddingEnd:20}),e1=e0.getVirtualItems(),e2=e0.getTotalSize(),[e3,e5]=(0,a.useMemo)(()=>e1.length>0?[Math.max(0,e1[0].start-e0.options.scrollMargin),Math.max(0,e2-e1[e1.length-1].end)]:[0,0],[e1,e0.options.scrollMargin,e2]),[e4,e6]=(0,a.useState)(!1),[e7,e9]=(0,es.Mj)(`${e}-wrap-lines`,S??!1),[e8,te]=(0,a.useState)(!1),tt=e=>{te(e),en?.(e)};(0,a.useEffect)(()=>{if(eG.shouldScrollToMatch)if(eG.matchIndices.length>0&&e0&&eG.currentMatchIndex<eG.matchIndices.length&&eG.searchQuery.trim()){let e=ev[eG.matchIndices[eG.currentMatchIndex]];if(e){let t=eX.findIndex(t=>eR(t.original)===eR(e));-1!==t?requestAnimationFrame(()=>{e0.scrollToIndex(t,{align:"center"}),eG.clearShouldScrollToMatch()}):eG.clearShouldScrollToMatch()}else eG.clearShouldScrollToMatch()}else eG.clearShouldScrollToMatch()},[eG.shouldScrollToMatch,eG.currentMatchIndex,eG.matchIndices,eG.searchQuery,eG.clearShouldScrollToMatch,e0,eX,ev]),(0,a.useEffect)(()=>{if(e4||!c||null==e0)return;let e=ev.findIndex(e=>eR(e)===c);-1==e&&c?ev.length<1e3&&!h&&i&&s?.({cancelRefetch:!1}):(e6(!0),null==e0.getVirtualItems().find(t=>t.index===e)&&e0.scrollToIndex(e,{align:"center"}))},[ev,c,s,e0,e4,h,i]);let ts=(0,a.useCallback)(e=>{if(null==c)return;let t=ev.findIndex(e=>eR(e)===c)+e;t<0||t>=ev.length||ey(ev[t])},[c,ey,ev]);return(0,x.vC)(["ArrowRight","ArrowDown","j"],e=>{e.preventDefault(),ts(1)}),(0,x.vC)(["ArrowLeft","ArrowUp","k"],e=>{e.preventDefault(),ts(-1)}),(0,r.jsx)(E.s,{direction:"column",h:"100%",children:(0,r.jsxs)(C.a,{pos:"relative",style:{flex:1,minHeight:0},children:[(0,r.jsx)(ej,{searchQuery:eG.inputValue,onSearchChange:eG.handleSearchChange,matchIndices:eG.matchIndices,currentMatchIndex:eG.currentMatchIndex,onPreviousMatch:eG.handlePreviousMatch,onNextMatch:eG.handleNextMatch,isVisible:eG.isSearchVisible,onVisibilityChange:eG.setIsSearchVisible,containerRef:ek}),(0,r.jsxs)("div",{"data-testid":"search-results-table",className:l()("overflow-auto h-100 fs-8",eu().tableWrapper,{[eu().muted]:"muted"===eb}),onScroll:e=>{if(eY(e.target),null!=e.target){let{scrollTop:t}=e.target;v?.(t)}},ref:eD,children:[er&&(0,r.jsx)(eF,{opened:e8,onClose:()=>tt(!1),config:er}),(0,r.jsxs)("table",{className:l()("w-100",eu().table),id:e,children:[(0,r.jsx)("thead",{className:eu().tableHead,children:t.length>0&&eZ.getHeaderGroups().map(t=>(0,r.jsx)("tr",{children:t.headers.map((s,n)=>{let a=n===t.headers.length-1;return(0,r.jsx)(eg.A,{header:s,isLast:a,lastItemButtons:(0,r.jsxs)(N.Y,{gap:8,mr:8,children:[e&&Object.keys(eC).length>0&&(0,r.jsx)(k.N,{onClick:()=>eN({}),title:"Reset Column Widths",children:(0,r.jsx)(A.m,{label:"Reset Column Widths",children:(0,r.jsx)(I.A,{size:16})})}),er&&(0,r.jsx)(k.N,{onClick:()=>tt(!0),title:"Show Generated SQL",tabIndex:0,children:(0,r.jsx)(A.m,{label:"Show Generated SQL",children:(0,r.jsx)(R.A,{size:16})})}),(0,r.jsx)(k.N,{onClick:()=>e9(e=>!e),title:`${e7?"Disable":"Enable"}  Wrap Lines`,children:(0,r.jsx)(A.m,{label:`${e7?"Disable":"Enable"} Wrap Lines`,children:e7?(0,r.jsx)(M.A,{size:16}):(0,r.jsx)(D.A,{size:16})})}),(0,r.jsx)(eE.P,{data:eV,filename:`hyperdx_search_results_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}`,className:"fs-6",children:(0,r.jsx)(A.m,{label:`Download Table as CSV (max ${eH.toLocaleString()} rows)${eB?" - data truncated":""}`,children:(0,r.jsx)(z.A,{size:16})})}),null!=y&&(0,r.jsx)(k.N,{onClick:()=>y(),title:"Settings",children:(0,r.jsx)(A.m,{label:"Settings",children:(0,r.jsx)(F.A,{size:16})})})]})},s.id)})},t.id))}),(0,r.jsxs)("tbody",{children:[e3>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${e3}px`}})}),e1.map(e=>{let t=eX[e.index],s=eR(t.original),n=eW[s]??!1;return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("tr",{"data-testid":`table-row-${s}`,className:l()(eu().tableRow,{[eu().tableRow__selected]:c&&c===s}),"data-index":e.index,ref:e0.measureElement,children:[ep&&(0,r.jsx)("td",{className:"align-top overflow-hidden",style:{width:"40px"},children:(0,O.Kv)(t.getVisibleCells()[0].column.columnDef.cell,t.getVisibleCells()[0].getContext())}),(0,r.jsx)("td",{className:"align-top overflow-hidden p-0",colSpan:eU.length-!!ep,children:(0,r.jsxs)("button",{type:"button",className:l()(eu().rowContentButton,{[eu().isWrapped]:e7,[eu().isTruncated]:!e7}),onClick:e=>{ey(t.original)},"aria-label":"View details for log entry",children:[t.getVisibleCells().slice(+!!ep).map(e=>{let t=e.column.columnDef.meta?.className,s=e.column.getSize(),n=e.getValue();return(0,r.jsx)("div",{className:l()("flex-shrink-0 overflow-hidden position-relative",t),style:{width:s===X.k?"auto":`${s}px`,flex:s===X.k?"1":"none"},children:(0,r.jsx)("div",{className:eu().fieldTextContainer,children:(0,r.jsx)(eh,{cellValue:n,wrapLinesEnabled:e7,tableContainerRef:ek,columnName:e.column.columnDef.meta?.column,isChart:e.column.columnDef.meta?.column==="__hdx_pattern_trend",children:(0,O.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)}),ef&&(0,r.jsx)(ex,{row:t.original,getRowWhere:ef,sourceId:ei?.id,isWrapped:e7,onToggleWrap:()=>e9(!e7)})]})})]}),ep&&n&&(0,r.jsx)(eA,{columnsLength:eU.length,virtualKey:e.key.toString(),source:ei,rowId:s,measureElement:e0.measureElement,virtualIndex:e.index,children:ea?.({id:s,aliasWith:t.original[Y.ZO.ALIAS_WITH],...t.original})})]},e.key)}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:800,children:(0,r.jsx)("div",{className:"rounded fs-7 bg-muted text-center d-flex align-items-center justify-content-center mt-3",children:h?(0,r.jsxs)("div",{className:"my-3",children:[(0,r.jsx)("div",{className:"d-inline-block",children:(0,r.jsx)(L.A,{size:14,className:"spin-animate"})})," ",null!=Z&&(0,r.jsxs)(r.Fragment,{children:["Searched ",(0,r.jsx)(ee.H,{value:Z}),"."," "]}),"Loading results",U?.[0]!=null&&U?.[1]!=null?(0,r.jsxs)(r.Fragment,{children:[" ","across"," ",(0,o.A)(U?.[1],U?.[0])," ","(",(0,r.jsx)(ee.H,{value:U?.[0],format:"withYear"})," ","to"," ",(0,r.jsx)(ee.H,{value:U?.[1],format:"withYear"}),")"]}):null,"..."]}):!1==i&&!1==h&&ev.length>0?(0,r.jsx)("div",{className:"my-3",children:"End of Results"}):B?(0,r.jsxs)("div",{className:"my-3",children:[(0,r.jsx)(T.E,{ta:"center",size:"sm",children:"Error loading results, please check your query or try again."}),(0,r.jsxs)(C.a,{p:"sm",children:[(0,r.jsx)(C.a,{mt:"sm",children:(0,r.jsx)($.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:J?.message})}),J instanceof j.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(E.s,{w:"100%",ta:"initial",align:"center",justify:"center",children:(0,r.jsx)(ew.V,{data:J?.query})})]})]})]}):!1==i&&!1==h&&0===ev.length?(0,r.jsxs)("div",{className:"my-3","data-testid":"db-row-table-no-results",children:["No results found.",(0,r.jsx)(T.E,{mt:"sm",children:"Try checking the query explainer in the search bar if there are any search syntax issues."}),U?.[0]!=null&&U?.[1]!=null?(0,r.jsxs)(T.E,{mt:"sm",children:["Searched Time Range:"," ",(0,o.A)(U?.[1],U?.[0])," ","(",(0,r.jsx)(ee.H,{value:U?.[0],format:"withYear"})," ","to"," ",(0,r.jsx)(ee.H,{value:U?.[1],format:"withYear"}),")"]}):null]}):(0,r.jsx)("div",{})})})}),e5>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${e5}px`}})})]})]})]}),(0,r.jsx)(eS,{searchQuery:eG.searchQuery,matchIndices:eG.matchIndices,currentMatchIndex:eG.currentMatchIndex,dedupedRows:ev,tableRows:eX,getRowId:eR,onMatchClick:eG.handleMatchClick})]})})});function eq(e){let t,s,r=(0,n.c)(12);r[0]!==e.connection||r[1]!==e.from.databaseName||r[2]!==e.from.tableName?(t={databaseName:e.from.databaseName,tableName:e.from.tableName,connectionId:e.connection},r[0]=e.connection,r[1]=e.from.databaseName,r[2]=e.from.tableName,r[3]=t):t=r[3];let{data:a}=(0,J.Z2)(t),i=a?.primary_key,l=a?.partition_key;e:{let t,n;if(null==i||null==l){s=void 0;break e}r[4]!==e.select||r[5]!==l||r[6]!==i?(t=function(e,t,s){let r=new Set([...(0,j.bZ)(s),...(0,j.bZ)(t)]);if("string"==typeof e){let t=new Set((0,S.AB)(e)),s=[...r].filter(e=>!t.has(e));return{select:[...t,...s].join(","),additionalKeysLength:s.length}}{let t=[...r].map(e=>({valueExpression:e}));return{select:[...e,...t],additionalKeysLength:t.length}}}(e.select,i,l),r[4]=e.select,r[5]=l,r[6]=i,r[7]=t):t=r[7];let{select:a,additionalKeysLength:o}=t;r[8]!==o||r[9]!==e||r[10]!==a?(n={...e,select:a,additionalKeysLength:o},r[8]=o,r[9]=e,r[10]=a,r[11]=n):n=r[11],s=n}return s}let eO=(0,a.memo)(function({config:e,sourceId:t,onError:s,onRowDetailsClick:n,highlightedLineId:i,enabled:l=!0,isLive:o=!1,queryKeyPrefix:c,onScroll:d,denoiseResults:u=!1,onChildModalOpen:m,onExpandedRowsChange:h,collapseAllRows:x,showExpandButton:g=!0,renderRowDetails:f,onSortingChange:b,initialSortBy:v,variant:y="default"}){var _;let{data:S}=H.Ay.useMe(),[w,E]=(0,a.useState)(v?.[0]??null),N=(0,a.useMemo)(()=>w?[w]:[],[w]),k=(0,a.useCallback)(e=>{b?.(e),E(e?.[0]??null)},[E,b]),A=(0,es.ZC)(t);(0,a.useEffect)(()=>{A&&A!==t&&k(null)},[t]);let $=(0,es.ZC)(v);(0,a.useEffect)(()=>{let e=v?.[0]??null,t=$?.[0]??null;JSON.stringify(e)!==JSON.stringify(t)&&E(e)},[v,$]);let L=(0,a.useMemo)(()=>{let t={...(0,B.Nz)(S?.team),...e};return N.length&&(t.orderBy=N.map(e=>({valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}))),t},[S,e,N]),I=eq(L),{data:R,fetchNextPage:M,hasNextPage:D,isFetching:z,isError:F,error:q}=(0,G.A)(I??e,{enabled:l&&null!=I&&("string"==typeof(_=e.select)?_.split(",").filter(e=>e.trim().length>0).length:_.length)>0,isLive:o,queryKeyPrefix:c}),O=(0,a.useMemo)(()=>(function(e,t){if(null==e||null==t)return new Map;let s=e.slice(0,e.length-t);return new Map(s?.map(e=>[e.name,{...e,_type:(0,j.rj)(e.type)}]))})(R?.meta,I?.additionalKeysLength),[R,I]),V=(0,a.useMemo)(()=>Array.from(O.keys()),[O]),W=(0,a.useMemo)(()=>V.filter(e=>{let t=O.get(e)?._type;return(0,j.Zo)(t)}),[V,O]),K=(0,a.useMemo)(()=>(R?.data??[]).map(e=>{let t={...e};return W.forEach(s=>{O.get(s)?._type===j.A2.JSON?t[s]=JSON.stringify(e[s]).replace(/\//g,"\\/"):t[s]=JSON.stringify(e[s])}),t}),[R,W,O]),J=(0,a.useMemo)(()=>(0,j.D7)(R?.chSql??{sql:"",params:{}}),[R]),Q=(0,Y.Ay)({meta:R?.meta,aliasMap:J}),X=(0,a.useCallback)(e=>n?.(Q(e)),[n,Q]);(0,a.useEffect)(()=>{F&&s&&q&&s(q)},[F,s,q]);let{data:ee}=(0,Z.Fo)({id:t}),et=V[V.length-1],er=(0,U.nt)({config:e,samples:1e4,bodyValueExpression:et??"",severityTextExpression:ee?.severityTextExpression??"",totalCount:void 0,enabled:u}),en=(0,P.I)({queryKey:["noisy-patterns",e],queryFn:async()=>Object.values(er.data).filter(e=>e.count/(er.sampledRowCount??1)>.1),enabled:u&&null!=er.data&&Object.values(er.data).length>0&&null!=er.miner}),ea=(0,a.useMemo)(()=>en.data?.map(e=>e.id)??[],[en.data]),ei=(0,P.I)({queryKey:["denoised-rows",e,u,...u?[K]:[],ea,et],queryFn:async()=>{if(!u)return[];if(0===ea.length)return K;let e=await er.miner?.matchLogs(K.map(e=>e[et]));return K.filter((t,s)=>{let r=e?.[s];return!ea.includes(`${r}`)})},placeholderData:(t,s)=>{if(s?.queryKey?.[0]==="denoised-rows"&&s?.queryKey?.[1]===e)return t},gcTime:o?p()("30s"):p()("5m"),enabled:u&&en.isSuccess&&K.length>0&&null!=er.miner}),el=u?z||ei.isFetching||en.isFetching||er.isLoading:z,eo=R?.window?.direction==="ASC"?R?.window?.endTime:R?.window?.startTime;return(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsxs)(C.a,{mb:"xxs",px:"sm",children:[(0,r.jsx)(T.E,{fw:"bold",fz:"xs",mb:"xxs",children:"Removed Noisy Event Patterns"}),(0,r.jsxs)(C.a,{mah:100,style:{overflow:"auto"},children:[en.data?.map(e=>(0,r.jsx)(T.E,{fz:"xs",children:e.pattern},e.id)),0===ea.length&&(0,r.jsx)(T.E,{fz:"xs",children:"No noisy patterns found"})]})]}),(0,r.jsx)(eP,{isLive:o,wrapLines:!1,displayedColumns:V,highlightedLineId:i,rows:u?ei?.data??[]:K,renderRowDetails:f,isLoading:el,fetchNextPage:M,hasNextPage:D,onRowDetailsClick:X,onScroll:d,generateRowId:Q,isError:F,error:q??void 0,columnTypeMap:O,dateRange:e.dateRange,loadingDate:eo,config:L,onChildModalOpen:m,source:ee,onExpandedRowsChange:h,collapseAllRows:x,showExpandButton:g,enableSorting:!0,onSortingChange:k,sortOrder:N,getRowWhere:Q,variant:y})]})});function eV(){return""}function eH(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function eB(e){return e??""}},50374:(e,t,s)=>{"use strict";s.d(t,{D:()=>e0,A:()=>e3});var r,n,a=s(6029),i=s(75155),l=s(55729),o=s(86508),c=s(84450),d=s.n(c),u=s(41038),m=s(7913),h=s(66692),p=s(82641),x=s(60481),g=s(78253),f=s(10174),b=s(34834),v=s(64441),y=s(24885);function _(e){let t,s,r,n=(0,i.c)(13),{hasLogSource:a}=e,[o,c]=(0,u.ZA)("traceWhere"),[d,m]=(0,u.ZA)("logWhere"),h=!!o||!!(a&&d),[p,x]=(0,l.useState)(h);n[0]!==m||n[1]!==c?(t=e=>{c(e.traceWhere||null),m(e.logWhere||null)},n[0]=m,n[1]=c,n[2]=t):t=n[2];let g=t;n[3]!==m||n[4]!==c?(s=()=>{c(null),m(null)},n[3]=m,n[4]=c,n[5]=s):s=n[5];let f=s;return n[6]!==f||n[7]!==h||n[8]!==p||n[9]!==d||n[10]!==g||n[11]!==o?(r={traceWhere:o,logWhere:d,isFilterActive:h,isFilterExpanded:p,setIsFilterExpanded:x,onSubmit:g,clear:f},n[6]=f,n[7]=h,n[8]=p,n[9]=d,n[10]=g,n[11]=o,n[12]=r):r=n[12],r}var j=s(78694),S=s(81973),w=s(96958),E=s(18006),C=s(26674),N=s(3635),k=s(43517),A=s(43085),T=s(98287);function $(e){let t,s,r,n,l=(0,i.c)(9),{traceId:o,dateRange:c,traceTableSourceId:d}=e;l[0]!==d?(t={id:d},l[0]=d,l[1]=t):t=l[1];let{data:u}=(0,S.Fo)(t);return l[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsxs)(N.Y,{gap:0,children:[(0,a.jsx)(k.E,{size:"sm",ps:"sm",children:"Service Map"}),(0,a.jsx)(A.E,{size:"xs",ms:"xs",color:"gray",autoContrast:!0,radius:"sm",children:"Beta"})]}),l[2]=s):s=l[2],l[3]!==c||l[4]!==o||l[5]!==u?(r=u?(0,a.jsx)(T.A,{traceTableSource:u,traceId:o,dateRange:c,isSingleTrace:!0}):null,l[3]=c,l[4]=o,l[5]=u,l[6]=r):r=l[6],l[7]!==r?(n=(0,a.jsxs)(b.B,{w:"100%",children:[s,r]}),l[7]=r,l[8]=n):n=l[8],n}var L=s(76539),I=s(43465),R=s(66631),M=s(76089),D=s(90124),z=s(62801),F=s(44595),P=s(53993),q=s(43152),O=s(40228),V=s(28450);let H=e=>{let t,s,r,n,c,d,u,m,h,p,x,g,f,b,v,y,_,j,S,w,E,C,k,A,T,$=(0,i.c)(73),{fieldPrefix:L,metricSource:P,timestamp:V,title:H,where:B}=e,[W,K]=(0,l.useState)("30m"),[J,G]=(0,l.useState)("sm");if($[0]!==W||$[1]!==V){let e={"30m":{minutes:15},"1h":{minutes:30},"1d":{hours:12}}[W];t=(0,I.A)(new Date(V),e),s=(0,R.A)([(0,o.A)(new Date(V),e),new Date]),$[0]=W,$[1]=V,$[2]=t,$[3]=s}else t=$[2],s=$[3];$[4]!==t||$[5]!==s?(r=[t,s],$[4]=t,$[5]=s,$[6]=r):r=$[6];let U=r;e:{switch(J){case"sm":{let e;$[7]===Symbol.for("react.memo_cache_sentinel")?(e={cols:3,height:200},$[7]=e):e=$[7],n=e;break e}case"md":{let e;$[8]===Symbol.for("react.memo_cache_sentinel")?(e={cols:2,height:250},$[8]=e):e=$[8],n=e;break e}case"lg":{let e;$[9]===Symbol.for("react.memo_cache_sentinel")?(e={cols:1,height:320},$[9]=e):e=$[9],n=e;break e}}n=void 0}let{cols:Y,height:Q}=n;$[10]!==U?(c=(0,M.tA)(U),$[10]=U,$[11]=c):c=$[11];let Z=c,X=`infra-subpanel-${L}`;$[12]!==H?(d=(0,a.jsx)("h4",{className:"fs-6 m-0",children:H}),$[12]=H,$[13]=d):d=$[13],$[14]===Symbol.for("react.memo_cache_sentinel")?(u=[{label:"30m",value:"30m"},{label:"1h",value:"1h"},{label:"1d",value:"1d"}],$[14]=u):u=$[14],$[15]===Symbol.for("react.memo_cache_sentinel")?(m=e=>K(e),$[15]=m):m=$[15],$[16]!==W?(h=(0,a.jsx)(D.I,{size:"xs",data:u,value:W,onChange:m}),$[16]=W,$[17]=h):h=$[17],$[18]!==h||$[19]!==d?(p=(0,a.jsxs)(N.Y,{align:"center",children:[d,h]}),$[18]=h,$[19]=d,$[20]=p):p=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(x=[{label:"SM",value:"sm"},{label:"MD",value:"md"},{label:"LG",value:"lg"}],$[21]=x):x=$[21],$[22]===Symbol.for("react.memo_cache_sentinel")?(g=e=>G(e),$[22]=g):g=$[22],$[23]!==J?(f=(0,a.jsx)(N.Y,{align:"center",children:(0,a.jsx)(D.I,{size:"xs",data:x,value:J,onChange:g})}),$[23]=J,$[24]=f):f=$[24],$[25]!==p||$[26]!==f?(b=(0,a.jsxs)(N.Y,{justify:"space-between",align:"center",children:[p,f]}),$[25]=p,$[26]=f,$[27]=b):b=$[27],$[28]!==U||$[29]!==L||$[30]!==Z||$[31]!==P||$[32]!==B?(v=(0,q.ik)({dateRange:U,granularity:Z,seriesReturnType:"column",series:[{type:"time",where:B,groupBy:[],aggFn:"avg",field:`${L}cpu.utilization - Gauge`,table:"metrics",numberFormat:q.p2}]},{metric:P}),$[28]=U,$[29]=L,$[30]=Z,$[31]=P,$[32]=B,$[33]=v):v=$[33];let ee=V/1e3;$[34]!==v||$[35]!==ee?(y=(0,a.jsx)(O.S,{title:"CPU Usage (%)",config:v,showDisplaySwitcher:!1,logReferenceTimestamp:ee}),$[34]=v,$[35]=ee,$[36]=y):y=$[36],$[37]!==Q||$[38]!==y?(_=(0,a.jsx)(z.Z,{"data-testid":"cpu-usage-card",children:(0,a.jsx)(z.Z.Section,{py:8,px:8,h:Q,children:y})}),$[37]=Q,$[38]=y,$[39]=_):_=$[39],$[40]!==U||$[41]!==L||$[42]!==Z||$[43]!==P||$[44]!==B?(j=(0,q.ik)({dateRange:U,granularity:Z,seriesReturnType:"column",series:[{type:"time",where:B,groupBy:[],aggFn:"avg",field:`${L}memory.usage - Gauge`,table:"metrics",numberFormat:q.JD}]},{metric:P}),$[40]=U,$[41]=L,$[42]=Z,$[43]=P,$[44]=B,$[45]=j):j=$[45];let et=V/1e3;$[46]!==j||$[47]!==et?(S=(0,a.jsx)(O.S,{title:"Memory Used",config:j,showDisplaySwitcher:!1,logReferenceTimestamp:et}),$[46]=j,$[47]=et,$[48]=S):S=$[48],$[49]!==Q||$[50]!==S?(w=(0,a.jsx)(z.Z,{"data-testid":"memory-usage-card",children:(0,a.jsx)(z.Z.Section,{py:8,px:8,h:Q,children:S})}),$[49]=Q,$[50]=S,$[51]=w):w=$[51],$[52]!==U||$[53]!==L||$[54]!==Z||$[55]!==P||$[56]!==B?(E=(0,q.ik)({dateRange:U,granularity:Z,seriesReturnType:"column",series:[{type:"time",where:B,groupBy:[],aggFn:"avg",field:`${L}filesystem.available - Gauge`,table:"metrics",numberFormat:q.nH}]},{metric:P}),$[52]=U,$[53]=L,$[54]=Z,$[55]=P,$[56]=B,$[57]=E):E=$[57];let es=V/1e3;return $[58]!==E||$[59]!==es?(C=(0,a.jsx)(O.S,{title:"Disk Available",config:E,showDisplaySwitcher:!1,logReferenceTimestamp:es}),$[58]=E,$[59]=es,$[60]=C):C=$[60],$[61]!==Q||$[62]!==C?(k=(0,a.jsx)(z.Z,{"data-testid":"disk-usage-card",children:(0,a.jsx)(z.Z.Section,{py:8,px:8,h:Q,children:C})}),$[61]=Q,$[62]=C,$[63]=k):k=$[63],$[64]!==Y||$[65]!==_||$[66]!==w||$[67]!==k?(A=(0,a.jsxs)(F.r,{mt:"md",cols:Y,children:[_,w,k]}),$[64]=Y,$[65]=_,$[66]=w,$[67]=k,$[68]=A):A=$[68],$[69]!==b||$[70]!==A||$[71]!==X?(T=(0,a.jsxs)("div",{"data-testid":X,children:[b,A]}),$[69]=b,$[70]=A,$[71]=X,$[72]=T):T=$[72],T},B=({rowData:e,rowId:t,source:s})=>{let{data:r}=(0,S.Fo)({id:s.metricSourceId}),n=e?.__hdx_resource_attributes["k8s.pod.uid"],i=e?.__hdx_resource_attributes["k8s.node.name"],l=new Date(e?.__hdx_timestamp).getTime();return(0,a.jsxs)(b.B,{my:"md",gap:40,children:[n&&(0,a.jsxs)("div",{children:[r&&(0,a.jsx)(H,{title:"Pod",where:`${r.resourceAttributesExpression}.k8s.pod.uid:"${n}"`,fieldPrefix:"k8s.pod.",timestamp:l,metricSource:r}),s&&(0,a.jsxs)(z.Z,{p:"md",mt:"xl",children:[(0,a.jsx)(z.Z.Section,{p:"md",py:"xs",children:"Pod Timeline"}),(0,a.jsx)(z.Z.Section,{children:(0,a.jsx)(P.F,{viewportProps:{style:{maxHeight:280}},children:(0,a.jsx)(x.a,{p:"md",py:"sm",children:(0,a.jsx)(V.FB,{logSource:s,q:`\`k8s.pod.uid\`:"${n}"`,dateRange:[(0,I.A)(new Date(l),{days:1}),(0,o.A)(new Date(l),{days:1})],anchorEvent:{label:(0,a.jsx)("div",{className:"text-brand",children:"This Event"}),timestamp:new Date(l).toISOString()}})})})})]})]}),i&&r&&(0,a.jsx)(H,{metricSource:r,title:"Node",where:`${r.resourceAttributesExpression}.k8s.node.name:"${i}"`,fieldPrefix:"k8s.node.",timestamp:l})]})};var W=s(37901),K=s(26837),J=s(82203),G=s.n(J),U=s(94720),Y=s(40147),Q=s(57030),Z=s(71434),X=s.n(Z),ee=s(1909),et=s(14262),es=s.n(et),er=s(3145),en=s(53061),ea=s(47268),ei=s(23935),el=s(24589),eo=s(92789),ec=s(70114),ed=s(23474),eu=s(54134),em=s(225),eh=s(78744),ep=s(70727),ex=s(43370),eg=s(75828),ef=s.n(eg),eb=s(63085),ev=s(21440),ey=s(7565),e_=s(92917),ej=s(83101),eS=s.n(ej),ew=s(20699),eE=s.n(ew);let eC=(0,l.memo)(function(e){let t,s,r,n,l,o,c,d,u,m,h,p,x,g,f=(0,i.c)(30),{marker:b,eventStart:v,eventEnd:y,height:_}=e,j=(0,ey.a)(),S=y-v,w=b.timestamp-v,E=S>0?w/S*100:0;f[0]!==b.attributes?(t=Object.entries(b.attributes),f[0]=b.attributes,f[1]=t):t=f[1];let C=t;f[2]!==j||f[3]!==b.timestamp?(s=j(new Date(b.timestamp),{format:"withMs"}),f[2]=j,f[3]=b.timestamp,f[4]=s):s=f[4],f[5]!==s?(r=(0,a.jsx)(k.E,{size:"xxs",c:"dimmed",mb:"xxs",children:s}),f[5]=s,f[6]=r):r=f[6],f[7]!==b.name?(n=(0,a.jsx)(k.E,{size:"xs",children:b.name}),f[7]=b.name,f[8]=n):n=f[8],f[9]!==C?(l=C.length>0&&(0,a.jsxs)("div",{style:{fontSize:10,marginTop:4},children:[C.slice(0,5).map(eI),C.length>5&&(0,a.jsxs)("div",{style:{fontStyle:"italic"},children:["...and ",C.length-5," more"]})]}),f[9]=C,f[10]=l):l=f[10],f[11]!==r||f[12]!==n||f[13]!==l?(o=(0,a.jsxs)("div",{children:[r,n,l]}),f[11]=r,f[12]=n,f[13]=l,f[14]=o):o=f[14];let N=o;f[15]===Symbol.for("react.memo_cache_sentinel")?(c={transition:"fade"},d={fontSize:11,maxWidth:350,wordBreak:"break-word"},f[15]=c,f[16]=d):(c=f[15],d=f[16]),f[17]!==E?(u=E.toFixed(6),f[17]=E,f[18]=u):u=f[18];let A=`${u}%`;return f[19]!==A?(m={position:"absolute",left:A,top:"50%",transform:"translate(-50%, -50%)",width:8,height:8,cursor:"pointer",zIndex:10,pointerEvents:"auto"},f[19]=A,f[20]=m):m=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsx)("div",{style:{width:8,height:8,backgroundColor:"var(--color-bg-success)",transform:"rotate(45deg)",border:"1px solid #333",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}}),f[21]=h):h=f[21],f[22]!==_?(p=(0,a.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:1,height:_,backgroundColor:"var(--color-bg-success)",opacity:.4,zIndex:-1}}),f[22]=_,f[23]=p):p=f[23],f[24]!==m||f[25]!==p?(x=(0,a.jsxs)("div",{style:m,onMouseEnter:eR,onClick:eM,children:[h,p]}),f[24]=m,f[25]=p,f[26]=x):x=f[26],f[27]!==x||f[28]!==N?(g=(0,a.jsx)(eb.m,{label:N,color:"var(--color-bg-surface)",withArrow:!0,multiline:!0,transitionProps:c,style:d,children:x}),f[27]=x,f[28]=N,f[29]=g):g=f[29],g}),eN=(0,l.memo)(function(e){let t,s,r,n,l,o,c=(0,i.c)(25),{events:d,maxVal:u,height:m,eventStyles:h,onEventHover:p,scale:x,offset:g}=e,f=p??eD;c[0]!==m?(t={width:0,flexGrow:1,height:m,position:"relative"},c[0]=m,c[1]=t):t=c[1];let b=-1*g*x;c[2]!==b?(s=b.toFixed(6),c[2]=b,c[3]=s):s=c[3];let v=`${s}%`;if(c[4]!==v?(r=(0,a.jsx)("div",{style:{marginRight:v}}),c[4]=v,c[5]=r):r=c[5],c[6]!==d?(n=d??[],c[6]=d,c[7]=n):n=c[7],c[8]!==h||c[9]!==m||c[10]!==u||c[11]!==f||c[12]!==x||c[13]!==n){let e;c[15]!==h||c[16]!==m||c[17]!==u||c[18]!==f||c[19]!==x?(e=(e,t,s)=>{let r=(e.minWidthPerc??0)/100,n=s[t-1],i=n?.start!=null?n?.start+u*r:0,l=Math.max(n?.end??0,i),o=x*Math.max((e.end-e.start)/u,r)*100,c=x*((e.start-l)/u*100);return(0,a.jsx)(eb.m,{label:e.tooltip,color:"gray",withArrow:!0,multiline:!0,transitionProps:{transition:"fade-right"},style:{fontSize:11,maxWidth:300,wordBreak:"break-word"},children:(0,a.jsxs)("div",{onMouseEnter:()=>f(e.id),className:"d-flex align-items-center h-100 cursor-pointer text-truncate hover-opacity",style:{userSelect:"none",backgroundColor:e.color,minWidth:`${o.toFixed(6)}%`,width:`${o.toFixed(6)}%`,marginLeft:`${c.toFixed(6)}%`,position:"relative",..."function"==typeof h?h(e):h},children:[(0,a.jsx)("div",{style:{margin:"auto"},className:"px-2",children:e.body}),e.markers?.map((t,s)=>(0,a.jsx)(eC,{marker:t,eventStart:e.start,eventEnd:e.end,height:m},`${e.id}-marker-${s}`))]})},e.id)},c[15]=h,c[16]=m,c[17]=u,c[18]=f,c[19]=x,c[20]=e):e=c[20],l=n.map(e),c[8]=h,c[9]=m,c[10]=u,c[11]=f,c[12]=x,c[13]=n,c[14]=l}else l=c[14];return c[21]!==t||c[22]!==r||c[23]!==l?(o=(0,a.jsxs)("div",{className:"d-flex overflow-hidden",style:t,children:[r,l]}),c[21]=t,c[22]=r,c[23]=l,c[24]=o):o=c[24],o});function ek(e){return e<1e3?`${Math.round(e)}ms`:e%1e3==0?`${Math.floor(e/1e3)}s`:`${(e/1e3).toFixed(3)}s`}function eA(e){let t,s,r,n,l,o,c,d,u,m,h,p=(0,i.c)(19),{maxVal:x,labelWidth:g,height:f,scale:b,offset:v}=e,y=(h=m=Math.pow(10,Math.floor(Math.log10(u=x/b/10))),u>=2*m&&(h=2*m),u>=5*m&&(h=5*m),h),_=Math.floor(x/y),j=y/x*100*b;if(p[0]!==f||p[1]!==y||p[2]!==_||p[3]!==j){t=[];for(let e=0;e<_;e++)t.push((0,a.jsx)("div",{style:{height:f,width:1,marginRight:-1,marginLeft:0===e?0:`${j.toFixed(6)}%`,background:"var(--color-border-muted)"},children:(0,a.jsx)("div",{className:"ms-2 fs-8.5",children:ek(e*y)})},e));p[0]=f,p[1]=y,p[2]=_,p[3]=j,p[4]=t}else t=p[4];p[5]===Symbol.for("react.memo_cache_sentinel")?(s={position:"sticky",top:0,height:24,paddingTop:4,zIndex:200,pointerEvents:"none",background:"var(--color-bg-body)"},r=ef()("d-flex align-items-center"),p[5]=s,p[6]=r):(s=p[5],r=p[6]),p[7]!==g?(n=(0,a.jsx)("div",{style:{width:g,minWidth:g}}),p[7]=g,p[8]=n):n=p[8];let S=-1*v*b;p[9]!==S?(l=S.toFixed(6),p[9]=S,p[10]=l):l=p[10];let w=`${l}%`;return p[11]!==w?(o=(0,a.jsx)("div",{style:{marginRight:w}}),p[11]=w,p[12]=o):o=p[12],p[13]!==o||p[14]!==t?(c=(0,a.jsxs)("div",{className:"d-flex w-100 overflow-hidden",children:[o,t]}),p[13]=o,p[14]=t,p[15]=c):c=p[15],p[16]!==n||p[17]!==c?(d=(0,a.jsx)("div",{style:s,children:(0,a.jsxs)("div",{className:`${r}`,children:[n,c]})}),p[16]=n,p[17]=c,p[18]=d):d=p[18],d}function eT(e){let t,s,r,n,l,o,c,d,u,m=(0,i.c)(24),{xPerc:h,overlay:p,labelWidth:x,color:g,height:f}=e,b=Math.min(Math.max(100*h,-1),100);m[0]!==b?(t=b.toFixed(6),m[0]=b,m[1]=t):t=m[1];let v=`${t}%`,y=h<=0?"none":"block";return m[2]!==y?(s={position:"sticky",top:0,height:0,zIndex:250,pointerEvents:"none",display:y},m[2]=y,m[3]=s):s=m[3],m[4]!==x?(r=(0,a.jsx)("div",{style:{width:x,minWidth:x}}),m[4]=x,m[5]=r):r=m[5],m[6]!==v?(n={marginLeft:v},m[6]=v,m[7]=n):n=m[7],m[8]!==p||m[9]!==h?(l=null!=p&&(0,a.jsx)("div",{style:{height:0,marginLeft:h<.5?12:-150,top:12,position:"relative"},children:(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"p-2 rounded border",style:{background:"var(--color-bg-surface)"},children:p})})}),m[8]=p,m[9]=h,m[10]=l):l=m[10],m[11]!==g||m[12]!==f?(o=(0,a.jsx)("div",{style:{height:f,width:1,background:g}}),m[11]=g,m[12]=f,m[13]=o):o=m[13],m[14]!==n||m[15]!==l||m[16]!==o?(c=(0,a.jsx)("div",{className:"w-100 overflow-hidden",children:(0,a.jsxs)("div",{style:n,children:[l,o]})}),m[14]=n,m[15]=l,m[16]=o,m[17]=c):c=m[17],m[18]!==r||m[19]!==c?(d=(0,a.jsxs)("div",{className:"d-flex",children:[r,c]}),m[18]=r,m[19]=c,m[20]=d):d=m[20],m[21]!==d||m[22]!==s?(u=(0,a.jsx)("div",{style:s,children:d}),m[21]=d,m[22]=s,m[23]=u):u=m[23],u}function e$(e){let t,s,r,n=(0,i.c)(11),{containerRef:o,maxVal:c,labelWidth:d,height:u,scale:m,offset:h,xPerc:p,setXPerc:x}=e,[g,f]=(0,l.useState)(!1);n[0]!==o||n[1]!==d||n[2]!==x?(t=()=>{let e=t=>{if(null!=o.current){let s=o.current,r=s.getBoundingClientRect(),n=(t.clientX-r.left-d)/(s.clientWidth-d);null!=e&&x(n)}},t=()=>f(!0),s=()=>f(!1),r=o.current;return r?.addEventListener("mousemove",e),r?.addEventListener("mouseleave",s),r?.addEventListener("mouseenter",t),()=>{r?.removeEventListener("mousemove",e),r?.removeEventListener("mouseleave",s),r?.removeEventListener("mouseenter",t)}},s=[o,d,x],n[0]=o,n[1]=d,n[2]=x,n[3]=t,n[4]=s):(t=n[3],s=n[4]),(0,l.useEffect)(t,s);let b=(h/100+Math.max(p,0)/m)*c;return n[5]!==b||n[6]!==u||n[7]!==d||n[8]!==g||n[9]!==p?(r=g?(0,a.jsx)(eT,{xPerc:Math.max(p,0),overlay:ek(Math.max(b,0)),height:u,labelWidth:d,color:"var(--color-bg-neutral)"}):null,n[5]=b,n[6]=u,n[7]=d,n[8]=g,n[9]=p,n[10]=r):r=n[10],r}function eL({rows:e,cursors:t,rowHeight:s,onMouseMove:r,onEventClick:n,labelWidth:i,className:o,style:c,onClick:d,scale:u=1,setScale:m=()=>{},initialScrollRowIndex:h,scaleWithScroll:p=!1}){let[x,g]=(0,l.useState)(0),f=(0,e_.ZC)(u),b=i/window.innerWidth*100,{size:v,startResize:_}=(0,y.A)(b,"left"),j=v/100*window.innerWidth,S=(0,l.useRef)(null),w=(e,t)=>{if(null!=S.current&&null!=t){let s=S.current,r=s.getBoundingClientRect(),n=e.clientX-r.left;e.clientY,r.top,t(Math.max((x/100+(n-j)/(s.clientWidth-j)/u)*A))}},E=(0,l.useMemo)(()=>({onDrag:e=>{g(t=>Math.min(Math.max(t-e.movementX*(.125/u),0),100-100/u))}}),[u,g]);(0,e_.i3)(S,E);let[C,N]=(0,l.useState)(0),k=e=>{p&&(e.preventDefault(),m(t=>Math.max(t-.001*e.deltaY,1)))};(0,l.useEffect)(()=>{null!=f&&f!=u&&g(e=>{let t=Math.max(Math.min(C,1),0);return Math.min(Math.max(e+100*t/f-100*t/u,0),100-100/u)})},[u,f,C]),(0,l.useEffect)(()=>{let e=S.current;if(null!=e)return e.addEventListener("wheel",k,{passive:!1}),()=>{e.removeEventListener("wheel",k)}});let A=(0,l.useMemo)(()=>{let t=0;for(let s of e??[])for(let e of s.events)t=Math.max(t,e.end);return 1.1*t},[e]),T=(0,ev.Te)({count:e?.length??0,getScrollElement:()=>S.current,estimateSize:()=>s,overscan:5}),$=T.getVirtualItems(),[L,I]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{null!=h&&!L&&h>=0&&(I(!0),T.scrollToIndex(h,{align:"center"}))},[h,L,T]),(0,a.jsxs)("div",{style:{position:"relative",...c},className:o,ref:S,onClick:e=>{w(e,d)},onMouseMove:e=>{w(e,r)},children:[(t??[]).map(e=>{let t=(e.start/A-x/100)*u;return(0,a.jsx)(eT,{xPerc:t,height:S.current?.getBoundingClientRect().height??300,labelWidth:j,color:e.color},e.id)}),(0,a.jsx)(e$,{containerRef:S,maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:j,scale:u,offset:x,xPerc:C,setXPerc:N}),(0,a.jsx)(eA,{maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:j,scale:u,offset:x}),(0,a.jsx)("div",{style:{height:`${T.getTotalSize()+32}px`,width:"100%",position:"relative"},children:(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${$?.[0]?.start??0}px)`},children:T.getVirtualItems().map(t=>{let r=e?.[t.index];return(0,a.jsxs)("div",{onClick:()=>n?.(r),"data-index":t.index,ref:T.measureElement,className:`${ef()("d-flex align-items-center overflow-hidden",r.className,eE().timelineRow,r.isActive&&eE().timelineRowActive)}`,style:{...r.style},children:[(0,a.jsxs)("div",{className:eE().labelContainer,style:{width:j,minWidth:j},children:[r.label,(0,a.jsx)("div",{className:eS().resizeHandle,onMouseDown:_,style:{backgroundColor:"var(--color-bg-neutral)"}})]}),(0,a.jsx)(eN,{events:r.events,height:s,maxVal:A,eventStyles:e=>({borderRadius:2,fontSize:.5*s,backgroundColor:e.isError?"var(--color-bg-danger)":"var(--color-bg-inverted)",color:"var(--color-text-inverted)"}),scale:u,offset:x})]},t.index)})})})]})}function eI(e){let[t,s]=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{style:{color:"var(--color-text-primary)"},children:[t,":"]})," ",String(s).length>50?String(s).substring(0,50)+"...":String(s)]},t)}function eR(e){return e.stopPropagation()}function eM(e){return e.stopPropagation()}function eD(){}var ez=s(59017),eF=s(66773),eP=s.n(eF);function eq(e){let t,s,r=(0,i.c)(6),{config:n,dateRangeStartInclusive:a,dateRange:l,enabled:o}=e;r[0]!==n||r[1]!==l||r[2]!==a?(t={...n,dateRange:l,dateRangeStartInclusive:a},r[0]=n,r[1]=l,r[2]=a,r[3]=t):t=r[3];let c=t;return r[4]!==o?(s={enabled:o},r[4]=o,r[5]=s):s=r[5],(0,eh.A)(c,s)}function eO(e){let t,s,r,n,a,l,o,c,d=(0,i.c)(32),{tableSource:u,focusDate:m,dateRange:h,traceId:x,enabled:g,hiddenRowExpression:f}=e;d[0]!==f||d[1]!==u||d[2]!==x?(t=function(e,t,s){let r={Body:e?.kind===p.GL.Trace?(0,S.pM)(e)??"":e?.kind===p.GL.Log?(0,S.N8)(e)??"":"",Timestamp:(0,S.xg)(e),Duration:e.durationExpression?(0,S.kg)(e):"",TraceId:e.traceIdExpression??"",SpanId:e.spanIdExpression??"",ParentSpanId:e.parentSpanIdExpression??"",StatusCode:e.statusCodeExpression??"",ServiceName:e.serviceNameExpression??"",SeverityText:e.severityTextExpression??"",SpanAttributes:e.eventAttributesExpression??"",SpanEvents:e.spanEventsValueExpression??""};if(e.highlightedTraceAttributeExpressions)for(let t of e.highlightedTraceAttributeExpressions)t.alias&&(r[t.alias]=t.sqlExpression);let n=[{valueExpression:r.Body,alias:"Body"},{valueExpression:r.Timestamp,alias:"Timestamp"},{valueExpression:r.SpanId,alias:"SpanId"},...r.ServiceName?[{valueExpression:r.ServiceName,alias:"ServiceName"}]:[],...s?[{valueExpression:s,valueExpressionLanguage:"lucene",alias:"__hdx_hidden"}]:[]];return(e.kind===p.GL.Trace||e.kind===p.GL.Log)&&n.push(...(0,E.z4)(e.highlightedTraceAttributeExpressions)),s&&(r.__hdx_hidden=s),e.kind===p.GL.Trace?n.push({valueExpression:r.Duration,alias:"Duration"},{valueExpression:r.ParentSpanId,alias:"ParentSpanId"},...r.StatusCode?[{valueExpression:r.StatusCode,alias:"StatusCode"}]:[],...r.SpanAttributes?[{valueExpression:r.SpanAttributes,alias:"SpanAttributes"}]:[],...r.SpanEvents?[{valueExpression:r.SpanEvents,alias:"SpanEvents"}]:[]):e.kind===p.GL.Log&&n.push(...r.SeverityText?[{valueExpression:r.SeverityText,alias:"SeverityText"}]:[]),{config:{select:n,from:e.from,timestampValueExpression:e.timestampValueExpression,where:`${r.TraceId} = '${t}'`,limit:{limit:5e4},connection:e.connection},alias:r,type:e.kind}}(u,x,f),d[0]=f,d[1]=u,d[2]=x,d[3]=t):t=d[3];let{config:b,alias:v,type:y}=t;d[4]!==h[0]||d[5]!==m?(s=[h[0],m],d[4]=h[0],d[5]=m,d[6]=s):s=d[6],d[7]!==b||d[8]!==g||d[9]!==s?(r={config:b,dateRangeStartInclusive:!0,dateRange:s,enabled:g},d[7]=b,d[8]=g,d[9]=s,d[10]=r):r=d[10];let{data:_,isFetching:j,error:w}=eq(r);d[11]!==h[1]||d[12]!==m?(n=[m,h[1]],d[11]=h[1],d[12]=m,d[13]=n):n=d[13],d[14]!==b||d[15]!==g||d[16]!==n?(a={config:b,dateRangeStartInclusive:!1,dateRange:n,enabled:g},d[14]=b,d[15]=g,d[16]=n,d[17]=a):a=d[17];let{data:C,isFetching:N,error:k}=eq(a),A=j||N,T=_?.meta??C?.meta,$=w||k;d[18]!==v||d[19]!==T?(l={meta:T,aliasMap:v},d[18]=v,d[19]=T,d[20]=l):l=d[20];let L=(0,ep.Ay)(l);e:{let e;if(!T||0===T.length){let e;d[21]===Symbol.for("react.memo_cache_sentinel")?(e=[],d[21]=e):e=d[21],o=e;break e}d[22]!==C?.data||d[23]!==_?.data||d[24]!==L||d[25]!==y?(e=[..._?.data??[],...C?.data??[]].map(e=>{let t=L((0,Z.omit)(e,["SpanAttributes","SpanEvents","__hdx_hidden"]));return{...e,SpanId:e?.SpanId,__hdx_hidden:e?.__hdx_hidden,type:y,id:t.where,aliasWith:[]}}),d[22]=C?.data,d[23]=_?.data,d[24]=L,d[25]=y,d[26]=e):e=d[26],o=e}let I=o;return d[27]!==$||d[28]!==A||d[29]!==T||d[30]!==I?(c={rows:I,meta:T,isFetching:A,error:$},d[27]=$,d[28]=A,d[29]=T,d[30]=I,d[31]=c):c=d[31],c}function eV({traceTableSource:e,logTableSource:t,traceId:s,dateRange:r,focusDate:n,onClick:i,highlightedRowWhere:o,initialRowHighlightHint:c}){let{size:d,startResize:u}=(0,y.A)(30,"bottom"),m=(0,ey.a)(),{traceWhere:h,logWhere:g,clear:f,isFilterActive:b,isFilterExpanded:v,setIsFilterExpanded:j,onSubmit:S}=_({hasLogSource:!!t}),{control:w,handleSubmit:C,setValue:A}=(0,ee.mN)({defaultValues:{traceWhere:h??"",logWhere:g??""}}),T=(0,l.useCallback)(()=>{A("traceWhere",""),A("logWhere",""),f()},[f,A]),{rows:$,isFetching:L,meta:I,error:R}=eO({tableSource:e,focusDate:n,dateRange:r,traceId:s,hiddenRowExpression:h?`NOT (${h})`:void 0,enabled:!0}),{rows:M,isFetching:D,meta:z,error:F}=eO({tableSource:t||e,focusDate:n,dateRange:t?r:[r[1],r[0]],traceId:s,hiddenRowExpression:g?`NOT (${g})`:void 0,enabled:!!t}),P=L||D,q=R||F,O=(0,l.useMemo)(()=>[...$,...M],[$,M]);O.sort((e,t)=>{let s=es().fromString(e.Timestamp),r=es().fromString(t.Timestamp),n=s.getTimeT()-r.getTimeT();return 0===n?s.getNano()-r.getNano():n});let V=(0,l.useMemo)(()=>{let s=$?.filter(e=>!e.__hdx_hidden),r=(0,E.N4)(e,e.highlightedTraceAttributeExpressions,s,I);if(t&&M&&z){let e=M?.filter(e=>!e.__hdx_hidden);r.push(...(0,E.N4)(t,t.highlightedTraceAttributeExpressions,e,z))}return r.sort((e,t)=>e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value))},[e,$,I,t,M,z]);(0,l.useEffect)(()=>{if(c&&i&&null==o){let e=O.findIndex(e=>e.Timestamp===c.timestamp&&e.SpanId===c.spanId&&e.Body===c.body);-1!==e&&i?.({id:O[e].id,type:O[e].type??"",aliasWith:O[e].aliasWith})}},[c,O,i,o]);let H=(0,l.useMemo)(()=>new Set($?.filter(e=>X().isString(e.SpanId)&&e.SpanId.length>0).map(e=>e.SpanId)??[]),[$]),B=[],W=new Map,K=new Map;for(let e of O??[]){let{type:t,SpanId:s,ParentSpanId:r}=e;if(!s)continue;let n=t===p.GL.Log?`${s}-log`:s,a=t===p.GL.Log?s:r||"",i={...e,children:[]};if(t===p.GL.Trace){if(!K.has(n)){K.set(n,e.id);let t=`placeholder-${n}`,s=W.get(t);s&&(i.children=s.children||[],W.delete(t))}W.set(e.id,i)}if(t!==p.GL.Trace||a&&H.has(a)){let e=K.get(a),t=e?W.get(e):void 0;if(!t){let e=`placeholder-${a}`;(t=W.get(e))||(t={children:[]},W.set(e,t))}t.children.push(i)}else B.push(i)}let[J,G]=(0,l.useState)(new Set),[U,Y]=(0,l.useState)(!0),Q=(0,l.useCallback)(e=>{G(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[G]),Z=(e,t,s=0)=>{e.__hdx_hidden||t.push({level:s,...e}),J.has(e.id)||e?.children?.forEach(e=>Z(e,t,s+1))},et=[];B.length>0&&B.forEach(e=>Z(e,et));let eh=et.length,ep=et.filter(e=>"Error"===e.StatusCode||e.SeverityText?.toLowerCase()==="error").length,eg=`${eh} span${1!==eh?"s":""}`,ef=`${ep} error${1!==ep?"s":""}`,eb=O?.reduce((e,t)=>Math.min(e,new Date(t.Timestamp).getTime()),Number.MAX_SAFE_INTEGER)??0,ev=eb===Number.MAX_SAFE_INTEGER?0:eb,ej=et.map((e,t)=>{let s=1e3*(e.Duration||0),r=new Date(e.Timestamp).getTime(),n=r-ev,l=n+s,{Body:c,ServiceName:d,id:u,type:h,aliasWith:x}=e,g=`${c}`;try{g="string"==typeof c?c:JSON.stringify(c)}catch(e){console.warn("DBTraceWaterfallChart: Couldn't JSON stringify Body",e)}let f=e.SpanAttributes||{},v=f["http.url"]||f["http.method"],y=f["http.url"],_=v&&y?`${g} ${y}`:g,j=U&&e.SpanEvents?e.SpanEvents.map(e=>({timestamp:new Date(e.Timestamp).getTime()-ev,name:e.Name,attributes:e.Attributes||{}})):[],S="Error"==e.StatusCode||"error"===e.SeverityText,w=e.StatusCode||e.SeverityText,E="warn"===e.SeverityText,C=o===u;return{id:u,type:h,aliasWith:x,label:(0,a.jsx)("div",{className:`${function(e){let{isError:t,isWarn:s}=e;return t?"text-danger":s?"text-warning":""}({isError:S,isWarn:E})} ${C&&eP().traceTimelineLabelHighlighted} text-truncate cursor-pointer ps-2 ${eP().traceTimelineLabel}`,role:"button",onClick:()=>{i?.({id:u,type:h??"",aliasWith:x})},children:(0,a.jsxs)("div",{className:"d-flex align-items-center",style:{height:24},children:[Array.from({length:e.level}).map((e,t)=>(0,a.jsx)("div",{style:{borderLeft:"1px solid var(--color-border)",marginLeft:7,width:8,minWidth:8,maxWidth:8,flexGrow:1,flexShrink:0,height:"100%"}},t)),(0,a.jsxs)(en.o,{style:{opacity:+(e.children.length>0)},onClick:()=>{Q(u)},children:[J.has(u)?(0,a.jsx)(ec.A,{size:16,className:"me-1 text-muted-hover"}):(0,a.jsx)(ed.A,{size:16,className:"me-1 text-muted-hover"})," "]}),!b&&(0,a.jsx)(k.E,{span:!0,size:"xxs",me:"xs",pt:"2px",children:e.children.length>0?`(${e.children.length})`:""}),(0,a.jsxs)(N.Y,{gap:0,wrap:"nowrap",children:[h===p.GL.Log?(0,a.jsx)(eu.A,{size:14,className:"align-middle me-2","aria-label":"Correlated Log Line"}):null,(0,a.jsxs)(k.E,{size:"xxs",truncate:"end",span:!0,title:`${d}${v&&y?` | ${_}`:""}`,role:"button",children:[d?`${d} | `:"",_]})]})]})}),style:{marginTop:32*(0===t)},isActive:C,events:[{id:u,type:h,aliasWith:x,start:n,end:l,tooltip:`${_} ${s>=0?`took ${s.toFixed(4)}ms`:""} ${w?`| Status: ${w}`:""}${!isNaN(r)?` | Started at ${m(new Date(r),{format:"withMs"})}`:""}`,color:function(e){let{isError:t,isWarn:s,isHighlighted:r}=e;return t?r?(0,e_.sS)():(0,e_.cM)():s?r?(0,e_.qS)():(0,e_.AD)():r?"#A9AFB7":"#6A7077"}({isError:S,isWarn:E,isHighlighted:C}),body:(0,a.jsx)("span",{children:_}),minWidthPerc:1,isError:S,markers:j}]}}),ew=et.findIndex(e=>e.id===o),eE=d/100*window.innerHeight;return(0,a.jsxs)(a.Fragment,{children:[v&&(0,a.jsx)("form",{onSubmit:C(S),children:(0,a.jsxs)(x.a,{style:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",gap:"12px"},children:[(0,a.jsx)(k.E,{size:"xs",children:"Spans filter"}),(0,a.jsx)(ex.A,{tableConnection:(0,er.VO)(e),placeholder:'Search trace spans w/ Lucene ex. StatusCode:"Error"',language:"lucene",name:"traceWhere",control:w,size:"xs",onSubmit:C(S),"data-testid":"trace-search-input"}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.E,{size:"xs",children:"Logs filter"}),(0,a.jsx)(ex.A,{tableConnection:(0,er.VO)(t),placeholder:'Search trace logs w/ Lucene ex. SeverityText:"error"',language:"lucene",name:"logWhere",control:w,size:"xs",onSubmit:C(S),"data-testid":"log-search-input"})]})]})}),(0,a.jsxs)(N.Y,{my:"xs",justify:"space-between",children:[(0,a.jsxs)(N.Y,{gap:"md",children:[(0,a.jsxs)(k.E,{size:"xs",children:[eg,","," ",(0,a.jsx)("span",{className:ep?"text-danger":"",children:ef})]}),(0,a.jsx)(ea.S,{size:"xs",label:"Show span events",checked:U,onChange:()=>Y(!U)})]}),(0,a.jsxs)("span",{children:[(0,a.jsxs)(ei.M,{underline:"always",onClick:()=>j(e=>!e),size:"xs",children:[v?"Hide Filters":"Show Filters"," ",b&&"(active)"]}),b&&(0,a.jsx)(ei.M,{underline:"always",onClick:T,size:"xs",ms:"xs",children:"Clear Filters"})]})]}),!P&&!q&&(0,a.jsx)(ez.V,{attributes:V}),(0,a.jsx)("div",{style:{position:"relative",overflow:"hidden",maxHeight:`${eE}px`},children:P?(0,a.jsx)("div",{className:"my-3",children:"Loading Traces..."}):q?(0,a.jsxs)(x.a,{mt:"lg",children:[(0,a.jsx)(k.E,{my:"sm",size:"sm",children:"An error occurred while fetching trace data:"}),(0,a.jsx)(el.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:q.message})]}):null==O?(0,a.jsxs)("div",{children:["An unknown error occurred. ",(0,a.jsx)(em.z,{})]}):0===et.length?(0,a.jsx)("div",{className:"my-3",children:"No matching spans or logs found"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eL,{style:{overflowY:"auto",maxHeight:`${eE}px`},scale:1,setScale:()=>{},rowHeight:22,labelWidth:300,onClick:e=>{},onEventClick:e=>{i?.({id:e.id,type:e.type??"",aliasWith:e.aliasWith??[]})},cursors:[],rows:ej,initialScrollRowIndex:ew})})}),(0,a.jsx)(eo.c,{mt:"md",className:eS().resizeYHandle,onMouseDown:u,style:{position:"relative",bottom:0}})]})}let eH=e=>{let t,s,r,n=(0,i.c)(13),{traceSourceId:l,rumSessionId:o,dateRange:c,focusDate:d,serviceName:u,setSubDrawerOpen:m}=e;n[0]!==l?(t={id:l},n[0]=l,n[1]=t):t=n[1];let{data:h}=(0,S.Fo)(t),p=h?.sessionSourceId;n[2]!==p?(s={id:p},n[2]=p,n[3]=s):s=n[3];let{data:x,isLoading:g}=(0,S.Fo)(s);if(!h||!x&&g){let e;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(U.a,{}),n[4]=e):e=n[4],e}return n[5]!==c||n[6]!==d||n[7]!==o||n[8]!==u||n[9]!==x||n[10]!==m||n[11]!==h?(r=(0,a.jsx)(a.Fragment,{children:x?o&&h?(0,a.jsx)(Q.A,{start:c[0],end:c[1],traceSource:h,session:{serviceName:u},sessionSource:x,rumSessionId:o,setDrawerOpen:m,initialTs:d.getTime()}):(0,a.jsx)("span",{className:"p-3 text-muted",children:"Session ID not found."}):(0,a.jsxs)("div",{className:"m-2 fs-8 p-4",children:["No correlated session source found.",(0,a.jsx)("br",{}),"Go to ",(0,a.jsx)(G(),{href:"/team#sources",children:"Team Settings"})," and update the"," ",(0,a.jsx)("strong",{children:h?.name})," source to include the correlated session source."]})}),n[5]=c,n[6]=d,n[7]=o,n[8]=u,n[9]=x,n[10]=m,n[11]=h,n[12]=r):r=n[12],r};function eB(e){return null===e.parentSpanId&&e.rumSessionId}function eW(e){return e.rumSessionId}var eK=s(25062),eJ=s(22623),eG=s(6892),eU=s(57478),eY=s(64467),eQ=((r=eQ||{}).Overview="overview",r.Parsed="parsed",r);function eZ(e){let t,s,r,n,o,c,d,m,h,x,f,v,y,_,j,E,C,A,T,$,L,I,R,M=(0,i.c)(74),{childSourceId:D,traceId:z,dateRange:F,focusDate:P,parentSourceId:q,initialRowHighlightHint:O,"data-testid":V}=e;M[0]!==D?(t={defaultValues:{source:D}},M[0]=D,M[1]=t):t=M[1];let{control:H}=(0,ee.mN)(t);M[2]!==H?(s={control:H,name:"source"},M[2]=H,M[3]=s):s=M[3];let B=(0,ee.FH)(s);M[4]!==B?(r={id:B},M[4]=B,M[5]=r):r=M[5];let{data:J,isLoading:G}=(0,S.Fo)(r);M[6]!==q?(n={id:q},M[6]=q,M[7]=n):n=M[7];let{data:U,isLoading:Y}=(0,S.Fo)(n),Q=U?.kind===p.GL.Log?U:J?.kind===p.GL.Log?J:null,Z=U?.kind===p.GL.Trace?U:J?.kind===p.GL.Trace?J:null;J?.kind===p.GL.Trace||(U?.kind,p.GL.Trace);let{mutate:X}=(0,S.sr)();M[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,u.os)(),M[8]=o):o=M[8];let[et,es]=(0,u.ZA)("eventRowWhere",o),ea=U?.traceIdExpression??"";M[9]!==ea?(c={defaultValues:{traceIdExpression:ea}},M[9]=ea,M[10]=c):c=M[10];let{control:ei,handleSubmit:el,setValue:ec}=(0,ee.mN)(c);M[11]!==U||M[12]!==ec?(d=()=>{U?.traceIdExpression&&ec("traceIdExpression",U.traceIdExpression)},M[11]=U,M[12]=ec,M[13]=d):d=M[13];let ed=U?.traceIdExpression;M[14]!==ed||M[15]!==ec?(m=[ed,ec],M[14]=ed,M[15]=ec,M[16]=m):m=M[16],(0,l.useEffect)(d,m);let[eu,em]=(0,l.useState)(!1);M[17]!==es?(h=()=>()=>{es(null)},M[17]=es,M[18]=h):h=M[18],M[19]!==es||M[20]!==z?(x=[z,es],M[19]=es,M[20]=z,M[21]=x):x=M[21],(0,l.useEffect)(h,x);let[eh,ep]=(0,l.useState)("overview"),ex=U?.traceIdExpression,eg=z||"No trace id found for event";M[22]!==ex||M[23]!==eg?(f=(0,a.jsxs)(k.E,{size:"xs",me:"xs",children:[ex,":"," ",eg]}),M[22]=ex,M[23]=eg,M[24]=f):f=M[24],M[25]!==z?(v=null!=z&&(0,a.jsx)(eK.$,{variant:"subtle",size:"xs",onClick:()=>em(eX),children:(0,a.jsx)(eG.A,{size:14})}),M[25]=z,M[26]=v):v=M[26],M[27]!==f||M[28]!==v?(y=(0,a.jsxs)(g.s,{align:"center",children:[f,v]}),M[27]=f,M[28]=v,M[29]=y):y=M[29];let ef=U?.kind===p.GL.Log?"Trace Source":"Correlated Log Source";return M[30]!==ef?(_=(0,a.jsx)(k.E,{size:"sm",children:ef}),M[30]=ef,M[31]=_):_=M[31],M[32]!==H?(j=(0,a.jsx)(eU.W,{control:H,name:"source",size:"xs"}),M[32]=H,M[33]=j):j=M[33],M[34]!==_||M[35]!==j?(E=(0,a.jsxs)(N.Y,{gap:"sm",children:[_,j]}),M[34]=_,M[35]=j,M[36]=E):E=M[36],M[37]!==y||M[38]!==E?(C=(0,a.jsxs)(g.s,{align:"center",justify:"space-between",mb:"sm",children:[y,E]}),M[37]=y,M[38]=E,M[39]=C):C=M[39],M[40]!==U||M[41]!==q||M[42]!==eu||M[43]!==z||M[44]!==ei||M[45]!==el||M[46]!==X?(A=(eu||!z)&&null!=q&&(0,a.jsxs)(b.B,{gap:"xs",children:[(0,a.jsx)(k.E,{size:"xs",children:"Trace ID Expression"}),(0,a.jsxs)(g.s,{children:[(0,a.jsx)(eY.Z,{tableConnection:(0,er.VO)(U),name:"traceIdExpression",placeholder:"Log Trace ID Column (ex. trace_id)",control:ei,size:"xs"}),(0,a.jsx)(eK.$,{ms:"sm",variant:"primary",onClick:el(e=>{let{traceIdExpression:t}=e;null!=U&&X({source:{...U,traceIdExpression:t}})}),size:"xs",children:"Save"}),(0,a.jsx)(eK.$,{ms:"sm",variant:"secondary",onClick:()=>em(!1),size:"xs",children:"Cancel"})]})]}),M[40]=U,M[41]=q,M[42]=eu,M[43]=z,M[44]=ei,M[45]=el,M[46]=X,M[47]=A):A=M[47],M[48]===Symbol.for("react.memo_cache_sentinel")?(T=(0,a.jsx)(eo.c,{my:"sm"}),M[48]=T):T=M[48],M[49]!==F||M[50]!==et?.id||M[51]!==P||M[52]!==O||M[53]!==Q||M[54]!==es||M[55]!==z||M[56]!==Z?($=Z?.kind===p.GL.Trace&&z&&(0,a.jsx)(eV,{traceTableSource:Z,logTableSource:Q,traceId:z,dateRange:F,focusDate:P,highlightedRowWhere:et?.id,onClick:es,initialRowHighlightHint:O}),M[49]=F,M[50]=et?.id,M[51]=P,M[52]=O,M[53]=Q,M[54]=es,M[55]=z,M[56]=Z,M[57]=$):$=M[57],M[58]!==eh||M[59]!==et||M[60]!==Q||M[61]!==Z?(L=null!=Z&&null!=et&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.E,{size:"sm",my:"sm",children:"Event Details"}),(0,a.jsx)(w.A,{className:"fs-8 mt-2",items:[{text:"Overview",value:"overview"},{text:"Column Values",value:"parsed"}],activeItem:eh,onClick:e=>ep(e)}),"overview"===eh&&(0,a.jsx)(K.W,{source:et?.type===p.GL.Log&&Q?Q:Z,rowId:et?.id,aliasWith:et?.aliasWith}),"parsed"===eh&&(0,a.jsx)(W.dD,{source:et?.type===p.GL.Log&&Q?Q:Z,rowId:et?.id,aliasWith:et?.aliasWith})]}),M[58]=eh,M[59]=et,M[60]=Q,M[61]=Z,M[62]=L):L=M[62],M[63]!==et||M[64]!==z||M[65]!==Z?(I=null!=Z&&!et&&z&&(0,a.jsx)(eJ.t,{shadow:"xs",p:"xl",mt:"md",children:(0,a.jsx)(en.o,{mih:100,children:(0,a.jsx)(k.E,{size:"sm",children:"Please select a span above to view details."})})}),M[63]=et,M[64]=z,M[65]=Z,M[66]=I):I=M[66],M[67]!==V||M[68]!==C||M[69]!==A||M[70]!==$||M[71]!==L||M[72]!==I?(R=(0,a.jsxs)("div",{"data-testid":V,children:[C,A,T,$,L,I]}),M[67]=V,M[68]=C,M[69]=A,M[70]=$,M[71]=L,M[72]=I,M[73]=R):R=M[73],R}function eX(e){return!e}let e0=(0,l.createContext)({});var e1=((n=e1||{}).Overview="overview",n.Parsed="parsed",n.Debug="debug",n.Trace="trace",n.ServiceMap="serviceMap",n.Context="context",n.Replay="replay",n.Infrastructure="infrastructure",n);let e2=({rowId:e,aliasWith:t,source:s,isNestedPanel:r=!1,setSubDrawerOpen:n,onClose:c,breadcrumbPath:h=[],onBreadcrumbClick:f})=>{let b,{data:y,isLoading:_,isSuccess:C}=(0,W.k1)({source:s,rowId:e,aliasWith:t}),{dbSqlRowTableConfig:N}=(0,l.useContext)(e0),k=(0,l.useCallback)(e=>{let t=h.length;if(t>e)c(),f?.(e);else{if(t===e)return;f?.(e)}},[h.length,f,c]),A=(0,l.useMemo)(()=>!!s.resourceAttributesExpression||!!s.eventAttributesExpression,[s.eventAttributesExpression,s.resourceAttributesExpression]),T="trace"===s.kind?"trace":A?"overview":"parsed",[I,R]=(0,u.ZA)("sidePanelTab",(0,u.Oq)(Object.values(e1)).withDefault(T)),[M,D]=(0,l.useState)(T),z=r?D:R,F=r?M:I,P=y?.data?.[0],q=P?.__hdx_timestamp;b=new Date("number"==typeof q?1e3*q:q);let O=(0,S.N8)(s),V=d()(P?.__hdx_body)?P.__hdx_body:P?.__hdx_body!==void 0?JSON.stringify(P.__hdx_body):void 0,H=P?.__hdx_severity_text,J=(0,l.useMemo)(()=>{let e=[];return(s.kind===p.GL.Trace||s.kind===p.GL.Log)&&s.highlightedRowAttributeExpressions&&e.push(...s.highlightedRowAttributeExpressions),s.serviceNameExpression&&e.push({sqlExpression:s.serviceNameExpression}),y?(0,E.N4)(s,e,y.data||[],y.meta||[]):[]},[s,y]),G=(0,l.useMemo)(()=>[(0,o.A)(b,{minutes:-60}),(0,o.A)(b,{minutes:60})],[b]),U=(0,l.useMemo)(()=>[(0,o.A)(b,{hours:-4}),(0,o.A)(b,{hours:4})],[b]),Q=P?.__hdx_trace_id,Z="log"===s.kind?s.traceSourceId:"trace"===s.kind?s.logSourceId:void 0,X="trace"===s.kind?s.id:s.traceSourceId,ee=Q&&X,{rumSessionId:et,rumServiceName:es}=(e=>{let t,s,r,n,a=(0,i.c)(42),{sourceId:l,traceId:o,dateRange:c,enabled:d}=e;a[0]!==l?(t={id:l},a[0]=l,a[1]=t):t=a[1];let{data:u}=(0,S.Fo)(t),{getFieldExpression:m}=(0,Y.A)(u);e:{let e,t,r,n,i,l,c,d,h;if(!u||!o||!m){s=void 0;break e}let p=`${u.timestampValueExpression}`;a[2]!==p?(e={valueExpression:p,alias:"Timestamp"},a[2]=p,a[3]=e):e=a[3];let x=u.resourceAttributesExpression??"ResourceAttributes";a[4]!==m||a[5]!==x?(t=m(x,"rum.sessionId"),a[4]=m,a[5]=x,a[6]=t):t=a[6];let g=`${t}`;a[7]!==g?(r={valueExpression:g,alias:"rumSessionId"},a[7]=g,a[8]=r):r=a[8];let f=u.resourceAttributesExpression??"ResourceAttributes";a[9]!==m||a[10]!==f?(n=m(f,"service.name"),a[9]=m,a[10]=f,a[11]=n):n=a[11];let b=`${n}`;a[12]!==b?(i={valueExpression:b,alias:"serviceName"},a[12]=b,a[13]=i):i=a[13];let v=`${u.parentSpanIdExpression}`;a[14]!==v?(l={valueExpression:v,alias:"parentSpanId"},a[14]=v,a[15]=l):l=a[15],a[16]!==i||a[17]!==l||a[18]!==e||a[19]!==r?(c=[e,r,i,l],a[16]=i,a[17]=l,a[18]=e,a[19]=r,a[20]=c):c=a[20],a[21]===Symbol.for("react.memo_cache_sentinel")?(d={limit:1e4},a[21]=d):d=a[21];let y=`${u.traceIdExpression} = '${o}'`;a[22]!==u.connection||a[23]!==u.from||a[24]!==u.timestampValueExpression||a[25]!==c||a[26]!==y?(h={select:c,from:u.from,timestampValueExpression:u.timestampValueExpression,limit:d,connection:u.connection,where:y,whereLanguage:"sql"},a[22]=u.connection,a[23]=u.from,a[24]=u.timestampValueExpression,a[25]=c,a[26]=y,a[27]=h):h=a[27],s=h}let h=s,p=void 0!==d&&d&&!!u&&!!h;a[28]!==h||a[29]!==c||a[30]!==p?(r={config:h,dateRangeStartInclusive:!0,dateRange:c,enabled:p},a[28]=h,a[29]=c,a[30]=p,a[31]=r):r=a[31];let{data:x}=eq(r);t:{let e,t,s;a[32]!==x?.data?(e=x?.data||[],a[32]=x?.data,a[33]=e):e=a[33];let r=e;a[34]!==r?(t=r.find(eB),a[34]=r,a[35]=t):t=a[35];let i=t;if(!i){let e;a[36]!==r?(e=r.find(eW),a[36]=r,a[37]=e):e=a[37],i=e}if(i){let e;a[38]!==i.rumSessionId||a[39]!==i.serviceName?(e={rumServiceName:i.serviceName,rumSessionId:i.rumSessionId},a[38]=i.rumSessionId,a[39]=i.serviceName,a[40]=e):e=a[40],n=e;break t}a[41]===Symbol.for("react.memo_cache_sentinel")?(s={rumServiceName:void 0,rumSessionId:void 0},a[41]=s):s=a[41],n=s}return n})({sourceId:X,traceId:Q,dateRange:G,enabled:null!=e}),er=(0,l.useMemo)(()=>{try{if(!s?.resourceAttributesExpression||!P)return!1;let e=P.__hdx_resource_attributes;return e?.["k8s.pod.uid"]!=null||e?.["k8s.node.name"]!=null}catch(e){return console.error(e),!1}},[s,P]),en=(0,l.useMemo)(()=>{if(P)return{timestamp:P.__hdx_timestamp,spanId:P.__hdx_span_id,body:P.__hdx_body}},[P]);return _?(0,a.jsx)("div",{className:eP().loadingState,children:"Loading..."}):C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.a,{p:"sm",children:(0,a.jsx)(v.A,{date:b,attributes:J,mainContent:V,mainContentHeader:O,severityText:H,breadcrumbPath:h,onBreadcrumbClick:k})}),(0,a.jsx)(w.A,{"data-testid":"side-panel-tabs",className:"fs-8 mt-2",items:[...A?[{text:"Overview",value:"overview"}]:[],{text:"Column Values",value:"parsed"},{text:"Trace",value:"trace"},...ee?[{text:"Service Map",value:"serviceMap"}]:[],{text:"Surrounding Context",value:"context"},...null!=et?[{text:"Session Replay",value:"replay"}]:[],...er?[{text:"Infrastructure",value:"infrastructure"}]:[]],activeItem:F,onClick:e=>z(e)}),"overview"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(K.W,{"data-testid":"side-panel-tab-overview",source:s,rowId:e,aliasWith:t,hideHeader:!0})}),"trace"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,a.jsx)(eZ,{"data-testid":"side-panel-tab-trace",parentSourceId:s.id,childSourceId:Z,traceId:Q,dateRange:G,focusDate:b,initialRowHighlightHint:en})})}),"serviceMap"===F&&ee&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(g.s,{p:"sm",flex:1,children:(0,a.jsx)($,{traceId:Q,traceTableSourceId:X,dateRange:G})})}),"parsed"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(W.dD,{"data-testid":"side-panel-tab-parsed",source:s,rowId:e,aliasWith:t})}),"context"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(L.A,{"data-testid":"side-panel-tab-context",source:s,dbSqlRowTableConfig:N,rowData:P,rowId:e,breadcrumbPath:h,onBreadcrumbClick:k})}),"replay"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)("div",{className:"overflow-hidden flex-grow-1",children:(0,a.jsx)(eH,{"data-testid":"side-panel-tab-replay",dateRange:U,focusDate:b,setSubDrawerOpen:n,traceSourceId:X,serviceName:es,rumSessionId:et})})}),"infrastructure"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,a.jsx)(B,{"data-testid":"side-panel-tab-infrastructure",source:s,rowData:P,rowId:e})})}),(0,a.jsx)(j.ir,{})]}):(0,a.jsx)("div",{className:eP().loadingState,children:"Error loading row data"})};function e3(e){let t,s,r,n,o,c,d,p,g,b,v,j,S,w=(0,i.c)(39),{onClose:E,rowId:N,aliasWith:k,source:A,isNestedPanel:T,breadcrumbPath:$,onBreadcrumbClick:L}=e;w[0]!==$?(t=void 0===$?[]:$,w[0]=$,w[1]=t):t=w[1];let I=t,R=(0,C.Y)()+10,{size:M,startResize:D}=(0,y.A)(80),[z,F]=(0,l.useState)(!1);(0,l.useContext)(e0),w[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,u.Oq)(Object.values(e1)),w[2]=s):s=w[2];let[,P]=(0,u.ZA)("tab",s);w[3]===Symbol.for("react.memo_cache_sentinel")?(r={},w[3]=r):r=w[3];let{clear:q}=_(r);w[4]!==q||w[5]!==T||w[6]!==E||w[7]!==P?(n=()=>{T||P(null),q(),E()},w[4]=q,w[5]=T,w[6]=E,w[7]=P,w[8]=n):n=w[8];let O=n;w[9]===Symbol.for("react.memo_cache_sentinel")?(o=["esc"],w[9]=o):o=w[9];let V=!1===z;w[10]!==V?(c={enabled:V},w[10]=V,w[11]=c):c=w[11],(0,h.vC)(o,O,c);let H=null!=N,B=!T;w[12]!==O||w[13]!==z?(d=()=>{z||O()},w[12]=O,w[13]=z,w[14]=d):d=w[14];let W=`${M}vw`;return w[15]===Symbol.for("react.memo_cache_sentinel")?(p={body:{padding:"0",height:"100vh"}},w[15]=p):p=w[15],w[16]!==D?(g=(0,a.jsx)(x.a,{className:eP().panelDragBar,onMouseDown:D}),w[16]=D,w[17]=g):g=w[17],w[18]!==O||w[19]!==k||w[20]!==I||w[21]!==T||w[22]!==L||w[23]!==N||w[24]!==A?(b=(0,a.jsx)(m.ErrorBoundary,{fallbackRender:e5,children:(0,a.jsx)(e2,{source:A,rowId:N,aliasWith:k,onClose:O,isNestedPanel:T,breadcrumbPath:I,setSubDrawerOpen:F,onBreadcrumbClick:L})}),w[18]=O,w[19]=k,w[20]=I,w[21]=T,w[22]=L,w[23]=N,w[24]=A,w[25]=b):b=w[25],w[26]!==g||w[27]!==b?(v=(0,a.jsxs)("div",{className:eP().panel,"data-testid":"row-side-panel",children:[g,b]}),w[26]=g,w[27]=b,w[28]=v):v=w[28],w[29]!==R||w[30]!==v?(j=(0,a.jsx)(C.S.Provider,{value:R,children:v}),w[29]=R,w[30]=v,w[31]=j):j=w[31],w[32]!==R||w[33]!==B||w[34]!==d||w[35]!==W||w[36]!==j||w[37]!==H?(S=(0,a.jsx)(f._,{opened:H,withCloseButton:!1,withOverlay:B,onClose:d,position:"right",size:W,styles:p,zIndex:R,children:j}),w[32]=R,w[33]=B,w[34]=d,w[35]=W,w[36]=j,w[37]=H,w[38]=S):S=w[38],S}function e5(e){return(0,a.jsxs)(b.B,{children:[(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),(0,a.jsx)("div",{className:"px-2 py-1 m-2 fs-7 font-monospace bg-body p-4",children:e?.error?.message})]})}},53356:e=>{e.exports={filtersContainer:"DashboardFiltersModal_filtersContainer___IcUM",filterActionButton:"DashboardFiltersModal_filterActionButton__LU0OY",deleteButton:"DashboardFiltersModal_deleteButton__bIpnm"}},54167:(e,t,s)=>{"use strict";var r=s(9641);s(30404),s(31356),s(20470),r.N,r.M,r.P,t.oU=r.Q,r.O,r.L},55533:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var r=(0,s(41495).A)("outline","filter-edit","IconFilterEdit",[["path",{d:"M10.97 20.344l-1.97 .656v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v1.5",key:"svg-0"}],["path",{d:"M18.42 15.61a2.1 2.1 0 0 1 2.97 2.97l-3.39 3.42h-3v-3l3.42 -3.39z",key:"svg-1"}]])},57030:(e,t,s)=>{"use strict";s.d(t,{A:()=>eC});var r=s(6029),n=s(75155),a=s(55729),i=s(75828),l=s.n(i),o=s(47687),c=s.n(o),d=s(41038),u=s(1909),m=s(3145),h=s(95991),p=s(90124),x=s(63085),g=s(76013),f=s(3635),b=s(25062),v=s(92789),y=s(79621),_=s(10822),j=s(62118),S=s(97684),w=s(39614),E=s(81244),C=s(12853),N=s(50374),k=s(64467),A=s(40147),T=s(66692),$=s(86823),L=s(97039),I=s(61441),R=s(10708),M=s(56795),D=s(61411),z=s(81055),F=s(90515),P=s(45172),q=s(94502),O=s(80925),V=s(92917),H=s(81408),B=s.n(H);function W(e){return Math.max(e.getCurrentTime(),0)}let K=(0,a.memo)(({url:e})=>{let t,s;try{t=new URL(e)}catch{}try{let e=new URLSearchParams(t?.search??"");for(let[t,r]of(s=[],e.entries()))s.push({key:t,value:r})}catch{}return(0,r.jsxs)(L.j,{shadow:"md",position:"bottom-start",children:[(0,r.jsx)(L.j.Target,{children:(0,r.jsx)("div",{className:B().playerHeaderUrl,children:e||"Session Player"})}),e&&(0,r.jsx)(L.j.Dropdown,{children:(0,r.jsxs)("table",{className:"table fs-8 mb-0",children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(R.A,{size:14})}),(0,r.jsx)("td",{children:t?.host})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(M.A,{size:14})}),(0,r.jsx)("td",{children:t?.pathname})]}),s&&s.length>0&&s.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.key})}),(0,r.jsx)("td",{children:e.value})]},e.key))]})})]})});function J({config:{dateRange:e,serviceName:t,sessionId:s,sourceId:n},focus:i,setPlayerTime:o,playerState:d,setPlayerState:u,playerSpeed:m,skipInactive:h,setPlayerStartTimestamp:p,setPlayerEndTimestamp:x,setPlayerFullWidth:b,playerFullWidth:v,resizeKey:y,getSessionSourceFieldExpression:_}){let j=(0,V.uy)(),S=(0,a.useRef)(null),w=(0,a.useRef)(null),E=(0,a.useRef)(null),C=(0,a.useRef)([]),N=(0,a.useRef)(0),[k,A]=(0,a.useState)(0),L=(0,a.useRef)(c()(A,100,{leading:!0,trailing:!0})),[R,M]=(0,a.useState)(!1),[H,J]=(0,a.useState)(!1),G="",{isFetching:U,abort:Y}=(0,O.S)({serviceName:t,sessionId:s,sourceId:n,startDate:e?.[0]??new Date,endDate:e?.[1]??new Date,limit:1e6,onEvent:e=>{try{let{b:t,ck:s,tcks:r}=e;if(G+=t,!s||s===r){let e=JSON.parse(G);null!=E.current?E.current.addEvent(e):(null!=p&&0===C.current.length&&p(e.timestamp),C.current.push(e)),L.current(e.timestamp),N.current=e.timestamp,G=""}}catch(e){j&&console.error(e),G=""}C.current.length>5&&M(!0)},onEnd:()=>{M(!0),J(!0),null!=x&&(null!=E.current?x(N.current??0):C.current.length>0&&x(C.current[C.current.length-1].timestamp??0))},getSessionSourceFieldExpression:_},{keepPreviousData:!0,shouldAbortPendingRequest:!0}),[Q,Z]=(0,a.useState)(""),X=(0,a.useCallback)(()=>{if(null!=E.current)try{E.current.play(W(E.current))}catch(e){console.error(e)}},[E]),ee=(0,a.useCallback)(e=>{if(null!=E.current)try{E.current.pause(e)}catch(e){console.error(e)}},[E]);(0,T.vC)(["space"],()=>{"playing"===d?u("paused"):"paused"===d&&u("playing")});let et=(0,a.useRef)(o);(0,a.useEffect)(()=>{et.current=o},[o]);let es=(0,a.useRef)(0),er=(0,a.useCallback)(()=>{null!=E.current&&E.current.service.state.matches("playing")&&et.current(Math.round(E.current.getMetaData().startTime+W(E.current))),es.current=requestAnimationFrame(er)},[]);(0,a.useEffect)(()=>(es.current=requestAnimationFrame(er),()=>{cancelAnimationFrame(es.current)}),[er]),(0,a.useEffect)(()=>{null!=E.current&&("playing"===d?X():"paused"===d&&ee())},[d,X,ee]),(0,a.useEffect)(()=>{null!=E.current&&("playing"===d?(ee(),E.current?.setConfig({speed:m,skipInactive:h}),X()):"paused"===d&&E.current?.setConfig({speed:m,skipInactive:h}))},[d,m,h,ee,X]);let en=(0,a.useCallback)(()=>{null!=S.current&&null!=w.current&&(w.current.style.transform="scale(0.0001)",window.requestAnimationFrame(()=>{if(null==S.current||null==w.current)return;let e=S.current.getBoundingClientRect(),t=E?.current?.iframe?.offsetWidth??1280,s=E?.current?.iframe?.offsetHeight??720,r=e.width/t,n=e.height/s;w.current.style.transform=`scale(${Math.min(r,n)})`}))},[S,w]);(0,a.useEffect)(()=>(window.addEventListener("resize",en),()=>window.removeEventListener("resize",en)),[en]),(0,a.useEffect)(()=>{en()},[y,en]);let[ea,ei]=(0,a.useState)(!1);(0,a.useEffect)(()=>{C.current.length<2||null==w.current||null!=E.current||(E.current=new $.B(C.current,{root:w.current,mouseTail:!0,pauseAnimation:!1,showWarning:j,skipInactive:!0}),ei(!0),j&&(window.__hdx_replayer=E.current),E.current.enableInteract(),E.current.on("event-cast",e=>{try{(e?.type===3&&e?.data?.source===4||4===e.type)&&setTimeout(()=>{en()},0),e?.type===4&&Z(e.data.href)}catch(e){j&&console.error(e)}}),"playing"===d&&E.current.getMetaData().endTime>(i?.ts??0)&&(null!=i&&ee(i.ts-E.current.getMetaData().startTime),X()),setTimeout(()=>{en()},0))},[en,i,ee,R,d,X,j]),(0,a.useEffect)(()=>{R&&ea&&!(k<(i?.ts?i.ts+1e3:1/0))&&i?.setBy!=="player"&&null!=E.current&&(ee(i?.ts==null?0:i?.ts-E.current.getMetaData().startTime),en(),"playing"===d&&X())},[i,ee,u,d,X,R,ea,en,k]),(0,a.useEffect)(()=>()=>{null!=E.current&&(E.current?.destroy(),E.current=null),Y()},[Y]);let el=!1===R&&U,eo=!1===H&&(E.current?.getMetaData()?.endTime??0)<(i?.ts??0);return(0,a.useEffect)(()=>{null!=E.current&&null!=i&&E.current.getMetaData().endTime>i.ts&&"playing"===d&&E.current?.service?.state?.matches("paused")&&(ee(i.ts-E.current.getMetaData().startTime),X())},[k,i,d,ee,X]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:B().playerHeader,children:[(0,r.jsx)(g.M,{onClick:()=>b(!v),size:"sm",color:"gray",children:v?(0,r.jsx)(D.A,{size:14}):(0,r.jsx)(z.A,{size:14})}),(0,r.jsx)(I.i,{value:Q,children:({copied:e,copy:t})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K,{url:Q}),(0,r.jsx)(g.M,{onClick:t,title:"Copy URL",variant:"secondary",size:"sm",children:e?(0,r.jsx)(F.A,{size:14}):(0,r.jsx)(P.A,{size:14})})]})})]}),(0,r.jsxs)("div",{className:B().playerContainer,children:[el||eo?(0,r.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[(0,r.jsx)(q.A,{className:"spin-animate",size:14}),eo?"Buffering to time...":"Loading replay..."]}):H&&null==E.current?(0,r.jsx)("div",{className:"text-center",children:"No replay available for this session, most likely due to this session starting and ending in a background tab."}):null,(0,r.jsx)("div",{ref:S,className:l()(B().domPlayerWrapper,"overflow-hidden",{"d-none":el||eo,started:(E.current?.getCurrentTime()??0)>0,[B().domPlayerWrapperPaused]:"paused"===d}),children:(0,r.jsx)("div",{className:"player rr-block",ref:w})})]})]})}var G=s(831),U=s.n(G),Y=s(4308),Q=s(91021),Z=s(29766);let X=Z.Ay.object({body:Z.Ay.string().nullish(),component:Z.Ay.string().nullish(),durationInMs:Z.Ay.number(),"error.message":Z.Ay.string().nullish(),"http.method":Z.Ay.string().nullish(),"http.status_code":Z.Ay.string().nullish(),"http.url":Z.Ay.string().nullish(),id:Z.Ay.string(),"location.href":Z.Ay.string().nullish(),"otel.library.name":Z.Ay.string(),parent_span_id:Z.Ay.string(),severity_text:Z.Ay.string(),span_id:Z.Ay.string(),span_name:Z.Ay.string(),timestamp:Z.Ay.string(),trace_id:Z.Ay.string(),type:Z.Ay.string().nullish()});var ee=s(9953),et=s(7565),es=s(2326),er=s.n(es);let en=e=>{let t,s,i,l,o,c,d,u=(0,n.c)(28),{min:m,max:h,value:p,markers:g,playerState:f,onChange:b,setPlayerState:v}=e,y=(0,et.a)();u[0]!==y||u[1]!==m?(t=e=>{let t=Math.max(e-m,0),s=Math.floor(t/1e3/60),r=Math.floor(t/1e3%60),n=`${s}:${r<10?"0":""}${r}`,a=y(e,{format:"short"});return`${n} at ${a}`},u[0]=y,u[1]=m,u[2]=t):t=u[2];let _=t;u[3]!==g||u[4]!==h||u[5]!==m||u[6]!==b?(s=g?.map(e=>(0,r.jsx)(x.m,{color:e.isError?"red":"gray",label:(0,V.EJ)(e?.description??"",240,"...",/\n/),position:"top",withArrow:!0,children:(0,r.jsx)("div",{className:er().markerDot,style:{backgroundColor:e.isSuccess?"var(--color-text-success)":e.isError?"var(--color-text-danger)":"var(--color-text-muted)",left:`${(e.ts-m)/(h-m)*100}%`},onClick:()=>b(e.ts)})},e.id)),u[3]=g,u[4]=h,u[5]=m,u[6]=b,u[7]=s):s=u[7];let j=s,[S,w]=a.useState(f);u[8]!==f||u[9]!==v?(i=()=>{w(f),v("paused")},u[8]=f,u[9]=v,u[10]=i):i=u[10];let E=i;u[11]!==S||u[12]!==v?(l=()=>{v(S)},u[11]=S,u[12]=v,u[13]=l):l=u[13];let C=l;u[14]!==j?(o=(0,r.jsx)("div",{className:er().markers,children:j}),u[14]=j,u[15]=o):o=u[15];let N="playing"===f?"green":"gray",k=p||m;return u[16]!==E||u[17]!==C||u[18]!==h||u[19]!==m||u[20]!==b||u[21]!==N||u[22]!==k||u[23]!==_?(c=(0,r.jsx)(ee.A,{color:N,size:"sm",min:m,max:h,value:k,step:1e3,label:_,onChange:b,onMouseDown:E,onMouseUp:C}),u[16]=E,u[17]=C,u[18]=h,u[19]=m,u[20]=b,u[21]=N,u[22]=k,u[23]=_,u[24]=c):c=u[24],u[25]!==o||u[26]!==c?(d=(0,r.jsxs)("div",{className:er().wrapper,children:[o,c]}),u[25]=o,u[26]=c,u[27]=d):d=u[27],d};function ea(e){let{timestamp:t,durationInMs:s}=e,r=new Date(t).getTime(),n=new Date(r).getTime()+s;return{...e,startOffset:r,endOffset:n}}function ei(e){return e.data}function el(e){return e.success}function eo(e){return X.safeParse(e)}var ec=s(43370),ed=s(34834),eu=s(67214),em=s(53993),eh=s(91104),ep=s(54396),ex=s(56906),eg=s(69986),ef=s(98632),eb=s(34027),ev=s(21440),ey=s(70727);let e_={navigation:(0,r.jsx)(ep.A,{size:14}),chat:(0,r.jsx)(ex.A,{size:14}),network:(0,r.jsx)(eg.A,{size:14}),custom:(0,r.jsx)(ef.A,{size:14})},ej=a.forwardRef((e,t)=>{let s,a,i,o,c,d,u,m,h,p,x=(0,n.c)(30),{dataIndex:g,event:f,isHighlighted:b,onClick:v,onTimeClick:y}=e;return x[0]!==f.isError||x[1]!==f.isSuccess||x[2]!==b?(s=l()(B().eventRow,{[B().eventRowError]:f.isError,[B().eventRowSuccess]:f.isSuccess,[B().eventRowHighlighted]:b}),x[0]=f.isError,x[1]=f.isSuccess,x[2]=b,x[3]=s):s=x[3],x[4]!==f.eventSource?(a=e_[f.eventSource]||(0,r.jsx)(eb.A,{size:14}),x[4]=f.eventSource,x[5]=a):a=x[5],x[6]!==a?(i=(0,r.jsx)("div",{className:B().eventRowIcon,children:a}),x[6]=a,x[7]=i):i=x[7],x[8]!==f.duration?(o=f.duration>0&&(0,r.jsxs)("span",{children:[f.duration,"ms"]}),x[8]=f.duration,x[9]=o):o=x[9],x[10]!==f.title||x[11]!==o?(c=(0,r.jsxs)("div",{className:B().eventRowTitle,children:[f.title," ",o]}),x[10]=f.title,x[11]=o,x[12]=c):c=x[12],x[13]!==f.description?(d=(0,r.jsx)("div",{className:B().eventRowDescription,title:f.description,children:f.description}),x[13]=f.description,x[14]=d):d=x[14],x[15]!==v||x[16]!==c||x[17]!==d?(u=(0,r.jsxs)("div",{className:B().eventRowContent,onClick:v,children:[c,d]}),x[15]=v,x[16]=c,x[17]=d,x[18]=u):u=x[18],x[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(j.A,{size:12,className:"me-1"}),x[19]=m):m=x[19],x[20]!==f.formattedTimestamp||x[21]!==y?(h=(0,r.jsxs)("div",{className:B().eventRowTimestamp,onClick:y,children:[m,f.formattedTimestamp]}),x[20]=f.formattedTimestamp,x[21]=y,x[22]=h):h=x[22],x[23]!==g||x[24]!==t||x[25]!==s||x[26]!==i||x[27]!==u||x[28]!==h?(p=(0,r.jsxs)("div",{"data-index":g,ref:t,className:s,children:[i,u,h]}),x[23]=g,x[24]=t,x[25]=s,x[26]=i,x[27]=u,x[28]=h,x[29]=p):p=x[29],p}),eS=({queriedConfig:e,aliasMap:t,onClick:s,onTimeClick:n,focus:i,minTs:l,showRelativeTime:o,eventsFollowPlayerPosition:c})=>{let{data:d,isLoading:u}=(0,Q.HD)(e,{placeholderData:e=>e,queryKey:["SessionEventList",e]}),m=(0,et.a)(),h=a.useMemo(()=>d?.data?.map(e=>X.safeParse(e)).filter(e=>e.success).map(e=>e.data)??[],[d?.data]),p=(0,ey.Ay)({meta:d?.meta,aliasMap:t}),x=a.useMemo(()=>h.map(e=>{let{timestamp:t,durationInMs:s}=e,r=new Date(t).getTime(),n=new Date(r).getTime()+s,a=e["http.url"]??"",i=Number(e["http.status_code"]??""),c=e["http.method"]??"",d=(0,V.Up)(a),u=""!=c&&null!=c&&null!=a&&""!=a,h=e["error.message"],p=e.body??"",x=e.component,g=e.span_name,f=e["location.href"]??"",b=e["otel.library.name"],v=(0,V.Up)(f),y="custom-action"===b,_="routeChange"===g||"documentLoad"===g,j=e.severity_text?.toLowerCase()==="error"||"error"===x||i>499;return{id:e.id,row:e,isError:j,isSuccess:!j&&i<400&&i>99,eventSource:_?"navigation":u?"network":y?"custom":"intercom.onShow"===g?"chat":"log",title:_?"Navigated":"console.error"===g?"console.error":"console.log"===g?"console.log":"console.warn"===g?"console.warn":a.length>0?`${i} ${c}`:"intercom.onShow"===g?"Intercom Chat Opened":y||"console"===x?g:"console.error",description:_?v:null!=h&&h.length>0?h:"console"===x?p??"":a.length>0?d:"",timestamp:new Date(r),formattedTimestamp:o?(0,V.ax)(r-l):m(r,{format:"time"}),duration:n-r}})??[],[h,o,l,m]),g=a.useRef(null),f=(0,ev.Te)({count:x.length,getScrollElement:()=>g.current,estimateSize:()=>36}),b=(0,eh.D)(x.findIndex(e=>e.timestamp.getTime()>=(i?.ts??0)),500);return(a.useEffect(()=>{f&&b>=0&&c&&f.scrollToIndex(b,{align:"center"})},[b,c,f]),u)?(0,r.jsxs)(ed.B,{p:"sm",gap:"xs",children:[(0,r.jsx)(eu.E,{height:36}),(0,r.jsx)(eu.E,{height:36}),(0,r.jsx)(eu.E,{height:36})]}):(0,r.jsx)(em.F,{h:"100%",scrollbarSize:4,viewportRef:g,children:(0,r.jsx)("div",{className:B().eventListContainer,children:(0,r.jsx)("div",{style:{height:`${f.getTotalSize()}px`,width:"100%",position:"relative"},children:f.getVirtualItems().map(e=>{let t=x[e.index];return(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},children:(0,r.jsx)(ej,{event:t,dataIndex:e.index,isHighlighted:b===e.index,ref:f.measureElement,onClick:()=>s(p(t.row)),onTimeClick:()=>n(t.timestamp.getTime())})},e.key)})})})})},ew=(0,a.memo)(function(e){let t,s,a,i,l,o=(0,n.c)(18),{playerState:c,setPlayerState:d,setFocus:u,playbackRange:m,focus:h,queriedConfig:p}=e,x=m[0].getTime(),g=m[1].getTime(),f=1e3*Math.ceil(m[1].getTime()/1e3),b=1e3*Math.floor(m[0].getTime()/1e3);o[0]!==p?(t={placeholderData:Y.rX,queryKey:["PlayBar",p]},o[0]=p,o[1]=t):t=o[1];let{data:v}=(0,Q.HD)(p,t);v?.data,o[2]!==v?.data?(s=v?.data?.map(eo).filter(el).map(ei)??[],o[2]=v?.data,o[3]=s):s=o[3];let y=s;o[4]!==y||o[5]!==g||o[6]!==x?(a=U()(y.map(ea).filter(e=>{let{startOffset:t}=e;return t>=x&&t<=g}).map(e=>{let t=e.span_name,s=e["location.href"]??"",r=(0,V.Up)(s),n=e["error.message"]??"",a=e["http.url"]??"",i=Number(e["http.status_code"]??""),l=e["http.method"]??"",o=(0,V.Up)(a),c=e.severity_text?.toLowerCase()==="error"||"error"===e.component||"console"===e.component||i>=399;return{id:e.id,ts:e.startOffset,percentage:Math.round((e.startOffset-x)/(g-x)*100),description:"routeChange"===t||"documentLoad"===t?`Navigated to ${r}`:a.length>0?`${i} ${l}${a.length>0?` ${o}`:""}`:null!=n&&n.length>0?n:"intercom.onShow"===t?"Intercom Chat Opened":e.body??"",isError:c,isSuccess:!c&&i<400&&i>99}})??[],"percentage"),o[4]=y,o[5]=g,o[6]=x,o[7]=a):a=o[7];let _=a,j=h?.ts;return o[8]!==u?(i=e=>{u({ts:e,setBy:"slider"})},o[8]=u,o[9]=i):i=o[9],o[10]!==_||o[11]!==f||o[12]!==b||o[13]!==c||o[14]!==d||o[15]!==j||o[16]!==i?(l=(0,r.jsx)(en,{markers:_,min:b,max:f,value:j,onChange:i,setPlayerState:d,playerState:c}),o[10]=_,o[11]=f,o[12]=b,o[13]=c,o[14]=d,o[15]=j,o[16]=i,o[17]=l):l=o[17],l});function eE(e,t){let{valueExpression:s,alias:r}=t;return e[r]=s,e}function eC(e){let t,s,i,o,T,$,L,I,R,M,D,z,F,P,q,O,H,W,K,G,U,Y,Q,Z,X,ee,es,er,en,ea,ei,el,eo,ed,eu,em,eh,ep,ex,eg,ef,eb,ev,ey,e_,ej,eC,ek,eA,eT,e$,eL,eI,eR,eM,eD,ez,eF,eP,eq,eO,eV,eH,eB,eW,eK,eJ,eG=(0,n.c)(192),{traceSource:eU,sessionSource:eY,session:eQ,setDrawerOpen:eZ,rumSessionId:eX,start:e0,end:e1,initialTs:e2,whereLanguage:e3}=e,e5=void 0===e3?"lucene":e3,[e4,e6]=(0,a.useState)(void 0);eG[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],eG[0]=t):t=eG[0];let[e7,e9]=(0,a.useState)(t);eG[1]===Symbol.for("react.memo_cache_sentinel")?(s=d.GJ.withOptions({history:"replace"}),eG[1]=s):s=eG[1];let[e8,te]=(0,d.ZA)("ts",s),tt=(0,V.ZC)(e8);eG[2]!==e2?(i=null!=e2?{ts:e2,setBy:"parent"}:void 0,eG[2]=e2,eG[3]=i):i=eG[3];let[ts,tr]=(0,a.useState)(i);eG[4]!==tt||eG[5]!==e8?(o=()=>{null==tt&&null!=e8&&tr({ts:e8,setBy:"url"})},T=[tt,e8],eG[4]=tt,eG[5]=e8,eG[6]=o,eG[7]=T):(o=eG[6],T=eG[7]),(0,a.useEffect)(o,T),eG[8]!==te?($=c()(async e=>{te(e)},1e3),eG[8]=te,eG[9]=$):$=eG[9];let tn=(0,a.useRef)($).current;eG[10]!==te?(L=()=>()=>{te(null)},I=[te],eG[10]=te,eG[11]=L,eG[12]=I):(L=eG[11],I=eG[12]),(0,a.useEffect)(L,I),eG[13]!==te?(R=e=>{"player"===e.setBy?tn(e.ts):te(e.ts),tr(e)},eG[13]=te,eG[14]=R):R=eG[14];let ta=R,[ti,tl]=(0,a.useState)("paused"),[to,tc]=(0,a.useState)(void 0);eG[15]===Symbol.for("react.memo_cache_sentinel")?(M={history:"push"},eG[15]=M):M=eG[15];let[td,tu]=(0,d.ZA)("session_q",M);eG[16]!==to||eG[17]!==td?(D=()=>{null!=td&&null==to&&tc(td)},z=[td,to],eG[16]=to,eG[17]=td,eG[18]=D,eG[19]=z):(D=eG[18],z=eG[19]),(0,a.useEffect)(D,z);let tm=td??"";eG[20]!==tu?(F=()=>()=>{tu(null,{history:"replace"})},P=[tu],eG[20]=tu,eG[21]=F,eG[22]=P):(F=eG[21],P=eG[22]),(0,a.useEffect)(F,P);let[th,tp]=(0,a.useState)("highlighted"),[tx,tg]=(0,V.Mj)("hdx-session-subpanel-show-relative-time",!1),[tf,tb]=(0,V.Mj)("hdx-session-subpanel-player-speed",1),[tv,ty]=(0,V.Mj)("hdx-session-subpanel-skip-inactive",!0),[t_,tj]=(0,V.Mj)("hdx-session-subpanel-events-follow-player-position",!0),[tS,tw]=(0,a.useState)(e0.getTime()+144e5),[tE,tC]=(0,a.useState)(e1.getTime()-144e5);eG[23]!==tS?(q=new Date(tS),eG[23]=tS,eG[24]=q):q=eG[24],eG[25]!==tE?(O=new Date(tE),eG[25]=tE,eG[26]=O):O=eG[26],eG[27]!==q||eG[28]!==O?(H=[q,O],eG[27]=q,eG[28]=O,eG[29]=H):H=eG[29];let tN=H,{getFieldExpression:tk}=(0,A.A)(eY);eG[30]!==e1||eG[31]!==eX||eG[32]!==tm||eG[33]!==e0||eG[34]!==th||eG[35]!==eU||eG[36]!==e5?(W={traceSource:eU,rumSessionId:eX,where:tm,whereLanguage:e5,start:e0,end:e1,tab:th},eG[30]=e1,eG[31]=eX,eG[32]=tm,eG[33]=e0,eG[34]=th,eG[35]=eU,eG[36]=e5,eG[37]=W):W=eG[37];let{eventsConfig:tA,aliasMap:tT}=function(e){let t,s,r,a,i,l,o=(0,n.c)(96),{traceSource:c,rumSessionId:d,where:u,whereLanguage:m,start:h,end:p,tab:x}=e,{getFieldExpression:g}=(0,A.A)(c);e:{let e,s,r,n,a,i,l,d,u,m,h,p,x,f,b,v,y,_,j,S,w,E,C,N,k;if(!g){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}let A=c.eventAttributesExpression??"SpanAttributes";o[1]!==g||o[2]!==A?(e=g(A,"message"),o[1]=g,o[2]=A,o[3]=e):e=o[3];let T=`${e}`;o[4]!==T?(s={valueExpression:T,alias:"body"},o[4]=T,o[5]=s):s=o[5];let $=c.eventAttributesExpression??"SpanAttributes";o[6]!==g||o[7]!==$?(r=g($,"component"),o[6]=g,o[7]=$,o[8]=r):r=o[8];let L=`${r}`;o[9]!==L?(n={valueExpression:L,alias:"component"},o[9]=L,o[10]=n):n=o[10];let I=`toFloat64OrZero(toString(${c.durationExpression})) * pow(10, 3) / pow(10, toInt8OrZero(toString(${c.durationPrecision})))`;o[11]!==I?(a={valueExpression:I,alias:"durationInMs"},o[11]=I,o[12]=a):a=o[12];let R=c.eventAttributesExpression??"SpanAttributes";o[13]!==g||o[14]!==R?(i=g(R,"error.message"),o[13]=g,o[14]=R,o[15]=i):i=o[15];let M=`${i}`;o[16]!==M?(l={valueExpression:M,alias:"error.message"},o[16]=M,o[17]=l):l=o[17];let D=c.eventAttributesExpression??"SpanAttributes";o[18]!==g||o[19]!==D?(d=g(D,"http.method"),o[18]=g,o[19]=D,o[20]=d):d=o[20];let z=`${d}`;o[21]!==z?(u={valueExpression:z,alias:"http.method"},o[21]=z,o[22]=u):u=o[22];let F=c.eventAttributesExpression??"SpanAttributes";o[23]!==g||o[24]!==F?(m=g(F,"http.status_code"),o[23]=g,o[24]=F,o[25]=m):m=o[25];let P=`${m}`;o[26]!==P?(h={valueExpression:P,alias:"http.status_code"},o[26]=P,o[27]=h):h=o[27];let q=c.eventAttributesExpression??"SpanAttributes";o[28]!==g||o[29]!==q?(p=g(q,"http.url"),o[28]=g,o[29]=q,o[30]=p):p=o[30];let O=`${p}`;o[31]!==O?(x={valueExpression:O,alias:"http.url"},o[31]=O,o[32]=x):x=o[32];let V=`toString(cityHash64(${c.traceIdExpression}, ${c.parentSpanIdExpression}, ${c.spanIdExpression}))`;o[33]!==V?(f={valueExpression:V,alias:"id"},o[33]=V,o[34]=f):f=o[34];let H=c.eventAttributesExpression??"SpanAttributes";o[35]!==g||o[36]!==H?(b=g(H,"location.href"),o[35]=g,o[36]=H,o[37]=b):b=o[37];let B=`${b}`;o[38]!==B?(v={valueExpression:B,alias:"location.href"},o[38]=B,o[39]=v):v=o[39],o[40]===Symbol.for("react.memo_cache_sentinel")?(y={valueExpression:"ScopeName",alias:"otel.library.name"},o[40]=y):y=o[40];let W=`${c.parentSpanIdExpression}`;o[41]!==W?(_={valueExpression:W,alias:"parent_span_id"},o[41]=W,o[42]=_):_=o[42];let K=`${c.statusCodeExpression}`;o[43]!==K?(j={valueExpression:K,alias:"severity_text"},o[43]=K,o[44]=j):j=o[44];let J=`${c.spanIdExpression}`;o[45]!==J?(S={valueExpression:J,alias:"span_id"},o[45]=J,o[46]=S):S=o[46];let G=`${c.spanNameExpression}`;o[47]!==G?(w={valueExpression:G,alias:"span_name"},o[47]=G,o[48]=w):w=o[48];let U=`${c.timestampValueExpression}`;o[49]!==U?(E={valueExpression:U,alias:"timestamp"},o[49]=U,o[50]=E):E=o[50];let Y=`${c.traceIdExpression}`;o[51]!==Y?(C={valueExpression:Y,alias:"trace_id"},o[51]=Y,o[52]=C):C=o[52],o[53]===Symbol.for("react.memo_cache_sentinel")?(N={valueExpression:"CAST('span', 'String')",alias:"type"},o[53]=N):N=o[53],o[54]!==a||o[55]!==l||o[56]!==u||o[57]!==h||o[58]!==x||o[59]!==f||o[60]!==v||o[61]!==_||o[62]!==j||o[63]!==S||o[64]!==w||o[65]!==E||o[66]!==C||o[67]!==s||o[68]!==n?(k=[s,n,a,l,u,h,x,f,v,y,_,j,S,w,E,C,N],o[54]=a,o[55]=l,o[56]=u,o[57]=h,o[58]=x,o[59]=f,o[60]=v,o[61]=_,o[62]=j,o[63]=S,o[64]=w,o[65]=E,o[66]=C,o[67]=s,o[68]=n,o[69]=k):k=o[69],t=k}let f=t,b=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:>299 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[70]!==b?(s={type:"lucene",condition:b},o[70]=b,o[71]=s):s=o[71];let v=s;t:{let e;if(!g){r=void 0;break t}let t=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:* 
      OR ${c.eventAttributesExpression}.component:"console" 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[72]!==t?(e={type:"lucene",condition:t},o[72]=t,o[73]=e):e=o[73],r=e}let y=r;s:{let e,t,s,r;if(!g||!f||!y){a=void 0;break s}o[74]!==p||o[75]!==h?(e=[h,p],o[74]=p,o[75]=h,o[76]=e):e=o[76];let n=`${c.timestampValueExpression} ASC`;o[77]===Symbol.for("react.memo_cache_sentinel")?(t={limit:4e3,offset:0},o[77]=t):t=o[77];let i="highlighted"===x?v:y;o[78]!==i?(s=[i],o[78]=i,o[79]=s):s=o[79],o[80]!==f||o[81]!==s||o[82]!==e||o[83]!==n||o[84]!==c.connection||o[85]!==c.from||o[86]!==c.implicitColumnExpression||o[87]!==c.timestampValueExpression||o[88]!==u||o[89]!==m?(r={select:f,from:c.from,dateRange:e,whereLanguage:m,where:u,timestampValueExpression:c.timestampValueExpression,implicitColumnExpression:c.implicitColumnExpression,connection:c.connection,orderBy:n,limit:t,filters:s},o[80]=f,o[81]=s,o[82]=e,o[83]=n,o[84]=c.connection,o[85]=c.from,o[86]=c.implicitColumnExpression,o[87]=c.timestampValueExpression,o[88]=u,o[89]=m,o[90]=r):r=o[90],a=r}let _=a;r:{let e;if(!g){i=void 0;break r}o[91]!==f?(e=f.reduce(eE,{}),o[91]=f,o[92]=e):e=o[92],i=e}let j=i;return o[93]!==j||o[94]!==_?(l={eventsConfig:_,aliasMap:j},o[93]=j,o[94]=_,o[95]=l):l=o[95],l}(W),[t$,tL]=(0,a.useState)(!1);eG[38]!==tf||eG[39]!==tb?(K=()=>{1==tf?tb(2):2==tf?tb(4):4==tf?tb(8):8==tf&&tb(1)},eG[38]=tf,eG[39]=tb,eG[40]=K):K=eG[40];let tI=K,tR=tN[0].getTime(),tM=tN[1].getTime();eG[41]===Symbol.for("react.memo_cache_sentinel")?(G=()=>{tl(eN)},eG[41]=G):G=eG[41];let tD=G;eG[42]!==ts?.ts||eG[43]!==tR||eG[44]!==ta?(U=()=>{ta({ts:Math.max((ts?.ts??tR)-15e3,tR),setBy:"skip-backward"})},eG[42]=ts?.ts,eG[43]=tR,eG[44]=ta,eG[45]=U):U=eG[45],ts?.ts;let tz=U;eG[46]!==ts?.ts||eG[47]!==tM||eG[48]!==tR||eG[49]!==ta?(Y=()=>{ta({ts:Math.min((ts?.ts??tR)+15e3,tM),setBy:"skip-forward"})},eG[46]=ts?.ts,eG[47]=tM,eG[48]=tR,eG[49]=ta,eG[50]=Y):Y=eG[50],ts?.ts;let tF=Y;eG[51]!==tm?(Q={values:{where:tm}},eG[51]=tm,eG[52]=Q):Q=eG[52];let{control:tP,handleSubmit:tq}=(0,u.mN)(Q);eG[53]!==tu?(Z=e=>{tu(e.where)},eG[53]=tu,eG[54]=Z):Z=eG[54];let tO=Z;eG[55]!==eZ?(X=e=>{eZ(!0),e6(e.where),e9(e.aliasWith)},eG[55]=eZ,eG[56]=X):X=eG[56];let tV=X;eG[57]!==ta?(ee=e=>{ta({ts:e,setBy:"timeline"})},eG[57]=ta,eG[58]=ee):ee=eG[58];let tH=ee;eG[59]!==ts?.setBy||eG[60]!==ts?.ts||eG[61]!==ta?(es=e=>{(ts?.setBy!=="player"||ts?.ts!==e)&&ta({ts:e,setBy:"player"})},eG[59]=ts?.setBy,eG[60]=ts?.ts,eG[61]=ta,eG[62]=es):es=eG[62];let tB=es;eG[63]!==e7||eG[64]!==e4||eG[65]!==eZ||eG[66]!==eU?(er=null!=e4&&eU&&(0,r.jsx)(h.Z,{children:(0,r.jsx)(N.A,{source:eU,rowId:e4,aliasWith:e7,onClose:()=>{eZ(!1),e6(void 0)}})}),eG[63]=e7,eG[64]=e4,eG[65]=eZ,eG[66]=eU,eG[67]=er):er=eG[67],eG[68]!==t$?(en=l()(B().eventList,{"d-none":t$}),eG[68]=t$,eG[69]=en):en=eG[69],eG[70]===Symbol.for("react.memo_cache_sentinel")?(ea={zIndex:100,width:"100%"},eG[70]=ea):ea=eG[70],eG[71]!==tq||eG[72]!==tO?(ei=tq(tO),eG[71]=tq,eG[72]=tO,eG[73]=ei):ei=eG[73],eG[74]!==tP||eG[75]!==tq||eG[76]!==tO||eG[77]!==eU||eG[78]!==e5?(el="sql"===e5?(0,r.jsx)(k.Z,{tableConnection:(0,m.VO)(eU),control:tP,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",language:"sql",size:"xs",enableHotkey:!0,onSubmit:tq(tO)}):(0,r.jsx)(ec.A,{tableConnection:(0,m.VO)(eU),control:tP,name:"where",language:"lucene",size:"xs",placeholder:"Search your events w/ Lucene ex. column:foo",enableHotkey:!0,onSubmit:tq(tO)}),eG[74]=tP,eG[75]=tq,eG[76]=tO,eG[77]=eU,eG[78]=e5,eG[79]=el):el=eG[79],eG[80]!==ei||eG[81]!==el?(eo=(0,r.jsx)("form",{style:ea,onSubmit:ei,children:el}),eG[80]=ei,eG[81]=el,eG[82]=eo):eo=eG[82],eG[83]===Symbol.for("react.memo_cache_sentinel")?(ed=[{value:"highlighted",label:"Highlighted"},{value:"events",label:"All Events"}],eG[83]=ed):ed=eG[83],eG[84]===Symbol.for("react.memo_cache_sentinel")?(eu=e=>tp(e),eG[84]=eu):eu=eG[84],eG[85]!==th?(em=(0,r.jsx)(p.I,{flex:1,size:"xs",data:ed,value:th,onChange:eu}),eG[85]=th,eG[86]=em):em=eG[86];let tW=t_?"filled":"subtle";eG[87]!==t_||eG[88]!==tj?(eh=()=>tj(!t_),eG[87]=t_,eG[88]=tj,eG[89]=eh):eh=eG[89],eG[90]===Symbol.for("react.memo_cache_sentinel")?(ep=(0,r.jsx)(y.A,{size:18}),eG[90]=ep):ep=eG[90],eG[91]!==tW||eG[92]!==eh?(ex=(0,r.jsx)(x.m,{label:"Sync with player position",color:"gray",children:(0,r.jsx)(g.M,{size:"md",color:"gray",variant:tW,onClick:eh,children:ep})}),eG[91]=tW,eG[92]=eh,eG[93]=ex):ex=eG[93],eG[94]!==em||eG[95]!==ex?(eg=(0,r.jsxs)(f.Y,{gap:6,children:[em,ex]}),eG[94]=em,eG[95]=ex,eG[96]=eg):eg=eG[96],eG[97]!==eo||eG[98]!==eg?(ef=(0,r.jsxs)("div",{className:B().eventListHeader,children:[eo,eg]}),eG[97]=eo,eG[98]=eg,eG[99]=ef):ef=eG[99],eG[100]!==tT||eG[101]!==tA||eG[102]!==t_||eG[103]!==ts||eG[104]!==tR||eG[105]!==tV||eG[106]!==tH||eG[107]!==tx?(eb=tA&&tT&&(0,r.jsx)(eS,{eventsFollowPlayerPosition:t_,aliasMap:tT,queriedConfig:tA,onClick:tV,focus:ts,onTimeClick:tH,minTs:tR,showRelativeTime:tx}),eG[100]=tT,eG[101]=tA,eG[102]=t_,eG[103]=ts,eG[104]=tR,eG[105]=tV,eG[106]=tH,eG[107]=tx,eG[108]=eb):eb=eG[108],eG[109]!==en||eG[110]!==ef||eG[111]!==eb?(ev=(0,r.jsxs)("div",{className:en,children:[ef,eb]}),eG[109]=en,eG[110]=ef,eG[111]=eb,eG[112]=ev):ev=eG[112],eG[113]!==e1||eG[114]!==ts||eG[115]!==tk||eG[116]!==t$||eG[117]!==tf||eG[118]!==ti||eG[119]!==eX||eG[120]!==eQ||eG[121]!==eY||eG[122]!==tB||eG[123]!==tv||eG[124]!==e0?(ey=tk&&(0,r.jsx)(J,{playerState:ti,setPlayerState:tl,focus:ts,setPlayerTime:tB,config:{serviceName:eQ.serviceName,sourceId:eY.id,sessionId:eX,dateRange:[e0,e1]},playerSpeed:tf,skipInactive:tv,setPlayerStartTimestamp:tw,setPlayerEndTimestamp:tC,setPlayerFullWidth:tL,playerFullWidth:t$,resizeKey:`${t$}`,getSessionSourceFieldExpression:tk}),eG[113]=e1,eG[114]=ts,eG[115]=tk,eG[116]=t$,eG[117]=tf,eG[118]=ti,eG[119]=eX,eG[120]=eQ,eG[121]=eY,eG[122]=tB,eG[123]=tv,eG[124]=e0,eG[125]=ey):ey=eG[125],eG[126]!==tA||eG[127]!==ts||eG[128]!==tN||eG[129]!==ti||eG[130]!==ta?(e_=tA&&(0,r.jsx)(ew,{playerState:ti,setPlayerState:tl,focus:ts,setFocus:ta,playbackRange:tN,queriedConfig:tA}),eG[126]=tA,eG[127]=ts,eG[128]=tN,eG[129]=ti,eG[130]=ta,eG[131]=e_):e_=eG[131],eG[132]!==e_?(ej=(0,r.jsx)("div",{className:B().playerPlaybar,children:e_}),eG[132]=e_,eG[133]=ej):ej=eG[133],eG[134]!==tg||eG[135]!==tx?(eC=()=>tg(!tx),eG[134]=tg,eG[135]=tx,eG[136]=eC):eC=eG[136],eG[137]!==ts?.ts||eG[138]!==tM||eG[139]!==tR||eG[140]!==tx?(ek=tx?(0,r.jsxs)(r.Fragment,{children:[(0,V.ax)((ts?.ts??0)-tR),(0,r.jsxs)("span",{className:"fw-normal ms-2",children:[" / ",(0,V.ax)(tM-tR)]})]}):(0,r.jsx)(et.H,{value:ts?.ts||tR,format:"time"}),eG[137]=ts?.ts,eG[138]=tM,eG[139]=tR,eG[140]=tx,eG[141]=ek):ek=eG[141],eG[142]!==eC||eG[143]!==ek?(eA=(0,r.jsx)("div",{className:B().playerTimestamp,children:(0,r.jsx)(x.m,{label:"Toggle relative time",color:"gray",children:(0,r.jsx)(b.$,{variant:"subtle",color:"gray",onClick:eC,size:"compact-xs",children:ek})})}),eG[142]=eC,eG[143]=ek,eG[144]=eA):eA=eG[144];let tK=(ts?.ts||0)<=tR;eG[145]===Symbol.for("react.memo_cache_sentinel")?(eT=(0,r.jsx)(_.A,{size:18}),eG[145]=eT):eT=eG[145],eG[146]!==tz||eG[147]!==tK?(e$=(0,r.jsx)(x.m,{label:"Go 15 seconds back",color:"gray",children:(0,r.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tz,disabled:tK,children:eT})}),eG[146]=tz,eG[147]=tK,eG[148]=e$):e$=eG[148];let tJ="playing"===ti?"Pause":"Play";eG[149]!==ti?(eL=(0,r.jsx)(g.M,{variant:"secondary",size:"lg",radius:"xl",onClick:tD,children:"paused"===ti?(0,r.jsx)(j.A,{size:20}):(0,r.jsx)(S.A,{size:20})}),eG[149]=ti,eG[150]=eL):eL=eG[150],eG[151]!==tJ||eG[152]!==eL?(eI=(0,r.jsx)(x.m,{label:tJ,color:"gray",children:eL}),eG[151]=tJ,eG[152]=eL,eG[153]=eI):eI=eG[153];let tG=(ts?.ts||0)>=tM;return eG[154]===Symbol.for("react.memo_cache_sentinel")?(eR=(0,r.jsx)(w.A,{size:18}),eG[154]=eR):eR=eG[154],eG[155]!==tF||eG[156]!==tG?(eM=(0,r.jsx)(x.m,{label:"Skip 15 seconds",color:"gray",children:(0,r.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tF,disabled:tG,children:eR})}),eG[155]=tF,eG[156]=tG,eG[157]=eM):eM=eG[157],eG[158]!==e$||eG[159]!==eI||eG[160]!==eM?(eD=(0,r.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[e$,eI,eM]}),eG[158]=e$,eG[159]=eI,eG[160]=eM,eG[161]=eD):eD=eG[161],eG[162]!==tv?(ez=tv?(0,r.jsx)(E.A,{size:18,className:"pe-1"}):(0,r.jsx)(C.A,{size:18,className:"pe-1"}),eG[162]=tv,eG[163]=ez):ez=eG[163],eG[164]!==ty||eG[165]!==tv?(eF=()=>ty(!tv),eG[164]=ty,eG[165]=tv,eG[166]=eF):eF=eG[166],eG[167]===Symbol.for("react.memo_cache_sentinel")?(eP=(0,r.jsx)(v.c,{orientation:"vertical",ml:"sm"}),eG[167]=eP):eP=eG[167],eG[168]!==ez||eG[169]!==eF?(eq=(0,r.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:ez,onClick:eF,children:["Skip Idle",eP]}),eG[168]=ez,eG[169]=eF,eG[170]=eq):eq=eG[170],eG[171]!==tf?(eO=(0,r.jsxs)("span",{className:"fw-bold pe-1",children:[tf,"x"]}),eG[171]=tf,eG[172]=eO):eO=eG[172],eG[173]===Symbol.for("react.memo_cache_sentinel")?(eV=(0,r.jsx)(v.c,{orientation:"vertical",ml:"sm"}),eG[173]=eV):eV=eG[173],eG[174]!==tI||eG[175]!==eO?(eH=(0,r.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eO,onClick:tI,children:["Speed",eV]}),eG[174]=tI,eG[175]=eO,eG[176]=eH):eH=eG[176],eG[177]!==eq||eG[178]!==eH?(eB=(0,r.jsxs)(f.Y,{align:"center",justify:"flex-end",gap:"xs",children:[eq,eH]}),eG[177]=eq,eG[178]=eH,eG[179]=eB):eB=eG[179],eG[180]!==eA||eG[181]!==eD||eG[182]!==eB?(eW=(0,r.jsxs)("div",{className:B().playerToolbar,children:[eA,eD,eB]}),eG[180]=eA,eG[181]=eD,eG[182]=eB,eG[183]=eW):eW=eG[183],eG[184]!==ey||eG[185]!==ej||eG[186]!==eW?(eK=(0,r.jsxs)("div",{className:B().player,children:[ey,ej,eW]}),eG[184]=ey,eG[185]=ej,eG[186]=eW,eG[187]=eK):eK=eG[187],eG[188]!==er||eG[189]!==ev||eG[190]!==eK?(eJ=(0,r.jsxs)("div",{className:B().wrapper,children:[er,ev,eK]}),eG[188]=er,eG[189]=ev,eG[190]=eK,eG[191]=eJ):eJ=eG[191],eJ}function eN(e){return"playing"===e?"paused":"playing"}},59017:(e,t,s)=>{"use strict";s.d(t,{V:()=>d});var r=s(6029),n=s(75155),a=s(55729),i=s(23935),l=s(78253),o=s(50374),c=s(94937);function d(e){let t,s,d,m,h,p=(0,n.c)(21),{attributes:x}=e;p[0]!==x?(t=void 0===x?[]:x,p[0]=x,p[1]=t):t=p[1];let g=t,[f,b]=(0,a.useState)(!1),{onPropertyAddClick:v,generateSearchUrl:y,source:_}=(0,a.useContext)(o.D);p[2]!==g||p[3]!==f?(s=g.sort(u).slice(0,f?g.length:12),p[2]=g,p[3]=f,p[4]=s):s=p[4];let j=s,S=g.length-j.length;if(p[5]!==_?.id||p[6]!==y||p[7]!==v||p[8]!==j){let e;p[10]!==_?.id||p[11]!==y||p[12]!==v?(e=e=>{let{displayedKey:t,value:s,sql:n,lucene:a,source:i}=e;return(0,r.jsx)(c.A,{displayedKey:t,name:a||n,nameLanguage:a?"lucene":"sql",value:s,...v&&_?.id===i.id?{onPropertyAddClick:v,sqlExpression:n}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:y?(e,t)=>y({where:e||"",whereLanguage:t??"lucene",source:i}):void 0},`${t}-${s}-${i.id}`)},p[10]=_?.id,p[11]=y,p[12]=v,p[13]=e):e=p[13],d=j.map(e),p[5]=_?.id,p[6]=y,p[7]=v,p[8]=j,p[9]=d}else d=p[9];return p[14]!==g.length||p[15]!==S||p[16]!==f?(m=g.length>12&&(0,r.jsx)(i.M,{size:"xs",onClick:()=>b(!f),children:f?"Show Less":`Show ${S} More...`}),p[14]=g.length,p[15]=S,p[16]=f,p[17]=m):m=p[17],p[18]!==d||p[19]!==m?(h=(0,r.jsxs)(l.s,{wrap:"wrap",gap:"2px",mb:"md",align:"baseline",children:[d,m]}),p[18]=d,p[19]=m,p[20]=h):h=p[20],h}function u(e,t){return e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value)}},61629:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(6029),n=s(75155),a=s(43517),i=s(92917);function l(e){let t,s,l,o=(0,n.c)(7);o[0]!==e?({level:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]);let c=(0,i.lO)(t),d="error"===c?"red":"warn"===c?"var(--color-chart-warning)":"gray";return o[3]!==t||o[4]!==s||o[5]!==d?(l=(0,r.jsx)(a.E,{component:"span",size:"xs",c:d,...s,children:t}),o[3]=t,o[4]=s,o[5]=d,o[6]=l):l=o[6],l}},62759:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(75155),n=s(41038),a=s(28959);let i=e=>{let t,s,i,l,o=(0,r.c)(10);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.os)(),o[0]=t):t=o[0];let[c,d]=(0,n.ZA)("filters",t);o[1]!==d?(s=(e,t)=>{d(s=>{let{filters:r}=(0,a.mA)(s??[]);return null==t?delete r[e]:r[e]={included:new Set([t]),excluded:new Set},(0,a.hd)(r,{stringifyKeys:!1})})},o[1]=d,o[2]=s):s=o[2];let u=s;if(o[3]!==c||o[4]!==e){let{filters:t}=(0,a.mA)(c??[]),s={};for(let{expression:r}of e)r in t&&(s[r]=t[r]);i={valuesForExistingFilters:s,queriesForExistingFilters:(0,a.hd)(s,{stringifyKeys:!0})},o[3]=c,o[4]=e,o[5]=i}else i=o[5];let{valuesForExistingFilters:m,queriesForExistingFilters:h}=i;return o[6]!==h||o[7]!==u||o[8]!==m?(l={filterValues:m,filterQueries:h,setFilterValue:u},o[6]=h,o[7]=u,o[8]=m,o[9]=l):l=o[9],l}},64441:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var r=s(6029),n=s(75155),a=s(55729),i=s(63085),l=s(8737),o=s(43517),c=s(60481),d=s(20294),u=s(78253),m=s(22623),h=s(25062),p=s(15216),x=s(16232),g=s(7565),f=s(57820),b=s(92917),v=s(59017),y=s(50374),_=s(61629);let j=e=>"getTime"in e&&!isNaN(e.getTime());function S(e){let t,s,a,u=(0,n.c)(9),{breadcrumbPath:m,onNavigateToLevel:h}=e;u[0]!==h?(t=e=>{h?.(e)},u[0]=h,u[1]=t):t=u[1];let p=t;e:{let e;if(0===m.length){let e;u[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],u[2]=e):e=u[2],s=e;break e}if(u[3]!==m||u[4]!==p){let t;e=[],m.forEach((t,s)=>{let n,a=t.rowData?(n=(t.rowData.__hdx_body||"").trim()).length>200?`${n.substring(0,197)}...`:n:"";e.push((0,r.jsx)(i.m,{label:a,disabled:!a,position:"bottom",withArrow:!0,children:(0,r.jsx)(l.N,{onClick:()=>p(s),style:{textDecoration:"none"},children:(0,r.jsx)(o.E,{size:"sm",c:"blue",style:{cursor:"pointer"},children:0===s?"Original Event":t.label})})},`crumb-${s}`))}),u[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(o.E,{size:"sm",children:"Selected Event"},"current"),u[6]=t):t=u[6],e.push(t),u[3]=m,u[4]=p,u[5]=e}else e=u[5];s=e}let x=s;return 0===m.length?null:(u[7]!==x?(a=(0,r.jsx)(c.a,{mb:"sm",pb:"sm",className:"border-bottom border-dark",children:(0,r.jsx)(d.B,{separator:"â€º",separatorMargin:"xs",children:x})}),u[7]=x,u[8]=a):a=u[8],a)}function w(e){let t,s,i,l,d,w,C,N,k,A,T,$,L,I=(0,n.c)(41),{attributes:R,mainContent:M,mainContentHeader:D,date:z,severityText:F,breadcrumbPath:P,onBreadcrumbClick:q}=e;I[0]!==R?(t=void 0===R?[]:R,I[0]=R,I[1]=t):t=I[1];let O=t,V=void 0===M?"":M;I[2]!==P?(s=void 0===P?[]:P,I[2]=P,I[3]=s):s=I[3];let H=s,[B,W]=a.useState(!1),{generateSearchUrl:K}=(0,a.useContext)(y.D),J=V.length>2e3;I[4]!==B||I[5]!==V?(i=B?V:V?.slice(0,2e3),I[4]=B,I[5]=V,I[6]=i):i=I[6];let G=i,[U,Y]=(0,a.useState)(null),[Q,Z]=(0,a.useState)(0);I[7]!==U?(l=()=>{if(!U)return;let e=()=>{Z(U.offsetHeight)};e();let t=new ResizeObserver(e);return t.observe(U),()=>{t.disconnect()}},d=[U],I[7]=U,I[8]=l,I[9]=d):(l=I[8],d=I[9]),(0,a.useEffect)(l,d);let{userPreferences:X,setUserPreference:ee}=(0,f.HW)(),{expandSidebarHeader:et}=X;return I[10]!==H||I[11]!==q?(w=(0,r.jsx)(S,{breadcrumbPath:H,onNavigateToLevel:q}),I[10]=H,I[11]=q,I[12]=w):w=I[12],I[13]!==F?(C=F&&(0,r.jsx)(_.A,{level:F}),I[13]=F,I[14]=C):C=I[14],I[15]!==z||I[16]!==F?(N=F&&j(z)&&(0,r.jsx)(o.E,{size:"xs",mx:"xs",children:"\xb7"}),I[15]=z,I[16]=F,I[17]=N):N=I[17],I[18]!==z?(k=j(z)&&(0,r.jsxs)(o.E,{size:"xs",children:[(0,r.jsx)(g.H,{value:z})," \xb7"," ",(0,b.Jk)(z)," ago"]}),I[18]=z,I[19]=k):k=I[19],I[20]!==C||I[21]!==N||I[22]!==k?(A=(0,r.jsxs)(u.s,{children:[C,N,k]}),I[20]=C,I[21]=N,I[22]=k,I[23]=A):A=I[23],I[24]!==B||I[25]!==et||I[26]!==Q||I[27]!==J||I[28]!==V||I[29]!==G||I[30]!==D||I[31]!==ee||I[32]!==X?(T=V?(0,r.jsxs)(m.t,{p:"xs",mt:"sm",style:{maxHeight:et?void 0:120,overflow:"auto",overflowWrap:"break-word"},ref:Y,children:[(0,r.jsxs)(u.s,{justify:"space-between",mb:"xs",children:[(0,r.jsx)(o.E,{size:"xs",children:D}),Q>=120&&(0,r.jsx)(h.$,{size:"compact-xs",variant:"subtle",onClick:()=>ee({...X,expandSidebarHeader:!et}),children:et?(0,r.jsx)(p.A,{size:14}):(0,r.jsx)(x.A,{size:14})})]}),G,J&&(0,r.jsx)(h.$,{size:"compact-xs",variant:"subtle",color:"gray",onClick:()=>{W(E)},children:B?"Collapse":"Expand"})]}):(0,r.jsx)(m.t,{p:"xs",mt:"sm",children:(0,r.jsx)(o.E,{size:"xs",mb:"xs",children:"[Empty]"})}),I[24]=B,I[25]=et,I[26]=Q,I[27]=J,I[28]=V,I[29]=G,I[30]=D,I[31]=ee,I[32]=X,I[33]=T):T=I[33],I[34]!==O?($=(0,r.jsx)(c.a,{mt:"xs",children:(0,r.jsx)(v.V,{attributes:O})}),I[34]=O,I[35]=$):$=I[35],I[36]!==A||I[37]!==T||I[38]!==$||I[39]!==w?(L=(0,r.jsxs)(r.Fragment,{children:[w,A,T,$]}),I[36]=A,I[37]=T,I[38]=$,I[39]=w,I[40]=L):L=I[40],L}function E(e){return!e}},64501:(e,t,s)=>{"use strict";s.d(t,{A:()=>j});var r=s(6029),n=s(55729),a=s(82641),i=s(27166),l=s(43517),o=s(92789),c=s(25062),d=s(78253),u=s(94720),m=s(60665),h=s(24583),p=s(43567),x=s(98142),g=s(93108),f=s(78550),b=s(81973),v=s(24314),y=s(54970);async function _({connectionId:e,createSourceMutation:t,updateSourceMutation:s,logSourceDatabaseName:r,logSourceName:n,logSourceTableName:i,metricsSourceDatabaseName:l,metricsSourceName:o,sessionSourceDatabaseName:c,sessionSourceName:d,sessionSourceTableName:u,traceSourceDatabaseName:m,traceSourceName:h,traceSourceTableName:p,traceSourceHighlightedTraceAttributes:x,traceSourceMaterializedViews:g}){let f,b,v=r&&n&&i,y=l&&o;v&&(f=await t.mutateAsync({source:{kind:a.GL.Log,name:n,connection:e,from:{databaseName:r,tableName:i},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, SeverityText, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body",displayedTimestampValueExpression:"Timestamp"}}));let _=await t.mutateAsync({source:{kind:a.GL.Trace,name:h,connection:e,from:{databaseName:m,tableName:p},timestampValueExpression:"Timestamp",defaultTableSelectExpression:"Timestamp, ServiceName, StatusCode, round(Duration / 1e6), SpanName",serviceNameExpression:"ServiceName",eventAttributesExpression:"SpanAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"SpanName",durationExpression:"Duration",durationPrecision:9,parentSpanIdExpression:"ParentSpanId",spanKindExpression:"SpanKind",spanNameExpression:"SpanName",...v?{logSourceId:"l-758211293"}:{},statusCodeExpression:"StatusCode",statusMessageExpression:"StatusMessage",spanEventsValueExpression:"Events",highlightedTraceAttributeExpressions:x,materializedViews:g}});y&&(b=await t.mutateAsync({source:{kind:a.GL.Metric,name:o,connection:e,from:{databaseName:l,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:{[a.SX.Gauge]:"otel_metrics_gauge",[a.SX.Histogram]:"otel_metrics_histogram",[a.SX.Sum]:"otel_metrics_sum",[a.SX.Summary]:"otel_metrics_summary",[a.SX.ExponentialHistogram]:"otel_metrics_exponential_histogram"},resourceAttributesExpression:"ResourceAttributes",...v&&f?{logSourceId:f.id}:{}}}));let j=await t.mutateAsync({source:{kind:a.GL.Session,name:d,connection:e,from:{databaseName:c,tableName:u},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceSourceId:_.id,traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body"}});await Promise.all([...v&&f?[s.mutateAsync({source:{...f,sessionSourceId:j.id,traceSourceId:_.id,...y&&b?{metricSourceId:b.id}:{}}})]:[],s.mutateAsync({source:{..._,...v&&f?{logSourceId:f.id}:{},...y&&b?{metricSourceId:b.id}:{},sessionSourceId:j.id}})])}let j=(0,n.memo)(function({requireSource:e=!0}){let{data:t}=(0,b.oE)(),{data:s}=(0,g.ZY)(),j=s?.length===0?"connection":t?.length===0&&e?"auto-detect":void 0,[S,w]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{null!=j&&null==S&&w(j)},[j,S]);let E=(0,b.nd)(),C=(0,g.Ir)(),N=(0,b.sr)(),k=(0,b.YI)(),A=(0,f.Ge)(),[T,$]=(0,n.useState)(!1),[L,I]=(0,n.useState)(!1),[R,M]=(0,n.useState)([]),D=(0,n.useCallback)(async e=>{try{$(!0),I(!0);let t=await A.getOtelTables({connectionId:e});if(!t)return void w("source");let s=[];if(t.tables.logs){let r=await (0,b.Ys)({databaseName:t.database,tableName:t.tables.logs,connectionId:e,metadata:A});if(null!=r.timestampValueExpression){let n=await E.mutateAsync({source:{kind:a.GL.Log,name:"Logs",connection:e,from:{databaseName:t.database,tableName:t.tables.logs},...r,timestampValueExpression:r.timestampValueExpression}});s.push(n)}else console.error("Log source was found but missing required fields",r)}if(t.tables.traces){let r=await (0,b.Ys)({databaseName:t.database,tableName:t.tables.traces,connectionId:e,metadata:A});if(null!=r.timestampValueExpression){let n=await E.mutateAsync({source:{kind:a.GL.Trace,name:"Traces",connection:e,from:{databaseName:t.database,tableName:t.tables.traces},...r,timestampValueExpression:r.timestampValueExpression}});s.push(n)}else console.error("Trace source was found but missing required fields",r)}if(Object.values(t.tables.metrics).some(e=>null!=e)){let r={[a.SX.Gauge]:"",[a.SX.Histogram]:"",[a.SX.Sum]:"",[a.SX.Summary]:"",[a.SX.ExponentialHistogram]:""};t.tables.metrics.gauge&&(r[a.SX.Gauge]=t.tables.metrics.gauge),t.tables.metrics.histogram&&(r[a.SX.Histogram]=t.tables.metrics.histogram),t.tables.metrics.sum&&(r[a.SX.Sum]=t.tables.metrics.sum),t.tables.metrics.summary&&(r[a.SX.Summary]=t.tables.metrics.summary),t.tables.metrics.expHistogram&&(r[a.SX.ExponentialHistogram]=t.tables.metrics.expHistogram);let n=await E.mutateAsync({source:{kind:a.GL.Metric,name:"Metrics",connection:e,from:{databaseName:t.database,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:r,resourceAttributesExpression:"ResourceAttributes"}});s.push(n)}if(t.tables.sessions){let r=await (0,b.Ys)({databaseName:t.database,tableName:t.tables.sessions,connectionId:e,metadata:A}),n=s.find(e=>e.kind===a.GL.Trace);if(null!=r.timestampValueExpression&&null!=n){let i=await E.mutateAsync({source:{kind:a.GL.Session,name:"Sessions",connection:e,from:{databaseName:t.database,tableName:t.tables.sessions},...r,timestampValueExpression:r.timestampValueExpression,traceSourceId:n.id}});s.push(i)}else console.error("Session source was found but missing required fields",r)}if(0===s.length){console.error("No sources created due to missing required fields"),w("source");return}let r=s.find(e=>e.kind===a.GL.Log),n=s.find(e=>e.kind===a.GL.Trace),i=s.find(e=>e.kind===a.GL.Metric),l=s.find(e=>e.kind===a.GL.Session),o=[];r&&o.push(N.mutateAsync({source:{...r,...n?{traceSourceId:n.id}:{},...i?{metricSourceId:i.id}:{},...l?{sessionSourceId:l.id}:{}}})),n&&o.push(N.mutateAsync({source:{...n,...r?{logSourceId:r.id}:{},...i?{metricSourceId:i.id}:{},...l?{sessionSourceId:l.id}:{}}})),await Promise.all(o),M(s),m.$e.show({title:"Success",message:`Automatically detected and created ${s.length} source${s.length>1?"s":""}.`}),w("closed")}catch(e){console.error("Error auto-detecting sources:",e),m.$e.show({color:"red",title:"Error",message:"Failed to auto-detect telemetry sources. Please set up manually."}),w("source")}finally{$(!1)}},[A,E,N,w,M]);(0,n.useEffect)(()=>{"auto-detect"===S&&t?.length===0&&s&&s.length>0&&!1===T&&!1===L&&D(s[0].id)},[S,s,D,T,t,L]);let z=(0,n.useCallback)(async()=>{if(!x.Ju)try{if(t)for(let e of t)"local"===e.connection&&e.name.startsWith("Demo")&&"otel_v2"!==e.from.databaseName&&await k.mutateAsync({id:e.id});let e="";await C.mutateAsync({connection:{name:"Demo",host:"https://sql-clickhouse.clickhouse.com",username:"otel_demo",password:""}},{onSuccess(t){e=t.id},onError(e){console.error("Failed to create demo connection: ",e)}}),await _({connectionId:e,createConnectionMutation:C,createSourceMutation:E,deleteSourceMutation:k,logSourceDatabaseName:"otel_v2",logSourceName:"Demo Logs",logSourceTableName:"otel_logs",metricsSourceDatabaseName:"otel_v2",metricsSourceName:"Demo Metrics",sessionSourceDatabaseName:"otel_v2",sessionSourceName:"Demo Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_v2",traceSourceName:"Demo Traces",traceSourceTableName:"otel_traces",traceSourceMaterializedViews:[{databaseName:"otel_v2",tableName:"otel_traces_1m",dimensionColumns:"ServiceName, StatusCode",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"}]},{databaseName:"otel_v2",tableName:"otel_traces_1m_v2",dimensionColumns:"ServiceName, SpanName, SpanKind",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"},{mvColumn:"quantile__Duration",aggFn:"quantile",sourceColumn:"Duration"}]}],updateSourceMutation:N}),await _({connectionId:e,createConnectionMutation:C,createSourceMutation:E,deleteSourceMutation:k,sessionSourceDatabaseName:"otel_clickpy",sessionSourceName:"ClickPy Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_clickpy",traceSourceName:"ClickPy Traces",traceSourceTableName:"otel_traces",traceSourceHighlightedTraceAttributes:[{sqlExpression:"if((SpanAttributes['http.route']) LIKE '%dashboard%', concat('https://clickpy.clickhouse.com', path(SpanAttributes['http.target'])), '')",alias:"clickpy_link"}],updateSourceMutation:N}),m.$e.show({title:"Success",message:"Connected to HyperDX demo server."}),w("closed")}catch(e){console.error(e),m.$e.show({color:"red",title:"Error",message:"Could not connect to the HyperDX demo server, please try again later."})}},[E,C,N,k,t]);return(0,r.jsxs)(i.a,{"data-testid":"onboarding-modal",opened:null!=S&&"closed"!==S,onClose:()=>{},title:"Welcome to HyperDX",size:"xl",withCloseButton:!1,children:["connection"===S&&null!=s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.E,{size:"sm",mb:"md",children:"Lets set up your connection to ClickHouse"}),0===s.length?(0,r.jsx)(p.B,{connection:{id:"",name:"Default",host:"http://localhost:8123",username:"default",password:""},onSave:()=>{L?w("source"):w("auto-detect")},isNew:!0}):(0,r.jsx)(p.B,{connection:s[0],isNew:!1,onSave:()=>{L?w("source"):w("auto-detect")},showCancelButton:!1,showDeleteButton:!1}),!x.VO&&(0,r.jsx)(l.E,{size:"xs",mt:"md",children:"You can always add and edit connections later."}),!x.Ju&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.c,{label:"OR",my:"md"}),(0,r.jsx)(c.$,{"data-testid":"demo-server-button",variant:"secondary",w:"100%",onClick:z,children:"Connect to Demo Server"})]})]}),"auto-detect"===S&&(0,r.jsx)(r.Fragment,{children:T?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(d.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,r.jsx)(u.a,{size:"md",mb:"md"}),(0,r.jsx)(l.E,{size:"sm",c:"dimmed",mb:"md",children:"Detecting available tables..."}),(0,r.jsx)(c.$,{variant:"subtle",size:"xs",onClick:()=>{$(!1),w("source")},children:"Skip and setup manually"})]})}):R.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.$,{variant:"subtle",onClick:()=>w("connection"),p:"xs",mb:"md",children:[(0,r.jsx)(h.A,{size:14,className:"me-2"})," Back"]}),(0,r.jsxs)(l.E,{size:"sm",mb:"md",children:["We automatically detected and created"," ",R.length," source",R.length>1?"s":""," from your connection. You can review, edit, or continue."]}),(0,r.jsx)(y.v,{withCard:!1,variant:"default",showEmptyState:!1}),(0,r.jsxs)(d.s,{justify:"space-between",mt:"md",children:[(0,r.jsx)(c.$,{variant:"subtle",onClick:()=>{w("source")},children:"Add more sources"}),(0,r.jsx)(c.$,{variant:"primary",onClick:()=>{w("closed")},children:"Continue"})]})]}):(0,r.jsxs)(d.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,r.jsx)(l.E,{size:"sm",c:"dimmed",mb:"md",children:"No OTel tables detected automatically, please setup sources manually."}),(0,r.jsx)(c.$,{variant:"primary",onClick:()=>{w("source")},children:"Continue"})]})}),"source"===S&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.$,{variant:"subtle",onClick:()=>w("connection"),p:"xs",mb:"md",children:[(0,r.jsx)(h.A,{size:14,className:"me-2"})," Back"]}),(0,r.jsx)(l.E,{size:"sm",mb:"md",children:"Lets set up a source table to query telemetry from."}),(0,r.jsx)(v.Eb,{isNew:!0,defaultName:"Logs",onCreate:()=>{w("closed")}}),(0,r.jsx)(l.E,{size:"xs",mt:"lg",children:"You can always add and edit sources later."})]})]})})},65081:(e,t,s)=>{"use strict";s.d(t,{z:()=>z});var r=s(6029),n=s(75155),a=s(55729),i=s(81278),l=s.n(i),o=s(67549),c=s(83595),d=s(60449),u=s.n(d),m=s(8737),h=s(56513),p=s(3635),x=s(96061),g=s(25062),f=s(60481),b=s(22623),v=s(43517),y=s(39785),_=s(60665),j=s(24602),S=s(95316),w=s(90515),E=s(9385),C=s(41279),N=s(9841),k=s(6723),A=s(23195),T=s(45172),$=s(26355),L=s(92917),I=s(50374);function R(e,t){let s=e.slice(t.length);if(0===s.length)return null;let r=t[t.length-1],n=s.map(e=>`'${e}'`).join(", ");return`JSONExtractString(${r}, ${n})`}let M=(0,c.tG)("hdx_json_viewer_options",{normallyExpanded:!0,lineWrap:!0,tabulate:!0,filterBlanks:!1});function D(){let e,t,s,a,i,l,c,d,u,x,g,f,b,v,y,_,E=(0,n.c)(39),[C,N]=(0,o.fp)(M);return E[0]!==C||E[1]!==N?(e=()=>N({...C,lineWrap:!C.lineWrap}),E[0]=C,E[1]=N,E[2]=e):e=E[2],E[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(j.A,{size:14}),E[3]=t):t=E[3],E[4]!==e?(s=(0,r.jsx)(m.N,{color:"gray",onClick:e,children:t}),E[4]=e,E[5]=s):s=E[5],E[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(h.W.Target,{children:(0,r.jsx)(m.N,{children:(0,r.jsx)(S.A,{size:14})})}),E[6]=a):a=E[6],E[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(h.W.Label,{lh:1,py:6,children:"Properties view options"}),E[7]=i):i=E[7],E[8]!==C||E[9]!==N?(l=()=>N({...C,normallyExpanded:!C.normallyExpanded}),E[8]=C,E[9]=N,E[10]=l):l=E[10],E[11]!==C.normallyExpanded?(c=C.normallyExpanded?(0,r.jsx)(w.A,{size:14,className:"ps-2"}):null,E[11]=C.normallyExpanded,E[12]=c):c=E[12],E[13]!==l||E[14]!==c?(d=(0,r.jsx)(h.W.Item,{onClick:l,lh:"1",py:8,rightSection:c,children:"Expand all properties"}),E[13]=l,E[14]=c,E[15]=d):d=E[15],E[16]!==C.tabulate?(u=C.tabulate?(0,r.jsx)(w.A,{size:14,className:"ps-2"}):null,E[16]=C.tabulate,E[17]=u):u=E[17],E[18]!==C||E[19]!==N?(x=()=>N({...C,tabulate:!C.tabulate}),E[18]=C,E[19]=N,E[20]=x):x=E[20],E[21]!==u||E[22]!==x?(g=(0,r.jsx)(h.W.Item,{lh:"1",py:8,rightSection:u,onClick:x,children:"Tabulate"}),E[21]=u,E[22]=x,E[23]=g):g=E[23],E[24]!==C.filterBlanks?(f=C.filterBlanks?(0,r.jsx)(w.A,{size:14,className:"ps-2"}):null,E[24]=C.filterBlanks,E[25]=f):f=E[25],E[26]!==C||E[27]!==N?(b=()=>N({...C,filterBlanks:!C.filterBlanks}),E[26]=C,E[27]=N,E[28]=b):b=E[28],E[29]!==f||E[30]!==b?(v=(0,r.jsx)(h.W.Item,{lh:"1",py:8,rightSection:f,onClick:b,children:"Hide blank values"}),E[29]=f,E[30]=b,E[31]=v):v=E[31],E[32]!==g||E[33]!==v||E[34]!==d?(y=(0,r.jsxs)(h.W,{width:240,withinPortal:!1,children:[a,(0,r.jsxs)(h.W.Dropdown,{children:[i,d,g,v]})]}),E[32]=g,E[33]=v,E[34]=d,E[35]=y):y=E[35],E[36]!==y||E[37]!==s?(_=(0,r.jsxs)(p.Y,{children:[s,y]}),E[36]=y,E[37]=s,E[38]=_):_=E[38],_}function z(e){let t,s,i,c,d,m,h,j,S,w,z,P,q=(0,n.c)(31),{data:O,jsonColumns:V}=e;q[0]!==V?(t=void 0===V?[]:V,q[0]=V,q[1]=t):t=q[1];let H=t,{onPropertyAddClick:B,generateSearchUrl:W,generateChartUrl:K,displayedColumns:J,toggleColumn:G}=(0,a.useContext)(I.D),[U,Y]=(0,a.useState)(""),[Q]=(0,y.o)(U,100),Z=(0,o.md)(M);e:{let e;if(!O){s=null;break e}if(q[2]!==O||q[3]!==Q||q[4]!==Z.filterBlanks){let t=Object.fromEntries(Object.entries(O).filter(F));Z.filterBlanks&&(t=function e(t){if(null!==t&&""!==t){if(Array.isArray(t)){let s=t.map(e).filter(e=>void 0!==e);return s.length>0?s:void 0}if("object"==typeof t){let s={};for(let[r,n]of Object.entries(t)){let t=e(n);void 0!==t&&(s[r]=t)}return Object.keys(s).length>0?s:void 0}return t}}(t)),e=function e(t,s){if("object"!=typeof t||null===t||""===s)return t;let r={};for(let[n,a]of Object.entries(t))if(null!==a&&((n.toLowerCase().includes(s.toLowerCase())||"string"==typeof a&&a.toLowerCase().includes(s.toLowerCase()))&&(r[n]=a),"object"==typeof a)){let t=e(a,s);Object.keys(t).length>0&&(r[n]=t)}return r}(t,Q),q[2]=O,q[3]=Q,q[4]=Z.filterBlanks,q[5]=e}else e=q[5];s=e}let X=s;q[6]!==J||q[7]!==K||q[8]!==W||q[9]!==H||q[10]!==B||q[11]!==X||q[12]!==G?(i=e=>{let{keyPath:t,value:s,isInParsedJson:n,parsedJsonRootPath:a}=e,i=[],o=(0,L.uc)(t,H),c=t.length>0&&H?.includes(t[0]);if(null!=B&&"string"==typeof s&&s&&"Timestamp"!=o&&"TimestampTime"!=o&&i.push({key:"add-to-search",label:(0,r.jsxs)(p.Y,{gap:2,children:[(0,r.jsx)(E.A,{size:14}),"Add to Filters"]}),title:"Add to Filters",onClick:()=>{let e;if(n&&a){let s=R(t,a);e=s||(c?`toString(${o})`:o)}else e=c?`toString(${o})`:o;B(e,s),_.$e.show({color:"green",message:`Added "${o} = ${s}" to filters`})}}),W&&"object"!=typeof s&&i.push({key:"search",label:(0,r.jsxs)(p.Y,{gap:2,children:[(0,r.jsx)(C.A,{size:14}),"Search"]}),title:"Search for this value only",onClick:()=>{let e=o;if(n&&a){let s=R(t,a);s&&(e=s)}let r=`${e} = ${"string"==typeof s?`'${s}'`:s}`;("Timestamp"==e||"TimestampTime"==e)&&(r=`${e} = parseDateTime64BestEffort('${s}', 9)`),l().push(W({where:r,whereLanguage:"sql"}))}}),K&&"number"==typeof s&&i.push({key:"chart",label:(0,r.jsx)(N.A,{size:14}),title:"Chart",onClick:()=>{let e=o;if(n&&a){let s=R(t,a);s&&(e=s)}l().push(K({aggFn:"avg",field:e,groupBy:[]}))}}),G&&"object"!=typeof s){let e=o;if(n&&a){let s=R(t,a);s&&(e=s)}let s=J?.includes(e);i.push({key:"toggle-column",label:s?(0,r.jsxs)(p.Y,{gap:2,children:[(0,r.jsx)(k.A,{size:14}),"Column"]}):(0,r.jsxs)(p.Y,{gap:2,children:[(0,r.jsx)(A.A,{size:14}),"Column"]}),title:s?`Remove ${o} column from results table`:`Add ${o} column to results table`,onClick:()=>{G(e),_.$e.show({color:"green",message:`Column "${o}" ${s?"removed from":"added to"} results table`})}})}return"object"==typeof s?i.push({key:"copy-object",label:"Copy Object",onClick:()=>{let e;e=n&&a?s:0===t.length?X:u()(X,t),window.navigator.clipboard.writeText(JSON.stringify(e,null,2)),_.$e.show({color:"green",message:"Copied object to clipboard"})}}):i.push({key:"copy-value",label:(0,r.jsxs)(p.Y,{gap:2,children:[(0,r.jsx)(T.A,{size:14}),"Copy Value"]}),onClick:()=>{window.navigator.clipboard.writeText("string"==typeof s?s:JSON.stringify(s,null,2)),_.$e.show({color:"green",message:"Value copied to clipboard"})}}),i},q[6]=J,q[7]=K,q[8]=W,q[9]=H,q[10]=B,q[11]=X,q[12]=G,q[13]=i):i=q[13];let ee=i;return q[14]===Symbol.for("react.memo_cache_sentinel")?(c=e=>Y(e.currentTarget.value),d=(0,r.jsx)(C.A,{size:16}),q[14]=c,q[15]=d):(c=q[14],d=q[15]),q[16]!==U?(m=(0,r.jsx)(x.p,{size:"xs",w:"100%",maw:"400px",placeholder:"Search properties by key or value",value:U,onChange:c,leftSection:d}),h=U&&(0,r.jsx)(g.$,{variant:"secondary",size:"xs",onClick:()=>Y(""),children:"Clear"}),q[16]=U,q[17]=m,q[18]=h):(m=q[17],h=q[18]),q[19]===Symbol.for("react.memo_cache_sentinel")?(S=(0,r.jsx)("div",{className:"flex-grow-1"}),j=(0,r.jsx)(D,{}),q[19]=j,q[20]=S):(j=q[19],S=q[20]),q[21]!==m||q[22]!==h?(w=(0,r.jsx)(f.a,{py:"xs",children:(0,r.jsxs)(p.Y,{gap:"xs",children:[m,h,S,j]})}),q[21]=m,q[22]=h,q[23]=w):w=q[23],q[24]!==ee||q[25]!==Z||q[26]!==X?(z=(0,r.jsx)(b.t,{bg:"transparent",mt:"sm",children:null!=X?(0,r.jsx)($.A,{data:X,getLineActions:ee,...Z}):(0,r.jsx)(v.E,{children:"No data"})}),q[24]=ee,q[25]=Z,q[26]=X,q[27]=z):z=q[27],q[28]!==w||q[29]!==z?(P=(0,r.jsxs)("div",{className:"flex-grow-1 overflow-auto",children:[w,z]}),q[28]=w,q[29]=z,q[30]=P):P=q[30],P}function F(e){return!e[0].startsWith("__hdx_")}},65723:e=>{e.exports={container:"HyperJson_container__GNwuL",withTabulate:"HyperJson_withTabulate__MzU_L",key:"HyperJson_key__AQ6QF",withLineWrap:"HyperJson_withLineWrap__gfDDi",valueContainer:"HyperJson_valueContainer__Ui_5y",string:"HyperJson_string__vkc96",treeNode:"HyperJson_treeNode__bDzsg",line:"HyperJson_line__n3Ltu",lineMenu:"HyperJson_lineMenu__Sg84e",expanded:"HyperJson_expanded__gHv9Z",object:"HyperJson_object__ChLzl",array:"HyperJson_array__rJBNC",expandable:"HyperJson_expandable__futZ8",lineMenuBtn:"HyperJson_lineMenuBtn__QKgME",clickable:"HyperJson_clickable__UNRbd",value:"HyperJson_value__aSXTw",hoverable:"HyperJson_hoverable__oWIY9",hoverContent:"HyperJson_hoverContent__2Ir2x",jsonBtn:"HyperJson_jsonBtn__T1ObP",keyContainer:"HyperJson_keyContainer___KqED",number:"HyperJson_number__VFmbX",boolean:"HyperJson_boolean__KkQsQ",expandMoreProps:"HyperJson_expandMoreProps__uHkwZ"}},66773:e=>{e.exports={panel:"LogSidePanel_panel__JgveL",panelDragBar:"LogSidePanel_panelDragBar__sFi62",panelHeader:"LogSidePanel_panelHeader__Fl4jA",panelDetails:"LogSidePanel_panelDetails__wGBLr",panelContent:"LogSidePanel_panelContent__Olcws",severityChip:"LogSidePanel_severityChip__hIK7I",loadingState:"LogSidePanel_loadingState__b5y0C",panelSectionWrapper:"LogSidePanel_panelSectionWrapper__gOBKh",panelSectionWrapperTitle:"LogSidePanel_panelSectionWrapperTitle__eBMsG",kbdShortcuts:"LogSidePanel_kbdShortcuts__ogLDt",kbd:"LogSidePanel_kbd__gmxFq",kbdDivider:"LogSidePanel_kbdDivider____Gi4",lineContext:"LogSidePanel_lineContext__rCVjx",lineContextCurrentLine:"LogSidePanel_lineContextCurrentLine__K3t4J",lineContextLineNo:"LogSidePanel_lineContextLineNo__LuYmr",emptyMessage:"LogSidePanel_emptyMessage__6fbwp",traceTimelineLabel:"LogSidePanel_traceTimelineLabel___WCaD",traceTimelineLabelHighlighted:"LogSidePanel_traceTimelineLabelHighlighted__elopt",stacktraceRowInteractive:"LogSidePanel_stacktraceRowInteractive__i18zL"}},69922:(e,t,s)=>{"use strict";s.d(t,{w:()=>i});var r=s(6029),n=s(75155),a=s(60481);function i(e){let t,s,i=(0,n.c)(5),{children:l,style:o}=e;return i[0]!==o?(t={width:"100%",display:"flex",flexDirection:"column",background:"var(--color-bg-body)",borderRadius:"var(--mantine-radius-sm)",border:"1px solid var(--color-border)",...o},i[0]=o,i[1]=t):t=i[1],i[2]!==l||i[3]!==t?(s=(0,r.jsx)(a.a,{py:"sm",px:"xs",style:t,children:l}),i[2]=l,i[3]=t,i[4]=s):s=i[4],s}},70727:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>u,C2:()=>d,ZO:()=>c});var r=s(55729),n=s(6033),a=s.n(n),i=s(80519),l=s.n(i),o=s(35467);let c={ID:"__hyperdx_id",ALIAS_WITH:"__hyperdx_alias_with"};function d(e){return e?Object.entries(e).filter(([,e])=>null!=e&&""!==e.trim()).map(([e,t])=>({name:e,sql:{sql:t,params:{}},isSubquery:!1})):[]}function u({meta:e,aliasMap:t}){let s=(0,r.useMemo)(()=>new Map(e?.map(e=>{let s=null!=t?t[e.name]??e.name:e.name;return[e.name,{...e,valueExpr:s,jsType:(0,o.rj)(e.type)}]})),[e,t]),n=(0,r.useMemo)(()=>d(t),[t]);return(0,r.useCallback)(e=>{let{[c.ID]:t,[c.ALIAS_WITH]:r,...i}=e;return{where:Object.entries(i).map(([e,t])=>{let r=s.get(e),n=r?.type,i=r?.jsType,c=r?.valueExpr;if(null==n)throw Error(`Column type not found for ${e}, ${JSON.stringify(s)}`);if(null==c)throw Error(`valueExpr not found for ${e}, ${JSON.stringify(s)}`);switch(i){case o.A2.Date:return l().format("?=parseDateTime64BestEffort(?, 9)",[l().raw(c),t]);case o.A2.Array:case o.A2.Map:return l().format("?=JSONExtract(?, ?)",[l().raw(c),t,n]);case o.A2.Tuple:return l().format("toJSONString(?)=?",[l().raw(c),t]);case o.A2.JSON:return l().format("lower(hex(MD5(toString(?))))=?",[l().raw(c),a()(t).toString()]);case o.A2.Dynamic:if(null==t||"null"===t)return l().format("isNull(??)",[c]);return(t.length>1e3||e.length>1e3)&&console.warn("Search value/object key too large."),l().format("toJSONString(?) = coalesce(toJSONString(JSONExtract(?, 'Dynamic')), toJSONString(?))",[l().raw(c),t,t]);default:if(null==t)return l().format("isNull(?)",[l().raw(c)]);if(t.length>512)return l().format("lower(hex(MD5(leftUTF8(?, 1000))))=?",[l().raw(c),a()(t.substring(0,1e3)).toString()]);return l().format("?=?",[l().raw(c),t])}}).join(" AND "),aliasWith:n}},[s,n])}},72075:(e,t,s)=>{"use strict";s.d(t,{L:()=>x,X:()=>p});var r=s(6029),n=s(75155);s(55729);var a=s(75828),i=s.n(a),l=s(58333),o=s(23474),c=s(79220),d=s(39696),u=s(68593),m=s(34011),h=s.n(m);let p=({data:e=[],columns:t,emptyMessage:s,hideHeader:n,borderless:a,density:l="normal",interactive:o,tableMeta:m})=>{let p=(0,c.N4)({data:e,columns:t,meta:m,getCoreRowModel:(0,d.HT)()});return e.length?(0,r.jsx)("div",{className:i()(h().tableWrapper,{[h().tableBorderless]:a,[h().tableDensityZero]:"zero"===l,[h().tableDensityCompact]:"compact"===l,[h().tableDensityComfortable]:"comfortable"===l,[h().tableInteractive]:o}),children:(0,r.jsxs)("table",{children:[!n&&(0,r.jsx)("thead",{children:p.getHeaderGroups().map(e=>(0,r.jsx)("tr",{children:e.headers.map(e=>(0,r.jsx)("th",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)("tbody",{children:p.getRowModel().rows.map(e=>(0,r.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,r.jsx)("td",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}):(0,r.jsx)("div",{className:h().emptyMessage,children:s})},x=e=>{let t,s,a,i,c=(0,n.c)(12),{onClick:d,title:u,label:m,biIcon:p}=e;return c[0]!==m?(t=m&&(0,r.jsx)("span",{children:m}),c[0]=m,c[1]=t):t=c[1],c[2]!==p?(s="chevron-up"===p&&(0,r.jsx)(l.A,{size:14}),c[2]=p,c[3]=s):s=c[3],c[4]!==p?(a="chevron-down"===p&&(0,r.jsx)(o.A,{size:14}),c[4]=p,c[5]=a):a=c[5],c[6]!==d||c[7]!==t||c[8]!==s||c[9]!==a||c[10]!==u?(i=(0,r.jsxs)("button",{className:h().tableCellButton,title:u,onClick:d,children:[t,s,a]}),c[6]=d,c[7]=t,c[8]=s,c[9]=a,c[10]=u,c[11]=i):i=c[11],i}},74620:e=>{e.exports={tableWrapper:"LogTable_tableWrapper__1X2n1",muted:"LogTable_muted__aIZSq",table:"LogTable_table__l63_F",tableHead:"LogTable_tableHead__sTgaD",tableRow:"LogTable_tableRow__7BXPl",tableRow__selected:"LogTable_tableRow__selected__DoaNL",rowButtons:"LogTable_rowButtons__XTh2c",rowContentButton:"LogTable_rowContentButton__fjkQI",expandButton:"LogTable_expandButton__nKsH0",expandedRowContent:"LogTable_expandedRowContent__Ps6mn",expanded:"LogTable_expanded___w9XA",expandButtonSeparator:"LogTable_expandButtonSeparator__lYPgm",isWrapped:"LogTable_isWrapped__ksgah",isTruncated:"LogTable_isTruncated__jXz22",iconActionButton:"LogTable_iconActionButton__hO7Fo",copied:"LogTable_copied__wZME1",fieldTextContainer:"LogTable_fieldTextContainer__4Dj7Q",fieldText:"LogTable_fieldText__zVjaq",chart:"LogTable_chart__8kFaD",truncated:"LogTable_truncated__Hv6oN",wrapped:"LogTable_wrapped__Dz8eR",fieldTextPopover:"LogTable_fieldTextPopover__dygEB"}},75359:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var r,n=s(6029),a=s(75155),i=s(55729),l=s(41038),o=s(81973),c=s(96958),d=s(92917),u=s(76539),m=s(37901),h=s(26837),p=s(50374),x=s(46061);function g(e){let t,s,r,c,d,m,h,g,f,v=(0,a.c)(47),{sourceId:y,config:_,onError:j,onScroll:S,context:w,onExpandedRowsChange:E,denoiseResults:C,collapseAllRows:N,isLive:k,enabled:A,isNestedPanel:T,breadcrumbPath:$,onSidebarOpen:L,onSortingChange:I,initialSortBy:R,variant:M}=e;v[0]!==y?(t={id:y},v[0]=y,v[1]=t):t=v[1];let{data:D}=(0,o.Fo)(t),[z,F]=(0,l.ZA)("rowWhere"),[P,q]=(0,l.ZA)("rowSource");v[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],v[2]=s):s=v[2];let[O,V]=(0,i.useState)(s),{setContextRowId:H,setContextRowSource:B}=(0,u.g)();v[3]!==L||v[4]!==F||v[5]!==q||v[6]!==y?(r=e=>{F(e.where),V(e.aliasWith),q(y),L?.(e.where)},v[3]=L,v[4]=F,v[5]=q,v[6]=y,v[7]=r):r=v[7];let W=r;v[8]!==T||v[9]!==H||v[10]!==B||v[11]!==F||v[12]!==q?(c=()=>{F(null),q(null),T||(H(null),B(null))},v[8]=T,v[9]=H,v[10]=B,v[11]=F,v[12]=q,v[13]=c):c=v[13];let K=c;v[14]!==D?(d=e=>D?(0,n.jsx)(b,{source:D,rowId:e.id,aliasWith:e.aliasWith}):(0,n.jsx)("div",{className:"p-3 text-muted",children:"Loading..."}),v[14]=D,v[15]=d):d=v[15];let J=d;v[16]!==w?(m=w??{},v[16]=w,v[17]=m):m=v[17],v[18]!==O||v[19]!==$||v[20]!==T||v[21]!==K||v[22]!==z||v[23]!==P||v[24]!==D||v[25]!==y?(h=D&&(P===y||!P)&&(0,n.jsx)(p.A,{source:D,rowId:z??void 0,aliasWith:O,isNestedPanel:T,breadcrumbPath:$,onClose:K}),v[18]=O,v[19]=$,v[20]=T,v[21]=K,v[22]=z,v[23]=P,v[24]=D,v[25]=y,v[26]=h):h=v[26];let G=z??void 0,U=k??!0;return v[27]!==N||v[28]!==_||v[29]!==C||v[30]!==A||v[31]!==R||v[32]!==j||v[33]!==E||v[34]!==W||v[35]!==S||v[36]!==I||v[37]!==J||v[38]!==y||v[39]!==G||v[40]!==U||v[41]!==M?(g=(0,n.jsx)(x.rD,{config:_,sourceId:y,onRowDetailsClick:W,highlightedLineId:G,enabled:A,isLive:U,queryKeyPrefix:"dbSqlRowTable",onSortingChange:I,denoiseResults:C,initialSortBy:R,renderRowDetails:J,onScroll:S,onError:j,onExpandedRowsChange:E,collapseAllRows:N,variant:M}),v[27]=N,v[28]=_,v[29]=C,v[30]=A,v[31]=R,v[32]=j,v[33]=E,v[34]=W,v[35]=S,v[36]=I,v[37]=J,v[38]=y,v[39]=G,v[40]=U,v[41]=M,v[42]=g):g=v[42],v[43]!==g||v[44]!==m||v[45]!==h?(f=(0,n.jsxs)(p.D.Provider,{value:m,children:[h,g]}),v[43]=g,v[44]=m,v[45]=h,v[46]=f):f=v[46],f}var f=((r=f||{}).Overview="overview",r.ColumnValues="columnValues",r);function b(e){let t,s,r,i,l,o,u=(0,a.c)(20),{source:p,rowId:x,aliasWith:g}=e,[f,b]=(0,d.Mj)("hdx-expanded-row-default-tab","columnValues");return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{text:"Overview",value:"overview"},{text:"Column Values",value:"columnValues"}],u[0]=t):t=u[0],u[1]!==f||u[2]!==b?(s=(0,n.jsx)("div",{className:"px-3 pt-2 position-relative",children:(0,n.jsx)(c.A,{className:"fs-8",items:t,activeItem:f,onClick:b})}),u[1]=f,u[2]=b,u[3]=s):s=u[3],u[4]!==f||u[5]!==g||u[6]!==x||u[7]!==p?(r="overview"===f&&(0,n.jsx)("div",{className:"inline-overview-panel",children:(0,n.jsx)(h.W,{source:p,rowId:x,aliasWith:g})}),u[4]=f,u[5]=g,u[6]=x,u[7]=p,u[8]=r):r=u[8],u[9]!==f||u[10]!==g||u[11]!==x||u[12]!==p?(i="columnValues"===f&&(0,n.jsx)(m.dD,{source:p,rowId:x,aliasWith:g}),u[9]=f,u[10]=g,u[11]=x,u[12]=p,u[13]=i):i=u[13],u[14]!==r||u[15]!==i?(l=(0,n.jsxs)("div",{children:[r,i]}),u[14]=r,u[15]=i,u[16]=l):l=u[16],u[17]!==s||u[18]!==l?(o=(0,n.jsxs)("div",{className:"position-relative",children:[s,l]}),u[17]=s,u[18]=l,u[19]=o):o=u[19],o}},76539:(e,t,s)=>{"use strict";s.d(t,{A:()=>N,g:()=>C});var r,n=s(6029),a=s(75155),i=s(55729),l=s(67264),o=s.n(l),c=s(41038),d=s(1909),u=s(3145),m=s(78253),h=s(3635),p=s(90124),x=s(43085),g=s(39785),f=s(64467),b=s(26814),v=s(43370),y=s(81973),_=s(92917),j=s(37901),S=s(50374),w=s(46061),E=((r=E||{}).All="all",r.Custom="custom",r.Host="host",r.Node="k8s.node.name",r.Pod="k8s.pod.name",r.Service="service",r);function C(e){let t,s,r,n=(0,a.c)(11),l=(0,c.ZA)("contextRowId",c.tU),o=(0,c.ZA)("contextRowSource",c.tU);n[0]!==l||n[1]!==o?(t={contextRowId:l,contextRowSource:o},n[0]=l,n[1]=o,n[2]=t):t=n[2];let d=t,u=(0,i.useState)(null),m=(0,i.useState)(null);n[3]!==u||n[4]!==m?(s={contextRowId:u,contextRowSource:m},n[3]=u,n[4]=m,n[5]=s):s=n[5];let h=s,p=e?h:d;return n[6]!==p.contextRowId[0]||n[7]!==p.contextRowId[1]||n[8]!==p.contextRowSource[0]||n[9]!==p.contextRowSource[1]?(r={contextRowId:p.contextRowId[0],contextRowSource:p.contextRowSource[0],setContextRowId:p.contextRowId[1],setContextRowSource:p.contextRowSource[1]},n[6]=p.contextRowId[0],n[7]=p.contextRowId[1],n[8]=p.contextRowSource[0],n[9]=p.contextRowSource[1],n[10]=r):r=n[10],r}function N(e){let t,s,r,l,c,E,N,k,A,T,$,L,I,R,M,D,z,F,P,q,O,V,H,B,W,K,J,G=(0,a.c)(97),{source:U,dbSqlRowTableConfig:Y,rowData:Q,rowId:Z,breadcrumbPath:X,onBreadcrumbClick:ee}=e;G[0]!==X?(t=void 0===X?[]:X,G[0]=X,G[1]=t):t=G[1];let et=t,es=Q[j.$_.TIMESTAMP];G[2]!==Y?(s=Y??{},G[2]=Y,G[3]=s):s=G[3];let{whereLanguage:er}=s,en=void 0===er?"lucene":er;G[4]===Symbol.for("react.memo_cache_sentinel")?(r=o()("30s"),G[4]=r):r=G[4];let[ea,ei]=(0,i.useState)(r),[el,eo]=(0,i.useState)("all"),ec=en??"lucene";G[5]!==ec?(l={defaultValues:{where:"",whereLanguage:ec}},G[5]=ec,G[6]=l):l=G[6];let{control:ed}=(0,d.mN)(l);G[7]!==ed?(c={control:ed,name:"where"},G[7]=ed,G[8]=c):c=G[8];let eu=(0,d.FH)(c),[em]=(0,g.o)(eu,1e3),{contextRowId:eh,contextRowSource:ep,setContextRowId:ex,setContextRowSource:eg}=C(et.length>0),ef=ep||"";G[9]!==ef?(E={id:ef},G[9]=ef,G[10]=E):E=G[10];let{data:eb}=(0,y.Fo)(E);G[11]===Symbol.for("react.memo_cache_sentinel")?(N=[],G[11]=N):N=G[11];let[ev,ey]=(0,i.useState)(N);G[12]!==ex||G[13]!==eg?(k=()=>{ex(null),eg(null)},G[12]=ex,G[13]=eg,G[14]=k):k=G[14];let e_=k,{setChildModalOpen:ej}=(0,i.useContext)(S.D);G[15]!==ex||G[16]!==eg||G[17]!==U.id?(A=e=>{ex(e.where),ey(e.aliasWith),eg(U.id)},G[15]=ex,G[16]=eg,G[17]=U.id,G[18]=A):A=G[18];let eS=A;G[19]!==es?(T=new Date(es),G[19]=es,G[20]=T):T=G[20];let ew=T,eE=ew.getTime()-ea/2;G[21]!==eE?($=new Date(eE),G[21]=eE,G[22]=$):$=G[22];let eC=ew.getTime()+ea/2;G[23]!==eC?(L=new Date(eC),G[23]=eC,G[24]=L):L=G[24],G[25]!==$||G[26]!==L?(I=[$,L],G[25]=$,G[26]=L,G[27]=I):I=G[27];let eN=I;G[28]!==Q.ResourceAttributes?(R=Q.ResourceAttributes??{},G[28]=Q.ResourceAttributes,G[29]=R):R=G[29];let{"k8s.node.name":ek,"k8s.pod.name":eA,"host.name":eT,"service.name":e$}=R;G[30]===Symbol.for("react.memo_cache_sentinel")?(M={field:"",value:""},G[30]=M):M=G[30];let eL=em||"";G[31]!==eL?(D={field:"",value:eL},G[31]=eL,G[32]=D):D=G[32],G[33]!==e$?(z={field:"service.name",value:e$},G[33]=e$,G[34]=z):z=G[34],G[35]!==eT?(F={field:"host.name",value:eT},G[35]=eT,G[36]=F):F=G[36],G[37]!==eA?(P={field:"k8s.pod.name",value:eA},G[37]=eA,G[38]=P):P=G[38],G[39]!==ek?(q={field:"k8s.node.name",value:ek},G[39]=ek,G[40]=q):q=G[40],G[41]!==D||G[42]!==z||G[43]!==F||G[44]!==P||G[45]!==q?(O={all:M,custom:D,service:z,host:F,"k8s.pod.name":P,"k8s.node.name":q},G[41]=D,G[42]=z,G[43]=F,G[44]=P,G[45]=q,G[46]=O):O=G[46];let eI=O;G[47]!==eI||G[48]!==en?(V=e=>{let t="sql"===en,s=eI[e];return"all"===e?s.value:"custom"===e?s.value.trim():(0,_.ji)("ResourceAttributes",s.field,s.value,t)},G[47]=eI,G[48]=en,G[49]=V):V=G[49];let eR=V;G[50]!==eT||G[51]!==ek||G[52]!==eA||G[53]!==e$?(H=function(){return[{label:"All",value:"all"},...e$?[{label:"Service",value:"service"}]:[],...eT?[{label:"Host",value:"host"}]:[],...eA?[{label:"Pod",value:"k8s.pod.name"}]:[],...ek?[{label:"Node",value:"k8s.node.name"}]:[],{label:"Custom",value:"custom"}]},G[50]=eT,G[51]=ek,G[52]=eA,G[53]=e$,G[54]=H):H=G[54];let eM=H;e:{let e,t,s;G[55]!==el||G[56]!==eR?(e=eR(el),G[55]=el,G[56]=eR,G[57]=e):e=G[57];let r=e;if(!Y){let e,t,s=U.defaultTableSelectExpression||"";G[58]===Symbol.for("react.memo_cache_sentinel")?(e={limit:200},G[58]=e):e=G[58];let n=`${U.timestampValueExpression} DESC`;G[59]!==eN||G[60]!==en||G[61]!==U.connection||G[62]!==U.from||G[63]!==U.timestampValueExpression||G[64]!==s||G[65]!==n||G[66]!==r?(t={connection:U.connection,from:U.from,timestampValueExpression:U.timestampValueExpression,select:s,limit:e,orderBy:n,where:r,whereLanguage:en,dateRange:eN},G[59]=eN,G[60]=en,G[61]=U.connection,G[62]=U.from,G[63]=U.timestampValueExpression,G[64]=s,G[65]=n,G[66]=r,G[67]=t):t=G[67],B=t;break e}G[68]===Symbol.for("react.memo_cache_sentinel")?(t=[],G[68]=t):t=G[68],G[69]!==Y||G[70]!==eN||G[71]!==en||G[72]!==r?(s={...Y,where:r,whereLanguage:en,dateRange:eN,filters:t},G[69]=Y,G[70]=eN,G[71]=en,G[72]=r,G[73]=s):s=G[73],B=s}let eD=B;return G[74]!==eI||G[75]!==eD||G[76]!==el||G[77]!==ed||G[78]!==eM||G[79]!==eS||G[80]!==en||G[81]!==ea||G[82]!==Z||G[83]!==ej||G[84]!==U?(W=eD&&(0,n.jsxs)(m.s,{direction:"column",mih:"0px",style:{flexGrow:1},children:[(0,n.jsxs)(h.Y,{justify:"space-between",p:"sm",children:[(0,n.jsx)(p.I,{size:"xs",data:eM(),value:el,onChange:e=>eo(e)}),"custom"===el&&(0,n.jsx)(b.A,{name:"whereLanguage",control:ed,sqlInput:"lucene"===en?null:(0,n.jsx)(f.Z,{tableConnection:(0,u.VO)(U),control:ed,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",language:"sql",enableHotkey:!0,size:"sm"}),luceneInput:"sql"===en?null:(0,n.jsx)(v.A,{tableConnection:(0,u.VO)(U),control:ed,name:"where",language:"lucene",placeholder:"Lucene where clause (ex. column:value)",enableHotkey:!0,size:"sm"})}),(0,n.jsx)(p.I,{size:"xs",data:[{label:"100ms",value:o()("100ms").toString()},{label:"500ms",value:o()("500ms").toString()},{label:"1s",value:o()("1s").toString()},{label:"5s",value:o()("5s").toString()},{label:"30s",value:o()("30s").toString()},{label:"1m",value:o()("1m").toString()},{label:"5m",value:o()("5m").toString()},{label:"15m",value:o()("15m").toString()}],value:ea.toString(),onChange:e=>ei(Number(e))})]}),(0,n.jsx)(h.Y,{p:"sm",children:(0,n.jsxs)("div",{children:["all"!==el&&(0,n.jsxs)(x.E,{size:"md",variant:"default",children:[el,":",eI[el].value]}),(0,n.jsxs)(x.E,{size:"md",variant:"default",children:["Time range: \xb1",o()(ea/2)]})]})}),(0,n.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,n.jsx)(w.rD,{sourceId:U.id,highlightedLineId:Z,showExpandButton:!1,isLive:!1,config:eD,queryKeyPrefix:"context",onRowDetailsClick:eS,onChildModalOpen:ej})})]}),G[74]=eI,G[75]=eD,G[76]=el,G[77]=ed,G[78]=eM,G[79]=eS,G[80]=en,G[81]=ea,G[82]=Z,G[83]=ej,G[84]=U,G[85]=W):W=G[85],G[86]!==et||G[87]!==ev||G[88]!==eh||G[89]!==eb||G[90]!==e_||G[91]!==ee||G[92]!==Q?(K=eh&&eb&&(0,n.jsx)(S.A,{source:eb,rowId:eh,aliasWith:ev,onClose:e_,isNestedPanel:!0,breadcrumbPath:[...et,{label:"Surrounding Context",rowData:Q}],onBreadcrumbClick:ee}),G[86]=et,G[87]=ev,G[88]=eh,G[89]=eb,G[90]=e_,G[91]=ee,G[92]=Q,G[93]=K):K=G[93],G[94]!==W||G[95]!==K?(J=(0,n.jsxs)(n.Fragment,{children:[W,K]}),G[94]=W,G[95]=K,G[96]=J):J=G[96],J}},78075:(e,t,s)=>{"use strict";s.d(t,{E:()=>x});var r=s(55729),n=s(95913),a=s(28171),i=s(24090),l=s(4308);function o(e,t){return e.filter(e=>!t.includes(e))}var c=class extends i.Q{#e;#t;#s;#r;#n;#a;#i;constructor(e,t,s){super(),this.#e=e,this.#s=[],this.#r=[],this.#t=[],this.setQueries(t)}onSubscribe(){1===this.listeners.size&&this.#r.forEach(e=>{e.subscribe(t=>{this.#l(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#r.forEach(e=>{e.destroy()})}setQueries(e,t,s){this.#s=e,n.j.batch(()=>{let e=this.#r,t=this.#o(this.#s);t.forEach(e=>e.observer.setOptions(e.defaultedQueryOptions,s));let r=t.map(e=>e.observer),n=r.map(e=>e.getCurrentResult()),a=r.some((t,s)=>t!==e[s]);e.length===r.length&&!a||(this.#r=r,this.#t=n,this.hasListeners()&&(o(e,r).forEach(e=>{e.destroy()}),o(r,e).forEach(e=>{e.subscribe(t=>{this.#l(e,t)})}),this.#c()))})}getCurrentResult(){return this.#t}getQueries(){return this.#r.map(e=>e.getCurrentQuery())}getObservers(){return this.#r}getOptimisticResult(e,t){let s=this.#o(e),r=s.map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions));return[r,e=>this.#d(e??r,t),()=>s.map((e,t)=>{let n=r[t];return e.defaultedQueryOptions.notifyOnChangeProps?n:e.observer.trackResult(n,e=>{s.forEach(t=>{t.observer.trackProp(e)})})})]}#d(e,t){return t?(this.#n&&this.#t===this.#i&&t===this.#a||(this.#a=t,this.#i=this.#t,this.#n=(0,l.BH)(this.#n,t(e))),this.#n):e}#o(e){let t=new Map(this.#r.map(e=>[e.options.queryHash,e])),s=e.map(e=>this.#e.defaultQueryOptions(e)),r=s.flatMap(e=>{let s=t.get(e.queryHash);return null!=s?[{defaultedQueryOptions:e,observer:s}]:[]}),n=new Set(r.map(e=>e.defaultedQueryOptions.queryHash)),i=s.filter(e=>!n.has(e.queryHash)),l=e=>{let t=this.#e.defaultQueryOptions(e);return this.#r.find(e=>e.options.queryHash===t.queryHash)??new a.$(this.#e,t)},o=i.map(e=>({defaultedQueryOptions:e,observer:l(e)}));return r.concat(o).sort((e,t)=>s.indexOf(e.defaultedQueryOptions)-s.indexOf(t.defaultedQueryOptions))}#l(e,t){let s=this.#r.indexOf(e);if(-1!==s){var r;let e;this.#t=(r=this.#t,(e=r.slice(0))[s]=t,e),this.#c()}}#c(){n.j.batch(()=>{this.listeners.forEach(e=>{e(this.#t)})})}},d=s(93251),u=s(29452),m=s(79890),h=s(88678),p=s(75407);function x({queries:e,...t},s){let i=(0,d.jE)(s),l=(0,u.w)(),o=(0,m.h)(),x=r.useMemo(()=>e.map(e=>{let t=i.defaultQueryOptions(e);return t._optimisticResults=l?"isRestoring":"optimistic",t}),[e,i,l]);x.forEach(e=>{(0,p.jv)(e),(0,h.LJ)(e,o)}),(0,h.wZ)(o);let[g]=r.useState(()=>new c(i,x,t)),[f,b,v]=g.getOptimisticResult(x,t.combine);r.useSyncExternalStore(r.useCallback(e=>l?()=>void 0:g.subscribe(n.j.batchCalls(e)),[g,l]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),r.useEffect(()=>{g.setQueries(x,t,{listeners:!1})},[x,t,g]);let y=f.some((e,t)=>(0,p.EU)(x[t],e))?f.flatMap((e,t)=>{let s=x[t];if(s){let t=new a.$(i,s);if((0,p.EU)(s,e))return(0,p.iL)(s,t,o);(0,p.nE)(e,l)&&(0,p.iL)(s,t,o)}return[]}):[];if(y.length>0)throw Promise.all(y);let _=f.find((e,t)=>{let s=x[t];return s&&(0,h.$1)({result:e,errorResetBoundary:o,throwOnError:s.throwOnError,query:i.getQueryCache().get(s.queryHash)})});if(_?.error)throw _.error;return b(v())}},78694:(e,t,s)=>{"use strict";s.d(t,{iV:()=>g,ir:()=>y,$K:()=>f,hF:()=>b,Qx:()=>v});var r=s(6029),n=s(75155),a=s(55729);s(82203);var i=s(75828),l=(s(63085),s(8468)),o=s(20158),c=s(70114),d=s(23474);s(38067),s(26355);s(94720),s(3635);var u=s(72075),m=s(68593);s(7565),s(94364);var h=s(92917),p=s(66773),x=s.n(p);let g=e=>{let t,s,i,l,o,u,m=(0,n.c)(15),{title:h,children:p,initiallyCollapsed:x}=e,[g,f]=a.useState(x??!1);return m[0]!==g?(t=()=>f(!g),s=g?(0,r.jsx)(c.A,{size:14,className:"me-2"}):(0,r.jsx)(d.A,{size:14,className:"me-2"}),m[0]=g,m[1]=t,m[2]=s):(t=m[1],s=m[2]),m[3]!==h?(i=(0,r.jsx)("div",{className:"fs-7",children:h}),m[3]=h,m[4]=i):i=m[4],m[5]!==t||m[6]!==s||m[7]!==i?(l=(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,i]}),m[5]=t,m[6]=s,m[7]=i,m[8]=l):l=m[8],m[9]!==p||m[10]!==g?(o=g?null:(0,r.jsx)("div",{className:"mb-4",children:p}),m[9]=p,m[10]=g,m[11]=o):o=m[11],m[12]!==l||m[13]!==o?(u=(0,r.jsxs)("div",{className:"my-3",children:[l,o]}),m[12]=l,m[13]=o,m[14]=u):u=m[14],u},f=e=>{let t,s,a=(0,n.c)(5),{children:i,title:l}=e;return a[0]!==l?(t=l&&(0,r.jsx)("div",{className:x().panelSectionWrapperTitle,children:l}),a[0]=l,a[1]=t):t=a[1],a[2]!==i||a[3]!==t?(s=(0,r.jsxs)("div",{className:x().panelSectionWrapper,children:[t,i]}),a[2]=i,a[3]=t,a[4]=s):s=a[4],s};m.k;let b=[{accessorKey:"0",header:"Header",size:260,cell:({row:e})=>(0,r.jsx)("div",{className:"text-truncate",title:e.original[0],children:e.original[0]})},{size:m.k,accessorKey:"1",header:"Value"}],v=[{accessorKey:"label",header:"Label",size:260,cell:({row:e})=>(0,r.jsx)("span",{children:e.original.label})},{size:m.k,accessorKey:"value",header:"Value",cell:({row:e})=>(0,r.jsx)("span",{className:e.original.className,children:e.original.value})}],y=()=>{let e,t,s,a,i,c=(0,n.c)(7),[d,u]=(0,h.Mj)("kbd-shortcuts-dismissed",!1);c[0]!==u?(e=()=>{u(!0)},c[0]=u,c[1]=e):e=c[1];let m=e;return d?null:(c[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(l.u,{className:"me-1",children:"â†"}),s=(0,r.jsx)(l.u,{children:"â†’"}),c[2]=t,c[3]=s):(t=c[2],s=c[3]),c[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,r.jsxs)("div",{children:["Use ",t,s," arrow keys or ",(0,r.jsx)(l.u,{className:"me-1",children:"k"}),(0,r.jsx)(l.u,{children:"j"})," to move through events"]}),(0,r.jsx)("div",{className:x().kbdDivider}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.u,{children:"ESC"})," to close"]})]}),c[4]=a):a=c[4],c[5]!==m?(i=(0,r.jsx)("div",{className:x().kbdShortcuts,children:(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center ",children:[a,(0,r.jsx)(o.J,{"aria-label":"Hide",onClick:m})]})}),c[5]=m,c[6]=i):i=c[6],i)}},80925:(e,t,s)=>{"use strict";s.d(t,{S:()=>g,t:()=>h});var r=s(55729),n=s(67843),a=s(35467),i=s(67270),l=s(12482),o=s(92917),c=s(40147),d=s(78550),u=s(49672),m=s(81973);function h({traceSource:e,sessionSource:t,dateRange:s,where:r,whereLanguage:n},o){let{enabled:m=!0}=o||{},{getFieldExpression:h,isLoading:p}=(0,c.A)(e),{getFieldExpression:x,isLoading:g}=(0,c.A)(t),f=["teamId","teamName","userEmail","userName"],b="sessions",v=(0,u.fu)(),y=(0,d.Ge)();return(0,l.I)({queryKey:["sessions",e?.id,t?.id,s,r,n],queryFn:async()=>{if(!e||!t||!h||!x)return[];let l=h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId"),[o,c,d]=await Promise.all([(0,i.PV)({select:[{valueExpression:`${e.serviceNameExpression}`,alias:"serviceName"},{valueExpression:l,alias:"sessionId"},{alias:"maxTimestamp",valueExpression:`MAX(${e.timestampValueExpression})`},{alias:"minTimestamp",valueExpression:`MIN(${e.timestampValueExpression})`},{aggFn:"count",alias:"sessionCount",valueExpression:"*"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.eventAttributesExpression}.component:"user-interaction"`,valueExpression:"",alias:"interactionCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.statusCodeExpression}:error`,valueExpression:"",alias:"errorCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.spanNameExpression}:"record init"`,valueExpression:"",alias:"recordingCount"},...f.map(t=>({valueExpression:`MAX(${h(e.eventAttributesExpression??"SpanAttributes",t)})`,alias:t}))],from:e.from,dateRange:s,where:`${e.resourceAttributesExpression}.rum.sessionId:*`,whereLanguage:"lucene",...r&&{filters:[{type:n??"lucene",condition:r}]},timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e.connection,groupBy:"serviceName, sessionId"},y,e.querySettings),(0,i.PV)({select:[{valueExpression:`DISTINCT ${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:t.from,dateRange:s,where:`${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b})`,whereLanguage:"sql",timestampValueExpression:t.timestampValueExpression,implicitColumnExpression:t.implicitColumnExpression,connection:t.connection},y,t.querySettings),(0,i.PV)({select:[{valueExpression:`DISTINCT ${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:e.from,dateRange:s,where:`(${e.spanNameExpression}='record init' OR ${e.spanNameExpression}='visibility') AND (${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b}))`,whereLanguage:"sql",timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e?.connection},y,e.querySettings)]),u=(0,a.kg)`
        WITH _${b} AS (${o}),
        ${b} AS (
          SELECT * 
          FROM _${b}
          ${r?"":"HAVING interactionCount > 0 OR recordingCount > 0"}
          ORDER BY maxTimestamp DESC
          LIMIT 500
        )
      `,m=r&&r.length>0?(0,a.kg)`
        ${u},
        sessionIdsWithRecordings AS (${c}),
        sessionIdsWithUserActivity AS (${d})
        SELECT *
        FROM ${b}
        WHERE ${b}.sessionId IN (
          SELECT sessionIdsWithRecordings.sessionId FROM sessionIdsWithRecordings
        ) OR ${b}.sessionId IN (
          SELECT sessionIdsWithUserActivity.sessionId FROM sessionIdsWithUserActivity
        )
      `:(0,a.kg)`
        ${u}
        SELECT *
        FROM ${b}
        `;return await v.query({query:m.sql,query_params:m.params,connectionId:e?.connection}).then(e=>e.json())},staleTime:3e5,...o,enabled:!!m&&!p&&!g})}class p extends Error{}async function*x(e){let t=e.getReader();try{for(;;){let{done:e,value:s}=await t.read();if(e)return;yield s}}finally{t.releaseLock()}}function g({serviceName:e,sessionId:t,sourceId:s,startDate:a,endDate:l,limit:c=100,onEvent:h,onEnd:g,resultsKey:f,getSessionSourceFieldExpression:b},v){let y=v?.keepPreviousData??!1,_=v?.shouldAbortPendingRequest??!0,j=(0,d.Ge)(),[S,w]=(0,r.useState)({key:"",data:[]}),[E,C]=(0,r.useState)(!0),[N,k]=(0,r.useState)(!0),A=(0,r.useRef)(null),[T,$]=(0,r.useState)("idle"),L=(0,r.useRef)(void 0),{data:I}=(0,m.Fo)({id:s}),R=(0,r.useCallback)(async({pageParam:s=0,limit:r})=>{if(!I)return;let o=[],d=0,v=a.getTime().toString(),_=l.getTime().toString(),S=(r??c).toString(),E=s.toString(),N=new AbortController;A.current=N,C(!0),$("fetching"),L.current="fetching";let T=await (0,i.PV)({select:[{valueExpression:m.kJ.implicitColumnExpression,alias:"b"},{valueExpression:`simpleJSONExtractInt(${m.kJ.implicitColumnExpression}, 'type')`,alias:"t"},{valueExpression:`${b(m.kJ.eventAttributesExpression,"rr-web.chunk")}`,alias:"ck"},{valueExpression:`${b(m.kJ.eventAttributesExpression,"rr-web.total-chunks")}`,alias:"tcks"}],dateRange:[new Date(parseInt(v)),new Date(parseInt(_))],from:I.from,whereLanguage:"lucene",where:`ServiceName:"${e}" AND ${m.kJ.resourceAttributesExpression}.rum.sessionId:"${t}"`,timestampValueExpression:I.timestampValueExpression,implicitColumnExpression:m.kJ.implicitColumnExpression,connection:I.connection,orderBy:`${I.timestampValueExpression} ASC`,limit:{limit:Math.min(1e6,parseInt(S)),offset:parseInt(E)}},j,I.querySettings),R=(async()=>{let e,t=(0,u.W)(),s=await t.query({query:T.sql,query_params:T.params,format:"JSONEachRow",connectionId:I.connection});for await(let t of(e=h||(y?e=>o.push(e):e=>w(t=>(0,n.Ay)(t,t=>{t.key=f??t.key??"DEFAULT_KEY",t.data.push(e)}))),x(s.stream())))for(let s of t)try{let t=s.json();d++,e(t)}catch{}g?.(),y&&w({key:f??"DEFAULT_KEY",data:o}),(0===d||d<c)&&k(!1)})();try{await Promise.race([R,new Promise((e,t)=>{setTimeout(()=>{t(new p("Timeout"))},18e4)})])}catch(e){e instanceof p?(C(!1),$("idle"),L.current="idle",N.abort(),console.warn("Closing event source due to timeout"),g?.(new p)):console.error(e)}N.abort(),C(!1),$("idle"),L.current="idle"},[I,e,t,a,l,c,y,w,h,g,f,j,b]),M=[t,a,l,c].join("||"),D=(0,o.ZC)(M);(0,r.useEffect)(()=>{D!=M&&("fetching"!==L.current||_)&&(_&&"fetching"===L.current&&A.current?.abort(),y||w({key:"",data:[]}),k(!0),R({pageParam:0}))},[D,M,_,R,y]);let z=(0,r.useCallback)(e=>{N&&"idle"===L.current&&S.data.length>0&&R({pageParam:S.data.length,limit:e?.limit}).then(()=>{e?.cb?.()})},[R,S.data.length,N]),F=(0,r.useCallback)(()=>{A.current?.abort()},[]);return{hasNextPage:N,isFetching:E,results:S.data,resultsKey:S.key,fetchNextPage:z,abort:F}}},81408:e=>{e.exports={wrapper:"SessionSubpanelV2_wrapper__5kN48",eventList:"SessionSubpanelV2_eventList__CJCVt",eventListHeader:"SessionSubpanelV2_eventListHeader__Hbhpi",eventListContainer:"SessionSubpanelV2_eventListContainer__r2wEN",eventRow:"SessionSubpanelV2_eventRow__XFl1t",eventRowError:"SessionSubpanelV2_eventRowError__61zDU",eventRowIcon:"SessionSubpanelV2_eventRowIcon__C371Y",eventRowTitle:"SessionSubpanelV2_eventRowTitle__BCmpn",eventRowSuccess:"SessionSubpanelV2_eventRowSuccess___a9Kd",eventRowHighlighted:"SessionSubpanelV2_eventRowHighlighted__YWXks",eventRowContent:"SessionSubpanelV2_eventRowContent__Y9_5z",eventRowTimestamp:"SessionSubpanelV2_eventRowTimestamp__MPRLq",eventRowDescription:"SessionSubpanelV2_eventRowDescription__XJ9b7",player:"SessionSubpanelV2_player___Erie",playerHeader:"SessionSubpanelV2_playerHeader__qMRJo",playerHeaderUrl:"SessionSubpanelV2_playerHeaderUrl__K3MEs",playerContainer:"SessionSubpanelV2_playerContainer__m7RnT",domPlayerWrapper:"SessionSubpanelV2_domPlayerWrapper__wKZpR",domPlayerWrapperPaused:"SessionSubpanelV2_domPlayerWrapperPaused__9xhaT",playerTimestamp:"SessionSubpanelV2_playerTimestamp__ebCzv",playerPlaybar:"SessionSubpanelV2_playerPlaybar__FEw0u",playerToolbar:"SessionSubpanelV2_playerToolbar__7sL7N"}},83101:e=>{e.exports={resizeHandle:"ResizablePanel_resizeHandle__4fEVM",resizeYHandle:"ResizablePanel_resizeYHandle__1pBbm"}},91405:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/services",function(){return s(26791)}])},91939:(e,t,s)=>{"use strict";s.d(t,{A:()=>I});var r=s(6029),n=s(75155),a=s(55729),i=s(35467),l=s(43517),o=s(60481),c=s(24589),d=s(43152),u=s(82203),m=s.n(u),h=s(75828),p=s.n(h),x=s(8737),g=s(24602),f=s(40387),b=s(79220),v=s(39696),y=s(21440),_=s(17421),j=s(48423),S=s(55024),w=s(68593),E=s(92917);let C=({data:e,groupColumnName:t,columns:s,getRowSearchLink:n,tableBottom:i,sorting:l,onSortingChange:o,variant:c="default"})=>{let d=(0,a.useRef)(null),u=d.current?.clientWidth,h=s.filter(e=>!1!==e.visible).length+1,C=Math.min(100-s.filter(e=>!1!==e.visible).map(({columnWidthPercent:e})=>Math.max(null!=u?100/u*100:0,e??1/h*100)).reduce((e,t)=>e+t,0),75),N=[...null!=t?[{accessorKey:"group",header:t,size:null!=u?Math.max(C/100*u,100):200}]:[],...s.filter(e=>!1!==e.visible).map(({id:e,dataKey:t,displayName:s,numberFormat:a,columnWidthPercent:i},l)=>({id:e,accessorKey:t,header:s,accessorFn:e=>e[t],cell:({getValue:e,row:t})=>{let s=e(),i=s??null;if(a&&(i=(0,E.ZV)(s,a)),null==n)return i;let l=n(t.original);return l?(0,r.jsx)(m(),{href:l,className:p()("align-top overflow-hidden py-1 pe-3",{"text-break":M,"text-truncate":!M}),style:{display:"block",color:"inherit",textDecoration:"none"},children:i}):(0,r.jsx)("div",{className:p()("align-top overflow-hidden py-1 pe-3",{"text-break":M,"text-truncate":!M}),children:i})},size:l===h-2?w.k:null!=u&&null!=i?Math.max(i/100*u,100):null!=u?u/h:200,enableResizing:l!==h-2}))],k=(0,b.N4)({data:e,columns:N,getCoreRowModel:(0,v.HT)(),enableColumnResizing:!0,columnResizeMode:"onChange",enableSorting:!0,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(l);o?.(t??null)}else o?.(e??null)},state:{sorting:l}}),{rows:A}=k.getRowModel(),T=(0,y.Te)({count:A.length,getScrollElement:()=>d.current,estimateSize:(0,a.useCallback)(()=>58,[]),overscan:10,paddingEnd:20}),$=T.getVirtualItems(),L=T.getTotalSize(),[I,R]=(0,a.useMemo)(()=>$.length>0?[Math.max(0,$[0].start-T.options.scrollMargin),Math.max(0,L-$[$.length-1].end)]:[0,0],[$,T.options.scrollMargin,L]),[M,D]=(0,a.useState)(!1),{csvData:z}=(0,S.u)(e,s.map(e=>({dataKey:e.dataKey,displayName:e.displayName})),{groupColumnName:t});return(0,r.jsxs)("div",{className:"overflow-auto h-100 fs-8",ref:d,children:[(0,r.jsxs)("table",{className:"w-100",style:{tableLayout:"fixed",borderCollapse:"collapse",fontFamily:"var(--font-ibm-plex-mono)"},children:[(0,r.jsx)("thead",{style:{position:"sticky",top:0,background:"muted"===c?"var(--color-bg-muted)":"var(--color-bg-body)"},children:k.getHeaderGroups().map(e=>(0,r.jsx)("tr",{children:e.headers.map((t,s)=>(0,r.jsx)(j.A,{header:t,isLast:s===e.headers.length-1,lastItemButtons:(0,r.jsx)(r.Fragment,{children:s===e.headers.length-1&&(0,r.jsxs)("div",{className:"d-flex align-items-center",children:[(0,r.jsx)(x.N,{onClick:()=>D(e=>!e),children:(0,r.jsx)(g.A,{size:14})}),(0,r.jsx)(_.P,{data:z,filename:"HyperDX_table_results",className:"fs-8 ms-2",title:"Download table as CSV",children:(0,r.jsx)(f.A,{size:14})})]})})},t.id))},e.id))}),(0,r.jsxs)("tbody",{children:[I>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${I}px`}})}),$.map(e=>{let t=A[e.index];return(0,r.jsx)("tr",{className:"bg-muted-hover","data-index":e.index,ref:T.measureElement,children:t.getVisibleCells().map(e=>(0,r.jsx)("td",{title:`${e.getValue()}`,children:(0,b.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.key)}),R>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${R}px`}})})]})]}),i]})};var N=s(57389),k=s(78744),A=s(81973),T=s(15628),$=s(99082),L=s(88339);function I(e){let t,s,u,m,h,p,x,g,f,b,v,y=(0,n.c)(56),{config:_,getRowSearchLink:j,enabled:S,queryKeyPrefix:w,onSortingChange:I,sort:z,hiddenColumns:F,title:P,toolbarPrefix:q,toolbarSuffix:O,showMVOptimizationIndicator:V,variant:H}=e,B=void 0===S||S;y[0]!==F?(t=void 0===F?[]:F,y[0]=F,y[1]=t):t=y[1];let W=t,K=void 0===V||V;y[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],y[2]=s):s=y[2];let[J,G]=(0,a.useState)(s);y[3]!==_.source?(u={id:_.source},y[3]=_.source,y[4]=u):u=y[4];let{data:U}=(0,A.Fo)(u),Y=z||J;y[5]!==I?(m=e=>{G(e),I&&I(e)},y[5]=I,y[6]=m):m=y[6];let Q=m;if(y[7]!==_||y[8]!==Y){if(h=(0,d.Z7)(_),Y.length){let e;y[10]!==Y?(e=Y.map(D),y[10]=Y,y[11]=e):e=y[11],h.orderBy=e}y[7]=_,y[8]=Y,y[9]=h}else h=y[9];let Z=h,{data:X}=(0,N.d)(Z);y[12]!==B||y[13]!==w?(p={enabled:B,queryKeyPrefix:w},y[12]=B,y[13]=w,y[14]=p):p=y[14];let{data:ee,fetchNextPage:et,hasNextPage:es,isLoading:er,isError:en,error:ea}=(0,k.A)(Z,p),{observerRef:ei}=(0,E.BL)(et);e:{let e;if("string"==typeof _.select){let e;y[15]===Symbol.for("react.memo_cache_sentinel")?(e=[],y[15]=e):e=y[15],x=e;break e}y[16]!==_.select?(e=_.select.reduce(M,[]),y[16]=_.select,y[17]=e):e=y[17],x=e}let el=x;t:{let e,t;y[18]!==ee?.data?(e=ee?.data??[],y[18]=ee?.data,y[19]=e):e=y[19];let s=e;if(0===s.length){let e;y[20]===Symbol.for("react.memo_cache_sentinel")?(e=[],y[20]=e):e=y[20],g=e;break t}if(y[21]!==el||y[22]!==_.numberFormat||y[23]!==W||y[24]!==Z.groupBy||y[25]!==s[0]){let e=[];Z.groupBy&&"string"==typeof Z.groupBy&&(e=Z.groupBy.split(",").map(R)),t=Object.keys(s?.[0]).filter(e=>!W.includes(e)).map(t=>({id:el.includes(t)?`"${t}"`:t,dataKey:t,displayName:t,numberFormat:e.includes(t)?void 0:_.numberFormat})),y[21]=el,y[22]=_.numberFormat,y[23]=W,y[24]=Z.groupBy,y[25]=s[0],y[26]=t}else t=y[26];g=t}let eo=g;if(y[27]!==X||y[28]!==Z||y[29]!==K||y[30]!==U||y[31]!==q||y[32]!==O){let e;if(f=[],q&&q.length>0&&f.push(...q),U&&K){let e;y[34]!==Z||y[35]!==U?(e=(0,r.jsx)($.A,{config:Z,source:U,variant:"icon"},"db-table-chart-mv-indicator"),y[34]=Z,y[35]=U,y[36]=e):e=y[36],f.push(e)}y[37]!==X||y[38]!==Z.dateRange?(e=(0,d.m9)({mvOptimizationData:X,originalDateRange:Z.dateRange}),y[37]=X,y[38]=Z.dateRange,y[39]=e):e=y[39];let t=e;t&&f.push(t),O&&O.length>0&&f.push(...O),y[27]=X,y[28]=Z,y[29]=K,y[30]=U,y[31]=q,y[32]=O,y[33]=f}else f=y[33];let ec=f;return y[40]!==eo||y[41]!==ee||y[42]!==Y||y[43]!==ea||y[44]!==ei||y[45]!==j||y[46]!==Q||y[47]!==es||y[48]!==en||y[49]!==er||y[50]!==H?(b=er&&!ee?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):en&&ea?(0,r.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted overflow-scroll",children:[(0,r.jsx)(l.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsxs)(o.a,{mt:"sm",children:[(0,r.jsx)(l.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(c.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:ea.message}),ea instanceof i.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(L.V,{data:ea?.query})]})]})]}):ee?.data.length===0?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,r.jsx)(C,{data:ee?.data??[],columns:eo,getRowSearchLink:j,sorting:Y,onSortingChange:Q,variant:H,tableBottom:es&&(0,r.jsx)(l.E,{ref:ei,ta:"center",children:"Loading..."})}),y[40]=eo,y[41]=ee,y[42]=Y,y[43]=ea,y[44]=ei,y[45]=j,y[46]=Q,y[47]=es,y[48]=en,y[49]=er,y[50]=H,y[51]=b):b=y[51],y[52]!==b||y[53]!==P||y[54]!==ec?(v=(0,r.jsx)(T.A,{title:P,toolbarItems:ec,children:b}),y[52]=b,y[53]=P,y[54]=ec,y[55]=v):v=y[55],v}function R(e){return e.trim()}function M(e,t){return t.alias&&e.push(t.alias),e}function D(e){return{valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}}},94364:(e,t,s)=>{"use strict";s.d(t,{f:()=>r});let r=e=>({isLoading:!1,error:null,enrichedFrame:null})},94937:(e,t,s)=>{"use strict";s.d(t,{A:()=>y});var r=s(6029),n=s(75155),a=s(55729),i=s(82203),l=s.n(i),o=s(80519),c=s.n(o),d=s(37659),u=s(3635),m=s(43517),h=s(63085),p=s(34834),x=s(25062),g=s(56795),f=s(28975),b=s(41279),v=s(18006);function y(e){let t,s,i,o,y,_,j,S,w,E,C,N,k,A,T,$,L,I,R=(0,n.c)(62),{displayedKey:M,name:D,nameLanguage:z,sqlExpression:F,value:P,onPropertyAddClick:q,generateSearchUrl:O}=e,V=void 0===z?"lucene":z,[H,B]=(0,a.useState)(!1);R[0]!==P?(t=(0,v.OH)(P),R[0]=P,R[1]=t):t=R[1];let W=t;if(!(q||O||W)){let e,t=M||D;return R[2]!==D||R[3]!==t||R[4]!==P?(e=(0,r.jsxs)("div",{className:"bg-highlighted px-2 py-0.5 me-1 my-1",children:[t,": ",P]},D),R[2]=D,R[3]=t,R[4]=P,R[5]=e):e=R[5],e}if(R[6]!==M||R[7]!==O||R[8]!==W||R[9]!==D||R[10]!==V||R[11]!==q||R[12]!==H||R[13]!==F||R[14]!==P){let e,t,n="sql"===V?c().format("? = ?",[c().raw(D),P]):`${D}:${"string"==typeof P?`"${P}"`:P}`;o=d.A,A="top",T=!1,y=!0,_=H,j=B,R[29]===Symbol.for("react.memo_cache_sentinel")?(e={wordBreak:"break-word"},R[29]=e):e=R[29],R[30]!==M||R[31]!==W||R[32]!==D||R[33]!==H||R[34]!==P?(t=W?(0,r.jsxs)("a",{href:encodeURI(P),target:"_blank",rel:"noopener noreferrer",className:"d-flex flex-row align-items-center bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",children:[M||D,(0,r.jsx)(g.A,{size:14,className:"ms-1"})]}):(0,r.jsxs)(u.Y,{className:"bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",wrap:"nowrap",gap:0,onClick:()=>B(!H),children:[M||D,":",(0,r.jsx)(m.E,{size:"xs",ms:4,maw:300,truncate:!0,children:P})]}),R[30]=M,R[31]=W,R[32]=D,R[33]=H,R[34]=P,R[35]=t):t=R[35],R[36]!==t||R[37]!==P?(S=(0,r.jsx)(d.A.Target,{children:(0,r.jsx)(h.m,{label:P,withArrow:!0,maw:400,multiline:!0,style:e,position:"bottom",children:t})}),R[36]=t,R[37]=P,R[38]=S):S=R[38],i=d.A.Dropdown,k=2,s=p.B,w=0,E="stretch",R[39]!==q||R[40]!==F||R[41]!==P?(C=q&&(0,r.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,r.jsx)(f.A,{size:14}),onClick:()=>{q(F,P),B(!1)},children:"Add to Search"}),R[39]=q,R[40]=F,R[41]=P,R[42]=C):C=R[42],N=O&&(0,r.jsx)(l(),{href:O(n,V),children:(0,r.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,r.jsx)(b.A,{size:14}),children:"Search This Value"})}),R[6]=M,R[7]=O,R[8]=W,R[9]=D,R[10]=V,R[11]=q,R[12]=H,R[13]=F,R[14]=P,R[15]=s,R[16]=i,R[17]=o,R[18]=y,R[19]=_,R[20]=j,R[21]=S,R[22]=w,R[23]=E,R[24]=C,R[25]=N,R[26]=k,R[27]=A,R[28]=T}else s=R[15],i=R[16],o=R[17],y=R[18],_=R[19],j=R[20],S=R[21],w=R[22],E=R[23],C=R[24],N=R[25],k=R[26],A=R[27],T=R[28];return R[43]!==s||R[44]!==w||R[45]!==E||R[46]!==C||R[47]!==N?($=(0,r.jsxs)(s,{gap:w,justify:E,children:[C,N]}),R[43]=s,R[44]=w,R[45]=E,R[46]=C,R[47]=N,R[48]=$):$=R[48],R[49]!==i||R[50]!==$||R[51]!==k?(L=(0,r.jsx)(i,{p:k,children:$}),R[49]=i,R[50]=$,R[51]=k,R[52]=L):L=R[52],R[53]!==o||R[54]!==y||R[55]!==_||R[56]!==j||R[57]!==S||R[58]!==L||R[59]!==A||R[60]!==T?(I=(0,r.jsxs)(o,{position:A,withinPortal:T,withArrow:y,opened:_,onChange:j,children:[S,L]}),R[53]=o,R[54]=y,R[55]=_,R[56]=j,R[57]=S,R[58]=L,R[59]=A,R[60]=T,R[61]=I):I=R[61],I}},96958:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(6029),n=s(75155),a=s(75828),i=s.n(a);function l(e){let t,s,a,l,o,c,d,u,m,h,p,x=(0,n.c)(23);x[0]!==e?({children:s,onClick:l,active:t,className:a,style:c,...o}=e,x[0]=e,x[1]=t,x[2]=s,x[3]=a,x[4]=l,x[5]=o,x[6]=c):(t=x[1],s=x[2],a=x[3],l=x[4],o=x[5],c=x[6]);let g=!t;x[7]!==t||x[8]!==a||x[9]!==g?(d=i()("text-center cursor-pointer",{"fw-bold text-white-hover":t,"text-muted-hover":g},a),x[7]=t,x[8]=a,x[9]=g,x[10]=d):d=x[10],x[11]!==s?(u=(0,r.jsx)("span",{children:s}),x[11]=s,x[12]=u):u=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(m={height:2},x[13]=m):m=x[13];let f=t?"var(--color-text-brand)":"var(--color-border)";return x[14]!==f?(h=(0,r.jsx)("div",{className:"w-100 mt-2",style:m,children:(0,r.jsx)("div",{className:"h-100 w-100",style:{background:f}})}),x[14]=f,x[15]=h):h=x[15],x[16]!==l||x[17]!==o||x[18]!==c||x[19]!==d||x[20]!==u||x[21]!==h?(p=(0,r.jsxs)("div",{className:d,onClick:l,style:c,...o,children:[u,h]}),x[16]=l,x[17]=o,x[18]=c,x[19]=d,x[20]=u,x[21]=h,x[22]=p):p=x[22],p}function o(e){let t,s,a,o,c=(0,n.c)(14),{items:d,activeItem:u,className:m,onClick:h,"data-testid":p}=e;if(c[0]!==m?(t=i()("d-flex flex-wrap",m),c[0]=m,c[1]=t):t=c[1],c[2]!==u||c[3]!==d||c[4]!==h){let e;c[6]!==u||c[7]!==h?(e=e=>(0,r.jsx)(l,{"data-testid":`tab-${String(e.value).toLowerCase()}`,active:e.value===u,onClick:()=>h?.(e.value),children:(0,r.jsx)("span",{className:"mx-4 text-nowrap",children:e.text})},e.value),c[6]=u,c[7]=h,c[8]=e):e=c[8],s=d.map(e),c[2]=u,c[3]=d,c[4]=h,c[5]=s}else s=c[5];return c[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(l,{className:"flex-grow-1 pe-none",children:"\xa0"}),c[9]=a):a=c[9],c[10]!==p||c[11]!==t||c[12]!==s?(o=(0,r.jsxs)("div",{className:t,"data-testid":p,children:[s,a]}),c[10]=p,c[11]=t,c[12]=s,c[13]=o):o=c[13],o}}},e=>{e.O(0,[7756,883,2928,6171,5554,910,1606,1909,3999,1626,1445,2990,4607,9979,522,3943,1926,9353,4528,1021,6514,3234,8374,3172,6593,636,8792],()=>e(e.s=91405)),_N_E=e.O()}]);