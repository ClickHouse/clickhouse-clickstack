(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4569],{225:(e,t,s)=>{"use strict";s.d(t,{z:()=>i});var r=s(6029),n=s(75155),a=s(98142);let i=()=>{let e,t=(0,n.c)(2);if(a.bp){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)("span",{children:["Please open an issue on"," ",(0,r.jsx)("a",{href:"https://github.com/hyperdxio/hyperdx/issues",target:"_blank",children:"GitHub"}),"."]}),t[0]=e):e=t[0],e}return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("span",{children:"Please contact support."}),t[1]=e):e=t[1],e}},2326:e=>{e.exports={wrapper:"PlaybarSlider_wrapper__WAjbf",markers:"PlaybarSlider_markers__X51XN",markerDot:"PlaybarSlider_markerDot__X23nO"}},3061:(e,t,s)=>{"use strict";s.d(t,{A:()=>$});var r=s(6029),n=s(75155),a=s(38206),i=s(3635),l=s(94502),o=s(29594),c=s.n(o),d=s(2615),u=s(78075),m=s(93251),h=s(49672),x=s(81973),p=s(92917),g=s(78550);let f=e=>e.sourceMetricType?`${e.source}~${e.sourceMetricType}`:`${e.source}`,b=e=>{let[t,s]=e.split("~");return{sourceId:t,metricType:s}};function y(e){return e.isLoading}function v(e){return e.isFetching}function j(e){return e.data??[]}function S(e){return e.expression}function w(e){return e.isError}function _(e){return e.isFetching}function E(e){return e.isLoading}function C(e){let{isLoading:t,data:s}=e;return(void 0===s?[]:s).map(e=>{let{key:s,value:r}=e;return[s,{values:r.map(N),isLoading:t}]})}function N(e){return e.toString()}function k(e){let{data:t}=e;return!!t}function A(e){let[t,s]=e;return{key:t,data:s}}let T=e=>{let t,s,i,l=(0,n.c)(11),{filter:o,onChange:c,value:d,values:u,isLoading:m}=e;l[0]!==u?(t=u?.toSorted().map(I),l[0]=u,l[1]=t):t=l[1];let h=t,x=d??null;l[2]!==h?(s=h||[],l[2]=h,l[3]=s):s=l[3];let p=`dashboard-filter-select-${o.name}`;return l[4]!==o.name||l[5]!==m||l[6]!==c||l[7]!==x||l[8]!==s||l[9]!==p?(i=(0,r.jsx)(a.l,{placeholder:o.name,value:x,data:s,searchable:!0,clearable:!0,allowDeselect:!0,size:"xs",maxDropdownHeight:280,disabled:m,variant:"filled",w:200,limit:20,onChange:c,"data-testid":p}),l[4]=o.name,l[5]=m,l[6]=c,l[7]=x,l[8]=s,l[9]=p,l[10]=i):i=l[10],i},$=e=>{let t,s,a,o,N=(0,n.c)(13),{filters:$,dateRange:I,filterValues:z,onSetFilterValue:L}=e;N[0]!==I||N[1]!==$?(t={filters:$,dateRange:I},N[0]=I,N[1]=$,N[2]=t):t=N[2];let{data:R,isFetching:M}=function(e){let t,s,r,a,i,l,o,N,T,$,I=(0,n.c)(37),{filters:z,dateRange:L}=e,R=(0,g.Ge)();I[0]!==L||I[1]!==z?(t={filters:z,dateRange:L},I[0]=L,I[1]=z,I[2]=t):t=I[2];let{data:M,isFetching:D,isLoading:F}=function(e){let t,s,r,a,i,l,o=(0,n.c)(21),{filters:m,dateRange:w}=e,_=(0,h.fu)(),E=(0,g.Ge)(),{data:C,isLoading:N}=(0,x.oE)();if(o[0]!==m){for(let e of(t=new Map,m)){let s=f(e);t.has(s)?t.get(s).push(e):t.set(s,[e])}o[0]=m,o[1]=t}else t=o[1];let k=t;o[2]!==_||o[3]!==w||o[4]!==k||o[5]!==N||o[6]!==E||o[7]!==C?(s={queries:Array.from(k.entries()).filter(e=>{let[t]=e;return C?.some(e=>e.id===b(t).sourceId)}).map(e=>{let[t,s]=e,{sourceId:r,metricType:n}=b(t),a=C.find(e=>e.id===r),i=s.map(S),l=(0,p.U6)(a,n)??"",o={...c()(a,["timestampValueExpression","connection"]),from:{databaseName:a.from.databaseName,tableName:l},dateRange:w,source:a.id,where:"",whereLanguage:"sql",select:""};return{queryKey:["dashboard-filters-key-value-calls",r,n,w,i],enabled:!N,staleTime:3e5,queryFn:async e=>{let{signal:t}=e;return await (0,d.YR)({chartConfig:o,source:a,clickhouseClient:_,metadata:E,keys:i,signal:t})}}})},o[2]=_,o[3]=w,o[4]=k,o[5]=N,o[6]=E,o[7]=C,o[8]=s):s=o[8];let A=(0,u.E)(s);return o[9]!==A?(r=A.map(j).flat(),o[9]=A,o[10]=r):r=o[10],o[11]!==N||o[12]!==A?(a=N||A.some(v),o[11]=N,o[12]=A,o[13]=a):a=o[13],o[14]!==N||o[15]!==A?(i=N||A.every(y),o[14]=N,o[15]=A,o[16]=i):i=o[16],o[17]!==r||o[18]!==a||o[19]!==i?(l={data:r,isFetching:a,isLoading:i},o[17]=r,o[18]=a,o[19]=i,o[20]=l):l=o[20],l}(t),{data:O,isLoading:P}=(0,x.oE)();I[3]!==O?(s=O??[],I[3]=O,I[4]=s):s=I[4],I[5]!==s?(r=(0,p.Dt)(s,"id"),I[5]=s,I[6]=r):r=I[6];let B=r,V=(0,m.jE)();if(I[7]!==M||I[8]!==F||I[9]!==P||I[10]!==R||I[11]!==V||I[12]!==B){let e;I[14]!==F||I[15]!==P||I[16]!==R||I[17]!==V||I[18]!==B?(e=e=>{let{chartConfig:t,keys:s}=e,r=["dashboard-filter-key-values",t.from,s],n=B.get(t.source);return{queryKey:[...r,t],placeholderData:()=>{let e=V.getQueriesData({queryKey:r}).map(A).filter(k).toSorted((e,t)=>{let s=V.getQueryState(e.key)?.dataUpdatedAt??0;return(V.getQueryState(t.key)?.dataUpdatedAt??0)-s});return e[0]?.data},enabled:!F&&!P,staleTime:3e5,queryFn:async e=>{let{signal:r}=e;return R.getKeyValues({chartConfig:t,keys:s,limit:1e4,disableRowLimit:!0,signal:r,source:n})}}},I[14]=F,I[15]=P,I[16]=R,I[17]=V,I[18]=B,I[19]=e):e=I[19],a=M.map(e),I[7]=M,I[8]=F,I[9]=P,I[10]=R,I[11]=V,I[12]=B,I[13]=a}else a=I[13];I[20]!==a?(i={queries:a},I[20]=a,I[21]=i):i=I[21];let W=(0,u.E)(i);I[22]!==W?(l=new Map(W.flatMap(C)),I[22]=W,I[23]=l):l=I[23];let H=l;return I[24]!==F||I[25]!==W?(o=F||W.every(E),I[24]=F,I[25]=W,I[26]=o):o=I[26],I[27]!==D||I[28]!==W?(N=D||W.some(_),I[27]=D,I[28]=W,I[29]=N):N=I[29],I[30]!==W?(T=W.some(w),I[30]=W,I[31]=T):T=I[31],I[32]!==H||I[33]!==o||I[34]!==N||I[35]!==T?($={data:H,isLoading:o,isFetching:N,isError:T},I[32]=H,I[33]=o,I[34]=N,I[35]=T,I[36]=$):$=I[36],$}(t);return N[3]!==z||N[4]!==R||N[5]!==$||N[6]!==L?(s=Object.values($).map(e=>{let t=R?.get(e.expression);return(0,r.jsx)(T,{filter:e,isLoading:!t,onChange:t=>L(e.expression,t),values:t?.values,value:z[e.expression]?.included.values().next().value?.toString()},e.id)}),N[3]=z,N[4]=R,N[5]=$,N[6]=L,N[7]=s):s=N[7],N[8]!==M?(a=M&&(0,r.jsx)(l.A,{className:"spin-animate",size:12}),N[8]=M,N[9]=a):a=N[9],N[10]!==s||N[11]!==a?(o=(0,r.jsxs)(i.Y,{mt:"sm",children:[s,a]}),N[10]=s,N[11]=a,N[12]=o):o=N[12],o};function I(e){return{value:e,label:e}}},12869:(e,t,s)=>{"use strict";s.d(t,{A8:()=>g,C5:()=>y,J_:()=>f,cv:()=>p,gK:()=>m,lT:()=>u,mo:()=>b,nq:()=>x,vX:()=>v,yN:()=>h});var r=s(43465),n=s(49730),a=s(67012),i=s(85508),l=s(71434),o=s.n(l),c=s(76089),d=s(82641);function u(e){return"1m"===e?c.Z7.OneMinute:"5m"===e?c.Z7.FiveMinute:"15m"===e?c.Z7.FifteenMinute:"30m"===e?c.Z7.ThirtyMinute:"1h"===e?c.Z7.OneHour:"6h"===e?c.Z7.SixHour:"12h"===e?c.Z7.TwelveHour:c.Z7.OneDay}function m(e){let t=new Date;return"1m"===e?[(0,r.A)(t,{minutes:15}),t]:"5m"===e?[(0,r.A)(t,{hours:1}),t]:"15m"===e?[(0,r.A)(t,{hours:4}),t]:"30m"===e?[(0,r.A)(t,{hours:8}),t]:"1h"===e?[(0,r.A)(t,{hours:16}),t]:"6h"===e?[(0,r.A)(t,{days:4}),t]:"12h"===e||"1d"===e?[(0,r.A)(t,{days:7}),t]:[t,t]}function h(e,t){let[s,l]=e;return"1m"===t&&15>(0,n.A)(l,s)?[(0,r.A)(l,{minutes:15}),l]:"5m"===t&&1>(0,a.A)(l,s)?[(0,r.A)(l,{hours:1}),l]:"15m"===t&&4>(0,a.A)(l,s)?[(0,r.A)(l,{hours:4}),l]:"30m"===t&&8>(0,a.A)(l,s)?[(0,r.A)(l,{hours:8}),l]:"1h"===t&&16>(0,a.A)(l,s)?[(0,r.A)(l,{hours:16}),l]:"6h"===t&&4>(0,i.A)(l,s)?[(0,r.A)(l,{days:4}),l]:"12h"===t&&7>(0,i.A)(l,s)||"1d"===t&&7>(0,i.A)(l,s)?[(0,r.A)(l,{days:7}),l]:e}let x={above:"At least (≥)",below:"Below (<)"},p={above:"is at least (≥)",below:"falls below (<)"},g={"1m":"1 minute","5m":"5 minute","15m":"15 minute","30m":"30 minute","1h":"1 hour","6h":"6 hour","12h":"12 hour","1d":"1 day"},f=o().pick(g,["5m","15m","30m","1h","6h","12h","1d"]),b={webhook:"Webhook"},y={threshold:1,thresholdType:d.qQ.ABOVE,interval:"5m",channel:{type:"webhook",webhookId:""}};function v(e){return!!e&&new Date>new Date(e.until)}},15670:(e,t,s)=>{"use strict";s.d(t,{A:()=>tx});var r=s(6029),n=s(75155),a=s(55729),i=s(76694),l=s.n(i),o=s(1909),c=s(69580),d=s(29766),u=s(52789),m=s(3145),h=s(82641),x=s(43517),p=s(25062),g=s(92789),f=s(3635),b=s(78253),y=s(94193),v=s(60481),j=s(87989),S=s(22623),w=s(34834),_=s(56513),E=s(76013),C=s(53061),N=s(45005),k=s(64488),A=s(78341),T=s(97767),$=s(67872),I=s(90993),z=s(28975),L=s(87104),R=s(62118),M=s(5653),D=s(46661),F=s(61411),O=s(6620),P=s(9841),B=s(45519),V=s(81077),W=s(53353),H=s(19336),q=s(43152),X=s(26932),G=s(88339),K=s(91939),J=s(40228),Y=s(64467),Z=s(58153),U=s(98142),Q=s(67272),ee=s(35467),et=s(12482),es=s(49672),er=s(92917),en=s(43370),ea=s(81973),ei=s(12869),el=s(84851),eo=s(99082),ec=s(38206);function ed(e){let t,s,a=(0,n.c)(6),{value:i,defaultValue:l,onChange:o}=e;a[0]!==o?(t=e=>{null==e?o({}):["p50","p90","p95","p99"].includes(e)?o({aggFn:"quantile",level:Number.parseFloat(e.replace("p","0."))}):o({aggFn:e})},a[0]=o,a[1]=t):t=a[1];let c=t;return a[2]!==c||a[3]!==l||a[4]!==i?(s=(0,r.jsx)(ec.l,{withScrollArea:!1,searchable:!0,value:i,defaultValue:l,onChange:c,data:q.gT,"data-testid":"agg-fn-select"}),a[2]=c,a[3]=l,a[4]=i,a[5]=s):s=a[5],s}function eu(e){let t,s,a,i,l,c,d,u,m,h=(0,n.c)(20);h[0]!==e?({aggFnName:t,quantileLevelName:i,defaultValue:s,...a}=e,h[0]=e,h[1]=t,h[2]=s,h[3]=a,h[4]=i):(t=h[1],s=h[2],a=h[3],i=h[4]),h[5]!==t||h[6]!==a?(l={...a,name:t},h[5]=t,h[6]=a,h[7]=l):l=h[7];let{field:x}=(0,o.as)(l),{onChange:p,value:g}=x;h[8]!==a||h[9]!==i?(c={...a,name:i},h[8]=a,h[9]=i,h[10]=c):c=h[10];let{field:f}=(0,o.as)(c),{onChange:b,value:y}=f;h[11]!==p||h[12]!==b?(d=e=>{"quantile"===e.aggFn&&b(e.level),p(e.aggFn)},h[11]=p,h[12]=b,h[13]=d):d=h[13];let v=d;e:{if("quantile"===g){let e;h[14]!==y?(e=Math.round(100*y),h[14]=y,h[15]=e):e=h[15],u=`p${e}`;break e}u=g}let j=u;return h[16]!==s||h[17]!==v||h[18]!==j?(m=(0,r.jsx)(ed,{value:j,defaultValue:s,onChange:v}),h[16]=s,h[17]=v,h[18]=j,h[19]=m):m=h[19],m}var em=s(47268),eh=s(10174),ex=s(7565),ep=s(20728),eg=s(59029),ef=s(9953),eb=s(69164),ey=s(93003),ev=s(66980),ej=s(45749);let eS={number:(0,r.jsx)(V.A,{size:14}),currency:(0,r.jsx)(eb.A,{size:14}),percent:(0,r.jsx)(ey.A,{size:14}),byte:(0,r.jsx)(ev.A,{size:14}),time:(0,r.jsx)(ej.A,{size:14})},ew={factor:1,output:"number",mantissa:2,thousandSeparated:!0,average:!1,decimalBytes:!1},e_=e=>{let t,s,a,i,l,c,d,u,m,h,x,p,g,f=(0,n.c)(30),{control:b}=e,y=(0,o.FH)({control:b,name:"numberFormat"})??ew;return f[0]===Symbol.for("react.memo_cache_sentinel")?(t={flex:1},s={display:"flex",flexWrap:"nowrap",alignItems:"stretch",justifyContent:"stretch",gap:10},f[0]=t,f[1]=s):(t=f[0],s=f[1]),f[2]!==y.output?(a=e=>{let{field:t}=e;return(0,r.jsx)(ep.m,{...t,label:"Output format",leftSection:y.output&&eS[y.output],style:{flex:1},data:[{value:"number",label:"Number"},{value:"currency",label:"Currency"},{value:"byte",label:"Bytes"},{value:"percent",label:"Percentage"},{value:"time",label:"Time"}]})},f[2]=y.output,f[3]=a):a=f[3],f[4]!==b||f[5]!==a?(i=(0,r.jsx)(o.xI,{control:b,name:"numberFormat.output",render:a},"numberFormat.output"),f[4]=b,f[5]=a,f[6]=i):i=f[6],f[7]!==b||f[8]!==y.output?(l="currency"===y.output&&(0,r.jsx)(o.xI,{control:b,name:"numberFormat.currencySymbol",render:eE},"numberFormat.currencySymbol"),f[7]=b,f[8]=y.output,f[9]=l):l=f[9],f[10]!==i||f[11]!==l?(c=(0,r.jsxs)("div",{style:s,children:[i,l]}),f[10]=i,f[11]=l,f[12]=c):c=f[12],f[13]===Symbol.for("react.memo_cache_sentinel")?(d={marginTop:-6},f[13]=d):d=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)("div",{style:{fontSize:11},children:"Example"}),f[14]=u):u=f[14],f[15]!==y?(m=(0,er.ZV)(1234,y),f[15]=y,f[16]=m):m=f[16],f[17]!==m?(h=(0,r.jsx)("div",{style:d,children:(0,r.jsxs)(S.t,{p:"xs",py:4,children:[u,m]})}),f[17]=m,f[18]=h):h=f[18],f[19]!==b||f[20]!==y.output?(x="time"!==y.output&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"fs-8 mt-2 fw-bold mb-1",children:"Decimals"}),(0,r.jsx)(o.xI,{control:b,name:"numberFormat.mantissa",render:eN},"numberFormat.mantissa")]}),f[19]=b,f[20]=y.output,f[21]=x):x=f[21],f[22]!==b||f[23]!==y.output?(p=(0,r.jsx)(w.B,{gap:"xs",children:"byte"===y.output?(0,r.jsx)(o.xI,{control:b,name:"numberFormat.decimalBytes",render:ek},"numberFormat.decimalBytes"):"time"===y.output?(0,r.jsx)(o.xI,{control:b,name:"numberFormat.factor",render:eA},"numberFormat.factor"):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.xI,{control:b,name:"numberFormat.thousandSeparated",render:eT},"numberFormat.thousandSeparated"),(0,r.jsx)(o.xI,{control:b,name:"numberFormat.average",render:e$},"numberFormat.average")]})}),f[22]=b,f[23]=y.output,f[24]=p):p=f[24],f[25]!==h||f[26]!==x||f[27]!==p||f[28]!==c?(g=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(w.B,{style:t,children:[c,h,x,p]})}),f[25]=h,f[26]=x,f[27]=p,f[28]=c,f[29]=g):g=f[29],g};function eE(e){let{field:t}=e;return(0,r.jsx)(eg.k,{...t,w:80,label:"Symbol",placeholder:"$"})}function eC(e){return`Decimals: ${e}`}function eN(e){let{field:t}=e,{value:s,onChange:n}=t;return(0,r.jsx)(ef.A,{mb:"xl",min:0,max:10,label:eC,marks:[{value:0,label:"0"},{value:10,label:"10"}],value:s??2,onChange:n})}function ek(e){let{field:t}=e,{value:s,onChange:n,...a}=t;return(0,r.jsx)(em.S,{...a,size:"xs",label:"Decimal base",description:"Use 1KB = 1000 bytes",checked:s,onChange:n})}function eA(e){let{field:t}=e,{value:s,onChange:n,...a}=t,i=[{value:"1",label:"Seconds"},{value:"0.001",label:"Milliseconds"},{value:"0.000001",label:"Microseconds"},{value:"0.000000001",label:"Nanoseconds"}],l=i.find(e=>parseFloat(e.value)===s)?.value??"1";return(0,r.jsx)(ep.m,{...a,size:"sm",label:"Input unit",value:l,onChange:e=>n(parseFloat(e.target.value)),data:i})}function eT(e){let{field:t}=e,{value:s,onChange:n,...a}=t;return(0,r.jsx)(em.S,{...a,size:"xs",label:"Separate thousands",description:"For example: 1,234,567",checked:s,onChange:n})}function e$(e){let{field:t}=e,{value:s,onChange:n,...a}=t;return(0,r.jsx)(em.S,{...a,size:"xs",label:"Large number format",description:"For example: 1.2m",checked:s,onChange:n})}function eI({numberFormat:e,alignDateRangeToGranularity:t,compareToPreviousPeriod:s,fillNulls:r}){return{numberFormat:e??ew,alignDateRangeToGranularity:null==t||t,fillNulls:r??0,compareToPreviousPeriod:s??!1}}function ez(e){let t,s,a,i,l,c,d,u,m,x,b,y,j,S,_,E=(0,n.c)(42),{settings:C,opened:N,displayType:k,onChange:A,onClose:T,previousDateRange:$}=e;E[0]!==C?(t=eI(C),E[0]=C,E[1]=t):t=E[1],E[2]!==t?(s={defaultValues:t},E[2]=t,E[3]=s):s=E[3];let{control:I,handleSubmit:z,register:L,reset:R,setValue:M}=(0,o.mN)(s);E[4]!==I?(a={control:I,name:"fillNulls"},E[4]=I,E[5]=a):a=E[5];let D=(0,o.FH)(a);E[6]!==D?(i=(0,q.xu)(D),E[6]=D,E[7]=i):i=E[7];let F=i;E[8]!==T||E[9]!==R||E[10]!==C?(l=()=>{R(eI(C)),T()},E[8]=T,E[9]=R,E[10]=C,E[11]=l):l=E[11];let O=l;E[12]!==z||E[13]!==A||E[14]!==T?(c=()=>{z(A)(),T()},E[12]=z,E[13]=A,E[14]=T,E[15]=c):c=E[15];let P=c;E[16]!==R?(d=()=>{R(eI({}))},E[16]=R,E[17]=d):d=E[17];let B=d,V=k===h.t2.Line||k===h.t2.StackedBar;return E[18]!==F||E[19]!==V||E[20]!==$||E[21]!==L||E[22]!==M?(u=V&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(em.S,{size:"xs",label:"Show Complete Intervals",...L("alignDateRangeToGranularity")}),(0,r.jsx)(v.a,{children:(0,r.jsx)(em.S,{size:"xs",label:"Fill Missing Intervals with Zero",checked:F,onChange:e=>{M("fillNulls",!!e.currentTarget.checked&&0)}})}),(0,r.jsx)(em.S,{size:"xs",label:"Compare to Previous Period",description:$&&(0,r.jsxs)(r.Fragment,{children:["(",(0,r.jsx)(ex.H,{value:$[0],format:"short"})," - ",(0,r.jsx)(ex.H,{value:$[1],format:"short"}),")"]}),...L("compareToPreviousPeriod")}),(0,r.jsx)(g.c,{})]}),E[18]=F,E[19]=V,E[20]=$,E[21]=L,E[22]=M,E[23]=u):u=E[23],E[24]!==I?(m=(0,r.jsx)(e_,{control:I}),E[24]=I,E[25]=m):m=E[25],E[26]===Symbol.for("react.memo_cache_sentinel")?(x=(0,r.jsx)(g.c,{}),E[26]=x):x=E[26],E[27]!==B?(b=(0,r.jsx)(p.$,{type:"submit",variant:"secondary",onClick:B,children:"Reset to Defaults"}),E[27]=B,E[28]=b):b=E[28],E[29]!==P?(y=(0,r.jsx)(p.$,{type:"submit",variant:"primary",onClick:P,children:"Apply"}),E[29]=P,E[30]=y):y=E[30],E[31]!==b||E[32]!==y?(j=(0,r.jsxs)(f.Y,{gap:"xs",mt:"xs",justify:"space-between",children:[b,y]}),E[31]=b,E[32]=y,E[33]=j):j=E[33],E[34]!==j||E[35]!==u||E[36]!==m?(S=(0,r.jsxs)(w.B,{children:[u,m,x,j]}),E[34]=j,E[35]=u,E[36]=m,E[37]=S):S=E[37],E[38]!==O||E[39]!==N||E[40]!==S?(_=(0,r.jsx)(eh._,{title:"Display Settings",opened:N,onClose:O,position:"right",children:S}),E[38]=O,E[39]=N,E[40]=S,E[41]=_):_=E[41],_}var eL=s(91148),eR=s(68269),eM=s(75359),eD=s(71781),eF=s(43085),eO=s(8737),eP=s(94720),eB=s(53993),eV=s(22599),eW=s(39785),eH=s(31097),eq=s(23195),eX=s(41279),eG=s(9385),eK=s(70114),eJ=s(23474);let eY={ResourceAttributes:"Resource",Attributes:"Attributes",ScopeAttributes:"Scope"},eZ={s:"Seconds",ms:"Milliseconds",us:"Microseconds",ns:"Nanoseconds",min:"Minutes",h:"Hours",d:"Days",wk:"Weeks",mo:"Months",a:"Years",By:"Bytes",KiBy:"Kibibytes",MiBy:"Mebibytes",GiBy:"Gibibytes",TiBy:"Tebibytes",kBy:"Kilobytes",MBy:"Megabytes",GBy:"Gigabytes",TBy:"Terabytes",bit:"Bits",Kibit:"Kibibits",Mibit:"Mebibits",Gibit:"Gibibits",Hz:"Hertz",kHz:"Kilohertz",MHz:"Megahertz",GHz:"Gigahertz",Cel:"Celsius",K:"Kelvin","[degF]":"Fahrenheit","%":"Percent",1:"Count","{request}":"Requests","{connection}":"Connections","{error}":"Errors","{packet}":"Packets","{thread}":"Threads","{process}":"Processes","{message}":"Messages","{operation}":"Operations","{call}":"Calls","{fault}":"Faults","{cpu}":"CPUs",m:"Meters",km:"Kilometers",g:"Grams",kg:"Kilograms",A:"Amperes",V:"Volts",W:"Watts",kW:"Kilowatts",J:"Joules",kJ:"Kilojoules"};function eU(e){let t,s,i,l,o,c,d,u,m,g,y,v,j,S,_,E,C=(0,n.c)(47),{databaseName:N,metricType:k,metricName:A,tableSource:T,attribute:$,language:I,onAddToWhere:z,onBack:L,onAddToGroupBy:R}=e,[M,D]=(0,a.useState)(""),[F]=(0,eW.o)(M,300);C[0]!==$.category||C[1]!==$.name||C[2]!==N||C[3]!==F||C[4]!==A||C[5]!==k||C[6]!==T?(t={databaseName:N,metricType:k,metricName:A,attributeName:$.name,attributeCategory:$.category,searchTerm:F,tableSource:T},C[0]=$.category,C[1]=$.name,C[2]=N,C[3]=F,C[4]=A,C[5]=k,C[6]=T,C[7]=t):t=C[7];let{data:O,isLoading:P}=(({databaseName:e,metricType:t,metricName:s,attributeName:r,attributeCategory:n,searchTerm:a,tableSource:i,enabled:l=!0})=>{let o=i?(0,er.U6)(i,t)??"":"",c=!!(l&&e&&o&&t&&s&&r&&n&&i&&i?.kind===h.GL.Metric);return(0,et.I)({queryKey:["metric-attribute-values",s,t,r,n,a,i],queryFn:async({signal:t})=>{if(!c)return[];let l=(0,es.W)(),d=a?(0,ee.kg)` AND ${n}[${{String:r}}] ILIKE ${{String:`%${a}%`}}`:(0,ee.kg)``,u=(0,ee.kg)`
        SELECT DISTINCT ${n}[${{String:r}}] as value
        FROM ${(0,ee.k$)({database:e,table:o})}
        WHERE MetricName = ${{String:s}}
          AND ${n}[${{String:r}}] != ''
          ${d}
        ORDER BY value
        LIMIT ${{Int32:100}}
      `,m=await l.query({query:u.sql,query_params:u.params,format:"JSON",abort_signal:t,connectionId:i.connection,clickhouse_settings:{max_execution_time:60,timeout_overflow_mode:"break"}}).then(e=>e.json());return m?.data?m.data.map(e=>e.value).filter(Boolean):[]},enabled:c,staleTime:3e5})})(t);C[8]!==$.category||C[9]!==$.name||C[10]!==I||C[11]!==z?(s=e=>{var t,s;z((t=$.category,s=$.name,"sql"===I?`${t}['${s}'] = '${e}'`:`${t}.${s}:"${e}"`))},C[8]=$.category,C[9]=$.name,C[10]=I,C[11]=z,C[12]=s):s=C[12];let B=s;C[13]!==$.category||C[14]!==$.name||C[15]!==R?(i=()=>{var e,t;R((e=$.category,t=$.name,`${e}['${t}']`))},C[13]=$.category,C[14]=$.name,C[15]=R,C[16]=i):i=C[16];let V=i;C[17]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(eH.A,{size:16}),C[17]=l):l=C[17],C[18]!==$.name?(o=(0,r.jsx)(x.E,{size:"sm",fw:500,children:$.name}),C[18]=$.name,C[19]=o):o=C[19];let W=eY[$.category];return C[20]!==W?(c=(0,r.jsx)(eF.E,{size:"xs",variant:"default",children:W}),C[20]=W,C[21]=c):c=C[21],C[22]!==o||C[23]!==c?(d=(0,r.jsxs)(f.Y,{gap:4,children:[l,o,c]}),C[22]=o,C[23]=c,C[24]=d):d=C[24],C[25]!==L||C[26]!==d?(u=(0,r.jsx)(eO.N,{onClick:L,children:d}),C[25]=L,C[26]=d,C[27]=u):u=C[27],C[28]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(eq.A,{size:14}),C[28]=m):m=C[28],C[29]!==V?(g=(0,r.jsx)(p.$,{variant:"secondary",size:"xs",leftSection:m,onClick:V,children:"Group By"}),C[29]=V,C[30]=g):g=C[30],C[31]!==g||C[32]!==u?(y=(0,r.jsxs)(f.Y,{justify:"space-between",children:[u,g]}),C[31]=g,C[32]=u,C[33]=y):y=C[33],C[34]===Symbol.for("react.memo_cache_sentinel")?(v=(0,r.jsx)(eX.A,{size:14}),C[34]=v):v=C[34],C[35]===Symbol.for("react.memo_cache_sentinel")?(j=e=>D(e.currentTarget.value),C[35]=j):j=C[35],C[36]!==M?(S=(0,r.jsx)(eg.k,{size:"xs",placeholder:"Search values...",leftSection:v,value:M,onChange:j}),C[36]=M,C[37]=S):S=C[37],C[38]!==B||C[39]!==P||C[40]!==M||C[41]!==O?(_=P?(0,r.jsx)(b.s,{justify:"center",py:"md",children:(0,r.jsx)(eP.a,{size:"sm"})}):O&&O.length>0?(0,r.jsx)(eB.F.Autosize,{mah:200,children:(0,r.jsx)(w.B,{gap:4,children:O.map(e=>(0,r.jsxs)(f.Y,{justify:"space-between",py:4,px:"xs",style:{borderRadius:4,cursor:"pointer"},className:"hover-highlight",children:[(0,r.jsx)(x.E,{size:"xs",style:{wordBreak:"break-all"},children:e}),(0,r.jsx)(p.$,{variant:"secondary",size:"compact-xs",leftSection:(0,r.jsx)(eG.A,{size:12}),onClick:()=>B(e),children:"Where"})]},e))})}):(0,r.jsx)(x.E,{size:"xs",c:"dimmed",ta:"center",py:"md",children:M?"No matching values found":"No values found"}),C[38]=B,C[39]=P,C[40]=M,C[41]=O,C[42]=_):_=C[42],C[43]!==y||C[44]!==S||C[45]!==_?(E=(0,r.jsxs)(w.B,{gap:"xs",children:[y,S,_]}),C[43]=y,C[44]=S,C[45]=_,C[46]=E):E=C[46],E}function eQ(e){let t,s,i,l,o,c,d,u,m=(0,n.c)(16),{attributeKeys:h,onSelectAttribute:p}=e,[g,y]=(0,a.useState)("");e:{let e;if(!g){t=h;break e}if(m[0]!==h||m[1]!==g){let t=g.toLowerCase();e=h.filter(e=>e.name.toLowerCase().includes(t)),m[0]=h,m[1]=g,m[2]=e}else e=m[2];t=e}let j=t;if(m[3]!==j){for(let e of(s={ResourceAttributes:[],Attributes:[],ScopeAttributes:[]},j))s[e.category].push(e);m[3]=j,m[4]=s}else s=m[4];let _=s;m[5]===Symbol.for("react.memo_cache_sentinel")?(i=["ResourceAttributes","Attributes","ScopeAttributes"],m[5]=i):i=m[5];let E=i;return m[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(eX.A,{size:14}),m[6]=l):l=m[6],m[7]===Symbol.for("react.memo_cache_sentinel")?(o=e=>y(e.currentTarget.value),m[7]=o):o=m[7],m[8]!==g?(c=(0,r.jsx)(eg.k,{size:"xs",placeholder:"Search attributes...",leftSection:l,value:g,onChange:o}),m[8]=g,m[9]=c):c=m[9],m[10]!==_||m[11]!==p?(d=(0,r.jsx)(eB.F.Autosize,{mah:250,children:(0,r.jsx)(w.B,{gap:"sm",children:E.map(e=>{let t=_[e];return 0===t.length?null:(0,r.jsxs)(v.a,{children:[(0,r.jsxs)(f.Y,{gap:"xs",mb:4,children:[(0,r.jsx)(x.E,{size:"xs",fw:600,c:"dimmed",children:eY[e]}),(0,r.jsx)(eF.E,{size:"xs",variant:"default",children:t.length})]}),(0,r.jsx)(b.s,{gap:6,wrap:"wrap",children:t.map(e=>(0,r.jsx)(eO.N,{onClick:()=>p(e),children:(0,r.jsx)(S.t,{py:4,px:8,withBorder:!0,style:{cursor:"pointer"},className:"hover-highlight",children:(0,r.jsxs)(f.Y,{gap:4,children:[(0,r.jsx)(x.E,{size:"xs",children:e.name}),(0,r.jsx)(eK.A,{size:12})]})})},`${e.category}:${e.name}`))})]},e)})})}),m[10]=_,m[11]=p,m[12]=d):d=m[12],m[13]!==c||m[14]!==d?(u=(0,r.jsxs)(w.B,{gap:"xs",children:[c,d]}),m[13]=c,m[14]=d,m[15]=u):u=m[15],u}function e0(e){let t,s,i,l,o,c,d,u,m,h,p,g,y,j,w=(0,n.c)(41),{databaseName:_,metricName:E,tableSource:C,metricType:N,attributeKeys:k,isLoading:T,language:$,metricMetadata:I,onAddToWhere:z,onAddToGroupBy:L}=e,[R,M]=(0,A.j)(!1),{toggle:D}=M,[F,O]=(0,a.useState)(null);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{O(e)},w[0]=t):t=w[0];let P=t;w[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{O(null)},w[1]=s):s=w[1];let B=s;if(!E)return null;w[2]===Symbol.for("react.memo_cache_sentinel")?(i={flex:1,minWidth:0},w[2]=i):i=w[2],w[3]!==I||w[4]!==E?(l=I?.description?(0,r.jsx)(x.E,{size:"xs",c:"dimmed",truncate:!0,children:I.description}):(0,r.jsx)(x.E,{size:"xs",c:"dimmed",children:E}),w[3]=I,w[4]=E,w[5]=l):l=w[5],w[6]!==I?(o=I?.unit&&(0,r.jsxs)(f.Y,{gap:4,mt:2,children:[(0,r.jsx)(x.E,{size:"xs",c:"dimmed",children:"Unit:"}),(0,r.jsx)(eF.E,{size:"xs",variant:"light",children:function(e){if(eZ[e])return eZ[e];if(e.includes("/")){let[t,s]=e.split("/"),r=eZ[t]||t,n=eZ[s]||s,a=n.endsWith("s")?n.slice(0,-1):n;return`${r}/${a}`}return e}(I.unit)})]}),w[6]=I,w[7]=o):o=w[7],w[8]!==l||w[9]!==o?(c=(0,r.jsxs)(v.a,{style:i,children:[l,o]}),w[8]=l,w[9]=o,w[10]=c):c=w[10],w[11]!==k.length?(d=k.length>0&&(0,r.jsxs)(eF.E,{size:"xs",variant:"light",children:[k.length," attributes"]}),w[11]=k.length,w[12]=d):d=w[12];let V=R?"rotate(180deg)":"rotate(0deg)";return w[13]!==V?(u=(0,r.jsx)(eJ.A,{size:16,style:{transform:V,transition:"transform 200ms"}}),w[13]=V,w[14]=u):u=w[14],w[15]!==u||w[16]!==d?(m=(0,r.jsxs)(f.Y,{gap:"xs",wrap:"nowrap",children:[d,u]}),w[15]=u,w[16]=d,w[17]=m):m=w[17],w[18]!==m||w[19]!==c?(h=(0,r.jsxs)(f.Y,{justify:"space-between",wrap:"nowrap",children:[c,m]}),w[18]=m,w[19]=c,w[20]=h):h=w[20],w[21]!==h||w[22]!==D?(p=(0,r.jsx)(eO.N,{onClick:D,w:"100%",children:h}),w[21]=h,w[22]=D,w[23]=p):p=w[23],w[24]!==k||w[25]!==_||w[26]!==T||w[27]!==$||w[28]!==E||w[29]!==N||w[30]!==L||w[31]!==z||w[32]!==F||w[33]!==C?(g=(0,r.jsx)(v.a,{pt:"xs",children:T?(0,r.jsx)(b.s,{justify:"center",py:"md",children:(0,r.jsx)(eP.a,{size:"sm"})}):0===k.length?(0,r.jsx)(x.E,{size:"xs",c:"dimmed",ta:"center",py:"md",children:"No attributes found for this metric"}):F?(0,r.jsx)(eU,{databaseName:_,metricType:N,metricName:E,tableSource:C,attribute:F,language:$,onAddToWhere:z,onBack:B,onAddToGroupBy:L}):(0,r.jsx)(eQ,{attributeKeys:k,onSelectAttribute:P})}),w[24]=k,w[25]=_,w[26]=T,w[27]=$,w[28]=E,w[29]=N,w[30]=L,w[31]=z,w[32]=F,w[33]=C,w[34]=g):g=w[34],w[35]!==R||w[36]!==g?(y=(0,r.jsx)(eV.S,{in:R,children:g}),w[35]=R,w[36]=g,w[37]=y):y=w[37],w[38]!==p||w[39]!==y?(j=(0,r.jsxs)(S.t,{withBorder:!0,p:"xs",mt:"xs",children:[p,y]}),w[38]=p,w[39]=y,w[40]=j):j=w[40],j}var e1=s(10342),e2=s(85508),e3=s(56343),e5=s(78550);let e4=({dateRange:e,metricSource:t,metricType:s})=>{let r=new Date,n=e||[(0,e1.A)(r,1),r],a=(0,e2.A)(n[1],n[0]);if(a<1){let e=(0,e3.A)(n[0],1);n=e>r?[(0,e1.A)(n[1],1),n[1]]:[n[0],e]}else a>3&&(n=[(0,e1.A)(n[1],3),n[1]]);return{from:{databaseName:t.from.databaseName,tableName:t.metricTables?.[s]??""},where:"",whereLanguage:"sql",select:"",timestampValueExpression:t.timestampValueExpression??"",connection:t.connection,dateRange:n}};function e6(e){let t,s,a,i,l=(0,n.c)(24),{metricType:o,metricName:c,setMetricType:d,setMetricName:u,isLoading:m,isError:x,metricSource:p,error:g,onFocus:f,"data-testid":b}=e,{gaugeMetrics:y,histogramMetrics:v,sumMetrics:j}=function(e,t){let s,r,a,i,l,o,c,d,u,m,x,p=(0,n.c)(26);void 0!==p[0]||p[1]!==e?(s=e4({dateRange:void 0,metricSource:e,metricType:h.SX.Gauge}),p[0]=void 0,p[1]=e,p[2]=s):s=p[2],void 0!==p[3]||p[4]!==e?(r=e4({dateRange:void 0,metricSource:e,metricType:h.SX.Histogram}),p[3]=void 0,p[4]=e,p[5]=r):r=p[5],void 0!==p[6]||p[7]!==e?(a=e4({dateRange:void 0,metricSource:e,metricType:h.SX.Sum}),p[6]=void 0,p[7]=e,p[8]=a):a=p[8],p[9]!==s||p[10]!==r||p[11]!==a?(i={gaugeConfig:s,histogramConfig:r,sumConfig:a},p[9]=s,p[10]=r,p[11]=a,p[12]=i):i=p[12];let{gaugeConfig:g,histogramConfig:f,sumConfig:b}=i;p[13]===Symbol.for("react.memo_cache_sentinel")?(l=["MetricName"],p[13]=l):l=p[13],p[14]!==g?(o={chartConfig:g,keys:l,limit:3e3,disableRowLimit:!0},p[14]=g,p[15]=o):o=p[15];let{data:y}=(0,e5.lo)(o);p[16]===Symbol.for("react.memo_cache_sentinel")?(c=["MetricName"],p[16]=c):c=p[16],p[17]!==f?(d={chartConfig:f,keys:c,limit:3e3,disableRowLimit:!0},p[17]=f,p[18]=d):d=p[18];let{data:v}=(0,e5.lo)(d);p[19]===Symbol.for("react.memo_cache_sentinel")?(u=["MetricName"],p[19]=u):u=p[19],p[20]!==b?(m={chartConfig:b,keys:u,limit:3e3,disableRowLimit:!0},p[20]=b,p[21]=m):m=p[21];let{data:j}=(0,e5.lo)(m),S=y?.[0].value,w=v?.[0].value,_=j?.[0].value;return p[22]!==S||p[23]!==w||p[24]!==_?(x={gaugeMetrics:S,histogramMetrics:w,sumMetrics:_},p[22]=S,p[23]=w,p[24]=_,p[25]=x):x=p[25],x}(p);if(l[0]!==y||l[1]!==v||l[2]!==c||l[3]!==o||l[4]!==j){if(t=[...y?.map(e9)??[],...v?.map(e8)??[],...j?.map(e7)??[]],c&&!t.find(e=>e.value!==`${c}:::::::${o}`)){let e,s,r=`${c}:::::::${o}`;l[6]!==o?(e=(0,er.Zr)(o),l[6]=o,l[7]=e):e=l[7];let n=`${c} (${e})`;l[8]!==r||l[9]!==n?(s={value:r,label:n},l[8]=r,l[9]=n,l[10]=s):s=l[10],t.push(s)}l[0]=y,l[1]=v,l[2]=c,l[3]=o,l[4]=j,l[5]=t}else t=l[5];let S=t,w=c&&o?`${c}:::::::${o}`:null,_=m||x,E=m?"Loading...":x?"Unable to load metrics":"Select a metric...";return l[11]===Symbol.for("react.memo_cache_sentinel")?(s={position:"bottom-start",width:"auto",zIndex:1111},l[11]=s):s=l[11],l[12]!==u||l[13]!==d?(a=e=>{let[t,s]=e?.split(":::::::")??[];u(t??""),s&&d(s.toLowerCase())},l[12]=u,l[13]=d,l[14]=a):a=l[14],l[15]!==w||l[16]!==b||l[17]!==g||l[18]!==f||l[19]!==S||l[20]!==_||l[21]!==E||l[22]!==a?(i=(0,r.jsx)(ec.l,{disabled:_,variant:"filled",placeholder:E,data:S,limit:100,comboboxProps:s,value:w,searchable:!0,clearable:!0,onChange:a,onFocus:f,error:g,"data-testid":b}),l[15]=w,l[16]=b,l[17]=g,l[18]=f,l[19]=S,l[20]=_,l[21]=E,l[22]=a,l[23]=i):i=l[23],i}function e7(e){return{value:`${e}:::::::sum`,label:`${e} (Sum)`}}function e8(e){return{value:`${e}:::::::histogram`,label:`${e} (Histogram)`}}function e9(e){return{value:`${e}:::::::gauge`,label:`${e} (Gauge)`}}var te=s(27166),tt=s(62801),ts=s(60665),tr=s(93251),tn=s(97344);let ta="_new";function ti({chartConfig:e,opened:t,onClose:s}){let n=(0,tr.jE)(),{data:i,isLoading:l}=(0,tn.L9)(),c=(0,tn.mG)(),d=(0,tn.vY)(),{control:u,handleSubmit:m,reset:g,formState:b}=(0,o.mN)({defaultValues:{dashboardId:"",newDashboardName:""}}),y=(0,o.FH)({control:u,name:"dashboardId"})===ta;(0,a.useEffect)(()=>{t||g()},[t,g]);let j=[...i?.map(e=>({value:e.id,label:e.name}))||[],{value:ta,label:"Create New Dashboard"}],S=t=>{var s;let r=0===(s=t.tiles).length?{x:0,y:0}:{x:0,y:Math.max(...s.map(e=>e.y+e.h))},n=function(e){switch(e){case h.t2.Line:case h.t2.StackedBar:return{w:12,h:10};case h.t2.Table:case h.t2.Search:return{w:24,h:12};case h.t2.Number:return{w:6,h:6};case h.t2.Markdown:return{w:12,h:8};case h.t2.Heatmap:default:return{w:12,h:10}}}(e.displayType);return{id:Math.floor(1e8*Math.random()).toString(36),x:r.x,y:r.y,w:n.w,h:n.h,config:e}},_=m(async e=>{try{if(y){if(!e.newDashboardName.trim())return void ts.$e.show({color:"red",title:"Validation Error",message:"Dashboard name is required"});let t=S({id:"",name:"",tiles:[],tags:[]}),n=await c.mutateAsync({name:e.newDashboardName.trim(),tiles:[t],tags:[]});ts.$e.show({color:"green",title:"Chart saved to dashboard",message:(0,r.jsxs)(r.Fragment,{children:["View on"," ",(0,r.jsx)("a",{href:`/dashboards/${n.id}`,style:{color:"inherit",textDecoration:"underline"},children:n.name})]}),autoClose:5e3}),s()}else{if(!e.dashboardId)return void ts.$e.show({color:"red",title:"Validation Error",message:"Please select a dashboard"});let t=n.getQueryData(["dashboards"]),a=t?.find(t=>t.id===e.dashboardId);if(!a)return void ts.$e.show({color:"red",title:"Error",message:"Dashboard not found. Please refresh and try again."});let i=S(a);await d.mutateAsync({id:a.id,tiles:[...a.tiles,i]}),ts.$e.show({color:"green",title:"Chart saved to dashboard",message:(0,r.jsxs)(r.Fragment,{children:["View on"," ",(0,r.jsx)("a",{href:`/dashboards/${a.id}`,style:{color:"inherit",textDecoration:"underline"},children:a.name})]}),autoClose:5e3}),s()}}catch(e){ts.$e.show({color:"red",title:"Error saving chart",message:e instanceof Error?e.message:"Failed to save chart to dashboard"})}}),E=c.isPending||d.isPending;return(0,r.jsx)(te.a,{opened:t,onClose:s,title:"Save to Dashboard",size:"lg",children:(0,r.jsx)("form",{onSubmit:_,children:(0,r.jsxs)(w.B,{gap:"md",children:[(0,r.jsx)(tt.Z,{withBorder:!0,padding:"sm",children:(0,r.jsxs)(w.B,{gap:"xs",children:[(0,r.jsx)(x.E,{size:"sm",fw:500,children:"Chart Preview"}),(0,r.jsxs)(f.Y,{gap:"xs",children:[(0,r.jsx)(x.E,{size:"sm",c:"dimmed",children:"Name:"}),(0,r.jsx)(x.E,{size:"sm",children:e.name||"Untitled Chart"})]}),e.displayType&&(0,r.jsxs)(f.Y,{gap:"xs",children:[(0,r.jsx)(x.E,{size:"sm",c:"dimmed",children:"Type:"}),(0,r.jsx)(x.E,{size:"sm",children:e.displayType})]})]})}),(0,r.jsxs)(v.a,{children:[(0,r.jsx)(x.E,{size:"xs",mb:"xs",children:"Dashboard *"}),(0,r.jsx)(o.xI,{name:"dashboardId",control:u,rules:{required:!0},render:({field:e})=>(0,r.jsx)(ec.l,{...e,data:j,placeholder:"Select a dashboard",searchable:!0,disabled:l||E,nothingFoundMessage:"No dashboards found"})})]}),y&&(0,r.jsxs)(v.a,{children:[(0,r.jsx)(x.E,{size:"xs",mb:"xs",children:"Dashboard Name *"}),(0,r.jsx)(o.xI,{name:"newDashboardName",control:u,rules:{required:!0},render:({field:e})=>(0,r.jsx)(eg.k,{...e,placeholder:"Enter dashboard name",disabled:E})})]}),(0,r.jsxs)(f.Y,{justify:"flex-end",mt:"md",children:[(0,r.jsx)(p.$,{variant:"subtle",onClick:s,disabled:E,children:"Cancel"}),(0,r.jsx)(p.$,{type:"submit",loading:E,children:"Save to Dashboard"})]})]})})})}var tl=s(86761),to=s(57478);let tc=(e,t)=>`${e}${t}`;function td(e,t){let s=t.kind===h.GL.Metric;return{...e,select:!s&&Array.isArray(e.select)?e.select.map(e=>l()(e,["metricName","metricType"])):e.select,metricTables:s?e.metricTables:void 0,having:e.displayType===h.t2.Table?e.having:void 0,orderBy:e.displayType===h.t2.Table?e.orderBy:void 0}}let tu=(e,t,s)=>{if(e?.kind===h.GL.Metric&&Array.isArray(t)){let e=!1;return t.forEach((t,r)=>{t.metricType&&!t.metricName&&(s(tc(`series.${r}.`,"metricName"),{type:"manual",message:"Please select a metric name"}),e=!0)}),e}return!1},tm=function(e){let t,s,i,l,c,d,u,m,y,v,j,S,w,_,E,C,N,k,A,z,L,R,M,D,F,O,P,B,V,W,H,X,G=(0,n.c)(138),{control:K,databaseName:J,dateRange:Z,connectionId:U,index:Q,namePrefix:ea,onRemoveSeries:ei,onSwapSeries:el,onSubmit:eo,setValue:ec,showGroupBy:ed,showHaving:em,tableName:eh,parentRef:ex,length:ep,tableSource:eg,errors:ef,clearErrors:eb}=e,ey=`${ea}aggFn`;G[0]!==K||G[1]!==ey?(t={control:K,name:ey},G[0]=K,G[1]=ey,G[2]=t):t=G[2];let ev=(0,o.FH)(t),ej=`${ea}aggConditionLanguage`;G[3]!==K||G[4]!==ej?(s={control:K,name:ej,defaultValue:"lucene"},G[3]=K,G[4]=ej,G[5]=s):s=G[5];let eS=(0,o.FH)(s),ew=`${ea}metricType`;G[6]!==K||G[7]!==ew?(i={control:K,name:ew},G[6]=K,G[7]=ew,G[8]=i):i=G[8];let e_=(0,o.FH)(i);G[9]!==e_||G[10]!==ea||G[11]!==ec||G[12]!==eg?.kind?(l=()=>{eg?.kind!==h.GL.Metric||e_||ec(`${ea}metricType`,h.SX.Gauge)},G[9]=e_,G[10]=ea,G[11]=ec,G[12]=eg?.kind,G[13]=l):l=G[13];let eE=eg?.kind;G[14]!==e_||G[15]!==ea||G[16]!==ec||G[17]!==eE?(c=[eE,e_,ea,ec],G[14]=e_,G[15]=ea,G[16]=ec,G[17]=eE,G[18]=c):c=G[18],(0,a.useEffect)(l,c),G[19]!==eh||G[20]!==e_||G[21]!==eg?(d=eg?.kind===h.GL.Metric?(0,er.U6)(eg,e_):eh,G[19]=eh,G[20]=e_,G[21]=eg,G[22]=d):d=G[22];let eC=d,eN=`${ea}metricName`;G[23]!==K||G[24]!==eN?(u={control:K,name:eN},G[23]=K,G[24]=eN,G[25]=u):u=G[25];let ek=(0,o.FH)(u),eA=`${ea}aggCondition`;G[26]!==K||G[27]!==eA?(m={control:K,name:eA},G[26]=K,G[27]=eA,G[28]=m):m=G[28];let eT=(0,o.FH)(m);G[29]!==K?(y={control:K,name:"groupBy"},G[29]=K,G[30]=y):y=G[30];let e$=(0,o.FH)(y),eI="sql"===eS;G[31]!==J||G[32]!==ek||G[33]!==e_||G[34]!==eI||G[35]!==eg?(v={databaseName:J,metricType:e_,metricName:ek,tableSource:eg,isSql:eI},G[31]=J,G[32]=ek,G[33]=e_,G[34]=eI,G[35]=eg,G[36]=v):v=G[36];let{data:ez,isLoading:eL}=(({databaseName:e,metricType:t,metricName:s,tableSource:r,isSql:n})=>{let a=r?(0,er.U6)(r,t)??"":"",i=!!(e&&a&&t&&r&&r?.kind===h.GL.Metric);return(0,et.I)({queryKey:["metric-attributes",t,s,n,r],queryFn:async({signal:t})=>{if(!i)return[];let l=(0,es.W)(),o=(0,ee.kg)`
        SELECT DISTINCT
          ScopeAttributes,
          ResourceAttributes,
          Attributes
        FROM ${(0,ee.k$)({database:e,table:a})}
        WHERE MetricName=${{String:s}}
        LIMIT ${{Int32:1e4}}
      `,c=await l.query({query:o.sql,query_params:o.params,format:"JSON",abort_signal:t,connectionId:r.connection}).then(e=>e.json());if(c?.data){var d=c.data;try{let e=new Set;for(let t of d)t.ScopeAttributes&&Object.entries(t.ScopeAttributes).forEach(([t,s])=>{let r=(0,er.ji)("ScopeAttributes",t,s,n);e.add(r)}),t.ResourceAttributes&&Object.entries(t.ResourceAttributes).forEach(([t,s])=>{let r=(0,er.ji)("ResourceAttributes",t,s,n);e.add(r)}),t.Attributes&&Object.entries(t.Attributes).forEach(([t,s])=>{let r=(0,er.ji)("Attributes",t,s,n);e.add(r)});return Array.from(e)}catch(e){return console.error("Error parsing metric autocomplete attributes",e),[]}}return[]},enabled:i})})(v);G[37]!==ez?(j=ez??[],G[37]=ez,G[38]=j):j=G[38],G[39]!==j?(S=(e=>{let t=["ResourceAttributes","ScopeAttributes","Attributes"],s=new Set,r=[];for(let n of e)for(let e of t){if(!n.startsWith(e))continue;let t=null,a=n.match(RegExp(`^${e}\\['([^']+)'\\]`));if(a)t=a[1];else{let s=n.match(RegExp(`^${e}\\.([^:]+):`));s&&(t=s[1])}if(t){let n=`${e}:${t}`;s.has(n)||(s.add(n),r.push({name:t,category:e}))}break}return r.sort((e,t)=>{if(e.category!==t.category){let s=["ResourceAttributes","Attributes","ScopeAttributes"];return s.indexOf(e.category)-s.indexOf(t.category)}return e.name.localeCompare(t.name)}),r})(j),G[39]=j,G[40]=S):S=G[40];let eR=S;G[41]!==J||G[42]!==ek||G[43]!==e_||G[44]!==eg?(w={databaseName:J,metricType:e_,metricName:ek,tableSource:eg},G[41]=J,G[42]=ek,G[43]=e_,G[44]=eg,G[45]=w):w=G[45];let{data:eM}=(({databaseName:e,metricType:t,metricName:s,tableSource:r})=>{let n=r?(0,er.U6)(r,t)??"":"",a=!!(e&&t&&s&&r&&n&&r?.kind===h.GL.Metric);return(0,et.I)({queryKey:["metric-metadata",e,t,s],queryFn:async({signal:t})=>{if(!a)return null;let i=(0,es.W)(),l=(0,ee.kg)`
        SELECT
          MetricUnit,
          MetricDescription
        FROM ${(0,ee.k$)({database:e,table:n})}
        WHERE MetricName = ${{String:s}}
        LIMIT 1
      `,o=await i.query({query:l.sql,query_params:l.params,format:"JSON",abort_signal:t,connectionId:r.connection}).then(e=>e.json());return o?.data?.[0]?{unit:o.data[0].MetricUnit||"",description:o.data[0].MetricDescription||""}:null},enabled:a,staleTime:3e5})})(w);G[46]!==eT||G[47]!==ea||G[48]!==eo||G[49]!==ec?(_=e=>{let t=eT||"";ec(`${ea}aggCondition`,t?`${t} AND ${e}`:e),eo()},G[46]=eT,G[47]=ea,G[48]=eo,G[49]=ec,G[50]=_):_=G[50];let eF=_;G[51]!==e$||G[52]!==eo||G[53]!==ec?(E=e=>{let t=e$||"";ec("groupBy",t?`${t}, ${e}`:e),eo()},G[51]=e$,G[52]=eo,G[53]=ec,G[54]=E):E=G[54];let eO=E,eP="none"!==ev,eB=eC??"",eV=U??"",eW=eg?.kind===h.GL.Metric?ek:void 0;G[55]!==J||G[56]!==eB||G[57]!==eV||G[58]!==eW?(C={databaseName:J,tableName:eB,connectionId:eV,metricName:eW},G[55]=J,G[56]=eB,G[57]=eV,G[58]=eW,G[59]=C):C=G[59];let eH=C;G[60]===Symbol.for("react.memo_cache_sentinel")?(N=(0,r.jsx)(x.E,{size:"xxs",children:"Alias"}),k={width:150},G[60]=N,G[61]=k):(N=G[60],k=G[61]);let eq=`${ea}alias`;G[62]!==eo?(A=()=>eo(),G[62]=eo,G[63]=A):A=G[63],G[64]!==K||G[65]!==eq||G[66]!==A?(z=(0,r.jsx)("div",{style:k,children:(0,r.jsx)(eD.M7,{name:eq,control:K,placeholder:"Series alias",onChange:A,size:"xs","data-testid":"series-alias-input"})}),G[64]=K,G[65]=eq,G[66]=A,G[67]=z):z=G[67],G[68]!==Q||G[69]!==el?(L=(Q??-1)>0&&(0,r.jsx)(p.$,{variant:"subtle",color:"gray",size:"xxs",onClick:()=>el(Q,Q-1),title:"Move up",children:(0,r.jsx)(T.A,{size:14})}),G[68]=Q,G[69]=el,G[70]=L):L=G[70],G[71]!==Q||G[72]!==ep||G[73]!==el?(R=(Q??-1)<ep-1&&(0,r.jsx)(p.$,{variant:"subtle",color:"gray",size:"xxs",onClick:()=>el(Q,Q+1),title:"Move down",children:(0,r.jsx)($.A,{size:14})}),G[71]=Q,G[72]=ep,G[73]=el,G[74]=R):R=G[74],G[75]!==Q||G[76]!==ep||G[77]!==ei?(M=((Q??-1)>0||ep>1)&&(0,r.jsxs)(p.$,{variant:"subtle",color:"gray",size:"xs",onClick:()=>ei(Q),children:[(0,r.jsx)(I.A,{size:14,className:"me-2"}),"Remove Series"]}),G[75]=Q,G[76]=ep,G[77]=ei,G[78]=M):M=G[78],G[79]!==z||G[80]!==L||G[81]!==R||G[82]!==M?(D=(0,r.jsx)(g.c,{label:(0,r.jsxs)(f.Y,{gap:"xs",children:[N,z,L,R,M]}),labelPosition:"right",mb:8,mt:"sm"}),G[79]=z,G[80]=L,G[81]=R,G[82]=M,G[83]=D):D=G[83],G[84]===Symbol.for("react.memo_cache_sentinel")?(F={minWidth:200},G[84]=F):F=G[84];let eX=`${ea}aggFn`,eG=`${ea}level`;return G[85]!==K||G[86]!==eX||G[87]!==eG?(O=(0,r.jsx)("div",{style:F,children:(0,r.jsx)(eu,{aggFnName:eX,quantileLevelName:eG,defaultValue:q.gT[0].value,control:K})}),G[85]=K,G[86]=eX,G[87]=eG,G[88]=O):O=G[88],G[89]!==eb||G[90]!==K||G[91]!==Z||G[92]!==ef?.metricName?.message||G[93]!==ek||G[94]!==e_||G[95]!==ea||G[96]!==ec||G[97]!==eg?(P=eg?.kind===h.GL.Metric&&e_&&(0,r.jsxs)("div",{style:{minWidth:220},children:[(0,r.jsx)(e6,{metricName:ek,dateRange:Z,metricType:e_,setMetricName:e=>{ec(`${ea}metricName`,e),ec(`${ea}valueExpression`,"Value")},setMetricType:e=>ec(`${ea}metricType`,e),metricSource:eg,"data-testid":"metric-name-selector",error:ef?.metricName?.message,onFocus:()=>eb(tc(ea,"metricName"))}),"gauge"===e_&&(0,r.jsx)(b.s,{justify:"end",children:(0,r.jsx)(eD.mh,{control:K,name:`${ea}isDelta`,label:"Delta",size:"xs",className:"mt-2"})})]}),G[89]=eb,G[90]=K,G[91]=Z,G[92]=ef?.metricName?.message,G[93]=ek,G[94]=e_,G[95]=ea,G[96]=ec,G[97]=eg,G[98]=P):P=G[98],G[99]!==ev||G[100]!==K||G[101]!==ea||G[102]!==eo||G[103]!==eH||G[104]!==eg?.kind?(B=eg?.kind!==h.GL.Metric&&"count"!==ev&&(0,r.jsx)("div",{style:{minWidth:220,..."none"===ev&&{flexGrow:2}},children:(0,r.jsx)(Y.Z,{tableConnection:eH,control:K,name:`${ea}valueExpression`,placeholder:"SQL Column",onSubmit:eo})}),G[99]=ev,G[100]=K,G[101]=ea,G[102]=eo,G[103]=eH,G[104]=eg?.kind,G[105]=B):B=G[105],G[106]!==eS||G[107]!==ez||G[108]!==K||G[109]!==ea||G[110]!==eo||G[111]!==ex||G[112]!==ec||G[113]!==ed||G[114]!==em||G[115]!==eP||G[116]!==eH?(V=(eP||ed||em)&&(0,r.jsxs)("div",{className:"flex-grow-1 gap-2 align-items-center",style:{display:"grid",gridTemplateColumns:"auto 1fr auto 1fr"},children:[eP&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.E,{size:"sm",children:"Where"}),(0,r.jsx)("div",{style:{gridColumn:em===ed?"span 3":void 0},children:"sql"===eS?(0,r.jsx)(Y.Z,{tableConnection:eH,control:K,name:`${ea}aggCondition`,placeholder:"SQL WHERE clause (ex. column = 'foo')",onLanguageChange:e=>ec(`${ea}aggConditionLanguage`,e),additionalSuggestions:ez,language:"sql",onSubmit:eo}):(0,r.jsx)(en.A,{tableConnection:eH,control:K,name:`${ea}aggCondition`,onLanguageChange:e=>ec(`${ea}aggConditionLanguage`,e),language:"lucene",placeholder:"Search your events w/ Lucene ex. column:foo",onSubmit:eo,additionalSuggestions:ez})})]}),ed&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.E,{size:"sm",style:{whiteSpace:"nowrap"},children:"Group By"}),(0,r.jsx)("div",{style:{minWidth:200,maxWidth:"100%",gridColumn:em||eP?void 0:"span 3"},children:(0,r.jsx)(Y.Z,{parentRef:ex,tableConnection:eH,control:K,name:"groupBy",placeholder:"SQL Columns",disableKeywordAutocomplete:!0,onSubmit:eo})}),em&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.E,{size:"sm",style:{whiteSpace:"nowrap"},children:"Having"}),(0,r.jsx)("div",{style:{minWidth:300,maxWidth:"100%"},children:(0,r.jsx)(Y.Z,{tableConnection:eH,control:K,name:"having",placeholder:"SQL HAVING clause (ex. count() > 100)",disableKeywordAutocomplete:!0,onSubmit:eo})})]})]})]}),G[106]=eS,G[107]=ez,G[108]=K,G[109]=ea,G[110]=eo,G[111]=ex,G[112]=ec,G[113]=ed,G[114]=em,G[115]=eP,G[116]=eH,G[117]=V):V=G[117],G[118]!==O||G[119]!==P||G[120]!==B||G[121]!==V?(W=(0,r.jsxs)(b.s,{gap:"sm",mt:"xs",align:"start",children:[O,P,B,V]}),G[118]=O,G[119]=P,G[120]=B,G[121]=V,G[122]=W):W=G[122],G[123]!==eS||G[124]!==eR||G[125]!==J||G[126]!==eO||G[127]!==eF||G[128]!==eL||G[129]!==eM||G[130]!==ek||G[131]!==e_||G[132]!==eg?(H=eg?.kind===h.GL.Metric&&ek&&(0,r.jsx)(e0,{databaseName:J,metricType:e_,metricName:ek,tableSource:eg,attributeKeys:eR,isLoading:eL,language:"sql"===eS?"sql":"lucene",metricMetadata:eM,onAddToWhere:eF,onAddToGroupBy:eO}),G[123]=eS,G[124]=eR,G[125]=J,G[126]=eO,G[127]=eF,G[128]=eL,G[129]=eM,G[130]=ek,G[131]=e_,G[132]=eg,G[133]=H):H=G[133],G[134]!==D||G[135]!==W||G[136]!==H?(X=(0,r.jsxs)(r.Fragment,{children:[D,W,H]}),G[134]=D,G[135]=W,G[136]=H,G[137]=X):X=G[137],X},th=d.Ay.object({alert:h.fB.optional()}).passthrough();function tx(e){var t;let s,i,d,k,T,$,I,P,B,V,W,H,ee,et,es,ec,ed,eu,em,eh,ex,ep,eg,ef,eb,ey,ev,ej,eS,ew,e_,eE,eC,eN,ek,eA,eT,e$,eI,eF,eO,eP,eB,eV,eW,eH,eq,eX,eG,eK,eJ,eY,eZ,eU,eQ,e0,e1,e2,e3,e5,e4,e6,e7,e8,e9,te,tt,ts,tr,tn,ta,tc,tx=(0,n.c)(259),{dashboardId:tg,chartConfig:tf,displayedTimeInputValue:tb,dateRange:ty,isSaving:tv,onTimeRangeSearch:tj,setChartConfig:tS,setDisplayedTimeInputValue:tw,onSave:t_,onTimeRangeSelect:tE,onClose:tC,onDirtyChange:tN,"data-testid":tk,submitRef:tA}=e;tx[0]!==tf.select?(s=Array.isArray(tf.select)?tf.select:[],tx[0]=tf.select,tx[1]=s):s=tx[1],tx[2]!==tf||tx[3]!==s?(i={...tf,series:s},tx[2]=tf,tx[3]=s,tx[4]=i):i=tx[4];let tT=i;tx[5]===Symbol.for("react.memo_cache_sentinel")?(d=(0,u.u)(th),tx[5]=d):d=tx[5],tx[6]!==tT?(k={defaultValues:tT,values:tT,resolver:d},tx[6]=tT,tx[7]=k):k=tx[7];let{control:t$,setValue:tI,handleSubmit:tz,register:tL,setError:tR,clearErrors:tM,formState:tD}=(0,o.mN)(k),{errors:tF,isDirty:tO}=tD;tx[8]!==t$?(T={control:t$,name:"series"},tx[8]=t$,tx[9]=T):T=tx[9];let{fields:tP,append:tB,remove:tV,swap:tW}=(0,o.jz)(T);tx[10]!==tO||tx[11]!==tN?($=()=>{tN?.(tO)},I=[tO,tN],tx[10]=tO,tx[11]=tN,tx[12]=$,tx[13]=I):($=tx[12],I=tx[13]),(0,a.useEffect)($,I);let[tH,tq]=(0,a.useState)(!1);tx[14]!==t$?(P={control:t$,name:"select"},tx[14]=t$,tx[15]=P):P=tx[15];let tX=(0,o.FH)(P);tx[16]!==t$?(B={control:t$,name:"source"},tx[16]=t$,tx[17]=B):B=tx[17];let tG=(0,o.FH)(B);tx[18]!==t$?(V={control:t$,name:"whereLanguage"},tx[18]=t$,tx[19]=V):V=tx[19];let tK=(0,o.FH)(V);tx[20]!==t$?(W={control:t$,name:"alert"},tx[20]=t$,tx[21]=W):W=tx[21];let tJ=(0,o.FH)(W);tx[22]!==t$?(H={control:t$,name:"seriesReturnType"},tx[22]=t$,tx[23]=H):H=tx[23];let tY=(0,o.FH)(H);tx[24]!==t$?(ee={control:t$,name:"groupBy"},tx[24]=t$,tx[25]=ee):ee=tx[25];let tZ=(0,o.FH)(ee),tU=(0,o.FH)({control:t$,name:"displayType"})??h.t2.Line;tx[26]!==t$?(et={control:t$,name:"markdown"},tx[26]=t$,tx[27]=et):et=tx[27];let tQ=(0,o.FH)(et);tx[28]!==t$?(es={control:t$,name:"alert.channel.type"},tx[28]=t$,tx[29]=es):es=tx[29];let t0=(0,o.FH)(es);tx[30]!==t$?(ec={control:t$,name:"granularity"},tx[30]=t$,tx[31]=ec):ec=tx[31];let t1=(0,o.FH)(ec);tx[32]!==tG?(ed={id:tG},tx[32]=tG,tx[33]=ed):ed=tx[33];let{data:t2}=(0,ea.Fo)(ed),t3=t2?.from.databaseName,t5=t2?.from.tableName;switch(tU){case h.t2.Search:eu="search";break;case h.t2.Markdown:eu="markdown";break;case h.t2.Table:eu="table";break;case h.t2.Pie:eu="pie";break;case h.t2.Number:eu="number";break;default:eu="time"}let t4=eu;tx[34]!==tU||tx[35]!==tI?(em=()=>{tU!==h.t2.Line&&tI("alert",void 0)},eh=[tU,tI],tx[34]=tU,tx[35]=tI,tx[36]=em,tx[37]=eh):(em=tx[36],eh=tx[37]),(0,a.useEffect)(em,eh),tx[38]===Symbol.for("react.memo_cache_sentinel")?(ex=["table","time","number","pie"],tx[38]=ex):ex=tx[38];let t6=ex.includes(t4),t7=t2?.kind!==h.GL.Metric;tx[39]===Symbol.for("react.memo_cache_sentinel")?(ep=["alignDateRangeToGranularity","fillNulls","compareToPreviousPeriod","numberFormat"],tx[39]=ep):ep=tx[39],tx[40]!==t$?(eg={control:t$,name:ep},tx[40]=t$,tx[41]=eg):eg=tx[41];let[t8,t9,se,st]=(0,o.FH)(eg);tx[42]!==t8||tx[43]!==se||tx[44]!==t9||tx[45]!==st?(ef={alignDateRangeToGranularity:t8,fillNulls:t9,compareToPreviousPeriod:se,numberFormat:st},tx[42]=t8,tx[43]=se,tx[44]=t9,tx[45]=st,tx[46]=ef):ef=tx[46];let ss=ef,[sr,sn]=(0,A.j)(!1),{open:sa,close:si}=sn,[sl,so]=(0,a.useState)(void 0),[sc,sd]=(0,a.useState)(void 0);tx[47]===Symbol.for("react.memo_cache_sentinel")?(eb=(e,t)=>{so(e),sd(t)},tx[47]=eb):eb=tx[47];let su=eb;t:{let e,t,s;if(!sl){ey=void 0;break t}tx[48]!==tJ||tx[49]!==sl.granularity?(e=tJ?(0,ei.lT)(tJ.interval):sl.granularity,tx[48]=tJ,tx[49]=sl.granularity,tx[50]=e):e=tx[50],tx[51]!==tJ||tx[52]!==sl.dateRange?(t=tJ?(0,ei.yN)(sl.dateRange,tJ.interval):sl.dateRange,tx[51]=tJ,tx[52]=sl.dateRange,tx[53]=t):t=tx[53],tx[54]!==sl||tx[55]!==e||tx[56]!==t?(s={...sl,granularity:e,dateRange:t},tx[54]=sl,tx[55]=e,tx[56]=t,tx[57]=s):s=tx[57],ey=s}let sm=ey,[sh,sx]=(0,a.useState)(!1);tx[58]!==ty||tx[59]!==tz||tx[60]!==tS||tx[61]!==tR||tx[62]!==t2?(ev=()=>{tz(e=>{if(tu(t2,e.series,tR))return;let t={...l()(e,["series"]),select:e.displayType===h.t2.Search?e.select:e.series};if(tS?.(t),null!=t2){let e=!t.select||0===t.select.length;su(structuredClone(td({...t,from:t2.from,timestampValueExpression:t2.timestampValueExpression,dateRange:ty,connection:t2.connection,implicitColumnExpression:t2.implicitColumnExpression,metricTables:t2.metricTables,select:e?t2.defaultTableSelectExpression||"":t.select},t2)),t2)}})()},tx[58]=ty,tx[59]=tz,tx[60]=tS,tx[61]=tR,tx[62]=t2,tx[63]=ev):ev=tx[63];let sp=ev;tx[64]!==sp||tx[65]!==tI?(ej=e=>{tI("orderBy",(0,er.pX)(e)??""),sp()},tx[64]=sp,tx[65]=tI,tx[66]=ej):ej=tx[66];let sg=ej;tx[67]!==sl?(eS=sl?.orderBy&&"string"==typeof sl.orderBy?(0,er.t3)(sl.orderBy):void 0,tx[67]=sl,tx[68]=eS):eS=tx[68];let sf=eS;tx[69]!==sp||tx[70]!==tA?(ew=()=>{tA&&(tA.current=sp)},e_=[sp,tA],tx[69]=sp,tx[70]=tA,tx[71]=ew,tx[72]=e_):(ew=tx[71],e_=tx[72]),(0,a.useEffect)(ew,e_),tx[73]!==tU||tx[74]!==t_||tx[75]!==tR||tx[76]!==t2?(eE=e=>{if(null!=t2){if(tu(t2,e.series,tR))return;tU===h.t2.Search&&"string"!=typeof e.select?e.select="":tU!==h.t2.Search&&(e.select=e.series);let t=td(l()(e,["series"]),t2);t_?.(t)}},tx[73]=tU,tx[74]=t_,tx[75]=tR,tx[76]=t2,tx[77]=eE):eE=tx[77];let sb=eE,sy=(0,a.useRef)(t1),sv=(0,a.useRef)(tU);if(tx[78]!==t1||tx[79]!==sp?(eC=()=>{t1!==sy.current&&(sy.current=t1,sp())},eN=[t1,sp],tx[78]=t1,tx[79]=sp,tx[80]=eC,tx[81]=eN):(eC=tx[80],eN=tx[81]),(0,a.useEffect)(eC,eN),tx[82]!==tU||tx[83]!==sp||tx[84]!==tX||tx[85]!==tI?(ek=()=>{if(tU!==sv.current){if(sv.current=tU,tU===h.t2.Search&&"string"!=typeof tX&&(tI("select",""),tI("series",[])),tU!==h.t2.Search&&"string"==typeof tX){let e=[{aggFn:"count",aggCondition:"",aggConditionLanguage:"lucene",valueExpression:""}];tI("where",""),tI("select",e),tI("series",e)}sp()}},eA=[tU,tX,tI,sp],tx[82]=tU,tx[83]=sp,tx[84]=tX,tx[85]=tI,tx[86]=ek,tx[87]=eA):(ek=tx[86],eA=tx[87]),(0,a.useEffect)(ek,eA),tx[88]!==ty?(eT=()=>{so(e=>null==e?e:{...e,dateRange:ty})},e$=[ty],tx[88]=ty,tx[89]=eT,tx[90]=e$):(eT=tx[89],e$=tx[90]),(0,a.useEffect)(eT,e$),tx[91]!==sl)eI=((sl?.select?.length??0)>0||"string"==typeof sl?.select)&&sl?.from?.databaseName&&(sl?.from?.tableName||sl?.metricTables)&&sl?.timestampValueExpression,tx[91]=sl,tx[92]=eI;else eI=tx[92];let sj=eI;tx[93]!==t4||tx[94]!==tf||tx[95]!==ty||tx[96]!==sm||tx[97]!==sl||tx[98]!==sc?.id||tx[99]!==t2?(eF=()=>{let e=!!sl,t=sc?.id===t2?.id,s=tf?.source===t2?.id,r="time"===t4?sm:sl,n=e&&t?r:tf&&s?{...tf,dateRange:ty,timestampValueExpression:t2.timestampValueExpression,from:t2.from,connection:t2.connection}:void 0;if(n){if("time"===t4)return(0,q.O7)(n);if("number"===t4)return(0,q._t)(n);if("table"===t4)return(0,q.Z7)(n);else if("pie"===t4)return(0,q.dY)(n);return n}},tx[93]=t4,tx[94]=tf,tx[95]=ty,tx[96]=sm,tx[97]=sl,tx[98]=sc?.id,tx[99]=t2,tx[100]=eF):eF=tx[100],sc?.id,tx[101]!==eF?(eO=eF(),tx[101]=eF,tx[102]=eO):eO=tx[102];let sS=eO;tx[103]!==ty?(eP=(0,q.r4)(ty),tx[103]=ty,tx[104]=eP):eP=tx[104];let sw=eP;tx[105]!==ty||tx[106]!==sl||tx[107]!==sj||tx[108]!==t2?(eB=null!=t2&&null!=sl&&sj?{...sl,orderBy:[{ordering:"DESC",valueExpression:(0,ea.AF)(t2.timestampValueExpression)}],dateRange:ty,timestampValueExpression:t2.timestampValueExpression,connection:t2.connection,from:t2.from,limit:{limit:200},select:t2?.defaultTableSelectExpression||"",filters:"string"==typeof(t=sl.select)?[]:t.map(({aggCondition:e,aggConditionLanguage:t})=>null!=t&&null!=e?{type:t,condition:e}:null).filter(Boolean),filtersLogicalOperator:"OR",groupBy:void 0,granularity:void 0,having:void 0}:null,tx[105]=ty,tx[106]=sl,tx[107]=sj,tx[108]=t2,tx[109]=eB):eB=tx[109];let s_=eB,[sE,sC]=(0,a.useState)(null);tx[110]!==sp||tx[111]!==tI?(eV=e=>{let{numberFormat:t,alignDateRangeToGranularity:s,fillNulls:r,compareToPreviousPeriod:n}=e;tI("numberFormat",t),tI("alignDateRangeToGranularity",s),tI("fillNulls",r),tI("compareToPreviousPeriod",n),sp()},tx[110]=sp,tx[111]=tI,tx[112]=eV):eV=tx[112];let sN=eV;tx[113]!==t2?(eW=(0,m.VO)(t2),tx[113]=t2,tx[114]=eW):eW=tx[114];let sk=eW;tx[115]!==t$?(eH=(0,r.jsx)(o.xI,{control:t$,name:"displayType",render:tp}),tx[115]=t$,tx[116]=eH):eH=tx[116],tx[117]===Symbol.for("react.memo_cache_sentinel")?(eq=(0,r.jsx)(x.E,{size:"sm",className:"text-nowrap",children:"Chart Name"}),tx[117]=eq):eq=tx[117],tx[118]!==t$?(eX=(0,r.jsxs)(b.s,{align:"center",gap:"sm",mb:"sm",children:[eq,(0,r.jsx)(eD.t4,{name:"name",control:t$,w:"100%",type:"text",placeholder:"My Chart Name","data-testid":"chart-name-input"})]}),tx[118]=t$,tx[119]=eX):eX=tx[119],tx[120]===Symbol.for("react.memo_cache_sentinel")?(eG=(0,r.jsx)(g.c,{my:"md"}),tx[120]=eG):eG=tx[120],tx[121]!==t4||tx[122]!==tJ||tx[123]!==tB||tx[124]!==sS||tx[125]!==tM||tx[126]!==t$||tx[127]!==tg||tx[128]!==t3||tx[129]!==ty||tx[130]!==tU||tx[131]!==tF||tx[132]!==tP||tx[133]!==tQ||tx[134]!==sp||tx[135]!==sa||tx[136]!==sE||tx[137]!==tL||tx[138]!==tV||tx[139]!==tX||tx[140]!==tY||tx[141]!==tI||tx[142]!==tW||tx[143]!==sk||tx[144]!==t5||tx[145]!==t2||tx[146]!==tK?(eK="markdown"===t4?(0,r.jsxs)("div",{children:[(0,r.jsx)(y.T,{...tL("markdown"),label:"Markdown content",placeholder:"Markdown",mb:"md",styles:{input:{minHeight:200}}}),(0,r.jsx)(v.a,{p:"md",mb:"md",children:(0,r.jsx)(el.A,{config:{markdown:tQ||"Preview"}})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(b.s,{mb:"md",align:"center",gap:"sm",justify:"space-between",children:[(0,r.jsxs)(f.Y,{children:[(0,r.jsx)(x.E,{pe:"md",size:"sm",children:"Data Source"}),(0,r.jsx)(to.W,{size:"xs",control:t$,name:"source","data-testid":"source-selector",sourceSchemaPreview:(0,r.jsx)(tl.A,{source:t2,variant:"text"})})]}),t2&&"search"!==t4&&(0,r.jsx)(eo.A,{source:t2,config:sS})]}),tU!==h.t2.Search&&Array.isArray(tX)?(0,r.jsxs)(r.Fragment,{children:[tP.map((e,t)=>(0,r.jsx)(tm,{control:t$,databaseName:t3??"",dateRange:ty,index:t,parentRef:sE,namePrefix:`series.${t}.`,onRemoveSeries:tV,length:tP.length,onSwapSeries:tW,onSubmit:sp,setValue:tI,connectionId:t2?.connection,showGroupBy:1===tP.length&&tU!==h.t2.Number,showHaving:1===tP.length&&tU===h.t2.Table,tableName:t5??"",tableSource:t2,errors:tF.series&&Array.isArray(tF.series)?tF.series[t]:void 0,clearErrors:tM},e.id)),tP.length>1&&tU!==h.t2.Number&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.c,{mt:"md",mb:"sm"}),(0,r.jsxs)("div",{className:"gap-2 align-items-center",style:{display:"grid",gridTemplateColumns:"auto minmax(0, 1fr)"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(x.E,{me:"sm",size:"sm",style:{whiteSpace:"nowrap"},children:"Group By"})}),(0,r.jsx)("div",{children:(0,r.jsx)(Y.Z,{tableConnection:sk,control:t$,name:"groupBy",placeholder:"SQL Columns",onSubmit:sp,disableKeywordAutocomplete:!0})}),tU===h.t2.Table&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(x.E,{me:"sm",size:"sm",style:{whiteSpace:"nowrap"},children:"Having"})}),(0,r.jsx)("div",{children:(0,r.jsx)(Y.Z,{tableConnection:sk,control:t$,name:"having",placeholder:"SQL HAVING clause (ex. count() > 100)",onSubmit:sp})})]})]})]}),(0,r.jsx)(g.c,{mt:"md",mb:"sm"}),(0,r.jsxs)(b.s,{mt:4,align:"center",justify:"space-between",children:[(0,r.jsxs)(f.Y,{gap:"xs",children:[tU!==h.t2.Number&&tU!==h.t2.Pie&&(0,r.jsxs)(p.$,{variant:"subtle",size:"sm",color:"gray",onClick:()=>{tB({aggFn:"count",aggCondition:"",aggConditionLanguage:"lucene",valueExpression:""})},children:[(0,r.jsx)(z.A,{size:14,className:"me-2"}),"Add Series"]}),2==tP.length&&tU!==h.t2.Number&&(0,r.jsx)(j.d,{label:"As Ratio",size:"sm",color:"gray",variant:"subtle",onClick:()=>{tI("seriesReturnType","ratio"===tY?"column":"ratio"),sp()},checked:"ratio"===tY}),tU===h.t2.Line&&tg&&!U.VO&&(0,r.jsxs)(p.$,{variant:"subtle",size:"sm",color:tJ?"red":"gray",onClick:()=>tI("alert",tJ?void 0:ei.C5),children:[(0,r.jsx)(L.A,{size:14,className:"me-2"}),tJ?"Remove Alert":"Add Alert"]})]}),(0,r.jsx)(p.$,{onClick:sa,size:"compact-sm",variant:"secondary",children:"Display Settings"})]})]}):(0,r.jsxs)(b.s,{gap:"xs",direction:"column",children:[(0,r.jsx)(Y.Z,{tableConnection:sk,control:t$,name:"select",placeholder:t2?.defaultTableSelectExpression||"SELECT Columns",defaultValue:t2?.defaultTableSelectExpression,onSubmit:sp,label:"SELECT"}),"sql"===tK?(0,r.jsx)(Y.Z,{tableConnection:sk,control:t$,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",onLanguageChange:e=>tI("whereLanguage",e),language:"sql",onSubmit:sp}):(0,r.jsx)(en.A,{tableConnection:sk,control:t$,name:"where",onLanguageChange:e=>tI("whereLanguage",e),language:"lucene",placeholder:"Search your events w/ Lucene ex. column:foo",onSubmit:sp})]})]}),tx[121]=t4,tx[122]=tJ,tx[123]=tB,tx[124]=sS,tx[125]=tM,tx[126]=t$,tx[127]=tg,tx[128]=t3,tx[129]=ty,tx[130]=tU,tx[131]=tF,tx[132]=tP,tx[133]=tQ,tx[134]=sp,tx[135]=sa,tx[136]=sE,tx[137]=tL,tx[138]=tV,tx[139]=tX,tx[140]=tY,tx[141]=tI,tx[142]=tW,tx[143]=sk,tx[144]=t5,tx[145]=t2,tx[146]=tK,tx[147]=eK):eK=tx[147],tx[148]!==tJ||tx[149]!==t0||tx[150]!==t$?(eJ=tJ&&(0,r.jsx)(S.t,{my:"sm",children:(0,r.jsx)(w.B,{gap:"xs",children:(0,r.jsxs)(S.t,{px:"md",py:"sm",radius:"xs",children:[(0,r.jsxs)(f.Y,{gap:"xs",justify:"space-between",children:[(0,r.jsxs)(f.Y,{gap:"xs",children:[(0,r.jsx)(x.E,{size:"sm",opacity:.7,children:"Alert when the value"}),(0,r.jsx)(c.mh,{data:(0,er.kR)(ei.cv),size:"xs",name:"alert.thresholdType",control:t$}),(0,r.jsx)(c.Q7,{min:1e-10,size:"xs",w:80,control:t$,name:"alert.threshold"}),"over",(0,r.jsx)(c.mh,{data:(0,er.kR)(ei.J_),size:"xs",name:"alert.interval",control:t$}),(0,r.jsx)(x.E,{size:"sm",opacity:.7,children:"window via"}),(0,r.jsx)(c.mh,{data:(0,er.kR)(ei.mo),size:"xs",name:"alert.channel.type",control:t$})]}),tJ?.createdBy&&(0,r.jsxs)(x.E,{size:"xs",opacity:.6,children:["Created by"," ",tJ.createdBy?.name||tJ.createdBy?.email]})]}),(0,r.jsx)(x.E,{size:"xxs",opacity:.5,mb:4,mt:"xs",children:"Send to"}),(0,r.jsx)(X.e,{control:t$,type:t0,namePrefix:"alert."})]})})}),tx[148]=tJ,tx[149]=t0,tx[150]=t$,tx[151]=eJ):eJ=tx[151],tx[152]!==sb||tx[153]!==tz||tx[154]!==tv||tx[155]!==t_?(eY=null!=t_&&(0,r.jsx)(p.$,{"data-testid":"chart-save-button",loading:tv,variant:"primary",onClick:tz(sb),children:"Save"}),tx[152]=sb,tx[153]=tz,tx[154]=tv,tx[155]=t_,tx[156]=eY):eY=tx[156],tx[157]!==tv||tx[158]!==tC?(eZ=null!=tC&&(0,r.jsx)(p.$,{variant:"subtle",color:"dark",onClick:tC,disabled:tv,children:"Cancel"}),tx[157]=tv,tx[158]=tC,tx[159]=eZ):eZ=tx[159],tx[160]!==eY||tx[161]!==eZ?(eU=(0,r.jsxs)(b.s,{gap:"sm",children:[eY,eZ]}),tx[160]=eY,tx[161]=eZ,tx[162]=eU):eU=tx[162],tx[163]!==t4||tx[164]!==t$||tx[165]!==tZ||tx[166]!==sp||tx[167]!==sE||tx[168]!==sk?(eQ="table"===t4&&(0,r.jsx)("div",{style:{width:400},children:(0,r.jsx)(Y.Z,{parentRef:sE,tableConnection:sk,placeholder:"string"==typeof tZ?tZ:"",control:t$,name:"orderBy",disableKeywordAutocomplete:!0,onSubmit:sp,label:"ORDER BY"})}),tx[163]=t4,tx[164]=t$,tx[165]=tZ,tx[166]=sp,tx[167]=sE,tx[168]=sk,tx[169]=eQ):eQ=tx[169],tx[170]!==t4||tx[171]!==tb||tx[172]!==tj||tx[173]!==tw?(e0="markdown"!==t4&&null!=tw&&null!=tb&&null!=tj&&(0,r.jsx)(Z.A,{inputValue:tb,setInputValue:tw,onSearch:e=>{tj(e)},onSubmit:e=>{tj(e)}}),tx[170]=t4,tx[171]=tb,tx[172]=tj,tx[173]=tw,tx[174]=e0):e0=tx[174],tx[175]!==t4||tx[176]!==t$?(e1="time"===t4&&(0,r.jsx)(Q.F9,{control:t$,name:"granularity"}),tx[175]=t4,tx[176]=t$,tx[177]=e1):e1=tx[177],tx[178]!==t4||tx[179]!==sp?(e2="markdown"!==t4&&(0,r.jsx)(p.$,{"data-testid":"chart-run-query-button",variant:"primary",type:"submit",onClick:sp,leftSection:(0,r.jsx)(R.A,{size:16}),style:{flexShrink:0},children:"Run"}),tx[178]=t4,tx[179]=sp,tx[180]=e2):e2=tx[180],tx[181]!==tg?(e3=!U.VO&&!tg&&(0,r.jsxs)(_.W,{width:250,children:[(0,r.jsx)(_.W.Target,{children:(0,r.jsx)(E.M,{variant:"secondary",size:"input-sm",children:(0,r.jsx)(M.A,{size:16})})}),(0,r.jsx)(_.W.Dropdown,{children:(0,r.jsx)(_.W.Item,{leftSection:(0,r.jsx)(D.A,{size:16}),onClick:()=>sx(!0),children:"Save to Dashboard"})})]}),tx[181]=tg,tx[182]=e3):e3=tx[182],tx[183]!==eQ||tx[184]!==e0||tx[185]!==e1||tx[186]!==e2||tx[187]!==e3?(e5=(0,r.jsxs)(b.s,{gap:"sm",mb:"sm",align:"center",justify:"end",children:[eQ,e0,e1,e2,e3]}),tx[183]=eQ,tx[184]=e0,tx[185]=e1,tx[186]=e2,tx[187]=e3,tx[188]=e5):e5=tx[188],tx[189]!==eU||tx[190]!==e5?(e4=(0,r.jsxs)(b.s,{justify:"space-between",mt:"sm",children:[eU,e5]}),tx[189]=eU,tx[190]=e5,tx[191]=e4):e4=tx[191],tx[192]!==t4||tx[193]!==sj?(e6=sj||"markdown"===t4?void 0:(0,r.jsx)(S.t,{shadow:"xs",p:"xl",children:(0,r.jsx)(C.o,{mih:400,children:(0,r.jsx)(x.E,{size:"sm",children:"Please start by selecting a database, table, and timestamp column above and then click the play button to query data."})})}),tx[192]=t4,tx[193]=sj,tx[194]=e6):e6=tx[194],tx[195]!==t4||tx[196]!==sg||tx[197]!==sl||tx[198]!==sj||tx[199]!==sf||tx[200]!==t2?(e7=sj&&null!=sl&&"table"===t4&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(K.A,{config:sl,getRowSearchLink:e=>(0,q.A7)({row:e,source:t2,config:sl,dateRange:sl.dateRange}),onSortingChange:sg,sort:sf,showMVOptimizationIndicator:!1})}),tx[195]=t4,tx[196]=sg,tx[197]=sl,tx[198]=sj,tx[199]=sf,tx[200]=t2,tx[201]=e7):e7=tx[201],tx[202]!==t4||tx[203]!==tJ||tx[204]!==sm||tx[205]!==tE||tx[206]!==sj||tx[207]!==tG?(e8=sj&&null!=sm&&"time"===t4&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(J.S,{sourceId:tG,config:sm,onTimeRangeSelect:tE,referenceLines:tJ&&(0,X.h)({threshold:tJ.threshold,thresholdType:tJ.thresholdType}),showMVOptimizationIndicator:!1})}),tx[202]=t4,tx[203]=tJ,tx[204]=sm,tx[205]=tE,tx[206]=sj,tx[207]=tG,tx[208]=e8):e8=tx[208],tx[209]!==t4||tx[210]!==sm||tx[211]!==sj?(e9=sj&&null!=sm&&"pie"===t4&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(eR.R,{config:sm,showMVOptimizationIndicator:!1})}),tx[209]=t4,tx[210]=sm,tx[211]=sj,tx[212]=e9):e9=tx[212],tx[213]!==t4||tx[214]!==sl||tx[215]!==sj?(te=sj&&null!=sl&&"number"===t4&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(eL.A,{config:sl,showMVOptimizationIndicator:!1})}),tx[213]=t4,tx[214]=sl,tx[215]=sj,tx[216]=te):te=tx[216],tx[217]!==t4||tx[218]!==ty||tx[219]!==sl||tx[220]!==sj||tx[221]!==tG||tx[222]!==t2?(tt=sj&&t2&&null!=sl&&"search"===t4&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(eM.A,{sourceId:tG,config:{...sl,orderBy:[{ordering:"DESC",valueExpression:(0,ea.AF)(t2.timestampValueExpression)}],dateRange:ty,timestampValueExpression:t2.timestampValueExpression,connection:t2.connection,from:t2.from,limit:{limit:200},select:"string"==typeof sl.select&&sl.select?sl.select:t2?.defaultTableSelectExpression||"",groupBy:void 0,having:void 0,granularity:void 0},enabled:!0,isLive:!1,queryKeyPrefix:"search"})}),tx[217]=t4,tx[218]=ty,tx[219]=sl,tx[220]=sj,tx[221]=tG,tx[222]=t2,tx[223]=tt):tt=tx[223],tx[224]!==sS||tx[225]!==tH||tx[226]!==sj||tx[227]!==s_||tx[228]!==t6||tx[229]!==t7||tx[230]!==tG?(ts=t6&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.c,{mt:"md"}),t7&&(0,r.jsx)(N.n,{value:tH?"sample":null,onChange:e=>tq("sample"===e),children:(0,r.jsxs)(N.n.Item,{value:"sample",children:[(0,r.jsx)(N.n.Control,{icon:(0,r.jsx)(F.A,{size:16}),children:(0,r.jsx)(x.E,{size:"sm",style:{alignSelf:"center"},children:"Sample Matched Events"})}),(0,r.jsx)(N.n.Panel,{children:null!=s_&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(eM.A,{sourceId:tG,config:s_,enabled:tH,isLive:!1,queryKeyPrefix:"search"})})})]})}),(0,r.jsx)(N.n,{defaultValue:"",children:(0,r.jsxs)(N.n.Item,{value:"SQL",children:[(0,r.jsx)(N.n.Control,{icon:(0,r.jsx)(O.A,{size:16}),children:(0,r.jsx)(x.E,{size:"sm",style:{alignSelf:"center"},children:"Generated SQL"})}),(0,r.jsx)(N.n.Panel,{children:sj&&null!=sS&&(0,r.jsx)(G.A,{config:sS})})]})})]}),tx[224]=sS,tx[225]=tH,tx[226]=sj,tx[227]=s_,tx[228]=t6,tx[229]=t7,tx[230]=tG,tx[231]=ts):ts=tx[231],tx[232]===Symbol.for("react.memo_cache_sentinel")?(tr=()=>sx(!1),tx[232]=tr):tr=tx[232],tx[233]!==tf||tx[234]!==sh?(tn=(0,r.jsx)(ti,{chartConfig:tf,opened:sh,onClose:tr}),tx[233]=tf,tx[234]=sh,tx[235]=tn):tn=tx[235];let sA=tg?void 0:sw;return tx[236]!==si||tx[237]!==ss||tx[238]!==sr||tx[239]!==tU||tx[240]!==sN||tx[241]!==sA?(ta=(0,r.jsx)(ez,{opened:sr,settings:ss,previousDateRange:sA,displayType:tU,onChange:sN,onClose:si}),tx[236]=si,tx[237]=ss,tx[238]=sr,tx[239]=tU,tx[240]=sN,tx[241]=sA,tx[242]=ta):ta=tx[242],tx[243]!==tk||tx[244]!==eH||tx[245]!==eX||tx[246]!==eK||tx[247]!==eJ||tx[248]!==e4||tx[249]!==e6||tx[250]!==e7||tx[251]!==e8||tx[252]!==e9||tx[253]!==te||tx[254]!==tt||tx[255]!==ts||tx[256]!==tn||tx[257]!==ta?(tc=(0,r.jsxs)("div",{ref:sC,"data-testid":tk,children:[eH,eX,eG,eK,eJ,e4,e6,e7,e8,e9,te,tt,ts,tn,ta]}),tx[243]=tk,tx[244]=eH,tx[245]=eX,tx[246]=eK,tx[247]=eJ,tx[248]=e4,tx[249]=e6,tx[250]=e7,tx[251]=e8,tx[252]=e9,tx[253]=te,tx[254]=tt,tx[255]=ts,tx[256]=tn,tx[257]=ta,tx[258]=tc):tc=tx[258],tc}function tp(e){let{field:t}=e,{onChange:s,value:n}=t;return(0,r.jsx)(k.t,{value:n,onChange:s,radius:"xs",mb:"md",children:(0,r.jsxs)(k.t.List,{children:[(0,r.jsx)(k.t.Tab,{value:h.t2.Line,leftSection:(0,r.jsx)(P.A,{size:16}),children:"Line/Bar"}),(0,r.jsx)(k.t.Tab,{value:h.t2.Table,leftSection:(0,r.jsx)(B.A,{size:16}),children:"Table"}),(0,r.jsx)(k.t.Tab,{value:h.t2.Number,leftSection:(0,r.jsx)(V.A,{size:16}),children:"Number"}),(0,r.jsx)(k.t.Tab,{value:h.t2.Pie,leftSection:(0,r.jsx)(W.A,{size:16}),children:"Pie"}),(0,r.jsx)(k.t.Tab,{value:h.t2.Search,leftSection:(0,r.jsx)(F.A,{size:16}),children:"Search"}),(0,r.jsx)(k.t.Tab,{value:h.t2.Markdown,leftSection:(0,r.jsx)(H.A,{size:16}),children:"Markdown"})]})})}},17978:(e,t,s)=>{"use strict";s.d(t,{I:()=>a,s:()=>n});var r=s(41038);let n=(0,r.Cp)({parse:e=>e.replace(/%0A/g,"\n"),serialize:e=>e.replace(/\n/g,"%0A")}),a=(0,r.Cp)({parse:e=>{if(!e)return null;let t=e.split(" "),s=t.pop();return{id:t.join(" "),desc:"DESC"===s}},serialize:e=>e?`${e.id} ${e.desc?"DESC":"ASC"}`:""})},18006:(e,t,s)=>{"use strict";s.d(t,{N4:()=>a,OH:()=>i,z4:()=>n});var r=s(37901);function n(e=[]){return e.map(({sqlExpression:e,alias:t})=>({valueExpression:e,alias:t||e}))}function a(e,t=[],s,n){let i=new Map,l=new Map,o=new Map,c=(0,r.bn)(n);try{for(let e of s)for(let{sqlExpression:s,luceneExpression:r,alias:n}of t){let t=n||s,a=c.includes(s.split(".")[0])?`toString(${s})`:s;l.set(t,a),r&&o.set(t,r);let d=e[t];d&&"string"==typeof d&&(i.has(t)||i.set(t,new Set),i.get(t).add(d))}}catch(e){console.error("Error extracting attributes from data",e)}return Array.from(i.entries()).flatMap(([t,s])=>[...s].map(s=>({displayedKey:t,value:s,sql:l.get(t),lucene:o.get(t),source:e})))}function i(e){try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}},20699:e=>{e.exports={timelineRow:"TimelineChart_timelineRow__qebNk",timelineRowActive:"TimelineChart_timelineRowActive__V6ZZf",labelContainer:"TimelineChart_labelContainer__6r6Eb"}},24885:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(55729);let n=function(e,t="right"){let[s,n]=(0,r.useState)(e),a=(0,r.useRef)(0),i=(0,r.useRef)(0),l="top"===t||"bottom"===t,o=l?"clientY":"clientX",c="right"===t||"top"===t?-1:1,d=(0,r.useCallback)(e=>{let t=l?window.innerHeight:window.innerWidth,s=e[o]-a.current,r=l?window.innerHeight:document.body.offsetWidth;n(Math.min(Math.max(10,i.current+s/t*100*c),(r-25)/t*100))},[l,o,c]),u=(0,r.useCallback)(()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d]),m=(0,r.useCallback)(e=>{e.preventDefault(),a.current=e[o],i.current=s,document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)},[o,s,d,u]);return(0,r.useEffect)(()=>()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d,u]),{size:s,startResize:m}}},25156:()=>{},25455:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboards/[dashboardId]",function(){return s(51305)}])},26355:(e,t,s)=>{"use strict";s.d(t,{A:()=>R});var r=s(6029),n=s(75155),a=s(55729),i=s(75828),l=s.n(i),o=s(70921),c=s(67549),d=s(40399),u=s(91544),m=s.n(u),h=s(59513),x=s.n(h),p=s(77494),g=s.n(p),f=s(97554),b=s.n(f),y=s(64022),v=s.n(y),j=s(84450),S=s.n(j),w=s(22273),_=s(33958),E=s(88302),C=s(74805),N=s(65723),k=s.n(N);let A=(0,o.eU)({normallyExpanded:!1}),T=a.memo(a.forwardRef((e,t)=>{let s=(0,n.c)(19),{value:a}=e;if(g()(a)){let e;return s[0]!==t?(e=(0,r.jsx)("span",{ref:t,className:k().null,children:"null"}),s[0]=t,s[1]=e):e=s[1],e}if(S()(a)){let e;return s[2]!==t||s[3]!==a?(e=(0,r.jsx)("span",{ref:t,className:k().string,children:a}),s[2]=t,s[3]=a,s[4]=e):e=s[4],e}if(b()(a)){let e;return s[5]!==t||s[6]!==a?(e=(0,r.jsx)("span",{ref:t,className:k().number,children:a}),s[5]=t,s[6]=a,s[7]=e):e=s[7],e}if(x()(a)){let e,n=a?"true":"false";return s[8]!==t||s[9]!==n?(e=(0,r.jsx)("span",{ref:t,className:k().boolean,children:n}),s[8]=t,s[9]=n,s[10]=e):e=s[10],e}if(v()(a)){let e,n;return s[11]!==a?(e=Object.keys(a),s[11]=a,s[12]=e):e=s[12],s[13]!==t||s[14]!==e.length?(n=(0,r.jsxs)("span",{ref:t,className:k().object,children:["{}"," ",e.length," keys"]}),s[13]=t,s[14]=e.length,s[15]=n):n=s[15],n}if(m()(a)){let e;return s[16]!==t||s[17]!==a.length?(e=(0,r.jsxs)("span",{ref:t,className:k().array,children:["[]"," ",a.length," items"]}),s[16]=t,s[17]=a.length,s[18]=e):e=s[18],e}return null})),$=a.memo(e=>{let t,s,a,i=(0,n.c)(12),{keyName:l,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}=e,{getLineActions:h}=(0,c.md)(A);e:{let e;if(h){let e;i[0]!==h||i[1]!==u||i[2]!==l||i[3]!==o||i[4]!==m||i[5]!==d?(e=h({key:l,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}),i[0]=h,i[1]=u,i[2]=l,i[3]=o,i[4]=m,i[5]=d,i[6]=e):e=i[6],t=e;break e}i[7]===Symbol.for("react.memo_cache_sentinel")?(e=[],i[7]=e):e=i[7],t=e}let x=t;return i[8]!==x?(s=x.map(M),i[8]=x,i[9]=s):s=i[9],i[10]!==s?(a=(0,r.jsx)("div",{className:k().lineMenu,children:s}),i[10]=s,i[11]=a):a=i[11],a}),I=a.memo(({keyName:e,keyPath:t,value:s,disableMenu:n,isInParsedJson:i=!1,parsedJsonRootPath:o=[]})=>{let{normallyExpanded:d}=(0,c.md)(A),{ref:u,hovered:h}=(0,w.M)(),x=a.useMemo(()=>{if(!S()(s))return!1;try{if(s.startsWith("{")&&s.endsWith("}")||s.startsWith("[")&&s.endsWith("]"))return!!JSON.parse(s)}catch(e){return!1}},[s]),[p,g]=a.useState(d&&!x);a.useEffect(()=>{g(d&&!x)},[x,d]);let f=a.useMemo(()=>v()(s)&&Object.keys(s).length>0||m()(s)&&s.length>0||x,[x,s]),b=a.useCallback(()=>{f&&g(e=>!e)},[f]),y=a.useMemo(()=>{if(x)try{return JSON.parse(s)}catch(e){return null}return s},[x,s]),j=t.length,N=a.useMemo(()=>[...t,e],[e,t]),I=i||x,L=a.useMemo(()=>x?N:o,[x,N,o]),R=a.useRef(null),[M,D]=a.useState(!1),F=a.useCallback(()=>{D(!0)},[]),O=a.useCallback(()=>{D(!1)},[]);return a.useEffect(()=>{let e=R.current;return e?.addEventListener("selectstart",F),e?.addEventListener("mouseup",O),()=>{e?.removeEventListener("selectstart",F),e?.removeEventListener("mouseup",O)}},[O,F]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{ref:u,onClick:b,className:l()(k().line,{[k().nestedLine]:j>0,[k().expanded]:p,[k().expandable]:f}),style:{marginLeft:16*j},children:[(0,r.jsx)("div",{className:k().keyContainer,children:(0,r.jsxs)("div",{className:k().key,children:[f&&(p?(0,r.jsx)(_.A,{size:10}):(0,r.jsx)(E.A,{size:10})),e,(0,r.jsx)("div",{className:k().hoverContent,children:(0,r.jsx)(C.A,{size:14})})]})}),(0,r.jsx)("div",{className:k().valueContainer,children:x?p?(0,r.jsxs)("div",{className:k().object,children:["{}"," Parsed JSON"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T,{value:s,ref:R}),(0,r.jsx)("div",{className:k().jsonBtn,children:"Expand JSON"})]}):(0,r.jsx)(T,{value:s,ref:R})}),h&&!n&&!M&&(0,r.jsx)($,{keyName:e,keyPath:N,value:s,isInParsedJson:i,parsedJsonRootPath:o})]},e),p&&f&&(0,r.jsx)(z,{data:y,keyPath:N,disableMenu:n,isInParsedJson:I,parsedJsonRootPath:L})]})});function z(e){let t,s,i,o,c,d,u,m=(0,n.c)(22),{data:h,keyPath:x,disableMenu:p,isInParsedJson:g,parsedJsonRootPath:f}=e;m[0]!==x?(t=void 0===x?[]:x,m[0]=x,m[1]=t):t=m[1];let b=t,y=void 0!==p&&p,v=void 0!==g&&g;m[2]!==f?(s=void 0===f?[]:f,m[2]=f,m[3]=s):s=m[3];let j=s,[S,w]=a.useState(!1);m[4]!==h?(i=Object.keys(h),m[4]=h,m[5]=i):i=m[5];let _=i.length;m[6]!==h||m[7]!==S?(o=S?Object.entries(h):Object.entries(h).slice(0,50),m[6]=h,m[7]=S,m[8]=o):o=m[8];let E=o,C=b?.length||0;return m[9]!==y||m[10]!==v||m[11]!==b||m[12]!==j||m[13]!==E?(c=E.map(e=>{let[t,s]=e;return(0,r.jsx)(I,{keyName:t,value:s,keyPath:b,disableMenu:y,isInParsedJson:v,parsedJsonRootPath:j},t)}),m[9]=y,m[10]=v,m[11]=b,m[12]=j,m[13]=E,m[14]=c):c=m[14],m[15]!==S||m[16]!==C||m[17]!==_?(d=_>50&&!S&&(0,r.jsx)("div",{className:l()(k().line,k().nestedLine,k().expandable),style:{marginLeft:16*C},onClick:()=>w(!0),children:(0,r.jsx)("div",{className:k().keyContainer,children:(0,r.jsxs)("div",{className:k().jsonBtn,children:["Expand ",_-50," more properties"]})})}),m[15]=S,m[16]=C,m[17]=_,m[18]=d):d=m[18],m[19]!==d||m[20]!==c?(u=(0,r.jsxs)(r.Fragment,{children:[c,d]}),m[19]=d,m[20]=c,m[21]=u):u=m[21],u}let L=e=>{let t,s,r,i=(0,n.c)(6),{children:l,initialValues:o}=e;i[0]!==o?(t=[[A,o]],i[0]=o,i[1]=t):t=i[1],(0,d.RH)(t);let u=(0,c.Xr)(A);return i[2]!==o||i[3]!==u?(s=()=>{u(o)},r=[o,u],i[2]=o,i[3]=u,i[4]=s,i[5]=r):(s=i[4],r=i[5]),a.useEffect(s,r),l},R=e=>{let t,s,a,i,o,d,u=(0,n.c)(17),{data:m,normallyExpanded:h,tabulate:x,lineWrap:p,getLineActions:g}=e,f=void 0!==h&&h,b=void 0!==x&&x;u[0]!==m?(t=Object.keys(m),u[0]=m,u[1]=t):t=u[1];let y=0===t.length;return u[2]!==g||u[3]!==f?(s={normallyExpanded:f,getLineActions:g},u[2]=g,u[3]=f,u[4]=s):s=u[4],u[5]!==p||u[6]!==b?(a=l()(k().container,{[k().withTabulate]:b,[k().withLineWrap]:p}),u[5]=p,u[6]=b,u[7]=a):a=u[7],u[8]!==m||u[9]!==y?(i=y?(0,r.jsx)("div",{children:"Empty"}):(0,r.jsx)(z,{data:m}),u[8]=m,u[9]=y,u[10]=i):i=u[10],u[11]!==a||u[12]!==i?(o=(0,r.jsx)("div",{className:a,children:i}),u[11]=a,u[12]=i,u[13]=o):o=u[13],u[14]!==s||u[15]!==o?(d=(0,r.jsx)(c.Kq,{children:(0,r.jsx)(L,{initialValues:s,children:o})}),u[14]=s,u[15]=o,u[16]=d):d=u[16],d};function M(e){return(0,r.jsx)("button",{title:e.title,className:k().lineMenuBtn,onClick:t=>{e.onClick(),t.stopPropagation()},children:e.label},e.key)}},26674:(e,t,s)=>{"use strict";s.d(t,{S:()=>n,Y:()=>a});var r=s(55729);let n=(0,r.createContext)(0);function a(){return(0,r.useContext)(n)}},26814:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(6029),n=s(75155),a=s(1909);function i(e){let t,s=(0,n.c)(2),{field:i}=(0,a.as)(e),l="sql"===i.value?e.sqlInput:e.luceneInput;return s[0]!==l?(t=(0,r.jsx)(r.Fragment,{children:l}),s[0]=l,s[1]=t):t=s[1],t}},26837:(e,t,s)=>{"use strict";s.d(t,{W:()=>ew});var r=s(6029),n=s(55729),a=s(75155),i=s(84450),l=s.n(i),o=s(16943),c=s.n(o),d=s(82641),u=s(60481),m=s(45005),h=s(43517),x=s(78253),p=s(81973),g=s(18006),f=s(37901),b=s(65081),y=s(50374),v=s(64441),j=s(94937),S=s(75828),w=s.n(S),_=s(7913),E=s(63085),C=s(25062),N=s(94720),k=s(3635),A=s(70114),T=s(23474),$=s(54134),I=s(58333),z=s(7565),L=s(94364),R=s(72075),M=s(66773),D=s.n(M);let F=e=>{let t,s,n,i,l,o,c,d=(0,a.c)(19),{filename:u,function:m,lineno:h,colno:x,isLoading:p}=e,g=p?.8:1,f=p?"blur(1px)":"none";return d[0]!==g||d[1]!==f?(t={opacity:g,filter:f},d[0]=g,d[1]=f,d[2]=t):t=d[2],d[3]!==x||d[4]!==h?(s=(0,r.jsxs)("span",{children:[":",h,":",x]}),d[3]=x,d[4]=h,d[5]=s):s=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("span",{children:" in "}),d[6]=n):n=d[6],d[7]!==m?(i=m&&(0,r.jsx)("span",{style:{background:"#ffffff10",padding:"0 4px",borderRadius:4},children:m}),d[7]=m,d[8]=i):i=d[8],d[9]!==u||d[10]!==t||d[11]!==s||d[12]!==i?(l=(0,r.jsxs)("div",{className:" fs-8",style:t,children:[u,s,n,i]}),d[9]=u,d[10]=t,d[11]=s,d[12]=i,d[13]=l):l=d[13],d[14]!==p?(o=p&&(0,r.jsx)(N.a,{size:"xs",color:"gray"}),d[14]=p,d[15]=o):o=d[15],d[16]!==l||d[17]!==o?(c=(0,r.jsxs)(k.Y,{gap:"xs",display:"inline-flex",children:[l,o]}),d[16]=l,d[17]=o,d[18]=c):c=d[18],c},O=e=>{let t,s,i,l,o,c,d=(0,a.c)(15),{title:u,children:m,initiallyCollapsed:h}=e,[x,p]=n.useState(h??!1);return d[0]!==x?(t=()=>p(!x),s=x?(0,r.jsx)(A.A,{size:14,className:"me-2"}):(0,r.jsx)(T.A,{size:14,className:"me-2"}),d[0]=x,d[1]=t,d[2]=s):(t=d[1],s=d[2]),d[3]!==u?(i=(0,r.jsx)("div",{className:"fs-7",children:u}),d[3]=u,d[4]=i):i=d[4],d[5]!==t||d[6]!==s||d[7]!==i?(l=(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,i]}),d[5]=t,d[6]=s,d[7]=i,d[8]=l):l=d[8],d[9]!==m||d[10]!==x?(o=x?null:(0,r.jsx)("div",{className:"mb-4",children:m}),d[9]=m,d[10]=x,d[11]=o):o=d[11],d[12]!==l||d[13]!==o?(c=(0,r.jsxs)("div",{className:"my-3",children:[l,o]}),d[12]=l,d[13]=o,d[14]=c):c=d[14],c},P=e=>{let t,s,n=(0,a.c)(5),{children:i,title:l}=e;return n[0]!==l?(t=l&&(0,r.jsx)("div",{className:D().panelSectionWrapperTitle,children:l}),n[0]=l,n[1]=t):t=n[1],n[2]!==i||n[3]!==t?(s=(0,r.jsxs)("div",{className:D().panelSectionWrapper,children:[t,i]}),n[2]=i,n[3]=t,n[4]=s):s=n[4],s},B=e=>{let t,s,n,i,l=(0,a.c)(8),{label:o,value:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={paddingRight:20,marginRight:12,borderRight:"1px solid #ffffff20"},l[0]=t):t=l[0],l[1]!==o?(s=(0,r.jsx)("div",{children:o}),l[1]=o,l[2]=s):s=l[2],l[3]!==c?(n=(0,r.jsx)("div",{className:"fs-7",children:c}),l[3]=c,l[4]=n):n=l[4],l[5]!==s||l[6]!==n?(i=(0,r.jsxs)("div",{style:t,children:[s,n]}),l[5]=s,l[6]=n,l[7]=i):i=l[7],i},V=e=>{let t,s=(0,a.c)(3),{onClick:n,isOpen:i}=e,l=i?"chevron-up":"chevron-down";return s[0]!==n||s[1]!==l?(t=(0,r.jsx)(R.L,{label:"",biIcon:l,onClick:n}),s[0]=n,s[1]=l,s[2]=t):t=s[2],t},W=[{accessorKey:"filename",cell:e=>{let t,s,i,l,o,c,d,u,m,h=(0,a.c)(31),{row:x,table:p}=e,g=p.options.meta,[f,b]=n.useState(x.index===g.firstFrameIndex);h[0]!==f?(t=()=>{b(!f)},h[0]=f,h[1]=t):t=h[1];let y=t,v=x.original,{isLoading:j,enrichedFrame:S}=(0,L.f)(v),_=S??v,C=!!_.context_line;return h[2]!==C?(s=w()("w-100 py-2 px-4 d-flex justify-content-between align-items-center",{[D().stacktraceRowInteractive]:C}),h[2]=C,h[3]=s):s=h[3],h[4]!==_.in_app?(i=!_.in_app&&(0,r.jsx)(E.m,{label:"in_app: false",position:"top",withArrow:!0,color:"gray",children:(0,r.jsx)($.A,{size:14,className:"me-2","aria-label":"in_app: false"})}),h[4]=_.in_app,h[5]=i):i=h[5],h[6]!==_||h[7]!==j?(l=_&&(0,r.jsx)(F,{colno:_.colno,filename:_.filename,lineno:_.lineno,function:_.function,isLoading:j}),h[6]=_,h[7]=j,h[8]=l):l=h[8],h[9]!==i||h[10]!==l?(o=(0,r.jsxs)("div",{children:[i,l]}),h[9]=i,h[10]=l,h[11]=o):o=h[11],h[12]!==y||h[13]!==C||h[14]!==f?(c=C&&(0,r.jsx)(V,{onClick:y,isOpen:f}),h[12]=y,h[13]=C,h[14]=f,h[15]=c):c=h[15],h[16]!==y||h[17]!==s||h[18]!==o||h[19]!==c?(d=(0,r.jsxs)("div",{className:s,onClick:y,children:[o,c]}),h[16]=y,h[17]=s,h[18]=o,h[19]=c,h[20]=d):d=h[20],h[21]!==_.context_line||h[22]!==_.lineno||h[23]!==_.post_context||h[24]!==_.pre_context||h[25]!==C||h[26]!==f?(u=f&&C&&(0,r.jsxs)("pre",{className:D().lineContext,children:[_.pre_context?.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:D().lineContextLineNo,children:(_.lineno??0)-(_.pre_context?.length??0)+t}),e]},e+t)),_.context_line&&(0,r.jsxs)("div",{className:D().lineContextCurrentLine,children:[(0,r.jsx)("span",{className:D().lineContextLineNo,children:_.lineno}),_.context_line]}),_.post_context?.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:D().lineContextLineNo,children:_.lineno+t+1}),e]},e+t))]}),h[21]=_.context_line,h[22]=_.lineno,h[23]=_.post_context,h[24]=_.pre_context,h[25]=C,h[26]=f,h[27]=u):u=h[27],h[28]!==d||h[29]!==u?(m=(0,r.jsxs)(r.Fragment,{children:[d,u]}),h[28]=d,h[29]=u,h[30]=m):m=h[30],m}}],H=e=>{let t,s=(0,a.c)(2),{url:n}=e;return s[0]!==n?(t=(0,r.jsx)("span",{title:n,children:n}),s[0]=n,s[1]=t):t=s[1],t},q=n.memo(e=>{let t,s=(0,a.c)(3),{status:n}=e;if(!n)return null;let i=n>=500?"text-danger bg-danger":n>=400?"text-warning bg-warning":"text-success bg-success",l=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${i}`;return s[0]!==n||s[1]!==l?(t=(0,r.jsx)("span",{className:l,children:n}),s[0]=n,s[1]=l,s[2]=t):t=s[2],t}),X=n.memo(e=>{let t,s=(0,a.c)(3),{level:n}=e;if(!n)return null;let i=n.includes("error")?"text-danger bg-danger":n.includes("warn")||n.includes("warning")?"text-warning bg-warning":"bg-muted",l=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${i}`;return s[0]!==n||s[1]!==l?(t=(0,r.jsx)("span",{className:l,children:n}),s[0]=n,s[1]=l,s[2]=t):t=s[2],t}),G=[{accessorKey:"category",header:"Category",size:180,cell:({row:e})=>(0,r.jsxs)("span",{className:"d-flex align-items-center gap-2",children:[e.original.category,"console"===e.original.category&&(0,r.jsx)(X,{level:e.original.level}),"fetch"===e.original.category||"xhr"===e.original.category?(0,r.jsx)(q,{status:e.original.data?.status_code}):null]})},{accessorKey:"message",header:"Data",size:99999,cell:({row:e})=>{if(e.original.data&&("fetch"===e.original.category||"xhr"===e.original.category)){let{method:t,url:s}=e.original.data;return(0,r.jsxs)("div",{className:"text-truncate",children:[(0,r.jsxs)("span",{children:[t," "]}),(0,r.jsx)("span",{title:s,children:(0,r.jsx)(H,{url:s})})]})}if("navigation"===e.original.category&&e.original.data){let{from:t,to:s}=e.original.data;return(0,r.jsxs)("div",{className:"text-truncate",children:[(0,r.jsx)("span",{title:t,children:(0,r.jsx)(H,{url:t})}),(0,r.jsx)("span",{children:" → "}),(0,r.jsx)("span",{title:s,children:(0,r.jsx)(H,{url:s})})]})}if("console"===e.original.category){let{message:t}=e.original;return(0,r.jsx)("pre",{className:"mb-0 text-truncate fs-8",title:t,children:t})}return e.original.message?(0,r.jsx)("div",{className:"text-truncate",children:e.original.message}):(0,r.jsx)("span",{className:"text-muted",children:"Empty"})}},{header:"Timestamp",size:220,cell:({row:e})=>(0,r.jsx)("span",{className:"text-muted",children:(0,r.jsx)(z.H,{value:1e3*e.original.timestamp,format:"withMs"})})}],K=e=>{let t,s,r,i=(0,a.c)(11),{rows:l,maxRows:o}=e,c=void 0===o?5:o,[d,u]=n.useState(!1);i[0]!==d||i[1]!==c||i[2]!==l?(t=d?l:l.slice(0,c),i[0]=d,i[1]=c,i[2]=l,i[3]=t):t=i[3];let m=t,h=l.length??0,x=h>c?h-c:null;i[4]!==d?(s=()=>{u(!d)},i[4]=d,i[5]=s):s=i[5];let p=s;return i[6]!==p||i[7]!==x||i[8]!==d||i[9]!==m?(r={visibleRows:m,hiddenRowsCount:x,handleToggleMoreRows:p,isExpanded:d},i[6]=p,i[7]=x,i[8]=d,i[9]=m,i[10]=r):r=i[10],r},J=e=>{let t,s,n,i,l,o,c,d,u,m,x,p,g,f,b=(0,a.c)(42),{logData:y,breadcrumbs:v,exceptionValues:j}=e,S=j[0];S?.stacktrace?.frames;e:{let e;if(!S?.stacktrace?.frames){let e;b[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],b[0]=e):e=b[0],t=e;break e}b[1]!==S?.stacktrace.frames?(e=S?.stacktrace.frames.slice().reverse(),b[1]=S?.stacktrace.frames,b[2]=e):e=b[2],t=e}let w=t;if(b[3]!==w){let e=w&&w.length?w.find(e=>e.in_app)??w.find(e=>!!e.function||!!e.filename)??w[0]:null;s=e?w.indexOf(e):-1,b[3]=w,b[4]=s}else s=b[4];let E=s;b[5]!==v||b[6]!==S||b[7]!==y?.timestamp?(n=()=>[...S&&v?[{category:"exception",timestamp:new Date(y?.timestamp??0).getTime()/1e3,message:`${S.type}: ${S.value} `}]:[],...v?.slice().reverse()??[]],b[5]=v,b[6]=S,b[7]=y?.timestamp,b[8]=n):n=b[8],y?.timestamp,b[9]!==n?(i=n(),b[9]=n,b[10]=i):i=b[10];let N=i,k=Math.max(5,E+1);b[11]!==w||b[12]!==k?(l={rows:w,maxRows:k},b[11]=w,b[12]=k,b[13]=l):l=b[13];let{handleToggleMoreRows:A,hiddenRowsCount:$,visibleRows:z,isExpanded:L}=K(l);b[14]!==N?(o={rows:N},b[14]=N,b[15]=o):o=b[15];let{handleToggleMoreRows:M,hiddenRowsCount:D,visibleRows:F,isExpanded:V}=K(o);return b[16]!==S?(c=S&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(h.E,{fw:"bold",component:"span",size:"sm",variant:"danger",children:[S.type,":"," "]}),(0,r.jsx)("span",{className:"text-muted",children:S.value})]}),S.mechanism&&(0,r.jsxs)("div",{className:"d-flex gap-2 flex-wrap pt-3",children:[(0,r.jsx)(B,{label:"mechanism",value:S.mechanism?.type}),(0,r.jsx)(B,{label:"handled",value:S.mechanism?.handled?(0,r.jsx)("span",{className:"text-success",children:"true"}):(0,r.jsx)("span",{className:"text-danger",children:"false"})}),S.mechanism?.data?.function?(0,r.jsx)(B,{label:"function",value:S.mechanism.data.function}):null,S.mechanism?.data?.handler?(0,r.jsx)(B,{label:"handler",value:S.mechanism.data.handler}):null,S.mechanism?.data?.target?(0,r.jsx)(B,{label:"target",value:S.mechanism.data.target}):null]})]}),b[16]=S,b[17]=c):c=b[17],b[18]!==E?(d={firstFrameIndex:E},b[18]=E,b[19]=d):d=b[19],b[20]!==z||b[21]!==d?(u=(0,r.jsx)(_.ErrorBoundary,{onError:Y,fallbackRender:Z,children:(0,r.jsx)(R.X,{hideHeader:!0,columns:W,data:z,density:"zero",tableMeta:d})}),b[20]=z,b[21]=d,b[22]=u):u=b[22],b[23]!==j[0].stacktrace?(m="string"==typeof j[0].stacktrace&&(0,r.jsx)("pre",{className:"px-4",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:j[0].stacktrace}),b[23]=j[0].stacktrace,b[24]=m):m=b[24],b[25]!==A||b[26]!==L||b[27]!==$?(x=$?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:A,children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.A,{size:14,className:"me-2"})," Hide stack trace"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",$," more frames"]})}):null,b[25]=A,b[26]=L,b[27]=$,b[28]=x):x=b[28],b[29]!==u||b[30]!==m||b[31]!==x||b[32]!==c?(p=(0,r.jsxs)(P,{title:c,children:[u,m,x]}),b[29]=u,b[30]=m,b[31]=x,b[32]=c,b[33]=p):p=b[33],b[34]!==V||b[35]!==D||b[36]!==F||b[37]!==M?(g=F.length>0&&(0,r.jsx)(O,{title:"Breadcrumbs",children:(0,r.jsxs)(P,{children:[(0,r.jsx)(R.X,{columns:G,data:F,emptyMessage:"No breadcrumbs found"}),D?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:M,children:V?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.A,{size:14,className:"me-2"})," Hide breadcrumbs"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",D," more breadcrumbs"]})}):null]})}),b[34]=V,b[35]=D,b[36]=F,b[37]=M,b[38]=g):g=b[38],b[39]!==p||b[40]!==g?(f=(0,r.jsxs)("div",{children:[p,g]}),b[39]=p,b[40]=g,b[41]=f):f=b[41],f};function Y(e){console.error(e)}function Z(){return(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering stacktrace"})}var U=s(65234),Q=s.n(U),ee=s(21510),et=s(60665),es=s(34027),er=s(26355),en=s(78694);let ea=function(e){let t="";return e&&(t=` ${({GET:"-X GET",POST:"-X POST",PUT:"-X PUT",PATCH:"-X PATCH",DELETE:"-X DELETE"})[e.toUpperCase()]}`)," \\\n"+t},ei=function(e){let t="";return e&&e.map(([e,s])=>{t+=` \\
-H "${e}: ${s.replace(/(\\|")/g,"\\$1")}"`}),t},el=function(e){let t="";return e&&(t+=` \\
-d "${JSON.stringify(e).replace(/(\\|")/g,"\\$1")}"`),t},eo=function(e){let t="";return e&&(t+=` \\
--data-raw ${/[\0-\x1F\x7F-\x9F!]|\'/.test(e)?"$'"+e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(e){let t=e.charCodeAt(0).toString(16);for(;t.length<4;)t="0"+t;return"\\u"+t})+"'":"'"+e+"'"}`),t},ec=function(e){let t="";return e&&Object.keys(e).forEach(s=>{let r=s.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`);if(e[s])"boolean"==typeof e[s]&&e[s]?t+=`--${r} `:"string"==typeof e[s]&&(t+=`--${r} ${e[s]} `);else throw Error(`Invalid Curl option ${s}`)}),t?` \\
${t}`:t},ed=function(e,t){let s="curl ";return s+=e.url,s+=ea(e.method),s+=ei(e.headers),s+="string"==typeof e.body?eo(e.body):el(e.body),(s+=ec(t)).trim()},eu={base00:"#00000000",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#8378FF",base0E:"#ae81ff",base0F:"#cc6633"},em=(e,t)=>Object.entries(c()(t,(t,s)=>s.startsWith(e))).flatMap(([t,s])=>{let r=s;try{"string"==typeof s&&(r=JSON.parse(s))}catch(e){}let n=t.replace(e,"").replace("_","-"),a=[[n,`${r}`]];if(Array.isArray(r))a=r.map(e=>[n,`${e}`]);else if("object"==typeof r&&Object.keys(r).length>0)try{a=[[n,`${JSON.stringify(r)}`]]}catch(e){console.error(e)}return a}),eh=({body:e,theme:t,emptyMessage:s,notCollectedMessage:a})=>{let i=n.useCallback(e=>(0,r.jsx)("pre",{className:"d-inline text-break",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e}),[]),l=n.useMemo(()=>{if("string"!=typeof e)return null;try{if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))return JSON.parse(e)}catch(e){return null}},[e]);return(0,r.jsx)(r.Fragment,{children:null!=e&&""!=e?(0,r.jsx)("pre",{className:"m-0 px-4 py-3",style:{wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:l?(0,r.jsx)(er.A,{data:l,normallyExpanded:!0}):"string"==typeof e?e:(0,r.jsx)(ee.d,{hideRoot:!0,invertTheme:!1,data:e,theme:t,valueRenderer:i})}):""===e?(0,r.jsx)("div",{className:"px-4 py-3",children:s}):(0,r.jsx)("div",{className:"px-4 py-3",children:a})})};function ex(e){let t,s,n,i,l,o,c,d,u,m,h,x,p,g,f,b=(0,a.c)(41),{eventAttributes:y}=e;b[0]!==y?(t=em("http.request.header.",y),b[0]=y,b[1]=t):t=b[1];let v=t;b[2]!==y?(s=em("http.response.header.",y),b[2]=y,b[3]=s):s=b[3];let j=s,S=y["http.url"],w=y["net.peer.ip"],_=y["http.status_code"],E=y["http.method"],N=y["http.request.body"],k=y["http.response.body"];b[4]!==E||b[5]!==N||b[6]!==v||b[7]!==S?(n=ed({method:E,headers:v,url:S,body:N}),b[4]=E,b[5]=N,b[6]=v,b[7]=S,b[8]=n):n=b[8];let A=n;return S||E||_?(b[9]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsxs)(C.$,{size:"xs",variant:"primary",children:[(0,r.jsx)(es.A,{size:14,className:"me-2"}),"Copy Request as Curl"]}),b[9]=i):i=b[9],b[10]!==A?(l=(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)(Q(),{text:A,onCopy:ep,children:i})}),b[10]=A,b[11]=l):l=b[11],b[12]!==S?(o=S&&{label:"URL",value:S},b[12]=S,b[13]=o):o=b[13],b[14]!==E?(c=E&&{label:"Method",value:E},b[14]=E,b[15]=c):c=b[15],b[16]!==w?(d=w&&{label:"Remote Address",value:w},b[16]=w,b[17]=d):d=b[17],b[18]!==y||b[19]!==_?(u=_&&{label:"Status",value:`${_} ${y["http.status_text"]??""}`,className:_>=500?"text-danger":_>=400?"text-warning":"text-success"},b[18]=y,b[19]=_,b[20]=u):u=b[20],b[21]!==o||b[22]!==c||b[23]!==d||b[24]!==u?(m=(0,r.jsx)(en.$K,{children:(0,r.jsx)(R.X,{borderless:!0,density:"compact",columns:en.Qx,data:[o,c,d,u].filter(Boolean),hideHeader:!0})}),b[21]=o,b[22]=c,b[23]=d,b[24]=u,b[25]=m):m=b[25],b[26]!==v?(h=v.length>0&&(0,r.jsx)(en.iV,{title:`Request Headers (${v.length})`,initiallyCollapsed:!0,children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(R.X,{borderless:!0,hideHeader:!0,density:"compact",columns:en.hF,data:v,emptyMessage:"No request headers collected"})})}),b[26]=v,b[27]=h):h=b[27],b[28]!==N?(x=null!=N&&(0,r.jsx)(en.iV,{title:"Request Body",children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(eh,{body:N,theme:eu,emptyMessage:"Empty request",notCollectedMessage:"No request body collected"})})}),b[28]=N,b[29]=x):x=b[29],b[30]!==j?(p=j.length>0&&(0,r.jsx)(en.iV,{title:`Response Headers (${j.length})`,initiallyCollapsed:!0,children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(R.X,{borderless:!0,hideHeader:!0,density:"compact",columns:en.hF,data:j,emptyMessage:"No response headers collected"})})}),b[30]=j,b[31]=p):p=b[31],b[32]!==k?(g=null!=k&&(0,r.jsx)(en.iV,{title:"Response Body",children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(eh,{body:k,theme:eu,emptyMessage:"Empty response",notCollectedMessage:"No response body collected"})})}),b[32]=k,b[33]=g):g=b[33],b[34]!==m||b[35]!==h||b[36]!==x||b[37]!==p||b[38]!==g||b[39]!==l?(f=(0,r.jsxs)("div",{children:[l,m,h,x,p,g]}),b[34]=m,b[35]=h,b[36]=x,b[37]=p,b[38]=g,b[39]=l,b[40]=f):f=b[40],f):null}function ep(){et.$e.show({color:"green",message:"Curl command copied to clipboard"})}let eg=[{accessorKey:"Timestamp",header:"Timestamp",size:120,cell:({row:e})=>(0,r.jsx)("span",{className:"text-muted",title:e.original.Timestamp,children:(0,r.jsx)(z.H,{value:new Date(e.original.Timestamp).getTime(),format:"withMs"})})},{accessorKey:"Name",header:"Name",size:180,cell:({row:e})=>(0,r.jsx)("span",{className:"d-flex align-items-center gap-2",children:e.original.Name})},{accessorKey:"Attributes",header:"Attributes",size:400,cell:({row:e})=>{let t=e.original.Attributes;return t&&Object.keys(t).length>0?(0,r.jsx)(u.a,{children:(0,r.jsx)(b.z,{data:t})}):(0,r.jsx)("span",{className:"text-muted",children:"Empty"})}}],ef=e=>{let t,s,n,i,l,o=(0,a.c)(15),{spanEvents:c}=e;e:{let e;if(!c||0===c.length){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}o[1]!==c?(e=[...c.filter(eb)].sort(ey),o[1]=c,o[2]=e):e=o[2],t=e}let d=t;o[3]!==d?(s={rows:d,maxRows:5},o[3]=d,o[4]=s):s=o[4];let{handleToggleMoreRows:u,hiddenRowsCount:m,visibleRows:h,isExpanded:x}=K(s);if(!d||0===d.length){let e;return o[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:"p-3 text-muted fs-7",children:"No span events available for this trace"}),o[5]=e):e=o[5],e}return o[6]!==h?(n=(0,r.jsx)(_.ErrorBoundary,{onError:ev,fallbackRender:ej,children:(0,r.jsx)(R.X,{columns:eg,data:h,emptyMessage:"No span events found"})}),o[6]=h,o[7]=n):n=o[7],o[8]!==u||o[9]!==m||o[10]!==x?(i=m?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",my:"sm",onClick:u,children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.A,{size:14,className:"me-2"})," Hide events"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",m," more events"]})}):null,o[8]=u,o[9]=m,o[10]=x,o[11]=i):i=o[11],o[12]!==n||o[13]!==i?(l=(0,r.jsx)("div",{children:(0,r.jsxs)(P,{children:[n,i]})}),o[12]=n,o[13]=i,o[14]=l):l=o[14],l};function eb(e){return"string"==typeof e.Timestamp&&"string"==typeof e.Name&&void 0!==e.Attributes}function ey(e,t){let s=new Date(e.Timestamp).getTime();return new Date(t.Timestamp).getTime()-s}function ev(e){console.error(e)}function ej(){return(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering span events"})}let eS={};function ew(e){let t,s,i,o,S,w,_,E,C,N,k,A,T,$,I,z,L,R,M,D,F,O,P,B,V,W,H,q,X,G,K=(0,a.c)(96),{source:Y,rowId:Z,aliasWith:U,hideHeader:Q,"data-testid":ee}=e,et=void 0!==Q&&Q;K[0]!==U||K[1]!==Z||K[2]!==Y?(t={source:Y,rowId:Z,aliasWith:U},K[0]=U,K[1]=Z,K[2]=Y,K[3]=t):t=K[3];let{data:es}=(0,f.k1)(t),{onPropertyAddClick:er,generateSearchUrl:en}=(0,n.useContext)(y.D);K[4]!==Y.highlightedRowAttributeExpressions||K[5]!==Y.kind?(s=Y.kind===d.GL.Trace||Y.kind===d.GL.Log?Y.highlightedRowAttributeExpressions??[]:[],K[4]=Y.highlightedRowAttributeExpressions,K[5]=Y.kind,K[6]=s):s=K[6];let ea=s;K[7]!==ea||K[8]!==es||K[9]!==Y?(i=es?(0,g.N4)(Y,ea,es.data||[],es.meta||[]):[],K[7]=ea,K[8]=es,K[9]=Y,K[10]=i):i=K[10];let ei=i,el=es?.meta;K[11]!==el?(o=(0,f.bn)(el),K[11]=el,K[12]=o):o=K[12];let eo=o,ec=Y.eventAttributesExpression;e:{let e,t;K[13]!==es?.data?.[0]?(e=es?.data?.[0]??{},K[13]=es?.data?.[0],K[14]=e):e=K[14],K[15]!==e?(t={...e},K[15]=e,K[16]=t):t=K[16];let s=t;if(!s){S=null;break e}S=s}let ed=S;K[17]===Symbol.for("react.memo_cache_sentinel")?(w=["ServiceName","SpanName","Duration","SeverityText","StatusCode","StatusMessage","SpanKind","TraceId","SpanId","ParentSpanId","ScopeName","ScopeVersion"],K[17]=w):w=K[17];let eu=w;K[18]===Symbol.for("react.memo_cache_sentinel")?(_=(e,t)=>""!==e&&!!eu.includes(t),K[18]=_):_=K[18],K[19]!==ed?(E=c()(ed,_),K[19]=ed,K[20]=E):E=K[20];let em=E,eh=ed?.__hdx_resource_attributes??eS,ep=ed?.__hdx_event_attributes??eS;K[21]!==ec||K[22]!==ed?(C=ec&&ed?.[ec]&&Object.keys(ed[ec]).length>0?{[ec]:ed[ec]}:{},K[21]=ec,K[22]=ed,K[23]=C):C=K[23];let eg=C;K[24]!==en?(N=(e,t)=>en?.({where:e,whereLanguage:t})??"/",K[24]=en,K[25]=N):N=K[25];let eb=N,ey=ec&&eg?.[ec],ev=ey?.["http.url"]!=null;t:{let e;if(!ec){k=eg;break t}let t=eg?.[ec];K[26]!==t||K[27]!==eg||K[28]!==ec||K[29]!==ev?(e=ev&&t?{[ec]:c()(t,e_)}:eg,K[26]=t,K[27]=eg,K[28]=ec,K[29]=ev,K[30]=e):e=K[30],k=e}let ej=k,ew=ed?.__hdx_events_exception_attributes??eS,eE=ew?.["exception.stacktrace"]||ew?.["exception.parsed_stacktrace"],eC=eE??"[]";try{let e;K[31]!==eE?(e=JSON.parse(eE),K[31]=eE,K[32]=e):e=K[32],eC=e}catch(e){}let eN=ew?.["exception.type"];K[33]!==ew?(A="string"!=typeof ew?.["exception.message"]?JSON.stringify(ew?.["exception.message"]):ew?.["exception.message"],K[33]=ew,K[34]=A):A=K[34];let ek=ew?.["exception.mechanism"];K[35]!==eC||K[36]!==eN||K[37]!==A||K[38]!==ek?(T=[{stacktrace:eC,type:eN,value:A,mechanism:ek}],K[35]=eC,K[36]=eN,K[37]=A,K[38]=ek,K[39]=T):T=K[39];let eA=T;K[40]!==ed?.__hdx_events_exception_attributes?($=()=>Object.keys(ed?.__hdx_events_exception_attributes??{}).length>0,K[40]=ed?.__hdx_events_exception_attributes,K[41]=$):$=K[41],ed?.__hdx_events_exception_attributes;let eT=$();ed?.__hdx_span_events;let e$=Array.isArray(ed?.__hdx_span_events)&&ed?.__hdx_span_events.length>0;K[42]!==Y?(I=(0,p.N8)(Y),K[42]=Y,K[43]=I):I=K[43];let eI=I;K[44]!==ed?(z=l()(ed?.__hdx_body)?ed.__hdx_body:ed?.__hdx_body!==void 0?JSON.stringify(ed.__hdx_body):void 0,K[44]=ed,K[45]=z):z=K[45];let ez=z;K[46]!==ed?.__hdx_severity_text||K[47]!==ed?.__hdx_timestamp||K[48]!==et||K[49]!==ei||K[50]!==ez||K[51]!==eI?(L=!et&&(0,r.jsx)(u.a,{px:"sm",pt:"md",children:(0,r.jsx)(v.A,{attributes:ei,date:new Date(ed?.__hdx_timestamp??0),mainContent:ez,mainContentHeader:eI,severityText:ed?.__hdx_severity_text})}),K[46]=ed?.__hdx_severity_text,K[47]=ed?.__hdx_timestamp,K[48]=et,K[49]=ei,K[50]=ez,K[51]=eI,K[52]=L):L=K[52],K[53]===Symbol.for("react.memo_cache_sentinel")?(R=["exception","spanEvents","network","resourceAttributes","eventAttributes","topLevelAttributes"],K[53]=R):R=K[53],K[54]!==ep||K[55]!==ev?(M=ev&&(0,r.jsxs)(m.n.Item,{value:"network",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"HTTP Request"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(ex,{eventAttributes:ep})})})]}),K[54]=ep,K[55]=ev,K[56]=M):M=K[56],K[57]!==eA||K[58]!==ed?.__hdx_timestamp||K[59]!==eT?(D=eT&&(0,r.jsxs)(m.n.Item,{value:"exception",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Exception"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(J,{exceptionValues:eA,breadcrumbs:[],logData:{timestamp:ed?.__hdx_timestamp}})})})]}),K[57]=eA,K[58]=ed?.__hdx_timestamp,K[59]=eT,K[60]=D):D=K[60],K[61]!==ed?.__hdx_span_events||K[62]!==e$?(F=e$&&(0,r.jsxs)(m.n.Item,{value:"spanEvents",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Span Events"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(ef,{spanEvents:ed?.__hdx_span_events})})})]}),K[61]=ed?.__hdx_span_events,K[62]=e$,K[63]=F):F=K[63],K[64]!==eo||K[65]!==em?(O=Object.keys(em).length>0&&(0,r.jsxs)(m.n.Item,{value:"topLevelAttributes",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Top Level Attributes"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(b.z,{data:em,jsonColumns:eo})})})]}),K[64]=eo,K[65]=em,K[66]=O):O=K[66];let eL="log"===Y.kind?"Log":"Span";return K[67]!==eL?(P=(0,r.jsx)(m.n.Control,{children:(0,r.jsxs)(h.E,{size:"sm",ps:"md",children:[eL," Attributes"]})}),K[67]=eL,K[68]=P):P=K[68],K[69]!==ej||K[70]!==eo?(B=(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(b.z,{data:ej,jsonColumns:eo})})}),K[69]=ej,K[70]=eo,K[71]=B):B=K[71],K[72]!==P||K[73]!==B?(V=(0,r.jsxs)(m.n.Item,{value:"eventAttributes",children:[P,B]}),K[72]=P,K[73]=B,K[74]=V):V=K[74],K[75]===Symbol.for("react.memo_cache_sentinel")?(W=(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Resource Attributes"})}),K[75]=W):W=K[75],K[76]!==eh?(H=Object.entries(eh),K[76]=eh,K[77]=H):H=K[77],K[78]!==eb||K[79]!==en||K[80]!==eo||K[81]!==er||K[82]!==Y.resourceAttributesExpression||K[83]!==H?(q=(0,r.jsxs)(m.n.Item,{value:"resourceAttributes",children:[W,(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(x.s,{wrap:"wrap",gap:"2px",mx:"md",mb:"lg",children:H.map(e=>{let[t,s]=e;return(0,n.createElement)(j.A,{...er?{onPropertyAddClick:er,sqlExpression:Y.resourceAttributesExpression&&eo?.includes(Y.resourceAttributesExpression)?`toString(${Y.resourceAttributesExpression}.${t})`:`${Y.resourceAttributesExpression}['${t}']`}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:en?eb:void 0,displayedKey:t,name:`${Y.resourceAttributesExpression}.${t}`,value:s,key:t})})})})]}),K[78]=eb,K[79]=en,K[80]=eo,K[81]=er,K[82]=Y.resourceAttributesExpression,K[83]=H,K[84]=q):q=K[84],K[85]!==M||K[86]!==D||K[87]!==F||K[88]!==O||K[89]!==V||K[90]!==q?(X=(0,r.jsxs)(m.n,{mt:"sm",defaultValue:R,multiple:!0,variant:"noPadding",children:[M,D,F,O,V,q]}),K[85]=M,K[86]=D,K[87]=F,K[88]=O,K[89]=V,K[90]=q,K[91]=X):X=K[91],K[92]!==ee||K[93]!==L||K[94]!==X?(G=(0,r.jsxs)("div",{className:"flex-grow-1 overflow-auto","data-testid":ee,children:[L,X]}),K[92]=ee,K[93]=L,K[94]=X,K[95]=G):G=K[95],G}function e_(e,t){return!t.startsWith("http.")}},26932:(e,t,s)=>{"use strict";s.d(t,{e:()=>b,h:()=>y});var r=s(6029),n=s(75155),a=s(1909),i=s(69580),l=s(88140),o=s(93463),c=s(35555),d=s(82641),u=s(25062),m=s(3635),h=s(27166),x=s(78341),p=s(6876),g=s(58541);let f=e=>{let t,s,l,o,c,f,b,y,j,S,w,_=(0,n.c)(31);_[0]===Symbol.for("react.memo_cache_sentinel")?(t=[d.x.Slack,d.x.Generic,d.x.IncidentIO],_[0]=t):t=_[0];let{data:E,refetch:C}=p.Ay.useWebhooks(t),[N,k]=(0,x.j)(!1),{open:A,close:T}=k,$=Array.isArray(E?.data)&&E.data.length>0;if(_[1]!==E?.data){let e,t=E?.data.map(v)||[];_[3]===Symbol.for("react.memo_cache_sentinel")?(e={value:"",label:"Select a Webhook",disabled:!0},_[3]=e):e=_[3],s=[e,...t],_[1]=E?.data,_[2]=s}else s=_[2];let I=s;_[4]!==e.control||_[5]!==e.name?(l={control:e.control,name:e.name},_[4]=e.control,_[5]=e.name,_[6]=l):l=_[6];let{field:z}=(0,a.as)(l);_[7]!==T||_[8]!==z||_[9]!==C?(o=async e=>{await C(),e&&(z.onChange(e),z.onBlur()),T()},_[7]=T,_[8]=z,_[9]=C,_[10]=o):o=_[10];let L=o;_[11]===Symbol.for("react.memo_cache_sentinel")?(c={withinPortal:!1},_[11]=c):c=_[11];let R=$?"Select a Webhook":"No Webhooks available";return _[12]!==I||_[13]!==e||_[14]!==R?(f=(0,r.jsx)(i.l6,{comboboxProps:c,required:!0,size:"xs",flex:1,placeholder:R,data:I,name:e.name,control:e.control,...e}),_[12]=I,_[13]=e,_[14]=R,_[15]=f):f=_[15],_[16]!==A?(b=(0,r.jsx)(u.$,{size:"xs",variant:"subtle",color:"gray",onClick:A,children:"Add New Incoming Webhook"}),_[16]=A,_[17]=b):b=_[17],_[18]!==f||_[19]!==b?(y=(0,r.jsxs)(m.Y,{gap:"md",justify:"space-between",children:[f,b]}),_[18]=f,_[19]=b,_[20]=y):y=_[20],_[21]!==T||_[22]!==L?(j=(0,r.jsx)(g.g,{onClose:T,onSuccess:L}),_[21]=T,_[22]=L,_[23]=j):j=_[23],_[24]!==T||_[25]!==N||_[26]!==j?(S=(0,r.jsx)(h.a,{opened:N,onClose:T,title:"Add New Webhook",centered:!0,zIndex:9999,size:"lg",children:j}),_[24]=T,_[25]=N,_[26]=j,_[27]=S):S=_[27],_[28]!==S||_[29]!==y?(w=(0,r.jsxs)("div",{children:[y,S]}),_[28]=S,_[29]=y,_[30]=w):w=_[30],w},b=e=>{let t=(0,n.c)(3),{control:s,type:a,namePrefix:i}=e;if("webhook"===a){let e,n=`${void 0===i?"":i}channel.webhookId`;return t[0]!==s||t[1]!==n?(e=(0,r.jsx)(f,{control:s,name:n}),t[0]=s,t[1]=n,t[2]=e):e=t[2],e}return null},y=({thresholdType:e,threshold:t})=>null!=t&&"below"===e?(0,r.jsx)(l.T,{y1:0,y2:t,ifOverflow:"extendDomain",fill:"red",strokeWidth:0,fillOpacity:.05}):null!=t&&"above"===e?(0,r.jsx)(l.T,{y1:t,ifOverflow:"extendDomain",fill:"red",strokeWidth:0,fillOpacity:.05}):null!=t?(0,r.jsx)(o.e,{y:t,label:(0,r.jsx)(c.J,{value:"Alert Threshold",fill:"white",fontSize:11,opacity:.7}),stroke:"red",strokeDasharray:"3 3"}):null;function v(e){return{value:e._id,label:e.name}}},28450:(e,t,s)=>{"use strict";s.d(t,{FB:()=>j,Qg:()=>y,xD:()=>S});var r=s(6029),n=s(75155);s(55729);var a=s(82203),i=s.n(a),l=s(43465),o=s(67270),c=s(30039),d=s(43517),u=s(3635),m=s(43085),h=s(12482),x=s(49672),p=s(78550),g=s(81973),f=s(9897),b=s(7565);let y=(e,t)=>{let s,r,a,i=(0,n.c)(22),{dateRange:l,extraSelects:c,limit:d,logSource:u,order:m,where:f,whereLanguage:b}=e,y=(0,x.fu)(),v=(0,p.Ge)();return i[0]!==l||i[1]!==c||i[2]!==d||i[3]!==u.id||i[4]!==m||i[5]!==f||i[6]!==b?(s=["v2LogBatch",u.id,c,l,f,b,d,m],i[0]=l,i[1]=c,i[2]=d,i[3]=u.id,i[4]=m,i[5]=f,i[6]=b,i[7]=s):s=i[7],i[8]!==y||i[9]!==l||i[10]!==c||i[11]!==d||i[12]!==u||i[13]!==v||i[14]!==m||i[15]!==f||i[16]!==b?(r=async()=>{let e=await (0,o.PV)({select:[{valueExpression:(0,g.xg)(u),alias:"timestamp"},{valueExpression:`${u.serviceNameExpression}`,alias:"_service"},...c&&Array.isArray(c)?c:[]],from:u.from,dateRange:l,timestampValueExpression:u.timestampValueExpression,implicitColumnExpression:u.implicitColumnExpression,where:f,whereLanguage:b,connection:u.connection,limit:{limit:d??50,offset:0},orderBy:`${u.timestampValueExpression} ${m}`},v,u.querySettings);return await y.query({query:e.sql,query_params:e.params,connectionId:u.connection}).then(w)},i[8]=y,i[9]=l,i[10]=c,i[11]=d,i[12]=u,i[13]=v,i[14]=m,i[15]=f,i[16]=b,i[17]=r):r=i[17],i[18]!==t||i[19]!==s||i[20]!==r?(a={queryKey:s,queryFn:r,staleTime:3e5,...t},i[18]=t,i[19]=s,i[20]=r,i[21]=a):a=i[21],(0,h.I)(a)},v=e=>t=>{let s="#";try{s=`/search?q=${encodeURIComponent(`${e.resourceAttributesExpression}.k8s.pod.name:"${t["k8s.pod.name"]}"`)}&source=${e.id}&from=${new Date(t.timestamp).getTime()-9e5}&to=${new Date(t.timestamp).getTime()+1}`}catch(e){}return(0,r.jsxs)(c.K.Item,{children:[(0,r.jsx)(i(),{href:s,children:(0,r.jsx)(d.E,{size:"xs",fz:11,title:t.timestamp,c:"green",td:"underline",fw:"bold",children:(0,r.jsx)(b.H,{value:t.timestamp})})}),(0,r.jsxs)(u.Y,{gap:"xs",my:4,children:[(0,r.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:t["object.reason"]}),t["object.type"]&&(0,r.jsx)(m.E,{variant:"light",size:"xs",fw:"normal",color:"Normal"===t["object.type"]?"green":"yellow",children:t["object.type"]})]}),(0,r.jsx)(d.E,{size:"xs",children:t["object.note"]||t["object.message"]})]},t.id)},j=e=>{let t,s,a,i,o,m,h,x,p,g,f,j,S,w,C,N,k,A,T,$,I=(0,n.c)(82),{q:z,logSource:L,anchorEvent:R,dateRange:M}=e;I[0]!==M?.[0]?(t=M?.[0]??(0,l.A)(new Date,{days:1}),I[0]=M?.[0],I[1]=t):t=I[1];let D=t;I[2]!==M?.[1]?(s=M?.[1]??new Date,I[2]=M?.[1],I[3]=s):s=I[3];let F=s;I[4]!==F||I[5]!==D?(a=[D,F],I[4]=F,I[5]=D,I[6]=a):a=I[6];let O=`${L.eventAttributesExpression}.k8s.resource.name:"events" ${z}`;I[7]===Symbol.for("react.memo_cache_sentinel")?(i={valueExpression:"generateUUIDv4()",alias:"id"},I[7]=i):i=I[7];let P=`JSONExtractString(${L.eventAttributesExpression}['object'], 'metadata', 'creationTimestamp')`;I[8]!==P?(o={valueExpression:P,alias:"object.metadata.creationTimestamp"},I[8]=P,I[9]=o):o=I[9];let B=`JSONExtractString(${L.eventAttributesExpression}['object'], 'reason')`;I[10]!==B?(m={valueExpression:B,alias:"object.reason"},I[10]=B,I[11]=m):m=I[11];let V=`JSONExtractString(${L.eventAttributesExpression}['object'], 'note')`;I[12]!==V?(h={valueExpression:V,alias:"object.note"},I[12]=V,I[13]=h):h=I[13];let W=`JSONExtractString(${L.eventAttributesExpression}['object'], 'type')`;I[14]!==W?(x={valueExpression:W,alias:"object.type"},I[14]=W,I[15]=x):x=I[15];let H=`JSONExtractString(${L.eventAttributesExpression}['object'], 'message')`;I[16]!==H?(p={valueExpression:H,alias:"object.message"},I[16]=H,I[17]=p):p=I[17];let q=`JSONExtractString(${L.eventAttributesExpression}['object'], 'regarding', 'name')`;I[18]!==q?(g={valueExpression:q,alias:"k8s.pod.name"},I[18]=q,I[19]=g):g=I[19];let X=`JSONExtractString(${L.eventAttributesExpression}['object'], 'regarding', 'uid')`;I[20]!==X?(f={valueExpression:X,alias:"k8s.pod.uid"},I[20]=X,I[21]=f):f=I[21];let G=`JSONExtractString(${L.eventAttributesExpression}['object'], 'type')`;I[22]!==G?(j={valueExpression:G,alias:"type"},I[22]=G,I[23]=j):j=I[23];let K=`JSONExtractString(${L.eventAttributesExpression}['object'], 'type')`;I[24]!==K?(S={valueExpression:K,alias:"severity_text"},I[24]=K,I[25]=S):S=I[25];let J=`JSONExtractString(${L.eventAttributesExpression}['object'], 'note')`;I[26]!==J?(w={valueExpression:J,alias:"body"},I[26]=J,I[27]=w):w=I[27],I[28]!==h||I[29]!==x||I[30]!==p||I[31]!==g||I[32]!==f||I[33]!==j||I[34]!==S||I[35]!==w||I[36]!==o||I[37]!==m?(C=[i,o,m,h,x,p,g,f,j,S,w],I[28]=h,I[29]=x,I[30]=p,I[31]=g,I[32]=f,I[33]=j,I[34]=S,I[35]=w,I[36]=o,I[37]=m,I[38]=C):C=I[38],I[39]!==L||I[40]!==C||I[41]!==a||I[42]!==O?(N={dateRange:a,limit:50,logSource:L,order:"desc",where:O,whereLanguage:"lucene",extraSelects:C},I[39]=L,I[40]=C,I[41]=a,I[42]=O,I[43]=N):N=I[43];let{data:Y,isLoading:Z}=y(N);I[44]!==Y?.data?(k=Y?.data||[],I[44]=Y?.data,I[45]=k):k=I[45],I[46]!==k?(A=k.sort(_),I[46]=k,I[47]=A):A=I[47];let U=A;I[48]!==U||I[49]!==R?(T=R?U.filter(e=>new Date(e.timestamp)<new Date(R.timestamp)):[],I[48]=U,I[49]=R,I[50]=T):T=I[50];let Q=T;I[51]!==U||I[52]!==R?($=R?U.filter(e=>new Date(e.timestamp)>new Date(R.timestamp)):[],I[51]=U,I[52]=R,I[53]=$):$=I[53];let ee=$;if(Z){let e;return I[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.E,{color:"muted",ta:"center",children:"Loading..."}),I[54]=e):e=I[54],e}if(0===U.length){let e;return I[55]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.E,{color:"muted",ta:"center",children:"No events"}),I[55]=e):e=I[55],e}if(R){let e,t,s,n,a,i,l;return I[56]!==L||I[57]!==ee?(e=ee.map(v(L)),I[56]=L,I[57]=ee,I[58]=e):e=I[58],I[59]!==R.timestamp?(t=(0,r.jsx)(b.H,{value:R.timestamp}),I[59]=R.timestamp,I[60]=t):t=I[60],I[61]!==R.timestamp||I[62]!==t?(s=(0,r.jsx)(d.E,{size:"xs",fz:11,title:R.timestamp,children:t}),I[61]=R.timestamp,I[62]=t,I[63]=s):s=I[63],I[64]!==R.label?(n=(0,r.jsx)(u.Y,{gap:"xs",my:4,children:(0,r.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:R.label})}),I[64]=R.label,I[65]=n):n=I[65],I[66]!==R.timestamp||I[67]!==s||I[68]!==n?(a=(0,r.jsxs)(c.K.Item,{ref:E,children:[s,n]},R.timestamp),I[66]=R.timestamp,I[67]=s,I[68]=n,I[69]=a):a=I[69],I[70]!==L||I[71]!==Q?(i=Q.map(v(L)),I[70]=L,I[71]=Q,I[72]=i):i=I[72],I[73]!==e||I[74]!==a||I[75]!==i?(l=(0,r.jsxs)(c.K,{bulletSize:12,lineWidth:1,children:[e,a,i]}),I[73]=e,I[74]=a,I[75]=i,I[76]=l):l=I[76],l}{let e,t;return I[77]!==U||I[78]!==L?(e=U.map(v(L)),I[77]=U,I[78]=L,I[79]=e):e=I[79],I[80]!==e?(t=(0,r.jsx)(c.K,{bulletSize:12,lineWidth:1,children:e}),I[80]=e,I[81]=t):t=I[81],t}},S=e=>{let t=(0,n.c)(6),{status:s}=e;switch(s){case f.h.Pending:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"yellow",fw:"normal",tt:"none",size:"md",children:"Pending"}),t[0]=e):e=t[0],e}case f.h.Running:{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Running"}),t[1]=e):e=t[1],e}case f.h.Succeeded:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"indigo",fw:"normal",tt:"none",size:"md",children:"Succeeded"}),t[2]=e):e=t[2],e}case f.h.Failed:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Failed"}),t[3]=e):e=t[3],e}case f.h.Unknown:{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[4]=e):e=t[4],e}default:{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[5]=e):e=t[5],e}}};function w(e){return e.json()}function _(e,t){return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()}function E(e){null!==e&&e.scrollIntoView({block:"nearest"})}},28959:(e,t,s)=>{"use strict";s.d(t,{RW:()=>m,Ye:()=>u,ae:()=>l,hd:()=>o,mA:()=>d});var r=s(75155),n=s(55729),a=s(67843),i=s(92917);let l="isRootSpan",o=(e,{stringifyKeys:t=!1}={})=>Object.entries(e).filter(([e,t])=>t.included.size>0||t.excluded.size>0||null!=t.range).flatMap(([e,s])=>{let r=[],n=t?`toString(${e})`:e;return s.included.size>0&&r.push({type:"sql",condition:`${n} IN (${Array.from(s.included).map(e=>"string"==typeof e?`'${e}'`:e).join(", ")})`}),s.excluded.size>0&&r.push({type:"sql",condition:`${n} NOT IN (${Array.from(s.excluded).map(e=>"string"==typeof e?`'${e}'`:e).join(", ")})`}),null!=s.range&&r.push({type:"sql",condition:`${n} BETWEEN ${s.range.min} AND ${s.range.max}`}),r}),c=e=>{let t=e.trim();return["true","false"].includes(t.toLowerCase())?"true"===t.toLowerCase():t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):t},d=e=>{let t=new Map;for(let s of e)if("sql"===s.type){if(s.condition.includes(" BETWEEN ")){let e=s.condition.match(/^(.+?)\s+BETWEEN\s+(.+?)\s+AND\s+(.+?)$/i);if(e){let[,s,r,n]=e,a=s.trim(),i=parseFloat(r.trim()),l=parseFloat(n.trim());t.has(a)?t.get(a).range={min:i,max:l}:t.set(a,{included:new Set,excluded:new Set,range:{min:i,max:l}});continue}}for(let e of function(e){let t=[],s=[],r="",n=!1;for(let t=0;t<e.length;t++){let a=e[t];if("'"===a&&(0===t||"\\"!==e[t-1])){n=!n,r+=a;continue}if(!n&&" AND "===e.slice(t,t+5).toUpperCase()){r.trim()&&s.push(r.trim()),r="",t+=4;continue}r+=a}for(let e of(r.trim()&&s.push(r.trim()),s)){if(e.toUpperCase().includes(" OR ")||e.includes("=")||e.includes("<")||e.includes(">"))continue;let s=e.includes("NOT IN");if(e.includes(" IN ")||e.includes(" NOT IN ")){let[r,n]=e.split(s?" NOT IN ":" IN ");if(r&&n){let e=r.trim(),a=n.trim(),i=function(e){let t=[],s="",r=!1;for(let n=0;n<e.length;n++){let a=e[n];if("'"===a&&(0===n||"\\"!==e[n-1])){r=!r,s+=a;continue}if(!r&&","===a){s.trim()&&t.push(c(s)),s="";continue}s+=a}return s.trim()&&t.push(c(s)),t}(a.startsWith("(")&&a.endsWith(")")?a.slice(1,-1):a);t.push({key:e,values:i,isExclude:s})}}}return t}(s.condition)){t.has(e.key)||t.set(e.key,{included:new Set,excluded:new Set});let s=t.get(e.key);e.values.forEach(t=>{e.isExclude?s.excluded.add(t):s.included.add(t)})}}return{filters:Object.fromEntries(t)}},u=({searchQuery:e=[],onFilterChange:t})=>{let s=n.useMemo(()=>{try{return d(e)}catch(e){return console.error(e),{filters:{}}}},[e]),[r,i]=n.useState({});n.useEffect(()=>{((e,t)=>{let s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(let r of s){if(!t[r]||e[r].included.size!==t[r].included.size)return!1;for(let s of e[r].included)if(!t[r].included.has(s))return!1;if(e[r].excluded.size!==t[r].excluded.size)return!1;for(let s of e[r].excluded)if(!t[r].excluded.has(s))return!1;if(e[r].range?.min!==t[r].range?.min||e[r].range?.max!==t[r].range?.max)return!1}return!0})(r,s.filters)||i(s.filters)},[s.filters]);let l=n.useCallback(e=>{t(o(e))},[t]),c=n.useCallback((e,t,s)=>{i(r=>{let n=(0,a.Ay)(r,r=>{if(r[e]||(r[e]={included:new Set,excluded:new Set}),"only"===s){r[e]={included:new Set([t]),excluded:new Set};return}if("exclude"===s){r[e].included.delete(t),r[e].excluded.has(t)?r[e].excluded.delete(t):r[e].excluded.add(t);return}r[e].excluded.delete(t),r[e].included.has(t)?r[e].included.delete(t):r[e].included.add(t)});return l(n),n})},[l]),u=n.useCallback((e,t)=>{i(s=>{let r=(0,a.Ay)(s,s=>{s[e]||(s[e]={included:new Set,excluded:new Set}),s[e].range=t});return l(r),r})},[l]),m=n.useCallback(e=>{i(t=>{let s=(0,a.Ay)(t,t=>{delete t[e]});return l(s),s})},[l]),h=n.useCallback(()=>{i(()=>({})),l({})},[l]);return{filters:r,setFilters:i,setFilterValue:c,setFilterRange:u,clearFilter:m,clearAllFilters:h}};function m(e){let t,s,n,l,o,c,d=(0,r.c)(18),{pinnedFilters:u,setPinnedFilters:m,pinnedFields:h,setPinnedFields:x}=function(e){let t,s,n,l,o,c,d,u=(0,r.c)(19);u[0]===Symbol.for("react.memo_cache_sentinel")?(t={},u[0]=t):t=u[0];let[m,h]=(0,i.Mj)("hdx-pinned-search-filters",t);u[1]===Symbol.for("react.memo_cache_sentinel")?(s={},u[1]=s):s=u[1];let[x,p]=(0,i.Mj)("hdx-pinned-fields",s);u[2]!==m||u[3]!==e?(n=e&&m[e]?m[e]:{},u[2]=m,u[3]=e,u[4]=n):n=u[4];let g=n;u[5]!==x||u[6]!==e?(l=e&&x[e]?x[e]:[],u[5]=x,u[6]=e,u[7]=l):l=u[7];let f=l;u[8]!==h||u[9]!==e?(o=t=>{e&&h(s=>(0,a.Ay)(s,s=>{s[e]=t instanceof Function?t(s[e]??{}):t}))},u[8]=h,u[9]=e,u[10]=o):o=u[10];let b=o;u[11]!==p||u[12]!==e?(c=t=>{e&&p(s=>(0,a.Ay)(s,s=>{s[e]=t instanceof Function?t(s[e]??[]):t}))},u[11]=p,u[12]=e,u[13]=c):c=u[13];let y=c;return u[14]!==f||u[15]!==g||u[16]!==y||u[17]!==b?(d={pinnedFilters:g,setPinnedFilters:b,pinnedFields:f,setPinnedFields:y},u[14]=f,u[15]=g,u[16]=y,u[17]=b,u[18]=d):d=u[18],d}(e);d[0]!==x||d[1]!==m?(t=(e,t)=>{m(s=>(0,a.Ay)(s,s=>{s[e]||(s[e]=[]);let r=s[e].findIndex(e=>e===t);return r>=0?s[e].splice(r,1):s[e].push(t),s})),x(t=>t.includes(e)?t:[...t,e])},d[0]=x,d[1]=m,d[2]=t):t=d[2];let p=t;d[3]!==x?(s=e=>{x(t=>{let s=t.findIndex(t=>t===e);return s>=0?t.filter((e,t)=>t!==s):[...t,e]})},d[3]=x,d[4]=s):s=d[4];let g=s;d[5]!==u?(n=(e,t)=>u[e]&&u[e].some(e=>e===t),d[5]=u,d[6]=n):n=d[6];let f=n;d[7]!==h?(l=e=>h.includes(e),d[7]=h,d[8]=l):l=d[8];let b=l;d[9]!==h?(o=()=>h,d[9]=h,d[10]=o):o=d[10];let y=o;return d[11]!==y||d[12]!==b||d[13]!==f||d[14]!==u||d[15]!==g||d[16]!==p?(c={toggleFilterPin:p,toggleFieldPin:g,isFilterPinned:f,isFieldPinned:b,getPinnedFields:y,pinnedFilters:u},d[11]=y,d[12]=b,d[13]=f,d[14]=u,d[15]=g,d[16]=p,d[17]=c):c=d[17],c}},31451:(e,t,s)=>{"use strict";s.d(t,{Q$:()=>f,nt:()=>v,vN:()=>g,xj:()=>p});var r=s(75155),n=s(36722),a=s.n(n),i=s(76089),l=s(12482),o=s(43152),c=s(46061),d=s(91021),u=s(81973);async function m(){let e=await window.loadPyodide();await e.loadPackage("micropip");let t=e.pyimport("micropip"),s=new URL("/jsonpickle-4.1.1-py3-none-any.whl",window.location.origin);await t.install(s.href);let r=new URL("/drain3-0.9.11-py3-none-any.whl",window.location.origin);return await t.install(r.href),e}class h{constructor(e){this.pyodide=e,this.id=Math.random().toString(36).substring(2,15),this.minerVariableName=`m_${this.id}`}async init(){await this.pyodide.runPythonAsync(`
import js
import json
from drain3 import TemplateMiner
from drain3.template_miner_config import TemplateMinerConfig

${this.minerVariableName} = TemplateMiner(None, TemplateMinerConfig())
    `)}async minePatterns(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        ${s}.append(${this.minerVariableName}.add_log_message(log))
      json.dumps(${s})
    `))}async matchLogs(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        match = ${this.minerVariableName}.match(log)
        ${s}.append(match.cluster_id if match else None)
      json.dumps(${s})
    `))}}async function x(e,t){let s=new h(t);return await s.init(),{miner:s,patterns:await s.minePatterns(e)}}let p="__hdx_pattern_field",g="__hdx_timestamp",f="__hdx_severity_text",b="__hdx_status_code";function y(e){return a()(e[p])}function v(e){let t,s,n,a,h,v=(0,r.c)(22),{config:w,samples:_,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:N,totalCount:k,enabled:A}=e,T=void 0===A||A;v[0]!==E||v[1]!==w||v[2]!==T||v[3]!==_||v[4]!==C||v[5]!==N?(t={config:w,samples:_,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:N,enabled:T},v[0]=E,v[1]=w,v[2]=T,v[3]=_,v[4]=C,v[5]=N,v[6]=t):t=v[6];let{data:$,isLoading:I,patternQueryConfig:z}=function(e){var t;let s,n,a,i,o,h,v,j,S,w,_,E,C,N,k,A,T=(0,r.c)(36),{config:$,samples:I,bodyValueExpression:z,severityTextExpression:L,statusCodeExpression:R,enabled:M}=e,D=void 0===M||M,F=`${z} as ${p}`;T[0]!==$.timestampValueExpression?(s=(0,u.AF)($.timestampValueExpression),T[0]=$.timestampValueExpression,T[1]=s):s=T[1];let O=`${s} as ${g}`;T[2]!==L?(n=L?[`${L} as ${f}`]:[],T[2]=L,T[3]=n):n=T[3],T[4]!==R?(a=R?[`${R} as ${b}`]:[],T[4]=R,T[5]=a):a=T[5],T[6]!==F||T[7]!==O||T[8]!==n||T[9]!==a?(i=[F,O,...n,...a],T[6]=F,T[7]=O,T[8]=n,T[9]=a,T[10]=i):i=T[10];let P=i.join(",");T[11]===Symbol.for("react.memo_cache_sentinel")?(o=[{ordering:"DESC",valueExpression:"rand()"}],T[11]=o):o=T[11],T[12]!==I?(h={limit:I},T[12]=I,T[13]=h):h=T[13],T[14]!==$||T[15]!==h||T[16]!==P?(v={...$,select:P,orderBy:o,limit:h},T[14]=$,T[15]=h,T[16]=P,T[17]=v):v=T[17];let B=(0,c.YB)(v),V=null!=B&&D;T[18]!==V?(j={enabled:V},T[18]=V,T[19]=j):j=T[19];let{data:W,isLoading:H}=(0,d.HD)(B??$,j);T[20]!==D?(S={enabled:D},T[20]=D,T[21]=S):S=T[21];let{data:q,isLoading:X}=(t=S,(A=(0,r.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(N=["pyodide"],A[0]=N):N=A[0],A[1]!==t.enabled?(k={queryKey:N,queryFn:m,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1,enabled:t.enabled},A[1]=t.enabled,A[2]=k):k=A[2],(0,l.I)(k));T[22]!==$?(w=["patterns",$],T[22]=$,T[23]=w):w=T[23],T[24]!==B||T[25]!==q||T[26]!==W?(_=()=>{if(null==B)throw Error("Unexpected configWithPrimaryAndPartitionKey is null");return x(W?.data.map(y)??[],q).then(e=>{let t=[],s=e.patterns;for(let e=0;e<s.length;e++){let r=s[e],n=W?.data[e];t.push({...n,__hdx_patternId:r.cluster_id,__hdx_pattern:r.template_mined})}return{...W,data:t,additionalKeysLength:B.additionalKeysLength,miner:e.miner}})},T[24]=B,T[25]=q,T[26]=W,T[27]=_):_=T[27];let G=null!=W&&null!=q&&D;T[28]!==w||T[29]!==_||T[30]!==G?(E={queryKey:w,queryFn:_,refetchOnWindowFocus:!1,enabled:G},T[28]=w,T[29]=_,T[30]=G,T[31]=E):E=T[31];let K=(0,l.I)(E),J=K.isLoading||H||X;return T[32]!==B||T[33]!==K||T[34]!==J?(C={...K,isLoading:J,patternQueryConfig:B},T[32]=B,T[33]=K,T[34]=J,T[35]=C):C=T[35],C}(t),L=$?.data.length,R=k&&L?k/L:1;v[7]!==w.dateRange?(s=(0,i.tA)(w.dateRange,24),n=(0,o.Ht)(w.dateRange[0],w.dateRange[1],s),v[7]=w.dateRange,v[8]=s,v[9]=n):(s=v[8],n=v[9]);let M=n;if(v[10]!==w.dateRange||v[11]!==s||v[12]!==$?.data||v[13]!==R||v[14]!==M){let e=$?.data.reduce(S,{});a={},Object.entries(e??{}).forEach(e=>{let[t,r]=e,n=M.reduce(j,{}),i=r.reduce((e,t)=>{let r=t[g],n=(0,o.W6)(new Date(r),s).getTime();return e[n]=(e[n]||0)+1,e},n),l=Math.max(Math.round(r.length*R),1),c=r.at(-1);a[t]={id:t,pattern:c?.__hdx_pattern,count:l,countStr:`~${l}`,severityText:c?.[f],statusCode:c?.[b],samples:r,__hdx_pattern_trend:{data:Object.entries(i).map(e=>{let[t,s]=e;return{bucket:Number.parseInt(t)/1e3,count:Math.round(s*R)}}),granularity:s,dateRange:w.dateRange}}}),v[10]=w.dateRange,v[11]=s,v[12]=$?.data,v[13]=R,v[14]=M,v[15]=a}else a=v[15];let D=a,F=$?.miner;return v[16]!==D||v[17]!==I||v[18]!==z||v[19]!==L||v[20]!==F?(h={data:D,isLoading:I,miner:F,sampledRowCount:L,patternQueryConfig:z},v[16]=D,v[17]=I,v[18]=z,v[19]=L,v[20]=F,v[21]=h):h=v[21],h}function j(e,t){return e[t.getTime()]=0,e}function S(e,t){let s=`${t.__hdx_patternId}`;return e[s]=e[s]||[],e[s].push(t),e}},32479:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var r=s(75155),n=s(55729),a=s(76089),i=s(2489),l=s(43152);let o=e=>{let t,s,o,c,d,u=(0,r.c)(15),{searchedTimeRange:m,onTimeRangeSelect:h,isLive:x}=e,[p,g]=n.useState(!1),f="visible"===(0,i.f)()&&x;u[0]!==h||u[1]!==m?(t=()=>{let e=1e3*Math.round((m[1].getTime()-m[0].getTime())/1e3),t=new Date;h(new Date(t.getTime()-e),t),g(!0),setTimeout(()=>{g(!1)},1e3)},u[0]=h,u[1]=m,u[2]=t):t=u[2];let b=t;u[3]!==m?(s=(0,a.tA)(m),u[3]=m,u[4]=s):s=u[4];let y=s,v=n.useRef(null);return u[5]!==y||u[6]!==f||u[7]!==b?(o=()=>(f?(v.current&&window.clearInterval(v.current),v.current=window.setInterval(()=>{b()},1e3*(0,l.qL)(y))):v.current&&window.clearInterval(v.current),()=>{v.current&&window.clearInterval(v.current)}),c=[f,y,b],u[5]=y,u[6]=f,u[7]=b,u[8]=o,u[9]=c):(o=u[8],c=u[9]),n.useEffect(o,c),u[10]!==y||u[11]!==f||u[12]!==p||u[13]!==b?(d={granularityOverride:y,isRefreshEnabled:f,manualRefreshCooloff:p,refresh:b},u[10]=y,u[11]=f,u[12]=p,u[13]=b,u[14]=d):d=u[14],d}},37901:(e,t,s)=>{"use strict";s.d(t,{$_:()=>h,bn:()=>p,dD:()=>g,k1:()=>x});var r,n=s(6029),a=s(75155),i=s(46375),l=s(82641),o=s(60481),c=s(91021),d=s(81973),u=s(18006),m=s(65081),h=((r={}).TIMESTAMP="__hdx_timestamp",r.BODY="__hdx_body",r.TRACE_ID="__hdx_trace_id",r.SPAN_ID="__hdx_span_id",r.SEVERITY_TEXT="__hdx_severity_text",r.SERVICE_NAME="__hdx_service_name",r.RESOURCE_ATTRIBUTES="__hdx_resource_attributes",r.EVENT_ATTRIBUTES="__hdx_event_attributes",r.EVENTS_EXCEPTION_ATTRIBUTES="__hdx_events_exception_attributes",r.SPAN_EVENTS="__hdx_span_events",r);function x(e){let t,s,r,n,o,m,h,x,p,g,f,b=(0,a.c)(62),{source:y,rowId:v,aliasWith:j}=e;b[0]!==y?(t=(0,d.N8)(y),b[0]=y,b[1]=t):t=b[1];let S=t,w=y.traceIdExpression,_=y.spanIdExpression,E=y.severityTextExpression||y.statusCodeExpression;if(b[2]!==S||b[3]!==_||b[4]!==w||b[5]!==E||b[6]!==y){let e,t,a,i,o,m,h,x,p,g,f,v=y.kind===l.GL.Trace||y.kind===l.GL.Log?(0,u.z4)(y.highlightedRowAttributeExpressions):[];n=c.HD,s=y.connection,b[10]===Symbol.for("react.memo_cache_sentinel")?(e={valueExpression:"*"},b[10]=e):e=b[10],b[11]!==y?(t=(0,d.xg)(y),b[11]=y,b[12]=t):t=b[12],b[13]!==t?(a={valueExpression:t,alias:"__hdx_timestamp"},b[13]=t,b[14]=a):a=b[14],b[15]!==S?(i=S?[{valueExpression:S,alias:"__hdx_body"}]:[],b[15]=S,b[16]=i):i=b[16],b[17]!==w?(o=w?[{valueExpression:w,alias:"__hdx_trace_id"}]:[],b[17]=w,b[18]=o):o=b[18],b[19]!==_?(m=_?[{valueExpression:_,alias:"__hdx_span_id"}]:[],b[19]=_,b[20]=m):m=b[20],b[21]!==E?(h=E?[{valueExpression:E,alias:"__hdx_severity_text"}]:[],b[21]=E,b[22]=h):h=b[22],b[23]!==y.serviceNameExpression?(x=y.serviceNameExpression?[{valueExpression:y.serviceNameExpression,alias:"__hdx_service_name"}]:[],b[23]=y.serviceNameExpression,b[24]=x):x=b[24],b[25]!==y.resourceAttributesExpression?(p=y.resourceAttributesExpression?[{valueExpression:y.resourceAttributesExpression,alias:"__hdx_resource_attributes"}]:[],b[25]=y.resourceAttributesExpression,b[26]=p):p=b[26],b[27]!==y.eventAttributesExpression?(g=y.eventAttributesExpression?[{valueExpression:y.eventAttributesExpression,alias:"__hdx_event_attributes"}]:[],b[27]=y.eventAttributesExpression,b[28]=g):g=b[28],b[29]!==y.kind||b[30]!==y.spanEventsValueExpression?(f=y.kind===l.GL.Trace&&y.spanEventsValueExpression?[{valueExpression:`${y.spanEventsValueExpression}.Attributes[indexOf(${y.spanEventsValueExpression}.Name, 'exception')]`,alias:"__hdx_events_exception_attributes"},{valueExpression:y.spanEventsValueExpression,alias:"__hdx_span_events"}]:[],b[29]=y.kind,b[30]=y.spanEventsValueExpression,b[31]=f):f=b[31],r=[e,a,...i,...o,...m,...h,...x,...p,...g,...f,...v],b[2]=S,b[3]=_,b[4]=w,b[5]=E,b[6]=y,b[7]=s,b[8]=r,b[9]=n}else s=b[7],r=b[8],n=b[9];let C=v??"0=1";b[32]===Symbol.for("react.memo_cache_sentinel")?(o={limit:1},b[32]=o):o=b[32],b[33]!==j?(m=j&&j.length>0?{with:j}:{},b[33]=j,b[34]=m):m=b[34],b[35]!==y.from||b[36]!==s||b[37]!==r||b[38]!==C||b[39]!==m?(h={connection:s,select:r,where:C,from:y.from,limit:o,...m},b[35]=y.from,b[36]=s,b[37]=r,b[38]=C,b[39]=m,b[40]=h):h=b[40],b[41]!==j||b[42]!==v||b[43]!==y?(x=["row_side_panel",v,j,y],b[41]=j,b[42]=v,b[43]=y,b[44]=x):x=b[44];let N=null!=v;b[45]!==N||b[46]!==x?(p={queryKey:x,enabled:N},b[45]=N,b[46]=x,b[47]=p):p=b[47];let k=n(h,p);e:{let e,t,s;if(!k.data?.data?.[0]){g=k.data;break e}let r=k.data.data[0];if(b[48]!==r){if(e={...r},r.__hdx_resource_attributes){let t,s=r.__hdx_resource_attributes;b[50]!==s?(t=(0,i.flatten)(s),b[50]=s,b[51]=t):t=b[51],e.__hdx_resource_attributes=t}if(r.__hdx_event_attributes){let t,s=r.__hdx_event_attributes;b[52]!==s?(t=(0,i.flatten)(s),b[52]=s,b[53]=t):t=b[53],e.__hdx_event_attributes=t}b[48]=r,b[49]=e}else e=b[49];b[54]!==e?(t=[e],b[54]=e,b[55]=t):t=b[55],b[56]!==k.data||b[57]!==t?(s={...k.data,data:t},b[56]=k.data,b[57]=t,b[58]=s):s=b[58],g=s}let A=g;return b[59]!==A||b[60]!==k?(f={...k,data:A},b[59]=A,b[60]=k,b[61]=f):f=b[61],f}function p(e){return e?.filter(e=>"JSON"===e.type||e.type.startsWith("JSON(")).map(e=>e.name)??[]}function g(e){let t,s,r,i,l,c=(0,a.c)(16),{source:d,rowId:u,aliasWith:h,"data-testid":g}=e;c[0]!==h||c[1]!==u||c[2]!==d?(t={source:d,rowId:u,aliasWith:h},c[0]=h,c[1]=u,c[2]=d,c[3]=t):t=c[3];let{data:f}=x(t);e:{let e,t;c[4]!==f?.data?.[0]?(e=f?.data?.[0]??{},c[4]=f?.data?.[0],c[5]=e):e=c[5],c[6]!==e?(t={...e},c[6]=e,c[7]=t):t=c[7];let r=t;if(!r){s=null;break e}s=r}let b=s,y=f?.meta;c[8]!==y?(r=p(y),c[8]=y,c[9]=r):r=c[9];let v=r;return c[10]!==b||c[11]!==v?(i=(0,n.jsx)(o.a,{mx:"md",my:"sm",children:(0,n.jsx)(m.z,{data:b,jsonColumns:v})}),c[10]=b,c[11]=v,c[12]=i):i=c[12],c[13]!==g||c[14]!==i?(l=(0,n.jsx)("div",{className:"flex-grow-1 overflow-auto","data-testid":g,children:i}),c[13]=g,c[14]=i,c[15]=l):l=c[15],l}},40147:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(75155),n=s(80519),a=s.n(n),i=s(3145),l=s(78550);function o(e){let t,s=(0,r.c)(6);s[0]!==e?(t=(0,i.VO)(e),s[0]=e,s[1]=t):t=s[1];let{data:n,isLoading:o}=(0,l.n$)(t);if(e&&!o){let e;return s[2]!==n?(e={isLoading:!1,getFieldExpression:(e,t,s)=>n?.includes(e)?a().format(`${void 0===s?"toString":s}(??.??)`,[e,t]):a().format("??[?]",[e,t])},s[2]=n,s[3]=e):e=s[3],e}{let e;return s[4]!==o?(e={isLoading:o,getFieldExpression:void 0},s[4]=o,s[5]=e):e=s[5],e}}},43370:(e,t,s)=>{"use strict";s.d(t,{A:()=>N});var r=s(6029),n=s(75155),a=s(55729),i=s(1909),l=s(66692),o=s(54167),c=s(3635),d=s(21604),u=s(1885),m=s(37659),h=s(94193),x=s(8737),p=s(92917),g=s(52154);function f(e){let t,s,i,l,o,c,d,f,v,j,S,w,_,E,C,N,k,A,T,$,I,z,L,R,M=(0,n.c)(86),{inputRef:D,value:F,onChange:O,placeholder:P,autocompleteOptions:B,size:V,aboveSuggestions:W,belowSuggestions:H,showSuggestionsOnEmpty:q,suggestionsHeader:X,zIndex:G,onLanguageChange:K,language:J,showHotkey:Y,onSubmit:Z,queryHistoryType:U,"data-testid":Q}=e,ee=void 0===P?"Search your events for anything...":P,et=void 0===V?"sm":V,es=void 0===X?"Properties":X,er=void 0===G?999:G,[en,ea]=(0,a.useState)(!1),[ei,el]=(0,a.useState)(!1);M[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{ea(e),el(e)},M[0]=t):t=M[0];let eo=t,[ec,ed]=(0,a.useState)("auto"),[eu,em]=(0,a.useState)(720),[eh,ex]=(0,a.useState)(-1),[ep,eg]=(0,a.useState)(-1),[ef,eb]=(0,p.mk)(U);e:{let e;if(!U||!ef){let e;M[1]===Symbol.for("react.memo_cache_sentinel")?(e=[],M[1]=e):e=M[1],s=e;break e}M[2]!==ef?(e=ef.map(y),M[2]=ef,M[3]=e):e=M[3],s=e}let ey=s,ev=null!=F&&0===F.length&&ey.length>0&&U;M[4]!==B?(i=new u.A(B??[],{keys:["value"],threshold:0,ignoreLocation:!0}),M[4]=B,M[5]=i):i=M[5];let ej=i,eS=(0,p.d7)(F??"",200);if(M[6]!==B||M[7]!==eS||M[8]!==ej||M[9]!==q){t:{let e=eS.split(" "),t=e[e.length-1];if(0===t.length&&q){let e;M[11]!==B?(e=B??[],M[11]=B,M[12]=e):e=M[12],l=e;break t}l=ej.search(t).map(b)}M[6]=B,M[7]=eS,M[8]=ej,M[9]=q,M[10]=l}else l=M[10];let ew=l;M[13]!==O||M[14]!==Z||M[15]!==eb?(o=e=>{eg(-1),O(e),eb(e),el(!1),Z?.()},M[13]=O,M[14]=Z,M[15]=eb,M[16]=o):o=M[16];let e_=o;M[17]!==D||M[18]!==O||M[19]!==F?(c=e=>{ex(-1),O(null==F?e:F.split(" ").slice(0,-1).join(" ")+`${F.split(" ").length>1?" ":""}${e}`),D.current?.focus()},M[17]=D,M[18]=O,M[19]=F,M[20]=c):c=M[20];let eE=c,eC=(0,a.useRef)(null);M[21]!==D?(d=()=>{eC.current&&ed(eC.current.clientWidth),D.current&&em(D.current.clientWidth)},M[21]=D,M[22]=d):d=M[22],M[23]!==D||M[24]!==J||M[25]!==K?(f=[J,K,D],M[23]=D,M[24]=J,M[25]=K,M[26]=f):f=M[26],(0,a.useLayoutEffect)(d,f);let eN=eu>300?eu:720;return M[27]!==eN||M[28]!==er?(v={dropdown:{maxWidth:eN,width:"100%",zIndex:er}},M[27]=eN,M[28]=er,M[29]=v):v=M[29],M[30]===Symbol.for("react.memo_cache_sentinel")?(j={flexGrow:1,resize:"none"},M[30]=j):j=M[30],M[31]!==O?(S=e=>O(e.target.value),M[31]=O,M[32]=S):S=M[32],M[33]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{ex(-1),eg(-1),eo(!0)},_=()=>{ex(-1),eg(-1),eo(!1)},M[33]=w,M[34]=_):(w=M[33],_=M[34]),M[35]!==eE||M[36]!==Z||M[37]!==U||M[38]!==eh||M[39]!==eb||M[40]!==ew||M[41]!==F?(E=e=>{"Escape"===e.key&&e.target instanceof HTMLTextAreaElement&&(e.preventDefault(),el(!1),e.target.blur()),"Tab"===e.key&&e.target instanceof HTMLTextAreaElement&&ew.length>0&&eh<ew.length&&eh>=0&&(e.preventDefault(),eE(ew[eh].value)),"Enter"===e.key&&e.target instanceof HTMLTextAreaElement&&(ew.length>0&&eh<ew.length&&eh>=0?(e.preventDefault(),eE(ew[eh].value)):e.shiftKey||(e.preventDefault(),U&&F&&eb(F),Z?.())),"ArrowDown"===e.key&&e.target instanceof HTMLTextAreaElement&&ew.length>0&&ex(Math.min(eh+1,ew.length-1,9)),"ArrowUp"===e.key&&e.target instanceof HTMLTextAreaElement&&ew.length>0&&ex(Math.max(eh-1,0))},M[35]=eE,M[36]=Z,M[37]=U,M[38]=eh,M[39]=eb,M[40]=ew,M[41]=F,M[42]=E):E=M[42],M[43]!==en||M[44]!==J||M[45]!==K||M[46]!==Y?(C=null!=J&&null!=K?(0,r.jsx)("div",{ref:eC,children:(0,r.jsx)(g.A,{showHotkey:Y&&en,language:J,onLanguageChange:K})}):void 0,M[43]=en,M[44]=J,M[45]=K,M[46]=Y,M[47]=C):C=M[47],M[48]!==Q||M[49]!==D||M[50]!==ee||M[51]!==ec||M[52]!==et||M[53]!==S||M[54]!==E||M[55]!==C||M[56]!==F?(N=(0,r.jsx)(m.A.Target,{children:(0,r.jsx)(h.T,{ref:D,placeholder:ee,className:"fs-8",value:F,size:et,autosize:!0,minRows:1,maxRows:4,style:j,"data-testid":Q,onChange:S,onFocus:w,onBlur:_,onKeyDown:E,rightSectionWidth:ec,rightSection:C})}),M[48]=Q,M[49]=D,M[50]=ee,M[51]=ec,M[52]=et,M[53]=S,M[54]=E,M[55]=C,M[56]=F,M[57]=N):N=M[57],M[58]!==W?(k=null!=W&&(0,r.jsx)("div",{className:"d-flex p-2 flex-wrap px-3",children:W}),M[58]=W,M[59]=k):k=M[59],M[60]!==eE||M[61]!==eh||M[62]!==ew||M[63]!==es?(A=ew.length>0&&(0,r.jsxs)("div",{className:"border-top border-dark fs-8 py-2",children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between px-3 mb-2",children:[(0,r.jsx)("div",{className:"me-2 text-light",children:es}),ew.length>10&&(0,r.jsxs)("div",{className:"text-muted",children:["(Showing Top ",10,")"]})]}),ew.slice(0,10).map((e,t)=>{let{value:s,label:n}=e;return(0,r.jsx)("div",{className:`py-2 px-3 ${eh===t?"bg-muted":""}`,role:"button",onMouseOver:()=>{ex(t)},onClick:()=>{eE(s)},children:(0,r.jsx)("span",{className:"me-1",children:n})},s)})]}),M[60]=eE,M[61]=eh,M[62]=ew,M[63]=es,M[64]=A):A=M[64],M[65]!==A?(T=(0,r.jsx)("div",{children:A}),M[65]=A,M[66]=T):T=M[66],M[67]!==H?($=null!=H&&(0,r.jsx)("div",{className:"border-top px-3 pt-2 pb-1 fs-8 d-flex align-items-center text-muted flex-wrap",children:H}),M[67]=H,M[68]=$):$=M[68],M[69]!==e_||M[70]!==ey||M[71]!==ep||M[72]!==ev?(I=ev&&(0,r.jsxs)("div",{className:"border-top border-dark fs-8 py-2",children:[(0,r.jsx)("div",{className:"text-muted fs-8 fw-bold me-1 px-3",children:"Search History:"}),ey.map((e,t)=>{let{value:s,label:n}=e;return(0,r.jsx)(x.N,{className:`d-block w-100 text-start text-muted fw-normal px-3 py-2 fs-8 ${ep===t?"bg-muted":""}`,onMouseOver:()=>eg(t),onClick:()=>e_(s),children:(0,r.jsx)("span",{className:"me-1 text-truncate",children:n})},s)})]}),M[69]=e_,M[70]=ey,M[71]=ep,M[72]=ev,M[73]=I):I=M[73],M[74]!==I?(z=(0,r.jsx)("div",{children:I}),M[74]=I,M[75]=z):z=M[75],M[76]!==k||M[77]!==T||M[78]!==$||M[79]!==z?(L=(0,r.jsxs)(m.A.Dropdown,{className:"p-0",children:[k,T,$,z]}),M[76]=k,M[77]=T,M[78]=$,M[79]=z,M[80]=L):L=M[80],M[81]!==ei||M[82]!==v||M[83]!==N||M[84]!==L?(R=(0,r.jsxs)(m.A,{opened:ei,onChange:el,position:"bottom-start",offset:8,width:"target",withinPortal:!0,closeOnClickOutside:!0,closeOnEscape:!0,styles:v,children:[N,L]}),M[81]=ei,M[82]=v,M[83]=N,M[84]=L,M[85]=R):R=M[85],R}function b(e){return e.item}function y(e){return{value:e,label:e}}var v=s(78550);let j=Date.now();function S(e){let{databaseName:t,tableName:s,connectionId:r}=e;return{connection:r,from:{databaseName:t,tableName:s},timestampValueExpression:"",select:"",where:"",dateRange:[new Date(j-432e5),new Date(j)]}}function w(e){return{value:e,label:e}}function _(e){return null!==e.jsType}class E{formatFieldValue(e){return e.path.join(".")}formatFieldLabel(e){return`${e.path.join(".")} (${e.jsType})`}formatKeyValPair(e,t){return`${e}:"${t}"`}}let C=new E;function N(e){let t,s,u,m,h,x,g,b,y,j,E,N,k,A,T,$,I,z,L,R,M,D,F,O,P,B,V,W,H,q,X,G,K,J,Y,Z,U,Q=(0,n.c)(78);Q[0]!==e?({tableConnection:E,tableConnections:N,placeholder:y,size:j,zIndex:k,language:m,onLanguageChange:h,enableHotkey:u,onSubmit:x,additionalSuggestions:t,queryHistoryType:b,"data-testid":s,...g}=e,Q[0]=e,Q[1]=t,Q[2]=s,Q[3]=u,Q[4]=m,Q[5]=h,Q[6]=x,Q[7]=g,Q[8]=b,Q[9]=y,Q[10]=j,Q[11]=E,Q[12]=N,Q[13]=k):(t=Q[1],s=Q[2],u=Q[3],m=Q[4],h=Q[5],x=Q[6],g=Q[7],b=Q[8],y=Q[9],j=Q[10],E=Q[11],N=Q[12],k=Q[13]);let ee=void 0===y?"Search your events for anything...":y,et=void 0===j?"sm":j,{field:es}=(0,i.as)(g),{onChange:er,value:en}=es,ea=(0,v.Ge)(),ei=(0,a.useRef)(null),[el,eo]=(0,a.useState)(""),ec=E||N;Q[14]!==t||Q[15]!==ec?(A={tableConnection:ec,additionalSuggestions:t},Q[14]=t,Q[15]=ec,Q[16]=A):A=Q[16];let ed=function(e,t,s){let r,i,l,o,c,d,u,m,h,x,g,f,b,y,j=(0,n.c)(39),{tableConnection:E,additionalSuggestions:C}=s;j[0]!==E?(r=E?Array.isArray(E)?E:[E]:[],j[0]=E,j[1]=r):r=j[1];let{data:N}=(0,v.Sh)(r);if(j[2]!==C||j[3]!==N||j[4]!==e){let t=(N??[]).filter(_);i=new Map,l=[...t.map(t=>{let s={value:e.formatFieldValue(t),label:e.formatFieldLabel(t)};return i.set(s.value,t),s}),...C?.map(w)??[]],j[2]=C,j[3]=N,j[4]=e,j[5]=i,j[6]=l}else i=j[5],l=j[6];let k=l;j[7]!==i||j[8]!==k?(o={fieldCompleteOptions:k,fieldCompleteMap:i},j[7]=i,j[8]=k,j[9]=o):o=j[9];let{fieldCompleteOptions:A,fieldCompleteMap:T}=o,[$,I]=(0,a.useState)(null);j[10]!==T||j[11]!==t?(c=()=>{let e=T.get(t);e&&I(e)},d=[T,t],j[10]=T,j[11]=t,j[12]=c,j[13]=d):(c=j[12],d=j[13]),(0,a.useEffect)(c,d),j[14]!==e||j[15]!==$||j[16]!==t?(u=()=>{$&&(t.startsWith(e.formatFieldValue($))||I(null))},m=[$,I,t,e],j[14]=e,j[15]=$,j[16]=t,j[17]=u,j[18]=m):(u=j[17],m=j[18]),(0,a.useEffect)(u,m);let z=Array.isArray(E)?E.length>0?E[0]:void 0:E;j[19]!==z?(h=z??{tableName:"",databaseName:"",connectionId:""},j[19]=z,j[20]=h):h=j[20];let{data:L}=(0,v.n$)(h);j[21]!==L||j[22]!==$?(x=$&&L?[(0,p.uc)($.path,L)]:[],j[21]=L,j[22]=$,j[23]=x):x=j[23];let R=x;j[24]!==E?(g=(0,p.$r)(E).map(S),j[24]=E,j[25]=g):g=j[25];let M=g;j[26]!==M||j[27]!==R?(f={chartConfigs:M,keys:R},j[26]=M,j[27]=R,j[28]=f):f=j[28];let{data:D}=(0,v.nT)(f);e:{let t;if(!D||!$){b=A;break e}if(j[29]!==e||j[30]!==$||j[31]!==D){let s;j[33]!==e||j[34]!==$?(s=t=>t.value.flatMap(t=>{if("string"==typeof t){let s=e.formatKeyValPair(e.formatFieldValue($),t);return[{value:s,label:s}]}if("object"!=typeof t)return[];{let s=[];for(let[r,n]of Object.entries(t)){if("string"!=typeof r||"string"!=typeof n)return console.error("unknown type for autocomplete object ",t),[];let a=structuredClone($);a.path.push(r);let i=e.formatKeyValPair(e.formatFieldValue(a),n);s.push({value:i,label:i})}return s}}),j[33]=e,j[34]=$,j[35]=s):s=j[35],t=D.flatMap(s),j[29]=e,j[30]=$,j[31]=D,j[32]=t}else t=j[32];b=t}let F=b;return j[36]!==A||j[37]!==F?(y=(0,v.Ii)([A,F]),j[36]=A,j[37]=F,j[38]=y):y=j[38],y}(C,null!=en?`${en}`:"",A);Q[17]!==ea||Q[18]!==E||Q[19]!==en?(T=()=>{E&&(0,o.oU)({query:en,tableConnection:E,metadata:ea}).then(e=>{eo(e)})},$=[en,E,ea],Q[17]=ea,Q[18]=E,Q[19]=en,Q[20]=T,Q[21]=$):(T=Q[20],$=Q[21]),(0,a.useEffect)(T,$),Q[22]!==u?(I=()=>{u&&ei.current?.focus()},Q[22]=u,Q[23]=I):I=Q[23],Q[24]===Symbol.for("react.memo_cache_sentinel")?(z={preventDefault:!0},Q[24]=z):z=Q[24],Q[25]!==u?(L=[u],Q[25]=u,Q[26]=L):L=Q[26],(0,l.vC)("/",I,z,L),Q[27]===Symbol.for("react.memo_cache_sentinel")?(R=(0,r.jsx)("div",{className:"text-muted fs-8 fw-bold me-1",children:"Searching for:"}),Q[27]=R):R=Q[27];let eu=""===el?"Matching all events, enter a query to search.":el;return Q[28]!==eu?(M=(0,r.jsxs)(r.Fragment,{children:[R,(0,r.jsx)("div",{className:"text-muted fs-8",children:eu})]}),Q[28]=eu,Q[29]=M):M=Q[29],Q[30]===Symbol.for("react.memo_cache_sentinel")?(D=(0,r.jsx)("div",{className:"me-2 mb-2 text-light",children:"Examples:"}),Q[30]=D):D=Q[30],Q[31]===Symbol.for("react.memo_cache_sentinel")?(F=(0,r.jsx)("span",{className:"me-1",children:"Full Text:"}),Q[31]=F):F=Q[31],Q[32]!==er||Q[33]!==en?(O=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[F,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"my log")},children:"my log"})]}),Q[32]=er,Q[33]=en,Q[34]=O):O=Q[34],Q[35]===Symbol.for("react.memo_cache_sentinel")?(P=(0,r.jsx)("span",{className:"me-1",children:"Substring:"}),Q[35]=P):P=Q[35],Q[36]!==er||Q[37]!==en?(B=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[P,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"*err*")},children:"*err*"})]}),Q[36]=er,Q[37]=en,Q[38]=B):B=Q[38],Q[39]===Symbol.for("react.memo_cache_sentinel")?(V=(0,r.jsx)("span",{className:"me-1",children:"Exact:"}),Q[39]=V):V=Q[39],Q[40]!==er||Q[41]!==en?(W=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[V,(0,r.jsxs)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+'level:"info"')},children:["level:",'"',"info",'"']})]}),Q[40]=er,Q[41]=en,Q[42]=W):W=Q[42],Q[43]===Symbol.for("react.memo_cache_sentinel")?(H=(0,r.jsx)("span",{className:"me-1",children:"Not:"}),Q[43]=H):H=Q[43],Q[44]!==er||Q[45]!==en?(q=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[H,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"-level:info")},children:"-level:info"})]}),Q[44]=er,Q[45]=en,Q[46]=q):q=Q[46],Q[47]===Symbol.for("react.memo_cache_sentinel")?(X=(0,r.jsx)("span",{className:"me-1",children:"Existence:"}),Q[47]=X):X=Q[47],Q[48]!==er||Q[49]!==en?(G=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[X,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"service:*")},children:"service:*"})]}),Q[48]=er,Q[49]=en,Q[50]=G):G=Q[50],Q[51]===Symbol.for("react.memo_cache_sentinel")?(K=(0,r.jsx)("span",{className:"me-1",children:"Boolean:"}),Q[51]=K):K=Q[51],Q[52]!==er||Q[53]!==en?(J=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[K,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+'("foo" OR "bar")')},children:"(foo OR bar)"})]}),Q[52]=er,Q[53]=en,Q[54]=J):J=Q[54],Q[55]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,r.jsx)("a",{className:"text-muted mb-2",target:"_blank",href:"https://clickhouse.com/docs/use-cases/observability/clickstack/search",rel:"noreferrer",children:(0,r.jsxs)(c.Y,{gap:5,children:[(0,r.jsx)(d.A,{size:14}),(0,r.jsx)("span",{children:"Docs"})]})}),Q[55]=Y):Y=Q[55],Q[56]!==O||Q[57]!==B||Q[58]!==W||Q[59]!==q||Q[60]!==G||Q[61]!==J?(Z=(0,r.jsxs)(r.Fragment,{children:[D,O,B,W,q,G,J,Y]}),Q[56]=O,Q[57]=B,Q[58]=W,Q[59]=q,Q[60]=G,Q[61]=J,Q[62]=Z):Z=Q[62],Q[63]!==ed||Q[64]!==s||Q[65]!==u||Q[66]!==m||Q[67]!==er||Q[68]!==h||Q[69]!==x||Q[70]!==ee||Q[71]!==b||Q[72]!==et||Q[73]!==M||Q[74]!==Z||Q[75]!==en||Q[76]!==k?(U=(0,r.jsx)(f,{inputRef:ei,value:en,onChange:er,placeholder:ee,autocompleteOptions:ed,size:et,zIndex:k,language:m,showHotkey:u,onLanguageChange:h,onSubmit:x,queryHistoryType:b,"data-testid":s,aboveSuggestions:M,belowSuggestions:Z}),Q[63]=ed,Q[64]=s,Q[65]=u,Q[66]=m,Q[67]=er,Q[68]=h,Q[69]=x,Q[70]=ee,Q[71]=b,Q[72]=et,Q[73]=M,Q[74]=Z,Q[75]=en,Q[76]=k,Q[77]=U):U=Q[77],U}},45034:(e,t,s)=>{"use strict";s.d(t,{A:()=>F});var r=s(6029),n=s(75155),a=s(55729),i=s(1909),l=s(82641),o=s(96061),c=s(63085),d=s(59029),u=s(18341),m=s(3635),h=s(25062),x=s(34834),p=s(27166),g=s(92556),f=s(43517),b=s(22623),y=s(8737),v=s(53061),j=s(67747),S=s(9385),w=s(6892),_=s(90993),E=s(17283),C=s(94502),N=s(86761),k=s(57478),A=s(64467),T=s(81973),$=s(92917),I=s(53356),z=s.n(I);let L=e=>{let t,s,a,i,l,d=(0,n.c)(13),{children:u,label:m,tooltipText:h,error:x}=e,p=x&&(x.message||(x?.type==="required"?"This field is required":"Error"));return d[0]!==m?(t=(0,r.jsx)(o.p.Label,{children:m}),d[0]=m,d[1]=t):t=d[1],d[2]!==h?(s=h&&(0,r.jsx)(c.m,{label:h,children:(0,r.jsx)(j.A,{size:14,className:"ms-2"})}),d[2]=h,d[3]=s):s=d[3],d[4]!==p?(a=p&&(0,r.jsx)(o.p.Error,{color:"red",size:"sm",children:p}),d[4]=p,d[5]=a):a=d[5],d[6]!==u?(i=(0,r.jsx)("div",{className:"mt-1",children:u}),d[6]=u,d[7]=i):i=d[7],d[8]!==t||d[9]!==s||d[10]!==a||d[11]!==i?(l=(0,r.jsxs)("div",{children:[t,s,a,i]}),d[8]=t,d[9]=s,d[10]=a,d[11]=i,d[12]=l):l=d[12],l},R=e=>{let t,s,o,c,g,f,b,y,v,j,S,w,_,E,C,I,z,R,M,D,F,P,B,V,W,H,q,X,G,K=(0,n.c)(73),{filter:J,isNew:Y,source:Z,onSave:U,onClose:Q,onCancel:ee}=e;K[0]!==J?(t={defaultValues:J},K[0]=J,K[1]=t):t=K[1];let{handleSubmit:et,register:es,formState:er,control:en,reset:ea}=(0,i.mN)(t);K[2]!==J||K[3]!==ea?(s=()=>{ea(J)},o=[J,ea],K[2]=J,K[3]=ea,K[4]=s,K[5]=o):(s=K[4],o=K[5]),(0,a.useEffect)(s,o),K[6]!==en?(c={control:en,name:"source"},K[6]=en,K[7]=c):c=K[7];let ei=(0,i.FH)(c);K[8]!==ei?(g={id:ei},K[8]=ei,K[9]=g):g=K[9];let{data:el}=(0,T.Fo)(g);K[10]!==en?(f={control:en,name:"sourceMetricType"},K[10]=en,K[11]=f):f=K[11];let eo=(0,i.FH)(f);K[12]!==eo||K[13]!==el?(b=el&&(0,$.U6)(el,eo),K[12]=eo,K[13]=el,K[14]=b):b=K[14];let ec=b;K[15]!==el||K[16]!==ec?(y=ec?{connectionId:el.connection,databaseName:el.from.databaseName,tableName:ec}:void 0,K[15]=el,K[16]=ec,K[17]=y):y=K[17];let ed=y,eu=el?.kind===l.GL.Metric;K[18]===Symbol.for("react.memo_cache_sentinel")?(v=Object.values(l.SX),K[18]=v):v=K[18],K[19]!==el?.metricTables?(j=v.filter(e=>el?.metricTables?.[e]),K[19]=el?.metricTables,K[20]=j):j=K[20];let em=j,[eh,ex]=(0,a.useState)(null),ep=Y?"Add filter":"Edit filter";K[21]!==et||K[22]!==U?(S=et(U),K[21]=et,K[22]=U,K[23]=S):S=K[23];let eg=er.errors.name;K[24]!==es?(w=es("name",{required:!0,minLength:1}),K[24]=es,K[25]=w):w=K[25],K[26]!==w?(_=(0,r.jsx)(d.k,{placeholder:"Name","data-testid":"filter-name-input",...w}),K[26]=w,K[27]=_):_=K[27],K[28]!==er.errors.name||K[29]!==_?(E=(0,r.jsx)(L,{label:"Name",error:eg,children:_}),K[28]=er.errors.name,K[29]=_,K[30]=E):E=K[30],K[31]===Symbol.for("react.memo_cache_sentinel")?(C={required:!0},I={withinPortal:!0},K[31]=C,K[32]=I):(C=K[31],I=K[32]),K[33]!==el?(z=(0,r.jsx)(N.A,{source:el,variant:"text"}),K[33]=el,K[34]=z):z=K[34];let ef=!!Z;return K[35]!==en||K[36]!==z||K[37]!==ef?(R=(0,r.jsx)(k.W,{control:en,name:"source","data-testid":"source-selector",rules:C,comboboxProps:I,sourceSchemaPreview:z,disabled:ef}),K[35]=en,K[36]=z,K[37]=ef,K[38]=R):R=K[38],K[39]!==er.errors.source||K[40]!==R?(M=(0,r.jsx)(L,{label:"Data source",tooltipText:"The data source that the filter values are queried from",error:er.errors.source,children:R}),K[39]=er.errors.source,K[40]=R,K[41]=M):M=K[41],K[42]!==en||K[43]!==er.errors.sourceMetricType||K[44]!==em||K[45]!==eu?(D=eu&&(0,r.jsx)(L,{label:"Metric type",tooltipText:"The metric table that the filter values are queried from",error:er.errors.sourceMetricType,children:(0,r.jsx)(i.xI,{control:en,name:"sourceMetricType",rules:{required:!0},render:e=>{let{field:t}=e,{onChange:s,value:n}=t;return(0,r.jsx)(u.s.Group,{value:n,onChange:e=>s(e),withAsterisk:!0,children:(0,r.jsx)(m.Y,{children:em.map(O)})})}})}),K[42]=en,K[43]=er.errors.sourceMetricType,K[44]=em,K[45]=eu,K[46]=D):D=K[46],K[47]===Symbol.for("react.memo_cache_sentinel")?(F={required:!0},K[47]=F):F=K[47],K[48]!==en||K[49]!==eh||K[50]!==ed?(P=(0,r.jsx)(A.Z,{tableConnection:ed,control:en,name:"expression",placeholder:"SQL column or expression",language:"sql",enableHotkey:!0,rules:F,parentRef:eh}),K[48]=en,K[49]=eh,K[50]=ed,K[51]=P):P=K[51],K[52]!==er.errors.expression||K[53]!==P?(B=(0,r.jsx)(L,{label:"Filter expression",tooltipText:"The SQL column or expression to filter on",error:er.errors.expression,children:P}),K[52]=er.errors.expression,K[53]=P,K[54]=B):B=K[54],K[55]!==ee?(V=(0,r.jsx)(h.$,{variant:"secondary",onClick:ee,children:"Cancel"}),K[55]=ee,K[56]=V):V=K[56],K[57]===Symbol.for("react.memo_cache_sentinel")?(W=(0,r.jsx)(h.$,{type:"submit",variant:"primary","data-testid":"save-filter-button",children:"Save filter"}),K[57]=W):W=K[57],K[58]!==V?(H=(0,r.jsxs)(m.Y,{justify:"space-between",my:"xs",children:[V,W]}),K[58]=V,K[59]=H):H=K[59],K[60]!==E||K[61]!==M||K[62]!==D||K[63]!==B||K[64]!==H?(q=(0,r.jsxs)(x.B,{children:[E,M,D,B,H]}),K[60]=E,K[61]=M,K[62]=D,K[63]=B,K[64]=H,K[65]=q):q=K[65],K[66]!==S||K[67]!==q?(X=(0,r.jsx)("div",{ref:ex,children:(0,r.jsx)("form",{onSubmit:S,children:q})}),K[66]=S,K[67]=q,K[68]=X):X=K[68],K[69]!==Q||K[70]!==ep||K[71]!==X?(G=(0,r.jsx)(p.a,{title:ep,opened:!0,onClose:Q,size:"sm",children:X}),K[69]=Q,K[70]=ep,K[71]=X,K[72]=G):G=K[72],G},M=e=>{let t,s,a,i,l,o=(0,n.c)(8),{onCreateFilter:c,onClose:d}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(S.A,{}),s=(0,r.jsx)(g.h,{order:4,children:"No filters yet."}),a=(0,r.jsx)(f.E,{size:"sm",ta:"center",px:"xl",children:"Add filters to let users quickly narrow data on key columns. Saved filters will stay with this dashboard."}),o[0]=t,o[1]=s,o[2]=a):(t=o[0],s=o[1],a=o[2]),o[3]!==c?(i=(0,r.jsxs)(x.B,{align:"center",justify:"center",pt:"lg",pb:"xl","data-testid":"dashboard-filters-empty-state",children:[t,s,a,(0,r.jsx)(h.$,{variant:"primary",onClick:c,"data-testid":"add-filter-button",children:"Add new filter"})]}),o[3]=c,o[4]=i):i=o[4],o[5]!==d||o[6]!==i?(l=(0,r.jsx)(p.a,{opened:!0,onClose:d,size:"sm",children:i}),o[5]=d,o[6]=i,o[7]=l):l=o[7],l},D=e=>{let t,s,a,i,l,o,c,d=(0,n.c)(25),{filters:u,isLoading:g,onEdit:j,onRemove:S,onClose:N,onAddNew:k}=e,{data:A}=(0,T.oE)();if(d[0]!==u||d[1]!==j||d[2]!==S||d[3]!==A){let e;d[5]!==j||d[6]!==S||d[7]!==A?(e=e=>(0,r.jsxs)(b.t,{withBorder:!0,className:z().filterPaper,p:"xs",variant:"muted","data-testid":`dashboard-filter-item-${e.name}`,children:[(0,r.jsxs)(m.Y,{justify:"space-between",className:z().filterHeader,children:[(0,r.jsx)(f.E,{size:"xs",children:e.name}),(0,r.jsxs)(m.Y,{children:[(0,r.jsx)(y.N,{onClick:()=>j(e),className:z().filterActionButton,"data-testid":`edit-filter-button-${e.name}`,children:(0,r.jsx)(w.A,{size:16})}),(0,r.jsx)(y.N,{onClick:()=>S(e.id),className:`${z().filterActionButton} ${z().deleteButton}`,"data-testid":`delete-filter-button-${e.name}`,children:(0,r.jsx)(_.A,{size:16})})]})]}),(0,r.jsxs)(m.Y,{gap:"xs",children:[(0,r.jsx)(E.A,{size:14}),(0,r.jsx)(f.E,{size:"xs",children:A?.find(t=>t.id===e.source)?.name})]})]},e.id),d[5]=j,d[6]=S,d[7]=A,d[8]=e):e=d[8],t=u.map(e),d[0]=u,d[1]=j,d[2]=S,d[3]=A,d[4]=t}else t=d[4];return d[9]!==g?(s=g&&(0,r.jsx)(v.o,{children:(0,r.jsx)(C.A,{className:"spin-animate"})}),d[9]=g,d[10]=s):s=d[10],d[11]!==t||d[12]!==s?(a=(0,r.jsxs)(x.B,{className:z().filtersContainer,gap:"xs","data-testid":"dashboard-filters-list",children:[t,s]}),d[11]=t,d[12]=s,d[13]=a):a=d[13],d[14]!==N?(i=(0,r.jsx)(h.$,{variant:"secondary",onClick:N,"data-testid":"close-filters-button",children:"Close"}),d[14]=N,d[15]=i):i=d[15],d[16]!==k?(l=(0,r.jsx)(h.$,{variant:"primary",onClick:k,"data-testid":"add-filter-button",children:"Add new filter"}),d[16]=k,d[17]=l):l=d[17],d[18]!==i||d[19]!==l?(o=(0,r.jsxs)(m.Y,{justify:"space-between",my:"sm",children:[i,l]}),d[18]=i,d[19]=l,d[20]=o):o=d[20],d[21]!==N||d[22]!==a||d[23]!==o?(c=(0,r.jsxs)(p.a,{opened:!0,onClose:N,title:"Filters",size:"sm",className:z().modal,children:[a,o]}),d[21]=N,d[22]=a,d[23]=o,d[24]=c):c=d[24],c},F=e=>{let t,s,i,l,o,c=(0,n.c)(27),{opened:d,filters:u,isLoading:m,source:h,onClose:x,onSaveFilter:p,onRemoveFilter:g}=e,[f,b]=(0,a.useState)();c[0]!==d?(t=()=>{d&&b(void 0)},s=[d],c[0]=d,c[1]=t,c[2]=s):(t=c[1],s=c[2]),(0,a.useEffect)(t,s),c[3]!==u||c[4]!==g||c[5]!==f?.id?(i=e=>{e===f?.id&&b(u.find(t=>t.id!==e)),g(e)},c[3]=u,c[4]=g,c[5]=f?.id,c[6]=i):i=c[6];let y=i;c[7]!==h?.id?(l=()=>{b({id:"new",type:"QUERY_EXPRESSION",name:"",expression:"",source:h?.id??""})},c[7]=h?.id,c[8]=l):l=c[8];let v=l;c[9]!==p?(o=e=>{b(void 0),"new"===e.id?p({...e,id:crypto.randomUUID()}):p(e)},c[9]=p,c[10]=o):o=c[10];let j=o,S=!f&&0===u.length;if(!d)return null;if(S){let e;return c[11]!==v||c[12]!==x?(e=(0,r.jsx)(M,{onCreateFilter:v,onClose:x}),c[11]=v,c[12]=x,c[13]=e):e=c[13],e}if(f){let e,t;c[14]===Symbol.for("react.memo_cache_sentinel")?(e=()=>b(void 0),c[14]=e):e=c[14];let s="new"===f.id;return c[15]!==j||c[16]!==x||c[17]!==f||c[18]!==h||c[19]!==s?(t=(0,r.jsx)(R,{filter:f,onSave:j,onCancel:e,onClose:x,isNew:s,source:h}),c[15]=j,c[16]=x,c[17]=f,c[18]=h,c[19]=s,c[20]=t):t=c[20],t}{let e;return c[21]!==u||c[22]!==v||c[23]!==y||c[24]!==m||c[25]!==x?(e=(0,r.jsx)(D,{filters:u,onEdit:b,onRemove:y,onClose:x,onAddNew:v,isLoading:m}),c[21]=u,c[22]=v,c[23]=y,c[24]=m,c[25]=x,c[26]=e):e=c[26],e}};function O(e){return(0,r.jsx)(u.s,{value:e,label:e},e)}},46061:(e,t,s)=>{"use strict";s.d(t,{rD:()=>eB,Ho:()=>eO,YB:()=>eP});var r=s(6029),n=s(75155),a=s(55729),i=s(75828),l=s.n(i),o=s(92799),c=s(84450),d=s.n(c),u=s(90310),m=s.n(u),h=s(67264),x=s.n(h),p=s(66692),g=s(2893),f=s(47122),b=s(14693),y=s(31292),v=s(40684),j=s(92205),S=s(35467),w=s(76089),_=s(27166),E=s(78253),C=s(60481),N=s(3635),k=s(8737),A=s(63085),T=s(43517),$=s(24589),I=s(94502),z=s(73454),L=s(6620),R=s(38314),M=s(24602),D=s(40387),F=s(95316),O=s(12482),P=s(39696),B=s(79220),V=s(21440),W=s(6876),H=s(61410),q=s(91021),X=s(55024),G=s(78550),K=s(78744),J=s(31451),Y=s(70727),Z=s(39785),U=s(81973),Q=s(68593),ee=s(7565),et=s(57820),es=s(92917),er=s(37659),en=s(78341),ea=s(45172),ei=s(9385),el=s(96413),eo=s(50374),ec=s(90515),ed=s(74620),eu=s.n(ed);let em=e=>{let t,s,a,i,o,c=(0,n.c)(19),{onClick:d,className:u,title:m,tabIndex:h,children:x,variant:p,isActive:g,iconSize:f}=e,b=void 0===h?-1:h,y=void 0===p?"default":p,v=void 0!==g&&g,j=void 0===f?14:f;c[0]!==d?(t=e=>{e.stopPropagation(),e.preventDefault(),d(e)},c[0]=d,c[1]=t):t=c[1];let S=t;c[2]!==u||c[3]!==v||c[4]!==y?(s="copy"===y?l()(eu().iconActionButton,{[eu().copied]:v}):u,c[2]=u,c[3]=v,c[4]=y,c[5]=s):s=c[5];let w=s,_=!m;return c[6]!==x||c[7]!==j||c[8]!==v?(a=v?(0,r.jsx)(ec.A,{size:j}):x,c[6]=x,c[7]=j,c[8]=v,c[9]=a):a=c[9],c[10]!==w||c[11]!==S||c[12]!==a||c[13]!==b?(i=(0,r.jsx)(k.N,{onClick:S,component:"div",className:w,tabIndex:b,role:"button",children:a}),c[10]=w,c[11]=S,c[12]=a,c[13]=b,c[14]=i):i=c[14],c[15]!==_||c[16]!==i||c[17]!==m?(o=(0,r.jsx)(A.m,{label:m,position:"top",withArrow:!0,disabled:_,openDelay:300,closeDelay:100,fz:"xs",children:i}),c[15]=_,c[16]=i,c[17]=m,c[18]=o):o=c[18],o},eh=({children:e,cellValue:t,tableContainerRef:s,wrapLinesEnabled:n,columnName:i,isChart:o=!1})=>{let[c,{close:d,open:u}]=(0,en.j)(!1),[m,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)(!1),g=(0,a.useRef)(void 0),f=(0,a.useRef)(void 0);(0,a.useEffect)(()=>()=>{g.current&&clearTimeout(g.current),f.current&&clearTimeout(f.current)},[]);let{onPropertyAddClick:b}=(0,a.useContext)(eo.D),y=i&&b&&null!=t,v=()=>{x||(g.current&&clearTimeout(g.current),u())},j=()=>{g.current=setTimeout(()=>{d()},100)},S=()=>{d(),p(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{p(!1)},1e3)},w=async()=>{try{let e="string"==typeof t?t:String(t??"");await navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)}catch(e){console.error("Failed to copy to clipboard:",e)}},_=y?3:1;return o?(0,r.jsx)("div",{className:l()(eu().fieldText,{[eu().chart]:o}),style:{display:"flex",alignItems:"center"},children:e}):(0,r.jsx)("div",{className:l()(eu().fieldText,{[eu().truncated]:!n&&!o,[eu().wrapped]:n,[eu().chart]:o}),children:(0,r.jsxs)(er.A,{width:20*_+4*(_-1),position:"top-start",offset:5,opened:c,portalProps:{target:s??void 0},closeOnClickOutside:!1,clickOutsideEvents:[],children:[(0,r.jsx)(er.A.Target,{children:(0,r.jsx)("span",{onMouseEnter:v,onMouseLeave:j,onClick:S,tabIndex:-1,"aria-hidden":"true",style:{cursor:"pointer"},children:e})}),(0,r.jsx)(er.A.Dropdown,{style:{pointerEvents:"auto"},onMouseEnter:v,onMouseLeave:j,className:eu().fieldTextPopover,children:(0,r.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,r.jsx)(em,{onClick:w,variant:"copy",isActive:m,title:m?"Copied!":"Copy field value",children:(0,r.jsx)(ea.A,{size:14})}),y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(em,{onClick:()=>{y&&(b(i,"string"==typeof t?t:String(t??""),"include"),S())},variant:"copy",title:"Toggle filter for this value",children:(0,r.jsx)(ei.A,{size:14})}),(0,r.jsx)(em,{onClick:()=>{y&&(b(i,"string"==typeof t?t:String(t??""),"exclude"),S())},variant:"copy",title:"Exclude this value",children:(0,r.jsx)(el.A,{size:14})})]})]})})]})})};var ex=s(56795);let ep=({row:e,getRowWhere:t,sourceId:s,isWrapped:n,onToggleWrap:i})=>{let[l,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),u=async()=>{try{let{[Y.ZO.ID]:t,...s}=e,r=Object.entries(s).reduce((e,[t,s])=>{if("string"==typeof s&&s.startsWith("{")||s.startsWith("["))try{e[t]=JSON.parse(s)}catch{e[t]=s}else e[t]=s;return e},{}),n=JSON.stringify(r,null,2);await navigator.clipboard.writeText(n),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy row data to clipboard:",e)}},m=async()=>{try{let r=t(e),n=new URL(window.location.href);n.searchParams.set("rowWhere",r.where),s&&n.searchParams.set("rowSource",s),await navigator.clipboard.writeText(n.toString()),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error("Failed to copy URL to clipboard:",e)}};return(0,r.jsxs)("div",{className:eu().rowButtons,children:[!n&&(0,r.jsx)(em,{onClick:i,variant:"copy",title:"Wrap All Lines",children:(0,r.jsx)(M.A,{size:16})}),(0,r.jsx)(em,{onClick:u,variant:"copy",isActive:l,title:l?"Copied entire row as JSON!":"Copy entire row as JSON",children:(0,r.jsx)(ea.A,{size:16})}),(0,r.jsx)(em,{onClick:m,variant:"copy",isActive:c,title:c?"Copied shareable link!":"Copy shareable link to this specific row",children:(0,r.jsx)(ex.A,{size:16})})]})};var eg=s(48423),ef=s(22623),eb=s(59029),ey=s(74011),ev=s(97767),ej=s(67872);let eS=({searchQuery:e,onSearchChange:t,matchIndices:s,currentMatchIndex:n,onPreviousMatch:i,onNextMatch:l,isVisible:o,onVisibilityChange:c,containerRef:d})=>{let[u,m]=(0,a.useState)(!1),h=(0,a.useRef)(null),x=o??u,p=(0,a.useCallback)(()=>{void 0!==o?c?.(!1):m(!1),t("")},[o,t,c]),g=(0,a.useCallback)(()=>{void 0!==o?c?.(!0):m(!0),setTimeout(()=>{h.current?.focus(),h.current?.select()},0)},[o,c]),f=(0,a.useCallback)(e=>{if((e.metaKey||e.ctrlKey)&&"f"===e.key){if(d&&!(0,es.dS)(d))return;e.preventDefault(),g()}"Escape"===e.key&&x&&p()},[x,p,g]);(0,a.useEffect)(()=>(window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}),[f]);let b=(0,a.useCallback)(e=>{"Enter"===e.key&&s.length>0&&(e.shiftKey?i():l(),e.preventDefault())},[s.length,i,l]);return x?(0,r.jsx)(ef.t,{p:"xs",withBorder:!0,shadow:"md",pos:"absolute",top:8,right:8,style:{zIndex:2},miw:400,maw:500,role:"search","aria-label":"Table search",children:(0,r.jsxs)(N.Y,{gap:"xs",align:"center",wrap:"nowrap",children:[(0,r.jsx)(eb.k,{ref:h,placeholder:"Find in table...",value:e,onChange:e=>t(e.target.value),onKeyDown:b,size:"xs",style:{flex:1,minWidth:0},"aria-label":"Search table contents","aria-describedby":s.length>0?"search-match-count":void 0,rightSection:e?(0,r.jsx)(k.N,{onClick:()=>t(""),display:"flex",style:{alignItems:"center"},title:"Clear search","aria-label":"Clear search",children:(0,r.jsx)(ey.A,{size:14})}):null}),s.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(T.E,{id:"search-match-count",size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},"aria-live":"polite",children:[n+1," of ",s.length]}),(0,r.jsxs)(N.Y,{gap:4,children:[(0,r.jsx)(k.N,{onClick:i,display:"flex",style:{alignItems:"center"},title:"Previous match (Shift+Enter)","aria-label":"Previous match",children:(0,r.jsx)(ev.A,{size:16})}),(0,r.jsx)(k.N,{onClick:l,display:"flex",style:{alignItems:"center"},title:"Next match (Enter)","aria-label":"Next match",children:(0,r.jsx)(ej.A,{size:16})})]})]}):e?(0,r.jsx)(T.E,{size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},role:"status","aria-live":"polite",children:"No matches"}):null,(0,r.jsx)(k.N,{onClick:p,display:"flex",style:{alignItems:"center"},title:"Close search (Esc)","aria-label":"Close search",children:(0,r.jsx)(ey.A,{size:16})})]})}):null},ew=e=>{let t,s,a,i=(0,n.c)(17),{searchQuery:l,matchIndices:o,currentMatchIndex:c,dedupedRows:d,tableRows:u,getRowId:m,onMatchClick:h}=e;if(!l||0===o.length||0===u.length)return null;if(i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",zIndex:1},i[0]=t):t=i[0],i[1]!==c||i[2]!==d||i[3]!==m||i[4]!==o||i[5]!==h||i[6]!==u){let e;i[8]!==c||i[9]!==d||i[10]!==m||i[11]!==o.length||i[12]!==h||i[13]!==u?(e=(e,t)=>{let s=d[e];if(!s)return null;let n=u.findIndex(e=>m(e.original)===m(s));if(-1===n)return null;let a=n/u.length*100,i=100/u.length,l=t===c;return(0,r.jsx)(C.a,{pos:"absolute",top:`${a}%`,right:0,w:"100%",h:`${i}%`,bg:l?"var(--mantine-color-orange-5)":"var(--mantine-color-yellow-5)",style:{cursor:"pointer",pointerEvents:"auto",minHeight:1,maxHeight:4},onClick:()=>h(t),title:`Match ${t+1} of ${o.length}`},`match-indicator-${e}`)},i[8]=c,i[9]=d,i[10]=m,i[11]=o.length,i[12]=h,i[13]=u,i[14]=e):e=i[14],s=o.map(e),i[1]=c,i[2]=d,i[3]=m,i[4]=o,i[5]=h,i[6]=u,i[7]=s}else s=i[7];return i[15]!==s?(a=(0,r.jsx)(C.a,{pos:"absolute",right:0,top:0,bottom:0,w:8,style:t,children:s}),i[15]=s,i[16]=a):a=i[16],a};var e_=s(88339),eE=s(17421),eC=s(41038),eN=s(81055),ek=s(70114);let eA=(0,a.memo)(e=>{let t,s,a,i,o,c=(0,n.c)(17),{columnsLength:d,children:u,virtualKey:m,source:h,rowId:x,measureElement:p,virtualIndex:g}=e,f=(()=>{let e,t=(0,n.c)(3),[,s]=(0,eC.ZA)("rowWhere"),[,r]=(0,eC.ZA)("rowSource");return t[0]!==s||t[1]!==r?(e=(e,t)=>{s(e),r(t??null)},t[0]=s,t[1]=r,t[2]=e):e=t[2],e})(),b=`expanded-row-${x}`,y=`${m}-expanded`;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=l()("mx-2 mb-2 rounded",eu().expandedRowContent),c[0]=t):t=c[0],c[1]!==f||c[2]!==x||c[3]!==h?.id?(s=f&&(0,r.jsx)("button",{type:"button",className:l()("position-absolute top-0 end-0 mt-1 me-1 p-1 border-0 bg-transparent text-muted rounded",eu().expandButton),onClick:()=>f(x,h?.id),title:"Open in sidebar","aria-label":"Open in sidebar",style:{zIndex:1,fontSize:"12px",lineHeight:1},children:(0,r.jsx)(eN.A,{size:14})}),c[1]=f,c[2]=x,c[3]=h?.id,c[4]=s):s=c[4],c[5]!==u||c[6]!==s?(a=(0,r.jsx)("div",{className:t,children:(0,r.jsx)("div",{className:"position-relative",children:(0,r.jsxs)("div",{className:"px-3 pt-2 position-relative",children:[s,u]})})}),c[5]=u,c[6]=s,c[7]=a):a=c[7],c[8]!==d||c[9]!==a?(i=(0,r.jsx)("td",{colSpan:d,className:"p-0 border-0",children:a}),c[8]=d,c[9]=a,c[10]=i):i=c[10],c[11]!==p||c[12]!==b||c[13]!==y||c[14]!==i||c[15]!==g?(o=(0,r.jsx)("tr",{"data-testid":b,className:eu().expandedRow,"data-index":g,ref:p,children:i},y),c[11]=p,c[12]=b,c[13]=y,c[14]=i,c[15]=g,c[16]=o):o=c[16],o}),eT=(0,a.memo)(e=>{let t,s,a,i,o,c,d=(0,n.c)(16),{rowId:u,isExpanded:m,highlightedLineId:h,toggleRowExpansion:x}=e,p=h===u,g=h!==u;d[0]!==m||d[1]!==p||d[2]!==g?(t=l()(eu().expandButton,{[eu().expanded]:m,"text-brand":p,"text-muted":g}),d[0]=m,d[1]=p,d[2]=g,d[3]=t):t=d[3],d[4]!==u||d[5]!==x?(s=e=>{e.stopPropagation(),x(u)},d[4]=u,d[5]=x,d[6]=s):s=d[6];let f=`${m?"Collapse":"Expand"} log details`;return d[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(ek.A,{size:16}),d[7]=a):a=d[7],d[8]!==m||d[9]!==t||d[10]!==s||d[11]!==f?(i=(0,r.jsx)("button",{type:"button",className:t,onClick:s,"aria-expanded":m,"aria-label":f,children:a}),d[8]=m,d[9]=t,d[10]=s,d[11]=f,d[12]=i):i=d[12],d[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("span",{className:eu().expandButtonSeparator}),d[13]=o):o=d[13],d[14]!==i?(c=(0,r.jsxs)("span",{className:"d-flex align-items-center justify-content-center",children:[i,o]}),d[14]=i,d[15]=c):c=d[15],c});eT.displayName="ExpandButton";var e$=s(61629);let eI="NULL",ez={duration:e=>e.duration>=0?e.duration:eI,severityText:e=>e.severityText??e.statusCode,default:(e,t)=>e[t]},eL=e=>e[Y.ZO.ID];function eR(e,t){return(ez[e]??ez.default)(t,e)}let eM=()=>null,eD=e=>{let t,s,a,i,l,o,c,d,u,m,h=(0,n.c)(17),{data:x,dateRange:p,color:S}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={position:"relative",width:"100%",height:"100%"},s={position:"absolute",left:0,right:0,bottom:0,top:0},h[0]=t,h[1]=s):(t=h[0],s=h[1]),h[2]===Symbol.for("react.memo_cache_sentinel")?(a={top:4,left:0,right:4,bottom:0},h[2]=a):a=h[2];let w=p[0].getTime()/1e3,_=p[1].getTime()/1e3;h[3]!==w||h[4]!==_?(i=[w,_],h[3]=w,h[4]=_,h[5]=i):i=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(l={fontSize:12,fontFamily:"IBM Plex Mono, monospace"},h[6]=l):l=h[6],h[7]!==i?(o=(0,r.jsx)(g.W,{dataKey:"bucket",domain:i,interval:"preserveStartEnd",scale:"time",type:"number",tickFormatter:eV,minTickGap:50,tick:l}),h[7]=i,h[8]=o):o=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(f.h,{width:40,minTickGap:25,tickFormatter:eW,tick:{fontSize:12,fontFamily:"IBM Plex Mono, monospace"}}),h[9]=c):c=h[9];let E=S||es.lm[0];return h[10]!==E?(d=(0,r.jsx)(b.y,{isAnimationActive:!1,dataKey:"count",stackId:"a",fill:E,maxBarSize:24}),h[10]=E,h[11]=d):d=h[11],h[12]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)(y.m,{content:(0,r.jsx)(eM,{})}),h[12]=u):u=h[12],h[13]!==x||h[14]!==d||h[15]!==o?(m=(0,r.jsx)("div",{style:t,children:(0,r.jsx)("div",{style:s,children:(0,r.jsx)(v.u,{width:"100%",height:"100%",minWidth:0,children:(0,r.jsxs)(j.E,{width:500,height:300,data:x,syncId:"hdx",syncMethod:"value",margin:a,children:[o,c,d,u]})})})}),h[13]=x,h[14]=d,h[15]=o,h[16]=m):m=h[16],m},eF=e=>{let t,s,a,i,l=(0,n.c)(12),{opened:o,onClose:c,config:d}=e;l[0]!==d?(t=["SqlModal",d],l[0]=d,l[1]=t):t=l[1],l[2]!==o||l[3]!==t?(s={queryKey:t,placeholderData:eH,enabled:o},l[2]=o,l[3]=t,l[4]=s):s=l[4];let{data:u,isLoading:m}=(0,q.zu)(d,s);return l[5]!==m||l[6]!==u?(a=u?(0,r.jsx)(e_.V,{data:u,enableCopy:!0}):m?(0,r.jsxs)("div",{className:"text-center my-2",children:[(0,r.jsx)("div",{className:"d-inline-block me-2",children:(0,r.jsx)(I.A,{size:14,className:"spin-animate"})}),"Loading SQL..."]}):(0,r.jsx)("div",{className:"text-center my-2",children:"No SQL available"}),l[5]=m,l[6]=u,l[7]=a):a=l[7],l[8]!==c||l[9]!==o||l[10]!==a?(i=(0,r.jsx)(_.a,{opened:o,onClose:c,title:"Generated SQL",size:"auto",children:a}),l[8]=c,l[9]=o,l[10]=a,l[11]=i):i=l[11],i},eO=(0,a.memo)(({tableId:e,displayedColumns:t,fetchNextPage:s,hasNextPage:i,highlightedLineId:c,isLive:u,isLoading:h,rows:x,generateRowId:g,onInstructionsClick:f,onRowDetailsClick:b,onScroll:y,onSettingsClick:v,onShowPatternsClick:j,wrapLines:w=!1,columnNameMap:_,showServiceColumn:O=!0,dedupRows:W,isError:H,error:G,columnTypeMap:K,dateRange:J,loadingDate:U,config:er,onChildModalOpen:en,renderRowDetails:ea,source:ei,onExpandedRowsChange:el,collapseAllRows:eo,enableSorting:ec=!1,onSortingChange:ed,sortOrder:em,showExpandButton:ex=!0,getRowWhere:ef,variant:eb="default"})=>{let ey=(0,a.useMemo)(()=>{let e=new Set;return(W?x.filter(t=>{let s=g(t);return!e.has(s.where)&&(e.add(s.where),!0)}):x).map(e=>{let t=g(e);return{...e,[Y.ZO.ID]:t.where,[Y.ZO.ALIAS_WITH]:t.aliasWith}})},[x,W,g]),ev=(0,a.useCallback)(e=>{b?.(e)},[b]),{userPreferences:{isUTC:ej}}=(0,et.HW)(),[eC,eN]=(0,es.Mj)(`${e}-column-sizes`,{}),[ek,ez]=(0,a.useState)(null),eM=(0,a.useCallback)(e=>(e&&ez(e),()=>{ez(null)}),[]),{data:eO}=(0,q.Kc)(er),eP=(0,es.ZC)(u);(0,a.useEffect)(()=>{u&&!1===eP&&null!=ek&&(ek.scrollTop=0)},[u,eP,ek]);let eB=(0,a.useMemo)(()=>(function(e){let t={},s=Math.min(e.length,100);for(let r=0;r<s;r++){let s=e[r];Object.keys(s).forEach(e=>{let r=s[e];(r?.length||0)>0&&512>(r?.length||0)&&d()(r)&&null!=(0,es.lO)(r)&&(t[e]=(t[e]??0)+1)})}let r=0,n="";for(let[e,s]of Object.entries(t))s>r&&(r=s,n=e);if(r>0)return n})(ey),[ey]),{csvData:eV,maxRows:eW,isLimited:eH}=(0,X.u)(ey,t.map(e=>({dataKey:e,displayName:_?.[e]??e}))),{expandedRows:eq,toggleRowExpansion:eX,collapseAllRows:eG}=(e=>{let t,s,r,i,l=(0,n.c)(9);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={},l[0]=t):t=l[0];let[o,c]=(0,a.useState)(t);l[1]!==e?(s=t=>{c(s=>{let r={...s,[t]:!s[t]},n=Object.values(r).some(Boolean);return e?.(n),r})},l[1]=e,l[2]=s):s=l[2];let d=s;l[3]!==e?(r=()=>{c({}),e?.(!1)},l[3]=e,l[4]=r):r=l[4];let u=r;return l[5]!==u||l[6]!==o||l[7]!==d?(i={expandedRows:o,toggleRowExpansion:d,collapseAllRows:u},l[5]=u,l[6]=o,l[7]=d,l[8]=i):i=l[8],i})(el);(0,a.useEffect)(()=>{eo&&eG()},[eo,eG]);let eK=function({rows:e,searchableColumns:t,debounceMs:s=300,onVisibilityChange:r}){let[n,i]=(0,a.useState)(""),[l]=(0,Z.o)(n,s),[o,c]=(0,a.useState)(0),[d,u]=(0,a.useState)([]),[m,h]=(0,a.useState)(!1),x=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(!l.trim()){u([]),c(0);return}let s=l.toLowerCase(),r=[];e.forEach((e,n)=>{t.map(t=>{let s=e[t];return null!=s?String(s).toLowerCase():""}).join(" ").includes(s)&&r.push(n)});let n=d.length;u(r),0===n&&r.length>0?(c(0),x.current=!0):r.length>0&&o>=r.length&&(c(r.length-1),x.current=!0)},[l,e,t]),(0,a.useEffect)(()=>{r?.(m)},[m,r]);let p=(0,a.useCallback)(e=>{i(e),e||(u([]),c(0),x.current=!1)},[]),g=(0,a.useCallback)(()=>{x.current=!0,c(e=>e>0?e-1:d.length-1)},[d.length]),f=(0,a.useCallback)(()=>{x.current=!0,c(e=>e<d.length-1?e+1:0)},[d.length]),b=(0,a.useCallback)(e=>{x.current=!0,c(e)},[]),y=(0,a.useCallback)(()=>{i(""),u([]),c(0),x.current=!1,h(!1)},[]),v=(0,a.useCallback)(()=>{x.current=!1},[]);return{searchQuery:l,inputValue:n,setInputValue:i,matchIndices:d,currentMatchIndex:o,isSearchVisible:m,setIsSearchVisible:h,shouldScrollToMatch:x.current,clearShouldScrollToMatch:v,handlePreviousMatch:g,handleNextMatch:f,handleMatchClick:b,handleSearchChange:p,resetSearch:y}}({rows:ey,searchableColumns:t,debounceMs:300}),eJ=(0,a.useMemo)(()=>[...ex?[{id:"expand-btn",accessorKey:Y.ZO.ID,header:()=>"",cell:e=>{let t=e.getValue(),s=eq[t]??!1;return(0,r.jsx)(eT,{rowId:t,isExpanded:s,highlightedLineId:c,toggleRowExpansion:eX})},size:32,enableResizing:!1,enableSorting:!1,meta:{className:"text-center"}}]:[],...t.map((e,s)=>{let n=K.get(e)?._type,a=n===S.A2.Date,i=e===eB;return{meta:{column:e,jsColumnType:n},id:eO?.[e]?`"${e}"`:e,enableSorting:n!==S.A2.Dynamic,accessorFn:m()(eR)(e),header:`${_?.[e]??e}${a?ej?" (UTC)":" (Local)":""}`,cell:t=>{let s=t.getValue();if("__hdx_pattern_trend"===e)return(0,r.jsx)("div",{style:{height:50,width:"100%"},children:(0,r.jsx)(eD,{data:s.data,dateRange:s.dateRange,color:(0,es.aw)(t.row.original.severityText??t.row.original.statusCode)})});if(a){let e=new Date(s);return(0,r.jsx)("span",{className:"text-muted",children:(0,r.jsx)(ee.H,{value:e,format:"withMs"})})}let n="string"==typeof s?s:`${s}`;if(e===eB)return(0,r.jsx)(e$.A,{level:n});let i=n.length>500?`${n.slice(0,500)}...`:n,o=!!eK.searchQuery&&eK.matchIndices.length>0&&eK.matchIndices[eK.currentMatchIndex]===t.row.index,c=eK.searchQuery?((e,t,s={})=>{if(!t.trim())return e;let n=s.isCurrentMatch?s.currentMatchBackgroundColor||"var(--mantine-color-orange-5)":s.backgroundColor||"var(--mantine-color-yellow-3)",a=e.toLowerCase(),i=t.toLowerCase(),l=[],o=0,c=a.indexOf(i);for(;-1!==c;)c>o&&l.push(e.slice(o,c)),l.push((0,r.jsx)("mark",{style:{backgroundColor:n,color:s.textColor||"var(--color-text-inverted)",padding:0},children:e.slice(c,c+t.length)},`${c}-${o}`)),o=c+t.length,c=a.indexOf(i,o);return o<e.length&&l.push(e.slice(o)),l.length>0?(0,r.jsx)(r.Fragment,{children:l}):e})(i,eK.searchQuery,{isCurrentMatch:o}):i;return(0,r.jsx)("span",{className:l()({"text-muted":s===eI}),children:c})},size:s===t.length-1?Q.k:eC[e]??(a?170:i?115:160)}})],[ej,c,t,eC,_,K,eB,eq,eX,ex,eO,eK.searchQuery,eK.matchIndices,eK.currentMatchIndex]),eY=(0,a.useCallback)(e=>{if(e){let{scrollHeight:t,scrollTop:r,clientHeight:n}=e;t-r-n<500&&!h&&i&&s?.({cancelRefetch:!1})}},[s,h,i]);(0,a.useEffect)(()=>{eY(ek)},[eY,ek]);let eZ=(0,a.useMemo)(()=>{let t={data:ey,columns:eJ,getCoreRowModel:(0,P.HT)(),enableSorting:ec,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(em??[]);ed?.(t??null)}else ed?.(e??null)},state:{sorting:em??[]},enableColumnResizing:!0,columnResizeMode:"onChange"};return e?{...t,state:{columnSizing:eC},onColumnSizingChange:e=>{let t=e instanceof Function?e():e;eN({...eC,...t})}}:t},[eJ,ey,e,em,ec,ed,eC,eN]),eU=(0,B.N4)(eZ),{rows:eQ}=eU.getRowModel(),e0=(0,V.Te)({count:eQ.length,getScrollElement:(0,a.useCallback)(()=>ek,[ek]),estimateSize:(0,a.useCallback)(()=>23,[]),overscan:30,paddingEnd:20}),e1=e0.getVirtualItems(),e2=e0.getTotalSize(),[e3,e5]=(0,a.useMemo)(()=>e1.length>0?[Math.max(0,e1[0].start-e0.options.scrollMargin),Math.max(0,e2-e1[e1.length-1].end)]:[0,0],[e1,e0.options.scrollMargin,e2]),[e4,e6]=(0,a.useState)(!1),[e7,e8]=(0,es.Mj)(`${e}-wrap-lines`,w??!1),[e9,te]=(0,a.useState)(!1),tt=e=>{te(e),en?.(e)};(0,a.useEffect)(()=>{if(eK.shouldScrollToMatch)if(eK.matchIndices.length>0&&e0&&eK.currentMatchIndex<eK.matchIndices.length&&eK.searchQuery.trim()){let e=ey[eK.matchIndices[eK.currentMatchIndex]];if(e){let t=eQ.findIndex(t=>eL(t.original)===eL(e));-1!==t?requestAnimationFrame(()=>{e0.scrollToIndex(t,{align:"center"}),eK.clearShouldScrollToMatch()}):eK.clearShouldScrollToMatch()}else eK.clearShouldScrollToMatch()}else eK.clearShouldScrollToMatch()},[eK.shouldScrollToMatch,eK.currentMatchIndex,eK.matchIndices,eK.searchQuery,eK.clearShouldScrollToMatch,e0,eQ,ey]),(0,a.useEffect)(()=>{if(e4||!c||null==e0)return;let e=ey.findIndex(e=>eL(e)===c);-1==e&&c?ey.length<1e3&&!h&&i&&s?.({cancelRefetch:!1}):(e6(!0),null==e0.getVirtualItems().find(t=>t.index===e)&&e0.scrollToIndex(e,{align:"center"}))},[ey,c,s,e0,e4,h,i]);let ts=(0,a.useCallback)(e=>{if(null==c)return;let t=ey.findIndex(e=>eL(e)===c)+e;t<0||t>=ey.length||ev(ey[t])},[c,ev,ey]);return(0,p.vC)(["ArrowRight","ArrowDown","j"],e=>{e.preventDefault(),ts(1)}),(0,p.vC)(["ArrowLeft","ArrowUp","k"],e=>{e.preventDefault(),ts(-1)}),(0,r.jsx)(E.s,{direction:"column",h:"100%",children:(0,r.jsxs)(C.a,{pos:"relative",style:{flex:1,minHeight:0},children:[(0,r.jsx)(eS,{searchQuery:eK.inputValue,onSearchChange:eK.handleSearchChange,matchIndices:eK.matchIndices,currentMatchIndex:eK.currentMatchIndex,onPreviousMatch:eK.handlePreviousMatch,onNextMatch:eK.handleNextMatch,isVisible:eK.isSearchVisible,onVisibilityChange:eK.setIsSearchVisible,containerRef:ek}),(0,r.jsxs)("div",{"data-testid":"search-results-table",className:l()("overflow-auto h-100 fs-8",eu().tableWrapper,{[eu().muted]:"muted"===eb}),onScroll:e=>{if(eY(e.target),null!=e.target){let{scrollTop:t}=e.target;y?.(t)}},ref:eM,children:[er&&(0,r.jsx)(eF,{opened:e9,onClose:()=>tt(!1),config:er}),(0,r.jsxs)("table",{className:l()("w-100",eu().table),id:e,children:[(0,r.jsx)("thead",{className:eu().tableHead,children:t.length>0&&eU.getHeaderGroups().map(t=>(0,r.jsx)("tr",{children:t.headers.map((s,n)=>{let a=n===t.headers.length-1;return(0,r.jsx)(eg.A,{header:s,isLast:a,lastItemButtons:(0,r.jsxs)(N.Y,{gap:8,mr:8,children:[e&&Object.keys(eC).length>0&&(0,r.jsx)(k.N,{onClick:()=>eN({}),title:"Reset Column Widths",children:(0,r.jsx)(A.m,{label:"Reset Column Widths",children:(0,r.jsx)(z.A,{size:16})})}),er&&(0,r.jsx)(k.N,{onClick:()=>tt(!0),title:"Show Generated SQL",tabIndex:0,children:(0,r.jsx)(A.m,{label:"Show Generated SQL",children:(0,r.jsx)(L.A,{size:16})})}),(0,r.jsx)(k.N,{onClick:()=>e8(e=>!e),title:`${e7?"Disable":"Enable"}  Wrap Lines`,children:(0,r.jsx)(A.m,{label:`${e7?"Disable":"Enable"} Wrap Lines`,children:e7?(0,r.jsx)(R.A,{size:16}):(0,r.jsx)(M.A,{size:16})})}),(0,r.jsx)(eE.P,{data:eV,filename:`hyperdx_search_results_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}`,className:"fs-6",children:(0,r.jsx)(A.m,{label:`Download Table as CSV (max ${eW.toLocaleString()} rows)${eH?" - data truncated":""}`,children:(0,r.jsx)(D.A,{size:16})})}),null!=v&&(0,r.jsx)(k.N,{onClick:()=>v(),title:"Settings",children:(0,r.jsx)(A.m,{label:"Settings",children:(0,r.jsx)(F.A,{size:16})})})]})},s.id)})},t.id))}),(0,r.jsxs)("tbody",{children:[e3>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${e3}px`}})}),e1.map(e=>{let t=eQ[e.index],s=eL(t.original),n=eq[s]??!1;return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("tr",{"data-testid":`table-row-${s}`,className:l()(eu().tableRow,{[eu().tableRow__selected]:c&&c===s}),"data-index":e.index,ref:e0.measureElement,children:[ex&&(0,r.jsx)("td",{className:"align-top overflow-hidden",style:{width:"40px"},children:(0,B.Kv)(t.getVisibleCells()[0].column.columnDef.cell,t.getVisibleCells()[0].getContext())}),(0,r.jsx)("td",{className:"align-top overflow-hidden p-0",colSpan:eJ.length-!!ex,children:(0,r.jsxs)("button",{type:"button",className:l()(eu().rowContentButton,{[eu().isWrapped]:e7,[eu().isTruncated]:!e7}),onClick:e=>{ev(t.original)},"aria-label":"View details for log entry",children:[t.getVisibleCells().slice(+!!ex).map(e=>{let t=e.column.columnDef.meta?.className,s=e.column.getSize(),n=e.getValue();return(0,r.jsx)("div",{className:l()("flex-shrink-0 overflow-hidden position-relative",t),style:{width:s===Q.k?"auto":`${s}px`,flex:s===Q.k?"1":"none"},children:(0,r.jsx)("div",{className:eu().fieldTextContainer,children:(0,r.jsx)(eh,{cellValue:n,wrapLinesEnabled:e7,tableContainerRef:ek,columnName:e.column.columnDef.meta?.column,isChart:e.column.columnDef.meta?.column==="__hdx_pattern_trend",children:(0,B.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)}),ef&&(0,r.jsx)(ep,{row:t.original,getRowWhere:ef,sourceId:ei?.id,isWrapped:e7,onToggleWrap:()=>e8(!e7)})]})})]}),ex&&n&&(0,r.jsx)(eA,{columnsLength:eJ.length,virtualKey:e.key.toString(),source:ei,rowId:s,measureElement:e0.measureElement,virtualIndex:e.index,children:ea?.({id:s,aliasWith:t.original[Y.ZO.ALIAS_WITH],...t.original})})]},e.key)}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:800,children:(0,r.jsx)("div",{className:"rounded fs-7 bg-muted text-center d-flex align-items-center justify-content-center mt-3",children:h?(0,r.jsxs)("div",{className:"my-3",children:[(0,r.jsx)("div",{className:"d-inline-block",children:(0,r.jsx)(I.A,{size:14,className:"spin-animate"})})," ",null!=U&&(0,r.jsxs)(r.Fragment,{children:["Searched ",(0,r.jsx)(ee.H,{value:U}),"."," "]}),"Loading results",J?.[0]!=null&&J?.[1]!=null?(0,r.jsxs)(r.Fragment,{children:[" ","across"," ",(0,o.A)(J?.[1],J?.[0])," ","(",(0,r.jsx)(ee.H,{value:J?.[0],format:"withYear"})," ","to"," ",(0,r.jsx)(ee.H,{value:J?.[1],format:"withYear"}),")"]}):null,"..."]}):!1==i&&!1==h&&ey.length>0?(0,r.jsx)("div",{className:"my-3",children:"End of Results"}):H?(0,r.jsxs)("div",{className:"my-3",children:[(0,r.jsx)(T.E,{ta:"center",size:"sm",children:"Error loading results, please check your query or try again."}),(0,r.jsxs)(C.a,{p:"sm",children:[(0,r.jsx)(C.a,{mt:"sm",children:(0,r.jsx)($.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:G?.message})}),G instanceof S.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(E.s,{w:"100%",ta:"initial",align:"center",justify:"center",children:(0,r.jsx)(e_.V,{data:G?.query})})]})]})]}):!1==i&&!1==h&&0===ey.length?(0,r.jsxs)("div",{className:"my-3","data-testid":"db-row-table-no-results",children:["No results found.",(0,r.jsx)(T.E,{mt:"sm",children:"Try checking the query explainer in the search bar if there are any search syntax issues."}),J?.[0]!=null&&J?.[1]!=null?(0,r.jsxs)(T.E,{mt:"sm",children:["Searched Time Range:"," ",(0,o.A)(J?.[1],J?.[0])," ","(",(0,r.jsx)(ee.H,{value:J?.[0],format:"withYear"})," ","to"," ",(0,r.jsx)(ee.H,{value:J?.[1],format:"withYear"}),")"]}):null]}):(0,r.jsx)("div",{})})})}),e5>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${e5}px`}})})]})]})]}),(0,r.jsx)(ew,{searchQuery:eK.searchQuery,matchIndices:eK.matchIndices,currentMatchIndex:eK.currentMatchIndex,dedupedRows:ey,tableRows:eQ,getRowId:eL,onMatchClick:eK.handleMatchClick})]})})});function eP(e){let t,s,r=(0,n.c)(12);r[0]!==e.connection||r[1]!==e.from.databaseName||r[2]!==e.from.tableName?(t={databaseName:e.from.databaseName,tableName:e.from.tableName,connectionId:e.connection},r[0]=e.connection,r[1]=e.from.databaseName,r[2]=e.from.tableName,r[3]=t):t=r[3];let{data:a}=(0,G.Z2)(t),i=a?.primary_key,l=a?.partition_key;e:{let t,n;if(null==i||null==l){s=void 0;break e}r[4]!==e.select||r[5]!==l||r[6]!==i?(t=function(e,t,s){let r=new Set([...(0,S.bZ)(s),...(0,S.bZ)(t)]);if("string"==typeof e){let t=new Set((0,w.AB)(e)),s=[...r].filter(e=>!t.has(e));return{select:[...t,...s].join(","),additionalKeysLength:s.length}}{let t=[...r].map(e=>({valueExpression:e}));return{select:[...e,...t],additionalKeysLength:t.length}}}(e.select,i,l),r[4]=e.select,r[5]=l,r[6]=i,r[7]=t):t=r[7];let{select:a,additionalKeysLength:o}=t;r[8]!==o||r[9]!==e||r[10]!==a?(n={...e,select:a,additionalKeysLength:o},r[8]=o,r[9]=e,r[10]=a,r[11]=n):n=r[11],s=n}return s}let eB=(0,a.memo)(function({config:e,sourceId:t,onError:s,onRowDetailsClick:n,highlightedLineId:i,enabled:l=!0,isLive:o=!1,queryKeyPrefix:c,onScroll:d,denoiseResults:u=!1,onChildModalOpen:m,onExpandedRowsChange:h,collapseAllRows:p,showExpandButton:g=!0,renderRowDetails:f,onSortingChange:b,initialSortBy:y,variant:v="default"}){var j;let{data:w}=W.Ay.useMe(),[_,E]=(0,a.useState)(y?.[0]??null),N=(0,a.useMemo)(()=>_?[_]:[],[_]),k=(0,a.useCallback)(e=>{b?.(e),E(e?.[0]??null)},[E,b]),A=(0,es.ZC)(t);(0,a.useEffect)(()=>{A&&A!==t&&k(null)},[t]);let $=(0,es.ZC)(y);(0,a.useEffect)(()=>{let e=y?.[0]??null,t=$?.[0]??null;JSON.stringify(e)!==JSON.stringify(t)&&E(e)},[y,$]);let I=(0,a.useMemo)(()=>{let t={...(0,H.Nz)(w?.team),...e};return N.length&&(t.orderBy=N.map(e=>({valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}))),t},[w,e,N]),z=eP(I),{data:L,fetchNextPage:R,hasNextPage:M,isFetching:D,isError:F,error:P}=(0,K.A)(z??e,{enabled:l&&null!=z&&("string"==typeof(j=e.select)?j.split(",").filter(e=>e.trim().length>0).length:j.length)>0,isLive:o,queryKeyPrefix:c}),B=(0,a.useMemo)(()=>(function(e,t){if(null==e||null==t)return new Map;let s=e.slice(0,e.length-t);return new Map(s?.map(e=>[e.name,{...e,_type:(0,S.rj)(e.type)}]))})(L?.meta,z?.additionalKeysLength),[L,z]),V=(0,a.useMemo)(()=>Array.from(B.keys()),[B]),q=(0,a.useMemo)(()=>V.filter(e=>{let t=B.get(e)?._type;return(0,S.Zo)(t)}),[V,B]),X=(0,a.useMemo)(()=>(L?.data??[]).map(e=>{let t={...e};return q.forEach(s=>{B.get(s)?._type===S.A2.JSON?t[s]=JSON.stringify(e[s]).replace(/\//g,"\\/"):t[s]=JSON.stringify(e[s])}),t}),[L,q,B]),G=(0,a.useMemo)(()=>(0,S.D7)(L?.chSql??{sql:"",params:{}}),[L]),Z=(0,Y.Ay)({meta:L?.meta,aliasMap:G}),Q=(0,a.useCallback)(e=>n?.(Z(e)),[n,Z]);(0,a.useEffect)(()=>{F&&s&&P&&s(P)},[F,s,P]);let{data:ee}=(0,U.Fo)({id:t}),et=V[V.length-1],er=(0,J.nt)({config:e,samples:1e4,bodyValueExpression:et??"",severityTextExpression:ee?.severityTextExpression??"",totalCount:void 0,enabled:u}),en=(0,O.I)({queryKey:["noisy-patterns",e],queryFn:async()=>Object.values(er.data).filter(e=>e.count/(er.sampledRowCount??1)>.1),enabled:u&&null!=er.data&&Object.values(er.data).length>0&&null!=er.miner}),ea=(0,a.useMemo)(()=>en.data?.map(e=>e.id)??[],[en.data]),ei=(0,O.I)({queryKey:["denoised-rows",e,u,...u?[X]:[],ea,et],queryFn:async()=>{if(!u)return[];if(0===ea.length)return X;let e=await er.miner?.matchLogs(X.map(e=>e[et]));return X.filter((t,s)=>{let r=e?.[s];return!ea.includes(`${r}`)})},placeholderData:(t,s)=>{if(s?.queryKey?.[0]==="denoised-rows"&&s?.queryKey?.[1]===e)return t},gcTime:o?x()("30s"):x()("5m"),enabled:u&&en.isSuccess&&X.length>0&&null!=er.miner}),el=u?D||ei.isFetching||en.isFetching||er.isLoading:D,eo=L?.window?.direction==="ASC"?L?.window?.endTime:L?.window?.startTime;return(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsxs)(C.a,{mb:"xxs",px:"sm",children:[(0,r.jsx)(T.E,{fw:"bold",fz:"xs",mb:"xxs",children:"Removed Noisy Event Patterns"}),(0,r.jsxs)(C.a,{mah:100,style:{overflow:"auto"},children:[en.data?.map(e=>(0,r.jsx)(T.E,{fz:"xs",children:e.pattern},e.id)),0===ea.length&&(0,r.jsx)(T.E,{fz:"xs",children:"No noisy patterns found"})]})]}),(0,r.jsx)(eO,{isLive:o,wrapLines:!1,displayedColumns:V,highlightedLineId:i,rows:u?ei?.data??[]:X,renderRowDetails:f,isLoading:el,fetchNextPage:R,hasNextPage:M,onRowDetailsClick:Q,onScroll:d,generateRowId:Z,isError:F,error:P??void 0,columnTypeMap:B,dateRange:e.dateRange,loadingDate:eo,config:I,onChildModalOpen:m,source:ee,onExpandedRowsChange:h,collapseAllRows:p,showExpandButton:g,enableSorting:!0,onSortingChange:k,sortOrder:N,getRowWhere:Z,variant:v})]})});function eV(){return""}function eW(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function eH(e){return e??""}},50374:(e,t,s)=>{"use strict";s.d(t,{D:()=>e0,A:()=>e3});var r,n,a=s(6029),i=s(75155),l=s(55729),o=s(86508),c=s(84450),d=s.n(c),u=s(41038),m=s(7913),h=s(66692),x=s(82641),p=s(60481),g=s(78253),f=s(10174),b=s(34834),y=s(64441),v=s(24885);function j(e){let t,s,r,n=(0,i.c)(13),{hasLogSource:a}=e,[o,c]=(0,u.ZA)("traceWhere"),[d,m]=(0,u.ZA)("logWhere"),h=!!o||!!(a&&d),[x,p]=(0,l.useState)(h);n[0]!==m||n[1]!==c?(t=e=>{c(e.traceWhere||null),m(e.logWhere||null)},n[0]=m,n[1]=c,n[2]=t):t=n[2];let g=t;n[3]!==m||n[4]!==c?(s=()=>{c(null),m(null)},n[3]=m,n[4]=c,n[5]=s):s=n[5];let f=s;return n[6]!==f||n[7]!==h||n[8]!==x||n[9]!==d||n[10]!==g||n[11]!==o?(r={traceWhere:o,logWhere:d,isFilterActive:h,isFilterExpanded:x,setIsFilterExpanded:p,onSubmit:g,clear:f},n[6]=f,n[7]=h,n[8]=x,n[9]=d,n[10]=g,n[11]=o,n[12]=r):r=n[12],r}var S=s(78694),w=s(81973),_=s(96958),E=s(18006),C=s(26674),N=s(3635),k=s(43517),A=s(43085),T=s(98287);function $(e){let t,s,r,n,l=(0,i.c)(9),{traceId:o,dateRange:c,traceTableSourceId:d}=e;l[0]!==d?(t={id:d},l[0]=d,l[1]=t):t=l[1];let{data:u}=(0,w.Fo)(t);return l[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsxs)(N.Y,{gap:0,children:[(0,a.jsx)(k.E,{size:"sm",ps:"sm",children:"Service Map"}),(0,a.jsx)(A.E,{size:"xs",ms:"xs",color:"gray",autoContrast:!0,radius:"sm",children:"Beta"})]}),l[2]=s):s=l[2],l[3]!==c||l[4]!==o||l[5]!==u?(r=u?(0,a.jsx)(T.A,{traceTableSource:u,traceId:o,dateRange:c,isSingleTrace:!0}):null,l[3]=c,l[4]=o,l[5]=u,l[6]=r):r=l[6],l[7]!==r?(n=(0,a.jsxs)(b.B,{w:"100%",children:[s,r]}),l[7]=r,l[8]=n):n=l[8],n}var I=s(76539),z=s(43465),L=s(66631),R=s(76089),M=s(90124),D=s(62801),F=s(44595),O=s(53993),P=s(43152),B=s(40228),V=s(28450);let W=e=>{let t,s,r,n,c,d,u,m,h,x,p,g,f,b,y,v,j,S,w,_,E,C,k,A,T,$=(0,i.c)(73),{fieldPrefix:I,metricSource:O,timestamp:V,title:W,where:H}=e,[q,X]=(0,l.useState)("30m"),[G,K]=(0,l.useState)("sm");if($[0]!==q||$[1]!==V){let e={"30m":{minutes:15},"1h":{minutes:30},"1d":{hours:12}}[q];t=(0,z.A)(new Date(V),e),s=(0,L.A)([(0,o.A)(new Date(V),e),new Date]),$[0]=q,$[1]=V,$[2]=t,$[3]=s}else t=$[2],s=$[3];$[4]!==t||$[5]!==s?(r=[t,s],$[4]=t,$[5]=s,$[6]=r):r=$[6];let J=r;e:{switch(G){case"sm":{let e;$[7]===Symbol.for("react.memo_cache_sentinel")?(e={cols:3,height:200},$[7]=e):e=$[7],n=e;break e}case"md":{let e;$[8]===Symbol.for("react.memo_cache_sentinel")?(e={cols:2,height:250},$[8]=e):e=$[8],n=e;break e}case"lg":{let e;$[9]===Symbol.for("react.memo_cache_sentinel")?(e={cols:1,height:320},$[9]=e):e=$[9],n=e;break e}}n=void 0}let{cols:Y,height:Z}=n;$[10]!==J?(c=(0,R.tA)(J),$[10]=J,$[11]=c):c=$[11];let U=c,Q=`infra-subpanel-${I}`;$[12]!==W?(d=(0,a.jsx)("h4",{className:"fs-6 m-0",children:W}),$[12]=W,$[13]=d):d=$[13],$[14]===Symbol.for("react.memo_cache_sentinel")?(u=[{label:"30m",value:"30m"},{label:"1h",value:"1h"},{label:"1d",value:"1d"}],$[14]=u):u=$[14],$[15]===Symbol.for("react.memo_cache_sentinel")?(m=e=>X(e),$[15]=m):m=$[15],$[16]!==q?(h=(0,a.jsx)(M.I,{size:"xs",data:u,value:q,onChange:m}),$[16]=q,$[17]=h):h=$[17],$[18]!==h||$[19]!==d?(x=(0,a.jsxs)(N.Y,{align:"center",children:[d,h]}),$[18]=h,$[19]=d,$[20]=x):x=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(p=[{label:"SM",value:"sm"},{label:"MD",value:"md"},{label:"LG",value:"lg"}],$[21]=p):p=$[21],$[22]===Symbol.for("react.memo_cache_sentinel")?(g=e=>K(e),$[22]=g):g=$[22],$[23]!==G?(f=(0,a.jsx)(N.Y,{align:"center",children:(0,a.jsx)(M.I,{size:"xs",data:p,value:G,onChange:g})}),$[23]=G,$[24]=f):f=$[24],$[25]!==x||$[26]!==f?(b=(0,a.jsxs)(N.Y,{justify:"space-between",align:"center",children:[x,f]}),$[25]=x,$[26]=f,$[27]=b):b=$[27],$[28]!==J||$[29]!==I||$[30]!==U||$[31]!==O||$[32]!==H?(y=(0,P.ik)({dateRange:J,granularity:U,seriesReturnType:"column",series:[{type:"time",where:H,groupBy:[],aggFn:"avg",field:`${I}cpu.utilization - Gauge`,table:"metrics",numberFormat:P.p2}]},{metric:O}),$[28]=J,$[29]=I,$[30]=U,$[31]=O,$[32]=H,$[33]=y):y=$[33];let ee=V/1e3;$[34]!==y||$[35]!==ee?(v=(0,a.jsx)(B.S,{title:"CPU Usage (%)",config:y,showDisplaySwitcher:!1,logReferenceTimestamp:ee}),$[34]=y,$[35]=ee,$[36]=v):v=$[36],$[37]!==Z||$[38]!==v?(j=(0,a.jsx)(D.Z,{"data-testid":"cpu-usage-card",children:(0,a.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:v})}),$[37]=Z,$[38]=v,$[39]=j):j=$[39],$[40]!==J||$[41]!==I||$[42]!==U||$[43]!==O||$[44]!==H?(S=(0,P.ik)({dateRange:J,granularity:U,seriesReturnType:"column",series:[{type:"time",where:H,groupBy:[],aggFn:"avg",field:`${I}memory.usage - Gauge`,table:"metrics",numberFormat:P.JD}]},{metric:O}),$[40]=J,$[41]=I,$[42]=U,$[43]=O,$[44]=H,$[45]=S):S=$[45];let et=V/1e3;$[46]!==S||$[47]!==et?(w=(0,a.jsx)(B.S,{title:"Memory Used",config:S,showDisplaySwitcher:!1,logReferenceTimestamp:et}),$[46]=S,$[47]=et,$[48]=w):w=$[48],$[49]!==Z||$[50]!==w?(_=(0,a.jsx)(D.Z,{"data-testid":"memory-usage-card",children:(0,a.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:w})}),$[49]=Z,$[50]=w,$[51]=_):_=$[51],$[52]!==J||$[53]!==I||$[54]!==U||$[55]!==O||$[56]!==H?(E=(0,P.ik)({dateRange:J,granularity:U,seriesReturnType:"column",series:[{type:"time",where:H,groupBy:[],aggFn:"avg",field:`${I}filesystem.available - Gauge`,table:"metrics",numberFormat:P.nH}]},{metric:O}),$[52]=J,$[53]=I,$[54]=U,$[55]=O,$[56]=H,$[57]=E):E=$[57];let es=V/1e3;return $[58]!==E||$[59]!==es?(C=(0,a.jsx)(B.S,{title:"Disk Available",config:E,showDisplaySwitcher:!1,logReferenceTimestamp:es}),$[58]=E,$[59]=es,$[60]=C):C=$[60],$[61]!==Z||$[62]!==C?(k=(0,a.jsx)(D.Z,{"data-testid":"disk-usage-card",children:(0,a.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:C})}),$[61]=Z,$[62]=C,$[63]=k):k=$[63],$[64]!==Y||$[65]!==j||$[66]!==_||$[67]!==k?(A=(0,a.jsxs)(F.r,{mt:"md",cols:Y,children:[j,_,k]}),$[64]=Y,$[65]=j,$[66]=_,$[67]=k,$[68]=A):A=$[68],$[69]!==b||$[70]!==A||$[71]!==Q?(T=(0,a.jsxs)("div",{"data-testid":Q,children:[b,A]}),$[69]=b,$[70]=A,$[71]=Q,$[72]=T):T=$[72],T},H=({rowData:e,rowId:t,source:s})=>{let{data:r}=(0,w.Fo)({id:s.metricSourceId}),n=e?.__hdx_resource_attributes["k8s.pod.uid"],i=e?.__hdx_resource_attributes["k8s.node.name"],l=new Date(e?.__hdx_timestamp).getTime();return(0,a.jsxs)(b.B,{my:"md",gap:40,children:[n&&(0,a.jsxs)("div",{children:[r&&(0,a.jsx)(W,{title:"Pod",where:`${r.resourceAttributesExpression}.k8s.pod.uid:"${n}"`,fieldPrefix:"k8s.pod.",timestamp:l,metricSource:r}),s&&(0,a.jsxs)(D.Z,{p:"md",mt:"xl",children:[(0,a.jsx)(D.Z.Section,{p:"md",py:"xs",children:"Pod Timeline"}),(0,a.jsx)(D.Z.Section,{children:(0,a.jsx)(O.F,{viewportProps:{style:{maxHeight:280}},children:(0,a.jsx)(p.a,{p:"md",py:"sm",children:(0,a.jsx)(V.FB,{logSource:s,q:`\`k8s.pod.uid\`:"${n}"`,dateRange:[(0,z.A)(new Date(l),{days:1}),(0,o.A)(new Date(l),{days:1})],anchorEvent:{label:(0,a.jsx)("div",{className:"text-brand",children:"This Event"}),timestamp:new Date(l).toISOString()}})})})})]})]}),i&&r&&(0,a.jsx)(W,{metricSource:r,title:"Node",where:`${r.resourceAttributesExpression}.k8s.node.name:"${i}"`,fieldPrefix:"k8s.node.",timestamp:l})]})};var q=s(37901),X=s(26837),G=s(82203),K=s.n(G),J=s(94720),Y=s(40147),Z=s(57030),U=s(71434),Q=s.n(U),ee=s(1909),et=s(14262),es=s.n(et),er=s(3145),en=s(53061),ea=s(47268),ei=s(23935),el=s(24589),eo=s(92789),ec=s(70114),ed=s(23474),eu=s(54134),em=s(225),eh=s(78744),ex=s(70727),ep=s(43370),eg=s(75828),ef=s.n(eg),eb=s(63085),ey=s(21440),ev=s(7565),ej=s(92917),eS=s(83101),ew=s.n(eS),e_=s(20699),eE=s.n(e_);let eC=(0,l.memo)(function(e){let t,s,r,n,l,o,c,d,u,m,h,x,p,g,f=(0,i.c)(30),{marker:b,eventStart:y,eventEnd:v,height:j}=e,S=(0,ev.a)(),w=v-y,_=b.timestamp-y,E=w>0?_/w*100:0;f[0]!==b.attributes?(t=Object.entries(b.attributes),f[0]=b.attributes,f[1]=t):t=f[1];let C=t;f[2]!==S||f[3]!==b.timestamp?(s=S(new Date(b.timestamp),{format:"withMs"}),f[2]=S,f[3]=b.timestamp,f[4]=s):s=f[4],f[5]!==s?(r=(0,a.jsx)(k.E,{size:"xxs",c:"dimmed",mb:"xxs",children:s}),f[5]=s,f[6]=r):r=f[6],f[7]!==b.name?(n=(0,a.jsx)(k.E,{size:"xs",children:b.name}),f[7]=b.name,f[8]=n):n=f[8],f[9]!==C?(l=C.length>0&&(0,a.jsxs)("div",{style:{fontSize:10,marginTop:4},children:[C.slice(0,5).map(ez),C.length>5&&(0,a.jsxs)("div",{style:{fontStyle:"italic"},children:["...and ",C.length-5," more"]})]}),f[9]=C,f[10]=l):l=f[10],f[11]!==r||f[12]!==n||f[13]!==l?(o=(0,a.jsxs)("div",{children:[r,n,l]}),f[11]=r,f[12]=n,f[13]=l,f[14]=o):o=f[14];let N=o;f[15]===Symbol.for("react.memo_cache_sentinel")?(c={transition:"fade"},d={fontSize:11,maxWidth:350,wordBreak:"break-word"},f[15]=c,f[16]=d):(c=f[15],d=f[16]),f[17]!==E?(u=E.toFixed(6),f[17]=E,f[18]=u):u=f[18];let A=`${u}%`;return f[19]!==A?(m={position:"absolute",left:A,top:"50%",transform:"translate(-50%, -50%)",width:8,height:8,cursor:"pointer",zIndex:10,pointerEvents:"auto"},f[19]=A,f[20]=m):m=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsx)("div",{style:{width:8,height:8,backgroundColor:"var(--color-bg-success)",transform:"rotate(45deg)",border:"1px solid #333",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}}),f[21]=h):h=f[21],f[22]!==j?(x=(0,a.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:1,height:j,backgroundColor:"var(--color-bg-success)",opacity:.4,zIndex:-1}}),f[22]=j,f[23]=x):x=f[23],f[24]!==m||f[25]!==x?(p=(0,a.jsxs)("div",{style:m,onMouseEnter:eL,onClick:eR,children:[h,x]}),f[24]=m,f[25]=x,f[26]=p):p=f[26],f[27]!==p||f[28]!==N?(g=(0,a.jsx)(eb.m,{label:N,color:"var(--color-bg-surface)",withArrow:!0,multiline:!0,transitionProps:c,style:d,children:p}),f[27]=p,f[28]=N,f[29]=g):g=f[29],g}),eN=(0,l.memo)(function(e){let t,s,r,n,l,o,c=(0,i.c)(25),{events:d,maxVal:u,height:m,eventStyles:h,onEventHover:x,scale:p,offset:g}=e,f=x??eM;c[0]!==m?(t={width:0,flexGrow:1,height:m,position:"relative"},c[0]=m,c[1]=t):t=c[1];let b=-1*g*p;c[2]!==b?(s=b.toFixed(6),c[2]=b,c[3]=s):s=c[3];let y=`${s}%`;if(c[4]!==y?(r=(0,a.jsx)("div",{style:{marginRight:y}}),c[4]=y,c[5]=r):r=c[5],c[6]!==d?(n=d??[],c[6]=d,c[7]=n):n=c[7],c[8]!==h||c[9]!==m||c[10]!==u||c[11]!==f||c[12]!==p||c[13]!==n){let e;c[15]!==h||c[16]!==m||c[17]!==u||c[18]!==f||c[19]!==p?(e=(e,t,s)=>{let r=(e.minWidthPerc??0)/100,n=s[t-1],i=n?.start!=null?n?.start+u*r:0,l=Math.max(n?.end??0,i),o=p*Math.max((e.end-e.start)/u,r)*100,c=p*((e.start-l)/u*100);return(0,a.jsx)(eb.m,{label:e.tooltip,color:"gray",withArrow:!0,multiline:!0,transitionProps:{transition:"fade-right"},style:{fontSize:11,maxWidth:300,wordBreak:"break-word"},children:(0,a.jsxs)("div",{onMouseEnter:()=>f(e.id),className:"d-flex align-items-center h-100 cursor-pointer text-truncate hover-opacity",style:{userSelect:"none",backgroundColor:e.color,minWidth:`${o.toFixed(6)}%`,width:`${o.toFixed(6)}%`,marginLeft:`${c.toFixed(6)}%`,position:"relative",..."function"==typeof h?h(e):h},children:[(0,a.jsx)("div",{style:{margin:"auto"},className:"px-2",children:e.body}),e.markers?.map((t,s)=>(0,a.jsx)(eC,{marker:t,eventStart:e.start,eventEnd:e.end,height:m},`${e.id}-marker-${s}`))]})},e.id)},c[15]=h,c[16]=m,c[17]=u,c[18]=f,c[19]=p,c[20]=e):e=c[20],l=n.map(e),c[8]=h,c[9]=m,c[10]=u,c[11]=f,c[12]=p,c[13]=n,c[14]=l}else l=c[14];return c[21]!==t||c[22]!==r||c[23]!==l?(o=(0,a.jsxs)("div",{className:"d-flex overflow-hidden",style:t,children:[r,l]}),c[21]=t,c[22]=r,c[23]=l,c[24]=o):o=c[24],o});function ek(e){return e<1e3?`${Math.round(e)}ms`:e%1e3==0?`${Math.floor(e/1e3)}s`:`${(e/1e3).toFixed(3)}s`}function eA(e){let t,s,r,n,l,o,c,d,u,m,h,x=(0,i.c)(19),{maxVal:p,labelWidth:g,height:f,scale:b,offset:y}=e,v=(h=m=Math.pow(10,Math.floor(Math.log10(u=p/b/10))),u>=2*m&&(h=2*m),u>=5*m&&(h=5*m),h),j=Math.floor(p/v),S=v/p*100*b;if(x[0]!==f||x[1]!==v||x[2]!==j||x[3]!==S){t=[];for(let e=0;e<j;e++)t.push((0,a.jsx)("div",{style:{height:f,width:1,marginRight:-1,marginLeft:0===e?0:`${S.toFixed(6)}%`,background:"var(--color-border-muted)"},children:(0,a.jsx)("div",{className:"ms-2 fs-8.5",children:ek(e*v)})},e));x[0]=f,x[1]=v,x[2]=j,x[3]=S,x[4]=t}else t=x[4];x[5]===Symbol.for("react.memo_cache_sentinel")?(s={position:"sticky",top:0,height:24,paddingTop:4,zIndex:200,pointerEvents:"none",background:"var(--color-bg-body)"},r=ef()("d-flex align-items-center"),x[5]=s,x[6]=r):(s=x[5],r=x[6]),x[7]!==g?(n=(0,a.jsx)("div",{style:{width:g,minWidth:g}}),x[7]=g,x[8]=n):n=x[8];let w=-1*y*b;x[9]!==w?(l=w.toFixed(6),x[9]=w,x[10]=l):l=x[10];let _=`${l}%`;return x[11]!==_?(o=(0,a.jsx)("div",{style:{marginRight:_}}),x[11]=_,x[12]=o):o=x[12],x[13]!==o||x[14]!==t?(c=(0,a.jsxs)("div",{className:"d-flex w-100 overflow-hidden",children:[o,t]}),x[13]=o,x[14]=t,x[15]=c):c=x[15],x[16]!==n||x[17]!==c?(d=(0,a.jsx)("div",{style:s,children:(0,a.jsxs)("div",{className:`${r}`,children:[n,c]})}),x[16]=n,x[17]=c,x[18]=d):d=x[18],d}function eT(e){let t,s,r,n,l,o,c,d,u,m=(0,i.c)(24),{xPerc:h,overlay:x,labelWidth:p,color:g,height:f}=e,b=Math.min(Math.max(100*h,-1),100);m[0]!==b?(t=b.toFixed(6),m[0]=b,m[1]=t):t=m[1];let y=`${t}%`,v=h<=0?"none":"block";return m[2]!==v?(s={position:"sticky",top:0,height:0,zIndex:250,pointerEvents:"none",display:v},m[2]=v,m[3]=s):s=m[3],m[4]!==p?(r=(0,a.jsx)("div",{style:{width:p,minWidth:p}}),m[4]=p,m[5]=r):r=m[5],m[6]!==y?(n={marginLeft:y},m[6]=y,m[7]=n):n=m[7],m[8]!==x||m[9]!==h?(l=null!=x&&(0,a.jsx)("div",{style:{height:0,marginLeft:h<.5?12:-150,top:12,position:"relative"},children:(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"p-2 rounded border",style:{background:"var(--color-bg-surface)"},children:x})})}),m[8]=x,m[9]=h,m[10]=l):l=m[10],m[11]!==g||m[12]!==f?(o=(0,a.jsx)("div",{style:{height:f,width:1,background:g}}),m[11]=g,m[12]=f,m[13]=o):o=m[13],m[14]!==n||m[15]!==l||m[16]!==o?(c=(0,a.jsx)("div",{className:"w-100 overflow-hidden",children:(0,a.jsxs)("div",{style:n,children:[l,o]})}),m[14]=n,m[15]=l,m[16]=o,m[17]=c):c=m[17],m[18]!==r||m[19]!==c?(d=(0,a.jsxs)("div",{className:"d-flex",children:[r,c]}),m[18]=r,m[19]=c,m[20]=d):d=m[20],m[21]!==d||m[22]!==s?(u=(0,a.jsx)("div",{style:s,children:d}),m[21]=d,m[22]=s,m[23]=u):u=m[23],u}function e$(e){let t,s,r,n=(0,i.c)(11),{containerRef:o,maxVal:c,labelWidth:d,height:u,scale:m,offset:h,xPerc:x,setXPerc:p}=e,[g,f]=(0,l.useState)(!1);n[0]!==o||n[1]!==d||n[2]!==p?(t=()=>{let e=t=>{if(null!=o.current){let s=o.current,r=s.getBoundingClientRect(),n=(t.clientX-r.left-d)/(s.clientWidth-d);null!=e&&p(n)}},t=()=>f(!0),s=()=>f(!1),r=o.current;return r?.addEventListener("mousemove",e),r?.addEventListener("mouseleave",s),r?.addEventListener("mouseenter",t),()=>{r?.removeEventListener("mousemove",e),r?.removeEventListener("mouseleave",s),r?.removeEventListener("mouseenter",t)}},s=[o,d,p],n[0]=o,n[1]=d,n[2]=p,n[3]=t,n[4]=s):(t=n[3],s=n[4]),(0,l.useEffect)(t,s);let b=(h/100+Math.max(x,0)/m)*c;return n[5]!==b||n[6]!==u||n[7]!==d||n[8]!==g||n[9]!==x?(r=g?(0,a.jsx)(eT,{xPerc:Math.max(x,0),overlay:ek(Math.max(b,0)),height:u,labelWidth:d,color:"var(--color-bg-neutral)"}):null,n[5]=b,n[6]=u,n[7]=d,n[8]=g,n[9]=x,n[10]=r):r=n[10],r}function eI({rows:e,cursors:t,rowHeight:s,onMouseMove:r,onEventClick:n,labelWidth:i,className:o,style:c,onClick:d,scale:u=1,setScale:m=()=>{},initialScrollRowIndex:h,scaleWithScroll:x=!1}){let[p,g]=(0,l.useState)(0),f=(0,ej.ZC)(u),b=i/window.innerWidth*100,{size:y,startResize:j}=(0,v.A)(b,"left"),S=y/100*window.innerWidth,w=(0,l.useRef)(null),_=(e,t)=>{if(null!=w.current&&null!=t){let s=w.current,r=s.getBoundingClientRect(),n=e.clientX-r.left;e.clientY,r.top,t(Math.max((p/100+(n-S)/(s.clientWidth-S)/u)*A))}},E=(0,l.useMemo)(()=>({onDrag:e=>{g(t=>Math.min(Math.max(t-e.movementX*(.125/u),0),100-100/u))}}),[u,g]);(0,ej.i3)(w,E);let[C,N]=(0,l.useState)(0),k=e=>{x&&(e.preventDefault(),m(t=>Math.max(t-.001*e.deltaY,1)))};(0,l.useEffect)(()=>{null!=f&&f!=u&&g(e=>{let t=Math.max(Math.min(C,1),0);return Math.min(Math.max(e+100*t/f-100*t/u,0),100-100/u)})},[u,f,C]),(0,l.useEffect)(()=>{let e=w.current;if(null!=e)return e.addEventListener("wheel",k,{passive:!1}),()=>{e.removeEventListener("wheel",k)}});let A=(0,l.useMemo)(()=>{let t=0;for(let s of e??[])for(let e of s.events)t=Math.max(t,e.end);return 1.1*t},[e]),T=(0,ey.Te)({count:e?.length??0,getScrollElement:()=>w.current,estimateSize:()=>s,overscan:5}),$=T.getVirtualItems(),[I,z]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{null!=h&&!I&&h>=0&&(z(!0),T.scrollToIndex(h,{align:"center"}))},[h,I,T]),(0,a.jsxs)("div",{style:{position:"relative",...c},className:o,ref:w,onClick:e=>{_(e,d)},onMouseMove:e=>{_(e,r)},children:[(t??[]).map(e=>{let t=(e.start/A-p/100)*u;return(0,a.jsx)(eT,{xPerc:t,height:w.current?.getBoundingClientRect().height??300,labelWidth:S,color:e.color},e.id)}),(0,a.jsx)(e$,{containerRef:w,maxVal:A,height:w.current?.getBoundingClientRect().height??300,labelWidth:S,scale:u,offset:p,xPerc:C,setXPerc:N}),(0,a.jsx)(eA,{maxVal:A,height:w.current?.getBoundingClientRect().height??300,labelWidth:S,scale:u,offset:p}),(0,a.jsx)("div",{style:{height:`${T.getTotalSize()+32}px`,width:"100%",position:"relative"},children:(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${$?.[0]?.start??0}px)`},children:T.getVirtualItems().map(t=>{let r=e?.[t.index];return(0,a.jsxs)("div",{onClick:()=>n?.(r),"data-index":t.index,ref:T.measureElement,className:`${ef()("d-flex align-items-center overflow-hidden",r.className,eE().timelineRow,r.isActive&&eE().timelineRowActive)}`,style:{...r.style},children:[(0,a.jsxs)("div",{className:eE().labelContainer,style:{width:S,minWidth:S},children:[r.label,(0,a.jsx)("div",{className:ew().resizeHandle,onMouseDown:j,style:{backgroundColor:"var(--color-bg-neutral)"}})]}),(0,a.jsx)(eN,{events:r.events,height:s,maxVal:A,eventStyles:e=>({borderRadius:2,fontSize:.5*s,backgroundColor:e.isError?"var(--color-bg-danger)":"var(--color-bg-inverted)",color:"var(--color-text-inverted)"}),scale:u,offset:p})]},t.index)})})})]})}function ez(e){let[t,s]=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{style:{color:"var(--color-text-primary)"},children:[t,":"]})," ",String(s).length>50?String(s).substring(0,50)+"...":String(s)]},t)}function eL(e){return e.stopPropagation()}function eR(e){return e.stopPropagation()}function eM(){}var eD=s(59017),eF=s(66773),eO=s.n(eF);function eP(e){let t,s,r=(0,i.c)(6),{config:n,dateRangeStartInclusive:a,dateRange:l,enabled:o}=e;r[0]!==n||r[1]!==l||r[2]!==a?(t={...n,dateRange:l,dateRangeStartInclusive:a},r[0]=n,r[1]=l,r[2]=a,r[3]=t):t=r[3];let c=t;return r[4]!==o?(s={enabled:o},r[4]=o,r[5]=s):s=r[5],(0,eh.A)(c,s)}function eB(e){let t,s,r,n,a,l,o,c,d=(0,i.c)(32),{tableSource:u,focusDate:m,dateRange:h,traceId:p,enabled:g,hiddenRowExpression:f}=e;d[0]!==f||d[1]!==u||d[2]!==p?(t=function(e,t,s){let r={Body:e?.kind===x.GL.Trace?(0,w.pM)(e)??"":e?.kind===x.GL.Log?(0,w.N8)(e)??"":"",Timestamp:(0,w.xg)(e),Duration:e.durationExpression?(0,w.kg)(e):"",TraceId:e.traceIdExpression??"",SpanId:e.spanIdExpression??"",ParentSpanId:e.parentSpanIdExpression??"",StatusCode:e.statusCodeExpression??"",ServiceName:e.serviceNameExpression??"",SeverityText:e.severityTextExpression??"",SpanAttributes:e.eventAttributesExpression??"",SpanEvents:e.spanEventsValueExpression??""};if(e.highlightedTraceAttributeExpressions)for(let t of e.highlightedTraceAttributeExpressions)t.alias&&(r[t.alias]=t.sqlExpression);let n=[{valueExpression:r.Body,alias:"Body"},{valueExpression:r.Timestamp,alias:"Timestamp"},{valueExpression:r.SpanId,alias:"SpanId"},...r.ServiceName?[{valueExpression:r.ServiceName,alias:"ServiceName"}]:[],...s?[{valueExpression:s,valueExpressionLanguage:"lucene",alias:"__hdx_hidden"}]:[]];return(e.kind===x.GL.Trace||e.kind===x.GL.Log)&&n.push(...(0,E.z4)(e.highlightedTraceAttributeExpressions)),s&&(r.__hdx_hidden=s),e.kind===x.GL.Trace?n.push({valueExpression:r.Duration,alias:"Duration"},{valueExpression:r.ParentSpanId,alias:"ParentSpanId"},...r.StatusCode?[{valueExpression:r.StatusCode,alias:"StatusCode"}]:[],...r.SpanAttributes?[{valueExpression:r.SpanAttributes,alias:"SpanAttributes"}]:[],...r.SpanEvents?[{valueExpression:r.SpanEvents,alias:"SpanEvents"}]:[]):e.kind===x.GL.Log&&n.push(...r.SeverityText?[{valueExpression:r.SeverityText,alias:"SeverityText"}]:[]),{config:{select:n,from:e.from,timestampValueExpression:e.timestampValueExpression,where:`${r.TraceId} = '${t}'`,limit:{limit:5e4},connection:e.connection},alias:r,type:e.kind}}(u,p,f),d[0]=f,d[1]=u,d[2]=p,d[3]=t):t=d[3];let{config:b,alias:y,type:v}=t;d[4]!==h[0]||d[5]!==m?(s=[h[0],m],d[4]=h[0],d[5]=m,d[6]=s):s=d[6],d[7]!==b||d[8]!==g||d[9]!==s?(r={config:b,dateRangeStartInclusive:!0,dateRange:s,enabled:g},d[7]=b,d[8]=g,d[9]=s,d[10]=r):r=d[10];let{data:j,isFetching:S,error:_}=eP(r);d[11]!==h[1]||d[12]!==m?(n=[m,h[1]],d[11]=h[1],d[12]=m,d[13]=n):n=d[13],d[14]!==b||d[15]!==g||d[16]!==n?(a={config:b,dateRangeStartInclusive:!1,dateRange:n,enabled:g},d[14]=b,d[15]=g,d[16]=n,d[17]=a):a=d[17];let{data:C,isFetching:N,error:k}=eP(a),A=S||N,T=j?.meta??C?.meta,$=_||k;d[18]!==y||d[19]!==T?(l={meta:T,aliasMap:y},d[18]=y,d[19]=T,d[20]=l):l=d[20];let I=(0,ex.Ay)(l);e:{let e;if(!T||0===T.length){let e;d[21]===Symbol.for("react.memo_cache_sentinel")?(e=[],d[21]=e):e=d[21],o=e;break e}d[22]!==C?.data||d[23]!==j?.data||d[24]!==I||d[25]!==v?(e=[...j?.data??[],...C?.data??[]].map(e=>{let t=I((0,U.omit)(e,["SpanAttributes","SpanEvents","__hdx_hidden"]));return{...e,SpanId:e?.SpanId,__hdx_hidden:e?.__hdx_hidden,type:v,id:t.where,aliasWith:[]}}),d[22]=C?.data,d[23]=j?.data,d[24]=I,d[25]=v,d[26]=e):e=d[26],o=e}let z=o;return d[27]!==$||d[28]!==A||d[29]!==T||d[30]!==z?(c={rows:z,meta:T,isFetching:A,error:$},d[27]=$,d[28]=A,d[29]=T,d[30]=z,d[31]=c):c=d[31],c}function eV({traceTableSource:e,logTableSource:t,traceId:s,dateRange:r,focusDate:n,onClick:i,highlightedRowWhere:o,initialRowHighlightHint:c}){let{size:d,startResize:u}=(0,v.A)(30,"bottom"),m=(0,ev.a)(),{traceWhere:h,logWhere:g,clear:f,isFilterActive:b,isFilterExpanded:y,setIsFilterExpanded:S,onSubmit:w}=j({hasLogSource:!!t}),{control:_,handleSubmit:C,setValue:A}=(0,ee.mN)({defaultValues:{traceWhere:h??"",logWhere:g??""}}),T=(0,l.useCallback)(()=>{A("traceWhere",""),A("logWhere",""),f()},[f,A]),{rows:$,isFetching:I,meta:z,error:L}=eB({tableSource:e,focusDate:n,dateRange:r,traceId:s,hiddenRowExpression:h?`NOT (${h})`:void 0,enabled:!0}),{rows:R,isFetching:M,meta:D,error:F}=eB({tableSource:t||e,focusDate:n,dateRange:t?r:[r[1],r[0]],traceId:s,hiddenRowExpression:g?`NOT (${g})`:void 0,enabled:!!t}),O=I||M,P=L||F,B=(0,l.useMemo)(()=>[...$,...R],[$,R]);B.sort((e,t)=>{let s=es().fromString(e.Timestamp),r=es().fromString(t.Timestamp),n=s.getTimeT()-r.getTimeT();return 0===n?s.getNano()-r.getNano():n});let V=(0,l.useMemo)(()=>{let s=$?.filter(e=>!e.__hdx_hidden),r=(0,E.N4)(e,e.highlightedTraceAttributeExpressions,s,z);if(t&&R&&D){let e=R?.filter(e=>!e.__hdx_hidden);r.push(...(0,E.N4)(t,t.highlightedTraceAttributeExpressions,e,D))}return r.sort((e,t)=>e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value))},[e,$,z,t,R,D]);(0,l.useEffect)(()=>{if(c&&i&&null==o){let e=B.findIndex(e=>e.Timestamp===c.timestamp&&e.SpanId===c.spanId&&e.Body===c.body);-1!==e&&i?.({id:B[e].id,type:B[e].type??"",aliasWith:B[e].aliasWith})}},[c,B,i,o]);let W=(0,l.useMemo)(()=>new Set($?.filter(e=>Q().isString(e.SpanId)&&e.SpanId.length>0).map(e=>e.SpanId)??[]),[$]),H=[],q=new Map,X=new Map;for(let e of B??[]){let{type:t,SpanId:s,ParentSpanId:r}=e;if(!s)continue;let n=t===x.GL.Log?`${s}-log`:s,a=t===x.GL.Log?s:r||"",i={...e,children:[]};if(t===x.GL.Trace){if(!X.has(n)){X.set(n,e.id);let t=`placeholder-${n}`,s=q.get(t);s&&(i.children=s.children||[],q.delete(t))}q.set(e.id,i)}if(t!==x.GL.Trace||a&&W.has(a)){let e=X.get(a),t=e?q.get(e):void 0;if(!t){let e=`placeholder-${a}`;(t=q.get(e))||(t={children:[]},q.set(e,t))}t.children.push(i)}else H.push(i)}let[G,K]=(0,l.useState)(new Set),[J,Y]=(0,l.useState)(!0),Z=(0,l.useCallback)(e=>{K(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[K]),U=(e,t,s=0)=>{e.__hdx_hidden||t.push({level:s,...e}),G.has(e.id)||e?.children?.forEach(e=>U(e,t,s+1))},et=[];H.length>0&&H.forEach(e=>U(e,et));let eh=et.length,ex=et.filter(e=>"Error"===e.StatusCode||e.SeverityText?.toLowerCase()==="error").length,eg=`${eh} span${1!==eh?"s":""}`,ef=`${ex} error${1!==ex?"s":""}`,eb=B?.reduce((e,t)=>Math.min(e,new Date(t.Timestamp).getTime()),Number.MAX_SAFE_INTEGER)??0,ey=eb===Number.MAX_SAFE_INTEGER?0:eb,eS=et.map((e,t)=>{let s=1e3*(e.Duration||0),r=new Date(e.Timestamp).getTime(),n=r-ey,l=n+s,{Body:c,ServiceName:d,id:u,type:h,aliasWith:p}=e,g=`${c}`;try{g="string"==typeof c?c:JSON.stringify(c)}catch(e){console.warn("DBTraceWaterfallChart: Couldn't JSON stringify Body",e)}let f=e.SpanAttributes||{},y=f["http.url"]||f["http.method"],v=f["http.url"],j=y&&v?`${g} ${v}`:g,S=J&&e.SpanEvents?e.SpanEvents.map(e=>({timestamp:new Date(e.Timestamp).getTime()-ey,name:e.Name,attributes:e.Attributes||{}})):[],w="Error"==e.StatusCode||"error"===e.SeverityText,_=e.StatusCode||e.SeverityText,E="warn"===e.SeverityText,C=o===u;return{id:u,type:h,aliasWith:p,label:(0,a.jsx)("div",{className:`${function(e){let{isError:t,isWarn:s}=e;return t?"text-danger":s?"text-warning":""}({isError:w,isWarn:E})} ${C&&eO().traceTimelineLabelHighlighted} text-truncate cursor-pointer ps-2 ${eO().traceTimelineLabel}`,role:"button",onClick:()=>{i?.({id:u,type:h??"",aliasWith:p})},children:(0,a.jsxs)("div",{className:"d-flex align-items-center",style:{height:24},children:[Array.from({length:e.level}).map((e,t)=>(0,a.jsx)("div",{style:{borderLeft:"1px solid var(--color-border)",marginLeft:7,width:8,minWidth:8,maxWidth:8,flexGrow:1,flexShrink:0,height:"100%"}},t)),(0,a.jsxs)(en.o,{style:{opacity:+(e.children.length>0)},onClick:()=>{Z(u)},children:[G.has(u)?(0,a.jsx)(ec.A,{size:16,className:"me-1 text-muted-hover"}):(0,a.jsx)(ed.A,{size:16,className:"me-1 text-muted-hover"})," "]}),!b&&(0,a.jsx)(k.E,{span:!0,size:"xxs",me:"xs",pt:"2px",children:e.children.length>0?`(${e.children.length})`:""}),(0,a.jsxs)(N.Y,{gap:0,wrap:"nowrap",children:[h===x.GL.Log?(0,a.jsx)(eu.A,{size:14,className:"align-middle me-2","aria-label":"Correlated Log Line"}):null,(0,a.jsxs)(k.E,{size:"xxs",truncate:"end",span:!0,title:`${d}${y&&v?` | ${j}`:""}`,role:"button",children:[d?`${d} | `:"",j]})]})]})}),style:{marginTop:32*(0===t)},isActive:C,events:[{id:u,type:h,aliasWith:p,start:n,end:l,tooltip:`${j} ${s>=0?`took ${s.toFixed(4)}ms`:""} ${_?`| Status: ${_}`:""}${!isNaN(r)?` | Started at ${m(new Date(r),{format:"withMs"})}`:""}`,color:function(e){let{isError:t,isWarn:s,isHighlighted:r}=e;return t?r?(0,ej.sS)():(0,ej.cM)():s?r?(0,ej.qS)():(0,ej.AD)():r?"#A9AFB7":"#6A7077"}({isError:w,isWarn:E,isHighlighted:C}),body:(0,a.jsx)("span",{children:j}),minWidthPerc:1,isError:w,markers:S}]}}),e_=et.findIndex(e=>e.id===o),eE=d/100*window.innerHeight;return(0,a.jsxs)(a.Fragment,{children:[y&&(0,a.jsx)("form",{onSubmit:C(w),children:(0,a.jsxs)(p.a,{style:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",gap:"12px"},children:[(0,a.jsx)(k.E,{size:"xs",children:"Spans filter"}),(0,a.jsx)(ep.A,{tableConnection:(0,er.VO)(e),placeholder:'Search trace spans w/ Lucene ex. StatusCode:"Error"',language:"lucene",name:"traceWhere",control:_,size:"xs",onSubmit:C(w),"data-testid":"trace-search-input"}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.E,{size:"xs",children:"Logs filter"}),(0,a.jsx)(ep.A,{tableConnection:(0,er.VO)(t),placeholder:'Search trace logs w/ Lucene ex. SeverityText:"error"',language:"lucene",name:"logWhere",control:_,size:"xs",onSubmit:C(w),"data-testid":"log-search-input"})]})]})}),(0,a.jsxs)(N.Y,{my:"xs",justify:"space-between",children:[(0,a.jsxs)(N.Y,{gap:"md",children:[(0,a.jsxs)(k.E,{size:"xs",children:[eg,","," ",(0,a.jsx)("span",{className:ex?"text-danger":"",children:ef})]}),(0,a.jsx)(ea.S,{size:"xs",label:"Show span events",checked:J,onChange:()=>Y(!J)})]}),(0,a.jsxs)("span",{children:[(0,a.jsxs)(ei.M,{underline:"always",onClick:()=>S(e=>!e),size:"xs",children:[y?"Hide Filters":"Show Filters"," ",b&&"(active)"]}),b&&(0,a.jsx)(ei.M,{underline:"always",onClick:T,size:"xs",ms:"xs",children:"Clear Filters"})]})]}),!O&&!P&&(0,a.jsx)(eD.V,{attributes:V}),(0,a.jsx)("div",{style:{position:"relative",overflow:"hidden",maxHeight:`${eE}px`},children:O?(0,a.jsx)("div",{className:"my-3",children:"Loading Traces..."}):P?(0,a.jsxs)(p.a,{mt:"lg",children:[(0,a.jsx)(k.E,{my:"sm",size:"sm",children:"An error occurred while fetching trace data:"}),(0,a.jsx)(el.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:P.message})]}):null==B?(0,a.jsxs)("div",{children:["An unknown error occurred. ",(0,a.jsx)(em.z,{})]}):0===et.length?(0,a.jsx)("div",{className:"my-3",children:"No matching spans or logs found"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eI,{style:{overflowY:"auto",maxHeight:`${eE}px`},scale:1,setScale:()=>{},rowHeight:22,labelWidth:300,onClick:e=>{},onEventClick:e=>{i?.({id:e.id,type:e.type??"",aliasWith:e.aliasWith??[]})},cursors:[],rows:eS,initialScrollRowIndex:e_})})}),(0,a.jsx)(eo.c,{mt:"md",className:ew().resizeYHandle,onMouseDown:u,style:{position:"relative",bottom:0}})]})}let eW=e=>{let t,s,r,n=(0,i.c)(13),{traceSourceId:l,rumSessionId:o,dateRange:c,focusDate:d,serviceName:u,setSubDrawerOpen:m}=e;n[0]!==l?(t={id:l},n[0]=l,n[1]=t):t=n[1];let{data:h}=(0,w.Fo)(t),x=h?.sessionSourceId;n[2]!==x?(s={id:x},n[2]=x,n[3]=s):s=n[3];let{data:p,isLoading:g}=(0,w.Fo)(s);if(!h||!p&&g){let e;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(J.a,{}),n[4]=e):e=n[4],e}return n[5]!==c||n[6]!==d||n[7]!==o||n[8]!==u||n[9]!==p||n[10]!==m||n[11]!==h?(r=(0,a.jsx)(a.Fragment,{children:p?o&&h?(0,a.jsx)(Z.A,{start:c[0],end:c[1],traceSource:h,session:{serviceName:u},sessionSource:p,rumSessionId:o,setDrawerOpen:m,initialTs:d.getTime()}):(0,a.jsx)("span",{className:"p-3 text-muted",children:"Session ID not found."}):(0,a.jsxs)("div",{className:"m-2 fs-8 p-4",children:["No correlated session source found.",(0,a.jsx)("br",{}),"Go to ",(0,a.jsx)(K(),{href:"/team#sources",children:"Team Settings"})," and update the"," ",(0,a.jsx)("strong",{children:h?.name})," source to include the correlated session source."]})}),n[5]=c,n[6]=d,n[7]=o,n[8]=u,n[9]=p,n[10]=m,n[11]=h,n[12]=r):r=n[12],r};function eH(e){return null===e.parentSpanId&&e.rumSessionId}function eq(e){return e.rumSessionId}var eX=s(25062),eG=s(22623),eK=s(6892),eJ=s(57478),eY=s(64467),eZ=((r=eZ||{}).Overview="overview",r.Parsed="parsed",r);function eU(e){let t,s,r,n,o,c,d,m,h,p,f,y,v,j,S,E,C,A,T,$,I,z,L,R=(0,i.c)(74),{childSourceId:M,traceId:D,dateRange:F,focusDate:O,parentSourceId:P,initialRowHighlightHint:B,"data-testid":V}=e;R[0]!==M?(t={defaultValues:{source:M}},R[0]=M,R[1]=t):t=R[1];let{control:W}=(0,ee.mN)(t);R[2]!==W?(s={control:W,name:"source"},R[2]=W,R[3]=s):s=R[3];let H=(0,ee.FH)(s);R[4]!==H?(r={id:H},R[4]=H,R[5]=r):r=R[5];let{data:G,isLoading:K}=(0,w.Fo)(r);R[6]!==P?(n={id:P},R[6]=P,R[7]=n):n=R[7];let{data:J,isLoading:Y}=(0,w.Fo)(n),Z=J?.kind===x.GL.Log?J:G?.kind===x.GL.Log?G:null,U=J?.kind===x.GL.Trace?J:G?.kind===x.GL.Trace?G:null;G?.kind===x.GL.Trace||(J?.kind,x.GL.Trace);let{mutate:Q}=(0,w.sr)();R[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,u.os)(),R[8]=o):o=R[8];let[et,es]=(0,u.ZA)("eventRowWhere",o),ea=J?.traceIdExpression??"";R[9]!==ea?(c={defaultValues:{traceIdExpression:ea}},R[9]=ea,R[10]=c):c=R[10];let{control:ei,handleSubmit:el,setValue:ec}=(0,ee.mN)(c);R[11]!==J||R[12]!==ec?(d=()=>{J?.traceIdExpression&&ec("traceIdExpression",J.traceIdExpression)},R[11]=J,R[12]=ec,R[13]=d):d=R[13];let ed=J?.traceIdExpression;R[14]!==ed||R[15]!==ec?(m=[ed,ec],R[14]=ed,R[15]=ec,R[16]=m):m=R[16],(0,l.useEffect)(d,m);let[eu,em]=(0,l.useState)(!1);R[17]!==es?(h=()=>()=>{es(null)},R[17]=es,R[18]=h):h=R[18],R[19]!==es||R[20]!==D?(p=[D,es],R[19]=es,R[20]=D,R[21]=p):p=R[21],(0,l.useEffect)(h,p);let[eh,ex]=(0,l.useState)("overview"),ep=J?.traceIdExpression,eg=D||"No trace id found for event";R[22]!==ep||R[23]!==eg?(f=(0,a.jsxs)(k.E,{size:"xs",me:"xs",children:[ep,":"," ",eg]}),R[22]=ep,R[23]=eg,R[24]=f):f=R[24],R[25]!==D?(y=null!=D&&(0,a.jsx)(eX.$,{variant:"subtle",size:"xs",onClick:()=>em(eQ),children:(0,a.jsx)(eK.A,{size:14})}),R[25]=D,R[26]=y):y=R[26],R[27]!==f||R[28]!==y?(v=(0,a.jsxs)(g.s,{align:"center",children:[f,y]}),R[27]=f,R[28]=y,R[29]=v):v=R[29];let ef=J?.kind===x.GL.Log?"Trace Source":"Correlated Log Source";return R[30]!==ef?(j=(0,a.jsx)(k.E,{size:"sm",children:ef}),R[30]=ef,R[31]=j):j=R[31],R[32]!==W?(S=(0,a.jsx)(eJ.W,{control:W,name:"source",size:"xs"}),R[32]=W,R[33]=S):S=R[33],R[34]!==j||R[35]!==S?(E=(0,a.jsxs)(N.Y,{gap:"sm",children:[j,S]}),R[34]=j,R[35]=S,R[36]=E):E=R[36],R[37]!==v||R[38]!==E?(C=(0,a.jsxs)(g.s,{align:"center",justify:"space-between",mb:"sm",children:[v,E]}),R[37]=v,R[38]=E,R[39]=C):C=R[39],R[40]!==J||R[41]!==P||R[42]!==eu||R[43]!==D||R[44]!==ei||R[45]!==el||R[46]!==Q?(A=(eu||!D)&&null!=P&&(0,a.jsxs)(b.B,{gap:"xs",children:[(0,a.jsx)(k.E,{size:"xs",children:"Trace ID Expression"}),(0,a.jsxs)(g.s,{children:[(0,a.jsx)(eY.Z,{tableConnection:(0,er.VO)(J),name:"traceIdExpression",placeholder:"Log Trace ID Column (ex. trace_id)",control:ei,size:"xs"}),(0,a.jsx)(eX.$,{ms:"sm",variant:"primary",onClick:el(e=>{let{traceIdExpression:t}=e;null!=J&&Q({source:{...J,traceIdExpression:t}})}),size:"xs",children:"Save"}),(0,a.jsx)(eX.$,{ms:"sm",variant:"secondary",onClick:()=>em(!1),size:"xs",children:"Cancel"})]})]}),R[40]=J,R[41]=P,R[42]=eu,R[43]=D,R[44]=ei,R[45]=el,R[46]=Q,R[47]=A):A=R[47],R[48]===Symbol.for("react.memo_cache_sentinel")?(T=(0,a.jsx)(eo.c,{my:"sm"}),R[48]=T):T=R[48],R[49]!==F||R[50]!==et?.id||R[51]!==O||R[52]!==B||R[53]!==Z||R[54]!==es||R[55]!==D||R[56]!==U?($=U?.kind===x.GL.Trace&&D&&(0,a.jsx)(eV,{traceTableSource:U,logTableSource:Z,traceId:D,dateRange:F,focusDate:O,highlightedRowWhere:et?.id,onClick:es,initialRowHighlightHint:B}),R[49]=F,R[50]=et?.id,R[51]=O,R[52]=B,R[53]=Z,R[54]=es,R[55]=D,R[56]=U,R[57]=$):$=R[57],R[58]!==eh||R[59]!==et||R[60]!==Z||R[61]!==U?(I=null!=U&&null!=et&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.E,{size:"sm",my:"sm",children:"Event Details"}),(0,a.jsx)(_.A,{className:"fs-8 mt-2",items:[{text:"Overview",value:"overview"},{text:"Column Values",value:"parsed"}],activeItem:eh,onClick:e=>ex(e)}),"overview"===eh&&(0,a.jsx)(X.W,{source:et?.type===x.GL.Log&&Z?Z:U,rowId:et?.id,aliasWith:et?.aliasWith}),"parsed"===eh&&(0,a.jsx)(q.dD,{source:et?.type===x.GL.Log&&Z?Z:U,rowId:et?.id,aliasWith:et?.aliasWith})]}),R[58]=eh,R[59]=et,R[60]=Z,R[61]=U,R[62]=I):I=R[62],R[63]!==et||R[64]!==D||R[65]!==U?(z=null!=U&&!et&&D&&(0,a.jsx)(eG.t,{shadow:"xs",p:"xl",mt:"md",children:(0,a.jsx)(en.o,{mih:100,children:(0,a.jsx)(k.E,{size:"sm",children:"Please select a span above to view details."})})}),R[63]=et,R[64]=D,R[65]=U,R[66]=z):z=R[66],R[67]!==V||R[68]!==C||R[69]!==A||R[70]!==$||R[71]!==I||R[72]!==z?(L=(0,a.jsxs)("div",{"data-testid":V,children:[C,A,T,$,I,z]}),R[67]=V,R[68]=C,R[69]=A,R[70]=$,R[71]=I,R[72]=z,R[73]=L):L=R[73],L}function eQ(e){return!e}let e0=(0,l.createContext)({});var e1=((n=e1||{}).Overview="overview",n.Parsed="parsed",n.Debug="debug",n.Trace="trace",n.ServiceMap="serviceMap",n.Context="context",n.Replay="replay",n.Infrastructure="infrastructure",n);let e2=({rowId:e,aliasWith:t,source:s,isNestedPanel:r=!1,setSubDrawerOpen:n,onClose:c,breadcrumbPath:h=[],onBreadcrumbClick:f})=>{let b,{data:v,isLoading:j,isSuccess:C}=(0,q.k1)({source:s,rowId:e,aliasWith:t}),{dbSqlRowTableConfig:N}=(0,l.useContext)(e0),k=(0,l.useCallback)(e=>{let t=h.length;if(t>e)c(),f?.(e);else{if(t===e)return;f?.(e)}},[h.length,f,c]),A=(0,l.useMemo)(()=>!!s.resourceAttributesExpression||!!s.eventAttributesExpression,[s.eventAttributesExpression,s.resourceAttributesExpression]),T="trace"===s.kind?"trace":A?"overview":"parsed",[z,L]=(0,u.ZA)("sidePanelTab",(0,u.Oq)(Object.values(e1)).withDefault(T)),[R,M]=(0,l.useState)(T),D=r?M:L,F=r?R:z,O=v?.data?.[0],P=O?.__hdx_timestamp;b=new Date("number"==typeof P?1e3*P:P);let B=(0,w.N8)(s),V=d()(O?.__hdx_body)?O.__hdx_body:O?.__hdx_body!==void 0?JSON.stringify(O.__hdx_body):void 0,W=O?.__hdx_severity_text,G=(0,l.useMemo)(()=>{let e=[];return(s.kind===x.GL.Trace||s.kind===x.GL.Log)&&s.highlightedRowAttributeExpressions&&e.push(...s.highlightedRowAttributeExpressions),s.serviceNameExpression&&e.push({sqlExpression:s.serviceNameExpression}),v?(0,E.N4)(s,e,v.data||[],v.meta||[]):[]},[s,v]),K=(0,l.useMemo)(()=>[(0,o.A)(b,{minutes:-60}),(0,o.A)(b,{minutes:60})],[b]),J=(0,l.useMemo)(()=>[(0,o.A)(b,{hours:-4}),(0,o.A)(b,{hours:4})],[b]),Z=O?.__hdx_trace_id,U="log"===s.kind?s.traceSourceId:"trace"===s.kind?s.logSourceId:void 0,Q="trace"===s.kind?s.id:s.traceSourceId,ee=Z&&Q,{rumSessionId:et,rumServiceName:es}=(e=>{let t,s,r,n,a=(0,i.c)(42),{sourceId:l,traceId:o,dateRange:c,enabled:d}=e;a[0]!==l?(t={id:l},a[0]=l,a[1]=t):t=a[1];let{data:u}=(0,w.Fo)(t),{getFieldExpression:m}=(0,Y.A)(u);e:{let e,t,r,n,i,l,c,d,h;if(!u||!o||!m){s=void 0;break e}let x=`${u.timestampValueExpression}`;a[2]!==x?(e={valueExpression:x,alias:"Timestamp"},a[2]=x,a[3]=e):e=a[3];let p=u.resourceAttributesExpression??"ResourceAttributes";a[4]!==m||a[5]!==p?(t=m(p,"rum.sessionId"),a[4]=m,a[5]=p,a[6]=t):t=a[6];let g=`${t}`;a[7]!==g?(r={valueExpression:g,alias:"rumSessionId"},a[7]=g,a[8]=r):r=a[8];let f=u.resourceAttributesExpression??"ResourceAttributes";a[9]!==m||a[10]!==f?(n=m(f,"service.name"),a[9]=m,a[10]=f,a[11]=n):n=a[11];let b=`${n}`;a[12]!==b?(i={valueExpression:b,alias:"serviceName"},a[12]=b,a[13]=i):i=a[13];let y=`${u.parentSpanIdExpression}`;a[14]!==y?(l={valueExpression:y,alias:"parentSpanId"},a[14]=y,a[15]=l):l=a[15],a[16]!==i||a[17]!==l||a[18]!==e||a[19]!==r?(c=[e,r,i,l],a[16]=i,a[17]=l,a[18]=e,a[19]=r,a[20]=c):c=a[20],a[21]===Symbol.for("react.memo_cache_sentinel")?(d={limit:1e4},a[21]=d):d=a[21];let v=`${u.traceIdExpression} = '${o}'`;a[22]!==u.connection||a[23]!==u.from||a[24]!==u.timestampValueExpression||a[25]!==c||a[26]!==v?(h={select:c,from:u.from,timestampValueExpression:u.timestampValueExpression,limit:d,connection:u.connection,where:v,whereLanguage:"sql"},a[22]=u.connection,a[23]=u.from,a[24]=u.timestampValueExpression,a[25]=c,a[26]=v,a[27]=h):h=a[27],s=h}let h=s,x=void 0!==d&&d&&!!u&&!!h;a[28]!==h||a[29]!==c||a[30]!==x?(r={config:h,dateRangeStartInclusive:!0,dateRange:c,enabled:x},a[28]=h,a[29]=c,a[30]=x,a[31]=r):r=a[31];let{data:p}=eP(r);t:{let e,t,s;a[32]!==p?.data?(e=p?.data||[],a[32]=p?.data,a[33]=e):e=a[33];let r=e;a[34]!==r?(t=r.find(eH),a[34]=r,a[35]=t):t=a[35];let i=t;if(!i){let e;a[36]!==r?(e=r.find(eq),a[36]=r,a[37]=e):e=a[37],i=e}if(i){let e;a[38]!==i.rumSessionId||a[39]!==i.serviceName?(e={rumServiceName:i.serviceName,rumSessionId:i.rumSessionId},a[38]=i.rumSessionId,a[39]=i.serviceName,a[40]=e):e=a[40],n=e;break t}a[41]===Symbol.for("react.memo_cache_sentinel")?(s={rumServiceName:void 0,rumSessionId:void 0},a[41]=s):s=a[41],n=s}return n})({sourceId:Q,traceId:Z,dateRange:K,enabled:null!=e}),er=(0,l.useMemo)(()=>{try{if(!s?.resourceAttributesExpression||!O)return!1;let e=O.__hdx_resource_attributes;return e?.["k8s.pod.uid"]!=null||e?.["k8s.node.name"]!=null}catch(e){return console.error(e),!1}},[s,O]),en=(0,l.useMemo)(()=>{if(O)return{timestamp:O.__hdx_timestamp,spanId:O.__hdx_span_id,body:O.__hdx_body}},[O]);return j?(0,a.jsx)("div",{className:eO().loadingState,children:"Loading..."}):C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.a,{p:"sm",children:(0,a.jsx)(y.A,{date:b,attributes:G,mainContent:V,mainContentHeader:B,severityText:W,breadcrumbPath:h,onBreadcrumbClick:k})}),(0,a.jsx)(_.A,{"data-testid":"side-panel-tabs",className:"fs-8 mt-2",items:[...A?[{text:"Overview",value:"overview"}]:[],{text:"Column Values",value:"parsed"},{text:"Trace",value:"trace"},...ee?[{text:"Service Map",value:"serviceMap"}]:[],{text:"Surrounding Context",value:"context"},...null!=et?[{text:"Session Replay",value:"replay"}]:[],...er?[{text:"Infrastructure",value:"infrastructure"}]:[]],activeItem:F,onClick:e=>D(e)}),"overview"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(X.W,{"data-testid":"side-panel-tab-overview",source:s,rowId:e,aliasWith:t,hideHeader:!0})}),"trace"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(p.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,a.jsx)(eU,{"data-testid":"side-panel-tab-trace",parentSourceId:s.id,childSourceId:U,traceId:Z,dateRange:K,focusDate:b,initialRowHighlightHint:en})})}),"serviceMap"===F&&ee&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(g.s,{p:"sm",flex:1,children:(0,a.jsx)($,{traceId:Z,traceTableSourceId:Q,dateRange:K})})}),"parsed"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(q.dD,{"data-testid":"side-panel-tab-parsed",source:s,rowId:e,aliasWith:t})}),"context"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(I.A,{"data-testid":"side-panel-tab-context",source:s,dbSqlRowTableConfig:N,rowData:O,rowId:e,breadcrumbPath:h,onBreadcrumbClick:k})}),"replay"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)("div",{className:"overflow-hidden flex-grow-1",children:(0,a.jsx)(eW,{"data-testid":"side-panel-tab-replay",dateRange:J,focusDate:b,setSubDrawerOpen:n,traceSourceId:Q,serviceName:es,rumSessionId:et})})}),"infrastructure"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(p.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,a.jsx)(H,{"data-testid":"side-panel-tab-infrastructure",source:s,rowData:O,rowId:e})})}),(0,a.jsx)(S.ir,{})]}):(0,a.jsx)("div",{className:eO().loadingState,children:"Error loading row data"})};function e3(e){let t,s,r,n,o,c,d,x,g,b,y,S,w,_=(0,i.c)(39),{onClose:E,rowId:N,aliasWith:k,source:A,isNestedPanel:T,breadcrumbPath:$,onBreadcrumbClick:I}=e;_[0]!==$?(t=void 0===$?[]:$,_[0]=$,_[1]=t):t=_[1];let z=t,L=(0,C.Y)()+10,{size:R,startResize:M}=(0,v.A)(80),[D,F]=(0,l.useState)(!1);(0,l.useContext)(e0),_[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,u.Oq)(Object.values(e1)),_[2]=s):s=_[2];let[,O]=(0,u.ZA)("tab",s);_[3]===Symbol.for("react.memo_cache_sentinel")?(r={},_[3]=r):r=_[3];let{clear:P}=j(r);_[4]!==P||_[5]!==T||_[6]!==E||_[7]!==O?(n=()=>{T||O(null),P(),E()},_[4]=P,_[5]=T,_[6]=E,_[7]=O,_[8]=n):n=_[8];let B=n;_[9]===Symbol.for("react.memo_cache_sentinel")?(o=["esc"],_[9]=o):o=_[9];let V=!1===D;_[10]!==V?(c={enabled:V},_[10]=V,_[11]=c):c=_[11],(0,h.vC)(o,B,c);let W=null!=N,H=!T;_[12]!==B||_[13]!==D?(d=()=>{D||B()},_[12]=B,_[13]=D,_[14]=d):d=_[14];let q=`${R}vw`;return _[15]===Symbol.for("react.memo_cache_sentinel")?(x={body:{padding:"0",height:"100vh"}},_[15]=x):x=_[15],_[16]!==M?(g=(0,a.jsx)(p.a,{className:eO().panelDragBar,onMouseDown:M}),_[16]=M,_[17]=g):g=_[17],_[18]!==B||_[19]!==k||_[20]!==z||_[21]!==T||_[22]!==I||_[23]!==N||_[24]!==A?(b=(0,a.jsx)(m.ErrorBoundary,{fallbackRender:e5,children:(0,a.jsx)(e2,{source:A,rowId:N,aliasWith:k,onClose:B,isNestedPanel:T,breadcrumbPath:z,setSubDrawerOpen:F,onBreadcrumbClick:I})}),_[18]=B,_[19]=k,_[20]=z,_[21]=T,_[22]=I,_[23]=N,_[24]=A,_[25]=b):b=_[25],_[26]!==g||_[27]!==b?(y=(0,a.jsxs)("div",{className:eO().panel,"data-testid":"row-side-panel",children:[g,b]}),_[26]=g,_[27]=b,_[28]=y):y=_[28],_[29]!==L||_[30]!==y?(S=(0,a.jsx)(C.S.Provider,{value:L,children:y}),_[29]=L,_[30]=y,_[31]=S):S=_[31],_[32]!==L||_[33]!==H||_[34]!==d||_[35]!==q||_[36]!==S||_[37]!==W?(w=(0,a.jsx)(f._,{opened:W,withCloseButton:!1,withOverlay:H,onClose:d,position:"right",size:q,styles:x,zIndex:L,children:S}),_[32]=L,_[33]=H,_[34]=d,_[35]=q,_[36]=S,_[37]=W,_[38]=w):w=_[38],w}function e5(e){return(0,a.jsxs)(b.B,{children:[(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),(0,a.jsx)("div",{className:"px-2 py-1 m-2 fs-7 font-monospace bg-body p-4",children:e?.error?.message})]})}},51305:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=s(83232).A},53356:e=>{e.exports={filtersContainer:"DashboardFiltersModal_filtersContainer___IcUM",filterActionButton:"DashboardFiltersModal_filterActionButton__LU0OY",deleteButton:"DashboardFiltersModal_deleteButton__bIpnm"}},54167:(e,t,s)=>{"use strict";var r=s(34615);s(78666),s(25496),s(64700),r.N,r.M,r.P,t.oU=r.Q,r.O,r.L},57030:(e,t,s)=>{"use strict";s.d(t,{A:()=>eC});var r=s(6029),n=s(75155),a=s(55729),i=s(75828),l=s.n(i),o=s(47687),c=s.n(o),d=s(41038),u=s(1909),m=s(3145),h=s(95991),x=s(90124),p=s(63085),g=s(76013),f=s(3635),b=s(25062),y=s(92789),v=s(79621),j=s(10822),S=s(62118),w=s(97684),_=s(39614),E=s(81244),C=s(12853),N=s(50374),k=s(64467),A=s(40147),T=s(66692),$=s(86823),I=s(97039),z=s(61441),L=s(10708),R=s(56795),M=s(61411),D=s(81055),F=s(90515),O=s(45172),P=s(94502),B=s(80925),V=s(92917),W=s(81408),H=s.n(W);function q(e){return Math.max(e.getCurrentTime(),0)}let X=(0,a.memo)(({url:e})=>{let t,s;try{t=new URL(e)}catch{}try{let e=new URLSearchParams(t?.search??"");for(let[t,r]of(s=[],e.entries()))s.push({key:t,value:r})}catch{}return(0,r.jsxs)(I.j,{shadow:"md",position:"bottom-start",children:[(0,r.jsx)(I.j.Target,{children:(0,r.jsx)("div",{className:H().playerHeaderUrl,children:e||"Session Player"})}),e&&(0,r.jsx)(I.j.Dropdown,{children:(0,r.jsxs)("table",{className:"table fs-8 mb-0",children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(L.A,{size:14})}),(0,r.jsx)("td",{children:t?.host})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(R.A,{size:14})}),(0,r.jsx)("td",{children:t?.pathname})]}),s&&s.length>0&&s.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.key})}),(0,r.jsx)("td",{children:e.value})]},e.key))]})})]})});function G({config:{dateRange:e,serviceName:t,sessionId:s,sourceId:n},focus:i,setPlayerTime:o,playerState:d,setPlayerState:u,playerSpeed:m,skipInactive:h,setPlayerStartTimestamp:x,setPlayerEndTimestamp:p,setPlayerFullWidth:b,playerFullWidth:y,resizeKey:v,getSessionSourceFieldExpression:j}){let S=(0,V.uy)(),w=(0,a.useRef)(null),_=(0,a.useRef)(null),E=(0,a.useRef)(null),C=(0,a.useRef)([]),N=(0,a.useRef)(0),[k,A]=(0,a.useState)(0),I=(0,a.useRef)(c()(A,100,{leading:!0,trailing:!0})),[L,R]=(0,a.useState)(!1),[W,G]=(0,a.useState)(!1),K="",{isFetching:J,abort:Y}=(0,B.S)({serviceName:t,sessionId:s,sourceId:n,startDate:e?.[0]??new Date,endDate:e?.[1]??new Date,limit:1e6,onEvent:e=>{try{let{b:t,ck:s,tcks:r}=e;if(K+=t,!s||s===r){let e=JSON.parse(K);null!=E.current?E.current.addEvent(e):(null!=x&&0===C.current.length&&x(e.timestamp),C.current.push(e)),I.current(e.timestamp),N.current=e.timestamp,K=""}}catch(e){S&&console.error(e),K=""}C.current.length>5&&R(!0)},onEnd:()=>{R(!0),G(!0),null!=p&&(null!=E.current?p(N.current??0):C.current.length>0&&p(C.current[C.current.length-1].timestamp??0))},getSessionSourceFieldExpression:j},{keepPreviousData:!0,shouldAbortPendingRequest:!0}),[Z,U]=(0,a.useState)(""),Q=(0,a.useCallback)(()=>{if(null!=E.current)try{E.current.play(q(E.current))}catch(e){console.error(e)}},[E]),ee=(0,a.useCallback)(e=>{if(null!=E.current)try{E.current.pause(e)}catch(e){console.error(e)}},[E]);(0,T.vC)(["space"],()=>{"playing"===d?u("paused"):"paused"===d&&u("playing")});let et=(0,a.useRef)(o);(0,a.useEffect)(()=>{et.current=o},[o]);let es=(0,a.useRef)(0),er=(0,a.useCallback)(()=>{null!=E.current&&E.current.service.state.matches("playing")&&et.current(Math.round(E.current.getMetaData().startTime+q(E.current))),es.current=requestAnimationFrame(er)},[]);(0,a.useEffect)(()=>(es.current=requestAnimationFrame(er),()=>{cancelAnimationFrame(es.current)}),[er]),(0,a.useEffect)(()=>{null!=E.current&&("playing"===d?Q():"paused"===d&&ee())},[d,Q,ee]),(0,a.useEffect)(()=>{null!=E.current&&("playing"===d?(ee(),E.current?.setConfig({speed:m,skipInactive:h}),Q()):"paused"===d&&E.current?.setConfig({speed:m,skipInactive:h}))},[d,m,h,ee,Q]);let en=(0,a.useCallback)(()=>{null!=w.current&&null!=_.current&&(_.current.style.transform="scale(0.0001)",window.requestAnimationFrame(()=>{if(null==w.current||null==_.current)return;let e=w.current.getBoundingClientRect(),t=E?.current?.iframe?.offsetWidth??1280,s=E?.current?.iframe?.offsetHeight??720,r=e.width/t,n=e.height/s;_.current.style.transform=`scale(${Math.min(r,n)})`}))},[w,_]);(0,a.useEffect)(()=>(window.addEventListener("resize",en),()=>window.removeEventListener("resize",en)),[en]),(0,a.useEffect)(()=>{en()},[v,en]);let[ea,ei]=(0,a.useState)(!1);(0,a.useEffect)(()=>{C.current.length<2||null==_.current||null!=E.current||(E.current=new $.B(C.current,{root:_.current,mouseTail:!0,pauseAnimation:!1,showWarning:S,skipInactive:!0}),ei(!0),S&&(window.__hdx_replayer=E.current),E.current.enableInteract(),E.current.on("event-cast",e=>{try{(e?.type===3&&e?.data?.source===4||4===e.type)&&setTimeout(()=>{en()},0),e?.type===4&&U(e.data.href)}catch(e){S&&console.error(e)}}),"playing"===d&&E.current.getMetaData().endTime>(i?.ts??0)&&(null!=i&&ee(i.ts-E.current.getMetaData().startTime),Q()),setTimeout(()=>{en()},0))},[en,i,ee,L,d,Q,S]),(0,a.useEffect)(()=>{L&&ea&&!(k<(i?.ts?i.ts+1e3:1/0))&&i?.setBy!=="player"&&null!=E.current&&(ee(i?.ts==null?0:i?.ts-E.current.getMetaData().startTime),en(),"playing"===d&&Q())},[i,ee,u,d,Q,L,ea,en,k]),(0,a.useEffect)(()=>()=>{null!=E.current&&(E.current?.destroy(),E.current=null),Y()},[Y]);let el=!1===L&&J,eo=!1===W&&(E.current?.getMetaData()?.endTime??0)<(i?.ts??0);return(0,a.useEffect)(()=>{null!=E.current&&null!=i&&E.current.getMetaData().endTime>i.ts&&"playing"===d&&E.current?.service?.state?.matches("paused")&&(ee(i.ts-E.current.getMetaData().startTime),Q())},[k,i,d,ee,Q]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:H().playerHeader,children:[(0,r.jsx)(g.M,{onClick:()=>b(!y),size:"sm",color:"gray",children:y?(0,r.jsx)(M.A,{size:14}):(0,r.jsx)(D.A,{size:14})}),(0,r.jsx)(z.i,{value:Z,children:({copied:e,copy:t})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X,{url:Z}),(0,r.jsx)(g.M,{onClick:t,title:"Copy URL",variant:"secondary",size:"sm",children:e?(0,r.jsx)(F.A,{size:14}):(0,r.jsx)(O.A,{size:14})})]})})]}),(0,r.jsxs)("div",{className:H().playerContainer,children:[el||eo?(0,r.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[(0,r.jsx)(P.A,{className:"spin-animate",size:14}),eo?"Buffering to time...":"Loading replay..."]}):W&&null==E.current?(0,r.jsx)("div",{className:"text-center",children:"No replay available for this session, most likely due to this session starting and ending in a background tab."}):null,(0,r.jsx)("div",{ref:w,className:l()(H().domPlayerWrapper,"overflow-hidden",{"d-none":el||eo,started:(E.current?.getCurrentTime()??0)>0,[H().domPlayerWrapperPaused]:"paused"===d}),children:(0,r.jsx)("div",{className:"player rr-block",ref:_})})]})]})}var K=s(831),J=s.n(K),Y=s(4308),Z=s(91021),U=s(29766);let Q=U.Ay.object({body:U.Ay.string().nullish(),component:U.Ay.string().nullish(),durationInMs:U.Ay.number(),"error.message":U.Ay.string().nullish(),"http.method":U.Ay.string().nullish(),"http.status_code":U.Ay.string().nullish(),"http.url":U.Ay.string().nullish(),id:U.Ay.string(),"location.href":U.Ay.string().nullish(),"otel.library.name":U.Ay.string(),parent_span_id:U.Ay.string(),severity_text:U.Ay.string(),span_id:U.Ay.string(),span_name:U.Ay.string(),timestamp:U.Ay.string(),trace_id:U.Ay.string(),type:U.Ay.string().nullish()});var ee=s(9953),et=s(7565),es=s(2326),er=s.n(es);let en=e=>{let t,s,i,l,o,c,d,u=(0,n.c)(28),{min:m,max:h,value:x,markers:g,playerState:f,onChange:b,setPlayerState:y}=e,v=(0,et.a)();u[0]!==v||u[1]!==m?(t=e=>{let t=Math.max(e-m,0),s=Math.floor(t/1e3/60),r=Math.floor(t/1e3%60),n=`${s}:${r<10?"0":""}${r}`,a=v(e,{format:"short"});return`${n} at ${a}`},u[0]=v,u[1]=m,u[2]=t):t=u[2];let j=t;u[3]!==g||u[4]!==h||u[5]!==m||u[6]!==b?(s=g?.map(e=>(0,r.jsx)(p.m,{color:e.isError?"red":"gray",label:(0,V.EJ)(e?.description??"",240,"...",/\n/),position:"top",withArrow:!0,children:(0,r.jsx)("div",{className:er().markerDot,style:{backgroundColor:e.isSuccess?"var(--color-text-success)":e.isError?"var(--color-text-danger)":"var(--color-text-muted)",left:`${(e.ts-m)/(h-m)*100}%`},onClick:()=>b(e.ts)})},e.id)),u[3]=g,u[4]=h,u[5]=m,u[6]=b,u[7]=s):s=u[7];let S=s,[w,_]=a.useState(f);u[8]!==f||u[9]!==y?(i=()=>{_(f),y("paused")},u[8]=f,u[9]=y,u[10]=i):i=u[10];let E=i;u[11]!==w||u[12]!==y?(l=()=>{y(w)},u[11]=w,u[12]=y,u[13]=l):l=u[13];let C=l;u[14]!==S?(o=(0,r.jsx)("div",{className:er().markers,children:S}),u[14]=S,u[15]=o):o=u[15];let N="playing"===f?"green":"gray",k=x||m;return u[16]!==E||u[17]!==C||u[18]!==h||u[19]!==m||u[20]!==b||u[21]!==N||u[22]!==k||u[23]!==j?(c=(0,r.jsx)(ee.A,{color:N,size:"sm",min:m,max:h,value:k,step:1e3,label:j,onChange:b,onMouseDown:E,onMouseUp:C}),u[16]=E,u[17]=C,u[18]=h,u[19]=m,u[20]=b,u[21]=N,u[22]=k,u[23]=j,u[24]=c):c=u[24],u[25]!==o||u[26]!==c?(d=(0,r.jsxs)("div",{className:er().wrapper,children:[o,c]}),u[25]=o,u[26]=c,u[27]=d):d=u[27],d};function ea(e){let{timestamp:t,durationInMs:s}=e,r=new Date(t).getTime(),n=new Date(r).getTime()+s;return{...e,startOffset:r,endOffset:n}}function ei(e){return e.data}function el(e){return e.success}function eo(e){return Q.safeParse(e)}var ec=s(43370),ed=s(34834),eu=s(67214),em=s(53993),eh=s(91104),ex=s(54396),ep=s(56906),eg=s(69986),ef=s(98632),eb=s(34027),ey=s(21440),ev=s(70727);let ej={navigation:(0,r.jsx)(ex.A,{size:14}),chat:(0,r.jsx)(ep.A,{size:14}),network:(0,r.jsx)(eg.A,{size:14}),custom:(0,r.jsx)(ef.A,{size:14})},eS=a.forwardRef((e,t)=>{let s,a,i,o,c,d,u,m,h,x,p=(0,n.c)(30),{dataIndex:g,event:f,isHighlighted:b,onClick:y,onTimeClick:v}=e;return p[0]!==f.isError||p[1]!==f.isSuccess||p[2]!==b?(s=l()(H().eventRow,{[H().eventRowError]:f.isError,[H().eventRowSuccess]:f.isSuccess,[H().eventRowHighlighted]:b}),p[0]=f.isError,p[1]=f.isSuccess,p[2]=b,p[3]=s):s=p[3],p[4]!==f.eventSource?(a=ej[f.eventSource]||(0,r.jsx)(eb.A,{size:14}),p[4]=f.eventSource,p[5]=a):a=p[5],p[6]!==a?(i=(0,r.jsx)("div",{className:H().eventRowIcon,children:a}),p[6]=a,p[7]=i):i=p[7],p[8]!==f.duration?(o=f.duration>0&&(0,r.jsxs)("span",{children:[f.duration,"ms"]}),p[8]=f.duration,p[9]=o):o=p[9],p[10]!==f.title||p[11]!==o?(c=(0,r.jsxs)("div",{className:H().eventRowTitle,children:[f.title," ",o]}),p[10]=f.title,p[11]=o,p[12]=c):c=p[12],p[13]!==f.description?(d=(0,r.jsx)("div",{className:H().eventRowDescription,title:f.description,children:f.description}),p[13]=f.description,p[14]=d):d=p[14],p[15]!==y||p[16]!==c||p[17]!==d?(u=(0,r.jsxs)("div",{className:H().eventRowContent,onClick:y,children:[c,d]}),p[15]=y,p[16]=c,p[17]=d,p[18]=u):u=p[18],p[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(S.A,{size:12,className:"me-1"}),p[19]=m):m=p[19],p[20]!==f.formattedTimestamp||p[21]!==v?(h=(0,r.jsxs)("div",{className:H().eventRowTimestamp,onClick:v,children:[m,f.formattedTimestamp]}),p[20]=f.formattedTimestamp,p[21]=v,p[22]=h):h=p[22],p[23]!==g||p[24]!==t||p[25]!==s||p[26]!==i||p[27]!==u||p[28]!==h?(x=(0,r.jsxs)("div",{"data-index":g,ref:t,className:s,children:[i,u,h]}),p[23]=g,p[24]=t,p[25]=s,p[26]=i,p[27]=u,p[28]=h,p[29]=x):x=p[29],x}),ew=({queriedConfig:e,aliasMap:t,onClick:s,onTimeClick:n,focus:i,minTs:l,showRelativeTime:o,eventsFollowPlayerPosition:c})=>{let{data:d,isLoading:u}=(0,Z.HD)(e,{placeholderData:e=>e,queryKey:["SessionEventList",e]}),m=(0,et.a)(),h=a.useMemo(()=>d?.data?.map(e=>Q.safeParse(e)).filter(e=>e.success).map(e=>e.data)??[],[d?.data]),x=(0,ev.Ay)({meta:d?.meta,aliasMap:t}),p=a.useMemo(()=>h.map(e=>{let{timestamp:t,durationInMs:s}=e,r=new Date(t).getTime(),n=new Date(r).getTime()+s,a=e["http.url"]??"",i=Number(e["http.status_code"]??""),c=e["http.method"]??"",d=(0,V.Up)(a),u=""!=c&&null!=c&&null!=a&&""!=a,h=e["error.message"],x=e.body??"",p=e.component,g=e.span_name,f=e["location.href"]??"",b=e["otel.library.name"],y=(0,V.Up)(f),v="custom-action"===b,j="routeChange"===g||"documentLoad"===g,S=e.severity_text?.toLowerCase()==="error"||"error"===p||i>499;return{id:e.id,row:e,isError:S,isSuccess:!S&&i<400&&i>99,eventSource:j?"navigation":u?"network":v?"custom":"intercom.onShow"===g?"chat":"log",title:j?"Navigated":"console.error"===g?"console.error":"console.log"===g?"console.log":"console.warn"===g?"console.warn":a.length>0?`${i} ${c}`:"intercom.onShow"===g?"Intercom Chat Opened":v||"console"===p?g:"console.error",description:j?y:null!=h&&h.length>0?h:"console"===p?x??"":a.length>0?d:"",timestamp:new Date(r),formattedTimestamp:o?(0,V.ax)(r-l):m(r,{format:"time"}),duration:n-r}})??[],[h,o,l,m]),g=a.useRef(null),f=(0,ey.Te)({count:p.length,getScrollElement:()=>g.current,estimateSize:()=>36}),b=(0,eh.D)(p.findIndex(e=>e.timestamp.getTime()>=(i?.ts??0)),500);return(a.useEffect(()=>{f&&b>=0&&c&&f.scrollToIndex(b,{align:"center"})},[b,c,f]),u)?(0,r.jsxs)(ed.B,{p:"sm",gap:"xs",children:[(0,r.jsx)(eu.E,{height:36}),(0,r.jsx)(eu.E,{height:36}),(0,r.jsx)(eu.E,{height:36})]}):(0,r.jsx)(em.F,{h:"100%",scrollbarSize:4,viewportRef:g,children:(0,r.jsx)("div",{className:H().eventListContainer,children:(0,r.jsx)("div",{style:{height:`${f.getTotalSize()}px`,width:"100%",position:"relative"},children:f.getVirtualItems().map(e=>{let t=p[e.index];return(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},children:(0,r.jsx)(eS,{event:t,dataIndex:e.index,isHighlighted:b===e.index,ref:f.measureElement,onClick:()=>s(x(t.row)),onTimeClick:()=>n(t.timestamp.getTime())})},e.key)})})})})},e_=(0,a.memo)(function(e){let t,s,a,i,l,o=(0,n.c)(18),{playerState:c,setPlayerState:d,setFocus:u,playbackRange:m,focus:h,queriedConfig:x}=e,p=m[0].getTime(),g=m[1].getTime(),f=1e3*Math.ceil(m[1].getTime()/1e3),b=1e3*Math.floor(m[0].getTime()/1e3);o[0]!==x?(t={placeholderData:Y.rX,queryKey:["PlayBar",x]},o[0]=x,o[1]=t):t=o[1];let{data:y}=(0,Z.HD)(x,t);y?.data,o[2]!==y?.data?(s=y?.data?.map(eo).filter(el).map(ei)??[],o[2]=y?.data,o[3]=s):s=o[3];let v=s;o[4]!==v||o[5]!==g||o[6]!==p?(a=J()(v.map(ea).filter(e=>{let{startOffset:t}=e;return t>=p&&t<=g}).map(e=>{let t=e.span_name,s=e["location.href"]??"",r=(0,V.Up)(s),n=e["error.message"]??"",a=e["http.url"]??"",i=Number(e["http.status_code"]??""),l=e["http.method"]??"",o=(0,V.Up)(a),c=e.severity_text?.toLowerCase()==="error"||"error"===e.component||"console"===e.component||i>=399;return{id:e.id,ts:e.startOffset,percentage:Math.round((e.startOffset-p)/(g-p)*100),description:"routeChange"===t||"documentLoad"===t?`Navigated to ${r}`:a.length>0?`${i} ${l}${a.length>0?` ${o}`:""}`:null!=n&&n.length>0?n:"intercom.onShow"===t?"Intercom Chat Opened":e.body??"",isError:c,isSuccess:!c&&i<400&&i>99}})??[],"percentage"),o[4]=v,o[5]=g,o[6]=p,o[7]=a):a=o[7];let j=a,S=h?.ts;return o[8]!==u?(i=e=>{u({ts:e,setBy:"slider"})},o[8]=u,o[9]=i):i=o[9],o[10]!==j||o[11]!==f||o[12]!==b||o[13]!==c||o[14]!==d||o[15]!==S||o[16]!==i?(l=(0,r.jsx)(en,{markers:j,min:b,max:f,value:S,onChange:i,setPlayerState:d,playerState:c}),o[10]=j,o[11]=f,o[12]=b,o[13]=c,o[14]=d,o[15]=S,o[16]=i,o[17]=l):l=o[17],l});function eE(e,t){let{valueExpression:s,alias:r}=t;return e[r]=s,e}function eC(e){let t,s,i,o,T,$,I,z,L,R,M,D,F,O,P,B,W,q,X,K,J,Y,Z,U,Q,ee,es,er,en,ea,ei,el,eo,ed,eu,em,eh,ex,ep,eg,ef,eb,ey,ev,ej,eS,eC,ek,eA,eT,e$,eI,ez,eL,eR,eM,eD,eF,eO,eP,eB,eV,eW,eH,eq,eX,eG,eK=(0,n.c)(192),{traceSource:eJ,sessionSource:eY,session:eZ,setDrawerOpen:eU,rumSessionId:eQ,start:e0,end:e1,initialTs:e2,whereLanguage:e3}=e,e5=void 0===e3?"lucene":e3,[e4,e6]=(0,a.useState)(void 0);eK[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],eK[0]=t):t=eK[0];let[e7,e8]=(0,a.useState)(t);eK[1]===Symbol.for("react.memo_cache_sentinel")?(s=d.GJ.withOptions({history:"replace"}),eK[1]=s):s=eK[1];let[e9,te]=(0,d.ZA)("ts",s),tt=(0,V.ZC)(e9);eK[2]!==e2?(i=null!=e2?{ts:e2,setBy:"parent"}:void 0,eK[2]=e2,eK[3]=i):i=eK[3];let[ts,tr]=(0,a.useState)(i);eK[4]!==tt||eK[5]!==e9?(o=()=>{null==tt&&null!=e9&&tr({ts:e9,setBy:"url"})},T=[tt,e9],eK[4]=tt,eK[5]=e9,eK[6]=o,eK[7]=T):(o=eK[6],T=eK[7]),(0,a.useEffect)(o,T),eK[8]!==te?($=c()(async e=>{te(e)},1e3),eK[8]=te,eK[9]=$):$=eK[9];let tn=(0,a.useRef)($).current;eK[10]!==te?(I=()=>()=>{te(null)},z=[te],eK[10]=te,eK[11]=I,eK[12]=z):(I=eK[11],z=eK[12]),(0,a.useEffect)(I,z),eK[13]!==te?(L=e=>{"player"===e.setBy?tn(e.ts):te(e.ts),tr(e)},eK[13]=te,eK[14]=L):L=eK[14];let ta=L,[ti,tl]=(0,a.useState)("paused"),[to,tc]=(0,a.useState)(void 0);eK[15]===Symbol.for("react.memo_cache_sentinel")?(R={history:"push"},eK[15]=R):R=eK[15];let[td,tu]=(0,d.ZA)("session_q",R);eK[16]!==to||eK[17]!==td?(M=()=>{null!=td&&null==to&&tc(td)},D=[td,to],eK[16]=to,eK[17]=td,eK[18]=M,eK[19]=D):(M=eK[18],D=eK[19]),(0,a.useEffect)(M,D);let tm=td??"";eK[20]!==tu?(F=()=>()=>{tu(null,{history:"replace"})},O=[tu],eK[20]=tu,eK[21]=F,eK[22]=O):(F=eK[21],O=eK[22]),(0,a.useEffect)(F,O);let[th,tx]=(0,a.useState)("highlighted"),[tp,tg]=(0,V.Mj)("hdx-session-subpanel-show-relative-time",!1),[tf,tb]=(0,V.Mj)("hdx-session-subpanel-player-speed",1),[ty,tv]=(0,V.Mj)("hdx-session-subpanel-skip-inactive",!0),[tj,tS]=(0,V.Mj)("hdx-session-subpanel-events-follow-player-position",!0),[tw,t_]=(0,a.useState)(e0.getTime()+144e5),[tE,tC]=(0,a.useState)(e1.getTime()-144e5);eK[23]!==tw?(P=new Date(tw),eK[23]=tw,eK[24]=P):P=eK[24],eK[25]!==tE?(B=new Date(tE),eK[25]=tE,eK[26]=B):B=eK[26],eK[27]!==P||eK[28]!==B?(W=[P,B],eK[27]=P,eK[28]=B,eK[29]=W):W=eK[29];let tN=W,{getFieldExpression:tk}=(0,A.A)(eY);eK[30]!==e1||eK[31]!==eQ||eK[32]!==tm||eK[33]!==e0||eK[34]!==th||eK[35]!==eJ||eK[36]!==e5?(q={traceSource:eJ,rumSessionId:eQ,where:tm,whereLanguage:e5,start:e0,end:e1,tab:th},eK[30]=e1,eK[31]=eQ,eK[32]=tm,eK[33]=e0,eK[34]=th,eK[35]=eJ,eK[36]=e5,eK[37]=q):q=eK[37];let{eventsConfig:tA,aliasMap:tT}=function(e){let t,s,r,a,i,l,o=(0,n.c)(96),{traceSource:c,rumSessionId:d,where:u,whereLanguage:m,start:h,end:x,tab:p}=e,{getFieldExpression:g}=(0,A.A)(c);e:{let e,s,r,n,a,i,l,d,u,m,h,x,p,f,b,y,v,j,S,w,_,E,C,N,k;if(!g){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}let A=c.eventAttributesExpression??"SpanAttributes";o[1]!==g||o[2]!==A?(e=g(A,"message"),o[1]=g,o[2]=A,o[3]=e):e=o[3];let T=`${e}`;o[4]!==T?(s={valueExpression:T,alias:"body"},o[4]=T,o[5]=s):s=o[5];let $=c.eventAttributesExpression??"SpanAttributes";o[6]!==g||o[7]!==$?(r=g($,"component"),o[6]=g,o[7]=$,o[8]=r):r=o[8];let I=`${r}`;o[9]!==I?(n={valueExpression:I,alias:"component"},o[9]=I,o[10]=n):n=o[10];let z=`toFloat64OrZero(toString(${c.durationExpression})) * pow(10, 3) / pow(10, toInt8OrZero(toString(${c.durationPrecision})))`;o[11]!==z?(a={valueExpression:z,alias:"durationInMs"},o[11]=z,o[12]=a):a=o[12];let L=c.eventAttributesExpression??"SpanAttributes";o[13]!==g||o[14]!==L?(i=g(L,"error.message"),o[13]=g,o[14]=L,o[15]=i):i=o[15];let R=`${i}`;o[16]!==R?(l={valueExpression:R,alias:"error.message"},o[16]=R,o[17]=l):l=o[17];let M=c.eventAttributesExpression??"SpanAttributes";o[18]!==g||o[19]!==M?(d=g(M,"http.method"),o[18]=g,o[19]=M,o[20]=d):d=o[20];let D=`${d}`;o[21]!==D?(u={valueExpression:D,alias:"http.method"},o[21]=D,o[22]=u):u=o[22];let F=c.eventAttributesExpression??"SpanAttributes";o[23]!==g||o[24]!==F?(m=g(F,"http.status_code"),o[23]=g,o[24]=F,o[25]=m):m=o[25];let O=`${m}`;o[26]!==O?(h={valueExpression:O,alias:"http.status_code"},o[26]=O,o[27]=h):h=o[27];let P=c.eventAttributesExpression??"SpanAttributes";o[28]!==g||o[29]!==P?(x=g(P,"http.url"),o[28]=g,o[29]=P,o[30]=x):x=o[30];let B=`${x}`;o[31]!==B?(p={valueExpression:B,alias:"http.url"},o[31]=B,o[32]=p):p=o[32];let V=`toString(cityHash64(${c.traceIdExpression}, ${c.parentSpanIdExpression}, ${c.spanIdExpression}))`;o[33]!==V?(f={valueExpression:V,alias:"id"},o[33]=V,o[34]=f):f=o[34];let W=c.eventAttributesExpression??"SpanAttributes";o[35]!==g||o[36]!==W?(b=g(W,"location.href"),o[35]=g,o[36]=W,o[37]=b):b=o[37];let H=`${b}`;o[38]!==H?(y={valueExpression:H,alias:"location.href"},o[38]=H,o[39]=y):y=o[39],o[40]===Symbol.for("react.memo_cache_sentinel")?(v={valueExpression:"ScopeName",alias:"otel.library.name"},o[40]=v):v=o[40];let q=`${c.parentSpanIdExpression}`;o[41]!==q?(j={valueExpression:q,alias:"parent_span_id"},o[41]=q,o[42]=j):j=o[42];let X=`${c.statusCodeExpression}`;o[43]!==X?(S={valueExpression:X,alias:"severity_text"},o[43]=X,o[44]=S):S=o[44];let G=`${c.spanIdExpression}`;o[45]!==G?(w={valueExpression:G,alias:"span_id"},o[45]=G,o[46]=w):w=o[46];let K=`${c.spanNameExpression}`;o[47]!==K?(_={valueExpression:K,alias:"span_name"},o[47]=K,o[48]=_):_=o[48];let J=`${c.timestampValueExpression}`;o[49]!==J?(E={valueExpression:J,alias:"timestamp"},o[49]=J,o[50]=E):E=o[50];let Y=`${c.traceIdExpression}`;o[51]!==Y?(C={valueExpression:Y,alias:"trace_id"},o[51]=Y,o[52]=C):C=o[52],o[53]===Symbol.for("react.memo_cache_sentinel")?(N={valueExpression:"CAST('span', 'String')",alias:"type"},o[53]=N):N=o[53],o[54]!==a||o[55]!==l||o[56]!==u||o[57]!==h||o[58]!==p||o[59]!==f||o[60]!==y||o[61]!==j||o[62]!==S||o[63]!==w||o[64]!==_||o[65]!==E||o[66]!==C||o[67]!==s||o[68]!==n?(k=[s,n,a,l,u,h,p,f,y,v,j,S,w,_,E,C,N],o[54]=a,o[55]=l,o[56]=u,o[57]=h,o[58]=p,o[59]=f,o[60]=y,o[61]=j,o[62]=S,o[63]=w,o[64]=_,o[65]=E,o[66]=C,o[67]=s,o[68]=n,o[69]=k):k=o[69],t=k}let f=t,b=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:>299 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[70]!==b?(s={type:"lucene",condition:b},o[70]=b,o[71]=s):s=o[71];let y=s;t:{let e;if(!g){r=void 0;break t}let t=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:* 
      OR ${c.eventAttributesExpression}.component:"console" 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[72]!==t?(e={type:"lucene",condition:t},o[72]=t,o[73]=e):e=o[73],r=e}let v=r;s:{let e,t,s,r;if(!g||!f||!v){a=void 0;break s}o[74]!==x||o[75]!==h?(e=[h,x],o[74]=x,o[75]=h,o[76]=e):e=o[76];let n=`${c.timestampValueExpression} ASC`;o[77]===Symbol.for("react.memo_cache_sentinel")?(t={limit:4e3,offset:0},o[77]=t):t=o[77];let i="highlighted"===p?y:v;o[78]!==i?(s=[i],o[78]=i,o[79]=s):s=o[79],o[80]!==f||o[81]!==s||o[82]!==e||o[83]!==n||o[84]!==c.connection||o[85]!==c.from||o[86]!==c.implicitColumnExpression||o[87]!==c.timestampValueExpression||o[88]!==u||o[89]!==m?(r={select:f,from:c.from,dateRange:e,whereLanguage:m,where:u,timestampValueExpression:c.timestampValueExpression,implicitColumnExpression:c.implicitColumnExpression,connection:c.connection,orderBy:n,limit:t,filters:s},o[80]=f,o[81]=s,o[82]=e,o[83]=n,o[84]=c.connection,o[85]=c.from,o[86]=c.implicitColumnExpression,o[87]=c.timestampValueExpression,o[88]=u,o[89]=m,o[90]=r):r=o[90],a=r}let j=a;r:{let e;if(!g){i=void 0;break r}o[91]!==f?(e=f.reduce(eE,{}),o[91]=f,o[92]=e):e=o[92],i=e}let S=i;return o[93]!==S||o[94]!==j?(l={eventsConfig:j,aliasMap:S},o[93]=S,o[94]=j,o[95]=l):l=o[95],l}(q),[t$,tI]=(0,a.useState)(!1);eK[38]!==tf||eK[39]!==tb?(X=()=>{1==tf?tb(2):2==tf?tb(4):4==tf?tb(8):8==tf&&tb(1)},eK[38]=tf,eK[39]=tb,eK[40]=X):X=eK[40];let tz=X,tL=tN[0].getTime(),tR=tN[1].getTime();eK[41]===Symbol.for("react.memo_cache_sentinel")?(K=()=>{tl(eN)},eK[41]=K):K=eK[41];let tM=K;eK[42]!==ts?.ts||eK[43]!==tL||eK[44]!==ta?(J=()=>{ta({ts:Math.max((ts?.ts??tL)-15e3,tL),setBy:"skip-backward"})},eK[42]=ts?.ts,eK[43]=tL,eK[44]=ta,eK[45]=J):J=eK[45],ts?.ts;let tD=J;eK[46]!==ts?.ts||eK[47]!==tR||eK[48]!==tL||eK[49]!==ta?(Y=()=>{ta({ts:Math.min((ts?.ts??tL)+15e3,tR),setBy:"skip-forward"})},eK[46]=ts?.ts,eK[47]=tR,eK[48]=tL,eK[49]=ta,eK[50]=Y):Y=eK[50],ts?.ts;let tF=Y;eK[51]!==tm?(Z={values:{where:tm}},eK[51]=tm,eK[52]=Z):Z=eK[52];let{control:tO,handleSubmit:tP}=(0,u.mN)(Z);eK[53]!==tu?(U=e=>{tu(e.where)},eK[53]=tu,eK[54]=U):U=eK[54];let tB=U;eK[55]!==eU?(Q=e=>{eU(!0),e6(e.where),e8(e.aliasWith)},eK[55]=eU,eK[56]=Q):Q=eK[56];let tV=Q;eK[57]!==ta?(ee=e=>{ta({ts:e,setBy:"timeline"})},eK[57]=ta,eK[58]=ee):ee=eK[58];let tW=ee;eK[59]!==ts?.setBy||eK[60]!==ts?.ts||eK[61]!==ta?(es=e=>{(ts?.setBy!=="player"||ts?.ts!==e)&&ta({ts:e,setBy:"player"})},eK[59]=ts?.setBy,eK[60]=ts?.ts,eK[61]=ta,eK[62]=es):es=eK[62];let tH=es;eK[63]!==e7||eK[64]!==e4||eK[65]!==eU||eK[66]!==eJ?(er=null!=e4&&eJ&&(0,r.jsx)(h.Z,{children:(0,r.jsx)(N.A,{source:eJ,rowId:e4,aliasWith:e7,onClose:()=>{eU(!1),e6(void 0)}})}),eK[63]=e7,eK[64]=e4,eK[65]=eU,eK[66]=eJ,eK[67]=er):er=eK[67],eK[68]!==t$?(en=l()(H().eventList,{"d-none":t$}),eK[68]=t$,eK[69]=en):en=eK[69],eK[70]===Symbol.for("react.memo_cache_sentinel")?(ea={zIndex:100,width:"100%"},eK[70]=ea):ea=eK[70],eK[71]!==tP||eK[72]!==tB?(ei=tP(tB),eK[71]=tP,eK[72]=tB,eK[73]=ei):ei=eK[73],eK[74]!==tO||eK[75]!==tP||eK[76]!==tB||eK[77]!==eJ||eK[78]!==e5?(el="sql"===e5?(0,r.jsx)(k.Z,{tableConnection:(0,m.VO)(eJ),control:tO,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",language:"sql",size:"xs",enableHotkey:!0,onSubmit:tP(tB)}):(0,r.jsx)(ec.A,{tableConnection:(0,m.VO)(eJ),control:tO,name:"where",language:"lucene",size:"xs",placeholder:"Search your events w/ Lucene ex. column:foo",enableHotkey:!0,onSubmit:tP(tB)}),eK[74]=tO,eK[75]=tP,eK[76]=tB,eK[77]=eJ,eK[78]=e5,eK[79]=el):el=eK[79],eK[80]!==ei||eK[81]!==el?(eo=(0,r.jsx)("form",{style:ea,onSubmit:ei,children:el}),eK[80]=ei,eK[81]=el,eK[82]=eo):eo=eK[82],eK[83]===Symbol.for("react.memo_cache_sentinel")?(ed=[{value:"highlighted",label:"Highlighted"},{value:"events",label:"All Events"}],eK[83]=ed):ed=eK[83],eK[84]===Symbol.for("react.memo_cache_sentinel")?(eu=e=>tx(e),eK[84]=eu):eu=eK[84],eK[85]!==th?(em=(0,r.jsx)(x.I,{flex:1,size:"xs",data:ed,value:th,onChange:eu}),eK[85]=th,eK[86]=em):em=eK[86];let tq=tj?"filled":"subtle";eK[87]!==tj||eK[88]!==tS?(eh=()=>tS(!tj),eK[87]=tj,eK[88]=tS,eK[89]=eh):eh=eK[89],eK[90]===Symbol.for("react.memo_cache_sentinel")?(ex=(0,r.jsx)(v.A,{size:18}),eK[90]=ex):ex=eK[90],eK[91]!==tq||eK[92]!==eh?(ep=(0,r.jsx)(p.m,{label:"Sync with player position",color:"gray",children:(0,r.jsx)(g.M,{size:"md",color:"gray",variant:tq,onClick:eh,children:ex})}),eK[91]=tq,eK[92]=eh,eK[93]=ep):ep=eK[93],eK[94]!==em||eK[95]!==ep?(eg=(0,r.jsxs)(f.Y,{gap:6,children:[em,ep]}),eK[94]=em,eK[95]=ep,eK[96]=eg):eg=eK[96],eK[97]!==eo||eK[98]!==eg?(ef=(0,r.jsxs)("div",{className:H().eventListHeader,children:[eo,eg]}),eK[97]=eo,eK[98]=eg,eK[99]=ef):ef=eK[99],eK[100]!==tT||eK[101]!==tA||eK[102]!==tj||eK[103]!==ts||eK[104]!==tL||eK[105]!==tV||eK[106]!==tW||eK[107]!==tp?(eb=tA&&tT&&(0,r.jsx)(ew,{eventsFollowPlayerPosition:tj,aliasMap:tT,queriedConfig:tA,onClick:tV,focus:ts,onTimeClick:tW,minTs:tL,showRelativeTime:tp}),eK[100]=tT,eK[101]=tA,eK[102]=tj,eK[103]=ts,eK[104]=tL,eK[105]=tV,eK[106]=tW,eK[107]=tp,eK[108]=eb):eb=eK[108],eK[109]!==en||eK[110]!==ef||eK[111]!==eb?(ey=(0,r.jsxs)("div",{className:en,children:[ef,eb]}),eK[109]=en,eK[110]=ef,eK[111]=eb,eK[112]=ey):ey=eK[112],eK[113]!==e1||eK[114]!==ts||eK[115]!==tk||eK[116]!==t$||eK[117]!==tf||eK[118]!==ti||eK[119]!==eQ||eK[120]!==eZ||eK[121]!==eY||eK[122]!==tH||eK[123]!==ty||eK[124]!==e0?(ev=tk&&(0,r.jsx)(G,{playerState:ti,setPlayerState:tl,focus:ts,setPlayerTime:tH,config:{serviceName:eZ.serviceName,sourceId:eY.id,sessionId:eQ,dateRange:[e0,e1]},playerSpeed:tf,skipInactive:ty,setPlayerStartTimestamp:t_,setPlayerEndTimestamp:tC,setPlayerFullWidth:tI,playerFullWidth:t$,resizeKey:`${t$}`,getSessionSourceFieldExpression:tk}),eK[113]=e1,eK[114]=ts,eK[115]=tk,eK[116]=t$,eK[117]=tf,eK[118]=ti,eK[119]=eQ,eK[120]=eZ,eK[121]=eY,eK[122]=tH,eK[123]=ty,eK[124]=e0,eK[125]=ev):ev=eK[125],eK[126]!==tA||eK[127]!==ts||eK[128]!==tN||eK[129]!==ti||eK[130]!==ta?(ej=tA&&(0,r.jsx)(e_,{playerState:ti,setPlayerState:tl,focus:ts,setFocus:ta,playbackRange:tN,queriedConfig:tA}),eK[126]=tA,eK[127]=ts,eK[128]=tN,eK[129]=ti,eK[130]=ta,eK[131]=ej):ej=eK[131],eK[132]!==ej?(eS=(0,r.jsx)("div",{className:H().playerPlaybar,children:ej}),eK[132]=ej,eK[133]=eS):eS=eK[133],eK[134]!==tg||eK[135]!==tp?(eC=()=>tg(!tp),eK[134]=tg,eK[135]=tp,eK[136]=eC):eC=eK[136],eK[137]!==ts?.ts||eK[138]!==tR||eK[139]!==tL||eK[140]!==tp?(ek=tp?(0,r.jsxs)(r.Fragment,{children:[(0,V.ax)((ts?.ts??0)-tL),(0,r.jsxs)("span",{className:"fw-normal ms-2",children:[" / ",(0,V.ax)(tR-tL)]})]}):(0,r.jsx)(et.H,{value:ts?.ts||tL,format:"time"}),eK[137]=ts?.ts,eK[138]=tR,eK[139]=tL,eK[140]=tp,eK[141]=ek):ek=eK[141],eK[142]!==eC||eK[143]!==ek?(eA=(0,r.jsx)("div",{className:H().playerTimestamp,children:(0,r.jsx)(p.m,{label:"Toggle relative time",color:"gray",children:(0,r.jsx)(b.$,{variant:"subtle",color:"gray",onClick:eC,size:"compact-xs",children:ek})})}),eK[142]=eC,eK[143]=ek,eK[144]=eA):eA=eK[144];let tX=(ts?.ts||0)<=tL;eK[145]===Symbol.for("react.memo_cache_sentinel")?(eT=(0,r.jsx)(j.A,{size:18}),eK[145]=eT):eT=eK[145],eK[146]!==tD||eK[147]!==tX?(e$=(0,r.jsx)(p.m,{label:"Go 15 seconds back",color:"gray",children:(0,r.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tD,disabled:tX,children:eT})}),eK[146]=tD,eK[147]=tX,eK[148]=e$):e$=eK[148];let tG="playing"===ti?"Pause":"Play";eK[149]!==ti?(eI=(0,r.jsx)(g.M,{variant:"secondary",size:"lg",radius:"xl",onClick:tM,children:"paused"===ti?(0,r.jsx)(S.A,{size:20}):(0,r.jsx)(w.A,{size:20})}),eK[149]=ti,eK[150]=eI):eI=eK[150],eK[151]!==tG||eK[152]!==eI?(ez=(0,r.jsx)(p.m,{label:tG,color:"gray",children:eI}),eK[151]=tG,eK[152]=eI,eK[153]=ez):ez=eK[153];let tK=(ts?.ts||0)>=tR;return eK[154]===Symbol.for("react.memo_cache_sentinel")?(eL=(0,r.jsx)(_.A,{size:18}),eK[154]=eL):eL=eK[154],eK[155]!==tF||eK[156]!==tK?(eR=(0,r.jsx)(p.m,{label:"Skip 15 seconds",color:"gray",children:(0,r.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tF,disabled:tK,children:eL})}),eK[155]=tF,eK[156]=tK,eK[157]=eR):eR=eK[157],eK[158]!==e$||eK[159]!==ez||eK[160]!==eR?(eM=(0,r.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[e$,ez,eR]}),eK[158]=e$,eK[159]=ez,eK[160]=eR,eK[161]=eM):eM=eK[161],eK[162]!==ty?(eD=ty?(0,r.jsx)(E.A,{size:18,className:"pe-1"}):(0,r.jsx)(C.A,{size:18,className:"pe-1"}),eK[162]=ty,eK[163]=eD):eD=eK[163],eK[164]!==tv||eK[165]!==ty?(eF=()=>tv(!ty),eK[164]=tv,eK[165]=ty,eK[166]=eF):eF=eK[166],eK[167]===Symbol.for("react.memo_cache_sentinel")?(eO=(0,r.jsx)(y.c,{orientation:"vertical",ml:"sm"}),eK[167]=eO):eO=eK[167],eK[168]!==eD||eK[169]!==eF?(eP=(0,r.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eD,onClick:eF,children:["Skip Idle",eO]}),eK[168]=eD,eK[169]=eF,eK[170]=eP):eP=eK[170],eK[171]!==tf?(eB=(0,r.jsxs)("span",{className:"fw-bold pe-1",children:[tf,"x"]}),eK[171]=tf,eK[172]=eB):eB=eK[172],eK[173]===Symbol.for("react.memo_cache_sentinel")?(eV=(0,r.jsx)(y.c,{orientation:"vertical",ml:"sm"}),eK[173]=eV):eV=eK[173],eK[174]!==tz||eK[175]!==eB?(eW=(0,r.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eB,onClick:tz,children:["Speed",eV]}),eK[174]=tz,eK[175]=eB,eK[176]=eW):eW=eK[176],eK[177]!==eP||eK[178]!==eW?(eH=(0,r.jsxs)(f.Y,{align:"center",justify:"flex-end",gap:"xs",children:[eP,eW]}),eK[177]=eP,eK[178]=eW,eK[179]=eH):eH=eK[179],eK[180]!==eA||eK[181]!==eM||eK[182]!==eH?(eq=(0,r.jsxs)("div",{className:H().playerToolbar,children:[eA,eM,eH]}),eK[180]=eA,eK[181]=eM,eK[182]=eH,eK[183]=eq):eq=eK[183],eK[184]!==ev||eK[185]!==eS||eK[186]!==eq?(eX=(0,r.jsxs)("div",{className:H().player,children:[ev,eS,eq]}),eK[184]=ev,eK[185]=eS,eK[186]=eq,eK[187]=eX):eX=eK[187],eK[188]!==er||eK[189]!==ey||eK[190]!==eX?(eG=(0,r.jsxs)("div",{className:H().wrapper,children:[er,ey,eX]}),eK[188]=er,eK[189]=ey,eK[190]=eX,eK[191]=eG):eG=eK[191],eG}function eN(e){return"playing"===e?"paused":"playing"}},58541:(e,t,s)=>{"use strict";s.d(t,{g:()=>N});var r=s(6029),n=s(55729),a=s(11335),i=s(1909),l=s(59589),o=s(29135),c=s(82641),d=s(92495),u=s(34834),m=s(43517),h=s(18341),x=s(3635),p=s(59029),g=s(39603),f=s(25062),b=s(60665),y=s(32963),v=s(95352),j=s(6876),S=s(36600),w=s(92917);let _=["{{title}}","{{body}}","{{link}}","{{state}}","{{startTime}}","{{endTime}}","{{eventId}}"],E=_.join(" | "),C=()=>e=>""===e.state.doc.toString().trim()?[]:(0,l.cp)()(e);function N({webhook:e,onClose:t,onSuccess:s}){let N=(0,S.Kh)(),k=j.Ay.useSaveWebhook(),A=j.Ay.useUpdateWebhook(),T=j.Ay.useTestWebhook(),$=null!=e,I=(0,i.mN)({defaultValues:{service:e?.service||c.x.Slack,name:e?.name||"",url:e?.url||"",description:e?.description||"",body:e?.body||"",headers:e?.headers?JSON.stringify(e.headers,null,2):""}});(0,n.useEffect)(()=>{e&&I.reset({service:e.service,name:e.name,url:e.url,description:e.description,body:e.body,headers:e.headers?JSON.stringify(e.headers,null,2):""},{})},[e,I]);let z=async e=>{let t,{service:s,url:r,body:n,headers:i}=e;if(i&&i.trim())try{t=JSON.parse(i)}catch(t){let e=t instanceof Error?t.message:"Invalid JSON format";b.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let l=n;n||(s===c.x.Generic?l=`{"text": "${E}"}`:s===c.x.IncidentIO&&(l=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));try{await T.mutateAsync({service:s,url:r,body:l,headers:t}),b.$e.show({color:"green",message:"Test webhook sent successfully"})}catch(t){console.error(t);let e="Failed to send test webhook. Please check your webhook configuration.";if(t instanceof a.H)try{let s=await t.response.json();s.message&&(e=s.message)}catch(e){console.error("Failed to parse error response:",e)}b.$e.show({message:e,color:"red",autoClose:5e3})}},L=async r=>{let{service:n,name:i,url:l,description:o,body:d,headers:u}=r;try{let r;if(u&&u.trim())try{r=JSON.parse(u)}catch(t){let e=t instanceof Error?t.message:"Invalid JSON format";b.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let a=d;d||(n===c.x.Generic?a=`{"text": "${E}"}`:n===c.x.IncidentIO&&(a=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));let m={service:n,name:i,url:l,description:o||"",body:a,headers:r},h=$?await A.mutateAsync({id:e._id,...m}):await k.mutateAsync(m);b.$e.show({color:"green",message:`Webhook ${$?"updated":"created"} successfully`}),s(h.data?._id),t()}catch(t){console.error(t);let e=`Something went wrong. Please contact ${N} team.`;if(t instanceof a.H)try{let s=await t.response.json();if(s.error?.issues&&Array.isArray(s.error.issues)){let t=s.error.issues.map(e=>{let t=e.path.join(".");return`${t}: ${e.message}`}).join(", ");e=`Validation error: ${t}`}else e=s.message?s.message:JSON.stringify(s)}catch(e){console.error("Failed to parse error response:",e)}b.$e.show({message:e,color:"red",autoClose:5e3})}},R=(0,i.FH)({control:I.control,name:"service"});return(0,r.jsx)("form",{onSubmit:I.handleSubmit(L),children:(0,r.jsxs)(u.B,{mt:"sm",children:[(0,r.jsx)(m.E,{children:$?"Edit Webhook":"Create Webhook"}),(0,r.jsx)(h.s.Group,{label:"Service Type",required:!0,value:R,onChange:e=>I.setValue("service",e),children:(0,r.jsxs)(x.Y,{mt:"xs",children:[(0,r.jsx)(h.s,{value:c.x.Slack,label:"Slack"}),(0,r.jsx)(h.s,{value:c.x.IncidentIO,label:"incident.io"}),(0,r.jsx)(h.s,{value:c.x.Generic,label:"Generic"})]})}),(0,r.jsx)(p.k,{label:"Webhook Name",placeholder:"Post to #dev-alerts",required:!0,error:I.formState.errors.name?.message,...I.register("name",{required:!0})}),(0,r.jsx)(p.k,{label:"Webhook URL",placeholder:R===c.x.Slack?"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX":R===c.x.IncidentIO?"https://api.incident.io/v2/alert_events/http/ZZZZZZZZ?token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX":"https://example.com/webhook",type:"url",required:!0,error:I.formState.errors.url?.message,...I.register("url",{required:!0,validate:(e,t)=>t.service===c.x.Slack?(0,d.AB)(e)||"URL must be valid and have a slack.com domain":(0,w.AY)(e)||"URL must be valid"})}),(0,r.jsx)(p.k,{label:"Webhook Description (optional)",placeholder:"To be used for dev alerts",error:I.formState.errors.description?.message,...I.register("description")}),R===c.x.Generic&&[(0,r.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Headers (optional)"},"1"),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(i.xI,{name:"headers",control:I.control,render:({field:e})=>(0,r.jsx)(v.Ay,{height:"100px",extensions:[(0,l.Pq)(),(0,o.bu)(C()),(0,v.qf)(`{
	"Authorization": "Bearer token",
	"X-Custom-Header": "value"
}`)],theme:"dark",value:e.value,onChange:t=>e.onChange(t)})})},"2"),(0,r.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Body (optional)"},"3"),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(i.xI,{name:"body",control:I.control,render:({field:e})=>(0,r.jsx)(v.Ay,{height:"100px",extensions:[(0,l.Pq)(),(0,o.bu)(C()),(0,v.qf)(`{
	"text": "${E}"
}`)],theme:"dark",value:e.value,onChange:t=>e.onChange(t)})})},"4"),(0,r.jsxs)(g.F,{icon:(0,r.jsx)(y.A,{size:16}),className:"mb-4",color:"gray",children:[(0,r.jsx)("span",{children:"Currently the body supports the following message template variables:"}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:_.map((e,t)=>(0,r.jsxs)("span",{children:[(0,r.jsx)("code",{children:e}),t<_.length-1&&", "]},t))})]},"5")],(0,r.jsxs)(x.Y,{justify:"space-between",children:[(0,r.jsxs)(x.Y,{children:[(0,r.jsx)(f.$,{variant:"primary",type:"submit",loading:k.isPending||A.isPending,children:$?"Update Webhook":"Add Webhook"}),(0,r.jsx)(f.$,{variant:"secondary",onClick:I.handleSubmit(z),loading:T.isPending,type:"button",children:"Test Webhook"})]}),(0,r.jsx)(f.$,{variant:"secondary",onClick:t,type:"reset",children:"Cancel"})]})]})})}},59017:(e,t,s)=>{"use strict";s.d(t,{V:()=>d});var r=s(6029),n=s(75155),a=s(55729),i=s(23935),l=s(78253),o=s(50374),c=s(94937);function d(e){let t,s,d,m,h,x=(0,n.c)(21),{attributes:p}=e;x[0]!==p?(t=void 0===p?[]:p,x[0]=p,x[1]=t):t=x[1];let g=t,[f,b]=(0,a.useState)(!1),{onPropertyAddClick:y,generateSearchUrl:v,source:j}=(0,a.useContext)(o.D);x[2]!==g||x[3]!==f?(s=g.sort(u).slice(0,f?g.length:12),x[2]=g,x[3]=f,x[4]=s):s=x[4];let S=s,w=g.length-S.length;if(x[5]!==j?.id||x[6]!==v||x[7]!==y||x[8]!==S){let e;x[10]!==j?.id||x[11]!==v||x[12]!==y?(e=e=>{let{displayedKey:t,value:s,sql:n,lucene:a,source:i}=e;return(0,r.jsx)(c.A,{displayedKey:t,name:a||n,nameLanguage:a?"lucene":"sql",value:s,...y&&j?.id===i.id?{onPropertyAddClick:y,sqlExpression:n}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:v?(e,t)=>v({where:e||"",whereLanguage:t??"lucene",source:i}):void 0},`${t}-${s}-${i.id}`)},x[10]=j?.id,x[11]=v,x[12]=y,x[13]=e):e=x[13],d=S.map(e),x[5]=j?.id,x[6]=v,x[7]=y,x[8]=S,x[9]=d}else d=x[9];return x[14]!==g.length||x[15]!==w||x[16]!==f?(m=g.length>12&&(0,r.jsx)(i.M,{size:"xs",onClick:()=>b(!f),children:f?"Show Less":`Show ${w} More...`}),x[14]=g.length,x[15]=w,x[16]=f,x[17]=m):m=x[17],x[18]!==d||x[19]!==m?(h=(0,r.jsxs)(l.s,{wrap:"wrap",gap:"2px",mb:"md",align:"baseline",children:[d,m]}),x[18]=d,x[19]=m,x[20]=h):h=x[20],h}function u(e,t){return e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value)}},61629:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(6029),n=s(75155),a=s(43517),i=s(92917);function l(e){let t,s,l,o=(0,n.c)(7);o[0]!==e?({level:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]);let c=(0,i.lO)(t),d="error"===c?"red":"warn"===c?"var(--color-chart-warning)":"gray";return o[3]!==t||o[4]!==s||o[5]!==d?(l=(0,r.jsx)(a.E,{component:"span",size:"xs",c:d,...s,children:t}),o[3]=t,o[4]=s,o[5]=d,o[6]=l):l=o[6],l}},62759:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(75155),n=s(41038),a=s(28959);let i=e=>{let t,s,i,l,o=(0,r.c)(10);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.os)(),o[0]=t):t=o[0];let[c,d]=(0,n.ZA)("filters",t);o[1]!==d?(s=(e,t)=>{d(s=>{let{filters:r}=(0,a.mA)(s??[]);return null==t?delete r[e]:r[e]={included:new Set([t]),excluded:new Set},(0,a.hd)(r,{stringifyKeys:!1})})},o[1]=d,o[2]=s):s=o[2];let u=s;if(o[3]!==c||o[4]!==e){let{filters:t}=(0,a.mA)(c??[]),s={};for(let{expression:r}of e)r in t&&(s[r]=t[r]);i={valuesForExistingFilters:s,queriesForExistingFilters:(0,a.hd)(s,{stringifyKeys:!0})},o[3]=c,o[4]=e,o[5]=i}else i=o[5];let{valuesForExistingFilters:m,queriesForExistingFilters:h}=i;return o[6]!==h||o[7]!==u||o[8]!==m?(l={filterValues:m,filterQueries:h,setFilterValue:u},o[6]=h,o[7]=u,o[8]=m,o[9]=l):l=o[9],l}},64441:(e,t,s)=>{"use strict";s.d(t,{A:()=>_});var r=s(6029),n=s(75155),a=s(55729),i=s(63085),l=s(8737),o=s(43517),c=s(60481),d=s(20294),u=s(78253),m=s(22623),h=s(25062),x=s(15216),p=s(16232),g=s(7565),f=s(57820),b=s(92917),y=s(59017),v=s(50374),j=s(61629);let S=e=>"getTime"in e&&!isNaN(e.getTime());function w(e){let t,s,a,u=(0,n.c)(9),{breadcrumbPath:m,onNavigateToLevel:h}=e;u[0]!==h?(t=e=>{h?.(e)},u[0]=h,u[1]=t):t=u[1];let x=t;e:{let e;if(0===m.length){let e;u[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],u[2]=e):e=u[2],s=e;break e}if(u[3]!==m||u[4]!==x){let t;e=[],m.forEach((t,s)=>{let n,a=t.rowData?(n=(t.rowData.__hdx_body||"").trim()).length>200?`${n.substring(0,197)}...`:n:"";e.push((0,r.jsx)(i.m,{label:a,disabled:!a,position:"bottom",withArrow:!0,children:(0,r.jsx)(l.N,{onClick:()=>x(s),style:{textDecoration:"none"},children:(0,r.jsx)(o.E,{size:"sm",c:"blue",style:{cursor:"pointer"},children:0===s?"Original Event":t.label})})},`crumb-${s}`))}),u[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(o.E,{size:"sm",children:"Selected Event"},"current"),u[6]=t):t=u[6],e.push(t),u[3]=m,u[4]=x,u[5]=e}else e=u[5];s=e}let p=s;return 0===m.length?null:(u[7]!==p?(a=(0,r.jsx)(c.a,{mb:"sm",pb:"sm",className:"border-bottom border-dark",children:(0,r.jsx)(d.B,{separator:"›",separatorMargin:"xs",children:p})}),u[7]=p,u[8]=a):a=u[8],a)}function _(e){let t,s,i,l,d,_,C,N,k,A,T,$,I,z=(0,n.c)(41),{attributes:L,mainContent:R,mainContentHeader:M,date:D,severityText:F,breadcrumbPath:O,onBreadcrumbClick:P}=e;z[0]!==L?(t=void 0===L?[]:L,z[0]=L,z[1]=t):t=z[1];let B=t,V=void 0===R?"":R;z[2]!==O?(s=void 0===O?[]:O,z[2]=O,z[3]=s):s=z[3];let W=s,[H,q]=a.useState(!1),{generateSearchUrl:X}=(0,a.useContext)(v.D),G=V.length>2e3;z[4]!==H||z[5]!==V?(i=H?V:V?.slice(0,2e3),z[4]=H,z[5]=V,z[6]=i):i=z[6];let K=i,[J,Y]=(0,a.useState)(null),[Z,U]=(0,a.useState)(0);z[7]!==J?(l=()=>{if(!J)return;let e=()=>{U(J.offsetHeight)};e();let t=new ResizeObserver(e);return t.observe(J),()=>{t.disconnect()}},d=[J],z[7]=J,z[8]=l,z[9]=d):(l=z[8],d=z[9]),(0,a.useEffect)(l,d);let{userPreferences:Q,setUserPreference:ee}=(0,f.HW)(),{expandSidebarHeader:et}=Q;return z[10]!==W||z[11]!==P?(_=(0,r.jsx)(w,{breadcrumbPath:W,onNavigateToLevel:P}),z[10]=W,z[11]=P,z[12]=_):_=z[12],z[13]!==F?(C=F&&(0,r.jsx)(j.A,{level:F}),z[13]=F,z[14]=C):C=z[14],z[15]!==D||z[16]!==F?(N=F&&S(D)&&(0,r.jsx)(o.E,{size:"xs",mx:"xs",children:"\xb7"}),z[15]=D,z[16]=F,z[17]=N):N=z[17],z[18]!==D?(k=S(D)&&(0,r.jsxs)(o.E,{size:"xs",children:[(0,r.jsx)(g.H,{value:D})," \xb7"," ",(0,b.Jk)(D)," ago"]}),z[18]=D,z[19]=k):k=z[19],z[20]!==C||z[21]!==N||z[22]!==k?(A=(0,r.jsxs)(u.s,{children:[C,N,k]}),z[20]=C,z[21]=N,z[22]=k,z[23]=A):A=z[23],z[24]!==H||z[25]!==et||z[26]!==Z||z[27]!==G||z[28]!==V||z[29]!==K||z[30]!==M||z[31]!==ee||z[32]!==Q?(T=V?(0,r.jsxs)(m.t,{p:"xs",mt:"sm",style:{maxHeight:et?void 0:120,overflow:"auto",overflowWrap:"break-word"},ref:Y,children:[(0,r.jsxs)(u.s,{justify:"space-between",mb:"xs",children:[(0,r.jsx)(o.E,{size:"xs",children:M}),Z>=120&&(0,r.jsx)(h.$,{size:"compact-xs",variant:"subtle",onClick:()=>ee({...Q,expandSidebarHeader:!et}),children:et?(0,r.jsx)(x.A,{size:14}):(0,r.jsx)(p.A,{size:14})})]}),K,G&&(0,r.jsx)(h.$,{size:"compact-xs",variant:"subtle",color:"gray",onClick:()=>{q(E)},children:H?"Collapse":"Expand"})]}):(0,r.jsx)(m.t,{p:"xs",mt:"sm",children:(0,r.jsx)(o.E,{size:"xs",mb:"xs",children:"[Empty]"})}),z[24]=H,z[25]=et,z[26]=Z,z[27]=G,z[28]=V,z[29]=K,z[30]=M,z[31]=ee,z[32]=Q,z[33]=T):T=z[33],z[34]!==B?($=(0,r.jsx)(c.a,{mt:"xs",children:(0,r.jsx)(y.V,{attributes:B})}),z[34]=B,z[35]=$):$=z[35],z[36]!==A||z[37]!==T||z[38]!==$||z[39]!==_?(I=(0,r.jsxs)(r.Fragment,{children:[_,A,T,$]}),z[36]=A,z[37]=T,z[38]=$,z[39]=_,z[40]=I):I=z[40],I}function E(e){return!e}},64501:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var r=s(6029),n=s(55729),a=s(82641),i=s(27166),l=s(43517),o=s(92789),c=s(25062),d=s(78253),u=s(94720),m=s(60665),h=s(24583),x=s(43567),p=s(98142),g=s(93108),f=s(78550),b=s(81973),y=s(36600),v=s(24314),j=s(54970);async function S({connectionId:e,createSourceMutation:t,updateSourceMutation:s,logSourceDatabaseName:r,logSourceName:n,logSourceTableName:i,metricsSourceDatabaseName:l,metricsSourceName:o,sessionSourceDatabaseName:c,sessionSourceName:d,sessionSourceTableName:u,traceSourceDatabaseName:m,traceSourceName:h,traceSourceTableName:x,traceSourceHighlightedTraceAttributes:p,traceSourceMaterializedViews:g}){let f,b,y=r&&n&&i,v=l&&o;y&&(f=await t.mutateAsync({source:{kind:a.GL.Log,name:n,connection:e,from:{databaseName:r,tableName:i},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, SeverityText, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body",displayedTimestampValueExpression:"Timestamp"}}));let j=await t.mutateAsync({source:{kind:a.GL.Trace,name:h,connection:e,from:{databaseName:m,tableName:x},timestampValueExpression:"Timestamp",defaultTableSelectExpression:"Timestamp, ServiceName, StatusCode, round(Duration / 1e6), SpanName",serviceNameExpression:"ServiceName",eventAttributesExpression:"SpanAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"SpanName",durationExpression:"Duration",durationPrecision:9,parentSpanIdExpression:"ParentSpanId",spanKindExpression:"SpanKind",spanNameExpression:"SpanName",...y?{logSourceId:"l-758211293"}:{},statusCodeExpression:"StatusCode",statusMessageExpression:"StatusMessage",spanEventsValueExpression:"Events",highlightedTraceAttributeExpressions:p,materializedViews:g}});v&&(b=await t.mutateAsync({source:{kind:a.GL.Metric,name:o,connection:e,from:{databaseName:l,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:{[a.SX.Gauge]:"otel_metrics_gauge",[a.SX.Histogram]:"otel_metrics_histogram",[a.SX.Sum]:"otel_metrics_sum",[a.SX.Summary]:"otel_metrics_summary",[a.SX.ExponentialHistogram]:"otel_metrics_exponential_histogram"},resourceAttributesExpression:"ResourceAttributes",...y&&f?{logSourceId:f.id}:{}}}));let S=await t.mutateAsync({source:{kind:a.GL.Session,name:d,connection:e,from:{databaseName:c,tableName:u},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceSourceId:j.id,traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body"}});await Promise.all([...y&&f?[s.mutateAsync({source:{...f,sessionSourceId:S.id,traceSourceId:j.id,...v&&b?{metricSourceId:b.id}:{}}})]:[],s.mutateAsync({source:{...j,...y&&f?{logSourceId:f.id}:{},...v&&b?{metricSourceId:b.id}:{},sessionSourceId:S.id}})])}let w=(0,n.memo)(function({requireSource:e=!0}){let t=(0,y.Kh)(),{data:s}=(0,b.oE)(),{data:w}=(0,g.ZY)(),_=w?.length===0?"connection":s?.length===0&&e?"auto-detect":void 0,[E,C]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{null!=_&&null==E&&C(_)},[_,E]);let N=(0,b.nd)(),k=(0,g.Ir)(),A=(0,b.sr)(),T=(0,b.YI)(),$=(0,f.Ge)(),[I,z]=(0,n.useState)(!1),[L,R]=(0,n.useState)(!1),[M,D]=(0,n.useState)([]),F=(0,n.useCallback)(async e=>{try{z(!0),R(!0);let t=await $.getOtelTables({connectionId:e});if(!t)return void C("source");let s=[];if(t.tables.logs){let r=await (0,b.Ys)({databaseName:t.database,tableName:t.tables.logs,connectionId:e,metadata:$});if(null!=r.timestampValueExpression){let n=await N.mutateAsync({source:{kind:a.GL.Log,name:"Logs",connection:e,from:{databaseName:t.database,tableName:t.tables.logs},...r,timestampValueExpression:r.timestampValueExpression}});s.push(n)}else console.error("Log source was found but missing required fields",r)}if(t.tables.traces){let r=await (0,b.Ys)({databaseName:t.database,tableName:t.tables.traces,connectionId:e,metadata:$});if(null!=r.timestampValueExpression){let n=await N.mutateAsync({source:{kind:a.GL.Trace,name:"Traces",connection:e,from:{databaseName:t.database,tableName:t.tables.traces},...r,timestampValueExpression:r.timestampValueExpression}});s.push(n)}else console.error("Trace source was found but missing required fields",r)}if(Object.values(t.tables.metrics).some(e=>null!=e)){let r={[a.SX.Gauge]:"",[a.SX.Histogram]:"",[a.SX.Sum]:"",[a.SX.Summary]:"",[a.SX.ExponentialHistogram]:""};t.tables.metrics.gauge&&(r[a.SX.Gauge]=t.tables.metrics.gauge),t.tables.metrics.histogram&&(r[a.SX.Histogram]=t.tables.metrics.histogram),t.tables.metrics.sum&&(r[a.SX.Sum]=t.tables.metrics.sum),t.tables.metrics.summary&&(r[a.SX.Summary]=t.tables.metrics.summary),t.tables.metrics.expHistogram&&(r[a.SX.ExponentialHistogram]=t.tables.metrics.expHistogram);let n=await N.mutateAsync({source:{kind:a.GL.Metric,name:"Metrics",connection:e,from:{databaseName:t.database,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:r,resourceAttributesExpression:"ResourceAttributes"}});s.push(n)}if(t.tables.sessions){let r=await (0,b.Ys)({databaseName:t.database,tableName:t.tables.sessions,connectionId:e,metadata:$}),n=s.find(e=>e.kind===a.GL.Trace);if(null!=r.timestampValueExpression&&null!=n){let i=await N.mutateAsync({source:{kind:a.GL.Session,name:"Sessions",connection:e,from:{databaseName:t.database,tableName:t.tables.sessions},...r,timestampValueExpression:r.timestampValueExpression,traceSourceId:n.id}});s.push(i)}else console.error("Session source was found but missing required fields",r)}if(0===s.length){console.error("No sources created due to missing required fields"),C("source");return}let r=s.find(e=>e.kind===a.GL.Log),n=s.find(e=>e.kind===a.GL.Trace),i=s.find(e=>e.kind===a.GL.Metric),l=s.find(e=>e.kind===a.GL.Session),o=[];r&&o.push(A.mutateAsync({source:{...r,...n?{traceSourceId:n.id}:{},...i?{metricSourceId:i.id}:{},...l?{sessionSourceId:l.id}:{}}})),n&&o.push(A.mutateAsync({source:{...n,...r?{logSourceId:r.id}:{},...i?{metricSourceId:i.id}:{},...l?{sessionSourceId:l.id}:{}}})),await Promise.all(o),D(s),m.$e.show({title:"Success",message:`Automatically detected and created ${s.length} source${s.length>1?"s":""}.`}),C("closed")}catch(e){console.error("Error auto-detecting sources:",e),m.$e.show({color:"red",title:"Error",message:"Failed to auto-detect telemetry sources. Please set up manually."}),C("source")}finally{z(!1)}},[$,N,A,C,D]);(0,n.useEffect)(()=>{"auto-detect"===E&&s?.length===0&&w&&w.length>0&&!1===I&&!1===L&&F(w[0].id)},[E,w,F,I,s,L]);let O=(0,n.useCallback)(async()=>{if(!p.Ju)try{if(s)for(let e of s)"local"===e.connection&&e.name.startsWith("Demo")&&"otel_v2"!==e.from.databaseName&&await T.mutateAsync({id:e.id});let e="";await k.mutateAsync({connection:{name:"Demo",host:"https://sql-clickhouse.clickhouse.com",username:"otel_demo",password:""}},{onSuccess(t){e=t.id},onError(e){console.error("Failed to create demo connection: ",e)}}),await S({connectionId:e,createConnectionMutation:k,createSourceMutation:N,deleteSourceMutation:T,logSourceDatabaseName:"otel_v2",logSourceName:"Demo Logs",logSourceTableName:"otel_logs",metricsSourceDatabaseName:"otel_v2",metricsSourceName:"Demo Metrics",sessionSourceDatabaseName:"otel_v2",sessionSourceName:"Demo Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_v2",traceSourceName:"Demo Traces",traceSourceTableName:"otel_traces",traceSourceMaterializedViews:[{databaseName:"otel_v2",tableName:"otel_traces_1m",dimensionColumns:"ServiceName, StatusCode",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"}]},{databaseName:"otel_v2",tableName:"otel_traces_1m_v2",dimensionColumns:"ServiceName, SpanName, SpanKind",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"},{mvColumn:"quantile__Duration",aggFn:"quantile",sourceColumn:"Duration"}]}],updateSourceMutation:A}),await S({connectionId:e,createConnectionMutation:k,createSourceMutation:N,deleteSourceMutation:T,sessionSourceDatabaseName:"otel_clickpy",sessionSourceName:"ClickPy Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_clickpy",traceSourceName:"ClickPy Traces",traceSourceTableName:"otel_traces",traceSourceHighlightedTraceAttributes:[{sqlExpression:"if((SpanAttributes['http.route']) LIKE '%dashboard%', concat('https://clickpy.clickhouse.com', path(SpanAttributes['http.target'])), '')",alias:"clickpy_link"}],updateSourceMutation:A}),m.$e.show({title:"Success",message:`Connected to ${t} demo server.`}),C("closed")}catch(e){console.error(e),m.$e.show({color:"red",title:"Error",message:`Could not connect to the ${t} demo server, please try again later.`})}},[t,N,k,A,T,s]);return(0,r.jsxs)(i.a,{"data-testid":"onboarding-modal",opened:null!=E&&"closed"!==E,onClose:()=>{},title:`Welcome to ${t}`,size:"xl",withCloseButton:!1,children:["connection"===E&&null!=w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.E,{size:"sm",mb:"md",children:"Lets set up your connection to ClickHouse"}),0===w.length?(0,r.jsx)(x.B,{connection:{id:"",name:"Default",host:"http://localhost:8123",username:"default",password:""},onSave:()=>{L?C("source"):C("auto-detect")},isNew:!0}):(0,r.jsx)(x.B,{connection:w[0],isNew:!1,onSave:()=>{L?C("source"):C("auto-detect")},showCancelButton:!1,showDeleteButton:!1}),!p.VO&&(0,r.jsx)(l.E,{size:"xs",mt:"md",children:"You can always add and edit connections later."}),!p.Ju&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.c,{label:"OR",my:"md"}),(0,r.jsx)(c.$,{"data-testid":"demo-server-button",variant:"secondary",w:"100%",onClick:O,children:"Connect to Demo Server"})]})]}),"auto-detect"===E&&(0,r.jsx)(r.Fragment,{children:I?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(d.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,r.jsx)(u.a,{size:"md",mb:"md"}),(0,r.jsx)(l.E,{size:"sm",c:"dimmed",mb:"md",children:"Detecting available tables..."}),(0,r.jsx)(c.$,{variant:"subtle",size:"xs",onClick:()=>{z(!1),C("source")},children:"Skip and setup manually"})]})}):M.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.$,{variant:"subtle",onClick:()=>C("connection"),p:"xs",mb:"md",children:[(0,r.jsx)(h.A,{size:14,className:"me-2"})," Back"]}),(0,r.jsxs)(l.E,{size:"sm",mb:"md",children:["We automatically detected and created"," ",M.length," source",M.length>1?"s":""," from your connection. You can review, edit, or continue."]}),(0,r.jsx)(j.v,{withCard:!1,variant:"default",showEmptyState:!1}),(0,r.jsxs)(d.s,{justify:"space-between",mt:"md",children:[(0,r.jsx)(c.$,{variant:"subtle",onClick:()=>{C("source")},children:"Add more sources"}),(0,r.jsx)(c.$,{variant:"primary",onClick:()=>{C("closed")},children:"Continue"})]})]}):(0,r.jsxs)(d.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,r.jsx)(l.E,{size:"sm",c:"dimmed",mb:"md",children:"No OTel tables detected automatically, please setup sources manually."}),(0,r.jsx)(c.$,{variant:"primary",onClick:()=>{C("source")},children:"Continue"})]})}),"source"===E&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.$,{variant:"subtle",onClick:()=>C("connection"),p:"xs",mb:"md",children:[(0,r.jsx)(h.A,{size:14,className:"me-2"})," Back"]}),(0,r.jsx)(l.E,{size:"sm",mb:"md",children:"Lets set up a source table to query telemetry from."}),(0,r.jsx)(v.Eb,{isNew:!0,defaultName:"Logs",onCreate:()=>{C("closed")}}),(0,r.jsx)(l.E,{size:"xs",mt:"lg",children:"You can always add and edit sources later."})]})]})})},65081:(e,t,s)=>{"use strict";s.d(t,{z:()=>D});var r=s(6029),n=s(75155),a=s(55729),i=s(81278),l=s.n(i),o=s(67549),c=s(83595),d=s(60449),u=s.n(d),m=s(8737),h=s(56513),x=s(3635),p=s(96061),g=s(25062),f=s(60481),b=s(22623),y=s(43517),v=s(39785),j=s(60665),S=s(24602),w=s(95316),_=s(90515),E=s(9385),C=s(41279),N=s(9841),k=s(6723),A=s(23195),T=s(45172),$=s(26355),I=s(92917),z=s(50374);function L(e,t,s="JSONExtractString"){let r=e.slice(t.length);if(0===r.length)return null;let n=t[t.length-1],a=r.map(e=>`'${e}'`).join(", ");return`${s}(${n}, ${a})`}let R=(0,c.tG)("hdx_json_viewer_options",{normallyExpanded:!0,lineWrap:!0,tabulate:!0,filterBlanks:!1});function M(){let e,t,s,a,i,l,c,d,u,p,g,f,b,y,v,j,E=(0,n.c)(39),[C,N]=(0,o.fp)(R);return E[0]!==C||E[1]!==N?(e=()=>N({...C,lineWrap:!C.lineWrap}),E[0]=C,E[1]=N,E[2]=e):e=E[2],E[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(S.A,{size:14}),E[3]=t):t=E[3],E[4]!==e?(s=(0,r.jsx)(m.N,{color:"gray",onClick:e,children:t}),E[4]=e,E[5]=s):s=E[5],E[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(h.W.Target,{children:(0,r.jsx)(m.N,{children:(0,r.jsx)(w.A,{size:14})})}),E[6]=a):a=E[6],E[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(h.W.Label,{lh:1,py:6,children:"Properties view options"}),E[7]=i):i=E[7],E[8]!==C||E[9]!==N?(l=()=>N({...C,normallyExpanded:!C.normallyExpanded}),E[8]=C,E[9]=N,E[10]=l):l=E[10],E[11]!==C.normallyExpanded?(c=C.normallyExpanded?(0,r.jsx)(_.A,{size:14,className:"ps-2"}):null,E[11]=C.normallyExpanded,E[12]=c):c=E[12],E[13]!==l||E[14]!==c?(d=(0,r.jsx)(h.W.Item,{onClick:l,lh:"1",py:8,rightSection:c,children:"Expand all properties"}),E[13]=l,E[14]=c,E[15]=d):d=E[15],E[16]!==C.tabulate?(u=C.tabulate?(0,r.jsx)(_.A,{size:14,className:"ps-2"}):null,E[16]=C.tabulate,E[17]=u):u=E[17],E[18]!==C||E[19]!==N?(p=()=>N({...C,tabulate:!C.tabulate}),E[18]=C,E[19]=N,E[20]=p):p=E[20],E[21]!==u||E[22]!==p?(g=(0,r.jsx)(h.W.Item,{lh:"1",py:8,rightSection:u,onClick:p,children:"Tabulate"}),E[21]=u,E[22]=p,E[23]=g):g=E[23],E[24]!==C.filterBlanks?(f=C.filterBlanks?(0,r.jsx)(_.A,{size:14,className:"ps-2"}):null,E[24]=C.filterBlanks,E[25]=f):f=E[25],E[26]!==C||E[27]!==N?(b=()=>N({...C,filterBlanks:!C.filterBlanks}),E[26]=C,E[27]=N,E[28]=b):b=E[28],E[29]!==f||E[30]!==b?(y=(0,r.jsx)(h.W.Item,{lh:"1",py:8,rightSection:f,onClick:b,children:"Hide blank values"}),E[29]=f,E[30]=b,E[31]=y):y=E[31],E[32]!==g||E[33]!==y||E[34]!==d?(v=(0,r.jsxs)(h.W,{width:240,withinPortal:!1,children:[a,(0,r.jsxs)(h.W.Dropdown,{children:[i,d,g,y]})]}),E[32]=g,E[33]=y,E[34]=d,E[35]=v):v=E[35],E[36]!==v||E[37]!==s?(j=(0,r.jsxs)(x.Y,{children:[s,v]}),E[36]=v,E[37]=s,E[38]=j):j=E[38],j}function D(e){let t,s,i,c,d,m,h,S,w,_,D,O,P=(0,n.c)(31),{data:B,jsonColumns:V}=e;P[0]!==V?(t=void 0===V?[]:V,P[0]=V,P[1]=t):t=P[1];let W=t,{onPropertyAddClick:H,generateSearchUrl:q,generateChartUrl:X,displayedColumns:G,toggleColumn:K}=(0,a.useContext)(z.D),[J,Y]=(0,a.useState)(""),[Z]=(0,v.o)(J,100),U=(0,o.md)(R);e:{let e;if(!B){s=null;break e}if(P[2]!==B||P[3]!==Z||P[4]!==U.filterBlanks){let t=Object.fromEntries(Object.entries(B).filter(F));U.filterBlanks&&(t=function e(t){if(null!==t&&""!==t){if(Array.isArray(t)){let s=t.map(e).filter(e=>void 0!==e);return s.length>0?s:void 0}if("object"==typeof t){let s={};for(let[r,n]of Object.entries(t)){let t=e(n);void 0!==t&&(s[r]=t)}return Object.keys(s).length>0?s:void 0}return t}}(t)),e=function e(t,s){if("object"!=typeof t||null===t||""===s)return t;let r={};for(let[n,a]of Object.entries(t))if(null!==a&&((n.toLowerCase().includes(s.toLowerCase())||"string"==typeof a&&a.toLowerCase().includes(s.toLowerCase()))&&(r[n]=a),"object"==typeof a)){let t=e(a,s);Object.keys(t).length>0&&(r[n]=t)}return r}(t,Z),P[2]=B,P[3]=Z,P[4]=U.filterBlanks,P[5]=e}else e=P[5];s=e}let Q=s;P[6]!==G||P[7]!==X||P[8]!==q||P[9]!==W||P[10]!==H||P[11]!==Q||P[12]!==K?(i=e=>{let{keyPath:t,value:s,isInParsedJson:n,parsedJsonRootPath:a}=e,i=[],o=(0,I.uc)(t,W),c=t.length>0&&W?.includes(t[0]);if(null!=H&&"string"==typeof s&&s&&"Timestamp"!=o&&"TimestampTime"!=o&&i.push({key:"add-to-search",label:(0,r.jsxs)(x.Y,{gap:2,children:[(0,r.jsx)(E.A,{size:14}),"Add to Filters"]}),title:"Add to Filters",onClick:()=>{let e;if(n&&a){let s=L(t,a);e=s||(c?`toString(${o})`:o)}else e=c?`toString(${o})`:o;H(e,s),j.$e.show({color:"green",message:`Added "${o} = ${s}" to filters`})}}),q&&"object"!=typeof s&&i.push({key:"search",label:(0,r.jsxs)(x.Y,{gap:2,children:[(0,r.jsx)(C.A,{size:14}),"Search"]}),title:"Search for this value only",onClick:()=>{let e=o;if(n&&a){let r="JSONExtractString";"number"==typeof s?r="JSONExtractFloat":"boolean"==typeof s&&(r="JSONExtractBool");let n=L(t,a,r);n&&(e=n)}let r=`${e} = ${"string"==typeof s?`'${s}'`:s}`;("Timestamp"==e||"TimestampTime"==e)&&(r=`${e} = parseDateTime64BestEffort('${s}', 9)`),l().push(q({where:r,whereLanguage:"sql"}))}}),X&&"number"==typeof s&&i.push({key:"chart",label:(0,r.jsx)(N.A,{size:14}),title:"Chart",onClick:()=>{let e=o;if(n&&a){let s=L(t,a);s&&(e=s)}l().push(X({aggFn:"avg",field:e,groupBy:[]}))}}),K&&"object"!=typeof s){let e=o;if(n&&a){let s=L(t,a);s&&(e=s)}let s=G?.includes(e);i.push({key:"toggle-column",label:s?(0,r.jsxs)(x.Y,{gap:2,children:[(0,r.jsx)(k.A,{size:14}),"Column"]}):(0,r.jsxs)(x.Y,{gap:2,children:[(0,r.jsx)(A.A,{size:14}),"Column"]}),title:s?`Remove ${o} column from results table`:`Add ${o} column to results table`,onClick:()=>{K(e),j.$e.show({color:"green",message:`Column "${o}" ${s?"removed from":"added to"} results table`})}})}return"object"==typeof s?i.push({key:"copy-object",label:"Copy Object",onClick:()=>{let e;e=n&&a?s:0===t.length?Q:u()(Q,t),window.navigator.clipboard.writeText(JSON.stringify(e,null,2)),j.$e.show({color:"green",message:"Copied object to clipboard"})}}):i.push({key:"copy-value",label:(0,r.jsxs)(x.Y,{gap:2,children:[(0,r.jsx)(T.A,{size:14}),"Copy Value"]}),onClick:()=>{window.navigator.clipboard.writeText("string"==typeof s?s:JSON.stringify(s,null,2)),j.$e.show({color:"green",message:"Value copied to clipboard"})}}),i},P[6]=G,P[7]=X,P[8]=q,P[9]=W,P[10]=H,P[11]=Q,P[12]=K,P[13]=i):i=P[13];let ee=i;return P[14]===Symbol.for("react.memo_cache_sentinel")?(c=e=>Y(e.currentTarget.value),d=(0,r.jsx)(C.A,{size:16}),P[14]=c,P[15]=d):(c=P[14],d=P[15]),P[16]!==J?(m=(0,r.jsx)(p.p,{size:"xs",w:"100%",maw:"400px",placeholder:"Search properties by key or value",value:J,onChange:c,leftSection:d}),h=J&&(0,r.jsx)(g.$,{variant:"secondary",size:"xs",onClick:()=>Y(""),children:"Clear"}),P[16]=J,P[17]=m,P[18]=h):(m=P[17],h=P[18]),P[19]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.jsx)("div",{className:"flex-grow-1"}),S=(0,r.jsx)(M,{}),P[19]=S,P[20]=w):(S=P[19],w=P[20]),P[21]!==m||P[22]!==h?(_=(0,r.jsx)(f.a,{py:"xs",children:(0,r.jsxs)(x.Y,{gap:"xs",children:[m,h,w,S]})}),P[21]=m,P[22]=h,P[23]=_):_=P[23],P[24]!==ee||P[25]!==U||P[26]!==Q?(D=(0,r.jsx)(b.t,{bg:"transparent",mt:"sm",children:null!=Q?(0,r.jsx)($.A,{data:Q,getLineActions:ee,...U}):(0,r.jsx)(y.E,{children:"No data"})}),P[24]=ee,P[25]=U,P[26]=Q,P[27]=D):D=P[27],P[28]!==_||P[29]!==D?(O=(0,r.jsxs)("div",{className:"flex-grow-1 overflow-auto",children:[_,D]}),P[28]=_,P[29]=D,P[30]=O):O=P[30],O}function F(e){return!e[0].startsWith("__hdx_")}},65723:e=>{e.exports={container:"HyperJson_container__GNwuL",withTabulate:"HyperJson_withTabulate__MzU_L",key:"HyperJson_key__AQ6QF",withLineWrap:"HyperJson_withLineWrap__gfDDi",valueContainer:"HyperJson_valueContainer__Ui_5y",string:"HyperJson_string__vkc96",treeNode:"HyperJson_treeNode__bDzsg",line:"HyperJson_line__n3Ltu",lineMenu:"HyperJson_lineMenu__Sg84e",expanded:"HyperJson_expanded__gHv9Z",object:"HyperJson_object__ChLzl",array:"HyperJson_array__rJBNC",expandable:"HyperJson_expandable__futZ8",lineMenuBtn:"HyperJson_lineMenuBtn__QKgME",clickable:"HyperJson_clickable__UNRbd",value:"HyperJson_value__aSXTw",hoverable:"HyperJson_hoverable__oWIY9",hoverContent:"HyperJson_hoverContent__2Ir2x",jsonBtn:"HyperJson_jsonBtn__T1ObP",keyContainer:"HyperJson_keyContainer___KqED",number:"HyperJson_number__VFmbX",boolean:"HyperJson_boolean__KkQsQ",expandMoreProps:"HyperJson_expandMoreProps__uHkwZ"}},65952:e=>{e.exports={tagWrapper:"Tags_tagWrapper__rCeVe"}},66773:e=>{e.exports={panel:"LogSidePanel_panel__JgveL",panelDragBar:"LogSidePanel_panelDragBar__sFi62",panelHeader:"LogSidePanel_panelHeader__Fl4jA",panelDetails:"LogSidePanel_panelDetails__wGBLr",panelContent:"LogSidePanel_panelContent__Olcws",severityChip:"LogSidePanel_severityChip__hIK7I",loadingState:"LogSidePanel_loadingState__b5y0C",panelSectionWrapper:"LogSidePanel_panelSectionWrapper__gOBKh",panelSectionWrapperTitle:"LogSidePanel_panelSectionWrapperTitle__eBMsG",kbdShortcuts:"LogSidePanel_kbdShortcuts__ogLDt",kbd:"LogSidePanel_kbd__gmxFq",kbdDivider:"LogSidePanel_kbdDivider____Gi4",lineContext:"LogSidePanel_lineContext__rCVjx",lineContextCurrentLine:"LogSidePanel_lineContextCurrentLine__K3t4J",lineContextLineNo:"LogSidePanel_lineContextLineNo__LuYmr",emptyMessage:"LogSidePanel_emptyMessage__6fbwp",traceTimelineLabel:"LogSidePanel_traceTimelineLabel___WCaD",traceTimelineLabelHighlighted:"LogSidePanel_traceTimelineLabelHighlighted__elopt",stacktraceRowInteractive:"LogSidePanel_stacktraceRowInteractive__i18zL"}},67272:(e,t,s)=>{"use strict";s.d(t,{F9:()=>d});var r=s(6029),n=s(75155),a=s(55729),i=s(1909),l=s(76089),o=s(38206);function c(e){let t,s,a,i=(0,n.c)(7),{value:c,onChange:d,disabled:u}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{value:"auto",label:"Auto Granularity"},{value:l.Z7.ThirtySecond,label:"30 Seconds Granularity"},{value:l.Z7.OneMinute,label:"1 Minute Granularity"},{value:l.Z7.FiveMinute,label:"5 Minutes Granularity"},{value:l.Z7.TenMinute,label:"10 Minutes Granularity"},{value:l.Z7.FifteenMinute,label:"15 Minutes Granularity"},{value:l.Z7.ThirtyMinute,label:"30 Minutes Granularity"},{value:l.Z7.OneHour,label:"1 Hour Granularity"},{value:l.Z7.TwelveHour,label:"12 Hours Granularity"},{value:l.Z7.OneDay,label:"1 Day Granularity"},{value:l.Z7.SevenDay,label:"7 Day Granularity"}],i[0]=t):t=i[0],i[1]!==d?(s=e=>d(e??void 0),i[1]=d,i[2]=s):s=i[2],i[3]!==u||i[4]!==s||i[5]!==c?(a=(0,r.jsx)(o.l,{disabled:u,"data-testid":"granularity-picker",data:t,onChange:s,value:c}),i[3]=u,i[4]=s,i[5]=c,i[6]=a):a=i[6],a}let d=(0,a.memo)(function(e){let t,s=(0,n.c)(3),{field:a}=(0,i.as)(e);return s[0]!==a.onChange||s[1]!==a.value?(t=(0,r.jsx)(c,{value:a.value,onChange:a.onChange}),s[0]=a.onChange,s[1]=a.value,s[2]=t):t=s[2],t})},68269:(e,t,s)=>{"use strict";s.d(t,{R:()=>C});var r=s(6029),n=s(75155),a=s(55729),i=s(40684),l=s(45381),o=s(65248),c=s(31292),d=s(53259),u=s(35467),m=s(43517),h=s(60481),x=s(24589),p=s(78253),g=s(43152),f=s(91021),b=s(57389),y=s(81973),v=s(92917),j=s(15628),S=s(23648),w=s(99082),_=s(88339);let E=(0,a.memo)(e=>{let t,s=(0,n.c)(5),{active:a,payload:i,numberFormat:l}=e;if(!a||!i?.length)return null;let o=i[0];return s[0]!==o.name||s[1]!==o.payload.color||s[2]!==o.value||s[3]!==l?(t=(0,r.jsx)(S.l,{children:(0,r.jsx)(S.H,{color:o.payload.color,name:o.name,value:o.value,numberFormat:l,indicator:"none"})}),s[0]=o.name,s[1]=o.payload.color,s[2]=o.value,s[3]=l,s[4]=t):t=s[4],t}),C=e=>{let t,s,a,d,S,C,A,T,$=(0,n.c)(37),{config:I,title:z,enabled:L,queryKeyPrefix:R,showMVOptimizationIndicator:M,toolbarPrefix:D,toolbarSuffix:F}=e,O=void 0===L||L,P=void 0===M||M;$[0]!==I.source?(t={id:I.source},$[0]=I.source,$[1]=t):t=$[1];let{data:B}=(0,y.Fo)(t);$[2]!==I?(s=(0,g.dY)(I),$[2]=I,$[3]=s):s=$[3];let V=s,{data:W}=(0,b.d)(V);$[4]!==V||$[5]!==R?(a=[R,V],$[4]=V,$[5]=R,$[6]=a):a=$[6],$[7]!==O||$[8]!==a?(d={placeholderData:N,queryKey:a,enabled:O},$[7]=O,$[8]=a,$[9]=d):d=$[9];let{data:H,isLoading:q,isError:X,error:G}=(0,f.HD)(V,d);if($[10]!==W||$[11]!==V||$[12]!==P||$[13]!==B||$[14]!==D||$[15]!==F){let e;if(S=[],D&&D.length>0&&S.push(...D),B&&P){let e;$[17]!==V||$[18]!==B?(e=(0,r.jsx)(w.A,{config:V,source:B,variant:"icon"},"db-table-chart-mv-indicator"),$[17]=V,$[18]=B,$[19]=e):e=$[19],S.push(e)}$[20]!==W||$[21]!==V.dateRange?(e=(0,g.m9)({mvOptimizationData:W,originalDateRange:V.dateRange}),$[20]=W,$[21]=V.dateRange,$[22]=e):e=$[22];let t=e;t&&S.push(t),F&&F.length>0&&S.push(...F),$[10]=W,$[11]=V,$[12]=P,$[13]=B,$[14]=D,$[15]=F,$[16]=S}else S=$[16];let K=S;e:{let e;if(!H){let e;$[23]===Symbol.for("react.memo_cache_sentinel")?(e=[],$[23]=e):e=$[23],C=e;break e}$[24]!==H?(e=(0,g.ME)(H,v.ob),$[24]=H,$[25]=e):e=$[25],C=e}let J=C;return $[26]!==I.numberFormat||$[27]!==H||$[28]!==G||$[29]!==X||$[30]!==q||$[31]!==J?(A=q&&!H?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):X&&G?(0,r.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted overflow-scroll",children:[(0,r.jsx)(m.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsxs)(h.a,{mt:"sm",children:[(0,r.jsx)(m.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(x.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:G.message}),G instanceof u.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(_.V,{data:G?.query})]})]})]}):H?.data.length===0?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,r.jsx)(p.s,{"data-testid":"pie-chart-container",align:"center",justify:"center",h:"100%",style:{flexGrow:1},children:(0,r.jsx)(i.u,{height:"100%",width:"100%",className:q?"effect-pulse":"",children:(0,r.jsxs)(l.r,{children:[(0,r.jsx)(o.F,{cx:"50%",cy:"50%",data:J,dataKey:"value",fill:"#8884d8",nameKey:"label",legendType:"none",children:J.map(k)}),(0,r.jsx)(c.m,{content:(0,r.jsx)(E,{numberFormat:I.numberFormat})})]})})}),$[26]=I.numberFormat,$[27]=H,$[28]=G,$[29]=X,$[30]=q,$[31]=J,$[32]=A):A=$[32],$[33]!==A||$[34]!==z||$[35]!==K?(T=(0,r.jsx)(j.A,{title:z,toolbarItems:K,children:A}),$[33]=A,$[34]=z,$[35]=K,$[36]=T):T=$[36],T};function N(e){return e}function k(e){return(0,r.jsx)(d.f,{fill:e.color,stroke:"none"},e.label)}},70727:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>u,C2:()=>d,ZO:()=>c});var r=s(55729),n=s(6033),a=s.n(n),i=s(80519),l=s.n(i),o=s(35467);let c={ID:"__hyperdx_id",ALIAS_WITH:"__hyperdx_alias_with"};function d(e){return e?Object.entries(e).filter(([,e])=>null!=e&&""!==e.trim()).map(([e,t])=>({name:e,sql:{sql:t,params:{}},isSubquery:!1})):[]}function u({meta:e,aliasMap:t}){let s=(0,r.useMemo)(()=>new Map(e?.map(e=>{let s=null!=t?t[e.name]??e.name:e.name;return[e.name,{...e,valueExpr:s,jsType:(0,o.rj)(e.type)}]})),[e,t]),n=(0,r.useMemo)(()=>d(t),[t]);return(0,r.useCallback)(e=>{let{[c.ID]:t,[c.ALIAS_WITH]:r,...i}=e;return{where:Object.entries(i).map(([e,t])=>{let r=s.get(e),n=r?.type,i=r?.jsType,c=r?.valueExpr;if(null==n)throw Error(`Column type not found for ${e}, ${JSON.stringify(s)}`);if(null==c)throw Error(`valueExpr not found for ${e}, ${JSON.stringify(s)}`);switch(i){case o.A2.Date:return l().format("?=parseDateTime64BestEffort(?, 9)",[l().raw(c),t]);case o.A2.Array:case o.A2.Map:return l().format("?=JSONExtract(?, ?)",[l().raw(c),t,n]);case o.A2.Tuple:return l().format("toJSONString(?)=?",[l().raw(c),t]);case o.A2.JSON:return l().format("lower(hex(MD5(toString(?))))=?",[l().raw(c),a()(t).toString()]);case o.A2.Dynamic:if(null==t||"null"===t)return l().format("isNull(??)",[c]);return(t.length>1e3||e.length>1e3)&&console.warn("Search value/object key too large."),l().format("toJSONString(?) = coalesce(toJSONString(JSONExtract(?, 'Dynamic')), toJSONString(?))",[l().raw(c),t,t]);default:if(null==t)return l().format("isNull(?)",[l().raw(c)]);if(t.length>512)return l().format("lower(hex(MD5(leftUTF8(?, 1000))))=?",[l().raw(c),a()(t.substring(0,1e3)).toString()]);return l().format("?=?",[l().raw(c),t])}}).join(" AND "),aliasWith:n}},[s,n])}},72075:(e,t,s)=>{"use strict";s.d(t,{L:()=>p,X:()=>x});var r=s(6029),n=s(75155);s(55729);var a=s(75828),i=s.n(a),l=s(58333),o=s(23474),c=s(79220),d=s(39696),u=s(68593),m=s(34011),h=s.n(m);let x=({data:e=[],columns:t,emptyMessage:s,hideHeader:n,borderless:a,density:l="normal",interactive:o,tableMeta:m})=>{let x=(0,c.N4)({data:e,columns:t,meta:m,getCoreRowModel:(0,d.HT)()});return e.length?(0,r.jsx)("div",{className:i()(h().tableWrapper,{[h().tableBorderless]:a,[h().tableDensityZero]:"zero"===l,[h().tableDensityCompact]:"compact"===l,[h().tableDensityComfortable]:"comfortable"===l,[h().tableInteractive]:o}),children:(0,r.jsxs)("table",{children:[!n&&(0,r.jsx)("thead",{children:x.getHeaderGroups().map(e=>(0,r.jsx)("tr",{children:e.headers.map(e=>(0,r.jsx)("th",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)("tbody",{children:x.getRowModel().rows.map(e=>(0,r.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,r.jsx)("td",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}):(0,r.jsx)("div",{className:h().emptyMessage,children:s})},p=e=>{let t,s,a,i,c=(0,n.c)(12),{onClick:d,title:u,label:m,biIcon:x}=e;return c[0]!==m?(t=m&&(0,r.jsx)("span",{children:m}),c[0]=m,c[1]=t):t=c[1],c[2]!==x?(s="chevron-up"===x&&(0,r.jsx)(l.A,{size:14}),c[2]=x,c[3]=s):s=c[3],c[4]!==x?(a="chevron-down"===x&&(0,r.jsx)(o.A,{size:14}),c[4]=x,c[5]=a):a=c[5],c[6]!==d||c[7]!==t||c[8]!==s||c[9]!==a||c[10]!==u?(i=(0,r.jsxs)("button",{className:h().tableCellButton,title:u,onClick:d,children:[t,s,a]}),c[6]=d,c[7]=t,c[8]=s,c[9]=a,c[10]=u,c[11]=i):i=c[11],i}},74620:e=>{e.exports={tableWrapper:"LogTable_tableWrapper__1X2n1",muted:"LogTable_muted__aIZSq",table:"LogTable_table__l63_F",tableHead:"LogTable_tableHead__sTgaD",tableRow:"LogTable_tableRow__7BXPl",tableRow__selected:"LogTable_tableRow__selected__DoaNL",rowButtons:"LogTable_rowButtons__XTh2c",rowContentButton:"LogTable_rowContentButton__fjkQI",expandButton:"LogTable_expandButton__nKsH0",expandedRowContent:"LogTable_expandedRowContent__Ps6mn",expanded:"LogTable_expanded___w9XA",expandButtonSeparator:"LogTable_expandButtonSeparator__lYPgm",isWrapped:"LogTable_isWrapped__ksgah",isTruncated:"LogTable_isTruncated__jXz22",iconActionButton:"LogTable_iconActionButton__hO7Fo",copied:"LogTable_copied__wZME1",fieldTextContainer:"LogTable_fieldTextContainer__4Dj7Q",fieldText:"LogTable_fieldText__zVjaq",chart:"LogTable_chart__8kFaD",truncated:"LogTable_truncated__Hv6oN",wrapped:"LogTable_wrapped__Dz8eR",fieldTextPopover:"LogTable_fieldTextPopover__dygEB"}},75359:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var r,n=s(6029),a=s(75155),i=s(55729),l=s(41038),o=s(81973),c=s(96958),d=s(92917),u=s(76539),m=s(37901),h=s(26837),x=s(50374),p=s(46061);function g(e){let t,s,r,c,d,m,h,g,f,y=(0,a.c)(47),{sourceId:v,config:j,onError:S,onScroll:w,context:_,onExpandedRowsChange:E,denoiseResults:C,collapseAllRows:N,isLive:k,enabled:A,isNestedPanel:T,breadcrumbPath:$,onSidebarOpen:I,onSortingChange:z,initialSortBy:L,variant:R}=e;y[0]!==v?(t={id:v},y[0]=v,y[1]=t):t=y[1];let{data:M}=(0,o.Fo)(t),[D,F]=(0,l.ZA)("rowWhere"),[O,P]=(0,l.ZA)("rowSource");y[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],y[2]=s):s=y[2];let[B,V]=(0,i.useState)(s),{setContextRowId:W,setContextRowSource:H}=(0,u.g)();y[3]!==I||y[4]!==F||y[5]!==P||y[6]!==v?(r=e=>{F(e.where),V(e.aliasWith),P(v),I?.(e.where)},y[3]=I,y[4]=F,y[5]=P,y[6]=v,y[7]=r):r=y[7];let q=r;y[8]!==T||y[9]!==W||y[10]!==H||y[11]!==F||y[12]!==P?(c=()=>{F(null),P(null),T||(W(null),H(null))},y[8]=T,y[9]=W,y[10]=H,y[11]=F,y[12]=P,y[13]=c):c=y[13];let X=c;y[14]!==M?(d=e=>M?(0,n.jsx)(b,{source:M,rowId:e.id,aliasWith:e.aliasWith}):(0,n.jsx)("div",{className:"p-3 text-muted",children:"Loading..."}),y[14]=M,y[15]=d):d=y[15];let G=d;y[16]!==_?(m=_??{},y[16]=_,y[17]=m):m=y[17],y[18]!==B||y[19]!==$||y[20]!==T||y[21]!==X||y[22]!==D||y[23]!==O||y[24]!==M||y[25]!==v?(h=M&&(O===v||!O)&&(0,n.jsx)(x.A,{source:M,rowId:D??void 0,aliasWith:B,isNestedPanel:T,breadcrumbPath:$,onClose:X}),y[18]=B,y[19]=$,y[20]=T,y[21]=X,y[22]=D,y[23]=O,y[24]=M,y[25]=v,y[26]=h):h=y[26];let K=D??void 0,J=k??!0;return y[27]!==N||y[28]!==j||y[29]!==C||y[30]!==A||y[31]!==L||y[32]!==S||y[33]!==E||y[34]!==q||y[35]!==w||y[36]!==z||y[37]!==G||y[38]!==v||y[39]!==K||y[40]!==J||y[41]!==R?(g=(0,n.jsx)(p.rD,{config:j,sourceId:v,onRowDetailsClick:q,highlightedLineId:K,enabled:A,isLive:J,queryKeyPrefix:"dbSqlRowTable",onSortingChange:z,denoiseResults:C,initialSortBy:L,renderRowDetails:G,onScroll:w,onError:S,onExpandedRowsChange:E,collapseAllRows:N,variant:R}),y[27]=N,y[28]=j,y[29]=C,y[30]=A,y[31]=L,y[32]=S,y[33]=E,y[34]=q,y[35]=w,y[36]=z,y[37]=G,y[38]=v,y[39]=K,y[40]=J,y[41]=R,y[42]=g):g=y[42],y[43]!==g||y[44]!==m||y[45]!==h?(f=(0,n.jsxs)(x.D.Provider,{value:m,children:[h,g]}),y[43]=g,y[44]=m,y[45]=h,y[46]=f):f=y[46],f}var f=((r=f||{}).Overview="overview",r.ColumnValues="columnValues",r);function b(e){let t,s,r,i,l,o,u=(0,a.c)(20),{source:x,rowId:p,aliasWith:g}=e,[f,b]=(0,d.Mj)("hdx-expanded-row-default-tab","columnValues");return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{text:"Overview",value:"overview"},{text:"Column Values",value:"columnValues"}],u[0]=t):t=u[0],u[1]!==f||u[2]!==b?(s=(0,n.jsx)("div",{className:"px-3 pt-2 position-relative",children:(0,n.jsx)(c.A,{className:"fs-8",items:t,activeItem:f,onClick:b})}),u[1]=f,u[2]=b,u[3]=s):s=u[3],u[4]!==f||u[5]!==g||u[6]!==p||u[7]!==x?(r="overview"===f&&(0,n.jsx)("div",{className:"inline-overview-panel",children:(0,n.jsx)(h.W,{source:x,rowId:p,aliasWith:g})}),u[4]=f,u[5]=g,u[6]=p,u[7]=x,u[8]=r):r=u[8],u[9]!==f||u[10]!==g||u[11]!==p||u[12]!==x?(i="columnValues"===f&&(0,n.jsx)(m.dD,{source:x,rowId:p,aliasWith:g}),u[9]=f,u[10]=g,u[11]=p,u[12]=x,u[13]=i):i=u[13],u[14]!==r||u[15]!==i?(l=(0,n.jsxs)("div",{children:[r,i]}),u[14]=r,u[15]=i,u[16]=l):l=u[16],u[17]!==s||u[18]!==l?(o=(0,n.jsxs)("div",{className:"position-relative",children:[s,l]}),u[17]=s,u[18]=l,u[19]=o):o=u[19],o}},76539:(e,t,s)=>{"use strict";s.d(t,{A:()=>N,g:()=>C});var r,n=s(6029),a=s(75155),i=s(55729),l=s(67264),o=s.n(l),c=s(41038),d=s(1909),u=s(3145),m=s(78253),h=s(3635),x=s(90124),p=s(43085),g=s(39785),f=s(64467),b=s(26814),y=s(43370),v=s(81973),j=s(92917),S=s(37901),w=s(50374),_=s(46061),E=((r=E||{}).All="all",r.Custom="custom",r.Host="host",r.Node="k8s.node.name",r.Pod="k8s.pod.name",r.Service="service",r);function C(e){let t,s,r,n=(0,a.c)(11),l=(0,c.ZA)("contextRowId",c.tU),o=(0,c.ZA)("contextRowSource",c.tU);n[0]!==l||n[1]!==o?(t={contextRowId:l,contextRowSource:o},n[0]=l,n[1]=o,n[2]=t):t=n[2];let d=t,u=(0,i.useState)(null),m=(0,i.useState)(null);n[3]!==u||n[4]!==m?(s={contextRowId:u,contextRowSource:m},n[3]=u,n[4]=m,n[5]=s):s=n[5];let h=s,x=e?h:d;return n[6]!==x.contextRowId[0]||n[7]!==x.contextRowId[1]||n[8]!==x.contextRowSource[0]||n[9]!==x.contextRowSource[1]?(r={contextRowId:x.contextRowId[0],contextRowSource:x.contextRowSource[0],setContextRowId:x.contextRowId[1],setContextRowSource:x.contextRowSource[1]},n[6]=x.contextRowId[0],n[7]=x.contextRowId[1],n[8]=x.contextRowSource[0],n[9]=x.contextRowSource[1],n[10]=r):r=n[10],r}function N(e){let t,s,r,l,c,E,N,k,A,T,$,I,z,L,R,M,D,F,O,P,B,V,W,H,q,X,G,K=(0,a.c)(97),{source:J,dbSqlRowTableConfig:Y,rowData:Z,rowId:U,breadcrumbPath:Q,onBreadcrumbClick:ee}=e;K[0]!==Q?(t=void 0===Q?[]:Q,K[0]=Q,K[1]=t):t=K[1];let et=t,es=Z[S.$_.TIMESTAMP];K[2]!==Y?(s=Y??{},K[2]=Y,K[3]=s):s=K[3];let{whereLanguage:er}=s,en=void 0===er?"lucene":er;K[4]===Symbol.for("react.memo_cache_sentinel")?(r=o()("30s"),K[4]=r):r=K[4];let[ea,ei]=(0,i.useState)(r),[el,eo]=(0,i.useState)("all"),ec=en??"lucene";K[5]!==ec?(l={defaultValues:{where:"",whereLanguage:ec}},K[5]=ec,K[6]=l):l=K[6];let{control:ed}=(0,d.mN)(l);K[7]!==ed?(c={control:ed,name:"where"},K[7]=ed,K[8]=c):c=K[8];let eu=(0,d.FH)(c),[em]=(0,g.o)(eu,1e3),{contextRowId:eh,contextRowSource:ex,setContextRowId:ep,setContextRowSource:eg}=C(et.length>0),ef=ex||"";K[9]!==ef?(E={id:ef},K[9]=ef,K[10]=E):E=K[10];let{data:eb}=(0,v.Fo)(E);K[11]===Symbol.for("react.memo_cache_sentinel")?(N=[],K[11]=N):N=K[11];let[ey,ev]=(0,i.useState)(N);K[12]!==ep||K[13]!==eg?(k=()=>{ep(null),eg(null)},K[12]=ep,K[13]=eg,K[14]=k):k=K[14];let ej=k,{setChildModalOpen:eS}=(0,i.useContext)(w.D);K[15]!==ep||K[16]!==eg||K[17]!==J.id?(A=e=>{ep(e.where),ev(e.aliasWith),eg(J.id)},K[15]=ep,K[16]=eg,K[17]=J.id,K[18]=A):A=K[18];let ew=A;K[19]!==es?(T=new Date(es),K[19]=es,K[20]=T):T=K[20];let e_=T,eE=e_.getTime()-ea/2;K[21]!==eE?($=new Date(eE),K[21]=eE,K[22]=$):$=K[22];let eC=e_.getTime()+ea/2;K[23]!==eC?(I=new Date(eC),K[23]=eC,K[24]=I):I=K[24],K[25]!==$||K[26]!==I?(z=[$,I],K[25]=$,K[26]=I,K[27]=z):z=K[27];let eN=z;K[28]!==Z?(L=Z[S.$_.RESOURCE_ATTRIBUTES]??{},K[28]=Z,K[29]=L):L=K[29];let{"k8s.node.name":ek,"k8s.pod.name":eA,"host.name":eT,"service.name":e$}=L;K[30]===Symbol.for("react.memo_cache_sentinel")?(R={field:"",value:""},K[30]=R):R=K[30];let eI=em||"";K[31]!==eI?(M={field:"",value:eI},K[31]=eI,K[32]=M):M=K[32],K[33]!==e$?(D={field:"service.name",value:e$},K[33]=e$,K[34]=D):D=K[34],K[35]!==eT?(F={field:"host.name",value:eT},K[35]=eT,K[36]=F):F=K[36],K[37]!==eA?(O={field:"k8s.pod.name",value:eA},K[37]=eA,K[38]=O):O=K[38],K[39]!==ek?(P={field:"k8s.node.name",value:ek},K[39]=ek,K[40]=P):P=K[40],K[41]!==M||K[42]!==D||K[43]!==F||K[44]!==O||K[45]!==P?(B={all:R,custom:M,service:D,host:F,"k8s.pod.name":O,"k8s.node.name":P},K[41]=M,K[42]=D,K[43]=F,K[44]=O,K[45]=P,K[46]=B):B=K[46];let ez=B;K[47]!==ez||K[48]!==en?(V=e=>{let t="sql"===en,s=ez[e];return"all"===e?s.value:"custom"===e?s.value.trim():(0,j.ji)("ResourceAttributes",s.field,s.value,t)},K[47]=ez,K[48]=en,K[49]=V):V=K[49];let eL=V;K[50]!==eT||K[51]!==ek||K[52]!==eA||K[53]!==e$?(W=function(){return[{label:"All",value:"all"},...e$?[{label:"Service",value:"service"}]:[],...eT?[{label:"Host",value:"host"}]:[],...eA?[{label:"Pod",value:"k8s.pod.name"}]:[],...ek?[{label:"Node",value:"k8s.node.name"}]:[],{label:"Custom",value:"custom"}]},K[50]=eT,K[51]=ek,K[52]=eA,K[53]=e$,K[54]=W):W=K[54];let eR=W;e:{let e,t,s;K[55]!==el||K[56]!==eL?(e=eL(el),K[55]=el,K[56]=eL,K[57]=e):e=K[57];let r=e;if(!Y){let e,t,s=J.defaultTableSelectExpression||"";K[58]===Symbol.for("react.memo_cache_sentinel")?(e={limit:200},K[58]=e):e=K[58];let n=`${J.timestampValueExpression} DESC`;K[59]!==eN||K[60]!==en||K[61]!==J.connection||K[62]!==J.from||K[63]!==J.timestampValueExpression||K[64]!==s||K[65]!==n||K[66]!==r?(t={connection:J.connection,from:J.from,timestampValueExpression:J.timestampValueExpression,select:s,limit:e,orderBy:n,where:r,whereLanguage:en,dateRange:eN},K[59]=eN,K[60]=en,K[61]=J.connection,K[62]=J.from,K[63]=J.timestampValueExpression,K[64]=s,K[65]=n,K[66]=r,K[67]=t):t=K[67],H=t;break e}K[68]===Symbol.for("react.memo_cache_sentinel")?(t=[],K[68]=t):t=K[68],K[69]!==Y||K[70]!==eN||K[71]!==en||K[72]!==r?(s={...Y,where:r,whereLanguage:en,dateRange:eN,filters:t},K[69]=Y,K[70]=eN,K[71]=en,K[72]=r,K[73]=s):s=K[73],H=s}let eM=H;return K[74]!==ez||K[75]!==eM||K[76]!==el||K[77]!==ed||K[78]!==eR||K[79]!==ew||K[80]!==en||K[81]!==ea||K[82]!==U||K[83]!==eS||K[84]!==J?(q=eM&&(0,n.jsxs)(m.s,{direction:"column",mih:"0px",style:{flexGrow:1},children:[(0,n.jsxs)(h.Y,{justify:"space-between",p:"sm",children:[(0,n.jsx)(x.I,{size:"xs",data:eR(),value:el,onChange:e=>eo(e)}),"custom"===el&&(0,n.jsx)(b.A,{name:"whereLanguage",control:ed,sqlInput:"lucene"===en?null:(0,n.jsx)(f.Z,{tableConnection:(0,u.VO)(J),control:ed,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",language:"sql",enableHotkey:!0,size:"sm"}),luceneInput:"sql"===en?null:(0,n.jsx)(y.A,{tableConnection:(0,u.VO)(J),control:ed,name:"where",language:"lucene",placeholder:"Lucene where clause (ex. column:value)",enableHotkey:!0,size:"sm"})}),(0,n.jsx)(x.I,{size:"xs",data:[{label:"100ms",value:o()("100ms").toString()},{label:"500ms",value:o()("500ms").toString()},{label:"1s",value:o()("1s").toString()},{label:"5s",value:o()("5s").toString()},{label:"30s",value:o()("30s").toString()},{label:"1m",value:o()("1m").toString()},{label:"5m",value:o()("5m").toString()},{label:"15m",value:o()("15m").toString()}],value:ea.toString(),onChange:e=>ei(Number(e))})]}),(0,n.jsx)(h.Y,{p:"sm",children:(0,n.jsxs)("div",{children:["all"!==el&&(0,n.jsxs)(p.E,{size:"md",variant:"default",children:[el,":",ez[el].value]}),(0,n.jsxs)(p.E,{size:"md",variant:"default",children:["Time range: \xb1",o()(ea/2)]})]})}),(0,n.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,n.jsx)(_.rD,{sourceId:J.id,highlightedLineId:U,showExpandButton:!1,isLive:!1,config:eM,queryKeyPrefix:"context",onRowDetailsClick:ew,onChildModalOpen:eS})})]}),K[74]=ez,K[75]=eM,K[76]=el,K[77]=ed,K[78]=eR,K[79]=ew,K[80]=en,K[81]=ea,K[82]=U,K[83]=eS,K[84]=J,K[85]=q):q=K[85],K[86]!==et||K[87]!==ey||K[88]!==eh||K[89]!==eb||K[90]!==ej||K[91]!==ee||K[92]!==Z?(X=eh&&eb&&(0,n.jsx)(w.A,{source:eb,rowId:eh,aliasWith:ey,onClose:ej,isNestedPanel:!0,breadcrumbPath:[...et,{label:"Surrounding Context",rowData:Z}],onBreadcrumbClick:ee}),K[86]=et,K[87]=ey,K[88]=eh,K[89]=eb,K[90]=ej,K[91]=ee,K[92]=Z,K[93]=X):X=K[93],K[94]!==q||K[95]!==X?(G=(0,n.jsxs)(n.Fragment,{children:[q,X]}),K[94]=q,K[95]=X,K[96]=G):G=K[96],G}},78694:(e,t,s)=>{"use strict";s.d(t,{iV:()=>g,ir:()=>v,$K:()=>f,hF:()=>b,Qx:()=>y});var r=s(6029),n=s(75155),a=s(55729);s(82203);var i=s(75828),l=(s(63085),s(8468)),o=s(20158),c=s(70114),d=s(23474);s(38067),s(26355);s(94720),s(3635);var u=s(72075),m=s(68593);s(7565),s(94364);var h=s(92917),x=s(66773),p=s.n(x);let g=e=>{let t,s,i,l,o,u,m=(0,n.c)(15),{title:h,children:x,initiallyCollapsed:p}=e,[g,f]=a.useState(p??!1);return m[0]!==g?(t=()=>f(!g),s=g?(0,r.jsx)(c.A,{size:14,className:"me-2"}):(0,r.jsx)(d.A,{size:14,className:"me-2"}),m[0]=g,m[1]=t,m[2]=s):(t=m[1],s=m[2]),m[3]!==h?(i=(0,r.jsx)("div",{className:"fs-7",children:h}),m[3]=h,m[4]=i):i=m[4],m[5]!==t||m[6]!==s||m[7]!==i?(l=(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,i]}),m[5]=t,m[6]=s,m[7]=i,m[8]=l):l=m[8],m[9]!==x||m[10]!==g?(o=g?null:(0,r.jsx)("div",{className:"mb-4",children:x}),m[9]=x,m[10]=g,m[11]=o):o=m[11],m[12]!==l||m[13]!==o?(u=(0,r.jsxs)("div",{className:"my-3",children:[l,o]}),m[12]=l,m[13]=o,m[14]=u):u=m[14],u},f=e=>{let t,s,a=(0,n.c)(5),{children:i,title:l}=e;return a[0]!==l?(t=l&&(0,r.jsx)("div",{className:p().panelSectionWrapperTitle,children:l}),a[0]=l,a[1]=t):t=a[1],a[2]!==i||a[3]!==t?(s=(0,r.jsxs)("div",{className:p().panelSectionWrapper,children:[t,i]}),a[2]=i,a[3]=t,a[4]=s):s=a[4],s};m.k;let b=[{accessorKey:"0",header:"Header",size:260,cell:({row:e})=>(0,r.jsx)("div",{className:"text-truncate",title:e.original[0],children:e.original[0]})},{size:m.k,accessorKey:"1",header:"Value"}],y=[{accessorKey:"label",header:"Label",size:260,cell:({row:e})=>(0,r.jsx)("span",{children:e.original.label})},{size:m.k,accessorKey:"value",header:"Value",cell:({row:e})=>(0,r.jsx)("span",{className:e.original.className,children:e.original.value})}],v=()=>{let e,t,s,a,i,c=(0,n.c)(7),[d,u]=(0,h.Mj)("kbd-shortcuts-dismissed",!1);c[0]!==u?(e=()=>{u(!0)},c[0]=u,c[1]=e):e=c[1];let m=e;return d?null:(c[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(l.u,{className:"me-1",children:"←"}),s=(0,r.jsx)(l.u,{children:"→"}),c[2]=t,c[3]=s):(t=c[2],s=c[3]),c[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,r.jsxs)("div",{children:["Use ",t,s," arrow keys or ",(0,r.jsx)(l.u,{className:"me-1",children:"k"}),(0,r.jsx)(l.u,{children:"j"})," to move through events"]}),(0,r.jsx)("div",{className:p().kbdDivider}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.u,{children:"ESC"})," to close"]})]}),c[4]=a):a=c[4],c[5]!==m?(i=(0,r.jsx)("div",{className:p().kbdShortcuts,children:(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center ",children:[a,(0,r.jsx)(o.J,{"aria-label":"Hide",onClick:m})]})}),c[5]=m,c[6]=i):i=c[6],i)}},80925:(e,t,s)=>{"use strict";s.d(t,{S:()=>g,t:()=>h});var r=s(55729),n=s(67843),a=s(35467),i=s(67270),l=s(12482),o=s(92917),c=s(40147),d=s(78550),u=s(49672),m=s(81973);function h({traceSource:e,sessionSource:t,dateRange:s,where:r,whereLanguage:n},o){let{enabled:m=!0}=o||{},{getFieldExpression:h,isLoading:x}=(0,c.A)(e),{getFieldExpression:p,isLoading:g}=(0,c.A)(t),f=["teamId","teamName","userEmail","userName"],b="sessions",y=(0,u.fu)(),v=(0,d.Ge)();return(0,l.I)({queryKey:["sessions",e?.id,t?.id,s,r,n],queryFn:async()=>{if(!e||!t||!h||!p)return[];let l=h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId"),[o,c,d]=await Promise.all([(0,i.PV)({select:[{valueExpression:`${e.serviceNameExpression}`,alias:"serviceName"},{valueExpression:l,alias:"sessionId"},{alias:"maxTimestamp",valueExpression:`MAX(${e.timestampValueExpression})`},{alias:"minTimestamp",valueExpression:`MIN(${e.timestampValueExpression})`},{aggFn:"count",alias:"sessionCount",valueExpression:"*"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.eventAttributesExpression}.component:"user-interaction"`,valueExpression:"",alias:"interactionCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.statusCodeExpression}:error`,valueExpression:"",alias:"errorCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.spanNameExpression}:"record init"`,valueExpression:"",alias:"recordingCount"},...f.map(t=>({valueExpression:`MAX(${h(e.eventAttributesExpression??"SpanAttributes",t)})`,alias:t}))],from:e.from,dateRange:s,where:`${e.resourceAttributesExpression}.rum.sessionId:*`,whereLanguage:"lucene",...r&&{filters:[{type:n??"lucene",condition:r}]},timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e.connection,groupBy:"serviceName, sessionId"},v,e.querySettings),(0,i.PV)({select:[{valueExpression:`DISTINCT ${p(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:t.from,dateRange:s,where:`${p(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b})`,whereLanguage:"sql",timestampValueExpression:t.timestampValueExpression,implicitColumnExpression:t.implicitColumnExpression,connection:t.connection},v,t.querySettings),(0,i.PV)({select:[{valueExpression:`DISTINCT ${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:e.from,dateRange:s,where:`(${e.spanNameExpression}='record init' OR ${e.spanNameExpression}='visibility') AND (${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b}))`,whereLanguage:"sql",timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e?.connection},v,e.querySettings)]),u=(0,a.kg)`
        WITH _${b} AS (${o}),
        ${b} AS (
          SELECT * 
          FROM _${b}
          ${r?"":"HAVING interactionCount > 0 OR recordingCount > 0"}
          ORDER BY maxTimestamp DESC
          LIMIT 500
        )
      `,m=r&&r.length>0?(0,a.kg)`
        ${u},
        sessionIdsWithRecordings AS (${c}),
        sessionIdsWithUserActivity AS (${d})
        SELECT *
        FROM ${b}
        WHERE ${b}.sessionId IN (
          SELECT sessionIdsWithRecordings.sessionId FROM sessionIdsWithRecordings
        ) OR ${b}.sessionId IN (
          SELECT sessionIdsWithUserActivity.sessionId FROM sessionIdsWithUserActivity
        )
      `:(0,a.kg)`
        ${u}
        SELECT *
        FROM ${b}
        `;return await y.query({query:m.sql,query_params:m.params,connectionId:e?.connection}).then(e=>e.json())},staleTime:3e5,...o,enabled:!!m&&!x&&!g})}class x extends Error{}async function*p(e){let t=e.getReader();try{for(;;){let{done:e,value:s}=await t.read();if(e)return;yield s}}finally{t.releaseLock()}}function g({serviceName:e,sessionId:t,sourceId:s,startDate:a,endDate:l,limit:c=100,onEvent:h,onEnd:g,resultsKey:f,getSessionSourceFieldExpression:b},y){let v=y?.keepPreviousData??!1,j=y?.shouldAbortPendingRequest??!0,S=(0,d.Ge)(),[w,_]=(0,r.useState)({key:"",data:[]}),[E,C]=(0,r.useState)(!0),[N,k]=(0,r.useState)(!0),A=(0,r.useRef)(null),[T,$]=(0,r.useState)("idle"),I=(0,r.useRef)(void 0),{data:z}=(0,m.Fo)({id:s}),L=(0,r.useCallback)(async({pageParam:s=0,limit:r})=>{if(!z)return;let o=[],d=0,y=a.getTime().toString(),j=l.getTime().toString(),w=(r??c).toString(),E=s.toString(),N=new AbortController;A.current=N,C(!0),$("fetching"),I.current="fetching";let T=await (0,i.PV)({select:[{valueExpression:m.kJ.implicitColumnExpression,alias:"b"},{valueExpression:`simpleJSONExtractInt(${m.kJ.implicitColumnExpression}, 'type')`,alias:"t"},{valueExpression:`${b(m.kJ.eventAttributesExpression,"rr-web.chunk")}`,alias:"ck"},{valueExpression:`${b(m.kJ.eventAttributesExpression,"rr-web.total-chunks")}`,alias:"tcks"}],dateRange:[new Date(parseInt(y)),new Date(parseInt(j))],from:z.from,whereLanguage:"lucene",where:`ServiceName:"${e}" AND ${m.kJ.resourceAttributesExpression}.rum.sessionId:"${t}"`,timestampValueExpression:z.timestampValueExpression,implicitColumnExpression:m.kJ.implicitColumnExpression,connection:z.connection,orderBy:`${z.timestampValueExpression} ASC`,limit:{limit:Math.min(1e6,parseInt(w)),offset:parseInt(E)}},S,z.querySettings),L=(async()=>{let e,t=(0,u.W)(),s=await t.query({query:T.sql,query_params:T.params,format:"JSONEachRow",connectionId:z.connection});for await(let t of(e=h||(v?e=>o.push(e):e=>_(t=>(0,n.Ay)(t,t=>{t.key=f??t.key??"DEFAULT_KEY",t.data.push(e)}))),p(s.stream())))for(let s of t)try{let t=s.json();d++,e(t)}catch{}g?.(),v&&_({key:f??"DEFAULT_KEY",data:o}),(0===d||d<c)&&k(!1)})();try{await Promise.race([L,new Promise((e,t)=>{setTimeout(()=>{t(new x("Timeout"))},18e4)})])}catch(e){e instanceof x?(C(!1),$("idle"),I.current="idle",N.abort(),console.warn("Closing event source due to timeout"),g?.(new x)):console.error(e)}N.abort(),C(!1),$("idle"),I.current="idle"},[z,e,t,a,l,c,v,_,h,g,f,S,b]),R=[t,a,l,c].join("||"),M=(0,o.ZC)(R);(0,r.useEffect)(()=>{M!=R&&("fetching"!==I.current||j)&&(j&&"fetching"===I.current&&A.current?.abort(),v||_({key:"",data:[]}),k(!0),L({pageParam:0}))},[M,R,j,L,v]);let D=(0,r.useCallback)(e=>{N&&"idle"===I.current&&w.data.length>0&&L({pageParam:w.data.length,limit:e?.limit}).then(()=>{e?.cb?.()})},[L,w.data.length,N]),F=(0,r.useCallback)(()=>{A.current?.abort()},[]);return{hasNextPage:N,isFetching:E,results:w.data,resultsKey:w.key,fetchNextPage:D,abort:F}}},81408:e=>{e.exports={wrapper:"SessionSubpanelV2_wrapper__5kN48",eventList:"SessionSubpanelV2_eventList__CJCVt",eventListHeader:"SessionSubpanelV2_eventListHeader__Hbhpi",eventListContainer:"SessionSubpanelV2_eventListContainer__r2wEN",eventRow:"SessionSubpanelV2_eventRow__XFl1t",eventRowError:"SessionSubpanelV2_eventRowError__61zDU",eventRowIcon:"SessionSubpanelV2_eventRowIcon__C371Y",eventRowTitle:"SessionSubpanelV2_eventRowTitle__BCmpn",eventRowSuccess:"SessionSubpanelV2_eventRowSuccess___a9Kd",eventRowHighlighted:"SessionSubpanelV2_eventRowHighlighted__YWXks",eventRowContent:"SessionSubpanelV2_eventRowContent__Y9_5z",eventRowTimestamp:"SessionSubpanelV2_eventRowTimestamp__MPRLq",eventRowDescription:"SessionSubpanelV2_eventRowDescription__XJ9b7",player:"SessionSubpanelV2_player___Erie",playerHeader:"SessionSubpanelV2_playerHeader__qMRJo",playerHeaderUrl:"SessionSubpanelV2_playerHeaderUrl__K3MEs",playerContainer:"SessionSubpanelV2_playerContainer__m7RnT",domPlayerWrapper:"SessionSubpanelV2_domPlayerWrapper__wKZpR",domPlayerWrapperPaused:"SessionSubpanelV2_domPlayerWrapperPaused__9xhaT",playerTimestamp:"SessionSubpanelV2_playerTimestamp__ebCzv",playerPlaybar:"SessionSubpanelV2_playerPlaybar__FEw0u",playerToolbar:"SessionSubpanelV2_playerToolbar__7sL7N"}},83101:e=>{e.exports={resizeHandle:"ResizablePanel_resizeHandle__4fEVM",resizeYHandle:"ResizablePanel_resizeYHandle__1pBbm"}},83232:(e,t,s)=>{"use strict";s.d(t,{A:()=>eD});var r=s(6029),n=s(75155),a=s(55729),i=s(71024),l=s.n(i),o=s(95669),c=s.n(o),d=s(81278),u=s(8804),m=s(67843),h=s(41038),x=s(7913),p=s(99789),g=s.n(p),f=s(1909),b=s(76089),y=s(82641),v=s(17456),j=s(63085),S=s(76013),w=s(78253),_=s(43517),E=s(60481),C=s(3635),N=s(27166),k=s(96061),A=s(25062),T=s(92556),$=s(22623),I=s(56513),z=s(50561),L=s(22273),R=s(60665),M=s(87104),D=s(45172),F=s(81055),O=s(6892),P=s(90993),B=s(28200),V=s(5653),W=s(40387),H=s(48080),q=s(94502),X=s(55533),G=s(62118),K=s(225),J=s(15670),Y=s(91148),Z=s(91939),U=s(40228);function Q(e){let t,s,a,i,l,o,c=(0,n.c)(13),{opened:d,onClose:u,title:m,children:h}=e;return c[0]!==u||c[1]!==d?(t=[["f",()=>d&&u()]],c[0]=u,c[1]=d,c[2]=t):t=c[2],(0,z.O)(t),c[3]===Symbol.for("react.memo_cache_sentinel")?(s={transition:"fade",duration:200},a={body:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column",overflow:"hidden"},content:{display:"flex",flexDirection:"column",height:"100%"},inner:{padding:0}},c[3]=s,c[4]=a):(s=c[3],a=c[4]),c[5]===Symbol.for("react.memo_cache_sentinel")?(i={overflow:"auto",position:"relative"},c[5]=i):i=c[5],c[6]!==h?(l=(0,r.jsx)(E.a,{h:"100%",w:"100%",p:"md",style:i,children:h}),c[6]=h,c[7]=l):l=c[7],c[8]!==u||c[9]!==d||c[10]!==l||c[11]!==m?(o=(0,r.jsx)(N.a,{opened:d,onClose:u,title:m,fullScreen:!0,transitionProps:s,styles:a,withinPortal:!0,trapFocus:!1,lockScroll:!0,children:l}),c[8]=u,c[9]=d,c[10]=l,c[11]=m,c[12]=o):o=c[12],o}var ee=s(64467),et=s(58153),es=s(97344),er=s(15628),en=s(68269),ea=s(75359),ei=s(64501),el=s(85014),eo=s(62759),ec=s(32479),ed=s(36600),eu=s(17978),em=s(43152),eh=s(98142),ex=s(3061),ep=s(45034),eg=s(67272),ef=s(84851),eb=s(56514),ey=s(43370),ev=s(81973),ej=s(387),eS=s(46197),ew=s(92917),e_=s(26674);s(24260),s(78048);let eE=()=>Math.floor(1e8*Math.random()).toString(36),eC=(0,p.WidthProvider)(g()),eN=(0,ej.lr)("Past 1h",!1),ek=(0,a.forwardRef)((e,t)=>{let s,i,l,o,c,d,m,h,p,g,f,b,N,k,A,T,$,I,L,R,B,V,W,H,q,X,G,K,J,ee,et,es,ei=(0,n.c)(98),{chart:el,dateRange:eo,onDuplicateClick:ec,onEditClick:ed,onDeleteClick:eu,onUpdateChart:eh,granularity:ex,onTimeRangeSelect:ep,filters:eg,className:eb,style:ey,onMouseDown:ej,onMouseUp:eS,onTouchEnd:e_,children:eE,isHighlighted:eC}=e,[eN,ek]=(0,a.useState)(!1),[eA,eT]=(0,a.useState)(!1);ei[0]!==el.id||ei[1]!==eC?(s=()=>{eC&&document.getElementById(`chart-${el.id}`)?.scrollIntoView({behavior:"smooth"})},i=[el.id,eC],ei[0]=el.id,ei[1]=eC,ei[2]=s,ei[3]=i):(s=ei[2],i=ei[3]),(0,a.useEffect)(s,i),ei[4]!==eA?(l=[["f",()=>eA&&ek(eF)]],ei[4]=eA,ei[5]=l):l=ei[5],(0,z.O)(l);let[e$,eI]=(0,a.useState)(void 0);ei[6]!==el.config.source?(o={id:el.config.source},ei[6]=el.config.source,ei[7]=o):o=ei[7];let{data:ez}=(0,ev.Fo)(o);ei[8]!==el.config||ei[9]!==eo||ei[10]!==eg||ei[11]!==ex||ei[12]!==ez?(c=()=>{if(null!=ez){let e=ez.kind===y.GL.Metric,t=el.config.select[0],s=e&&"string"!=typeof t?t?.metricType:void 0,r=(0,ew.U6)(ez,s);ez.connection&&eI({...el.config,connection:ez.connection,dateRange:eo,granularity:ex,timestampValueExpression:ez.timestampValueExpression,from:{databaseName:ez.from?.databaseName||"default",tableName:r||""},implicitColumnExpression:ez.implicitColumnExpression,filters:eg,metricTables:e?ez.metricTables:void 0})}},ei[8]=el.config,ei[9]=eo,ei[10]=eg,ei[11]=ex,ei[12]=ez,ei[13]=c):c=ei[13],ei[14]!==el||ei[15]!==eo||ei[16]!==eg||ei[17]!==ex||ei[18]!==ez?(d=[ez,el,eo,ex,eg],ei[14]=el,ei[15]=eo,ei[16]=eg,ei[17]=ex,ei[18]=ez,ei[19]=d):d=ei[19],(0,a.useEffect)(c,d);let[eL,eR]=(0,a.useState)(!1),eM=el.config.alert;e:{if(!eM){m="transparent";break e}if(eM.state===y.Or.OK){m="green";break e}if(eM.silenced?.at){m="yellow";break e}m="red"}let eD=m;t:{if(!eM){h="Add alert";break t}let e=`Has alert and is in ${eM.state} state`;if(eM.silenced?.at){let t,s;if(ei[20]!==eM.silenced.at||ei[21]!==e){let r=new Date(eM.silenced.at);t=e,s=(0,u.A)(r,new Date),ei[20]=eM.silenced.at,ei[21]=e,ei[22]=t,ei[23]=s}else t=ei[22],s=ei[23];e=t+`. Ack'd ${s}`}h=e}let eB=h,eV=eL?"visible":"hidden";ei[24]!==eV?(p={visibility:eV},ei[24]=eV,ei[25]=p):p=ei[25],ei[26]!==eM||ei[27]!==eD||ei[28]!==eB||ei[29]!==el.config.displayType||ei[30]!==el.id||ei[31]!==ed?(g=(el.config.displayType===y.t2.Line||el.config.displayType===y.t2.StackedBar)&&(0,r.jsx)(v.C,{size:eM?.state===y.Or.OK?6:8,zIndex:1,color:eD,processing:eM?.state===y.Or.ALERT,label:!eM&&(0,r.jsx)("span",{className:"fs-8",children:"+"}),mr:4,children:(0,r.jsx)(j.m,{label:eB,withArrow:!0,children:(0,r.jsx)(S.M,{"data-testid":`tile-alerts-button-${el.id}`,variant:"subtle",size:"sm",onClick:ed,children:(0,r.jsx)(M.A,{size:16})})})}),ei[26]=eM,ei[27]=eD,ei[28]=eB,ei[29]=el.config.displayType,ei[30]=el.id,ei[31]=ed,ei[32]=g):g=ei[32];let eW=`tile-duplicate-button-${el.id}`;ei[33]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)(D.A,{size:14}),ei[33]=f):f=ei[33],ei[34]!==ec||ei[35]!==eW?(b=(0,r.jsx)(S.M,{"data-testid":eW,variant:"subtle",size:"sm",onClick:ec,title:"Duplicate",children:f}),ei[34]=ec,ei[35]=eW,ei[36]=b):b=ei[36];let eH=`tile-fullscreen-button-${el.id}`;ei[37]===Symbol.for("react.memo_cache_sentinel")?(N=e=>{e.stopPropagation(),ek(!0)},ei[37]=N):N=ei[37],ei[38]===Symbol.for("react.memo_cache_sentinel")?(k=(0,r.jsx)(F.A,{size:14}),ei[38]=k):k=ei[38],ei[39]!==eH?(A=(0,r.jsx)(S.M,{"data-testid":eH,variant:"subtle",size:"sm",onClick:N,title:"View Fullscreen (f)",children:k}),ei[39]=eH,ei[40]=A):A=ei[40];let eq=`tile-edit-button-${el.id}`;ei[41]===Symbol.for("react.memo_cache_sentinel")?(T=(0,r.jsx)(O.A,{size:14}),ei[41]=T):T=ei[41],ei[42]!==ed||ei[43]!==eq?($=(0,r.jsx)(S.M,{"data-testid":eq,variant:"subtle",size:"sm",onClick:ed,title:"Edit",children:T}),ei[42]=ed,ei[43]=eq,ei[44]=$):$=ei[44];let eX=`tile-delete-button-${el.id}`;ei[45]===Symbol.for("react.memo_cache_sentinel")?(I=(0,r.jsx)(P.A,{size:14}),ei[45]=I):I=ei[45],ei[46]!==eu||ei[47]!==eX?(L=(0,r.jsx)(S.M,{"data-testid":eX,variant:"subtle",size:"sm",onClick:eu,title:"Delete",children:I}),ei[46]=eu,ei[47]=eX,ei[48]=L):L=ei[48],ei[49]!==p||ei[50]!==g||ei[51]!==b||ei[52]!==A||ei[53]!==$||ei[54]!==L?(R=(0,r.jsxs)(w.s,{gap:"0px",onMouseDown:eO,style:p,children:[g,b,A,$,L]},"hover-toolbar"),ei[49]=p,ei[50]=g,ei[51]=b,ei[52]=A,ei[53]=$,ei[54]=L,ei[55]=R):R=ei[55];let eG=R;ei[56]!==el.config.name?(B=(0,r.jsx)(_.E,{size:"sm",ms:"xs",children:el.config.name}),ei[56]=el.config.name,ei[57]=B):B=ei[57];let eK=B;ei[58]!==el||ei[59]!==eo||ei[60]!==eG||ei[61]!==ep||ei[62]!==eh||ei[63]!==e$||ei[64]!==ez||ei[65]!==eK?(V=(e,t)=>{let s=void 0!==e&&e?[]:[eG],n=void 0!==t&&t?"fullscreen":"tile";return(0,r.jsxs)(x.ErrorBoundary,{onError:console.error,fallback:(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent",children:"An error occurred while rendering the chart."}),children:[(e$?.displayType===y.t2.Line||e$?.displayType===y.t2.StackedBar)&&(0,r.jsx)(U.S,{title:eK,toolbarPrefix:s,sourceId:el.config.source,showDisplaySwitcher:!0,config:e$,onTimeRangeSelect:ep,setDisplayType:e=>{eh?.({...el,config:{...el.config,displayType:e}})}},`${n}-${el.id}`),e$?.displayType===y.t2.Table&&(0,r.jsx)(E.a,{p:"xs",h:"100%",children:(0,r.jsx)(Z.A,{title:eK,toolbarPrefix:s,config:e$,variant:"muted",getRowSearchLink:e=>(0,em.A7)({row:e,source:ez,config:e$,dateRange:eo})},`${n}-${el.id}`)}),e$?.displayType===y.t2.Number&&(0,r.jsx)(Y.A,{title:eK,toolbarPrefix:s,config:e$},`${n}-${el.id}`),e$?.displayType===y.t2.Pie&&(0,r.jsx)(en.R,{title:eK,toolbarPrefix:s,config:e$},`${n}-${el.id}`),(e$?.displayType===y.t2.Markdown||!e$&&el.config.displayType===y.t2.Markdown)&&(0,r.jsx)(ef.A,{title:eK,toolbarItems:s,config:e$??el.config},`${n}-${el.id}`),e$?.displayType===y.t2.Search&&(0,r.jsx)(er.A,{title:eK,toolbarItems:s,disableReactiveContainer:!0,children:(0,r.jsx)(ea.A,{enabled:!0,sourceId:el.config.source,config:{...e$,orderBy:[{ordering:"DESC",valueExpression:(0,ev.AF)(e$.timestampValueExpression)}],dateRange:eo,select:e$.select||ez?.defaultTableSelectExpression||"",groupBy:void 0,granularity:void 0},isLive:!1,queryKeyPrefix:"search",variant:"muted"},`${n}-${el.id}`)})]})},ei[58]=el,ei[59]=eo,ei[60]=eG,ei[61]=ep,ei[62]=eh,ei[63]=e$,ei[64]=ez,ei[65]=eK,ei[66]=V):V=ei[66];let eJ=V,eY=`dashboard-tile-${el.id}`,eZ=`p-2 pt-0 ${eb} d-flex flex-column bg-muted cursor-grab rounded ${eC&&"dashboard-chart-highlighted"}`,eU=`chart-${el.id}`;ei[67]===Symbol.for("react.memo_cache_sentinel")?(W=()=>{eR(!0),eT(!0)},H=()=>{eR(!1),eT(!1)},ei[67]=W,ei[68]=H):(W=ei[67],H=ei[68]),ei[69]!==ey?(q={...ey},ei[69]=ey,ei[70]=q):q=ei[70];let eQ=eL?"gray":void 0;return ei[71]!==eQ?(X=(0,r.jsx)(C.Y,{justify:"center",py:4,children:(0,r.jsx)(E.a,{bg:eQ,w:100,h:2})}),ei[71]=eQ,ei[72]=X):X=ei[72],ei[73]!==eJ?(G=(0,r.jsx)("div",{className:"fs-7 text-muted flex-grow-1 overflow-hidden cursor-default",onMouseDown:eP,children:eJ()}),ei[73]=eJ,ei[74]=G):G=ei[74],ei[75]!==el.id||ei[76]!==eE||ei[77]!==ej||ei[78]!==eS||ei[79]!==e_||ei[80]!==t||ei[81]!==eY||ei[82]!==eZ||ei[83]!==eU||ei[84]!==q||ei[85]!==X||ei[86]!==G?(K=(0,r.jsxs)("div",{"data-testid":eY,className:eZ,id:eU,onMouseOver:W,onMouseLeave:H,ref:t,style:q,onMouseDown:ej,onMouseUp:eS,onTouchEnd:e_,children:[X,G,eE]},el.id),ei[75]=el.id,ei[76]=eE,ei[77]=ej,ei[78]=eS,ei[79]=e_,ei[80]=t,ei[81]=eY,ei[82]=eZ,ei[83]=eU,ei[84]=q,ei[85]=X,ei[86]=G,ei[87]=K):K=ei[87],ei[88]===Symbol.for("react.memo_cache_sentinel")?(J=()=>ek(!1),ei[88]=J):J=ei[88],ei[89]!==eN||ei[90]!==eJ?(ee=eN&&eJ(!0,!0),ei[89]=eN,ei[90]=eJ,ei[91]=ee):ee=ei[91],ei[92]!==eN||ei[93]!==ee?(et=(0,r.jsx)(Q,{opened:eN,onClose:J,children:ee}),ei[92]=eN,ei[93]=ee,ei[94]=et):et=ei[94],ei[95]!==K||ei[96]!==et?(es=(0,r.jsxs)(r.Fragment,{children:[K,et]}),ei[95]=K,ei[96]=et,ei[97]=es):es=ei[97],es}),eA=e=>{let t,s,i,l,o,c=(0,n.c)(21),{dashboardId:d,chart:u,onClose:m,onSave:h,isSaving:x,dateRange:p}=e,g=(0,e_.Y)()+10,f=(0,eS.S)(),[b,y]=(0,a.useState)(!1);c[0]!==u?(t=()=>{null!=u&&y(!1)},s=[u],c[0]=u,c[1]=t,c[2]=s):(t=c[1],s=c[2]),(0,a.useEffect)(t,s),c[3]!==f||c[4]!==b||c[5]!==x||c[6]!==m?(i=()=>{x||(b?f("You have unsaved changes. Discard them and close the editor?","Discard").then(e=>{e&&m()}):m())},c[3]=f,c[4]=b,c[5]=x,c[6]=m,c[7]=i):i=c[7];let v=i,j=null!=u;return c[8]!==u||c[9]!==d||c[10]!==p||c[11]!==v||c[12]!==x||c[13]!==g||c[14]!==h?(l=null!=u&&(0,r.jsx)(e_.S.Provider,{value:g+10,children:(0,r.jsx)(J.A,{dashboardId:d,chartConfig:u.config,dateRange:p,isSaving:x,onSave:e=>{h({...u,config:e})},onClose:v,onDirtyChange:y})}),c[8]=u,c[9]=d,c[10]=p,c[11]=v,c[12]=x,c[13]=g,c[14]=h,c[15]=l):l=c[15],c[16]!==v||c[17]!==g||c[18]!==j||c[19]!==l?(o=(0,r.jsx)(N.a,{opened:j,onClose:v,withCloseButton:!1,centered:!0,size:"90%",padding:"xs",zIndex:g,children:l}),c[16]=v,c[17]=g,c[18]=j,c[19]=l,c[20]=o):o=c[20],o};function eT(e){let t,s,i,l=(0,n.c)(10),{name:o,onSave:c}=e,[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(o),{hovered:x,ref:p}=(0,L.M)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>u(!0),l[0]=t):t=l[0],l[1]!==m||l[2]!==d||l[3]!==x||l[4]!==o||l[5]!==c?(s=d?(0,r.jsxs)("form",{className:"d-flex align-items-center",onSubmit:e=>{e.preventDefault(),c(m),u(!1)},children:[(0,r.jsx)(k.p,{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"Dashboard Name"}),(0,r.jsx)(A.$,{ms:"sm",variant:"primary",type:"submit",children:"Save Name"})]}):(0,r.jsxs)("div",{className:"d-flex align-items-center",style:{minWidth:100},children:[(0,r.jsx)(T.h,{fw:400,order:3,children:o}),x&&(0,r.jsx)(A.$,{ms:"xs",variant:"subtle",size:"xs",onClick:()=>u(!0),children:(0,r.jsx)(O.A,{size:14})})]}),l[1]=m,l[2]=d,l[3]=x,l[4]=o,l[5]=c,l[6]=s):s=l[6],l[7]!==p||l[8]!==s?(i=(0,r.jsx)(E.a,{ref:p,pe:"md",onDoubleClick:t,className:"cursor-pointer",title:"Double click to edit",children:s}),l[7]=p,l[8]=s,l[9]=i):i=l[9],i}function e$(e){let t,s,i,l,o,u,p,g,y,v,N,k,T,z,L,M,D,F,O,K,J,Y,Z,U,Q,er,en,ea,ef,eb,e_,e$,eM,eD,eF,eO,eP,eB,eV,eW,eH,eq,eX,eG,eK,eJ,eY,eZ,eU,eQ,e0,e1,e2,e3,e5=(0,n.c)(192),{presetConfig:e4}=e,e6=(0,ed.Kh)(),e7=(0,eS.S)(),e8=(0,d.useRouter)(),e9=e8.query.dashboardId;e5[0]!==e4||e5[1]!==e9?(t={dashboardId:e9,presetConfig:e4},e5[0]=e4,e5[1]=e9,e5[2]=t):t=e5[2];let{dashboard:te,setDashboard:tt,dashboardHash:ts,isLocalDashboard:tr,isFetching:tn,isSetting:ta}=(0,es.MZ)(t),{data:ti}=(0,ev.oE)(),[tl]=(0,h.ZA)("highlightedTileId");e:{let e;if(!te){let e;e5[3]===Symbol.for("react.memo_cache_sentinel")?(e=[],e5[3]=e):e=e5[3],s=e;break e}if(e5[4]!==te.tiles||e5[5]!==ti){for(let{config:t}of(e=[],te.tiles)){let s=ti?.find(e=>e.id===t.source);if(!s)continue;let r=t.select[0],n="string"!=typeof r?r?.metricType:void 0,a=(0,ew.U6)(s,n);a&&e.push({databaseName:s.from.databaseName,tableName:a,connectionId:s.connection})}e5[4]=te.tiles,e5[5]=ti,e5[6]=e}else e=e5[6];s=e}let to=s,[tc,td]=(0,h.ZA)("granularity",h.tU);e5[7]===Symbol.for("react.memo_cache_sentinel")?(i=eu.s.withDefault(""),e5[7]=i):i=e5[7];let[tu,tm]=(0,h.ZA)("where",i);e5[8]===Symbol.for("react.memo_cache_sentinel")?(l=h.tU.withDefault("lucene"),e5[8]=l):l=e5[8];let[th,tx]=(0,h.ZA)("whereLanguage",l),[tp,tg]=(0,a.useState)(!1);e5[9]!==te?.filters?(o=te?.filters??[],e5[9]=te?.filters,e5[10]=o):o=e5[10];let tf=o,{filterValues:tb,setFilterValue:ty,filterQueries:tv}=(0,eo.A)(tf);e5[11]!==te||e5[12]!==tt?(u=e=>{te&&tt((0,m.Ay)(te,t=>{let s=t.filters?.findIndex(t=>t.id===e.id)??-1;t.filters&&-1!==s?t.filters[s]=e:t.filters=[...t.filters??[],e]}))},e5[11]=te,e5[12]=tt,e5[13]=u):u=e5[13];let tj=u;e5[14]!==te||e5[15]!==tt?(p=e=>{te&&tt({...te,filters:te.filters?.filter(t=>t.id!==e)??[]})},e5[14]=te,e5[15]=tt,e5[16]=p):p=e5[16];let tS=p,[tw,t_]=(0,a.useState)(!1),tE=tc??"auto",tC=tu??"",tN=th??"lucene";e5[17]!==tC||e5[18]!==tN||e5[19]!==tE?(g={defaultValues:{granularity:tE,where:tC,whereLanguage:tN}},e5[17]=tC,e5[18]=tN,e5[19]=tE,e5[20]=g):g=e5[20];let{control:tk,setValue:tA,handleSubmit:tT}=(0,f.mN)(g);e5[21]!==tk?(y={control:tk,name:"granularity"},e5[21]=tk,e5[22]=y):y=e5[22];let t$=(0,f.FH)(y);e5[23]!==tc||e5[24]!==td||e5[25]!==t$?(v=()=>{t$&&t$!==tc&&td(t$)},N=[t$,tc,td],e5[23]=tc,e5[24]=td,e5[25]=t$,e5[26]=v,e5[27]=N):(v=e5[26],N=e5[27]),(0,a.useEffect)(v,N);let[tI,tz]=(0,a.useState)("Past 1h");e5[28]===Symbol.for("react.memo_cache_sentinel")?(k={initialDisplayValue:"Past 1h",initialTimeRange:eN,setDisplayedTimeInputValue:tz},e5[28]=k):k=e5[28];let{searchedTimeRange:tL,onSearch:tR,onTimeRangeSelect:tM}=(0,ej.R0)(k);e5[29]!==tw||e5[30]!==tM||e5[31]!==tL?(T={searchedTimeRange:tL,onTimeRangeSelect:tM,isLive:tw},e5[29]=tw,e5[30]=tM,e5[31]=tL,e5[32]=T):T=e5[32];let{granularityOverride:tD,isRefreshEnabled:tF,manualRefreshCooloff:tO,refresh:tP}=(0,ec.r)(T);e5[33]!==tI||e5[34]!==tT||e5[35]!==tR||e5[36]!==tm||e5[37]!==tx?(z=()=>{tR(tI),tT(e=>{tm(e.where),tx(e.whereLanguage??null)})()},e5[33]=tI,e5[34]=tT,e5[35]=tR,e5[36]=tm,e5[37]=tx,e5[38]=z):z=e5[38];let tB=z,[tV,tW]=(0,a.useState)();e5[39]!==ti?.[0]?.id?(L=()=>{tW({id:eE(),x:0,y:0,w:8,h:10,config:{...em.WG,source:ti?.[0]?.id??""}})},e5[39]=ti?.[0]?.id,e5[40]=L):L=e5[40];let tH=L;e5[41]!==te?.tiles?(M=te?.tiles??[],e5[41]=te?.tiles,e5[42]=M):M=e5[42],e5[43]!==M?(D=M.map(eR),e5[43]=M,e5[44]=D):D=e5[44];let tq=D;if(e5[45]!==te?.tiles?(F=te?.tiles??[],e5[45]=te?.tiles,e5[46]=F):F=e5[46],e5[47]!==e7||e5[48]!==te||e5[49]!==tv||e5[50]!==tc||e5[51]!==tD||e5[52]!==tl||e5[53]!==tF||e5[54]!==tM||e5[55]!==tL||e5[56]!==tt||e5[57]!==F||e5[58]!==tu||e5[59]!==th){let e;e5[61]!==e7||e5[62]!==te||e5[63]!==tv||e5[64]!==tc||e5[65]!==tD||e5[66]!==tl||e5[67]!==tF||e5[68]!==tM||e5[69]!==tL||e5[70]!==tt||e5[71]!==tu||e5[72]!==th?(e=e=>(0,r.jsx)(ek,{chart:e,dateRange:tL,onEditClick:()=>tW(e),granularity:tF?tD:tc??void 0,filters:[{type:"sql"===th?"sql":"lucene",condition:tu},...tv??[]],onTimeRangeSelect:tM,isHighlighted:tl===e.id,onUpdateChart:t=>{te&&tt((0,m.Ay)(te,s=>{let r=s.tiles.findIndex(t=>t.id===e.id);-1!==r&&(s.tiles[r]=t)}))},onDuplicateClick:async()=>{null!=te&&await e7((0,r.jsxs)(r.Fragment,{children:["Duplicate ",'"',(0,r.jsx)(_.E,{component:"span",fw:700,children:e.config.name}),'"',"?"]}),"Duplicate")&&tt({...te,tiles:[...te.tiles,{...e,id:eE(),config:{...e.config,alert:void 0}}]})},onDeleteClick:async()=>{null!=te&&await e7((0,r.jsxs)(r.Fragment,{children:["Delete"," ",(0,r.jsx)(_.E,{component:"span",fw:700,children:e.config.name}),"?"]}),"Delete",{variant:"danger"})&&tt({...te,tiles:te.tiles.filter(t=>t.id!==e.id)})}},e.id),e5[61]=e7,e5[62]=te,e5[63]=tv,e5[64]=tc,e5[65]=tD,e5[66]=tl,e5[67]=tF,e5[68]=tM,e5[69]=tL,e5[70]=tt,e5[71]=tu,e5[72]=th,e5[73]=e):e=e5[73],O=F.map(e),e5[47]=e7,e5[48]=te,e5[49]=tv,e5[50]=tc,e5[51]=tD,e5[52]=tl,e5[53]=tF,e5[54]=tM,e5[55]=tL,e5[56]=tt,e5[57]=F,e5[58]=tu,e5[59]=th,e5[60]=O}else O=e5[60];let tX=O,tG=(0,es.pc)();e5[74]!==te||e5[75]!==tt?(K=e=>{te?.id&&tt({...te,tags:e},eL,ez)},e5[74]=te,e5[75]=tt,e5[76]=K):K=e5[76];let tK=K,tJ=(0,es.mG)();e5[77]!==tJ||e5[78]!==e8?(J=()=>{tJ.mutate({name:"My Dashboard",tiles:[],tags:[]},{onSuccess:e=>{e8.push(`/dashboards/${e.id}`)}})},e5[77]=tJ,e5[78]=e8,e5[79]=J):J=e5[79];let tY=J,[tZ,tU]=(0,a.useState)(!1),tQ=te&&te.tiles.length>0;e5[80]!==e6?(Y=(0,r.jsx)(c(),{children:(0,r.jsxs)("title",{children:["Dashboard – ",e6]})}),e5[80]=e6,e5[81]=Y):Y=e5[81],e5[82]===Symbol.for("react.memo_cache_sentinel")?(Z=(0,r.jsx)(ei.A,{}),e5[82]=Z):Z=e5[82],e5[83]!==tZ?(U=()=>{tZ||tW(void 0)},e5[83]=tZ,e5[84]=U):U=e5[84],e5[85]!==te||e5[86]!==tt?(Q=e=>{null!=te&&(tU(!0),tt((0,m.Ay)(te,t=>{let s=t.tiles.findIndex(t=>t.id===e.id);-1===s?t.tiles.push(e):t.tiles[s]=e}),()=>{tW(void 0),tU(!1)},()=>{tU(!1)}))},e5[85]=te,e5[86]=tt,e5[87]=Q):Q=e5[87],e5[88]!==e9||e5[89]!==tV||e5[90]!==tZ||e5[91]!==tL||e5[92]!==U||e5[93]!==Q?(er=(0,r.jsx)(eA,{dashboardId:e9,chart:tV,onClose:U,dateRange:tL,isSaving:tZ,onSave:Q}),e5[88]=e9,e5[89]=tV,e5[90]=tZ,e5[91]=tL,e5[92]=U,e5[93]=Q,e5[94]=er):er=e5[94],e5[95]!==tr||e5[96]!==tY?(en=!1===eh.VO&&tr&&(0,r.jsx)($.t,{my:"lg",p:"md","data-testid":"temporary-dashboard-banner",children:(0,r.jsxs)(w.s,{justify:"space-between",align:"center",children:[(0,r.jsx)(_.E,{size:"sm",children:"This is a temporary dashboard and can not be saved."}),(0,r.jsx)(A.$,{variant:"primary",fw:400,onClick:tY,children:"Create New Saved Dashboard"})]})}),e5[95]=tr,e5[96]=tY,e5[97]=en):en=e5[97];let t0=`${ts}`,t1=te?.name??"";e5[98]!==te||e5[99]!==tt?(ea=e=>{null!=te&&tt({...te,name:e})},e5[98]=te,e5[99]=tt,e5[100]=ea):ea=e5[100],e5[101]!==t0||e5[102]!==t1||e5[103]!==ea?(ef=(0,r.jsx)(eT,{name:t1,onSave:ea},t0),e5[101]=t0,e5[102]=t1,e5[103]=ea,e5[104]=ef):ef=e5[104],e5[105]!==te?.id||e5[106]!==te?.tags||e5[107]!==tK||e5[108]!==tr?(eb=!tr&&te?.id&&(0,r.jsx)(el.Y,{allowCreate:!0,values:te?.tags||[],onChange:tK,children:(0,r.jsxs)(A.$,{variant:"secondary",px:"xs",size:"xs",style:{flexShrink:0},children:[(0,r.jsx)(B.A,{size:14,className:"me-2"}),te?.tags?.length||0," ",te?.tags?.length===1?"Tag":"Tags"]})}),e5[105]=te?.id,e5[106]=te?.tags,e5[107]=tK,e5[108]=tr,e5[109]=eb):eb=e5[109],e5[110]!==te||e5[111]!==tG||e5[112]!==tQ||e5[113]!==tr||e5[114]!==e8||e5[115]!==ti?(e_=!tr&&(0,r.jsxs)(I.W,{width:250,children:[(0,r.jsx)(I.W.Target,{children:(0,r.jsx)(S.M,{variant:"secondary",size:"input-xs",children:(0,r.jsx)(V.A,{size:14})})}),(0,r.jsxs)(I.W.Dropdown,{children:[tQ&&(0,r.jsx)(I.W.Item,{leftSection:(0,r.jsx)(W.A,{size:16}),onClick:()=>{ti&&te?function(e,t="output"){let s="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),r=document.createElement("a");r.setAttribute("href",s),r.setAttribute("download",t+".json"),document.body.appendChild(r),r.click(),r.remove()}((0,b.Ro)(te,ti),te?.name):R.$e.show({color:"red",message:"Export Failed"})},children:"Export Dashboard"}),(0,r.jsx)(I.W.Item,{leftSection:(0,r.jsx)(H.A,{size:16}),onClick:()=>{te&&!te.tiles.length?e8.push(`/dashboards/import?dashboardId=${te.id}`):e8.push("/dashboards/import")},children:tQ?"Import New Dashboard":"Import Dashboard"}),(0,r.jsx)(I.W.Item,{leftSection:(0,r.jsx)(P.A,{size:16}),color:"red",onClick:()=>tG.mutate(te?.id??"",{onSuccess:()=>{e8.push("/dashboards")}}),children:"Delete Dashboard"})]})]}),e5[110]=te,e5[111]=tG,e5[112]=tQ,e5[113]=tr,e5[114]=e8,e5[115]=ti,e5[116]=e_):e_=e5[116],e5[117]!==eb||e5[118]!==e_?(e$=(0,r.jsxs)(C.Y,{gap:"xs",children:[eb,e_]}),e5[117]=eb,e5[118]=e_,e5[119]=e$):e$=e5[119],e5[120]!==ef||e5[121]!==e$?(eM=(0,r.jsxs)(w.s,{mt:"xs",mb:"md",justify:"space-between",align:"center",children:[ef,e$]}),e5[120]=ef,e5[121]=e$,e5[122]=eM):eM=e5[122],e5[123]!==tB?(eD=e=>{e.preventDefault(),tB()},e5[123]=tB,e5[124]=eD):eD=e5[124],e5[125]!==tk||e5[126]!==tB||e5[127]!==tA||e5[128]!==to?(eF=e=>{let{field:t}=e;return"sql"===t.value?(0,r.jsx)(ee.Z,{tableConnections:to,control:tk,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",onLanguageChange:e=>tA("whereLanguage",e),language:"sql",onSubmit:tB,label:"GLOBAL WHERE",enableHotkey:!0,allowMultiline:!0}):(0,r.jsx)(ey.A,{tableConnections:to,control:tk,name:"where",onLanguageChange:e=>tA("whereLanguage",e),language:"lucene",placeholder:"Search your events w/ Lucene ex. column:foo",enableHotkey:!0,"data-testid":"search-input",onSubmit:tB})},e5[125]=tk,e5[126]=tB,e5[127]=tA,e5[128]=to,e5[129]=eF):eF=e5[129],e5[130]!==tk||e5[131]!==eF?(eO=(0,r.jsx)(f.xI,{control:tk,name:"whereLanguage",render:eF}),e5[130]=tk,e5[131]=eF,e5[132]=eO):eO=e5[132],e5[133]!==tR?(eP=e=>{tR(e)},e5[133]=tR,e5[134]=eP):eP=e5[134],e5[135]!==tI||e5[136]!==eP?(eB=(0,r.jsx)(et.A,{inputValue:tI,setInputValue:tz,onSearch:eP}),e5[135]=tI,e5[136]=eP,e5[137]=eB):eB=e5[137],e5[138]!==tk?(eV=(0,r.jsx)(eg.F9,{control:tk,name:"granularity"}),e5[138]=tk,e5[139]=eV):eV=e5[139];let t2=tF?`Auto-refreshing with ${tD} interval`:"Enable auto-refresh";e5[140]===Symbol.for("react.memo_cache_sentinel")?(eW=()=>t_(eI),e5[140]=eW):eW=e5[140];let t3=tw?"primary":"secondary",t5=tw?"Disable auto-refresh":"Enable auto-refresh";e5[141]!==t3||e5[142]!==t5?(eH=(0,r.jsx)(A.$,{onClick:eW,size:"sm",variant:t3,title:t5,children:"Live"}),e5[141]=t3,e5[142]=t5,e5[143]=eH):eH=e5[143],e5[144]!==t2||e5[145]!==eH?(eq=(0,r.jsx)(j.m,{withArrow:!0,label:t2,fz:"xs",color:"gray",children:eH}),e5[144]=t2,e5[145]=eH,e5[146]=eq):eq=e5[146],e5[147]===Symbol.for("react.memo_cache_sentinel")?(eX=(0,r.jsx)(q.A,{size:18}),e5[147]=eX):eX=e5[147],e5[148]!==tO||e5[149]!==tP?(eG=(0,r.jsx)(j.m,{withArrow:!0,label:"Refresh dashboard",fz:"xs",color:"gray",children:(0,r.jsx)(S.M,{onClick:tP,loading:tO,disabled:tO,variant:"secondary",title:"Refresh dashboard",size:"input-sm",children:eX})}),e5[148]=tO,e5[149]=tP,e5[150]=eG):eG=e5[150],e5[151]===Symbol.for("react.memo_cache_sentinel")?(eK=!eh.VO&&(0,r.jsx)(j.m,{withArrow:!0,label:"Edit Filters",fz:"xs",color:"gray",children:(0,r.jsx)(S.M,{variant:"secondary",onClick:()=>tg(!0),"data-testid":"edit-filters-button",size:"input-sm",children:(0,r.jsx)(X.A,{size:18})})}),e5[151]=eK):eK=e5[151],e5[152]===Symbol.for("react.memo_cache_sentinel")?(eJ=(0,r.jsx)(A.$,{"data-testid":"search-submit-button",variant:"primary",type:"submit",leftSection:(0,r.jsx)(G.A,{size:16}),style:{flexShrink:0},children:"Run"}),e5[152]=eJ):eJ=e5[152],e5[153]!==eD||e5[154]!==eO||e5[155]!==eB||e5[156]!==eV||e5[157]!==eq||e5[158]!==eG?(eY=(0,r.jsxs)(w.s,{gap:"sm",mt:"sm",component:"form",onSubmit:eD,children:[eO,eB,eV,eq,eG,eK,eJ]}),e5[153]=eD,e5[154]=eO,e5[155]=eB,e5[156]=eV,e5[157]=eq,e5[158]=eG,e5[159]=eY):eY=e5[159],e5[160]!==tb||e5[161]!==tf||e5[162]!==tL||e5[163]!==ty?(eZ=(0,r.jsx)(ex.A,{filters:tf,filterValues:tb,onSetFilterValue:ty,dateRange:tL}),e5[160]=tb,e5[161]=tf,e5[162]=tL,e5[163]=ty,e5[164]=eZ):eZ=e5[164],e5[165]!==te||e5[166]!==tq||e5[167]!==tt||e5[168]!==tX?(eU=null!=te&&null!=te.tiles?(0,r.jsx)(x.ErrorBoundary,{onError:console.error,fallback:(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent",children:"An error occurred while rendering the dashboard."}),children:(0,r.jsx)(eC,{layout:tq,containerPadding:[0,0],onLayoutChange:e=>{let t=!1;if(e.length!==tq.length)t=!0;else for(let s=0;s<e.length;s++){let r=e[s],n=tq.find(e=>e.i===r.i);if(n?.x!==r.x||n?.y!==r.y||n?.h!==r.h||n?.w!==r.w){t=!0;break}}t&&tt((0,m.Ay)(te,t=>{for(let s of t.tiles){let t=e.find(e=>e.i===s.id);t&&(s.x=t.x,s.y=t.y,s.w=t.w,s.h=t.h)}}))},cols:24,rowHeight:32,children:tX})}):null,e5[165]=te,e5[166]=tq,e5[167]=tt,e5[168]=tX,e5[169]=eU):eU=e5[169],e5[170]!==eU?(eQ=(0,r.jsx)(E.a,{mt:"sm",children:eU}),e5[170]=eU,e5[171]=eQ):eQ=e5[171];let t4=te?.tiles.length===0?"primary":"secondary";e5[172]!==tH||e5[173]!==t4?(e0=(0,r.jsx)(A.$,{"data-testid":"add-new-tile-button",variant:t4,mt:"sm",fw:400,onClick:tH,w:"100%",children:"+ Add New Tile"}),e5[172]=tH,e5[173]=t4,e5[174]=e0):e0=e5[174],e5[175]===Symbol.for("react.memo_cache_sentinel")?(e1=()=>tg(!1),e5[175]=e1):e1=e5[175];let t6=ta||tn;return e5[176]!==tf||e5[177]!==tS||e5[178]!==tj||e5[179]!==tp||e5[180]!==t6?(e2=(0,r.jsx)(ep.A,{opened:tp,onClose:e1,filters:tf,onSaveFilter:tj,onRemoveFilter:tS,isLoading:t6}),e5[176]=tf,e5[177]=tS,e5[178]=tj,e5[179]=tp,e5[180]=t6,e5[181]=e2):e2=e5[181],e5[182]!==Y||e5[183]!==er||e5[184]!==en||e5[185]!==eM||e5[186]!==eY||e5[187]!==eZ||e5[188]!==eQ||e5[189]!==e0||e5[190]!==e2?(e3=(0,r.jsxs)(E.a,{p:"sm","data-testid":"dashboard-page",children:[Y,Z,er,en,eM,eY,eZ,eQ,e0,e2]}),e5[182]=Y,e5[183]=er,e5[184]=en,e5[185]=eM,e5[186]=eY,e5[187]=eZ,e5[188]=eQ,e5[189]=e0,e5[190]=e2,e5[191]=e3):e3=e5[191],e3}function eI(e){return!e}function ez(){R.$e.show({color:"red",message:(0,r.jsxs)(r.Fragment,{children:["An error occurred. ",(0,r.jsx)(K.z,{})]})})}function eL(){R.$e.show({color:"green",message:"Tags updated successfully"})}function eR(e){return{i:e.id,x:e.x,y:e.y,w:e.w,h:e.h,minH:1,minW:1}}let eM=l()(async()=>e$,{ssr:!1});eM.getLayout=eb.D;let eD=eM;function eF(e){return!e}function eO(e){return e.stopPropagation()}function eP(e){return e.stopPropagation()}},84851:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(6029),n=s(55729),a=s(42604),i=s(15628);let l=(0,n.memo)(({config:{markdown:e},title:t,toolbarItems:s})=>(0,r.jsx)(i.A,{title:t,toolbarItems:s,disableReactiveContainer:!0,children:(0,r.jsx)("div",{className:"hdx-markdown",children:(0,r.jsx)(a.oz,{children:e??""})})}))},85014:(e,t,s)=>{"use strict";s.d(t,{Y:()=>y});var r=s(6029),n=s(55729),a=s(37659),i=s(76013),l=s(96061),o=s(20158),c=s(53993),d=s(47268),u=s(34834),m=s(3635),h=s(25062),x=s(28200),p=s(41279),g=s(6876),f=s(65952),b=s.n(f);let y=n.memo(({values:e,onChange:t,allowCreate:s,children:f})=>{let{data:y,isLoading:v,isError:j,refetch:S}=g.Ay.useTags(),w=n.useMemo(()=>{let t=new Map;return[...e,...y?.data||[]].forEach(e=>{t.set(e.toLowerCase(),e)}),Array.from(t.values()).sort((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))},[y,e]),[_,E]=n.useState(""),C=n.useMemo(()=>w.filter(e=>e.toLowerCase().includes(_.toLowerCase())),[w,_]),N=n.useCallback(()=>{t([])},[t]),k=n.useCallback(r=>{if("Enter"===r.key&&s&&_.length>0){let s=r.currentTarget.value;e.some(e=>e.toLowerCase()===s.toLowerCase())||(t([...e,s]),E(""))}},[s,_,t,e]);return(0,r.jsxs)(a.A,{withinPortal:!0,width:240,keepMounted:!1,shadow:"xl",onOpen:()=>{S(),E("")},position:"bottom-start",children:[(0,r.jsx)(a.A.Target,{children:f||(0,r.jsx)(i.M,{variant:"secondary",size:"sm",style:{cursor:"pointer"},children:(0,r.jsx)(x.A,{size:14})})}),(0,r.jsxs)(a.A.Dropdown,{p:0,children:[v&&"Loading",j&&"Error",(0,r.jsx)(l.p,{size:"xs",placeholder:s?"Search or create tag":"Search tag",variant:"filled",leftSection:(0,r.jsx)(p.A,{size:16}),autoFocus:!0,m:8,mb:0,value:_,onChange:e=>E(e.currentTarget.value),onKeyDown:k,rightSection:_&&(0,r.jsx)(o.J,{size:"xs",radius:"xl",onClick:()=>E("")})}),(0,r.jsxs)(c.F,{viewportProps:{style:{maxHeight:200}},children:[0===C.length&&(0,r.jsx)("div",{className:"pt-3 px-4 fs-8 text-center",children:s?(0,r.jsxs)(r.Fragment,{children:["Type and press ",(0,r.jsx)("span",{children:"Enter"})," to create new tag"]}):"No tags found"}),(0,r.jsx)(d.S.Group,{value:e,onChange:t,size:"xs",my:"sm",children:(0,r.jsx)(u.B,{gap:4,children:C.map(e=>(0,r.jsxs)(m.Y,{justify:"space-between",className:b().tagWrapper,children:[(0,r.jsx)(d.S,{label:e.toUpperCase(),value:e,size:"xs"}),w.length>=2&&(0,r.jsx)(h.$,{variant:"secondary",size:"compact-xs",fw:"normal",onClick:()=>{t([e])},children:"Only"})]},e))})})]}),(0,r.jsxs)("div",{className:"p-2 border-top border-dark d-flex justify-content-between align-items-center",children:[(0,r.jsxs)("div",{className:"ms-2 fs-8 ",children:[e.length||"None"," selected"]}),e.length>=1&&(0,r.jsx)(h.$,{variant:"secondary",size:"compact-xs",fw:"normal",onClick:N,children:"Clear all"})]})]})]})})},91148:(e,t,s)=>{"use strict";s.d(t,{A:()=>b});var r=s(6029),n=s(75155),a=s(35467),i=s(43517),l=s(60481),o=s(24589),c=s(78253),d=s(43152),u=s(91021),m=s(57389),h=s(81973),x=s(92917),p=s(15628),g=s(99082),f=s(88339);function b(e){let t,s,b,v,j,S,w,_,E=(0,n.c)(36),{config:C,enabled:N,queryKeyPrefix:k,title:A,toolbarPrefix:T,toolbarSuffix:$,showMVOptimizationIndicator:I}=e,z=void 0===N||N,L=void 0===I||I;E[0]!==C?(t=(0,d._t)(C),E[0]=C,E[1]=t):t=E[1];let R=t,{data:M}=(0,m.d)(R);E[2]!==R||E[3]!==k?(s=[k,R],E[2]=R,E[3]=k,E[4]=s):s=E[4],E[5]!==z||E[6]!==s?(b={placeholderData:y,queryKey:s,enabled:z},E[5]=z,E[6]=s,E[7]=b):b=E[7];let{data:D,isLoading:F,isError:O,error:P}=(0,u.HD)(R,b);E[8]!==C.numberFormat||E[9]!==D?.data?.[0]?(v=(0,x.ZV)(Object.values(D?.data?.[0]??{})?.[0]??NaN,C.numberFormat),E[8]=C.numberFormat,E[9]=D?.data?.[0],E[10]=v):v=E[10];let B=v;E[11]!==C.source?(j={id:C.source},E[11]=C.source,E[12]=j):j=E[12];let{data:V}=(0,h.Fo)(j);if(E[13]!==M||E[14]!==R||E[15]!==L||E[16]!==V||E[17]!==T||E[18]!==$){let e;if(S=[],T&&T.length>0&&S.push(...T),V&&L){let e;E[20]!==R||E[21]!==V?(e=(0,r.jsx)(g.A,{config:R,source:V,variant:"icon"},"db-number-chart-mv-indicator"),E[20]=R,E[21]=V,E[22]=e):e=E[22],S.push(e)}E[23]!==M||E[24]!==R.dateRange?(e=(0,d.m9)({mvOptimizationData:M,originalDateRange:R.dateRange}),E[23]=M,E[24]=R.dateRange,E[25]=e):e=E[25];let t=e;t&&S.push(t),$&&$.length>0&&S.push(...$),E[13]=M,E[14]=R,E[15]=L,E[16]=V,E[17]=T,E[18]=$,E[19]=S}else S=E[19];let W=S;return E[26]!==D||E[27]!==P||E[28]!==O||E[29]!==F||E[30]!==B?(w=F&&!D?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):O?(0,r.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted",children:[(0,r.jsx)(i.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsxs)(l.a,{mt:"sm",children:[(0,r.jsx)(i.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(o.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:P.message}),P instanceof a.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(f.V,{data:P?.query})]})]})]}):D?.data.length===0?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,r.jsx)(c.s,{align:"center",justify:"center",h:"100%",style:{flexGrow:1},children:(0,r.jsx)(i.E,{size:"4rem",children:B??"N/A"})}),E[26]=D,E[27]=P,E[28]=O,E[29]=F,E[30]=B,E[31]=w):w=E[31],E[32]!==w||E[33]!==A||E[34]!==W?(_=(0,r.jsx)(p.A,{title:A,toolbarItems:W,children:w}),E[32]=w,E[33]=A,E[34]=W,E[35]=_):_=E[35],_}function y(e){return e}},91939:(e,t,s)=>{"use strict";s.d(t,{A:()=>L});var r=s(6029),n=s(75155),a=s(55729),i=s(35467),l=s(43517),o=s(60481),c=s(24589),d=s(43152),u=s(82203),m=s.n(u),h=s(75828),x=s.n(h),p=s(8737),g=s(24602),f=s(40387),b=s(79220),y=s(39696),v=s(21440),j=s(17421),S=s(48423),w=s(55024),_=s(36600),E=s(68593),C=s(92917);let N=({data:e,groupColumnName:t,columns:s,getRowSearchLink:n,tableBottom:i,sorting:l,onSortingChange:o,variant:c="default"})=>{let d=(0,_.Kh)(),u=(0,a.useRef)(null),h=u.current?.clientWidth,N=s.filter(e=>!1!==e.visible).length+1,k=Math.min(100-s.filter(e=>!1!==e.visible).map(({columnWidthPercent:e})=>Math.max(null!=h?100/h*100:0,e??1/N*100)).reduce((e,t)=>e+t,0),75),A=[...null!=t?[{accessorKey:"group",header:t,size:null!=h?Math.max(k/100*h,100):200}]:[],...s.filter(e=>!1!==e.visible).map(({id:e,dataKey:t,displayName:s,numberFormat:a,columnWidthPercent:i},l)=>({id:e,accessorKey:t,header:s,accessorFn:e=>e[t],cell:({getValue:e,row:t})=>{let s=e(),i=s??null;if(a&&(i=(0,C.ZV)(s,a)),null==n)return i;let l=n(t.original);return l?(0,r.jsx)(m(),{href:l,className:x()("align-top overflow-hidden py-1 pe-3",{"text-break":D,"text-truncate":!D}),style:{display:"block",color:"inherit",textDecoration:"none"},children:i}):(0,r.jsx)("div",{className:x()("align-top overflow-hidden py-1 pe-3",{"text-break":D,"text-truncate":!D}),children:i})},size:l===N-2?E.k:null!=h&&null!=i?Math.max(i/100*h,100):null!=h?h/N:200,enableResizing:l!==N-2}))],T=(0,b.N4)({data:e,columns:A,getCoreRowModel:(0,y.HT)(),enableColumnResizing:!0,columnResizeMode:"onChange",enableSorting:!0,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(l);o?.(t??null)}else o?.(e??null)},state:{sorting:l}}),{rows:$}=T.getRowModel(),I=(0,v.Te)({count:$.length,getScrollElement:()=>u.current,estimateSize:(0,a.useCallback)(()=>58,[]),overscan:10,paddingEnd:20}),z=I.getVirtualItems(),L=I.getTotalSize(),[R,M]=(0,a.useMemo)(()=>z.length>0?[Math.max(0,z[0].start-I.options.scrollMargin),Math.max(0,L-z[z.length-1].end)]:[0,0],[z,I.options.scrollMargin,L]),[D,F]=(0,a.useState)(!1),{csvData:O}=(0,w.u)(e,s.map(e=>({dataKey:e.dataKey,displayName:e.displayName})),{groupColumnName:t});return(0,r.jsxs)("div",{className:"overflow-auto h-100 fs-8",ref:u,children:[(0,r.jsxs)("table",{className:"w-100",style:{tableLayout:"fixed",borderCollapse:"collapse",fontFamily:"var(--font-ibm-plex-mono)"},children:[(0,r.jsx)("thead",{style:{position:"sticky",top:0,background:"muted"===c?"var(--color-bg-muted)":"var(--color-bg-body)"},children:T.getHeaderGroups().map(e=>(0,r.jsx)("tr",{children:e.headers.map((t,s)=>(0,r.jsx)(S.A,{header:t,isLast:s===e.headers.length-1,lastItemButtons:(0,r.jsx)(r.Fragment,{children:s===e.headers.length-1&&(0,r.jsxs)("div",{className:"d-flex align-items-center",children:[(0,r.jsx)(p.N,{onClick:()=>F(e=>!e),children:(0,r.jsx)(g.A,{size:14})}),(0,r.jsx)(j.P,{data:O,filename:`${d}_table_results`,className:"fs-8 ms-2",title:"Download table as CSV",children:(0,r.jsx)(f.A,{size:14})})]})})},t.id))},e.id))}),(0,r.jsxs)("tbody",{children:[R>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${R}px`}})}),z.map(e=>{let t=$[e.index];return(0,r.jsx)("tr",{className:"bg-muted-hover","data-index":e.index,ref:I.measureElement,children:t.getVisibleCells().map(e=>(0,r.jsx)("td",{title:`${e.getValue()}`,children:(0,b.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.key)}),M>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${M}px`}})})]})]}),i]})};var k=s(57389),A=s(78744),T=s(81973),$=s(15628),I=s(99082),z=s(88339);function L(e){let t,s,u,m,h,x,p,g,f,b,y,v=(0,n.c)(56),{config:j,getRowSearchLink:S,enabled:w,queryKeyPrefix:_,onSortingChange:E,sort:L,hiddenColumns:F,title:O,toolbarPrefix:P,toolbarSuffix:B,showMVOptimizationIndicator:V,variant:W}=e,H=void 0===w||w;v[0]!==F?(t=void 0===F?[]:F,v[0]=F,v[1]=t):t=v[1];let q=t,X=void 0===V||V;v[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],v[2]=s):s=v[2];let[G,K]=(0,a.useState)(s);v[3]!==j.source?(u={id:j.source},v[3]=j.source,v[4]=u):u=v[4];let{data:J}=(0,T.Fo)(u),Y=L||G;v[5]!==E?(m=e=>{K(e),E&&E(e)},v[5]=E,v[6]=m):m=v[6];let Z=m;if(v[7]!==j||v[8]!==Y){if(h=(0,d.Z7)(j),Y.length){let e;v[10]!==Y?(e=Y.map(D),v[10]=Y,v[11]=e):e=v[11],h.orderBy=e}v[7]=j,v[8]=Y,v[9]=h}else h=v[9];let U=h,{data:Q}=(0,k.d)(U);v[12]!==H||v[13]!==_?(x={enabled:H,queryKeyPrefix:_},v[12]=H,v[13]=_,v[14]=x):x=v[14];let{data:ee,fetchNextPage:et,hasNextPage:es,isLoading:er,isError:en,error:ea}=(0,A.A)(U,x),{observerRef:ei}=(0,C.BL)(et);e:{let e;if("string"==typeof j.select){let e;v[15]===Symbol.for("react.memo_cache_sentinel")?(e=[],v[15]=e):e=v[15],p=e;break e}v[16]!==j.select?(e=j.select.reduce(M,[]),v[16]=j.select,v[17]=e):e=v[17],p=e}let el=p;t:{let e,t;v[18]!==ee?.data?(e=ee?.data??[],v[18]=ee?.data,v[19]=e):e=v[19];let s=e;if(0===s.length){let e;v[20]===Symbol.for("react.memo_cache_sentinel")?(e=[],v[20]=e):e=v[20],g=e;break t}if(v[21]!==el||v[22]!==j.numberFormat||v[23]!==q||v[24]!==U.groupBy||v[25]!==s[0]){let e=[];U.groupBy&&"string"==typeof U.groupBy&&(e=U.groupBy.split(",").map(R)),t=Object.keys(s?.[0]).filter(e=>!q.includes(e)).map(t=>({id:el.includes(t)?`"${t}"`:t,dataKey:t,displayName:t,numberFormat:e.includes(t)?void 0:j.numberFormat})),v[21]=el,v[22]=j.numberFormat,v[23]=q,v[24]=U.groupBy,v[25]=s[0],v[26]=t}else t=v[26];g=t}let eo=g;if(v[27]!==Q||v[28]!==U||v[29]!==X||v[30]!==J||v[31]!==P||v[32]!==B){let e;if(f=[],P&&P.length>0&&f.push(...P),J&&X){let e;v[34]!==U||v[35]!==J?(e=(0,r.jsx)(I.A,{config:U,source:J,variant:"icon"},"db-table-chart-mv-indicator"),v[34]=U,v[35]=J,v[36]=e):e=v[36],f.push(e)}v[37]!==Q||v[38]!==U.dateRange?(e=(0,d.m9)({mvOptimizationData:Q,originalDateRange:U.dateRange}),v[37]=Q,v[38]=U.dateRange,v[39]=e):e=v[39];let t=e;t&&f.push(t),B&&B.length>0&&f.push(...B),v[27]=Q,v[28]=U,v[29]=X,v[30]=J,v[31]=P,v[32]=B,v[33]=f}else f=v[33];let ec=f;return v[40]!==eo||v[41]!==ee||v[42]!==Y||v[43]!==ea||v[44]!==ei||v[45]!==S||v[46]!==Z||v[47]!==es||v[48]!==en||v[49]!==er||v[50]!==W?(b=er&&!ee?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):en&&ea?(0,r.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted overflow-scroll",children:[(0,r.jsx)(l.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsxs)(o.a,{mt:"sm",children:[(0,r.jsx)(l.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(c.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:ea.message}),ea instanceof i.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(z.V,{data:ea?.query})]})]})]}):ee?.data.length===0?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,r.jsx)(N,{data:ee?.data??[],columns:eo,getRowSearchLink:S,sorting:Y,onSortingChange:Z,variant:W,tableBottom:es&&(0,r.jsx)(l.E,{ref:ei,ta:"center",children:"Loading..."})}),v[40]=eo,v[41]=ee,v[42]=Y,v[43]=ea,v[44]=ei,v[45]=S,v[46]=Z,v[47]=es,v[48]=en,v[49]=er,v[50]=W,v[51]=b):b=v[51],v[52]!==b||v[53]!==O||v[54]!==ec?(y=(0,r.jsx)($.A,{title:O,toolbarItems:ec,children:b}),v[52]=b,v[53]=O,v[54]=ec,v[55]=y):y=v[55],y}function R(e){return e.trim()}function M(e,t){return t.alias&&e.push(t.alias),e}function D(e){return{valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}}},92495:(e,t)=>{"use strict";t.AB=function(e){let t,s;return function(e){try{return new URL(e),!0}catch(e){return!1}}(e)&&"slack.com"===((s=(t=new URL(e).hostname).split(".")).length>=2?s.slice(-2).join("."):t)}},94364:(e,t,s)=>{"use strict";s.d(t,{f:()=>r});let r=e=>({isLoading:!1,error:null,enrichedFrame:null})},94937:(e,t,s)=>{"use strict";s.d(t,{A:()=>v});var r=s(6029),n=s(75155),a=s(55729),i=s(82203),l=s.n(i),o=s(80519),c=s.n(o),d=s(37659),u=s(3635),m=s(43517),h=s(63085),x=s(34834),p=s(25062),g=s(56795),f=s(28975),b=s(41279),y=s(18006);function v(e){let t,s,i,o,v,j,S,w,_,E,C,N,k,A,T,$,I,z,L=(0,n.c)(62),{displayedKey:R,name:M,nameLanguage:D,sqlExpression:F,value:O,onPropertyAddClick:P,generateSearchUrl:B}=e,V=void 0===D?"lucene":D,[W,H]=(0,a.useState)(!1);L[0]!==O?(t=(0,y.OH)(O),L[0]=O,L[1]=t):t=L[1];let q=t;if(!(P||B||q)){let e,t=R||M;return L[2]!==M||L[3]!==t||L[4]!==O?(e=(0,r.jsxs)("div",{className:"bg-highlighted px-2 py-0.5 me-1 my-1",children:[t,": ",O]},M),L[2]=M,L[3]=t,L[4]=O,L[5]=e):e=L[5],e}if(L[6]!==R||L[7]!==B||L[8]!==q||L[9]!==M||L[10]!==V||L[11]!==P||L[12]!==W||L[13]!==F||L[14]!==O){let e,t,n="sql"===V?c().format("? = ?",[c().raw(M),O]):`${M}:${"string"==typeof O?`"${O}"`:O}`;o=d.A,A="top",T=!1,v=!0,j=W,S=H,L[29]===Symbol.for("react.memo_cache_sentinel")?(e={wordBreak:"break-word"},L[29]=e):e=L[29],L[30]!==R||L[31]!==q||L[32]!==M||L[33]!==W||L[34]!==O?(t=q?(0,r.jsxs)("a",{href:encodeURI(O),target:"_blank",rel:"noopener noreferrer",className:"d-flex flex-row align-items-center bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",children:[R||M,(0,r.jsx)(g.A,{size:14,className:"ms-1"})]}):(0,r.jsxs)(u.Y,{className:"bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",wrap:"nowrap",gap:0,onClick:()=>H(!W),children:[R||M,":",(0,r.jsx)(m.E,{size:"xs",ms:4,maw:300,truncate:!0,children:O})]}),L[30]=R,L[31]=q,L[32]=M,L[33]=W,L[34]=O,L[35]=t):t=L[35],L[36]!==t||L[37]!==O?(w=(0,r.jsx)(d.A.Target,{children:(0,r.jsx)(h.m,{label:O,withArrow:!0,maw:400,multiline:!0,style:e,position:"bottom",children:t})}),L[36]=t,L[37]=O,L[38]=w):w=L[38],i=d.A.Dropdown,k=2,s=x.B,_=0,E="stretch",L[39]!==P||L[40]!==F||L[41]!==O?(C=P&&(0,r.jsx)(p.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,r.jsx)(f.A,{size:14}),onClick:()=>{P(F,O),H(!1)},children:"Add to Search"}),L[39]=P,L[40]=F,L[41]=O,L[42]=C):C=L[42],N=B&&(0,r.jsx)(l(),{href:B(n,V),children:(0,r.jsx)(p.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,r.jsx)(b.A,{size:14}),children:"Search This Value"})}),L[6]=R,L[7]=B,L[8]=q,L[9]=M,L[10]=V,L[11]=P,L[12]=W,L[13]=F,L[14]=O,L[15]=s,L[16]=i,L[17]=o,L[18]=v,L[19]=j,L[20]=S,L[21]=w,L[22]=_,L[23]=E,L[24]=C,L[25]=N,L[26]=k,L[27]=A,L[28]=T}else s=L[15],i=L[16],o=L[17],v=L[18],j=L[19],S=L[20],w=L[21],_=L[22],E=L[23],C=L[24],N=L[25],k=L[26],A=L[27],T=L[28];return L[43]!==s||L[44]!==_||L[45]!==E||L[46]!==C||L[47]!==N?($=(0,r.jsxs)(s,{gap:_,justify:E,children:[C,N]}),L[43]=s,L[44]=_,L[45]=E,L[46]=C,L[47]=N,L[48]=$):$=L[48],L[49]!==i||L[50]!==$||L[51]!==k?(I=(0,r.jsx)(i,{p:k,children:$}),L[49]=i,L[50]=$,L[51]=k,L[52]=I):I=L[52],L[53]!==o||L[54]!==v||L[55]!==j||L[56]!==S||L[57]!==w||L[58]!==I||L[59]!==A||L[60]!==T?(z=(0,r.jsxs)(o,{position:A,withinPortal:T,withArrow:v,opened:j,onChange:S,children:[w,I]}),L[53]=o,L[54]=v,L[55]=j,L[56]=S,L[57]=w,L[58]=I,L[59]=A,L[60]=T,L[61]=z):z=L[61],z}},96958:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(6029),n=s(75155),a=s(75828),i=s.n(a);function l(e){let t,s,a,l,o,c,d,u,m,h,x,p=(0,n.c)(23);p[0]!==e?({children:s,onClick:l,active:t,className:a,style:c,...o}=e,p[0]=e,p[1]=t,p[2]=s,p[3]=a,p[4]=l,p[5]=o,p[6]=c):(t=p[1],s=p[2],a=p[3],l=p[4],o=p[5],c=p[6]);let g=!t;p[7]!==t||p[8]!==a||p[9]!==g?(d=i()("text-center cursor-pointer",{"fw-bold text-white-hover":t,"text-muted-hover":g},a),p[7]=t,p[8]=a,p[9]=g,p[10]=d):d=p[10],p[11]!==s?(u=(0,r.jsx)("span",{children:s}),p[11]=s,p[12]=u):u=p[12],p[13]===Symbol.for("react.memo_cache_sentinel")?(m={height:2},p[13]=m):m=p[13];let f=t?"var(--color-text-brand)":"var(--color-border)";return p[14]!==f?(h=(0,r.jsx)("div",{className:"w-100 mt-2",style:m,children:(0,r.jsx)("div",{className:"h-100 w-100",style:{background:f}})}),p[14]=f,p[15]=h):h=p[15],p[16]!==l||p[17]!==o||p[18]!==c||p[19]!==d||p[20]!==u||p[21]!==h?(x=(0,r.jsxs)("div",{className:d,onClick:l,style:c,...o,children:[u,h]}),p[16]=l,p[17]=o,p[18]=c,p[19]=d,p[20]=u,p[21]=h,p[22]=x):x=p[22],x}function o(e){let t,s,a,o,c=(0,n.c)(14),{items:d,activeItem:u,className:m,onClick:h,"data-testid":x}=e;if(c[0]!==m?(t=i()("d-flex flex-wrap",m),c[0]=m,c[1]=t):t=c[1],c[2]!==u||c[3]!==d||c[4]!==h){let e;c[6]!==u||c[7]!==h?(e=e=>(0,r.jsx)(l,{"data-testid":`tab-${String(e.value).toLowerCase()}`,active:e.value===u,onClick:()=>h?.(e.value),children:(0,r.jsx)("span",{className:"mx-4 text-nowrap",children:e.text})},e.value),c[6]=u,c[7]=h,c[8]=e):e=c[8],s=d.map(e),c[2]=u,c[3]=d,c[4]=h,c[5]=s}else s=c[5];return c[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(l,{className:"flex-grow-1 pe-none",children:"\xa0"}),c[9]=a):a=c[9],c[10]!==x||c[11]!==t||c[12]!==s?(o=(0,r.jsxs)("div",{className:t,"data-testid":x,children:[s,a]}),c[10]=x,c[11]=t,c[12]=s,c[13]=o):o=c[13],o}}},e=>{e.O(0,[7756,883,2928,6171,5554,910,1606,1909,6747,2814,1445,2990,4607,9979,522,3943,1926,9353,4528,1470,8718,7386,1021,6514,3234,8374,3172,6593,636,8792],()=>e(e.s=25455)),_N_E=e.O()}]);