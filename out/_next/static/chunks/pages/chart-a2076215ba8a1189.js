(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9240],{225:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var r=s(6029),a=s(75155),n=s(98142);let l=()=>{let e,t=(0,a.c)(2);if(n.bp){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)("span",{children:["Please open an issue on"," ",(0,r.jsx)("a",{href:"https://github.com/hyperdxio/hyperdx/issues",target:"_blank",children:"GitHub"}),"."]}),t[0]=e):e=t[0],e}return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("span",{children:"Please contact support."}),t[1]=e):e=t[1],e}},2326:e=>{e.exports={wrapper:"PlaybarSlider_wrapper__WAjbf",markers:"PlaybarSlider_markers__X51XN",markerDot:"PlaybarSlider_markerDot__X23nO"}},6889:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>H});var r=s(6029),a=s(75155),n=s(55729),l=s(71024),i=s.n(l),o=s(95669),c=s.n(o),d=s(41038),u=s(1909),m=s(66692),h=s(82641),p=s(60481),x=s(39603),g=s(43517),f=s(92789),b=s(3635),y=s(25062),v=s(46181),j=s(22599),_=s(94720),S=s(60665),w=s(67747),E=s(58333),C=s(23474),k=s(6876),N=s(43152),A=s(15670),T=s(71781),$=s(57478),I=s(16932);async function R(e){let{sourceId:t,text:s}=e;return(0,k.Q5)("ai/assistant",{method:"POST",json:{sourceId:t,text:s}}).json()}var z=s(56514),L=s(81973),M=s(36600),D=s(387),F=s(92917);let O=(0,D.lr)("Past 1h",!1);function P({setConfig:e,onTimeRangeSelect:t,submitRef:s,aiAssistantEnabled:l}){let i,o,c=(0,M.Kh)(),[d,k]=(0,n.useState)(!1),[N,A]=(0,F.Mj)("ai-assistant-alert-dismissed",!1),{control:z,setValue:L,handleSubmit:D}=(0,u.mN)({defaultValues:{text:"",source:""}}),O=((o=(0,a.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(i={mutationFn:R},o[0]=i):i=o[0],(0,I.n)(i));return((0,m.vC)("a",()=>{k(e=>!e)},{preventDefault:!0}),l||N)?l?(0,r.jsxs)(p.a,{mb:"sm",children:[(0,r.jsxs)(b.Y,{gap:"md",align:"center",mb:"sm",children:[(0,r.jsx)(y.$,{onClick:()=>k(e=>!e),size:"xs",variant:"subtle",color:"gray",children:(0,r.jsxs)(b.Y,{gap:"xs",children:[d?(0,r.jsx)(E.A,{size:14}):(0,r.jsx)(C.A,{size:14}),(0,r.jsx)(g.E,{size:"xxs",children:"AI Assistant [A]"})]})}),(0,r.jsx)(v.a,{size:"xs",children:"Experimental"})]}),(0,r.jsx)(j.S,{in:d,children:d&&(0,r.jsx)("form",{onSubmit:D(r=>{O.mutate({sourceId:r.source,text:r.text},{onSuccess(r){e({...r,where:""}),t(new Date(r.dateRange[0]),new Date(r.dateRange[1])),setTimeout(()=>{s.current&&s.current()},100),S.$e.show({color:"green",message:"Chart generated successfully",autoClose:2e3})},onError(e){S.$e.show({color:"red",title:"Error Generating Chart",message:e.message,autoClose:2e3})}})}),children:(0,r.jsxs)(b.Y,{mb:"md",children:[(0,r.jsx)($.W,{autoFocus:!0,size:"xs",control:z,name:"source","data-testid":"source-selector",allowedSourceKinds:[h.GL.Log,h.GL.Trace]}),(0,r.jsx)(p.a,{style:{flexGrow:1,minWidth:100},children:(0,r.jsx)(T.t4,{placeholder:"ex. Error counts by service over last 2 hours","data-testid":"save-search-name-input",control:z,name:"text",rules:{required:!0},size:"xs"})}),O.isPending?(0,r.jsx)(_.a,{size:"xs",type:"dots"}):(0,r.jsx)(y.$,{type:"submit",size:"xs",variant:"primary",children:"Generate"})]})})}),(0,r.jsx)(f.c,{})]}):null:(0,r.jsxs)(p.a,{mb:"sm",children:[(0,r.jsx)(x.F,{color:"dark",icon:(0,r.jsx)(w.A,{size:16}),variant:"outline",withCloseButton:!0,onClose:()=>A(!0),p:"xxs",children:(0,r.jsxs)(g.E,{size:"xs",pt:"2px",children:["New AI Assistant available, enable with configuring the"," ",(0,r.jsx)("code",{children:"ANTHROPIC_API_KEY"})," environment variable on the"," ",c," server."]})}),(0,r.jsx)(f.c,{mt:"sm"})]})}function W(){let e,t,s,l,i,o,u,m=(0,a.c)(23),h=(0,M.Kh)();m[0]===Symbol.for("react.memo_cache_sentinel")?(e={initialDisplayValue:"Past 1h",initialTimeRange:O},m[0]=e):e=m[0];let{searchedTimeRange:x,displayedTimeInputValue:g,setDisplayedTimeInputValue:f,onSearch:b,onTimeRangeSelect:y}=(0,D.R0)(e),v=(0,n.useRef)(void 0),{data:j}=(0,L.oE)(),{data:_}=k.Ay.useMe();m[1]!==j?.[0]?.id?(t=(0,d.os)().withDefault({...N.WG,source:j?.[0]?.id??""}),m[1]=j?.[0]?.id,m[2]=t):t=m[2];let[S,w]=(0,d.ZA)("config",t);m[3]!==h?(s=(0,r.jsx)(c(),{children:(0,r.jsxs)("title",{children:["Chart Explorer - ",h]})}),m[3]=h,m[4]=s):s=m[4];let E=_?.aiAssistantEnabled??!1;return m[5]!==y||m[6]!==w||m[7]!==E?(l=(0,r.jsx)(P,{setConfig:w,onTimeRangeSelect:y,submitRef:v,aiAssistantEnabled:E}),m[5]=y,m[6]=w,m[7]=E,m[8]=l):l=m[8],m[9]!==w?(i=e=>{w(e)},m[9]=w,m[10]=i):i=m[10],m[11]!==S||m[12]!==g||m[13]!==b||m[14]!==y||m[15]!==x||m[16]!==f||m[17]!==i?(o=(0,r.jsx)(A.A,{"data-testid":"chart-explorer-form",chartConfig:S,setChartConfig:i,dateRange:x,setDisplayedTimeInputValue:f,displayedTimeInputValue:g,onTimeRangeSearch:b,onTimeRangeSelect:y,submitRef:v}),m[11]=S,m[12]=g,m[13]=b,m[14]=y,m[15]=x,m[16]=f,m[17]=i,m[18]=o):o=m[18],m[19]!==s||m[20]!==l||m[21]!==o?(u=(0,r.jsxs)(p.a,{"data-testid":"chart-explorer-page",p:"sm",children:[s,l,o]}),m[19]=s,m[20]=l,m[21]=o,m[22]=u):u=m[22],u}let B=i()(async()=>W,{ssr:!1});B.getLayout=z.D;let H=B},12869:(e,t,s)=>{"use strict";s.d(t,{A8:()=>g,C5:()=>y,J_:()=>f,cv:()=>x,gK:()=>m,lT:()=>u,mo:()=>b,nq:()=>p,vX:()=>v,yN:()=>h});var r=s(43465),a=s(49730),n=s(67012),l=s(85508),i=s(71434),o=s.n(i),c=s(76089),d=s(82641);function u(e){return"1m"===e?c.Z7.OneMinute:"5m"===e?c.Z7.FiveMinute:"15m"===e?c.Z7.FifteenMinute:"30m"===e?c.Z7.ThirtyMinute:"1h"===e?c.Z7.OneHour:"6h"===e?c.Z7.SixHour:"12h"===e?c.Z7.TwelveHour:c.Z7.OneDay}function m(e){let t=new Date;return"1m"===e?[(0,r.A)(t,{minutes:15}),t]:"5m"===e?[(0,r.A)(t,{hours:1}),t]:"15m"===e?[(0,r.A)(t,{hours:4}),t]:"30m"===e?[(0,r.A)(t,{hours:8}),t]:"1h"===e?[(0,r.A)(t,{hours:16}),t]:"6h"===e?[(0,r.A)(t,{days:4}),t]:"12h"===e||"1d"===e?[(0,r.A)(t,{days:7}),t]:[t,t]}function h(e,t){let[s,i]=e;return"1m"===t&&15>(0,a.A)(i,s)?[(0,r.A)(i,{minutes:15}),i]:"5m"===t&&1>(0,n.A)(i,s)?[(0,r.A)(i,{hours:1}),i]:"15m"===t&&4>(0,n.A)(i,s)?[(0,r.A)(i,{hours:4}),i]:"30m"===t&&8>(0,n.A)(i,s)?[(0,r.A)(i,{hours:8}),i]:"1h"===t&&16>(0,n.A)(i,s)?[(0,r.A)(i,{hours:16}),i]:"6h"===t&&4>(0,l.A)(i,s)?[(0,r.A)(i,{days:4}),i]:"12h"===t&&7>(0,l.A)(i,s)||"1d"===t&&7>(0,l.A)(i,s)?[(0,r.A)(i,{days:7}),i]:e}let p={above:"At least (≥)",below:"Below (<)"},x={above:"is at least (≥)",below:"falls below (<)"},g={"1m":"1 minute","5m":"5 minute","15m":"15 minute","30m":"30 minute","1h":"1 hour","6h":"6 hour","12h":"12 hour","1d":"1 day"},f=o().pick(g,["5m","15m","30m","1h","6h","12h","1d"]),b={webhook:"Webhook"},y={threshold:1,thresholdType:d.qQ.ABOVE,interval:"5m",channel:{type:"webhook",webhookId:""}};function v(e){return!!e&&new Date>new Date(e.until)}},15670:(e,t,s)=>{"use strict";s.d(t,{A:()=>th});var r=s(6029),a=s(75155),n=s(55729),l=s(76694),i=s.n(l),o=s(1909),c=s(69580),d=s(29766),u=s(52789),m=s(3145),h=s(82641),p=s(43517),x=s(25062),g=s(92789),f=s(3635),b=s(78253),y=s(94193),v=s(60481),j=s(87989),_=s(22623),S=s(34834),w=s(56513),E=s(76013),C=s(53061),k=s(45005),N=s(64488),A=s(78341),T=s(97767),$=s(67872),I=s(90993),R=s(28975),z=s(87104),L=s(62118),M=s(5653),D=s(46661),F=s(61411),O=s(6620),P=s(9841),W=s(45519),B=s(81077),H=s(53353),V=s(19336),q=s(43152),X=s(26932),G=s(88339),K=s(91939),J=s(40228),Z=s(17273),Y=s(46466),U=s(58153),Q=s(98142),ee=s(67272),et=s(35467),es=s(12482),er=s(49672),ea=s(92917),en=s(81973),el=s(12869),ei=s(84851),eo=s(68344),ec=s(99082),ed=s(38206);function eu(e){let t,s,n=(0,a.c)(6),{value:l,defaultValue:i,onChange:o}=e;n[0]!==o?(t=e=>{null==e?o({}):["p50","p90","p95","p99"].includes(e)?o({aggFn:"quantile",level:Number.parseFloat(e.replace("p","0."))}):o({aggFn:e})},n[0]=o,n[1]=t):t=n[1];let c=t;return n[2]!==c||n[3]!==i||n[4]!==l?(s=(0,r.jsx)(ed.l,{withScrollArea:!1,searchable:!0,value:l,defaultValue:i,onChange:c,data:q.gT,"data-testid":"agg-fn-select"}),n[2]=c,n[3]=i,n[4]=l,n[5]=s):s=n[5],s}function em(e){let t,s,n,l,i,c,d,u,m,h=(0,a.c)(20);h[0]!==e?({aggFnName:t,quantileLevelName:l,defaultValue:s,...n}=e,h[0]=e,h[1]=t,h[2]=s,h[3]=n,h[4]=l):(t=h[1],s=h[2],n=h[3],l=h[4]),h[5]!==t||h[6]!==n?(i={...n,name:t},h[5]=t,h[6]=n,h[7]=i):i=h[7];let{field:p}=(0,o.as)(i),{onChange:x,value:g}=p;h[8]!==n||h[9]!==l?(c={...n,name:l},h[8]=n,h[9]=l,h[10]=c):c=h[10];let{field:f}=(0,o.as)(c),{onChange:b,value:y}=f;h[11]!==x||h[12]!==b?(d=e=>{"quantile"===e.aggFn&&b(e.level),x(e.aggFn)},h[11]=x,h[12]=b,h[13]=d):d=h[13];let v=d;e:{if("quantile"===g){let e;h[14]!==y?(e=Math.round(100*y),h[14]=y,h[15]=e):e=h[15],u=`p${e}`;break e}u=g}let j=u;return h[16]!==s||h[17]!==v||h[18]!==j?(m=(0,r.jsx)(eu,{value:j,defaultValue:s,onChange:v}),h[16]=s,h[17]=v,h[18]=j,h[19]=m):m=h[19],m}var eh=s(47268),ep=s(10174),ex=s(7565),eg=s(20728),ef=s(59029),eb=s(9953),ey=s(69164),ev=s(93003),ej=s(66980),e_=s(45749);let eS={number:(0,r.jsx)(B.A,{size:14}),currency:(0,r.jsx)(ey.A,{size:14}),percent:(0,r.jsx)(ev.A,{size:14}),byte:(0,r.jsx)(ej.A,{size:14}),time:(0,r.jsx)(e_.A,{size:14})},ew={factor:1,output:"number",mantissa:2,thousandSeparated:!0,average:!1,decimalBytes:!1},eE=e=>{let t,s,n,l,i,c,d,u,m,h,p,x,g,f=(0,a.c)(30),{control:b}=e,y=(0,o.FH)({control:b,name:"numberFormat"})??ew;return f[0]===Symbol.for("react.memo_cache_sentinel")?(t={flex:1},s={display:"flex",flexWrap:"nowrap",alignItems:"stretch",justifyContent:"stretch",gap:10},f[0]=t,f[1]=s):(t=f[0],s=f[1]),f[2]!==y.output?(n=e=>{let{field:t}=e;return(0,r.jsx)(eg.m,{...t,label:"Output format",leftSection:y.output&&eS[y.output],style:{flex:1},data:[{value:"number",label:"Number"},{value:"currency",label:"Currency"},{value:"byte",label:"Bytes"},{value:"percent",label:"Percentage"},{value:"time",label:"Time"}]})},f[2]=y.output,f[3]=n):n=f[3],f[4]!==b||f[5]!==n?(l=(0,r.jsx)(o.xI,{control:b,name:"numberFormat.output",render:n},"numberFormat.output"),f[4]=b,f[5]=n,f[6]=l):l=f[6],f[7]!==b||f[8]!==y.output?(i="currency"===y.output&&(0,r.jsx)(o.xI,{control:b,name:"numberFormat.currencySymbol",render:eC},"numberFormat.currencySymbol"),f[7]=b,f[8]=y.output,f[9]=i):i=f[9],f[10]!==l||f[11]!==i?(c=(0,r.jsxs)("div",{style:s,children:[l,i]}),f[10]=l,f[11]=i,f[12]=c):c=f[12],f[13]===Symbol.for("react.memo_cache_sentinel")?(d={marginTop:-6},f[13]=d):d=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)("div",{style:{fontSize:11},children:"Example"}),f[14]=u):u=f[14],f[15]!==y?(m=(0,ea.ZV)(1234,y),f[15]=y,f[16]=m):m=f[16],f[17]!==m?(h=(0,r.jsx)("div",{style:d,children:(0,r.jsxs)(_.t,{p:"xs",py:4,children:[u,m]})}),f[17]=m,f[18]=h):h=f[18],f[19]!==b||f[20]!==y.output?(p="time"!==y.output&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"fs-8 mt-2 fw-bold mb-1",children:"Decimals"}),(0,r.jsx)(o.xI,{control:b,name:"numberFormat.mantissa",render:eN},"numberFormat.mantissa")]}),f[19]=b,f[20]=y.output,f[21]=p):p=f[21],f[22]!==b||f[23]!==y.output?(x=(0,r.jsx)(S.B,{gap:"xs",children:"byte"===y.output?(0,r.jsx)(o.xI,{control:b,name:"numberFormat.decimalBytes",render:eA},"numberFormat.decimalBytes"):"time"===y.output?(0,r.jsx)(o.xI,{control:b,name:"numberFormat.factor",render:eT},"numberFormat.factor"):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.xI,{control:b,name:"numberFormat.thousandSeparated",render:e$},"numberFormat.thousandSeparated"),(0,r.jsx)(o.xI,{control:b,name:"numberFormat.average",render:eI},"numberFormat.average")]})}),f[22]=b,f[23]=y.output,f[24]=x):x=f[24],f[25]!==h||f[26]!==p||f[27]!==x||f[28]!==c?(g=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(S.B,{style:t,children:[c,h,p,x]})}),f[25]=h,f[26]=p,f[27]=x,f[28]=c,f[29]=g):g=f[29],g};function eC(e){let{field:t}=e;return(0,r.jsx)(ef.k,{...t,w:80,label:"Symbol",placeholder:"$"})}function ek(e){return`Decimals: ${e}`}function eN(e){let{field:t}=e,{value:s,onChange:a}=t;return(0,r.jsx)(eb.A,{mb:"xl",min:0,max:10,label:ek,marks:[{value:0,label:"0"},{value:10,label:"10"}],value:s??2,onChange:a})}function eA(e){let{field:t}=e,{value:s,onChange:a,...n}=t;return(0,r.jsx)(eh.S,{...n,size:"xs",label:"Decimal base",description:"Use 1KB = 1000 bytes",checked:s,onChange:a})}function eT(e){let{field:t}=e,{value:s,onChange:a,...n}=t,l=[{value:"1",label:"Seconds"},{value:"0.001",label:"Milliseconds"},{value:"0.000001",label:"Microseconds"},{value:"0.000000001",label:"Nanoseconds"}],i=l.find(e=>parseFloat(e.value)===s)?.value??"1";return(0,r.jsx)(eg.m,{...n,size:"sm",label:"Input unit",value:i,onChange:e=>a(parseFloat(e.target.value)),data:l})}function e$(e){let{field:t}=e,{value:s,onChange:a,...n}=t;return(0,r.jsx)(eh.S,{...n,size:"xs",label:"Separate thousands",description:"For example: 1,234,567",checked:s,onChange:a})}function eI(e){let{field:t}=e,{value:s,onChange:a,...n}=t;return(0,r.jsx)(eh.S,{...n,size:"xs",label:"Large number format",description:"For example: 1.2m",checked:s,onChange:a})}function eR({numberFormat:e,alignDateRangeToGranularity:t,compareToPreviousPeriod:s,fillNulls:r}){return{numberFormat:e??ew,alignDateRangeToGranularity:null==t||t,fillNulls:r??0,compareToPreviousPeriod:s??!1}}function ez(e){let t,s,n,l,i,c,d,u,m,p,b,y,j,_,w,E=(0,a.c)(42),{settings:C,opened:k,displayType:N,onChange:A,onClose:T,previousDateRange:$}=e;E[0]!==C?(t=eR(C),E[0]=C,E[1]=t):t=E[1],E[2]!==t?(s={defaultValues:t},E[2]=t,E[3]=s):s=E[3];let{control:I,handleSubmit:R,register:z,reset:L,setValue:M}=(0,o.mN)(s);E[4]!==I?(n={control:I,name:"fillNulls"},E[4]=I,E[5]=n):n=E[5];let D=(0,o.FH)(n);E[6]!==D?(l=(0,q.xu)(D),E[6]=D,E[7]=l):l=E[7];let F=l;E[8]!==T||E[9]!==L||E[10]!==C?(i=()=>{L(eR(C)),T()},E[8]=T,E[9]=L,E[10]=C,E[11]=i):i=E[11];let O=i;E[12]!==R||E[13]!==A||E[14]!==T?(c=()=>{R(A)(),T()},E[12]=R,E[13]=A,E[14]=T,E[15]=c):c=E[15];let P=c;E[16]!==L?(d=()=>{L(eR({}))},E[16]=L,E[17]=d):d=E[17];let W=d,B=N===h.t2.Line||N===h.t2.StackedBar;return E[18]!==F||E[19]!==B||E[20]!==$||E[21]!==z||E[22]!==M?(u=B&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eh.S,{size:"xs",label:"Show Complete Intervals",...z("alignDateRangeToGranularity")}),(0,r.jsx)(v.a,{children:(0,r.jsx)(eh.S,{size:"xs",label:"Fill Missing Intervals with Zero",checked:F,onChange:e=>{M("fillNulls",!!e.currentTarget.checked&&0)}})}),(0,r.jsx)(eh.S,{size:"xs",label:"Compare to Previous Period",description:$&&(0,r.jsxs)(r.Fragment,{children:["(",(0,r.jsx)(ex.H,{value:$[0],format:"short"})," - ",(0,r.jsx)(ex.H,{value:$[1],format:"short"}),")"]}),...z("compareToPreviousPeriod")}),(0,r.jsx)(g.c,{})]}),E[18]=F,E[19]=B,E[20]=$,E[21]=z,E[22]=M,E[23]=u):u=E[23],E[24]!==I?(m=(0,r.jsx)(eE,{control:I}),E[24]=I,E[25]=m):m=E[25],E[26]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(g.c,{}),E[26]=p):p=E[26],E[27]!==W?(b=(0,r.jsx)(x.$,{type:"submit",variant:"secondary",onClick:W,children:"Reset to Defaults"}),E[27]=W,E[28]=b):b=E[28],E[29]!==P?(y=(0,r.jsx)(x.$,{type:"submit",variant:"primary",onClick:P,children:"Apply"}),E[29]=P,E[30]=y):y=E[30],E[31]!==b||E[32]!==y?(j=(0,r.jsxs)(f.Y,{gap:"xs",mt:"xs",justify:"space-between",children:[b,y]}),E[31]=b,E[32]=y,E[33]=j):j=E[33],E[34]!==j||E[35]!==u||E[36]!==m?(_=(0,r.jsxs)(S.B,{children:[u,m,p,j]}),E[34]=j,E[35]=u,E[36]=m,E[37]=_):_=E[37],E[38]!==O||E[39]!==k||E[40]!==_?(w=(0,r.jsx)(ep._,{title:"Display Settings",opened:k,onClose:O,position:"right",children:_}),E[38]=O,E[39]=k,E[40]=_,E[41]=w):w=E[41],w}var eL=s(91148),eM=s(68269),eD=s(75359),eF=s(71781),eO=s(43085),eP=s(8737),eW=s(94720),eB=s(53993),eH=s(22599),eV=s(39785),eq=s(31097),eX=s(23195),eG=s(41279),eK=s(9385),eJ=s(70114),eZ=s(23474);let eY={ResourceAttributes:"Resource",Attributes:"Attributes",ScopeAttributes:"Scope"},eU={s:"Seconds",ms:"Milliseconds",us:"Microseconds",ns:"Nanoseconds",min:"Minutes",h:"Hours",d:"Days",wk:"Weeks",mo:"Months",a:"Years",By:"Bytes",KiBy:"Kibibytes",MiBy:"Mebibytes",GiBy:"Gibibytes",TiBy:"Tebibytes",kBy:"Kilobytes",MBy:"Megabytes",GBy:"Gigabytes",TBy:"Terabytes",bit:"Bits",Kibit:"Kibibits",Mibit:"Mebibits",Gibit:"Gibibits",Hz:"Hertz",kHz:"Kilohertz",MHz:"Megahertz",GHz:"Gigahertz",Cel:"Celsius",K:"Kelvin","[degF]":"Fahrenheit","%":"Percent",1:"Count","{request}":"Requests","{connection}":"Connections","{error}":"Errors","{packet}":"Packets","{thread}":"Threads","{process}":"Processes","{message}":"Messages","{operation}":"Operations","{call}":"Calls","{fault}":"Faults","{cpu}":"CPUs",m:"Meters",km:"Kilometers",g:"Grams",kg:"Kilograms",A:"Amperes",V:"Volts",W:"Watts",kW:"Kilowatts",J:"Joules",kJ:"Kilojoules"};function eQ(e){let t,s,l,i,o,c,d,u,m,g,y,v,j,_,w,E,C=(0,a.c)(47),{databaseName:k,metricType:N,metricName:A,tableSource:T,attribute:$,language:I,onAddToWhere:R,onBack:z,onAddToGroupBy:L}=e,[M,D]=(0,n.useState)(""),[F]=(0,eV.o)(M,300);C[0]!==$.category||C[1]!==$.name||C[2]!==k||C[3]!==F||C[4]!==A||C[5]!==N||C[6]!==T?(t={databaseName:k,metricType:N,metricName:A,attributeName:$.name,attributeCategory:$.category,searchTerm:F,tableSource:T},C[0]=$.category,C[1]=$.name,C[2]=k,C[3]=F,C[4]=A,C[5]=N,C[6]=T,C[7]=t):t=C[7];let{data:O,isLoading:P}=(({databaseName:e,metricType:t,metricName:s,attributeName:r,attributeCategory:a,searchTerm:n,tableSource:l,enabled:i=!0})=>{let o=l?(0,ea.U6)(l,t)??"":"",c=!!(i&&e&&o&&t&&s&&r&&a&&l&&l?.kind===h.GL.Metric);return(0,es.I)({queryKey:["metric-attribute-values",s,t,r,a,n,l],queryFn:async({signal:t})=>{if(!c)return[];let i=(0,er.W)(),d=n?(0,et.kg)` AND ${a}[${{String:r}}] ILIKE ${{String:`%${n}%`}}`:(0,et.kg)``,u=(0,et.kg)`
        SELECT DISTINCT ${a}[${{String:r}}] as value
        FROM ${(0,et.k$)({database:e,table:o})}
        WHERE MetricName = ${{String:s}}
          AND ${a}[${{String:r}}] != ''
          ${d}
        ORDER BY value
        LIMIT ${{Int32:100}}
      `,m=await i.query({query:u.sql,query_params:u.params,format:"JSON",abort_signal:t,connectionId:l.connection,clickhouse_settings:{max_execution_time:60,timeout_overflow_mode:"break"}}).then(e=>e.json());return m?.data?m.data.map(e=>e.value).filter(Boolean):[]},enabled:c,staleTime:3e5})})(t);C[8]!==$.category||C[9]!==$.name||C[10]!==I||C[11]!==R?(s=e=>{var t,s;R((t=$.category,s=$.name,"sql"===I?`${t}['${s}'] = '${e}'`:`${t}.${s}:"${e}"`))},C[8]=$.category,C[9]=$.name,C[10]=I,C[11]=R,C[12]=s):s=C[12];let W=s;C[13]!==$.category||C[14]!==$.name||C[15]!==L?(l=()=>{var e,t;L((e=$.category,t=$.name,`${e}['${t}']`))},C[13]=$.category,C[14]=$.name,C[15]=L,C[16]=l):l=C[16];let B=l;C[17]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(eq.A,{size:16}),C[17]=i):i=C[17],C[18]!==$.name?(o=(0,r.jsx)(p.E,{size:"sm",fw:500,children:$.name}),C[18]=$.name,C[19]=o):o=C[19];let H=eY[$.category];return C[20]!==H?(c=(0,r.jsx)(eO.E,{size:"xs",variant:"default",children:H}),C[20]=H,C[21]=c):c=C[21],C[22]!==o||C[23]!==c?(d=(0,r.jsxs)(f.Y,{gap:4,children:[i,o,c]}),C[22]=o,C[23]=c,C[24]=d):d=C[24],C[25]!==z||C[26]!==d?(u=(0,r.jsx)(eP.N,{onClick:z,children:d}),C[25]=z,C[26]=d,C[27]=u):u=C[27],C[28]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(eX.A,{size:14}),C[28]=m):m=C[28],C[29]!==B?(g=(0,r.jsx)(x.$,{variant:"secondary",size:"xs",leftSection:m,onClick:B,children:"Group By"}),C[29]=B,C[30]=g):g=C[30],C[31]!==g||C[32]!==u?(y=(0,r.jsxs)(f.Y,{justify:"space-between",children:[u,g]}),C[31]=g,C[32]=u,C[33]=y):y=C[33],C[34]===Symbol.for("react.memo_cache_sentinel")?(v=(0,r.jsx)(eG.A,{size:14}),C[34]=v):v=C[34],C[35]===Symbol.for("react.memo_cache_sentinel")?(j=e=>D(e.currentTarget.value),C[35]=j):j=C[35],C[36]!==M?(_=(0,r.jsx)(ef.k,{size:"xs",placeholder:"Search values...",leftSection:v,value:M,onChange:j}),C[36]=M,C[37]=_):_=C[37],C[38]!==W||C[39]!==P||C[40]!==M||C[41]!==O?(w=P?(0,r.jsx)(b.s,{justify:"center",py:"md",children:(0,r.jsx)(eW.a,{size:"sm"})}):O&&O.length>0?(0,r.jsx)(eB.F.Autosize,{mah:200,children:(0,r.jsx)(S.B,{gap:4,children:O.map(e=>(0,r.jsxs)(f.Y,{justify:"space-between",py:4,px:"xs",style:{borderRadius:4,cursor:"pointer"},className:"hover-highlight",children:[(0,r.jsx)(p.E,{size:"xs",style:{wordBreak:"break-all"},children:e}),(0,r.jsx)(x.$,{variant:"secondary",size:"compact-xs",leftSection:(0,r.jsx)(eK.A,{size:12}),onClick:()=>W(e),children:"Where"})]},e))})}):(0,r.jsx)(p.E,{size:"xs",c:"dimmed",ta:"center",py:"md",children:M?"No matching values found":"No values found"}),C[38]=W,C[39]=P,C[40]=M,C[41]=O,C[42]=w):w=C[42],C[43]!==y||C[44]!==_||C[45]!==w?(E=(0,r.jsxs)(S.B,{gap:"xs",children:[y,_,w]}),C[43]=y,C[44]=_,C[45]=w,C[46]=E):E=C[46],E}function e0(e){let t,s,l,i,o,c,d,u,m=(0,a.c)(16),{attributeKeys:h,onSelectAttribute:x}=e,[g,y]=(0,n.useState)("");e:{let e;if(!g){t=h;break e}if(m[0]!==h||m[1]!==g){let t=g.toLowerCase();e=h.filter(e=>e.name.toLowerCase().includes(t)),m[0]=h,m[1]=g,m[2]=e}else e=m[2];t=e}let j=t;if(m[3]!==j){for(let e of(s={ResourceAttributes:[],Attributes:[],ScopeAttributes:[]},j))s[e.category].push(e);m[3]=j,m[4]=s}else s=m[4];let w=s;m[5]===Symbol.for("react.memo_cache_sentinel")?(l=["ResourceAttributes","Attributes","ScopeAttributes"],m[5]=l):l=m[5];let E=l;return m[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(eG.A,{size:14}),m[6]=i):i=m[6],m[7]===Symbol.for("react.memo_cache_sentinel")?(o=e=>y(e.currentTarget.value),m[7]=o):o=m[7],m[8]!==g?(c=(0,r.jsx)(ef.k,{size:"xs",placeholder:"Search attributes...",leftSection:i,value:g,onChange:o}),m[8]=g,m[9]=c):c=m[9],m[10]!==w||m[11]!==x?(d=(0,r.jsx)(eB.F.Autosize,{mah:250,children:(0,r.jsx)(S.B,{gap:"sm",children:E.map(e=>{let t=w[e];return 0===t.length?null:(0,r.jsxs)(v.a,{children:[(0,r.jsxs)(f.Y,{gap:"xs",mb:4,children:[(0,r.jsx)(p.E,{size:"xs",fw:600,c:"dimmed",children:eY[e]}),(0,r.jsx)(eO.E,{size:"xs",variant:"default",children:t.length})]}),(0,r.jsx)(b.s,{gap:6,wrap:"wrap",children:t.map(e=>(0,r.jsx)(eP.N,{onClick:()=>x(e),children:(0,r.jsx)(_.t,{py:4,px:8,withBorder:!0,style:{cursor:"pointer"},className:"hover-highlight",children:(0,r.jsxs)(f.Y,{gap:4,children:[(0,r.jsx)(p.E,{size:"xs",children:e.name}),(0,r.jsx)(eJ.A,{size:12})]})})},`${e.category}:${e.name}`))})]},e)})})}),m[10]=w,m[11]=x,m[12]=d):d=m[12],m[13]!==c||m[14]!==d?(u=(0,r.jsxs)(S.B,{gap:"xs",children:[c,d]}),m[13]=c,m[14]=d,m[15]=u):u=m[15],u}function e1(e){let t,s,l,i,o,c,d,u,m,h,x,g,y,j,S=(0,a.c)(41),{databaseName:w,metricName:E,tableSource:C,metricType:k,attributeKeys:N,isLoading:T,language:$,metricMetadata:I,onAddToWhere:R,onAddToGroupBy:z}=e,[L,M]=(0,A.j)(!1),{toggle:D}=M,[F,O]=(0,n.useState)(null);S[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{O(e)},S[0]=t):t=S[0];let P=t;S[1]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{O(null)},S[1]=s):s=S[1];let W=s;if(!E)return null;S[2]===Symbol.for("react.memo_cache_sentinel")?(l={flex:1,minWidth:0},S[2]=l):l=S[2],S[3]!==I||S[4]!==E?(i=I?.description?(0,r.jsx)(p.E,{size:"xs",c:"dimmed",truncate:!0,children:I.description}):(0,r.jsx)(p.E,{size:"xs",c:"dimmed",children:E}),S[3]=I,S[4]=E,S[5]=i):i=S[5],S[6]!==I?(o=I?.unit&&(0,r.jsxs)(f.Y,{gap:4,mt:2,children:[(0,r.jsx)(p.E,{size:"xs",c:"dimmed",children:"Unit:"}),(0,r.jsx)(eO.E,{size:"xs",variant:"light",children:function(e){if(eU[e])return eU[e];if(e.includes("/")){let[t,s]=e.split("/"),r=eU[t]||t,a=eU[s]||s,n=a.endsWith("s")?a.slice(0,-1):a;return`${r}/${n}`}return e}(I.unit)})]}),S[6]=I,S[7]=o):o=S[7],S[8]!==i||S[9]!==o?(c=(0,r.jsxs)(v.a,{style:l,children:[i,o]}),S[8]=i,S[9]=o,S[10]=c):c=S[10],S[11]!==N.length?(d=N.length>0&&(0,r.jsxs)(eO.E,{size:"xs",variant:"light",children:[N.length," attributes"]}),S[11]=N.length,S[12]=d):d=S[12];let B=L?"rotate(180deg)":"rotate(0deg)";return S[13]!==B?(u=(0,r.jsx)(eZ.A,{size:16,style:{transform:B,transition:"transform 200ms"}}),S[13]=B,S[14]=u):u=S[14],S[15]!==u||S[16]!==d?(m=(0,r.jsxs)(f.Y,{gap:"xs",wrap:"nowrap",children:[d,u]}),S[15]=u,S[16]=d,S[17]=m):m=S[17],S[18]!==m||S[19]!==c?(h=(0,r.jsxs)(f.Y,{justify:"space-between",wrap:"nowrap",children:[c,m]}),S[18]=m,S[19]=c,S[20]=h):h=S[20],S[21]!==h||S[22]!==D?(x=(0,r.jsx)(eP.N,{onClick:D,w:"100%",children:h}),S[21]=h,S[22]=D,S[23]=x):x=S[23],S[24]!==N||S[25]!==w||S[26]!==T||S[27]!==$||S[28]!==E||S[29]!==k||S[30]!==z||S[31]!==R||S[32]!==F||S[33]!==C?(g=(0,r.jsx)(v.a,{pt:"xs",children:T?(0,r.jsx)(b.s,{justify:"center",py:"md",children:(0,r.jsx)(eW.a,{size:"sm"})}):0===N.length?(0,r.jsx)(p.E,{size:"xs",c:"dimmed",ta:"center",py:"md",children:"No attributes found for this metric"}):F?(0,r.jsx)(eQ,{databaseName:w,metricType:k,metricName:E,tableSource:C,attribute:F,language:$,onAddToWhere:R,onBack:W,onAddToGroupBy:z}):(0,r.jsx)(e0,{attributeKeys:N,onSelectAttribute:P})}),S[24]=N,S[25]=w,S[26]=T,S[27]=$,S[28]=E,S[29]=k,S[30]=z,S[31]=R,S[32]=F,S[33]=C,S[34]=g):g=S[34],S[35]!==L||S[36]!==g?(y=(0,r.jsx)(eH.S,{in:L,children:g}),S[35]=L,S[36]=g,S[37]=y):y=S[37],S[38]!==x||S[39]!==y?(j=(0,r.jsxs)(_.t,{withBorder:!0,p:"xs",mt:"xs",children:[x,y]}),S[38]=x,S[39]=y,S[40]=j):j=S[40],j}var e2=s(10342),e3=s(85508),e5=s(56343),e4=s(78550);let e6=":::::::",e7=({dateRange:e,metricSource:t,metricType:s})=>{let r=new Date,a=e||[(0,e2.A)(r,1),r],n=(0,e3.A)(a[1],a[0]);if(n<1){let e=(0,e5.A)(a[0],1);a=e>r?[(0,e2.A)(a[1],1),a[1]]:[a[0],e]}else n>3&&(a=[(0,e2.A)(a[1],3),a[1]]);return{from:{databaseName:t.from.databaseName,tableName:t.metricTables?.[s]??""},where:"",whereLanguage:"sql",select:"",timestampValueExpression:t.timestampValueExpression??"",connection:t.connection,dateRange:a}};function e9(e){let t,s,n,l,i=(0,a.c)(19),{metricType:o,metricName:c,setMetricType:d,setMetricName:u,isLoading:m,isError:p,metricSource:x,error:g,onFocus:f,"data-testid":b}=e,{gaugeMetrics:y,histogramMetrics:v,sumMetrics:j}=function(e,t){let s,r,n,l,i,o,c,d,u,m,p,x=(0,a.c)(26);void 0!==x[0]||x[1]!==e?(s=e7({dateRange:void 0,metricSource:e,metricType:h.SX.Gauge}),x[0]=void 0,x[1]=e,x[2]=s):s=x[2],void 0!==x[3]||x[4]!==e?(r=e7({dateRange:void 0,metricSource:e,metricType:h.SX.Histogram}),x[3]=void 0,x[4]=e,x[5]=r):r=x[5],void 0!==x[6]||x[7]!==e?(n=e7({dateRange:void 0,metricSource:e,metricType:h.SX.Sum}),x[6]=void 0,x[7]=e,x[8]=n):n=x[8],x[9]!==s||x[10]!==r||x[11]!==n?(l={gaugeConfig:s,histogramConfig:r,sumConfig:n},x[9]=s,x[10]=r,x[11]=n,x[12]=l):l=x[12];let{gaugeConfig:g,histogramConfig:f,sumConfig:b}=l;x[13]===Symbol.for("react.memo_cache_sentinel")?(i=["MetricName"],x[13]=i):i=x[13],x[14]!==g?(o={chartConfig:g,keys:i,limit:3e3,disableRowLimit:!0},x[14]=g,x[15]=o):o=x[15];let{data:y}=(0,e4.lo)(o);x[16]===Symbol.for("react.memo_cache_sentinel")?(c=["MetricName"],x[16]=c):c=x[16],x[17]!==f?(d={chartConfig:f,keys:c,limit:3e3,disableRowLimit:!0},x[17]=f,x[18]=d):d=x[18];let{data:v}=(0,e4.lo)(d);x[19]===Symbol.for("react.memo_cache_sentinel")?(u=["MetricName"],x[19]=u):u=x[19],x[20]!==b?(m={chartConfig:b,keys:u,limit:3e3,disableRowLimit:!0},x[20]=b,x[21]=m):m=x[21];let{data:j}=(0,e4.lo)(m),_=y?.[0].value,S=v?.[0].value,w=j?.[0].value;return x[22]!==_||x[23]!==S||x[24]!==w?(p={gaugeMetrics:_,histogramMetrics:S,sumMetrics:w},x[22]=_,x[23]=S,x[24]=w,x[25]=p):p=x[25],p}(x);if(i[0]!==y||i[1]!==v||i[2]!==c||i[3]!==o||i[4]!==j){let e;e=[...y?.map(e=>({value:`${e}${e6}gauge`,label:`${e} (Gauge)`}))??[],...v?.map(e=>({value:`${e}${e6}histogram`,label:`${e} (Histogram)`}))??[],...j?.map(e=>({value:`${e}${e6}sum`,label:`${e} (Sum)`}))??[]],c&&!e.find(e=>e.value===`${c}${e6}${o}`)&&e.push({value:`${c}${e6}${o}`,label:`${c} (${(0,ea.Zr)(o)})`}),t=e,i[0]=y,i[1]=v,i[2]=c,i[3]=o,i[4]=j,i[5]=t}else t=i[5];let _=t,S=c&&o?`${c}${e6}${o}`:null,w=m||p,E=m?"Loading...":p?"Unable to load metrics":"Select a metric...";return i[6]===Symbol.for("react.memo_cache_sentinel")?(s={position:"bottom-start",width:"auto",zIndex:1111},i[6]=s):s=i[6],i[7]!==u||i[8]!==d?(n=e=>{let[t,s]=e?.split(e6)??[];u(t??""),s&&d(s.toLowerCase())},i[7]=u,i[8]=d,i[9]=n):n=i[9],i[10]!==S||i[11]!==b||i[12]!==g||i[13]!==f||i[14]!==_||i[15]!==w||i[16]!==E||i[17]!==n?(l=(0,r.jsx)(ed.l,{disabled:w,variant:"filled",placeholder:E,data:_,limit:100,comboboxProps:s,value:S,searchable:!0,clearable:!0,onChange:n,onFocus:f,error:g,"data-testid":b}),i[10]=S,i[11]=b,i[12]=g,i[13]=f,i[14]=_,i[15]=w,i[16]=E,i[17]=n,i[18]=l):l=i[18],l}var e8=s(27166),te=s(62801),tt=s(60665),ts=s(93251),tr=s(97344);let ta="_new";function tn({chartConfig:e,opened:t,onClose:s}){let a=(0,ts.jE)(),{data:l,isLoading:i}=(0,tr.L9)(),c=(0,tr.mG)(),d=(0,tr.vY)(),{control:u,handleSubmit:m,reset:g,formState:b}=(0,o.mN)({defaultValues:{dashboardId:"",newDashboardName:""}}),y=(0,o.FH)({control:u,name:"dashboardId"})===ta;(0,n.useEffect)(()=>{t||g()},[t,g]);let j=[...l?.map(e=>({value:e.id,label:e.name}))||[],{value:ta,label:"Create New Dashboard"}],_=t=>{var s;let r=0===(s=t.tiles).length?{x:0,y:0}:{x:0,y:Math.max(...s.map(e=>e.y+e.h))},a=function(e){switch(e){case h.t2.Line:case h.t2.StackedBar:return{w:12,h:10};case h.t2.Table:case h.t2.Search:return{w:24,h:12};case h.t2.Number:return{w:6,h:6};case h.t2.Markdown:return{w:12,h:8};case h.t2.Heatmap:default:return{w:12,h:10}}}(e.displayType);return{id:Math.floor(1e8*Math.random()).toString(36),x:r.x,y:r.y,w:a.w,h:a.h,config:e}},w=m(async e=>{try{if(y){if(!e.newDashboardName.trim())return void tt.$e.show({color:"red",title:"Validation Error",message:"Dashboard name is required"});let t=_({id:"",name:"",tiles:[],tags:[]}),a=await c.mutateAsync({name:e.newDashboardName.trim(),tiles:[t],tags:[]});tt.$e.show({color:"green",title:"Chart saved to dashboard",message:(0,r.jsxs)(r.Fragment,{children:["View on"," ",(0,r.jsx)("a",{href:`/dashboards/${a.id}`,style:{color:"inherit",textDecoration:"underline"},children:a.name})]}),autoClose:5e3}),s()}else{if(!e.dashboardId)return void tt.$e.show({color:"red",title:"Validation Error",message:"Please select a dashboard"});let t=a.getQueryData(["dashboards"]),n=t?.find(t=>t.id===e.dashboardId);if(!n)return void tt.$e.show({color:"red",title:"Error",message:"Dashboard not found. Please refresh and try again."});let l=_(n);await d.mutateAsync({id:n.id,tiles:[...n.tiles,l]}),tt.$e.show({color:"green",title:"Chart saved to dashboard",message:(0,r.jsxs)(r.Fragment,{children:["View on"," ",(0,r.jsx)("a",{href:`/dashboards/${n.id}`,style:{color:"inherit",textDecoration:"underline"},children:n.name})]}),autoClose:5e3}),s()}}catch(e){tt.$e.show({color:"red",title:"Error saving chart",message:e instanceof Error?e.message:"Failed to save chart to dashboard"})}}),E=c.isPending||d.isPending;return(0,r.jsx)(e8.a,{opened:t,onClose:s,title:"Save to Dashboard",size:"lg",children:(0,r.jsx)("form",{onSubmit:w,children:(0,r.jsxs)(S.B,{gap:"md",children:[(0,r.jsx)(te.Z,{withBorder:!0,padding:"sm",children:(0,r.jsxs)(S.B,{gap:"xs",children:[(0,r.jsx)(p.E,{size:"sm",fw:500,children:"Chart Preview"}),(0,r.jsxs)(f.Y,{gap:"xs",children:[(0,r.jsx)(p.E,{size:"sm",c:"dimmed",children:"Name:"}),(0,r.jsx)(p.E,{size:"sm",children:e.name||"Untitled Chart"})]}),e.displayType&&(0,r.jsxs)(f.Y,{gap:"xs",children:[(0,r.jsx)(p.E,{size:"sm",c:"dimmed",children:"Type:"}),(0,r.jsx)(p.E,{size:"sm",children:e.displayType})]})]})}),(0,r.jsxs)(v.a,{children:[(0,r.jsx)(p.E,{size:"xs",mb:"xs",children:"Dashboard *"}),(0,r.jsx)(o.xI,{name:"dashboardId",control:u,rules:{required:!0},render:({field:e})=>(0,r.jsx)(ed.l,{...e,data:j,placeholder:"Select a dashboard",searchable:!0,disabled:i||E,nothingFoundMessage:"No dashboards found"})})]}),y&&(0,r.jsxs)(v.a,{children:[(0,r.jsx)(p.E,{size:"xs",mb:"xs",children:"Dashboard Name *"}),(0,r.jsx)(o.xI,{name:"newDashboardName",control:u,rules:{required:!0},render:({field:e})=>(0,r.jsx)(ef.k,{...e,placeholder:"Enter dashboard name",disabled:E})})]}),(0,r.jsxs)(f.Y,{justify:"flex-end",mt:"md",children:[(0,r.jsx)(x.$,{variant:"subtle",onClick:s,disabled:E,children:"Cancel"}),(0,r.jsx)(x.$,{type:"submit",loading:E,children:"Save to Dashboard"})]})]})})})}var tl=s(86761),ti=s(57478);let to=(e,t)=>`${e}${t}`;function tc(e,t){let s=t.kind===h.GL.Metric;return{...e,select:!s&&Array.isArray(e.select)?e.select.map(e=>i()(e,["metricName","metricType"])):e.select,metricTables:s?e.metricTables:void 0,having:e.displayType===h.t2.Table?e.having:void 0,orderBy:e.displayType===h.t2.Table?e.orderBy:void 0}}let td=(e,t,s)=>{if(e?.kind===h.GL.Metric&&Array.isArray(t)){let e=!1;return t.forEach((t,r)=>{t.metricType&&!t.metricName&&(s(to(`series.${r}.`,"metricName"),{type:"manual",message:"Please select a metric name"}),e=!0)}),e}return!1},tu=function(e){let t,s,l,i,c,d,u,m,y,v,j,_,S,w,E,C,k,N,A,R,z,L,M,D,F,O,P,W,B,H,V,X,G=(0,a.c)(136),{control:K,databaseName:J,dateRange:U,connectionId:Q,index:ee,namePrefix:en,onRemoveSeries:el,onSwapSeries:ei,onSubmit:eo,setValue:ec,showGroupBy:ed,showHaving:eu,tableName:eh,parentRef:ep,length:ex,tableSource:eg,errors:ef,clearErrors:eb}=e,ey=`${en}aggFn`;G[0]!==K||G[1]!==ey?(t={control:K,name:ey},G[0]=K,G[1]=ey,G[2]=t):t=G[2];let ev=(0,o.FH)(t),ej=`${en}aggConditionLanguage`;G[3]!==K||G[4]!==ej?(s={control:K,name:ej,defaultValue:"lucene"},G[3]=K,G[4]=ej,G[5]=s):s=G[5];let e_=(0,o.FH)(s),eS=`${en}metricType`;G[6]!==K||G[7]!==eS?(l={control:K,name:eS},G[6]=K,G[7]=eS,G[8]=l):l=G[8];let ew=(0,o.FH)(l);G[9]!==ew||G[10]!==en||G[11]!==ec||G[12]!==eg?.kind?(i=()=>{eg?.kind!==h.GL.Metric||ew||ec(`${en}metricType`,h.SX.Gauge)},G[9]=ew,G[10]=en,G[11]=ec,G[12]=eg?.kind,G[13]=i):i=G[13];let eE=eg?.kind;G[14]!==ew||G[15]!==en||G[16]!==ec||G[17]!==eE?(c=[eE,ew,en,ec],G[14]=ew,G[15]=en,G[16]=ec,G[17]=eE,G[18]=c):c=G[18],(0,n.useEffect)(i,c),G[19]!==eh||G[20]!==ew||G[21]!==eg?(d=eg?.kind===h.GL.Metric?(0,ea.U6)(eg,ew):eh,G[19]=eh,G[20]=ew,G[21]=eg,G[22]=d):d=G[22];let eC=d,ek=`${en}metricName`;G[23]!==K||G[24]!==ek?(u={control:K,name:ek},G[23]=K,G[24]=ek,G[25]=u):u=G[25];let eN=(0,o.FH)(u),eA=`${en}aggCondition`;G[26]!==K||G[27]!==eA?(m={control:K,name:eA},G[26]=K,G[27]=eA,G[28]=m):m=G[28];let eT=(0,o.FH)(m);G[29]!==K?(y={control:K,name:"groupBy"},G[29]=K,G[30]=y):y=G[30];let e$=(0,o.FH)(y),eI="sql"===e_;G[31]!==J||G[32]!==eN||G[33]!==ew||G[34]!==eI||G[35]!==eg?(v={databaseName:J,metricType:ew,metricName:eN,tableSource:eg,isSql:eI},G[31]=J,G[32]=eN,G[33]=ew,G[34]=eI,G[35]=eg,G[36]=v):v=G[36];let{data:eR,isLoading:ez}=(({databaseName:e,metricType:t,metricName:s,tableSource:r,isSql:a})=>{let n=r?(0,ea.U6)(r,t)??"":"",l=!!(e&&n&&t&&r&&r?.kind===h.GL.Metric);return(0,es.I)({queryKey:["metric-attributes",t,s,a,r],queryFn:async({signal:t})=>{if(!l)return[];let i=(0,er.W)(),o=(0,et.kg)`
        SELECT DISTINCT
          ScopeAttributes,
          ResourceAttributes,
          Attributes
        FROM ${(0,et.k$)({database:e,table:n})}
        WHERE MetricName=${{String:s}}
        LIMIT ${{Int32:1e4}}
      `,c=await i.query({query:o.sql,query_params:o.params,format:"JSON",abort_signal:t,connectionId:r.connection}).then(e=>e.json());if(c?.data){var d=c.data;try{let e=new Set;for(let t of d)t.ScopeAttributes&&Object.entries(t.ScopeAttributes).forEach(([t,s])=>{let r=(0,ea.ji)("ScopeAttributes",t,s,a);e.add(r)}),t.ResourceAttributes&&Object.entries(t.ResourceAttributes).forEach(([t,s])=>{let r=(0,ea.ji)("ResourceAttributes",t,s,a);e.add(r)}),t.Attributes&&Object.entries(t.Attributes).forEach(([t,s])=>{let r=(0,ea.ji)("Attributes",t,s,a);e.add(r)});return Array.from(e)}catch(e){return console.error("Error parsing metric autocomplete attributes",e),[]}}return[]},enabled:l})})(v);G[37]!==eR?(j=eR??[],G[37]=eR,G[38]=j):j=G[38],G[39]!==j?(_=(e=>{let t=["ResourceAttributes","ScopeAttributes","Attributes"],s=new Set,r=[];for(let a of e)for(let e of t){if(!a.startsWith(e))continue;let t=null,n=a.match(RegExp(`^${e}\\['([^']+)'\\]`));if(n)t=n[1];else{let s=a.match(RegExp(`^${e}\\.([^:]+):`));s&&(t=s[1])}if(t){let a=`${e}:${t}`;s.has(a)||(s.add(a),r.push({name:t,category:e}))}break}return r.sort((e,t)=>{if(e.category!==t.category){let s=["ResourceAttributes","Attributes","ScopeAttributes"];return s.indexOf(e.category)-s.indexOf(t.category)}return e.name.localeCompare(t.name)}),r})(j),G[39]=j,G[40]=_):_=G[40];let eL=_;G[41]!==J||G[42]!==eN||G[43]!==ew||G[44]!==eg?(S={databaseName:J,metricType:ew,metricName:eN,tableSource:eg},G[41]=J,G[42]=eN,G[43]=ew,G[44]=eg,G[45]=S):S=G[45];let{data:eM}=(({databaseName:e,metricType:t,metricName:s,tableSource:r})=>{let a=r?(0,ea.U6)(r,t)??"":"",n=!!(e&&t&&s&&r&&a&&r?.kind===h.GL.Metric);return(0,es.I)({queryKey:["metric-metadata",e,t,s],queryFn:async({signal:t})=>{if(!n)return null;let l=(0,er.W)(),i=(0,et.kg)`
        SELECT
          MetricUnit,
          MetricDescription
        FROM ${(0,et.k$)({database:e,table:a})}
        WHERE MetricName = ${{String:s}}
        LIMIT 1
      `,o=await l.query({query:i.sql,query_params:i.params,format:"JSON",abort_signal:t,connectionId:r.connection}).then(e=>e.json());return o?.data?.[0]?{unit:o.data[0].MetricUnit||"",description:o.data[0].MetricDescription||""}:null},enabled:n,staleTime:3e5})})(S);G[46]!==eT||G[47]!==en||G[48]!==eo||G[49]!==ec?(w=e=>{let t=eT||"";ec(`${en}aggCondition`,t?`${t} AND ${e}`:e),eo()},G[46]=eT,G[47]=en,G[48]=eo,G[49]=ec,G[50]=w):w=G[50];let eD=w;G[51]!==e$||G[52]!==eo||G[53]!==ec?(E=e=>{let t=e$||"";ec("groupBy",t?`${t}, ${e}`:e),eo()},G[51]=e$,G[52]=eo,G[53]=ec,G[54]=E):E=G[54];let eO=E,eP="none"!==ev,eW=eC??"",eB=Q??"",eH=eg?.kind===h.GL.Metric?eN:void 0;G[55]!==J||G[56]!==eW||G[57]!==eB||G[58]!==eH?(C={databaseName:J,tableName:eW,connectionId:eB,metricName:eH},G[55]=J,G[56]=eW,G[57]=eB,G[58]=eH,G[59]=C):C=G[59];let eV=C;G[60]===Symbol.for("react.memo_cache_sentinel")?(k=(0,r.jsx)(p.E,{size:"xxs",children:"Alias"}),N={width:150},G[60]=k,G[61]=N):(k=G[60],N=G[61]);let eq=`${en}alias`;G[62]!==eo?(A=()=>eo(),G[62]=eo,G[63]=A):A=G[63],G[64]!==K||G[65]!==eq||G[66]!==A?(R=(0,r.jsx)("div",{style:N,children:(0,r.jsx)(eF.M7,{name:eq,control:K,placeholder:"Series alias",onChange:A,size:"xs","data-testid":"series-alias-input"})}),G[64]=K,G[65]=eq,G[66]=A,G[67]=R):R=G[67],G[68]!==ee||G[69]!==ei?(z=(ee??-1)>0&&(0,r.jsx)(x.$,{variant:"subtle",color:"gray",size:"xxs",onClick:()=>ei(ee,ee-1),title:"Move up",children:(0,r.jsx)(T.A,{size:14})}),G[68]=ee,G[69]=ei,G[70]=z):z=G[70],G[71]!==ee||G[72]!==ex||G[73]!==ei?(L=(ee??-1)<ex-1&&(0,r.jsx)(x.$,{variant:"subtle",color:"gray",size:"xxs",onClick:()=>ei(ee,ee+1),title:"Move down",children:(0,r.jsx)($.A,{size:14})}),G[71]=ee,G[72]=ex,G[73]=ei,G[74]=L):L=G[74],G[75]!==ee||G[76]!==ex||G[77]!==el?(M=((ee??-1)>0||ex>1)&&(0,r.jsxs)(x.$,{variant:"subtle",color:"gray",size:"xs",onClick:()=>el(ee),children:[(0,r.jsx)(I.A,{size:14,className:"me-2"}),"Remove Series"]}),G[75]=ee,G[76]=ex,G[77]=el,G[78]=M):M=G[78],G[79]!==R||G[80]!==z||G[81]!==L||G[82]!==M?(D=(0,r.jsx)(g.c,{label:(0,r.jsxs)(f.Y,{gap:"xs",children:[k,R,z,L,M]}),labelPosition:"right",mb:8,mt:"sm"}),G[79]=R,G[80]=z,G[81]=L,G[82]=M,G[83]=D):D=G[83],G[84]===Symbol.for("react.memo_cache_sentinel")?(F={minWidth:200},G[84]=F):F=G[84];let eX=`${en}aggFn`,eG=`${en}level`;return G[85]!==K||G[86]!==eX||G[87]!==eG?(O=(0,r.jsx)("div",{style:F,children:(0,r.jsx)(em,{aggFnName:eX,quantileLevelName:eG,defaultValue:q.gT[0].value,control:K})}),G[85]=K,G[86]=eX,G[87]=eG,G[88]=O):O=G[88],G[89]!==eb||G[90]!==K||G[91]!==U||G[92]!==ef?.metricName?.message||G[93]!==eN||G[94]!==ew||G[95]!==en||G[96]!==ec||G[97]!==eg?(P=eg?.kind===h.GL.Metric&&ew&&(0,r.jsxs)("div",{style:{minWidth:220},children:[(0,r.jsx)(e9,{metricName:eN,dateRange:U,metricType:ew,setMetricName:e=>{ec(`${en}metricName`,e),ec(`${en}valueExpression`,"Value")},setMetricType:e=>ec(`${en}metricType`,e),metricSource:eg,"data-testid":"metric-name-selector",error:ef?.metricName?.message,onFocus:()=>eb(to(en,"metricName"))}),"gauge"===ew&&(0,r.jsx)(b.s,{justify:"end",children:(0,r.jsx)(eF.mh,{control:K,name:`${en}isDelta`,label:"Delta",size:"xs",className:"mt-2"})})]}),G[89]=eb,G[90]=K,G[91]=U,G[92]=ef?.metricName?.message,G[93]=eN,G[94]=ew,G[95]=en,G[96]=ec,G[97]=eg,G[98]=P):P=G[98],G[99]!==ev||G[100]!==K||G[101]!==en||G[102]!==eo||G[103]!==eV||G[104]!==eg?.kind?(W=eg?.kind!==h.GL.Metric&&"count"!==ev&&(0,r.jsx)("div",{style:{minWidth:220,..."none"===ev&&{flexGrow:2}},children:(0,r.jsx)(Y.Z,{tableConnection:eV,control:K,name:`${en}valueExpression`,placeholder:"SQL Column",onSubmit:eo})}),G[99]=ev,G[100]=K,G[101]=en,G[102]=eo,G[103]=eV,G[104]=eg?.kind,G[105]=W):W=G[105],G[106]!==eR||G[107]!==K||G[108]!==en||G[109]!==eo||G[110]!==ep||G[111]!==ed||G[112]!==eu||G[113]!==eP||G[114]!==eV?(B=(eP||ed||eu)&&(0,r.jsxs)("div",{className:"flex-grow-1 gap-2 align-items-center",style:{display:"grid",gridTemplateColumns:"auto 1fr auto 1fr"},children:[eP&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.E,{size:"sm",children:"Where"}),(0,r.jsx)("div",{style:{gridColumn:eu===ed?"span 3":void 0},children:(0,r.jsx)(Z.A,{tableConnection:eV,control:K,name:`${en}aggCondition`,onSubmit:eo,showLabel:!1,additionalSuggestions:eR})})]}),ed&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.E,{size:"sm",style:{whiteSpace:"nowrap"},children:"Group By"}),(0,r.jsx)("div",{style:{minWidth:200,maxWidth:"100%",gridColumn:eu||eP?void 0:"span 3"},children:(0,r.jsx)(Y.Z,{parentRef:ep,tableConnection:eV,control:K,name:"groupBy",placeholder:"SQL Columns",disableKeywordAutocomplete:!0,onSubmit:eo})}),eu&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.E,{size:"sm",style:{whiteSpace:"nowrap"},children:"Having"}),(0,r.jsx)("div",{style:{minWidth:300,maxWidth:"100%"},children:(0,r.jsx)(Y.Z,{tableConnection:eV,control:K,name:"having",placeholder:"SQL HAVING clause (ex. count() > 100)",disableKeywordAutocomplete:!0,onSubmit:eo})})]})]})]}),G[106]=eR,G[107]=K,G[108]=en,G[109]=eo,G[110]=ep,G[111]=ed,G[112]=eu,G[113]=eP,G[114]=eV,G[115]=B):B=G[115],G[116]!==O||G[117]!==P||G[118]!==W||G[119]!==B?(H=(0,r.jsxs)(b.s,{gap:"sm",mt:"xs",align:"start",children:[O,P,W,B]}),G[116]=O,G[117]=P,G[118]=W,G[119]=B,G[120]=H):H=G[120],G[121]!==e_||G[122]!==eL||G[123]!==J||G[124]!==eO||G[125]!==eD||G[126]!==ez||G[127]!==eM||G[128]!==eN||G[129]!==ew||G[130]!==eg?(V=eg?.kind===h.GL.Metric&&eN&&(0,r.jsx)(e1,{databaseName:J,metricType:ew,metricName:eN,tableSource:eg,attributeKeys:eL,isLoading:ez,language:"sql"===e_?"sql":"lucene",metricMetadata:eM,onAddToWhere:eD,onAddToGroupBy:eO}),G[121]=e_,G[122]=eL,G[123]=J,G[124]=eO,G[125]=eD,G[126]=ez,G[127]=eM,G[128]=eN,G[129]=ew,G[130]=eg,G[131]=V):V=G[131],G[132]!==D||G[133]!==H||G[134]!==V?(X=(0,r.jsxs)(r.Fragment,{children:[D,H,V]}),G[132]=D,G[133]=H,G[134]=V,G[135]=X):X=G[135],X},tm=d.Ay.object({alert:h.fB.optional()}).passthrough();function th(e){var t;let s,l,d,N,T,$,I,P,W,B,H,V,et,es,er,ed,eu,em,eh,ep,ex,eg,ef,eb,ey,ev,ej,e_,eS,ew,eE,eC,ek,eN,eA,eT,e$,eI,eR,eO,eP,eW,eB,eH,eV,eq,eX,eG,eK,eJ,eZ,eY,eU,eQ,e0,e1,e2,e3,e5,e4,e6,e7,e9,e8,te,tt,ts,tr,ta,to,th,tg,tf=(0,a.c)(258),{dashboardId:tb,chartConfig:ty,displayedTimeInputValue:tv,dateRange:tj,isSaving:t_,onTimeRangeSearch:tS,setChartConfig:tw,setDisplayedTimeInputValue:tE,onSave:tC,onTimeRangeSelect:tk,onClose:tN,onDirtyChange:tA,"data-testid":tT,submitRef:t$}=e;tf[0]!==ty.select?(s=Array.isArray(ty.select)?ty.select.map(tx):[],tf[0]=ty.select,tf[1]=s):s=tf[1],tf[2]!==ty||tf[3]!==s?(l={...ty,series:s},tf[2]=ty,tf[3]=s,tf[4]=l):l=tf[4];let tI=l;tf[5]===Symbol.for("react.memo_cache_sentinel")?(d=(0,u.u)(tm),tf[5]=d):d=tf[5],tf[6]!==tI?(N={defaultValues:tI,values:tI,resolver:d},tf[6]=tI,tf[7]=N):N=tf[7];let{control:tR,setValue:tz,handleSubmit:tL,register:tM,setError:tD,clearErrors:tF,formState:tO}=(0,o.mN)(N),{errors:tP,isDirty:tW}=tO;tf[8]!==tR?(T={control:tR,name:"series"},tf[8]=tR,tf[9]=T):T=tf[9];let{fields:tB,append:tH,remove:tV,swap:tq}=(0,o.jz)(T);tf[10]!==tW||tf[11]!==tA?($=()=>{tA?.(tW)},I=[tW,tA],tf[10]=tW,tf[11]=tA,tf[12]=$,tf[13]=I):($=tf[12],I=tf[13]),(0,n.useEffect)($,I);let[tX,tG]=(0,n.useState)(!1);tf[14]!==tR?(P={control:tR,name:"select"},tf[14]=tR,tf[15]=P):P=tf[15];let tK=(0,o.FH)(P);tf[16]!==tR?(W={control:tR,name:"source"},tf[16]=tR,tf[17]=W):W=tf[17];let tJ=(0,o.FH)(W);tf[18]!==tR?(B={control:tR,name:"alert"},tf[18]=tR,tf[19]=B):B=tf[19];let tZ=(0,o.FH)(B);tf[20]!==tR?(H={control:tR,name:"seriesReturnType"},tf[20]=tR,tf[21]=H):H=tf[21];let tY=(0,o.FH)(H);tf[22]!==tR?(V={control:tR,name:"groupBy"},tf[22]=tR,tf[23]=V):V=tf[23];let tU=(0,o.FH)(V),tQ=(0,o.FH)({control:tR,name:"displayType"})??h.t2.Line;tf[24]!==tR?(et={control:tR,name:"markdown"},tf[24]=tR,tf[25]=et):et=tf[25];let t0=(0,o.FH)(et);tf[26]!==tR?(es={control:tR,name:"alert.channel.type"},tf[26]=tR,tf[27]=es):es=tf[27];let t1=(0,o.FH)(es);tf[28]!==tR?(er={control:tR,name:"granularity"},tf[28]=tR,tf[29]=er):er=tf[29];let t2=(0,o.FH)(er);tf[30]!==tJ?(ed={id:tJ},tf[30]=tJ,tf[31]=ed):ed=tf[31];let{data:t3}=(0,en.Fo)(ed),t5=t3?.from.databaseName,t4=t3?.from.tableName;switch(tQ){case h.t2.Search:eu="search";break;case h.t2.Markdown:eu="markdown";break;case h.t2.Table:eu="table";break;case h.t2.Pie:eu="pie";break;case h.t2.Number:eu="number";break;default:eu="time"}let t6=eu;tf[32]!==tQ||tf[33]!==tz?(em=()=>{tQ!==h.t2.Line&&tQ!==h.t2.Number&&tz("alert",void 0)},eh=[tQ,tz],tf[32]=tQ,tf[33]=tz,tf[34]=em,tf[35]=eh):(em=tf[34],eh=tf[35]),(0,n.useEffect)(em,eh),tf[36]===Symbol.for("react.memo_cache_sentinel")?(ep=["table","time","number","pie"],tf[36]=ep):ep=tf[36];let t7=ep.includes(t6),t9=t3?.kind!==h.GL.Metric;tf[37]===Symbol.for("react.memo_cache_sentinel")?(ex=["alignDateRangeToGranularity","fillNulls","compareToPreviousPeriod","numberFormat"],tf[37]=ex):ex=tf[37],tf[38]!==tR?(eg={control:tR,name:ex},tf[38]=tR,tf[39]=eg):eg=tf[39];let[t8,se,st,ss]=(0,o.FH)(eg);tf[40]!==t8||tf[41]!==st||tf[42]!==se||tf[43]!==ss?(ef={alignDateRangeToGranularity:t8,fillNulls:se,compareToPreviousPeriod:st,numberFormat:ss},tf[40]=t8,tf[41]=st,tf[42]=se,tf[43]=ss,tf[44]=ef):ef=tf[44];let sr=ef,[sa,sn]=(0,A.j)(!1),{open:sl,close:si}=sn,[so,sc]=(0,n.useState)(void 0),[sd,su]=(0,n.useState)(void 0);tf[45]===Symbol.for("react.memo_cache_sentinel")?(eb=(e,t)=>{sc(e),su(t)},tf[45]=eb):eb=tf[45];let sm=eb;t:{let e,t,s;if(!so){ey=void 0;break t}tf[46]!==tZ||tf[47]!==so.granularity?(e=tZ?(0,el.lT)(tZ.interval):so.granularity,tf[46]=tZ,tf[47]=so.granularity,tf[48]=e):e=tf[48],tf[49]!==tZ||tf[50]!==so.dateRange?(t=tZ?(0,el.yN)(so.dateRange,tZ.interval):so.dateRange,tf[49]=tZ,tf[50]=so.dateRange,tf[51]=t):t=tf[51],tf[52]!==so||tf[53]!==e||tf[54]!==t?(s={...so,granularity:e,dateRange:t},tf[52]=so,tf[53]=e,tf[54]=t,tf[55]=s):s=tf[55],ey=s}let sh=ey,[sp,sx]=(0,n.useState)(!1);tf[56]!==tj||tf[57]!==tL||tf[58]!==tw||tf[59]!==tD||tf[60]!==t3?(ev=()=>{tL(e=>{if(td(t3,e.series,tD))return;let t={...i()(e,["series"]),select:e.displayType===h.t2.Search?e.select:e.series};if(tw?.(t),null!=t3){let e=!t.select||0===t.select.length;sm(structuredClone(tc({...t,from:t3.from,timestampValueExpression:t3.timestampValueExpression,dateRange:tj,connection:t3.connection,implicitColumnExpression:t3.implicitColumnExpression,metricTables:t3.metricTables,select:e?t3.defaultTableSelectExpression||"":t.select},t3)),t3)}})()},tf[56]=tj,tf[57]=tL,tf[58]=tw,tf[59]=tD,tf[60]=t3,tf[61]=ev):ev=tf[61];let sg=ev;tf[62]!==sg||tf[63]!==tz?(ej=e=>{tz("orderBy",(0,ea.pX)(e)??""),sg()},tf[62]=sg,tf[63]=tz,tf[64]=ej):ej=tf[64];let sf=ej;tf[65]!==so?(e_=so?.orderBy&&"string"==typeof so.orderBy?(0,ea.t3)(so.orderBy):void 0,tf[65]=so,tf[66]=e_):e_=tf[66];let sb=e_;tf[67]!==sg||tf[68]!==t$?(eS=()=>{t$&&(t$.current=sg)},ew=[sg,t$],tf[67]=sg,tf[68]=t$,tf[69]=eS,tf[70]=ew):(eS=tf[69],ew=tf[70]),(0,n.useEffect)(eS,ew),tf[71]!==tQ||tf[72]!==tC||tf[73]!==tD||tf[74]!==t3?(eE=e=>{if(null!=t3){if(td(t3,e.series,tD))return;tQ===h.t2.Search&&"string"!=typeof e.select?e.select="":tQ!==h.t2.Search&&(e.select=e.series);let t=tc(i()(e,["series"]),t3);tC?.(t)}},tf[71]=tQ,tf[72]=tC,tf[73]=tD,tf[74]=t3,tf[75]=eE):eE=tf[75];let sy=eE,sv=(0,n.useRef)(t2),sj=(0,n.useRef)(tQ);if(tf[76]!==t2||tf[77]!==sg?(eC=()=>{t2!==sv.current&&(sv.current=t2,sg())},ek=[t2,sg],tf[76]=t2,tf[77]=sg,tf[78]=eC,tf[79]=ek):(eC=tf[78],ek=tf[79]),(0,n.useEffect)(eC,ek),tf[80]!==tQ||tf[81]!==sg||tf[82]!==tK||tf[83]!==tz?(eN=()=>{if(tQ!==sj.current){if(sj.current=tQ,tQ===h.t2.Search&&"string"!=typeof tK&&(tz("select",""),tz("series",[])),tQ!==h.t2.Search&&"string"==typeof tK){let e=[{aggFn:"count",aggCondition:"",aggConditionLanguage:(0,Z.S)()??"lucene",valueExpression:""}];tz("where",""),tz("select",e),tz("series",e)}sg()}},eA=[tQ,tK,tz,sg],tf[80]=tQ,tf[81]=sg,tf[82]=tK,tf[83]=tz,tf[84]=eN,tf[85]=eA):(eN=tf[84],eA=tf[85]),(0,n.useEffect)(eN,eA),tf[86]!==tj?(eT=()=>{sc(e=>null==e?e:{...e,dateRange:tj})},e$=[tj],tf[86]=tj,tf[87]=eT,tf[88]=e$):(eT=tf[87],e$=tf[88]),(0,n.useEffect)(eT,e$),tf[89]!==so)eI=((so?.select?.length??0)>0||"string"==typeof so?.select)&&so?.from?.databaseName&&(so?.from?.tableName||so?.metricTables)&&so?.timestampValueExpression,tf[89]=so,tf[90]=eI;else eI=tf[90];let s_=eI;tf[91]!==t6||tf[92]!==ty||tf[93]!==tj||tf[94]!==sh||tf[95]!==so||tf[96]!==sd?.id||tf[97]!==t3?(eR=()=>{let e=!!so,t=sd?.id===t3?.id,s=ty?.source===t3?.id,r="time"===t6?sh:so,a=e&&t?r:ty&&s?{...ty,dateRange:tj,timestampValueExpression:t3.timestampValueExpression,from:t3.from,connection:t3.connection}:void 0;if(a){if("time"===t6)return(0,q.O7)(a);if("number"===t6)return(0,q._t)(a);if("table"===t6)return(0,q.Z7)(a);else if("pie"===t6)return(0,q.dY)(a);return a}},tf[91]=t6,tf[92]=ty,tf[93]=tj,tf[94]=sh,tf[95]=so,tf[96]=sd?.id,tf[97]=t3,tf[98]=eR):eR=tf[98],sd?.id,tf[99]!==eR?(eO=eR(),tf[99]=eR,tf[100]=eO):eO=tf[100];let sS=eO;tf[101]!==tj?(eP=(0,q.r4)(tj),tf[101]=tj,tf[102]=eP):eP=tf[102];let sw=eP;tf[103]!==tj||tf[104]!==so||tf[105]!==s_||tf[106]!==t3?(eW=null!=t3&&null!=so&&s_?{...so,orderBy:[{ordering:"DESC",valueExpression:(0,en.AF)(t3.timestampValueExpression)}],dateRange:tj,timestampValueExpression:t3.timestampValueExpression,connection:t3.connection,from:t3.from,limit:{limit:200},select:t3?.defaultTableSelectExpression||"",filters:"string"==typeof(t=so.select)?[]:t.map(({aggCondition:e,aggConditionLanguage:t})=>null!=t&&null!=e?{type:t,condition:e}:null).filter(Boolean),filtersLogicalOperator:"OR",groupBy:void 0,granularity:void 0,having:void 0}:null,tf[103]=tj,tf[104]=so,tf[105]=s_,tf[106]=t3,tf[107]=eW):eW=tf[107];let sE=eW,[sC,sk]=(0,n.useState)(null);tf[108]!==sg||tf[109]!==tz?(eB=e=>{let{numberFormat:t,alignDateRangeToGranularity:s,fillNulls:r,compareToPreviousPeriod:a}=e;tz("numberFormat",t),tz("alignDateRangeToGranularity",s),tz("fillNulls",r),tz("compareToPreviousPeriod",a),sg()},tf[108]=sg,tf[109]=tz,tf[110]=eB):eB=tf[110];let sN=eB;tf[111]!==t3?(eH=(0,m.VO)(t3),tf[111]=t3,tf[112]=eH):eH=tf[112];let sA=eH;tf[113]!==tR?(eV=(0,r.jsx)(o.xI,{control:tR,name:"displayType",render:tp}),tf[113]=tR,tf[114]=eV):eV=tf[114],tf[115]===Symbol.for("react.memo_cache_sentinel")?(eq=(0,r.jsx)(p.E,{size:"sm",className:"text-nowrap",children:"Chart Name"}),tf[115]=eq):eq=tf[115],tf[116]!==tR?(eX=(0,r.jsxs)(b.s,{align:"center",gap:"sm",mb:"sm",children:[eq,(0,r.jsx)(eF.t4,{name:"name",control:tR,w:"100%",type:"text",placeholder:"My Chart Name","data-testid":"chart-name-input"})]}),tf[116]=tR,tf[117]=eX):eX=tf[117],tf[118]===Symbol.for("react.memo_cache_sentinel")?(eG=(0,r.jsx)(g.c,{my:"md"}),tf[118]=eG):eG=tf[118],tf[119]!==t6||tf[120]!==tZ||tf[121]!==tH||tf[122]!==sS||tf[123]!==tF||tf[124]!==tR||tf[125]!==tb||tf[126]!==t5||tf[127]!==tj||tf[128]!==tQ||tf[129]!==tP||tf[130]!==tB||tf[131]!==t0||tf[132]!==sg||tf[133]!==sl||tf[134]!==sC||tf[135]!==tM||tf[136]!==tV||tf[137]!==tK||tf[138]!==tY||tf[139]!==tz||tf[140]!==tq||tf[141]!==sA||tf[142]!==t4||tf[143]!==t3?(eK="markdown"===t6?(0,r.jsxs)("div",{children:[(0,r.jsx)(y.T,{...tM("markdown"),label:"Markdown content",placeholder:"Markdown",mb:"md",styles:{input:{minHeight:200}}}),(0,r.jsx)(v.a,{p:"md",mb:"md",children:(0,r.jsx)(ei.A,{config:{markdown:t0||"Preview"}})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(b.s,{mb:"md",align:"center",gap:"sm",justify:"space-between",children:[(0,r.jsxs)(f.Y,{children:[(0,r.jsx)(p.E,{pe:"md",size:"sm",children:"Data Source"}),(0,r.jsx)(ti.W,{size:"xs",control:tR,name:"source","data-testid":"source-selector",sourceSchemaPreview:(0,r.jsx)(tl.A,{source:t3,variant:"text"})})]}),t3&&"search"!==t6&&(0,r.jsx)(ec.A,{source:t3,config:sS})]}),tQ!==h.t2.Search&&Array.isArray(tK)?(0,r.jsxs)(r.Fragment,{children:[tB.map((e,t)=>(0,r.jsx)(tu,{control:tR,databaseName:t5??"",dateRange:tj,index:t,parentRef:sC,namePrefix:`series.${t}.`,onRemoveSeries:tV,length:tB.length,onSwapSeries:tq,onSubmit:sg,setValue:tz,connectionId:t3?.connection,showGroupBy:1===tB.length&&tQ!==h.t2.Number,showHaving:1===tB.length&&tQ===h.t2.Table,tableName:t4??"",tableSource:t3,errors:tP.series&&Array.isArray(tP.series)?tP.series[t]:void 0,clearErrors:tF},e.id)),tB.length>1&&tQ!==h.t2.Number&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.c,{mt:"md",mb:"sm"}),(0,r.jsxs)("div",{className:"gap-2 align-items-center",style:{display:"grid",gridTemplateColumns:"auto minmax(0, 1fr)"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(p.E,{me:"sm",size:"sm",style:{whiteSpace:"nowrap"},children:"Group By"})}),(0,r.jsx)("div",{children:(0,r.jsx)(Y.Z,{tableConnection:sA,control:tR,name:"groupBy",placeholder:"SQL Columns",onSubmit:sg,disableKeywordAutocomplete:!0})}),tQ===h.t2.Table&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(p.E,{me:"sm",size:"sm",style:{whiteSpace:"nowrap"},children:"Having"})}),(0,r.jsx)("div",{children:(0,r.jsx)(Y.Z,{tableConnection:sA,control:tR,name:"having",placeholder:"SQL HAVING clause (ex. count() > 100)",onSubmit:sg})})]})]})]}),(0,r.jsx)(g.c,{mt:"md",mb:"sm"}),(0,r.jsxs)(b.s,{mt:4,align:"center",justify:"space-between",children:[(0,r.jsxs)(f.Y,{gap:"xs",children:[tQ!==h.t2.Number&&tQ!==h.t2.Pie&&(0,r.jsxs)(x.$,{variant:"subtle",size:"sm",color:"gray",onClick:()=>{tH({aggFn:"count",aggCondition:"",aggConditionLanguage:"lucene",valueExpression:""})},children:[(0,r.jsx)(R.A,{size:14,className:"me-2"}),"Add Series"]}),2==tB.length&&tQ!==h.t2.Number&&(0,r.jsx)(j.d,{label:"As Ratio",size:"sm",color:"gray",variant:"subtle",onClick:()=>{tz("seriesReturnType","ratio"===tY?"column":"ratio"),sg()},checked:"ratio"===tY}),(tQ===h.t2.Line||tQ===h.t2.Number)&&tb&&!Q.VO&&(0,r.jsxs)(x.$,{variant:"subtle","data-testid":"alert-button",size:"sm",color:tZ?"red":"gray",onClick:()=>tz("alert",tZ?void 0:el.C5),children:[(0,r.jsx)(z.A,{size:14,className:"me-2"}),tZ?"Remove Alert":"Add Alert"]})]}),(0,r.jsx)(x.$,{onClick:sl,size:"compact-sm",variant:"secondary",children:"Display Settings"})]})]}):(0,r.jsxs)(b.s,{gap:"xs",direction:"column",children:[(0,r.jsx)(Y.Z,{tableConnection:sA,control:tR,name:"select",placeholder:t3?.defaultTableSelectExpression||"SELECT Columns",defaultValue:t3?.defaultTableSelectExpression,onSubmit:sg,label:"SELECT"}),(0,r.jsx)(Z.A,{tableConnection:sA,control:tR,name:"where",onSubmit:sg,onLanguageChange:e=>tz("whereLanguage",e),showLabel:!1})]})]}),tf[119]=t6,tf[120]=tZ,tf[121]=tH,tf[122]=sS,tf[123]=tF,tf[124]=tR,tf[125]=tb,tf[126]=t5,tf[127]=tj,tf[128]=tQ,tf[129]=tP,tf[130]=tB,tf[131]=t0,tf[132]=sg,tf[133]=sl,tf[134]=sC,tf[135]=tM,tf[136]=tV,tf[137]=tK,tf[138]=tY,tf[139]=tz,tf[140]=tq,tf[141]=sA,tf[142]=t4,tf[143]=t3,tf[144]=eK):eK=tf[144],tf[145]!==tZ||tf[146]!==t1||tf[147]!==tR?(eJ=tZ&&(0,r.jsx)(_.t,{my:"sm",children:(0,r.jsx)(S.B,{gap:"xs",children:(0,r.jsxs)(_.t,{px:"md",py:"sm",radius:"xs","data-testid":"alert-details",children:[(0,r.jsxs)(f.Y,{gap:"xs",justify:"space-between",children:[(0,r.jsxs)(f.Y,{gap:"xs",children:[(0,r.jsx)(p.E,{size:"sm",opacity:.7,children:"Alert when the value"}),(0,r.jsx)(c.mh,{data:(0,ea.kR)(el.cv),size:"xs",name:"alert.thresholdType",control:tR}),(0,r.jsx)(c.Q7,{min:1e-10,size:"xs",w:80,control:tR,name:"alert.threshold"}),"over",(0,r.jsx)(c.mh,{data:(0,ea.kR)(el.J_),size:"xs",name:"alert.interval",control:tR}),(0,r.jsx)(p.E,{size:"sm",opacity:.7,children:"window via"}),(0,r.jsx)(c.mh,{data:(0,ea.kR)(el.mo),size:"xs",name:"alert.channel.type",control:tR})]}),tZ?.createdBy&&(0,r.jsxs)(p.E,{size:"xs",opacity:.6,children:["Created by"," ",tZ.createdBy?.name||tZ.createdBy?.email]})]}),(0,r.jsx)(p.E,{size:"xxs",opacity:.5,mb:4,mt:"xs",children:"Send to"}),(0,r.jsx)(X.e,{control:tR,type:t1,namePrefix:"alert."})]})})}),tf[145]=tZ,tf[146]=t1,tf[147]=tR,tf[148]=eJ):eJ=tf[148],tf[149]!==sy||tf[150]!==tL||tf[151]!==t_||tf[152]!==tC?(eZ=null!=tC&&(0,r.jsx)(x.$,{"data-testid":"chart-save-button",loading:t_,variant:"primary",onClick:tL(sy),children:"Save"}),tf[149]=sy,tf[150]=tL,tf[151]=t_,tf[152]=tC,tf[153]=eZ):eZ=tf[153],tf[154]!==t_||tf[155]!==tN?(eY=null!=tN&&(0,r.jsx)(x.$,{variant:"subtle",color:"dark",onClick:tN,disabled:t_,children:"Cancel"}),tf[154]=t_,tf[155]=tN,tf[156]=eY):eY=tf[156],tf[157]!==eZ||tf[158]!==eY?(eU=(0,r.jsxs)(b.s,{gap:"sm",children:[eZ,eY]}),tf[157]=eZ,tf[158]=eY,tf[159]=eU):eU=tf[159],tf[160]!==t6||tf[161]!==tR||tf[162]!==tU||tf[163]!==sg||tf[164]!==sC||tf[165]!==sA?(eQ="table"===t6&&(0,r.jsx)("div",{style:{width:400},children:(0,r.jsx)(Y.Z,{parentRef:sC,tableConnection:sA,placeholder:"string"==typeof tU?tU:"",control:tR,name:"orderBy",disableKeywordAutocomplete:!0,onSubmit:sg,label:"ORDER BY"})}),tf[160]=t6,tf[161]=tR,tf[162]=tU,tf[163]=sg,tf[164]=sC,tf[165]=sA,tf[166]=eQ):eQ=tf[166],tf[167]!==t6||tf[168]!==tv||tf[169]!==tS||tf[170]!==tE?(e0="markdown"!==t6&&null!=tE&&null!=tv&&null!=tS&&(0,r.jsx)(U.A,{inputValue:tv,setInputValue:tE,onSearch:e=>{tS(e)},onSubmit:e=>{tS(e)}}),tf[167]=t6,tf[168]=tv,tf[169]=tS,tf[170]=tE,tf[171]=e0):e0=tf[171],tf[172]!==t6||tf[173]!==tR?(e1="time"===t6&&(0,r.jsx)(ee.F9,{control:tR,name:"granularity"}),tf[172]=t6,tf[173]=tR,tf[174]=e1):e1=tf[174],tf[175]!==t6||tf[176]!==sg?(e2="markdown"!==t6&&(0,r.jsx)(x.$,{"data-testid":"chart-run-query-button",variant:"primary",type:"submit",onClick:sg,leftSection:(0,r.jsx)(L.A,{size:16}),style:{flexShrink:0},children:"Run"}),tf[175]=t6,tf[176]=sg,tf[177]=e2):e2=tf[177],tf[178]!==tb?(e3=!Q.VO&&!tb&&(0,r.jsxs)(w.W,{width:250,children:[(0,r.jsx)(w.W.Target,{children:(0,r.jsx)(E.M,{variant:"secondary",size:"input-sm",children:(0,r.jsx)(M.A,{size:16})})}),(0,r.jsx)(w.W.Dropdown,{children:(0,r.jsx)(w.W.Item,{leftSection:(0,r.jsx)(D.A,{size:16}),onClick:()=>sx(!0),children:"Save to Dashboard"})})]}),tf[178]=tb,tf[179]=e3):e3=tf[179],tf[180]!==eQ||tf[181]!==e0||tf[182]!==e1||tf[183]!==e2||tf[184]!==e3?(e5=(0,r.jsxs)(b.s,{gap:"sm",mb:"sm",align:"center",justify:"end",children:[eQ,e0,e1,e2,e3]}),tf[180]=eQ,tf[181]=e0,tf[182]=e1,tf[183]=e2,tf[184]=e3,tf[185]=e5):e5=tf[185],tf[186]!==eU||tf[187]!==e5?(e4=(0,r.jsxs)(b.s,{justify:"space-between",mt:"sm",children:[eU,e5]}),tf[186]=eU,tf[187]=e5,tf[188]=e4):e4=tf[188],tf[189]!==eV||tf[190]!==eX||tf[191]!==eK||tf[192]!==eJ||tf[193]!==e4?(e6=(0,r.jsxs)(eo.t,{children:[eV,eX,eG,eK,eJ,e4]}),tf[189]=eV,tf[190]=eX,tf[191]=eK,tf[192]=eJ,tf[193]=e4,tf[194]=e6):e6=tf[194],tf[195]!==t6||tf[196]!==s_?(e7=s_||"markdown"===t6?void 0:(0,r.jsx)(_.t,{shadow:"xs",p:"xl",children:(0,r.jsx)(C.o,{mih:400,children:(0,r.jsx)(p.E,{size:"sm",children:"Please start by selecting a database, table, and timestamp column above and then click the play button to query data."})})}),tf[195]=t6,tf[196]=s_,tf[197]=e7):e7=tf[197],tf[198]!==t6||tf[199]!==sf||tf[200]!==so||tf[201]!==s_||tf[202]!==sb||tf[203]!==t3?(e9=s_&&null!=so&&"table"===t6&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(K.A,{config:so,getRowSearchLink:e=>(0,q.A7)({row:e,source:t3,config:so,dateRange:so.dateRange}),onSortingChange:sf,sort:sb,showMVOptimizationIndicator:!1})}),tf[198]=t6,tf[199]=sf,tf[200]=so,tf[201]=s_,tf[202]=sb,tf[203]=t3,tf[204]=e9):e9=tf[204],tf[205]!==t6||tf[206]!==tZ||tf[207]!==sh||tf[208]!==tk||tf[209]!==s_||tf[210]!==tJ?(e8=s_&&null!=sh&&"time"===t6&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(J.S,{sourceId:tJ,config:sh,onTimeRangeSelect:tk,referenceLines:tZ&&(0,X.h)({threshold:tZ.threshold,thresholdType:tZ.thresholdType}),showMVOptimizationIndicator:!1})}),tf[205]=t6,tf[206]=tZ,tf[207]=sh,tf[208]=tk,tf[209]=s_,tf[210]=tJ,tf[211]=e8):e8=tf[211],tf[212]!==t6||tf[213]!==sh||tf[214]!==s_?(te=s_&&null!=sh&&"pie"===t6&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(eM.R,{config:sh,showMVOptimizationIndicator:!1})}),tf[212]=t6,tf[213]=sh,tf[214]=s_,tf[215]=te):te=tf[215],tf[216]!==t6||tf[217]!==so||tf[218]!==s_?(tt=s_&&null!=so&&"number"===t6&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(eL.A,{config:so,showMVOptimizationIndicator:!1})}),tf[216]=t6,tf[217]=so,tf[218]=s_,tf[219]=tt):tt=tf[219],tf[220]!==t6||tf[221]!==tj||tf[222]!==so||tf[223]!==s_||tf[224]!==tJ||tf[225]!==t3?(ts=s_&&t3&&null!=so&&"search"===t6&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(eD.A,{sourceId:tJ,config:{...so,orderBy:[{ordering:"DESC",valueExpression:(0,en.AF)(t3.timestampValueExpression)}],dateRange:tj,timestampValueExpression:t3.timestampValueExpression,connection:t3.connection,from:t3.from,limit:{limit:200},select:"string"==typeof so.select&&so.select?so.select:t3?.defaultTableSelectExpression||"",groupBy:void 0,having:void 0,granularity:void 0},enabled:!0,isLive:!1,queryKeyPrefix:"search"})}),tf[220]=t6,tf[221]=tj,tf[222]=so,tf[223]=s_,tf[224]=tJ,tf[225]=t3,tf[226]=ts):ts=tf[226],tf[227]!==sS||tf[228]!==tX||tf[229]!==s_||tf[230]!==sE||tf[231]!==t7||tf[232]!==t9||tf[233]!==tJ?(tr=t7&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.c,{mt:"md"}),t9&&(0,r.jsx)(k.n,{value:tX?"sample":null,onChange:e=>tG("sample"===e),children:(0,r.jsxs)(k.n.Item,{value:"sample",children:[(0,r.jsx)(k.n.Control,{icon:(0,r.jsx)(F.A,{size:16}),children:(0,r.jsx)(p.E,{size:"sm",style:{alignSelf:"center"},children:"Sample Matched Events"})}),(0,r.jsx)(k.n.Panel,{children:null!=sE&&(0,r.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,r.jsx)(eD.A,{sourceId:tJ,config:sE,enabled:tX,isLive:!1,queryKeyPrefix:"search"})})})]})}),(0,r.jsx)(k.n,{defaultValue:"",children:(0,r.jsxs)(k.n.Item,{value:"SQL",children:[(0,r.jsx)(k.n.Control,{icon:(0,r.jsx)(O.A,{size:16}),children:(0,r.jsx)(p.E,{size:"sm",style:{alignSelf:"center"},children:"Generated SQL"})}),(0,r.jsx)(k.n.Panel,{children:s_&&null!=sS&&(0,r.jsx)(G.A,{config:sS})})]})})]}),tf[227]=sS,tf[228]=tX,tf[229]=s_,tf[230]=sE,tf[231]=t7,tf[232]=t9,tf[233]=tJ,tf[234]=tr):tr=tf[234],tf[235]===Symbol.for("react.memo_cache_sentinel")?(ta=()=>sx(!1),tf[235]=ta):ta=tf[235],tf[236]!==ty||tf[237]!==sp?(to=(0,r.jsx)(tn,{chartConfig:ty,opened:sp,onClose:ta}),tf[236]=ty,tf[237]=sp,tf[238]=to):to=tf[238];let sT=tb?void 0:sw;return tf[239]!==si||tf[240]!==sr||tf[241]!==sa||tf[242]!==tQ||tf[243]!==sN||tf[244]!==sT?(th=(0,r.jsx)(ez,{opened:sa,settings:sr,previousDateRange:sT,displayType:tQ,onChange:sN,onClose:si}),tf[239]=si,tf[240]=sr,tf[241]=sa,tf[242]=tQ,tf[243]=sN,tf[244]=sT,tf[245]=th):th=tf[245],tf[246]!==tT||tf[247]!==e6||tf[248]!==e7||tf[249]!==e9||tf[250]!==e8||tf[251]!==te||tf[252]!==tt||tf[253]!==ts||tf[254]!==tr||tf[255]!==to||tf[256]!==th?(tg=(0,r.jsxs)("div",{ref:sk,"data-testid":tT,children:[e6,e7,e9,e8,te,tt,ts,tr,to,th]}),tf[246]=tT,tf[247]=e6,tf[248]=e7,tf[249]=e9,tf[250]=e8,tf[251]=te,tf[252]=tt,tf[253]=ts,tf[254]=tr,tf[255]=to,tf[256]=th,tf[257]=tg):tg=tf[257],tg}function tp(e){let{field:t}=e,{onChange:s,value:a}=t;return(0,r.jsx)(N.t,{value:a,onChange:s,radius:"xs",mb:"md","data-testid":"chart-type-input",children:(0,r.jsxs)(N.t.List,{children:[(0,r.jsx)(N.t.Tab,{value:h.t2.Line,leftSection:(0,r.jsx)(P.A,{size:16}),children:"Line/Bar"}),(0,r.jsx)(N.t.Tab,{value:h.t2.Table,leftSection:(0,r.jsx)(W.A,{size:16}),children:"Table"}),(0,r.jsx)(N.t.Tab,{value:h.t2.Number,leftSection:(0,r.jsx)(B.A,{size:16}),children:"Number"}),(0,r.jsx)(N.t.Tab,{value:h.t2.Pie,leftSection:(0,r.jsx)(H.A,{size:16}),children:"Pie"}),(0,r.jsx)(N.t.Tab,{value:h.t2.Search,leftSection:(0,r.jsx)(F.A,{size:16}),children:"Search"}),(0,r.jsx)(N.t.Tab,{value:h.t2.Markdown,leftSection:(0,r.jsx)(V.A,{size:16}),children:"Markdown"})]})})}function tx(e){return{...e,aggConditionLanguage:e.aggConditionLanguage??(0,Z.S)()??"lucene"}}},17273:(e,t,s)=>{"use strict";s.d(t,{A:()=>x,S:()=>p});var r=s(6029),a=s(1909),n=s(60481),l=s(78253),i=s(8468),o=s(74860),c=s(24196),d=s(46466),u=s(36011),m=s.n(u);let h="hdx-search-where-language";function p(){try{let e=window.localStorage.getItem(h);if("sql"===e||"lucene"===e)return e}catch{}return null}function x({tableConnection:e,tableConnections:t,control:s,name:u,onSubmit:p,onLanguageChange:x,enableHotkey:g,size:f="sm",showLabel:b=!0,label:y="WHERE",allowMultiline:v=!0,sqlQueryHistoryType:j,luceneQueryHistoryType:_,sqlPlaceholder:S="SQL WHERE clause (ex. column = 'foo')",lucenePlaceholder:w="Search your events w/ Lucene ex. column:foo",width:E="100%",maxWidth:C="100%",minWidth:k,"data-testid":N,additionalSuggestions:A,languageName:T=`${u}Language`}){let{field:$}=(0,a.as)({control:s,name:T}),I=$.value??"lucene",R="sql"===I,z=e?{tableConnection:e}:{tableConnections:t},L="xs"===f?m().sizeXs:m().sizeSm;return(0,r.jsxs)(n.a,{className:m().root,style:{width:E,maxWidth:C,minWidth:k},children:[(0,r.jsx)(l.s,{align:"center",className:`${m().languageSwitch} ${L}`,"data-testid":"where-language-switch",onMouseDown:e=>e.preventDefault(),children:(0,r.jsx)(o.A,{language:I,onLanguageChange:e=>{try{window.localStorage.setItem(h,e)}catch{}$.onChange(e),x?.(e)}})}),(0,r.jsxs)(n.a,{className:`${m().inputWrapper} ${L}`,children:[R?(0,r.jsx)(d.Z,{...z,control:s,name:u,placeholder:S,onSubmit:p,label:b?y:void 0,queryHistoryType:j,enableHotkey:g,allowMultiline:v,size:f,additionalSuggestions:A}):(0,r.jsx)(c.A,{...z,control:s,name:u,onSubmit:p,placeholder:w,queryHistoryType:_,enableHotkey:g,size:f,"data-testid":N,additionalSuggestions:A}),g&&(0,r.jsx)(n.a,{className:m().shortcutHint,title:"Press / or s to focus search","aria-hidden":!0,children:(0,r.jsx)(i.u,{size:"xs",children:"/"})})]})]})}},18006:(e,t,s)=>{"use strict";s.d(t,{N4:()=>n,OH:()=>l,z4:()=>a});var r=s(37901);function a(e=[]){return e.map(({sqlExpression:e,alias:t})=>({valueExpression:e,alias:t||e}))}function n(e,t=[],s,a){let l=new Map,i=new Map,o=new Map,c=(0,r.bn)(a);try{for(let e of s)for(let{sqlExpression:s,luceneExpression:r,alias:a}of t){let t=a||s,n=c.includes(s.split(".")[0])?`toString(${s})`:s;i.set(t,n),r&&o.set(t,r);let d=e[t];d&&"string"==typeof d&&(l.has(t)||l.set(t,new Set),l.get(t).add(d))}}catch(e){console.error("Error extracting attributes from data",e)}return Array.from(l.entries()).flatMap(([t,s])=>[...s].map(s=>({displayedKey:t,value:s,sql:i.get(t),lucene:o.get(t),source:e})))}function l(e){try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}},20699:e=>{e.exports={timelineRow:"TimelineChart_timelineRow__qebNk",timelineRowActive:"TimelineChart_timelineRowActive__V6ZZf",labelContainer:"TimelineChart_labelContainer__6r6Eb"}},24196:(e,t,s)=>{"use strict";s.d(t,{A:()=>$});var r=s(6029),a=s(75155),n=s(55729),l=s(1909),i=s(66692),o=s(54167),c=s(3635),d=s(21604),u=s(78550),m=s(92917);let h=Date.now();function p(e){let{databaseName:t,tableName:s,connectionId:r}=e;return{connection:r,from:{databaseName:t,tableName:s},timestampValueExpression:"",select:"",where:"",dateRange:[new Date(h-432e5),new Date(h)]}}function x(e){return{value:e,label:e}}function g(e){return null!==e.jsType}var f=s(75828),b=s.n(f),y=s(1885),v=s(37659),j=s(94193),_=s(8737),S=s(74860),w=s(45862),E=s.n(w);function C({inputRef:e,value:t,onChange:s,placeholder:a="Search your events for anything...",autocompleteOptions:l,size:i="sm",aboveSuggestions:o,belowSuggestions:c,showSuggestionsOnEmpty:d,suggestionsHeader:u="Properties",zIndex:h=999,onLanguageChange:p,language:x,onSubmit:g,queryHistoryType:f,"data-testid":w}){let[C,k]=(0,n.useState)(!1),[N,A]=(0,n.useState)(!1),T=(0,n.useCallback)(e=>{k(e),A(e)},[k]),[$,I]=(0,n.useState)("auto"),[R,z]=(0,n.useState)(720),[L,M]=(0,n.useState)(-1),[D,F]=(0,n.useState)(-1),[O,P]=(0,m.mk)(f),W=(0,n.useMemo)(()=>f&&O?O.map(e=>({value:e,label:e})):[],[O,f]),B=null!=t&&0===t.length&&W.length>0&&f,H=(0,n.useMemo)(()=>new y.A(l??[],{keys:["value"],threshold:0,ignoreLocation:!0}),[l]),V=(0,m.d7)(t??"",200),q=(0,n.useMemo)(()=>{let e=V.split(" "),t=e[e.length-1];return 0===t.length&&d?l??[]:H.search(t).map(e=>e.item)},[V,H,l,d]),X=r=>{M(-1),s(null==t?r:t.split(" ").slice(0,-1).join(" ")+`${t.split(" ").length>1?" ":""}${r}`),e.current?.focus()},G=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{G.current&&I(G.current.clientWidth),e.current&&z(e.current.clientWidth)},[x,p,e]);let K="xs"===i?32:"lg"===i?44:38;return(0,r.jsx)("div",{className:E().root,style:{"--autocomplete-base-height":`${K}px`},"data-expanded":C?"true":void 0,children:(0,r.jsxs)(v.A,{opened:N,onChange:A,position:"bottom-start",offset:8,width:"target",withinPortal:!0,closeOnClickOutside:!0,closeOnEscape:!0,styles:{dropdown:{maxWidth:R>300?R:720,width:"100%",zIndex:h}},children:[(0,r.jsx)(v.A.Target,{children:(0,r.jsx)(j.T,{ref:e,placeholder:a,className:b()(E().textarea,!C&&E().collapseFade,C&&E().focused),value:t,size:i,autosize:!0,minRows:1,maxRows:C?4:1,"data-testid":w,onChange:e=>s(e.target.value),onFocus:()=>{M(-1),F(-1),T(!0)},onBlur:()=>{M(-1),F(-1),T(!1)},onKeyDown:e=>{"Escape"===e.key&&e.target instanceof HTMLTextAreaElement&&(e.preventDefault(),A(!1),e.target.blur()),"Tab"===e.key&&e.target instanceof HTMLTextAreaElement&&q.length>0&&L<q.length&&L>=0&&(e.preventDefault(),X(q[L].value)),"Enter"===e.key&&e.target instanceof HTMLTextAreaElement&&(q.length>0&&L<q.length&&L>=0?(e.preventDefault(),X(q[L].value)):e.shiftKey||(e.preventDefault(),f&&t&&P(t),g?.())),"ArrowDown"===e.key&&e.target instanceof HTMLTextAreaElement&&q.length>0&&M(Math.min(L+1,q.length-1,9)),"ArrowUp"===e.key&&e.target instanceof HTMLTextAreaElement&&q.length>0&&M(Math.max(L-1,0))},rightSectionWidth:$,rightSection:null!=x&&null!=p?(0,r.jsx)("div",{ref:G,children:(0,r.jsx)(S.A,{language:x,onLanguageChange:p})}):void 0})}),(0,r.jsxs)(v.A.Dropdown,{className:E().dropdown,children:[null!=o&&(0,r.jsx)("div",{className:E().aboveSuggestions,children:o}),(0,r.jsx)("div",{children:q.length>0&&(0,r.jsxs)("div",{className:E().suggestionsSection,children:[(0,r.jsxs)("div",{className:E().suggestionsHeaderRow,children:[(0,r.jsx)("div",{className:E().suggestionsHeader,children:u}),q.length>10&&(0,r.jsxs)("div",{className:E().suggestionsLimit,children:["(Showing Top ",10,")"]})]}),q.slice(0,10).map(({value:e,label:t},s)=>(0,r.jsx)("div",{className:b()(E().suggestionItem,L===s&&E().selected),role:"button",onMouseOver:()=>{M(s)},onClick:()=>{X(e)},children:(0,r.jsx)("span",{className:E().suggestionLabel,children:t})},e))]})}),null!=c&&(0,r.jsx)("div",{className:E().belowSuggestions,children:c}),(0,r.jsx)("div",{children:B&&(0,r.jsxs)("div",{className:E().historySection,children:[(0,r.jsx)("div",{className:E().historyTitle,children:"Search History:"}),W.map(({value:e,label:t},a)=>(0,r.jsx)(_.N,{className:b()(E().historyItem,D===a&&E().selected),onMouseOver:()=>F(a),onClick:()=>{F(-1),s(e),P(e),A(!1),g?.()},children:(0,r.jsx)("span",{className:E().historyItemLabel,children:t})},e))]})})]})]})})}var k=s(67398),N=s.n(k);class A{formatFieldValue(e){return e.path.join(".")}formatFieldLabel(e){return`${e.path.join(".")} (${e.jsType})`}formatKeyValPair(e,t){return`${e}:"${t}"`}}let T=new A;function $(e){let t,s,h,f,b,y,v,j,_,S,w,E,k,A,$,I,R,z,L,M,D,F,O,P,W,B,H,V,q,X,G,K,J,Z,Y,U,Q,ee,et=(0,a.c)(78);et[0]!==e?({tableConnection:w,tableConnections:E,placeholder:_,size:S,zIndex:k,language:f,onLanguageChange:b,enableHotkey:h,onSubmit:y,additionalSuggestions:t,queryHistoryType:j,"data-testid":s,...v}=e,et[0]=e,et[1]=t,et[2]=s,et[3]=h,et[4]=f,et[5]=b,et[6]=y,et[7]=v,et[8]=j,et[9]=_,et[10]=S,et[11]=w,et[12]=E,et[13]=k):(t=et[1],s=et[2],h=et[3],f=et[4],b=et[5],y=et[6],v=et[7],j=et[8],_=et[9],S=et[10],w=et[11],E=et[12],k=et[13]);let es=void 0===_?"Search your events for anything...":_,er=void 0===S?"sm":S,{field:ea}=(0,l.as)(v),{onChange:en,value:el}=ea,ei=(0,u.Ge)(),eo=(0,n.useRef)(null),[ec,ed]=(0,n.useState)(""),eu=w||E;et[14]!==t||et[15]!==eu?(A={tableConnection:eu,additionalSuggestions:t},et[14]=t,et[15]=eu,et[16]=A):A=et[16];let em=function(e,t,s){let r,l,i,o,c,d,h,f,b,y,v,j,_,S,w=(0,a.c)(39),{tableConnection:E,additionalSuggestions:C}=s;w[0]!==E?(r=E?Array.isArray(E)?E:[E]:[],w[0]=E,w[1]=r):r=w[1];let{data:k}=(0,u.Sh)(r);if(w[2]!==C||w[3]!==k||w[4]!==e){let t=(k??[]).filter(g);l=new Map,i=[...t.map(t=>{let s={value:e.formatFieldValue(t),label:e.formatFieldLabel(t)};return l.set(s.value,t),s}),...C?.map(x)??[]],w[2]=C,w[3]=k,w[4]=e,w[5]=l,w[6]=i}else l=w[5],i=w[6];let N=i;w[7]!==l||w[8]!==N?(o={fieldCompleteOptions:N,fieldCompleteMap:l},w[7]=l,w[8]=N,w[9]=o):o=w[9];let{fieldCompleteOptions:A,fieldCompleteMap:T}=o,[$,I]=(0,n.useState)(null);w[10]!==T||w[11]!==t?(c=()=>{let e=T.get(t);e&&I(e)},d=[T,t],w[10]=T,w[11]=t,w[12]=c,w[13]=d):(c=w[12],d=w[13]),(0,n.useEffect)(c,d),w[14]!==e||w[15]!==$||w[16]!==t?(h=()=>{$&&(t.startsWith(e.formatFieldValue($))||I(null))},f=[$,I,t,e],w[14]=e,w[15]=$,w[16]=t,w[17]=h,w[18]=f):(h=w[17],f=w[18]),(0,n.useEffect)(h,f);let R=Array.isArray(E)?E.length>0?E[0]:void 0:E;w[19]!==R?(b=R??{tableName:"",databaseName:"",connectionId:""},w[19]=R,w[20]=b):b=w[20];let{data:z}=(0,u.n$)(b);w[21]!==z||w[22]!==$?(y=$&&z?[(0,m.uc)($.path,z)]:[],w[21]=z,w[22]=$,w[23]=y):y=w[23];let L=y;w[24]!==E?(v=(0,m.$r)(E).map(p),w[24]=E,w[25]=v):v=w[25];let M=v;w[26]!==M||w[27]!==L?(j={chartConfigs:M,keys:L},w[26]=M,w[27]=L,w[28]=j):j=w[28];let{data:D}=(0,u.nT)(j);e:{let t;if(!D||!$){_=A;break e}if(w[29]!==e||w[30]!==$||w[31]!==D){let s;w[33]!==e||w[34]!==$?(s=t=>t.value.flatMap(t=>{if("string"==typeof t){let s=e.formatKeyValPair(e.formatFieldValue($),t);return[{value:s,label:s}]}if("object"!=typeof t)return[];{let s=[];for(let[r,a]of Object.entries(t)){if("string"!=typeof r||"string"!=typeof a)return console.error("unknown type for autocomplete object ",t),[];let n=structuredClone($);n.path.push(r);let l=e.formatKeyValPair(e.formatFieldValue(n),a);s.push({value:l,label:l})}return s}}),w[33]=e,w[34]=$,w[35]=s):s=w[35],t=D.flatMap(s),w[29]=e,w[30]=$,w[31]=D,w[32]=t}else t=w[32];_=t}let F=_;return w[36]!==A||w[37]!==F?(S=(0,u.Ii)([A,F]),w[36]=A,w[37]=F,w[38]=S):S=w[38],S}(T,null!=el?`${el}`:"",A);et[17]!==ei||et[18]!==w||et[19]!==el?($=()=>{w&&(0,o.oU)({query:el,tableConnection:w,metadata:ei}).then(e=>{ed(e)})},I=[el,w,ei],et[17]=ei,et[18]=w,et[19]=el,et[20]=$,et[21]=I):($=et[20],I=et[21]),(0,n.useEffect)($,I),et[22]===Symbol.for("react.memo_cache_sentinel")?(R=["/","s"],et[22]=R):R=et[22],et[23]!==h?(z=()=>{h&&eo.current?.focus()},et[23]=h,et[24]=z):z=et[24],et[25]===Symbol.for("react.memo_cache_sentinel")?(L={preventDefault:!0,enableOnFormTags:!1,enableOnContentEditable:!1},et[25]=L):L=et[25],et[26]!==h?(M=[h],et[26]=h,et[27]=M):M=et[27],(0,i.vC)(R,z,L,M),et[28]===Symbol.for("react.memo_cache_sentinel")?(D=(0,r.jsx)("div",{className:N().searchingHeader,children:"Searching for:"}),et[28]=D):D=et[28];let eh=""===ec?"Matching all events, enter a query to search.":ec;return et[29]!==eh?(F=(0,r.jsxs)(r.Fragment,{children:[D,(0,r.jsx)("div",{className:N().searchingDescription,children:eh})]}),et[29]=eh,et[30]=F):F=et[30],et[31]===Symbol.for("react.memo_cache_sentinel")?(O=(0,r.jsx)("div",{className:N().examplesLabel,children:"Examples:"}),et[31]=O):O=et[31],et[32]===Symbol.for("react.memo_cache_sentinel")?(P=(0,r.jsx)("span",{className:N().exampleLabel,children:"Full Text:"}),et[32]=P):P=et[32],et[33]!==en||et[34]!==el?(W=(0,r.jsxs)("div",{className:N().exampleRow,children:[P,(0,r.jsx)("code",{className:N().exampleCode,role:"button",onClick:()=>{en(el+(el.length>0?" ":"")+"my log")},children:"my log"})]}),et[33]=en,et[34]=el,et[35]=W):W=et[35],et[36]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.jsx)("span",{className:N().exampleLabel,children:"Substring:"}),et[36]=B):B=et[36],et[37]!==en||et[38]!==el?(H=(0,r.jsxs)("div",{className:N().exampleRow,children:[B,(0,r.jsx)("code",{className:N().exampleCode,role:"button",onClick:()=>{en(el+(el.length>0?" ":"")+"*err*")},children:"*err*"})]}),et[37]=en,et[38]=el,et[39]=H):H=et[39],et[40]===Symbol.for("react.memo_cache_sentinel")?(V=(0,r.jsx)("span",{className:N().exampleLabel,children:"Exact:"}),et[40]=V):V=et[40],et[41]!==en||et[42]!==el?(q=(0,r.jsxs)("div",{className:N().exampleRow,children:[V,(0,r.jsxs)("code",{className:N().exampleCode,role:"button",onClick:()=>{en(el+(el.length>0?" ":"")+'level:"info"')},children:["level:",'"',"info",'"']})]}),et[41]=en,et[42]=el,et[43]=q):q=et[43],et[44]===Symbol.for("react.memo_cache_sentinel")?(X=(0,r.jsx)("span",{className:N().exampleLabel,children:"Not:"}),et[44]=X):X=et[44],et[45]!==en||et[46]!==el?(G=(0,r.jsxs)("div",{className:N().exampleRow,children:[X,(0,r.jsx)("code",{className:N().exampleCode,role:"button",onClick:()=>{en(el+(el.length>0?" ":"")+"-level:info")},children:"-level:info"})]}),et[45]=en,et[46]=el,et[47]=G):G=et[47],et[48]===Symbol.for("react.memo_cache_sentinel")?(K=(0,r.jsx)("span",{className:N().exampleLabel,children:"Existence:"}),et[48]=K):K=et[48],et[49]!==en||et[50]!==el?(J=(0,r.jsxs)("div",{className:N().exampleRow,children:[K,(0,r.jsx)("code",{className:N().exampleCode,role:"button",onClick:()=>{en(el+(el.length>0?" ":"")+"service:*")},children:"service:*"})]}),et[49]=en,et[50]=el,et[51]=J):J=et[51],et[52]===Symbol.for("react.memo_cache_sentinel")?(Z=(0,r.jsx)("span",{className:N().exampleLabel,children:"Boolean:"}),et[52]=Z):Z=et[52],et[53]!==en||et[54]!==el?(Y=(0,r.jsxs)("div",{className:N().exampleRow,children:[Z,(0,r.jsx)("code",{className:N().exampleCode,role:"button",onClick:()=>{en(el+(el.length>0?" ":"")+'("foo" OR "bar")')},children:"(foo OR bar)"})]}),et[53]=en,et[54]=el,et[55]=Y):Y=et[55],et[56]===Symbol.for("react.memo_cache_sentinel")?(U=(0,r.jsx)("a",{className:N().docsLink,target:"_blank",href:"https://clickhouse.com/docs/use-cases/observability/clickstack/search",rel:"noreferrer",children:(0,r.jsxs)(c.Y,{gap:5,children:[(0,r.jsx)(d.A,{size:14}),(0,r.jsx)("span",{children:"Docs"})]})}),et[56]=U):U=et[56],et[57]!==W||et[58]!==H||et[59]!==q||et[60]!==G||et[61]!==J||et[62]!==Y?(Q=(0,r.jsxs)(r.Fragment,{children:[O,W,H,q,G,J,Y,U]}),et[57]=W,et[58]=H,et[59]=q,et[60]=G,et[61]=J,et[62]=Y,et[63]=Q):Q=et[63],et[64]!==em||et[65]!==s||et[66]!==f||et[67]!==en||et[68]!==b||et[69]!==y||et[70]!==es||et[71]!==j||et[72]!==er||et[73]!==F||et[74]!==Q||et[75]!==el||et[76]!==k?(ee=(0,r.jsx)(C,{inputRef:eo,value:el,onChange:en,placeholder:es,autocompleteOptions:em,size:er,zIndex:k,language:f,onLanguageChange:b,onSubmit:y,queryHistoryType:j,"data-testid":s,aboveSuggestions:F,belowSuggestions:Q}),et[64]=em,et[65]=s,et[66]=f,et[67]=en,et[68]=b,et[69]=y,et[70]=es,et[71]=j,et[72]=er,et[73]=F,et[74]=Q,et[75]=el,et[76]=k,et[77]=ee):ee=et[77],ee}},24885:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(55729);let a=function(e,t="right"){let[s,a]=(0,r.useState)(e),n=(0,r.useRef)(0),l=(0,r.useRef)(0),i="top"===t||"bottom"===t,o=i?"clientY":"clientX",c="right"===t||"top"===t?-1:1,d=(0,r.useCallback)(e=>{let t=i?window.innerHeight:window.innerWidth,s=e[o]-n.current,r=i?window.innerHeight:document.body.offsetWidth;a(Math.min(Math.max(10,l.current+s/t*100*c),(r-25)/t*100))},[i,o,c]),u=(0,r.useCallback)(()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d]),m=(0,r.useCallback)(e=>{e.preventDefault(),n.current=e[o],l.current=s,document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)},[o,s,d,u]);return(0,r.useEffect)(()=>()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d,u]),{size:s,startResize:m}}},25156:()=>{},26355:(e,t,s)=>{"use strict";s.d(t,{A:()=>L});var r=s(6029),a=s(75155),n=s(55729),l=s(75828),i=s.n(l),o=s(70921),c=s(67549),d=s(40399),u=s(91544),m=s.n(u),h=s(59513),p=s.n(h),x=s(77494),g=s.n(x),f=s(97554),b=s.n(f),y=s(64022),v=s.n(y),j=s(84450),_=s.n(j),S=s(22273),w=s(33958),E=s(88302),C=s(74805),k=s(65723),N=s.n(k);let A=(0,o.eU)({normallyExpanded:!1}),T=n.memo(n.forwardRef((e,t)=>{let s=(0,a.c)(19),{value:n}=e;if(g()(n)){let e;return s[0]!==t?(e=(0,r.jsx)("span",{ref:t,className:N().null,children:"null"}),s[0]=t,s[1]=e):e=s[1],e}if(_()(n)){let e;return s[2]!==t||s[3]!==n?(e=(0,r.jsx)("span",{ref:t,className:N().string,children:n}),s[2]=t,s[3]=n,s[4]=e):e=s[4],e}if(b()(n)){let e;return s[5]!==t||s[6]!==n?(e=(0,r.jsx)("span",{ref:t,className:N().number,children:n}),s[5]=t,s[6]=n,s[7]=e):e=s[7],e}if(p()(n)){let e,a=n?"true":"false";return s[8]!==t||s[9]!==a?(e=(0,r.jsx)("span",{ref:t,className:N().boolean,children:a}),s[8]=t,s[9]=a,s[10]=e):e=s[10],e}if(v()(n)){let e,a;return s[11]!==n?(e=Object.keys(n),s[11]=n,s[12]=e):e=s[12],s[13]!==t||s[14]!==e.length?(a=(0,r.jsxs)("span",{ref:t,className:N().object,children:["{}"," ",e.length," keys"]}),s[13]=t,s[14]=e.length,s[15]=a):a=s[15],a}if(m()(n)){let e;return s[16]!==t||s[17]!==n.length?(e=(0,r.jsxs)("span",{ref:t,className:N().array,children:["[]"," ",n.length," items"]}),s[16]=t,s[17]=n.length,s[18]=e):e=s[18],e}return null})),$=n.memo(e=>{let t,s,n,l=(0,a.c)(12),{keyName:i,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}=e,{getLineActions:h}=(0,c.md)(A);e:{let e;if(h){let e;l[0]!==h||l[1]!==u||l[2]!==i||l[3]!==o||l[4]!==m||l[5]!==d?(e=h({key:i,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}),l[0]=h,l[1]=u,l[2]=i,l[3]=o,l[4]=m,l[5]=d,l[6]=e):e=l[6],t=e;break e}l[7]===Symbol.for("react.memo_cache_sentinel")?(e=[],l[7]=e):e=l[7],t=e}let p=t;return l[8]!==p?(s=p.map(M),l[8]=p,l[9]=s):s=l[9],l[10]!==s?(n=(0,r.jsx)("div",{className:N().lineMenu,children:s}),l[10]=s,l[11]=n):n=l[11],n}),I=n.memo(({keyName:e,keyPath:t,value:s,disableMenu:a,isInParsedJson:l=!1,parsedJsonRootPath:o=[]})=>{let{normallyExpanded:d}=(0,c.md)(A),{ref:u,hovered:h}=(0,S.M)(),p=n.useMemo(()=>{if(!_()(s))return!1;try{if(s.startsWith("{")&&s.endsWith("}")||s.startsWith("[")&&s.endsWith("]"))return!!JSON.parse(s)}catch(e){return!1}},[s]),[x,g]=n.useState(d&&!p);n.useEffect(()=>{g(d&&!p)},[p,d]);let f=n.useMemo(()=>v()(s)&&Object.keys(s).length>0||m()(s)&&s.length>0||p,[p,s]),b=n.useCallback(()=>{f&&g(e=>!e)},[f]),y=n.useMemo(()=>{if(p)try{return JSON.parse(s)}catch(e){return null}return s},[p,s]),j=t.length,k=n.useMemo(()=>[...t,e],[e,t]),I=l||p,z=n.useMemo(()=>p?k:o,[p,k,o]),L=n.useRef(null),[M,D]=n.useState(!1),F=n.useCallback(()=>{D(!0)},[]),O=n.useCallback(()=>{D(!1)},[]);return n.useEffect(()=>{let e=L.current;return e?.addEventListener("selectstart",F),e?.addEventListener("mouseup",O),()=>{e?.removeEventListener("selectstart",F),e?.removeEventListener("mouseup",O)}},[O,F]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{ref:u,onClick:b,className:i()(N().line,{[N().nestedLine]:j>0,[N().expanded]:x,[N().expandable]:f}),style:{marginLeft:16*j},children:[(0,r.jsx)("div",{className:N().keyContainer,children:(0,r.jsxs)("div",{className:N().key,children:[f&&(x?(0,r.jsx)(w.A,{size:10}):(0,r.jsx)(E.A,{size:10})),e,(0,r.jsx)("div",{className:N().hoverContent,children:(0,r.jsx)(C.A,{size:14})})]})}),(0,r.jsx)("div",{className:N().valueContainer,children:p?x?(0,r.jsxs)("div",{className:N().object,children:["{}"," Parsed JSON"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T,{value:s,ref:L}),(0,r.jsx)("div",{className:N().jsonBtn,children:"Expand JSON"})]}):(0,r.jsx)(T,{value:s,ref:L})}),h&&!a&&!M&&(0,r.jsx)($,{keyName:e,keyPath:k,value:s,isInParsedJson:l,parsedJsonRootPath:o})]},e),x&&f&&(0,r.jsx)(R,{data:y,keyPath:k,disableMenu:a,isInParsedJson:I,parsedJsonRootPath:z})]})});function R(e){let t,s,l,o,c,d,u,m=(0,a.c)(22),{data:h,keyPath:p,disableMenu:x,isInParsedJson:g,parsedJsonRootPath:f}=e;m[0]!==p?(t=void 0===p?[]:p,m[0]=p,m[1]=t):t=m[1];let b=t,y=void 0!==x&&x,v=void 0!==g&&g;m[2]!==f?(s=void 0===f?[]:f,m[2]=f,m[3]=s):s=m[3];let j=s,[_,S]=n.useState(!1);m[4]!==h?(l=Object.keys(h),m[4]=h,m[5]=l):l=m[5];let w=l.length;m[6]!==h||m[7]!==_?(o=_?Object.entries(h):Object.entries(h).slice(0,50),m[6]=h,m[7]=_,m[8]=o):o=m[8];let E=o,C=b?.length||0;return m[9]!==y||m[10]!==v||m[11]!==b||m[12]!==j||m[13]!==E?(c=E.map(e=>{let[t,s]=e;return(0,r.jsx)(I,{keyName:t,value:s,keyPath:b,disableMenu:y,isInParsedJson:v,parsedJsonRootPath:j},t)}),m[9]=y,m[10]=v,m[11]=b,m[12]=j,m[13]=E,m[14]=c):c=m[14],m[15]!==_||m[16]!==C||m[17]!==w?(d=w>50&&!_&&(0,r.jsx)("div",{className:i()(N().line,N().nestedLine,N().expandable),style:{marginLeft:16*C},onClick:()=>S(!0),children:(0,r.jsx)("div",{className:N().keyContainer,children:(0,r.jsxs)("div",{className:N().jsonBtn,children:["Expand ",w-50," more properties"]})})}),m[15]=_,m[16]=C,m[17]=w,m[18]=d):d=m[18],m[19]!==d||m[20]!==c?(u=(0,r.jsxs)(r.Fragment,{children:[c,d]}),m[19]=d,m[20]=c,m[21]=u):u=m[21],u}let z=e=>{let t,s,r,l=(0,a.c)(6),{children:i,initialValues:o}=e;l[0]!==o?(t=[[A,o]],l[0]=o,l[1]=t):t=l[1],(0,d.RH)(t);let u=(0,c.Xr)(A);return l[2]!==o||l[3]!==u?(s=()=>{u(o)},r=[o,u],l[2]=o,l[3]=u,l[4]=s,l[5]=r):(s=l[4],r=l[5]),n.useEffect(s,r),i},L=e=>{let t,s,n,l,o,d,u=(0,a.c)(17),{data:m,normallyExpanded:h,tabulate:p,lineWrap:x,getLineActions:g}=e,f=void 0!==h&&h,b=void 0!==p&&p;u[0]!==m?(t=Object.keys(m),u[0]=m,u[1]=t):t=u[1];let y=0===t.length;return u[2]!==g||u[3]!==f?(s={normallyExpanded:f,getLineActions:g},u[2]=g,u[3]=f,u[4]=s):s=u[4],u[5]!==x||u[6]!==b?(n=i()(N().container,{[N().withTabulate]:b,[N().withLineWrap]:x}),u[5]=x,u[6]=b,u[7]=n):n=u[7],u[8]!==m||u[9]!==y?(l=y?(0,r.jsx)("div",{children:"Empty"}):(0,r.jsx)(R,{data:m}),u[8]=m,u[9]=y,u[10]=l):l=u[10],u[11]!==n||u[12]!==l?(o=(0,r.jsx)("div",{className:n,children:l}),u[11]=n,u[12]=l,u[13]=o):o=u[13],u[14]!==s||u[15]!==o?(d=(0,r.jsx)(c.Kq,{children:(0,r.jsx)(z,{initialValues:s,children:o})}),u[14]=s,u[15]=o,u[16]=d):d=u[16],d};function M(e){return(0,r.jsx)("button",{title:e.title,className:N().lineMenuBtn,onClick:t=>{e.onClick(),t.stopPropagation()},children:e.label},e.key)}},26674:(e,t,s)=>{"use strict";s.d(t,{S:()=>a,Y:()=>n});var r=s(55729);let a=(0,r.createContext)(0);function n(){return(0,r.useContext)(a)}},26837:(e,t,s)=>{"use strict";s.d(t,{W:()=>eS});var r=s(6029),a=s(55729),n=s(75155),l=s(84450),i=s.n(l),o=s(16943),c=s.n(o),d=s(82641),u=s(60481),m=s(45005),h=s(43517),p=s(78253),x=s(81973),g=s(18006),f=s(37901),b=s(65081),y=s(50374),v=s(64441),j=s(94937),_=s(75828),S=s.n(_),w=s(7913),E=s(63085),C=s(25062),k=s(94720),N=s(3635),A=s(70114),T=s(23474),$=s(54134),I=s(58333),R=s(7565),z=s(94364),L=s(72075),M=s(66773),D=s.n(M);let F=e=>{let t,s,a,l,i,o,c,d=(0,n.c)(19),{filename:u,function:m,lineno:h,colno:p,isLoading:x}=e,g=x?.8:1,f=x?"blur(1px)":"none";return d[0]!==g||d[1]!==f?(t={opacity:g,filter:f},d[0]=g,d[1]=f,d[2]=t):t=d[2],d[3]!==p||d[4]!==h?(s=(0,r.jsxs)("span",{children:[":",h,":",p]}),d[3]=p,d[4]=h,d[5]=s):s=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)("span",{children:" in "}),d[6]=a):a=d[6],d[7]!==m?(l=m&&(0,r.jsx)("span",{style:{background:"#ffffff10",padding:"0 4px",borderRadius:4},children:m}),d[7]=m,d[8]=l):l=d[8],d[9]!==u||d[10]!==t||d[11]!==s||d[12]!==l?(i=(0,r.jsxs)("div",{className:" fs-8",style:t,children:[u,s,a,l]}),d[9]=u,d[10]=t,d[11]=s,d[12]=l,d[13]=i):i=d[13],d[14]!==x?(o=x&&(0,r.jsx)(k.a,{size:"xs",color:"gray"}),d[14]=x,d[15]=o):o=d[15],d[16]!==i||d[17]!==o?(c=(0,r.jsxs)(N.Y,{gap:"xs",display:"inline-flex",children:[i,o]}),d[16]=i,d[17]=o,d[18]=c):c=d[18],c},O=e=>{let t,s,l,i,o,c,d=(0,n.c)(15),{title:u,children:m,initiallyCollapsed:h}=e,[p,x]=a.useState(h??!1);return d[0]!==p?(t=()=>x(!p),s=p?(0,r.jsx)(A.A,{size:14,className:"me-2"}):(0,r.jsx)(T.A,{size:14,className:"me-2"}),d[0]=p,d[1]=t,d[2]=s):(t=d[1],s=d[2]),d[3]!==u?(l=(0,r.jsx)("div",{className:"fs-7",children:u}),d[3]=u,d[4]=l):l=d[4],d[5]!==t||d[6]!==s||d[7]!==l?(i=(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,l]}),d[5]=t,d[6]=s,d[7]=l,d[8]=i):i=d[8],d[9]!==m||d[10]!==p?(o=p?null:(0,r.jsx)("div",{className:"mb-4",children:m}),d[9]=m,d[10]=p,d[11]=o):o=d[11],d[12]!==i||d[13]!==o?(c=(0,r.jsxs)("div",{className:"my-3",children:[i,o]}),d[12]=i,d[13]=o,d[14]=c):c=d[14],c},P=e=>{let t,s,a=(0,n.c)(5),{children:l,title:i}=e;return a[0]!==i?(t=i&&(0,r.jsx)("div",{className:D().panelSectionWrapperTitle,children:i}),a[0]=i,a[1]=t):t=a[1],a[2]!==l||a[3]!==t?(s=(0,r.jsxs)("div",{className:D().panelSectionWrapper,children:[t,l]}),a[2]=l,a[3]=t,a[4]=s):s=a[4],s},W=e=>{let t,s,a,l,i=(0,n.c)(8),{label:o,value:c}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={paddingRight:20,marginRight:12,borderRight:"1px solid #ffffff20"},i[0]=t):t=i[0],i[1]!==o?(s=(0,r.jsx)("div",{children:o}),i[1]=o,i[2]=s):s=i[2],i[3]!==c?(a=(0,r.jsx)("div",{className:"fs-7",children:c}),i[3]=c,i[4]=a):a=i[4],i[5]!==s||i[6]!==a?(l=(0,r.jsxs)("div",{style:t,children:[s,a]}),i[5]=s,i[6]=a,i[7]=l):l=i[7],l},B=e=>{let t,s=(0,n.c)(3),{onClick:a,isOpen:l}=e,i=l?"chevron-up":"chevron-down";return s[0]!==a||s[1]!==i?(t=(0,r.jsx)(L.L,{label:"",biIcon:i,onClick:a}),s[0]=a,s[1]=i,s[2]=t):t=s[2],t},H=[{accessorKey:"filename",cell:e=>{let t,s,l,i,o,c,d,u,m,h=(0,n.c)(31),{row:p,table:x}=e,g=x.options.meta,[f,b]=a.useState(p.index===g.firstFrameIndex);h[0]!==f?(t=()=>{b(!f)},h[0]=f,h[1]=t):t=h[1];let y=t,v=p.original,{isLoading:j,enrichedFrame:_}=(0,z.f)(v),w=_??v,C=!!w.context_line;return h[2]!==C?(s=S()("w-100 py-2 px-4 d-flex justify-content-between align-items-center",{[D().stacktraceRowInteractive]:C}),h[2]=C,h[3]=s):s=h[3],h[4]!==w.in_app?(l=!w.in_app&&(0,r.jsx)(E.m,{label:"in_app: false",position:"top",withArrow:!0,color:"gray",children:(0,r.jsx)($.A,{size:14,className:"me-2","aria-label":"in_app: false"})}),h[4]=w.in_app,h[5]=l):l=h[5],h[6]!==w||h[7]!==j?(i=w&&(0,r.jsx)(F,{colno:w.colno,filename:w.filename,lineno:w.lineno,function:w.function,isLoading:j}),h[6]=w,h[7]=j,h[8]=i):i=h[8],h[9]!==l||h[10]!==i?(o=(0,r.jsxs)("div",{children:[l,i]}),h[9]=l,h[10]=i,h[11]=o):o=h[11],h[12]!==y||h[13]!==C||h[14]!==f?(c=C&&(0,r.jsx)(B,{onClick:y,isOpen:f}),h[12]=y,h[13]=C,h[14]=f,h[15]=c):c=h[15],h[16]!==y||h[17]!==s||h[18]!==o||h[19]!==c?(d=(0,r.jsxs)("div",{className:s,onClick:y,children:[o,c]}),h[16]=y,h[17]=s,h[18]=o,h[19]=c,h[20]=d):d=h[20],h[21]!==w.context_line||h[22]!==w.lineno||h[23]!==w.post_context||h[24]!==w.pre_context||h[25]!==C||h[26]!==f?(u=f&&C&&(0,r.jsxs)("pre",{className:D().lineContext,children:[w.pre_context?.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:D().lineContextLineNo,children:(w.lineno??0)-(w.pre_context?.length??0)+t}),e]},e+t)),w.context_line&&(0,r.jsxs)("div",{className:D().lineContextCurrentLine,children:[(0,r.jsx)("span",{className:D().lineContextLineNo,children:w.lineno}),w.context_line]}),w.post_context?.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:D().lineContextLineNo,children:w.lineno+t+1}),e]},e+t))]}),h[21]=w.context_line,h[22]=w.lineno,h[23]=w.post_context,h[24]=w.pre_context,h[25]=C,h[26]=f,h[27]=u):u=h[27],h[28]!==d||h[29]!==u?(m=(0,r.jsxs)(r.Fragment,{children:[d,u]}),h[28]=d,h[29]=u,h[30]=m):m=h[30],m}}],V=e=>{let t,s=(0,n.c)(2),{url:a}=e;return s[0]!==a?(t=(0,r.jsx)("span",{title:a,children:a}),s[0]=a,s[1]=t):t=s[1],t},q=a.memo(e=>{let t,s=(0,n.c)(3),{status:a}=e;if(!a)return null;let l=a>=500?"text-danger bg-danger":a>=400?"text-warning bg-warning":"text-success bg-success",i=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${l}`;return s[0]!==a||s[1]!==i?(t=(0,r.jsx)("span",{className:i,children:a}),s[0]=a,s[1]=i,s[2]=t):t=s[2],t}),X=a.memo(e=>{let t,s=(0,n.c)(3),{level:a}=e;if(!a)return null;let l=a.includes("error")?"text-danger bg-danger":a.includes("warn")||a.includes("warning")?"text-warning bg-warning":"bg-muted",i=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${l}`;return s[0]!==a||s[1]!==i?(t=(0,r.jsx)("span",{className:i,children:a}),s[0]=a,s[1]=i,s[2]=t):t=s[2],t}),G=[{accessorKey:"category",header:"Category",size:180,cell:({row:e})=>(0,r.jsxs)("span",{className:"d-flex align-items-center gap-2",children:[e.original.category,"console"===e.original.category&&(0,r.jsx)(X,{level:e.original.level}),"fetch"===e.original.category||"xhr"===e.original.category?(0,r.jsx)(q,{status:e.original.data?.status_code}):null]})},{accessorKey:"message",header:"Data",size:99999,cell:({row:e})=>{if(e.original.data&&("fetch"===e.original.category||"xhr"===e.original.category)){let{method:t,url:s}=e.original.data;return(0,r.jsxs)("div",{className:"text-truncate",children:[(0,r.jsxs)("span",{children:[t," "]}),(0,r.jsx)("span",{title:s,children:(0,r.jsx)(V,{url:s})})]})}if("navigation"===e.original.category&&e.original.data){let{from:t,to:s}=e.original.data;return(0,r.jsxs)("div",{className:"text-truncate",children:[(0,r.jsx)("span",{title:t,children:(0,r.jsx)(V,{url:t})}),(0,r.jsx)("span",{children:" → "}),(0,r.jsx)("span",{title:s,children:(0,r.jsx)(V,{url:s})})]})}if("console"===e.original.category){let{message:t}=e.original;return(0,r.jsx)("pre",{className:"mb-0 text-truncate fs-8",title:t,children:t})}return e.original.message?(0,r.jsx)("div",{className:"text-truncate",children:e.original.message}):(0,r.jsx)("span",{className:"text-muted",children:"Empty"})}},{header:"Timestamp",size:220,cell:({row:e})=>(0,r.jsx)("span",{className:"text-muted",children:(0,r.jsx)(R.H,{value:1e3*e.original.timestamp,format:"withMs"})})}],K=e=>{let t,s,r,l=(0,n.c)(11),{rows:i,maxRows:o}=e,c=void 0===o?5:o,[d,u]=a.useState(!1);l[0]!==d||l[1]!==c||l[2]!==i?(t=d?i:i.slice(0,c),l[0]=d,l[1]=c,l[2]=i,l[3]=t):t=l[3];let m=t,h=i.length??0,p=h>c?h-c:null;l[4]!==d?(s=()=>{u(!d)},l[4]=d,l[5]=s):s=l[5];let x=s;return l[6]!==x||l[7]!==p||l[8]!==d||l[9]!==m?(r={visibleRows:m,hiddenRowsCount:p,handleToggleMoreRows:x,isExpanded:d},l[6]=x,l[7]=p,l[8]=d,l[9]=m,l[10]=r):r=l[10],r},J=e=>{let t,s,a,l,i,o,c,d,u,m,p,x,g,f,b=(0,n.c)(42),{logData:y,breadcrumbs:v,exceptionValues:j}=e,_=j[0];_?.stacktrace?.frames;e:{let e;if(!_?.stacktrace?.frames){let e;b[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],b[0]=e):e=b[0],t=e;break e}b[1]!==_?.stacktrace.frames?(e=_?.stacktrace.frames.slice().reverse(),b[1]=_?.stacktrace.frames,b[2]=e):e=b[2],t=e}let S=t;if(b[3]!==S){let e=S&&S.length?S.find(e=>e.in_app)??S.find(e=>!!e.function||!!e.filename)??S[0]:null;s=e?S.indexOf(e):-1,b[3]=S,b[4]=s}else s=b[4];let E=s;b[5]!==v||b[6]!==_||b[7]!==y?.timestamp?(a=()=>[..._&&v?[{category:"exception",timestamp:new Date(y?.timestamp??0).getTime()/1e3,message:`${_.type}: ${_.value} `}]:[],...v?.slice().reverse()??[]],b[5]=v,b[6]=_,b[7]=y?.timestamp,b[8]=a):a=b[8],y?.timestamp,b[9]!==a?(l=a(),b[9]=a,b[10]=l):l=b[10];let k=l,N=Math.max(5,E+1);b[11]!==S||b[12]!==N?(i={rows:S,maxRows:N},b[11]=S,b[12]=N,b[13]=i):i=b[13];let{handleToggleMoreRows:A,hiddenRowsCount:$,visibleRows:R,isExpanded:z}=K(i);b[14]!==k?(o={rows:k},b[14]=k,b[15]=o):o=b[15];let{handleToggleMoreRows:M,hiddenRowsCount:D,visibleRows:F,isExpanded:B}=K(o);return b[16]!==_?(c=_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(h.E,{fw:"bold",component:"span",size:"sm",variant:"danger",children:[_.type,":"," "]}),(0,r.jsx)("span",{className:"text-muted",children:_.value})]}),_.mechanism&&(0,r.jsxs)("div",{className:"d-flex gap-2 flex-wrap pt-3",children:[(0,r.jsx)(W,{label:"mechanism",value:_.mechanism?.type}),(0,r.jsx)(W,{label:"handled",value:_.mechanism?.handled?(0,r.jsx)("span",{className:"text-success",children:"true"}):(0,r.jsx)("span",{className:"text-danger",children:"false"})}),_.mechanism?.data?.function?(0,r.jsx)(W,{label:"function",value:_.mechanism.data.function}):null,_.mechanism?.data?.handler?(0,r.jsx)(W,{label:"handler",value:_.mechanism.data.handler}):null,_.mechanism?.data?.target?(0,r.jsx)(W,{label:"target",value:_.mechanism.data.target}):null]})]}),b[16]=_,b[17]=c):c=b[17],b[18]!==E?(d={firstFrameIndex:E},b[18]=E,b[19]=d):d=b[19],b[20]!==R||b[21]!==d?(u=(0,r.jsx)(w.ErrorBoundary,{onError:Z,fallbackRender:Y,children:(0,r.jsx)(L.X,{hideHeader:!0,columns:H,data:R,density:"zero",tableMeta:d})}),b[20]=R,b[21]=d,b[22]=u):u=b[22],b[23]!==j[0].stacktrace?(m="string"==typeof j[0].stacktrace&&(0,r.jsx)("pre",{className:"px-4",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:j[0].stacktrace}),b[23]=j[0].stacktrace,b[24]=m):m=b[24],b[25]!==A||b[26]!==z||b[27]!==$?(p=$?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:A,children:z?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.A,{size:14,className:"me-2"})," Hide stack trace"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",$," more frames"]})}):null,b[25]=A,b[26]=z,b[27]=$,b[28]=p):p=b[28],b[29]!==u||b[30]!==m||b[31]!==p||b[32]!==c?(x=(0,r.jsxs)(P,{title:c,children:[u,m,p]}),b[29]=u,b[30]=m,b[31]=p,b[32]=c,b[33]=x):x=b[33],b[34]!==B||b[35]!==D||b[36]!==F||b[37]!==M?(g=F.length>0&&(0,r.jsx)(O,{title:"Breadcrumbs",children:(0,r.jsxs)(P,{children:[(0,r.jsx)(L.X,{columns:G,data:F,emptyMessage:"No breadcrumbs found"}),D?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:M,children:B?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.A,{size:14,className:"me-2"})," Hide breadcrumbs"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",D," more breadcrumbs"]})}):null]})}),b[34]=B,b[35]=D,b[36]=F,b[37]=M,b[38]=g):g=b[38],b[39]!==x||b[40]!==g?(f=(0,r.jsxs)("div",{children:[x,g]}),b[39]=x,b[40]=g,b[41]=f):f=b[41],f};function Z(e){console.error(e)}function Y(){return(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering stacktrace"})}var U=s(65234),Q=s.n(U),ee=s(21510),et=s(60665),es=s(34027),er=s(26355),ea=s(78694);let en=function(e){let t="";return e&&(t=` ${({GET:"-X GET",POST:"-X POST",PUT:"-X PUT",PATCH:"-X PATCH",DELETE:"-X DELETE"})[e.toUpperCase()]}`)," \\\n"+t},el=function(e){let t="";return e&&e.map(([e,s])=>{t+=` \\
-H "${e}: ${s.replace(/(\\|")/g,"\\$1")}"`}),t},ei=function(e){let t="";return e&&(t+=` \\
-d "${JSON.stringify(e).replace(/(\\|")/g,"\\$1")}"`),t},eo=function(e){let t="";return e&&(t+=` \\
--data-raw ${/[\0-\x1F\x7F-\x9F!]|\'/.test(e)?"$'"+e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(e){let t=e.charCodeAt(0).toString(16);for(;t.length<4;)t="0"+t;return"\\u"+t})+"'":"'"+e+"'"}`),t},ec=function(e){let t="";return e&&Object.keys(e).forEach(s=>{let r=s.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`);if(e[s])"boolean"==typeof e[s]&&e[s]?t+=`--${r} `:"string"==typeof e[s]&&(t+=`--${r} ${e[s]} `);else throw Error(`Invalid Curl option ${s}`)}),t?` \\
${t}`:t},ed=function(e,t){let s="curl ";return s+=e.url,s+=en(e.method),s+=el(e.headers),s+="string"==typeof e.body?eo(e.body):ei(e.body),(s+=ec(t)).trim()},eu={base00:"#00000000",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#8378FF",base0E:"#ae81ff",base0F:"#cc6633"},em=(e,t)=>Object.entries(c()(t,(t,s)=>s.startsWith(e))).flatMap(([t,s])=>{let r=s;try{"string"==typeof s&&(r=JSON.parse(s))}catch(e){}let a=t.replace(e,"").replace("_","-"),n=[[a,`${r}`]];if(Array.isArray(r))n=r.map(e=>[a,`${e}`]);else if("object"==typeof r&&Object.keys(r).length>0)try{n=[[a,`${JSON.stringify(r)}`]]}catch(e){console.error(e)}return n}),eh=({body:e,theme:t,emptyMessage:s,notCollectedMessage:n})=>{let l=a.useCallback(e=>(0,r.jsx)("pre",{className:"d-inline text-break",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e}),[]),i=a.useMemo(()=>{if("string"!=typeof e)return null;try{if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))return JSON.parse(e)}catch(e){return null}},[e]);return(0,r.jsx)(r.Fragment,{children:null!=e&&""!=e?(0,r.jsx)("pre",{className:"m-0 px-4 py-3",style:{wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:i?(0,r.jsx)(er.A,{data:i,normallyExpanded:!0}):"string"==typeof e?e:(0,r.jsx)(ee.d,{hideRoot:!0,invertTheme:!1,data:e,theme:t,valueRenderer:l})}):""===e?(0,r.jsx)("div",{className:"px-4 py-3",children:s}):(0,r.jsx)("div",{className:"px-4 py-3",children:n})})};function ep(e){let t,s,a,l,i,o,c,d,u,m,h,p,x,g,f,b=(0,n.c)(41),{eventAttributes:y}=e;b[0]!==y?(t=em("http.request.header.",y),b[0]=y,b[1]=t):t=b[1];let v=t;b[2]!==y?(s=em("http.response.header.",y),b[2]=y,b[3]=s):s=b[3];let j=s,_=y["http.url"],S=y["net.peer.ip"],w=y["http.status_code"],E=y["http.method"],k=y["http.request.body"],N=y["http.response.body"];b[4]!==E||b[5]!==k||b[6]!==v||b[7]!==_?(a=ed({method:E,headers:v,url:_,body:k}),b[4]=E,b[5]=k,b[6]=v,b[7]=_,b[8]=a):a=b[8];let A=a;return _||E||w?(b[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsxs)(C.$,{size:"xs",variant:"primary",children:[(0,r.jsx)(es.A,{size:14,className:"me-2"}),"Copy Request as Curl"]}),b[9]=l):l=b[9],b[10]!==A?(i=(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)(Q(),{text:A,onCopy:ex,children:l})}),b[10]=A,b[11]=i):i=b[11],b[12]!==_?(o=_&&{label:"URL",value:_},b[12]=_,b[13]=o):o=b[13],b[14]!==E?(c=E&&{label:"Method",value:E},b[14]=E,b[15]=c):c=b[15],b[16]!==S?(d=S&&{label:"Remote Address",value:S},b[16]=S,b[17]=d):d=b[17],b[18]!==y||b[19]!==w?(u=w&&{label:"Status",value:`${w} ${y["http.status_text"]??""}`,className:w>=500?"text-danger":w>=400?"text-warning":"text-success"},b[18]=y,b[19]=w,b[20]=u):u=b[20],b[21]!==o||b[22]!==c||b[23]!==d||b[24]!==u?(m=(0,r.jsx)(ea.$K,{children:(0,r.jsx)(L.X,{borderless:!0,density:"compact",columns:ea.Qx,data:[o,c,d,u].filter(Boolean),hideHeader:!0})}),b[21]=o,b[22]=c,b[23]=d,b[24]=u,b[25]=m):m=b[25],b[26]!==v?(h=v.length>0&&(0,r.jsx)(ea.iV,{title:`Request Headers (${v.length})`,initiallyCollapsed:!0,children:(0,r.jsx)(ea.$K,{children:(0,r.jsx)(L.X,{borderless:!0,hideHeader:!0,density:"compact",columns:ea.hF,data:v,emptyMessage:"No request headers collected"})})}),b[26]=v,b[27]=h):h=b[27],b[28]!==k?(p=null!=k&&(0,r.jsx)(ea.iV,{title:"Request Body",children:(0,r.jsx)(ea.$K,{children:(0,r.jsx)(eh,{body:k,theme:eu,emptyMessage:"Empty request",notCollectedMessage:"No request body collected"})})}),b[28]=k,b[29]=p):p=b[29],b[30]!==j?(x=j.length>0&&(0,r.jsx)(ea.iV,{title:`Response Headers (${j.length})`,initiallyCollapsed:!0,children:(0,r.jsx)(ea.$K,{children:(0,r.jsx)(L.X,{borderless:!0,hideHeader:!0,density:"compact",columns:ea.hF,data:j,emptyMessage:"No response headers collected"})})}),b[30]=j,b[31]=x):x=b[31],b[32]!==N?(g=null!=N&&(0,r.jsx)(ea.iV,{title:"Response Body",children:(0,r.jsx)(ea.$K,{children:(0,r.jsx)(eh,{body:N,theme:eu,emptyMessage:"Empty response",notCollectedMessage:"No response body collected"})})}),b[32]=N,b[33]=g):g=b[33],b[34]!==m||b[35]!==h||b[36]!==p||b[37]!==x||b[38]!==g||b[39]!==i?(f=(0,r.jsxs)("div",{children:[i,m,h,p,x,g]}),b[34]=m,b[35]=h,b[36]=p,b[37]=x,b[38]=g,b[39]=i,b[40]=f):f=b[40],f):null}function ex(){et.$e.show({color:"green",message:"Curl command copied to clipboard"})}let eg=[{accessorKey:"Timestamp",header:"Timestamp",size:120,cell:({row:e})=>(0,r.jsx)("span",{className:"text-muted",title:e.original.Timestamp,children:(0,r.jsx)(R.H,{value:new Date(e.original.Timestamp).getTime(),format:"withMs"})})},{accessorKey:"Name",header:"Name",size:180,cell:({row:e})=>(0,r.jsx)("span",{className:"d-flex align-items-center gap-2",children:e.original.Name})},{accessorKey:"Attributes",header:"Attributes",size:400,cell:({row:e})=>{let t=e.original.Attributes;return t&&Object.keys(t).length>0?(0,r.jsx)(u.a,{children:(0,r.jsx)(b.z,{data:t})}):(0,r.jsx)("span",{className:"text-muted",children:"Empty"})}}],ef=e=>{let t,s,a,l,i,o=(0,n.c)(15),{spanEvents:c}=e;e:{let e;if(!c||0===c.length){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}o[1]!==c?(e=[...c.filter(eb)].sort(ey),o[1]=c,o[2]=e):e=o[2],t=e}let d=t;o[3]!==d?(s={rows:d,maxRows:5},o[3]=d,o[4]=s):s=o[4];let{handleToggleMoreRows:u,hiddenRowsCount:m,visibleRows:h,isExpanded:p}=K(s);if(!d||0===d.length){let e;return o[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:"p-3 text-muted fs-7",children:"No span events available for this trace"}),o[5]=e):e=o[5],e}return o[6]!==h?(a=(0,r.jsx)(w.ErrorBoundary,{onError:ev,fallbackRender:ej,children:(0,r.jsx)(L.X,{columns:eg,data:h,emptyMessage:"No span events found"})}),o[6]=h,o[7]=a):a=o[7],o[8]!==u||o[9]!==m||o[10]!==p?(l=m?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",my:"sm",onClick:u,children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.A,{size:14,className:"me-2"})," Hide events"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",m," more events"]})}):null,o[8]=u,o[9]=m,o[10]=p,o[11]=l):l=o[11],o[12]!==a||o[13]!==l?(i=(0,r.jsx)("div",{children:(0,r.jsxs)(P,{children:[a,l]})}),o[12]=a,o[13]=l,o[14]=i):i=o[14],i};function eb(e){return"string"==typeof e.Timestamp&&"string"==typeof e.Name&&void 0!==e.Attributes}function ey(e,t){let s=new Date(e.Timestamp).getTime();return new Date(t.Timestamp).getTime()-s}function ev(e){console.error(e)}function ej(){return(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering span events"})}let e_={};function eS(e){let t,s,l,o,_,S,w,E,C,k,N,A,T,$,I,R,z,L,M,D,F,O,P,W,B,H,V,q,X,G,K=(0,n.c)(96),{source:Z,rowId:Y,aliasWith:U,hideHeader:Q,"data-testid":ee}=e,et=void 0!==Q&&Q;K[0]!==U||K[1]!==Y||K[2]!==Z?(t={source:Z,rowId:Y,aliasWith:U},K[0]=U,K[1]=Y,K[2]=Z,K[3]=t):t=K[3];let{data:es}=(0,f.k1)(t),{onPropertyAddClick:er,generateSearchUrl:ea}=(0,a.useContext)(y.D);K[4]!==Z.highlightedRowAttributeExpressions||K[5]!==Z.kind?(s=Z.kind===d.GL.Trace||Z.kind===d.GL.Log?Z.highlightedRowAttributeExpressions??[]:[],K[4]=Z.highlightedRowAttributeExpressions,K[5]=Z.kind,K[6]=s):s=K[6];let en=s;K[7]!==en||K[8]!==es||K[9]!==Z?(l=es?(0,g.N4)(Z,en,es.data||[],es.meta||[]):[],K[7]=en,K[8]=es,K[9]=Z,K[10]=l):l=K[10];let el=l,ei=es?.meta;K[11]!==ei?(o=(0,f.bn)(ei),K[11]=ei,K[12]=o):o=K[12];let eo=o,ec=Z.eventAttributesExpression;e:{let e,t;K[13]!==es?.data?.[0]?(e=es?.data?.[0]??{},K[13]=es?.data?.[0],K[14]=e):e=K[14],K[15]!==e?(t={...e},K[15]=e,K[16]=t):t=K[16];let s=t;if(!s){_=null;break e}_=s}let ed=_;K[17]===Symbol.for("react.memo_cache_sentinel")?(S=["ServiceName","SpanName","Duration","SeverityText","StatusCode","StatusMessage","SpanKind","TraceId","SpanId","ParentSpanId","ScopeName","ScopeVersion"],K[17]=S):S=K[17];let eu=S;K[18]===Symbol.for("react.memo_cache_sentinel")?(w=(e,t)=>""!==e&&!!eu.includes(t),K[18]=w):w=K[18],K[19]!==ed?(E=c()(ed,w),K[19]=ed,K[20]=E):E=K[20];let em=E,eh=ed?.__hdx_resource_attributes??e_,ex=ed?.__hdx_event_attributes??e_;K[21]!==ec||K[22]!==ed?(C=ec&&ed?.[ec]&&Object.keys(ed[ec]).length>0?{[ec]:ed[ec]}:{},K[21]=ec,K[22]=ed,K[23]=C):C=K[23];let eg=C;K[24]!==ea?(k=(e,t)=>ea?.({where:e,whereLanguage:t})??"/",K[24]=ea,K[25]=k):k=K[25];let eb=k,ey=ec&&eg?.[ec],ev=ey?.["http.url"]!=null;t:{let e;if(!ec){N=eg;break t}let t=eg?.[ec];K[26]!==t||K[27]!==eg||K[28]!==ec||K[29]!==ev?(e=ev&&t?{[ec]:c()(t,ew)}:eg,K[26]=t,K[27]=eg,K[28]=ec,K[29]=ev,K[30]=e):e=K[30],N=e}let ej=N,eS=ed?.__hdx_events_exception_attributes??e_,eE=eS?.["exception.stacktrace"]||eS?.["exception.parsed_stacktrace"],eC=eE??"[]";try{let e;K[31]!==eE?(e=JSON.parse(eE),K[31]=eE,K[32]=e):e=K[32],eC=e}catch(e){}let ek=eS?.["exception.type"];K[33]!==eS?(A="string"!=typeof eS?.["exception.message"]?JSON.stringify(eS?.["exception.message"]):eS?.["exception.message"],K[33]=eS,K[34]=A):A=K[34];let eN=eS?.["exception.mechanism"];K[35]!==eC||K[36]!==ek||K[37]!==A||K[38]!==eN?(T=[{stacktrace:eC,type:ek,value:A,mechanism:eN}],K[35]=eC,K[36]=ek,K[37]=A,K[38]=eN,K[39]=T):T=K[39];let eA=T;K[40]!==ed?.__hdx_events_exception_attributes?($=()=>Object.keys(ed?.__hdx_events_exception_attributes??{}).length>0,K[40]=ed?.__hdx_events_exception_attributes,K[41]=$):$=K[41],ed?.__hdx_events_exception_attributes;let eT=$();ed?.__hdx_span_events;let e$=Array.isArray(ed?.__hdx_span_events)&&ed?.__hdx_span_events.length>0;K[42]!==Z?(I=(0,x.N8)(Z),K[42]=Z,K[43]=I):I=K[43];let eI=I;K[44]!==ed?(R=i()(ed?.__hdx_body)?ed.__hdx_body:ed?.__hdx_body!==void 0?JSON.stringify(ed.__hdx_body):void 0,K[44]=ed,K[45]=R):R=K[45];let eR=R;K[46]!==ed?.__hdx_severity_text||K[47]!==ed?.__hdx_timestamp||K[48]!==et||K[49]!==el||K[50]!==eR||K[51]!==eI?(z=!et&&(0,r.jsx)(u.a,{px:"sm",pt:"md",children:(0,r.jsx)(v.A,{attributes:el,date:new Date(ed?.__hdx_timestamp??0),mainContent:eR,mainContentHeader:eI,severityText:ed?.__hdx_severity_text})}),K[46]=ed?.__hdx_severity_text,K[47]=ed?.__hdx_timestamp,K[48]=et,K[49]=el,K[50]=eR,K[51]=eI,K[52]=z):z=K[52],K[53]===Symbol.for("react.memo_cache_sentinel")?(L=["exception","spanEvents","network","resourceAttributes","eventAttributes","topLevelAttributes"],K[53]=L):L=K[53],K[54]!==ex||K[55]!==ev?(M=ev&&(0,r.jsxs)(m.n.Item,{value:"network",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"HTTP Request"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(ep,{eventAttributes:ex})})})]}),K[54]=ex,K[55]=ev,K[56]=M):M=K[56],K[57]!==eA||K[58]!==ed?.__hdx_timestamp||K[59]!==eT?(D=eT&&(0,r.jsxs)(m.n.Item,{value:"exception",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Exception"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(J,{exceptionValues:eA,breadcrumbs:[],logData:{timestamp:ed?.__hdx_timestamp}})})})]}),K[57]=eA,K[58]=ed?.__hdx_timestamp,K[59]=eT,K[60]=D):D=K[60],K[61]!==ed?.__hdx_span_events||K[62]!==e$?(F=e$&&(0,r.jsxs)(m.n.Item,{value:"spanEvents",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Span Events"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(ef,{spanEvents:ed?.__hdx_span_events})})})]}),K[61]=ed?.__hdx_span_events,K[62]=e$,K[63]=F):F=K[63],K[64]!==eo||K[65]!==em?(O=Object.keys(em).length>0&&(0,r.jsxs)(m.n.Item,{value:"topLevelAttributes",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Top Level Attributes"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(b.z,{data:em,jsonColumns:eo})})})]}),K[64]=eo,K[65]=em,K[66]=O):O=K[66];let ez="log"===Z.kind?"Log":"Span";return K[67]!==ez?(P=(0,r.jsx)(m.n.Control,{children:(0,r.jsxs)(h.E,{size:"sm",ps:"md",children:[ez," Attributes"]})}),K[67]=ez,K[68]=P):P=K[68],K[69]!==ej||K[70]!==eo?(W=(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(b.z,{data:ej,jsonColumns:eo})})}),K[69]=ej,K[70]=eo,K[71]=W):W=K[71],K[72]!==P||K[73]!==W?(B=(0,r.jsxs)(m.n.Item,{value:"eventAttributes",children:[P,W]}),K[72]=P,K[73]=W,K[74]=B):B=K[74],K[75]===Symbol.for("react.memo_cache_sentinel")?(H=(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Resource Attributes"})}),K[75]=H):H=K[75],K[76]!==eh?(V=Object.entries(eh),K[76]=eh,K[77]=V):V=K[77],K[78]!==eb||K[79]!==ea||K[80]!==eo||K[81]!==er||K[82]!==Z.resourceAttributesExpression||K[83]!==V?(q=(0,r.jsxs)(m.n.Item,{value:"resourceAttributes",children:[H,(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(p.s,{wrap:"wrap",gap:"2px",mx:"md",mb:"lg",children:V.map(e=>{let[t,s]=e;return(0,a.createElement)(j.A,{...er?{onPropertyAddClick:er,sqlExpression:Z.resourceAttributesExpression&&eo?.includes(Z.resourceAttributesExpression)?`toString(${Z.resourceAttributesExpression}.${t})`:`${Z.resourceAttributesExpression}['${t}']`}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:ea?eb:void 0,displayedKey:t,name:`${Z.resourceAttributesExpression}.${t}`,value:s,key:t})})})})]}),K[78]=eb,K[79]=ea,K[80]=eo,K[81]=er,K[82]=Z.resourceAttributesExpression,K[83]=V,K[84]=q):q=K[84],K[85]!==M||K[86]!==D||K[87]!==F||K[88]!==O||K[89]!==B||K[90]!==q?(X=(0,r.jsxs)(m.n,{mt:"sm",defaultValue:L,multiple:!0,variant:"noPadding",children:[M,D,F,O,B,q]}),K[85]=M,K[86]=D,K[87]=F,K[88]=O,K[89]=B,K[90]=q,K[91]=X):X=K[91],K[92]!==ee||K[93]!==z||K[94]!==X?(G=(0,r.jsxs)("div",{className:"flex-grow-1 overflow-auto","data-testid":ee,children:[z,X]}),K[92]=ee,K[93]=z,K[94]=X,K[95]=G):G=K[95],G}function ew(e,t){return!t.startsWith("http.")}},26932:(e,t,s)=>{"use strict";s.d(t,{e:()=>b,h:()=>y});var r=s(6029),a=s(75155),n=s(1909),l=s(69580),i=s(88140),o=s(93463),c=s(35555),d=s(82641),u=s(25062),m=s(3635),h=s(27166),p=s(78341),x=s(6876),g=s(58541);let f=e=>{let t,s,i,o,c,f,b,y,j,_,S,w=(0,a.c)(31);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=[d.x.Slack,d.x.Generic,d.x.IncidentIO],w[0]=t):t=w[0];let{data:E,refetch:C}=x.Ay.useWebhooks(t),[k,N]=(0,p.j)(!1),{open:A,close:T}=N,$=Array.isArray(E?.data)&&E.data.length>0;if(w[1]!==E?.data){let e,t=E?.data.map(v)||[];w[3]===Symbol.for("react.memo_cache_sentinel")?(e={value:"",label:"Select a Webhook",disabled:!0},w[3]=e):e=w[3],s=[e,...t],w[1]=E?.data,w[2]=s}else s=w[2];let I=s;w[4]!==e.control||w[5]!==e.name?(i={control:e.control,name:e.name},w[4]=e.control,w[5]=e.name,w[6]=i):i=w[6];let{field:R}=(0,n.as)(i);w[7]!==T||w[8]!==R||w[9]!==C?(o=async e=>{await C(),e&&(R.onChange(e),R.onBlur()),T()},w[7]=T,w[8]=R,w[9]=C,w[10]=o):o=w[10];let z=o;w[11]===Symbol.for("react.memo_cache_sentinel")?(c={withinPortal:!1},w[11]=c):c=w[11];let L=$?"Select a Webhook":"No Webhooks available";return w[12]!==I||w[13]!==e||w[14]!==L?(f=(0,r.jsx)(l.l6,{"data-testid":"select-webhook",comboboxProps:c,required:!0,size:"xs",flex:1,placeholder:L,data:I,name:e.name,control:e.control,...e}),w[12]=I,w[13]=e,w[14]=L,w[15]=f):f=w[15],w[16]!==A?(b=(0,r.jsx)(u.$,{"data-testid":"add-new-webhook-button",size:"xs",variant:"subtle",color:"gray",onClick:A,children:"Add New Incoming Webhook"}),w[16]=A,w[17]=b):b=w[17],w[18]!==f||w[19]!==b?(y=(0,r.jsxs)(m.Y,{gap:"md",justify:"space-between",children:[f,b]}),w[18]=f,w[19]=b,w[20]=y):y=w[20],w[21]!==T||w[22]!==z?(j=(0,r.jsx)(g.g,{onClose:T,onSuccess:z}),w[21]=T,w[22]=z,w[23]=j):j=w[23],w[24]!==T||w[25]!==k||w[26]!==j?(_=(0,r.jsx)(h.a,{"data-testid":"alert-modal",opened:k,onClose:T,title:"Add New Webhook",centered:!0,zIndex:9999,size:"lg",children:j}),w[24]=T,w[25]=k,w[26]=j,w[27]=_):_=w[27],w[28]!==_||w[29]!==y?(S=(0,r.jsxs)("div",{children:[y,_]}),w[28]=_,w[29]=y,w[30]=S):S=w[30],S},b=e=>{let t=(0,a.c)(3),{control:s,type:n,namePrefix:l}=e;if("webhook"===n){let e,a=`${void 0===l?"":l}channel.webhookId`;return t[0]!==s||t[1]!==a?(e=(0,r.jsx)(f,{control:s,name:a}),t[0]=s,t[1]=a,t[2]=e):e=t[2],e}return null},y=({thresholdType:e,threshold:t})=>null!=t&&"below"===e?(0,r.jsx)(i.T,{y1:0,y2:t,ifOverflow:"extendDomain",fill:"red",strokeWidth:0,fillOpacity:.05}):null!=t&&"above"===e?(0,r.jsx)(i.T,{y1:t,ifOverflow:"extendDomain",fill:"red",strokeWidth:0,fillOpacity:.05}):null!=t?(0,r.jsx)(o.e,{y:t,label:(0,r.jsx)(c.J,{value:"Alert Threshold",fill:"white",fontSize:11,opacity:.7}),stroke:"red",strokeDasharray:"3 3"}):null;function v(e){return{value:e._id,label:e.name}}},28450:(e,t,s)=>{"use strict";s.d(t,{FB:()=>j,Qg:()=>y,xD:()=>_});var r=s(6029),a=s(75155);s(55729);var n=s(82203),l=s.n(n),i=s(43465),o=s(67270),c=s(30039),d=s(43517),u=s(3635),m=s(43085),h=s(12482),p=s(49672),x=s(78550),g=s(81973),f=s(9897),b=s(7565);let y=(e,t)=>{let s,r,n,l=(0,a.c)(22),{dateRange:i,extraSelects:c,limit:d,logSource:u,order:m,where:f,whereLanguage:b}=e,y=(0,p.fu)(),v=(0,x.Ge)();return l[0]!==i||l[1]!==c||l[2]!==d||l[3]!==u.id||l[4]!==m||l[5]!==f||l[6]!==b?(s=["v2LogBatch",u.id,c,i,f,b,d,m],l[0]=i,l[1]=c,l[2]=d,l[3]=u.id,l[4]=m,l[5]=f,l[6]=b,l[7]=s):s=l[7],l[8]!==y||l[9]!==i||l[10]!==c||l[11]!==d||l[12]!==u||l[13]!==v||l[14]!==m||l[15]!==f||l[16]!==b?(r=async()=>{let e=await (0,o.PV)({select:[{valueExpression:(0,g.xg)(u),alias:"timestamp"},{valueExpression:`${u.serviceNameExpression}`,alias:"_service"},...c&&Array.isArray(c)?c:[]],from:u.from,dateRange:i,timestampValueExpression:u.timestampValueExpression,implicitColumnExpression:u.implicitColumnExpression,where:f,whereLanguage:b,connection:u.connection,limit:{limit:d??50,offset:0},orderBy:`${u.timestampValueExpression} ${m}`},v,u.querySettings);return await y.query({query:e.sql,query_params:e.params,connectionId:u.connection}).then(S)},l[8]=y,l[9]=i,l[10]=c,l[11]=d,l[12]=u,l[13]=v,l[14]=m,l[15]=f,l[16]=b,l[17]=r):r=l[17],l[18]!==t||l[19]!==s||l[20]!==r?(n={queryKey:s,queryFn:r,staleTime:3e5,...t},l[18]=t,l[19]=s,l[20]=r,l[21]=n):n=l[21],(0,h.I)(n)},v=e=>t=>{let s="#";try{s=`/search?q=${encodeURIComponent(`${e.resourceAttributesExpression}.k8s.pod.name:"${t["k8s.pod.name"]}"`)}&source=${e.id}&from=${new Date(t.timestamp).getTime()-9e5}&to=${new Date(t.timestamp).getTime()+1}`}catch(e){}return(0,r.jsxs)(c.K.Item,{children:[(0,r.jsx)(l(),{href:s,children:(0,r.jsx)(d.E,{size:"xs",fz:11,title:t.timestamp,c:"green",td:"underline",fw:"bold",children:(0,r.jsx)(b.H,{value:t.timestamp})})}),(0,r.jsxs)(u.Y,{gap:"xs",my:4,children:[(0,r.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:t["object.reason"]}),t["object.type"]&&(0,r.jsx)(m.E,{variant:"light",size:"xs",fw:"normal",color:"Normal"===t["object.type"]?"green":"yellow",children:t["object.type"]})]}),(0,r.jsx)(d.E,{size:"xs",children:t["object.note"]||t["object.message"]})]},t.id)},j=e=>{let t,s,n,l,o,m,h,p,x,g,f,j,_,S,C,k,N,A,T,$,I=(0,a.c)(82),{q:R,logSource:z,anchorEvent:L,dateRange:M}=e;I[0]!==M?.[0]?(t=M?.[0]??(0,i.A)(new Date,{days:1}),I[0]=M?.[0],I[1]=t):t=I[1];let D=t;I[2]!==M?.[1]?(s=M?.[1]??new Date,I[2]=M?.[1],I[3]=s):s=I[3];let F=s;I[4]!==F||I[5]!==D?(n=[D,F],I[4]=F,I[5]=D,I[6]=n):n=I[6];let O=`${z.eventAttributesExpression}.k8s.resource.name:"events" ${R}`;I[7]===Symbol.for("react.memo_cache_sentinel")?(l={valueExpression:"generateUUIDv4()",alias:"id"},I[7]=l):l=I[7];let P=`JSONExtractString(${z.eventAttributesExpression}['object'], 'metadata', 'creationTimestamp')`;I[8]!==P?(o={valueExpression:P,alias:"object.metadata.creationTimestamp"},I[8]=P,I[9]=o):o=I[9];let W=`JSONExtractString(${z.eventAttributesExpression}['object'], 'reason')`;I[10]!==W?(m={valueExpression:W,alias:"object.reason"},I[10]=W,I[11]=m):m=I[11];let B=`JSONExtractString(${z.eventAttributesExpression}['object'], 'note')`;I[12]!==B?(h={valueExpression:B,alias:"object.note"},I[12]=B,I[13]=h):h=I[13];let H=`JSONExtractString(${z.eventAttributesExpression}['object'], 'type')`;I[14]!==H?(p={valueExpression:H,alias:"object.type"},I[14]=H,I[15]=p):p=I[15];let V=`JSONExtractString(${z.eventAttributesExpression}['object'], 'message')`;I[16]!==V?(x={valueExpression:V,alias:"object.message"},I[16]=V,I[17]=x):x=I[17];let q=`JSONExtractString(${z.eventAttributesExpression}['object'], 'regarding', 'name')`;I[18]!==q?(g={valueExpression:q,alias:"k8s.pod.name"},I[18]=q,I[19]=g):g=I[19];let X=`JSONExtractString(${z.eventAttributesExpression}['object'], 'regarding', 'uid')`;I[20]!==X?(f={valueExpression:X,alias:"k8s.pod.uid"},I[20]=X,I[21]=f):f=I[21];let G=`JSONExtractString(${z.eventAttributesExpression}['object'], 'type')`;I[22]!==G?(j={valueExpression:G,alias:"type"},I[22]=G,I[23]=j):j=I[23];let K=`JSONExtractString(${z.eventAttributesExpression}['object'], 'type')`;I[24]!==K?(_={valueExpression:K,alias:"severity_text"},I[24]=K,I[25]=_):_=I[25];let J=`JSONExtractString(${z.eventAttributesExpression}['object'], 'note')`;I[26]!==J?(S={valueExpression:J,alias:"body"},I[26]=J,I[27]=S):S=I[27],I[28]!==h||I[29]!==p||I[30]!==x||I[31]!==g||I[32]!==f||I[33]!==j||I[34]!==_||I[35]!==S||I[36]!==o||I[37]!==m?(C=[l,o,m,h,p,x,g,f,j,_,S],I[28]=h,I[29]=p,I[30]=x,I[31]=g,I[32]=f,I[33]=j,I[34]=_,I[35]=S,I[36]=o,I[37]=m,I[38]=C):C=I[38],I[39]!==z||I[40]!==C||I[41]!==n||I[42]!==O?(k={dateRange:n,limit:50,logSource:z,order:"desc",where:O,whereLanguage:"lucene",extraSelects:C},I[39]=z,I[40]=C,I[41]=n,I[42]=O,I[43]=k):k=I[43];let{data:Z,isLoading:Y}=y(k);I[44]!==Z?.data?(N=Z?.data||[],I[44]=Z?.data,I[45]=N):N=I[45],I[46]!==N?(A=N.sort(w),I[46]=N,I[47]=A):A=I[47];let U=A;I[48]!==U||I[49]!==L?(T=L?U.filter(e=>new Date(e.timestamp)<new Date(L.timestamp)):[],I[48]=U,I[49]=L,I[50]=T):T=I[50];let Q=T;I[51]!==U||I[52]!==L?($=L?U.filter(e=>new Date(e.timestamp)>new Date(L.timestamp)):[],I[51]=U,I[52]=L,I[53]=$):$=I[53];let ee=$;if(Y){let e;return I[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.E,{color:"muted",ta:"center",children:"Loading..."}),I[54]=e):e=I[54],e}if(0===U.length){let e;return I[55]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.E,{color:"muted",ta:"center",children:"No events"}),I[55]=e):e=I[55],e}if(L){let e,t,s,a,n,l,i;return I[56]!==z||I[57]!==ee?(e=ee.map(v(z)),I[56]=z,I[57]=ee,I[58]=e):e=I[58],I[59]!==L.timestamp?(t=(0,r.jsx)(b.H,{value:L.timestamp}),I[59]=L.timestamp,I[60]=t):t=I[60],I[61]!==L.timestamp||I[62]!==t?(s=(0,r.jsx)(d.E,{size:"xs",fz:11,title:L.timestamp,children:t}),I[61]=L.timestamp,I[62]=t,I[63]=s):s=I[63],I[64]!==L.label?(a=(0,r.jsx)(u.Y,{gap:"xs",my:4,children:(0,r.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:L.label})}),I[64]=L.label,I[65]=a):a=I[65],I[66]!==L.timestamp||I[67]!==s||I[68]!==a?(n=(0,r.jsxs)(c.K.Item,{ref:E,children:[s,a]},L.timestamp),I[66]=L.timestamp,I[67]=s,I[68]=a,I[69]=n):n=I[69],I[70]!==z||I[71]!==Q?(l=Q.map(v(z)),I[70]=z,I[71]=Q,I[72]=l):l=I[72],I[73]!==e||I[74]!==n||I[75]!==l?(i=(0,r.jsxs)(c.K,{bulletSize:12,lineWidth:1,children:[e,n,l]}),I[73]=e,I[74]=n,I[75]=l,I[76]=i):i=I[76],i}{let e,t;return I[77]!==U||I[78]!==z?(e=U.map(v(z)),I[77]=U,I[78]=z,I[79]=e):e=I[79],I[80]!==e?(t=(0,r.jsx)(c.K,{bulletSize:12,lineWidth:1,children:e}),I[80]=e,I[81]=t):t=I[81],t}},_=e=>{let t=(0,a.c)(6),{status:s}=e;switch(s){case f.h.Pending:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"yellow",fw:"normal",tt:"none",size:"md",children:"Pending"}),t[0]=e):e=t[0],e}case f.h.Running:{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Running"}),t[1]=e):e=t[1],e}case f.h.Succeeded:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"indigo",fw:"normal",tt:"none",size:"md",children:"Succeeded"}),t[2]=e):e=t[2],e}case f.h.Failed:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Failed"}),t[3]=e):e=t[3],e}case f.h.Unknown:{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[4]=e):e=t[4],e}default:{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[5]=e):e=t[5],e}}};function S(e){return e.json()}function w(e,t){return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()}function E(e){null!==e&&e.scrollIntoView({block:"nearest"})}},31451:(e,t,s)=>{"use strict";s.d(t,{Q$:()=>f,nt:()=>v,vN:()=>g,xj:()=>x});var r=s(75155),a=s(36722),n=s.n(a),l=s(76089),i=s(12482),o=s(43152),c=s(46061),d=s(91021),u=s(81973);async function m(){let e=await window.loadPyodide();await e.loadPackage("micropip");let t=e.pyimport("micropip"),s=new URL("/jsonpickle-4.1.1-py3-none-any.whl",window.location.origin);await t.install(s.href);let r=new URL("/drain3-0.9.11-py3-none-any.whl",window.location.origin);return await t.install(r.href),e}class h{constructor(e){this.pyodide=e,this.id=Math.random().toString(36).substring(2,15),this.minerVariableName=`m_${this.id}`}async init(){await this.pyodide.runPythonAsync(`
import js
import json
from drain3 import TemplateMiner
from drain3.template_miner_config import TemplateMinerConfig

${this.minerVariableName} = TemplateMiner(None, TemplateMinerConfig())
    `)}async minePatterns(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        ${s}.append(${this.minerVariableName}.add_log_message(log))
      json.dumps(${s})
    `))}async matchLogs(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        match = ${this.minerVariableName}.match(log)
        ${s}.append(match.cluster_id if match else None)
      json.dumps(${s})
    `))}}async function p(e,t){let s=new h(t);return await s.init(),{miner:s,patterns:await s.minePatterns(e)}}let x="__hdx_pattern_field",g="__hdx_timestamp",f="__hdx_severity_text",b="__hdx_status_code";function y(e){return n()(e[x])}function v(e){let t,s,a,n,h,v=(0,r.c)(22),{config:S,samples:w,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:k,totalCount:N,enabled:A}=e,T=void 0===A||A;v[0]!==E||v[1]!==S||v[2]!==T||v[3]!==w||v[4]!==C||v[5]!==k?(t={config:S,samples:w,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:k,enabled:T},v[0]=E,v[1]=S,v[2]=T,v[3]=w,v[4]=C,v[5]=k,v[6]=t):t=v[6];let{data:$,isLoading:I,patternQueryConfig:R}=function(e){var t;let s,a,n,l,o,h,v,j,_,S,w,E,C,k,N,A,T=(0,r.c)(36),{config:$,samples:I,bodyValueExpression:R,severityTextExpression:z,statusCodeExpression:L,enabled:M}=e,D=void 0===M||M,F=`${R} as ${x}`;T[0]!==$.timestampValueExpression?(s=(0,u.AF)($.timestampValueExpression),T[0]=$.timestampValueExpression,T[1]=s):s=T[1];let O=`${s} as ${g}`;T[2]!==z?(a=z?[`${z} as ${f}`]:[],T[2]=z,T[3]=a):a=T[3],T[4]!==L?(n=L?[`${L} as ${b}`]:[],T[4]=L,T[5]=n):n=T[5],T[6]!==F||T[7]!==O||T[8]!==a||T[9]!==n?(l=[F,O,...a,...n],T[6]=F,T[7]=O,T[8]=a,T[9]=n,T[10]=l):l=T[10];let P=l.join(",");T[11]===Symbol.for("react.memo_cache_sentinel")?(o=[{ordering:"DESC",valueExpression:"rand()"}],T[11]=o):o=T[11],T[12]!==I?(h={limit:I},T[12]=I,T[13]=h):h=T[13],T[14]!==$||T[15]!==h||T[16]!==P?(v={...$,select:P,orderBy:o,limit:h},T[14]=$,T[15]=h,T[16]=P,T[17]=v):v=T[17];let W=(0,c.YB)(v),B=null!=W&&D;T[18]!==B?(j={enabled:B},T[18]=B,T[19]=j):j=T[19];let{data:H,isLoading:V}=(0,d.HD)(W??$,j);T[20]!==D?(_={enabled:D},T[20]=D,T[21]=_):_=T[21];let{data:q,isLoading:X}=(t=_,(A=(0,r.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(k=["pyodide"],A[0]=k):k=A[0],A[1]!==t.enabled?(N={queryKey:k,queryFn:m,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1,enabled:t.enabled},A[1]=t.enabled,A[2]=N):N=A[2],(0,i.I)(N));T[22]!==$?(S=["patterns",$],T[22]=$,T[23]=S):S=T[23],T[24]!==W||T[25]!==q||T[26]!==H?(w=()=>{if(null==W)throw Error("Unexpected configWithPrimaryAndPartitionKey is null");return p(H?.data.map(y)??[],q).then(e=>{let t=[],s=e.patterns;for(let e=0;e<s.length;e++){let r=s[e],a=H?.data[e];t.push({...a,__hdx_patternId:r.cluster_id,__hdx_pattern:r.template_mined})}return{...H,data:t,additionalKeysLength:W.additionalKeysLength,miner:e.miner}})},T[24]=W,T[25]=q,T[26]=H,T[27]=w):w=T[27];let G=null!=H&&null!=q&&D;T[28]!==S||T[29]!==w||T[30]!==G?(E={queryKey:S,queryFn:w,refetchOnWindowFocus:!1,enabled:G},T[28]=S,T[29]=w,T[30]=G,T[31]=E):E=T[31];let K=(0,i.I)(E),J=K.isLoading||V||X;return T[32]!==W||T[33]!==K||T[34]!==J?(C={...K,isLoading:J,patternQueryConfig:W},T[32]=W,T[33]=K,T[34]=J,T[35]=C):C=T[35],C}(t),z=$?.data.length,L=N&&z?N/z:1;v[7]!==S.dateRange?(s=(0,l.tA)(S.dateRange,24),a=(0,o.Ht)(S.dateRange[0],S.dateRange[1],s),v[7]=S.dateRange,v[8]=s,v[9]=a):(s=v[8],a=v[9]);let M=a;if(v[10]!==S.dateRange||v[11]!==s||v[12]!==$?.data||v[13]!==L||v[14]!==M){let e=$?.data.reduce(_,{});n={},Object.entries(e??{}).forEach(e=>{let[t,r]=e,a=M.reduce(j,{}),l=r.reduce((e,t)=>{let r=t[g],a=(0,o.W6)(new Date(r),s).getTime();return e[a]=(e[a]||0)+1,e},a),i=Math.max(Math.round(r.length*L),1),c=r.at(-1);n[t]={id:t,pattern:c?.__hdx_pattern,count:i,countStr:`~${i}`,severityText:c?.[f],statusCode:c?.[b],samples:r,__hdx_pattern_trend:{data:Object.entries(l).map(e=>{let[t,s]=e;return{bucket:Number.parseInt(t)/1e3,count:Math.round(s*L)}}),granularity:s,dateRange:S.dateRange}}}),v[10]=S.dateRange,v[11]=s,v[12]=$?.data,v[13]=L,v[14]=M,v[15]=n}else n=v[15];let D=n,F=$?.miner;return v[16]!==D||v[17]!==I||v[18]!==R||v[19]!==z||v[20]!==F?(h={data:D,isLoading:I,miner:F,sampledRowCount:z,patternQueryConfig:R},v[16]=D,v[17]=I,v[18]=R,v[19]=z,v[20]=F,v[21]=h):h=v[21],h}function j(e,t){return e[t.getTime()]=0,e}function _(e,t){let s=`${t.__hdx_patternId}`;return e[s]=e[s]||[],e[s].push(t),e}},32833:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/chart",function(){return s(6889)}])},34955:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={default:function(){return c},noSSR:function(){return o}};for(var a in r)Object.defineProperty(t,a,{enumerable:!0,get:r[a]});let n=s(14761);s(6029),s(55729);let l=n._(s(70628));function i(e){return{default:e?.default||e}}function o(e,t){return delete t.webpack,delete t.modules,e(t)}function c(e,t){let s=l.default,r={loading:({error:e,isLoading:t,pastDelay:s})=>null};e instanceof Promise?r.loader=()=>e:"function"==typeof e?r.loader=e:"object"==typeof e&&(r={...r,...e});let a=(r={...r,...t}).loader;return(r.loadableGenerated&&(r={...r,...r.loadableGenerated},delete r.loadableGenerated),"boolean"!=typeof r.ssr||r.ssr)?s({...r,loader:()=>null!=a?a().then(i):Promise.resolve(i(()=>null))}):(delete r.webpack,delete r.modules,o(s,r))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},36011:e=>{e.exports={root:"SearchWhereInput_root__IzMOd",inputWrapper:"SearchWhereInput_inputWrapper__7mdT7",sizeXs:"SearchWhereInput_sizeXs__MfgMj",sizeSm:"SearchWhereInput_sizeSm__B7Xwd",languageSwitch:"SearchWhereInput_languageSwitch__dZQ28",shortcutHint:"SearchWhereInput_shortcutHint__NwHbY"}},37901:(e,t,s)=>{"use strict";s.d(t,{$_:()=>h,bn:()=>x,dD:()=>g,k1:()=>p});var r,a=s(6029),n=s(75155),l=s(46375),i=s(82641),o=s(60481),c=s(91021),d=s(81973),u=s(18006),m=s(65081),h=((r={}).TIMESTAMP="__hdx_timestamp",r.BODY="__hdx_body",r.TRACE_ID="__hdx_trace_id",r.SPAN_ID="__hdx_span_id",r.SEVERITY_TEXT="__hdx_severity_text",r.SERVICE_NAME="__hdx_service_name",r.RESOURCE_ATTRIBUTES="__hdx_resource_attributes",r.EVENT_ATTRIBUTES="__hdx_event_attributes",r.EVENTS_EXCEPTION_ATTRIBUTES="__hdx_events_exception_attributes",r.SPAN_EVENTS="__hdx_span_events",r);function p(e){let t,s,r,a,o,m,h,p,x,g,f,b=(0,n.c)(62),{source:y,rowId:v,aliasWith:j}=e;b[0]!==y?(t=(0,d.N8)(y),b[0]=y,b[1]=t):t=b[1];let _=t,S=y.traceIdExpression,w=y.spanIdExpression,E=y.severityTextExpression||y.statusCodeExpression;if(b[2]!==_||b[3]!==w||b[4]!==S||b[5]!==E||b[6]!==y){let e,t,n,l,o,m,h,p,x,g,f,v=y.kind===i.GL.Trace||y.kind===i.GL.Log?(0,u.z4)(y.highlightedRowAttributeExpressions):[];a=c.HD,s=y.connection,b[10]===Symbol.for("react.memo_cache_sentinel")?(e={valueExpression:"*"},b[10]=e):e=b[10],b[11]!==y?(t=(0,d.xg)(y),b[11]=y,b[12]=t):t=b[12],b[13]!==t?(n={valueExpression:t,alias:"__hdx_timestamp"},b[13]=t,b[14]=n):n=b[14],b[15]!==_?(l=_?[{valueExpression:_,alias:"__hdx_body"}]:[],b[15]=_,b[16]=l):l=b[16],b[17]!==S?(o=S?[{valueExpression:S,alias:"__hdx_trace_id"}]:[],b[17]=S,b[18]=o):o=b[18],b[19]!==w?(m=w?[{valueExpression:w,alias:"__hdx_span_id"}]:[],b[19]=w,b[20]=m):m=b[20],b[21]!==E?(h=E?[{valueExpression:E,alias:"__hdx_severity_text"}]:[],b[21]=E,b[22]=h):h=b[22],b[23]!==y.serviceNameExpression?(p=y.serviceNameExpression?[{valueExpression:y.serviceNameExpression,alias:"__hdx_service_name"}]:[],b[23]=y.serviceNameExpression,b[24]=p):p=b[24],b[25]!==y.resourceAttributesExpression?(x=y.resourceAttributesExpression?[{valueExpression:y.resourceAttributesExpression,alias:"__hdx_resource_attributes"}]:[],b[25]=y.resourceAttributesExpression,b[26]=x):x=b[26],b[27]!==y.eventAttributesExpression?(g=y.eventAttributesExpression?[{valueExpression:y.eventAttributesExpression,alias:"__hdx_event_attributes"}]:[],b[27]=y.eventAttributesExpression,b[28]=g):g=b[28],b[29]!==y.kind||b[30]!==y.spanEventsValueExpression?(f=y.kind===i.GL.Trace&&y.spanEventsValueExpression?[{valueExpression:`${y.spanEventsValueExpression}.Attributes[indexOf(${y.spanEventsValueExpression}.Name, 'exception')]`,alias:"__hdx_events_exception_attributes"},{valueExpression:y.spanEventsValueExpression,alias:"__hdx_span_events"}]:[],b[29]=y.kind,b[30]=y.spanEventsValueExpression,b[31]=f):f=b[31],r=[e,n,...l,...o,...m,...h,...p,...x,...g,...f,...v],b[2]=_,b[3]=w,b[4]=S,b[5]=E,b[6]=y,b[7]=s,b[8]=r,b[9]=a}else s=b[7],r=b[8],a=b[9];let C=v??"0=1";b[32]===Symbol.for("react.memo_cache_sentinel")?(o={limit:1},b[32]=o):o=b[32],b[33]!==j?(m=j&&j.length>0?{with:j}:{},b[33]=j,b[34]=m):m=b[34],b[35]!==y.from||b[36]!==s||b[37]!==r||b[38]!==C||b[39]!==m?(h={connection:s,select:r,where:C,from:y.from,limit:o,...m},b[35]=y.from,b[36]=s,b[37]=r,b[38]=C,b[39]=m,b[40]=h):h=b[40],b[41]!==j||b[42]!==v||b[43]!==y?(p=["row_side_panel",v,j,y],b[41]=j,b[42]=v,b[43]=y,b[44]=p):p=b[44];let k=null!=v;b[45]!==k||b[46]!==p?(x={queryKey:p,enabled:k},b[45]=k,b[46]=p,b[47]=x):x=b[47];let N=a(h,x);e:{let e,t,s;if(!N.data?.data?.[0]){g=N.data;break e}let r=N.data.data[0];if(b[48]!==r){if(e={...r},r.__hdx_resource_attributes){let t,s=r.__hdx_resource_attributes;b[50]!==s?(t=(0,l.flatten)(s),b[50]=s,b[51]=t):t=b[51],e.__hdx_resource_attributes=t}if(r.__hdx_event_attributes){let t,s=r.__hdx_event_attributes;b[52]!==s?(t=(0,l.flatten)(s),b[52]=s,b[53]=t):t=b[53],e.__hdx_event_attributes=t}b[48]=r,b[49]=e}else e=b[49];b[54]!==e?(t=[e],b[54]=e,b[55]=t):t=b[55],b[56]!==N.data||b[57]!==t?(s={...N.data,data:t},b[56]=N.data,b[57]=t,b[58]=s):s=b[58],g=s}let A=g;return b[59]!==A||b[60]!==N?(f={...N,data:A},b[59]=A,b[60]=N,b[61]=f):f=b[61],f}function x(e){return e?.filter(e=>"JSON"===e.type||e.type.startsWith("JSON(")).map(e=>e.name)??[]}function g(e){let t,s,r,l,i,c=(0,n.c)(16),{source:d,rowId:u,aliasWith:h,"data-testid":g}=e;c[0]!==h||c[1]!==u||c[2]!==d?(t={source:d,rowId:u,aliasWith:h},c[0]=h,c[1]=u,c[2]=d,c[3]=t):t=c[3];let{data:f}=p(t);e:{let e,t;c[4]!==f?.data?.[0]?(e=f?.data?.[0]??{},c[4]=f?.data?.[0],c[5]=e):e=c[5],c[6]!==e?(t={...e},c[6]=e,c[7]=t):t=c[7];let r=t;if(!r){s=null;break e}s=r}let b=s,y=f?.meta;c[8]!==y?(r=x(y),c[8]=y,c[9]=r):r=c[9];let v=r;return c[10]!==b||c[11]!==v?(l=(0,a.jsx)(o.a,{mx:"md",my:"sm",children:(0,a.jsx)(m.z,{data:b,jsonColumns:v})}),c[10]=b,c[11]=v,c[12]=l):l=c[12],c[13]!==g||c[14]!==l?(i=(0,a.jsx)("div",{className:"flex-grow-1 overflow-auto","data-testid":g,children:l}),c[13]=g,c[14]=l,c[15]=i):i=c[15],i}},40147:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(75155),a=s(80519),n=s.n(a),l=s(3145),i=s(78550);function o(e){let t,s=(0,r.c)(6);s[0]!==e?(t=(0,l.VO)(e),s[0]=e,s[1]=t):t=s[1];let{data:a,isLoading:o}=(0,i.n$)(t);if(e&&!o){let e;return s[2]!==a?(e={isLoading:!1,getFieldExpression:(e,t,s)=>a?.includes(e)?n().format(`${void 0===s?"toString":s}(??.??)`,[e,t]):n().format("??[?]",[e,t])},s[2]=a,s[3]=e):e=s[3],e}{let e;return s[4]!==o?(e={isLoading:o,getFieldExpression:void 0},s[4]=o,s[5]=e):e=s[5],e}}},45862:e=>{e.exports={root:"AutocompleteInput_root__4aZ0r",textarea:"AutocompleteInput_textarea__90yii",focused:"AutocompleteInput_focused__puBi_",collapseFade:"AutocompleteInput_collapseFade__GOMDH",aboveSuggestions:"AutocompleteInput_aboveSuggestions__aaRAR",suggestionsSection:"AutocompleteInput_suggestionsSection__tpfoD",suggestionsHeaderRow:"AutocompleteInput_suggestionsHeaderRow___m20z",suggestionsHeader:"AutocompleteInput_suggestionsHeader__8ivOI",suggestionsLimit:"AutocompleteInput_suggestionsLimit__jvv5c",suggestionItem:"AutocompleteInput_suggestionItem__cgp5x",selected:"AutocompleteInput_selected__1YH4P",suggestionLabel:"AutocompleteInput_suggestionLabel__ygOCA",belowSuggestions:"AutocompleteInput_belowSuggestions__X0P0_",historySection:"AutocompleteInput_historySection__ZcsPH",historyTitle:"AutocompleteInput_historyTitle__s_n4W",historyItem:"AutocompleteInput_historyItem__txvhH",historyItemLabel:"AutocompleteInput_historyItemLabel__PZTlb",dropdown:"AutocompleteInput_dropdown__CzHbR"}},46061:(e,t,s)=>{"use strict";s.d(t,{rD:()=>eW,Ho:()=>eO,YB:()=>eP});var r=s(6029),a=s(75155),n=s(55729),l=s(75828),i=s.n(l),o=s(92799),c=s(84450),d=s.n(c),u=s(90310),m=s.n(u),h=s(67264),p=s.n(h),x=s(66692),g=s(2893),f=s(47122),b=s(14693),y=s(31292),v=s(40684),j=s(92205),_=s(35467),S=s(76089),w=s(27166),E=s(78253),C=s(60481),k=s(3635),N=s(8737),A=s(63085),T=s(43517),$=s(24589),I=s(94502),R=s(73454),z=s(6620),L=s(38314),M=s(24602),D=s(40387),F=s(95316),O=s(12482),P=s(39696),W=s(79220),B=s(21440),H=s(6876),V=s(61410),q=s(91021),X=s(55024),G=s(78550),K=s(78744),J=s(31451),Z=s(70727),Y=s(39785),U=s(81973),Q=s(68593),ee=s(7565),et=s(57820),es=s(92917),er=s(37659),ea=s(78341),en=s(45172),el=s(9385),ei=s(96413),eo=s(50374),ec=s(90515),ed=s(74620),eu=s.n(ed);let em=e=>{let t,s,n,l,o,c=(0,a.c)(19),{onClick:d,className:u,title:m,tabIndex:h,children:p,variant:x,isActive:g,iconSize:f}=e,b=void 0===h?-1:h,y=void 0===x?"default":x,v=void 0!==g&&g,j=void 0===f?14:f;c[0]!==d?(t=e=>{e.stopPropagation(),e.preventDefault(),d(e)},c[0]=d,c[1]=t):t=c[1];let _=t;c[2]!==u||c[3]!==v||c[4]!==y?(s="copy"===y?i()(eu().iconActionButton,{[eu().copied]:v}):u,c[2]=u,c[3]=v,c[4]=y,c[5]=s):s=c[5];let S=s,w=!m;return c[6]!==p||c[7]!==j||c[8]!==v?(n=v?(0,r.jsx)(ec.A,{size:j}):p,c[6]=p,c[7]=j,c[8]=v,c[9]=n):n=c[9],c[10]!==S||c[11]!==_||c[12]!==n||c[13]!==b?(l=(0,r.jsx)(N.N,{onClick:_,component:"div",className:S,tabIndex:b,role:"button",children:n}),c[10]=S,c[11]=_,c[12]=n,c[13]=b,c[14]=l):l=c[14],c[15]!==w||c[16]!==l||c[17]!==m?(o=(0,r.jsx)(A.m,{label:m,position:"top",withArrow:!0,disabled:w,openDelay:300,closeDelay:100,fz:"xs",children:l}),c[15]=w,c[16]=l,c[17]=m,c[18]=o):o=c[18],o},eh=({children:e,cellValue:t,tableContainerRef:s,wrapLinesEnabled:a,columnName:l,isChart:o=!1})=>{let[c,{close:d,open:u}]=(0,ea.j)(!1),[m,h]=(0,n.useState)(!1),[p,x]=(0,n.useState)(!1),g=(0,n.useRef)(void 0),f=(0,n.useRef)(void 0);(0,n.useEffect)(()=>()=>{g.current&&clearTimeout(g.current),f.current&&clearTimeout(f.current)},[]);let{onPropertyAddClick:b}=(0,n.useContext)(eo.D),y=l&&b&&null!=t,v=()=>{p||(g.current&&clearTimeout(g.current),u())},j=()=>{g.current=setTimeout(()=>{d()},100)},_=()=>{d(),x(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{x(!1)},1e3)},S=async()=>{try{let e="string"==typeof t?t:String(t??"");await navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)}catch(e){console.error("Failed to copy to clipboard:",e)}},w=y?3:1;return o?(0,r.jsx)("div",{className:i()(eu().fieldText,{[eu().chart]:o}),style:{display:"flex",alignItems:"center"},children:e}):(0,r.jsx)("div",{className:i()(eu().fieldText,{[eu().truncated]:!a&&!o,[eu().wrapped]:a,[eu().chart]:o}),children:(0,r.jsxs)(er.A,{width:20*w+4*(w-1),position:"top-start",offset:5,opened:c,portalProps:{target:s??void 0},closeOnClickOutside:!1,clickOutsideEvents:[],children:[(0,r.jsx)(er.A.Target,{children:(0,r.jsx)("span",{onMouseEnter:v,onMouseLeave:j,onClick:_,tabIndex:-1,"aria-hidden":"true",style:{cursor:"pointer"},children:e})}),(0,r.jsx)(er.A.Dropdown,{style:{pointerEvents:"auto"},onMouseEnter:v,onMouseLeave:j,className:eu().fieldTextPopover,children:(0,r.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,r.jsx)(em,{onClick:S,variant:"copy",isActive:m,title:m?"Copied!":"Copy field value",children:(0,r.jsx)(en.A,{size:14})}),y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(em,{onClick:()=>{y&&(b(l,"string"==typeof t?t:String(t??""),"include"),_())},variant:"copy",title:"Toggle filter for this value",children:(0,r.jsx)(el.A,{size:14})}),(0,r.jsx)(em,{onClick:()=>{y&&(b(l,"string"==typeof t?t:String(t??""),"exclude"),_())},variant:"copy",title:"Exclude this value",children:(0,r.jsx)(ei.A,{size:14})})]})]})})]})})};var ep=s(56795);let ex=({row:e,getRowWhere:t,sourceId:s,isWrapped:a,onToggleWrap:l})=>{let[i,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),u=async()=>{try{let{[Z.ZO.ID]:t,...s}=e,r=Object.entries(s).reduce((e,[t,s])=>{if("string"==typeof s&&s.startsWith("{")||s.startsWith("["))try{e[t]=JSON.parse(s)}catch{e[t]=s}else e[t]=s;return e},{}),a=JSON.stringify(r,null,2);await navigator.clipboard.writeText(a),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy row data to clipboard:",e)}},m=async()=>{try{let r=t(e),a=new URL(window.location.href);a.searchParams.set("rowWhere",r.where),s&&a.searchParams.set("rowSource",s),await navigator.clipboard.writeText(a.toString()),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error("Failed to copy URL to clipboard:",e)}};return(0,r.jsxs)("div",{className:eu().rowButtons,children:[!a&&(0,r.jsx)(em,{onClick:l,variant:"copy",title:"Wrap All Lines",children:(0,r.jsx)(M.A,{size:16})}),(0,r.jsx)(em,{onClick:u,variant:"copy",isActive:i,title:i?"Copied entire row as JSON!":"Copy entire row as JSON",children:(0,r.jsx)(en.A,{size:16})}),(0,r.jsx)(em,{onClick:m,variant:"copy",isActive:c,title:c?"Copied shareable link!":"Copy shareable link to this specific row",children:(0,r.jsx)(ep.A,{size:16})})]})};var eg=s(48423),ef=s(22623),eb=s(59029),ey=s(74011),ev=s(97767),ej=s(67872);let e_=({searchQuery:e,onSearchChange:t,matchIndices:s,currentMatchIndex:a,onPreviousMatch:l,onNextMatch:i,isVisible:o,onVisibilityChange:c,containerRef:d})=>{let[u,m]=(0,n.useState)(!1),h=(0,n.useRef)(null),p=o??u,x=(0,n.useCallback)(()=>{void 0!==o?c?.(!1):m(!1),t("")},[o,t,c]),g=(0,n.useCallback)(()=>{void 0!==o?c?.(!0):m(!0),setTimeout(()=>{h.current?.focus(),h.current?.select()},0)},[o,c]),f=(0,n.useCallback)(e=>{if((e.metaKey||e.ctrlKey)&&"f"===e.key){if(d&&!(0,es.dS)(d))return;e.preventDefault(),g()}"Escape"===e.key&&p&&x()},[p,x,g]);(0,n.useEffect)(()=>(window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}),[f]);let b=(0,n.useCallback)(e=>{"Enter"===e.key&&s.length>0&&(e.shiftKey?l():i(),e.preventDefault())},[s.length,l,i]);return p?(0,r.jsx)(ef.t,{p:"xs",withBorder:!0,shadow:"md",pos:"absolute",top:8,right:8,style:{zIndex:2},miw:400,maw:500,role:"search","aria-label":"Table search",children:(0,r.jsxs)(k.Y,{gap:"xs",align:"center",wrap:"nowrap",children:[(0,r.jsx)(eb.k,{ref:h,placeholder:"Find in table...",value:e,onChange:e=>t(e.target.value),onKeyDown:b,size:"xs",style:{flex:1,minWidth:0},"aria-label":"Search table contents","aria-describedby":s.length>0?"search-match-count":void 0,rightSection:e?(0,r.jsx)(N.N,{onClick:()=>t(""),display:"flex",style:{alignItems:"center"},title:"Clear search","aria-label":"Clear search",children:(0,r.jsx)(ey.A,{size:14})}):null}),s.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(T.E,{id:"search-match-count",size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},"aria-live":"polite",children:[a+1," of ",s.length]}),(0,r.jsxs)(k.Y,{gap:4,children:[(0,r.jsx)(N.N,{onClick:l,display:"flex",style:{alignItems:"center"},title:"Previous match (Shift+Enter)","aria-label":"Previous match",children:(0,r.jsx)(ev.A,{size:16})}),(0,r.jsx)(N.N,{onClick:i,display:"flex",style:{alignItems:"center"},title:"Next match (Enter)","aria-label":"Next match",children:(0,r.jsx)(ej.A,{size:16})})]})]}):e?(0,r.jsx)(T.E,{size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},role:"status","aria-live":"polite",children:"No matches"}):null,(0,r.jsx)(N.N,{onClick:x,display:"flex",style:{alignItems:"center"},title:"Close search (Esc)","aria-label":"Close search",children:(0,r.jsx)(ey.A,{size:16})})]})}):null},eS=e=>{let t,s,n,l=(0,a.c)(17),{searchQuery:i,matchIndices:o,currentMatchIndex:c,dedupedRows:d,tableRows:u,getRowId:m,onMatchClick:h}=e;if(!i||0===o.length||0===u.length)return null;if(l[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",zIndex:1},l[0]=t):t=l[0],l[1]!==c||l[2]!==d||l[3]!==m||l[4]!==o||l[5]!==h||l[6]!==u){let e;l[8]!==c||l[9]!==d||l[10]!==m||l[11]!==o.length||l[12]!==h||l[13]!==u?(e=(e,t)=>{let s=d[e];if(!s)return null;let a=u.findIndex(e=>m(e.original)===m(s));if(-1===a)return null;let n=a/u.length*100,l=100/u.length,i=t===c;return(0,r.jsx)(C.a,{pos:"absolute",top:`${n}%`,right:0,w:"100%",h:`${l}%`,bg:i?"var(--mantine-color-orange-5)":"var(--mantine-color-yellow-5)",style:{cursor:"pointer",pointerEvents:"auto",minHeight:1,maxHeight:4},onClick:()=>h(t),title:`Match ${t+1} of ${o.length}`},`match-indicator-${e}`)},l[8]=c,l[9]=d,l[10]=m,l[11]=o.length,l[12]=h,l[13]=u,l[14]=e):e=l[14],s=o.map(e),l[1]=c,l[2]=d,l[3]=m,l[4]=o,l[5]=h,l[6]=u,l[7]=s}else s=l[7];return l[15]!==s?(n=(0,r.jsx)(C.a,{pos:"absolute",right:0,top:0,bottom:0,w:8,style:t,children:s}),l[15]=s,l[16]=n):n=l[16],n};var ew=s(88339),eE=s(17421),eC=s(41038),ek=s(81055),eN=s(70114);let eA=(0,n.memo)(e=>{let t,s,n,l,o,c=(0,a.c)(17),{columnsLength:d,children:u,virtualKey:m,source:h,rowId:p,measureElement:x,virtualIndex:g}=e,f=(()=>{let e,t=(0,a.c)(3),[,s]=(0,eC.ZA)("rowWhere"),[,r]=(0,eC.ZA)("rowSource");return t[0]!==s||t[1]!==r?(e=(e,t)=>{s(e),r(t??null)},t[0]=s,t[1]=r,t[2]=e):e=t[2],e})(),b=`expanded-row-${p}`,y=`${m}-expanded`;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=i()("mx-2 mb-2 rounded",eu().expandedRowContent),c[0]=t):t=c[0],c[1]!==f||c[2]!==p||c[3]!==h?.id?(s=f&&(0,r.jsx)("button",{type:"button",className:i()("position-absolute top-0 end-0 mt-1 me-1 p-1 border-0 bg-transparent text-muted rounded",eu().expandButton),onClick:()=>f(p,h?.id),title:"Open in sidebar","aria-label":"Open in sidebar",style:{zIndex:1,fontSize:"12px",lineHeight:1},children:(0,r.jsx)(ek.A,{size:14})}),c[1]=f,c[2]=p,c[3]=h?.id,c[4]=s):s=c[4],c[5]!==u||c[6]!==s?(n=(0,r.jsx)("div",{className:t,children:(0,r.jsx)("div",{className:"position-relative",children:(0,r.jsxs)("div",{className:"px-3 pt-2 position-relative",children:[s,u]})})}),c[5]=u,c[6]=s,c[7]=n):n=c[7],c[8]!==d||c[9]!==n?(l=(0,r.jsx)("td",{colSpan:d,className:"p-0 border-0",children:n}),c[8]=d,c[9]=n,c[10]=l):l=c[10],c[11]!==x||c[12]!==b||c[13]!==y||c[14]!==l||c[15]!==g?(o=(0,r.jsx)("tr",{"data-testid":b,className:eu().expandedRow,"data-index":g,ref:x,children:l},y),c[11]=x,c[12]=b,c[13]=y,c[14]=l,c[15]=g,c[16]=o):o=c[16],o}),eT=(0,n.memo)(e=>{let t,s,n,l,o,c,d=(0,a.c)(16),{rowId:u,isExpanded:m,highlightedLineId:h,toggleRowExpansion:p}=e,x=h===u,g=h!==u;d[0]!==m||d[1]!==x||d[2]!==g?(t=i()(eu().expandButton,{[eu().expanded]:m,"text-brand":x,"text-muted":g}),d[0]=m,d[1]=x,d[2]=g,d[3]=t):t=d[3],d[4]!==u||d[5]!==p?(s=e=>{e.stopPropagation(),p(u)},d[4]=u,d[5]=p,d[6]=s):s=d[6];let f=`${m?"Collapse":"Expand"} log details`;return d[7]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(eN.A,{size:16}),d[7]=n):n=d[7],d[8]!==m||d[9]!==t||d[10]!==s||d[11]!==f?(l=(0,r.jsx)("button",{type:"button",className:t,onClick:s,"aria-expanded":m,"aria-label":f,children:n}),d[8]=m,d[9]=t,d[10]=s,d[11]=f,d[12]=l):l=d[12],d[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("span",{className:eu().expandButtonSeparator}),d[13]=o):o=d[13],d[14]!==l?(c=(0,r.jsxs)("span",{className:"d-flex align-items-center justify-content-center",children:[l,o]}),d[14]=l,d[15]=c):c=d[15],c});eT.displayName="ExpandButton";var e$=s(61629);let eI="NULL",eR={duration:e=>e.duration>=0?e.duration:eI,severityText:e=>e.severityText??e.statusCode,default:(e,t)=>e[t]},ez=e=>e[Z.ZO.ID];function eL(e,t){return(eR[e]??eR.default)(t,e)}let eM=()=>null,eD=e=>{let t,s,n,l,i,o,c,d,u,m,h=(0,a.c)(17),{data:p,dateRange:x,color:_}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={position:"relative",width:"100%",height:"100%"},s={position:"absolute",left:0,right:0,bottom:0,top:0},h[0]=t,h[1]=s):(t=h[0],s=h[1]),h[2]===Symbol.for("react.memo_cache_sentinel")?(n={top:4,left:0,right:4,bottom:0},h[2]=n):n=h[2];let S=x[0].getTime()/1e3,w=x[1].getTime()/1e3;h[3]!==S||h[4]!==w?(l=[S,w],h[3]=S,h[4]=w,h[5]=l):l=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(i={fontSize:12,fontFamily:"IBM Plex Mono, monospace"},h[6]=i):i=h[6],h[7]!==l?(o=(0,r.jsx)(g.W,{dataKey:"bucket",domain:l,interval:"preserveStartEnd",scale:"time",type:"number",tickFormatter:eB,minTickGap:50,tick:i}),h[7]=l,h[8]=o):o=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(f.h,{width:40,minTickGap:25,tickFormatter:eH,tick:{fontSize:12,fontFamily:"IBM Plex Mono, monospace"}}),h[9]=c):c=h[9];let E=_||es.lm[0];return h[10]!==E?(d=(0,r.jsx)(b.y,{isAnimationActive:!1,dataKey:"count",stackId:"a",fill:E,maxBarSize:24}),h[10]=E,h[11]=d):d=h[11],h[12]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)(y.m,{content:(0,r.jsx)(eM,{})}),h[12]=u):u=h[12],h[13]!==p||h[14]!==d||h[15]!==o?(m=(0,r.jsx)("div",{style:t,children:(0,r.jsx)("div",{style:s,children:(0,r.jsx)(v.u,{width:"100%",height:"100%",minWidth:0,children:(0,r.jsxs)(j.E,{width:500,height:300,data:p,syncId:"hdx",syncMethod:"value",margin:n,children:[o,c,d,u]})})})}),h[13]=p,h[14]=d,h[15]=o,h[16]=m):m=h[16],m},eF=e=>{let t,s,n,l,i=(0,a.c)(12),{opened:o,onClose:c,config:d}=e;i[0]!==d?(t=["SqlModal",d],i[0]=d,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(s={queryKey:t,placeholderData:eV,enabled:o},i[2]=o,i[3]=t,i[4]=s):s=i[4];let{data:u,isLoading:m}=(0,q.zu)(d,s);return i[5]!==m||i[6]!==u?(n=u?(0,r.jsx)(ew.V,{data:u,enableCopy:!0}):m?(0,r.jsxs)("div",{className:"text-center my-2",children:[(0,r.jsx)("div",{className:"d-inline-block me-2",children:(0,r.jsx)(I.A,{size:14,className:"spin-animate"})}),"Loading SQL..."]}):(0,r.jsx)("div",{className:"text-center my-2",children:"No SQL available"}),i[5]=m,i[6]=u,i[7]=n):n=i[7],i[8]!==c||i[9]!==o||i[10]!==n?(l=(0,r.jsx)(w.a,{opened:o,onClose:c,title:"Generated SQL",size:"auto",children:n}),i[8]=c,i[9]=o,i[10]=n,i[11]=l):l=i[11],l},eO=(0,n.memo)(({tableId:e,displayedColumns:t,fetchNextPage:s,hasNextPage:l,highlightedLineId:c,isLive:u,isLoading:h,rows:p,generateRowId:g,onInstructionsClick:f,onRowDetailsClick:b,onScroll:y,onSettingsClick:v,onShowPatternsClick:j,wrapLines:S=!1,columnNameMap:w,showServiceColumn:O=!0,dedupRows:H,isError:V,error:G,columnTypeMap:K,dateRange:J,loadingDate:U,config:er,onChildModalOpen:ea,renderRowDetails:en,source:el,onExpandedRowsChange:ei,collapseAllRows:eo,enableSorting:ec=!1,onSortingChange:ed,sortOrder:em,showExpandButton:ep=!0,getRowWhere:ef,variant:eb="default"})=>{let ey=(0,n.useMemo)(()=>{let e=new Set;return(H?p.filter(t=>{let s=g(t);return!e.has(s.where)&&(e.add(s.where),!0)}):p).map(e=>{let t=g(e);return{...e,[Z.ZO.ID]:t.where,[Z.ZO.ALIAS_WITH]:t.aliasWith}})},[p,H,g]),ev=(0,n.useCallback)(e=>{b?.(e)},[b]),{userPreferences:{isUTC:ej}}=(0,et.HW)(),[eC,ek]=(0,es.Mj)(`${e}-column-sizes`,{}),[eN,eR]=(0,n.useState)(null),eM=(0,n.useCallback)(e=>(e&&eR(e),()=>{eR(null)}),[]),{data:eO}=(0,q.Kc)(er),eP=(0,es.ZC)(u);(0,n.useEffect)(()=>{u&&!1===eP&&null!=eN&&(eN.scrollTop=0)},[u,eP,eN]);let eW=(0,n.useMemo)(()=>(function(e){let t={},s=Math.min(e.length,100);for(let r=0;r<s;r++){let s=e[r];Object.keys(s).forEach(e=>{let r=s[e];(r?.length||0)>0&&512>(r?.length||0)&&d()(r)&&null!=(0,es.lO)(r)&&(t[e]=(t[e]??0)+1)})}let r=0,a="";for(let[e,s]of Object.entries(t))s>r&&(r=s,a=e);if(r>0)return a})(ey),[ey]),{csvData:eB,maxRows:eH,isLimited:eV}=(0,X.u)(ey,t.map(e=>({dataKey:e,displayName:w?.[e]??e}))),{expandedRows:eq,toggleRowExpansion:eX,collapseAllRows:eG}=(e=>{let t,s,r,l,i=(0,a.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(t={},i[0]=t):t=i[0];let[o,c]=(0,n.useState)(t);i[1]!==e?(s=t=>{c(s=>{let r={...s,[t]:!s[t]},a=Object.values(r).some(Boolean);return e?.(a),r})},i[1]=e,i[2]=s):s=i[2];let d=s;i[3]!==e?(r=()=>{c({}),e?.(!1)},i[3]=e,i[4]=r):r=i[4];let u=r;return i[5]!==u||i[6]!==o||i[7]!==d?(l={expandedRows:o,toggleRowExpansion:d,collapseAllRows:u},i[5]=u,i[6]=o,i[7]=d,i[8]=l):l=i[8],l})(ei);(0,n.useEffect)(()=>{eo&&eG()},[eo,eG]);let eK=function({rows:e,searchableColumns:t,debounceMs:s=300,onVisibilityChange:r}){let[a,l]=(0,n.useState)(""),[i]=(0,Y.o)(a,s),[o,c]=(0,n.useState)(0),[d,u]=(0,n.useState)([]),[m,h]=(0,n.useState)(!1),p=(0,n.useRef)(!1);(0,n.useEffect)(()=>{if(!i.trim()){u([]),c(0);return}let s=i.toLowerCase(),r=[];e.forEach((e,a)=>{t.map(t=>{let s=e[t];return null!=s?String(s).toLowerCase():""}).join(" ").includes(s)&&r.push(a)});let a=d.length;u(r),0===a&&r.length>0?(c(0),p.current=!0):r.length>0&&o>=r.length&&(c(r.length-1),p.current=!0)},[i,e,t]),(0,n.useEffect)(()=>{r?.(m)},[m,r]);let x=(0,n.useCallback)(e=>{l(e),e||(u([]),c(0),p.current=!1)},[]),g=(0,n.useCallback)(()=>{p.current=!0,c(e=>e>0?e-1:d.length-1)},[d.length]),f=(0,n.useCallback)(()=>{p.current=!0,c(e=>e<d.length-1?e+1:0)},[d.length]),b=(0,n.useCallback)(e=>{p.current=!0,c(e)},[]),y=(0,n.useCallback)(()=>{l(""),u([]),c(0),p.current=!1,h(!1)},[]),v=(0,n.useCallback)(()=>{p.current=!1},[]);return{searchQuery:i,inputValue:a,setInputValue:l,matchIndices:d,currentMatchIndex:o,isSearchVisible:m,setIsSearchVisible:h,shouldScrollToMatch:p.current,clearShouldScrollToMatch:v,handlePreviousMatch:g,handleNextMatch:f,handleMatchClick:b,handleSearchChange:x,resetSearch:y}}({rows:ey,searchableColumns:t,debounceMs:300}),eJ=(0,n.useMemo)(()=>[...ep?[{id:"expand-btn",accessorKey:Z.ZO.ID,header:()=>"",cell:e=>{let t=e.getValue(),s=eq[t]??!1;return(0,r.jsx)(eT,{rowId:t,isExpanded:s,highlightedLineId:c,toggleRowExpansion:eX})},size:32,enableResizing:!1,enableSorting:!1,meta:{className:"text-center"}}]:[],...t.map((e,s)=>{let a=K.get(e)?._type,n=a===_.A2.Date,l=e===eW;return{meta:{column:e,jsColumnType:a},id:eO?.[e]?`"${e}"`:e,enableSorting:a!==_.A2.Dynamic,accessorFn:m()(eL)(e),header:`${w?.[e]??e}${n?ej?" (UTC)":" (Local)":""}`,cell:t=>{let s=t.getValue();if("__hdx_pattern_trend"===e)return(0,r.jsx)("div",{style:{height:50,width:"100%"},children:(0,r.jsx)(eD,{data:s.data,dateRange:s.dateRange,color:(0,es.aw)(t.row.original.severityText??t.row.original.statusCode)})});if(n){let e=new Date(s);return(0,r.jsx)("span",{className:"text-muted",children:(0,r.jsx)(ee.H,{value:e,format:"withMs"})})}let a="string"==typeof s?s:`${s}`;if(e===eW)return(0,r.jsx)(e$.A,{level:a});let l=a.length>500?`${a.slice(0,500)}...`:a,o=!!eK.searchQuery&&eK.matchIndices.length>0&&eK.matchIndices[eK.currentMatchIndex]===t.row.index,c=eK.searchQuery?((e,t,s={})=>{if(!t.trim())return e;let a=s.isCurrentMatch?s.currentMatchBackgroundColor||"var(--mantine-color-orange-5)":s.backgroundColor||"var(--mantine-color-yellow-3)",n=e.toLowerCase(),l=t.toLowerCase(),i=[],o=0,c=n.indexOf(l);for(;-1!==c;)c>o&&i.push(e.slice(o,c)),i.push((0,r.jsx)("mark",{style:{backgroundColor:a,color:s.textColor||"var(--color-text-inverted)",padding:0},children:e.slice(c,c+t.length)},`${c}-${o}`)),o=c+t.length,c=n.indexOf(l,o);return o<e.length&&i.push(e.slice(o)),i.length>0?(0,r.jsx)(r.Fragment,{children:i}):e})(l,eK.searchQuery,{isCurrentMatch:o}):l;return(0,r.jsx)("span",{className:i()({"text-muted":s===eI}),children:c})},size:s===t.length-1?Q.k:eC[e]??(n?170:l?115:160)}})],[ej,c,t,eC,w,K,eW,eq,eX,ep,eO,eK.searchQuery,eK.matchIndices,eK.currentMatchIndex]),eZ=(0,n.useCallback)(e=>{if(e){let{scrollHeight:t,scrollTop:r,clientHeight:a}=e;t-r-a<500&&!h&&l&&s?.({cancelRefetch:!1})}},[s,h,l]);(0,n.useEffect)(()=>{eZ(eN)},[eZ,eN]);let eY=(0,n.useMemo)(()=>{let t={data:ey,columns:eJ,getCoreRowModel:(0,P.HT)(),enableSorting:ec,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(em??[]);ed?.(t??null)}else ed?.(e??null)},state:{sorting:em??[]},enableColumnResizing:!0,columnResizeMode:"onChange"};return e?{...t,state:{columnSizing:eC},onColumnSizingChange:e=>{let t=e instanceof Function?e():e;ek({...eC,...t})}}:t},[eJ,ey,e,em,ec,ed,eC,ek]),eU=(0,W.N4)(eY),{rows:eQ}=eU.getRowModel(),e0=(0,B.Te)({count:eQ.length,getScrollElement:(0,n.useCallback)(()=>eN,[eN]),estimateSize:(0,n.useCallback)(()=>23,[]),overscan:30,paddingEnd:20}),e1=e0.getVirtualItems(),e2=e0.getTotalSize(),[e3,e5]=(0,n.useMemo)(()=>e1.length>0?[Math.max(0,e1[0].start-e0.options.scrollMargin),Math.max(0,e2-e1[e1.length-1].end)]:[0,0],[e1,e0.options.scrollMargin,e2]),[e4,e6]=(0,n.useState)(!1),[e7,e9]=(0,es.Mj)(`${e}-wrap-lines`,S??!1),[e8,te]=(0,n.useState)(!1),tt=e=>{te(e),ea?.(e)};(0,n.useEffect)(()=>{if(eK.shouldScrollToMatch)if(eK.matchIndices.length>0&&e0&&eK.currentMatchIndex<eK.matchIndices.length&&eK.searchQuery.trim()){let e=ey[eK.matchIndices[eK.currentMatchIndex]];if(e){let t=eQ.findIndex(t=>ez(t.original)===ez(e));-1!==t?requestAnimationFrame(()=>{e0.scrollToIndex(t,{align:"center"}),eK.clearShouldScrollToMatch()}):eK.clearShouldScrollToMatch()}else eK.clearShouldScrollToMatch()}else eK.clearShouldScrollToMatch()},[eK.shouldScrollToMatch,eK.currentMatchIndex,eK.matchIndices,eK.searchQuery,eK.clearShouldScrollToMatch,e0,eQ,ey]),(0,n.useEffect)(()=>{if(e4||!c||null==e0)return;let e=ey.findIndex(e=>ez(e)===c);-1==e&&c?ey.length<1e3&&!h&&l&&s?.({cancelRefetch:!1}):(e6(!0),null==e0.getVirtualItems().find(t=>t.index===e)&&e0.scrollToIndex(e,{align:"center"}))},[ey,c,s,e0,e4,h,l]);let ts=(0,n.useCallback)(e=>{if(null==c)return;let t=ey.findIndex(e=>ez(e)===c)+e;t<0||t>=ey.length||ev(ey[t])},[c,ev,ey]);return(0,x.vC)(["ArrowRight","ArrowDown","j"],e=>{e.preventDefault(),ts(1)}),(0,x.vC)(["ArrowLeft","ArrowUp","k"],e=>{e.preventDefault(),ts(-1)}),(0,r.jsx)(E.s,{direction:"column",h:"100%",children:(0,r.jsxs)(C.a,{pos:"relative",style:{flex:1,minHeight:0},children:[(0,r.jsx)(e_,{searchQuery:eK.inputValue,onSearchChange:eK.handleSearchChange,matchIndices:eK.matchIndices,currentMatchIndex:eK.currentMatchIndex,onPreviousMatch:eK.handlePreviousMatch,onNextMatch:eK.handleNextMatch,isVisible:eK.isSearchVisible,onVisibilityChange:eK.setIsSearchVisible,containerRef:eN}),(0,r.jsxs)("div",{"data-testid":"search-results-table",className:i()("overflow-auto h-100 fs-8",eu().tableWrapper,{[eu().muted]:"muted"===eb}),onScroll:e=>{if(eZ(e.target),null!=e.target){let{scrollTop:t}=e.target;y?.(t)}},ref:eM,children:[er&&(0,r.jsx)(eF,{opened:e8,onClose:()=>tt(!1),config:er}),(0,r.jsxs)("table",{className:i()("w-100",eu().table),id:e,children:[(0,r.jsx)("thead",{className:eu().tableHead,children:t.length>0&&eU.getHeaderGroups().map(t=>(0,r.jsx)("tr",{children:t.headers.map((s,a)=>{let n=a===t.headers.length-1;return(0,r.jsx)(eg.A,{header:s,isLast:n,lastItemButtons:(0,r.jsxs)(k.Y,{gap:8,mr:8,children:[e&&Object.keys(eC).length>0&&(0,r.jsx)(N.N,{onClick:()=>ek({}),title:"Reset Column Widths",children:(0,r.jsx)(A.m,{label:"Reset Column Widths",children:(0,r.jsx)(R.A,{size:16})})}),er&&(0,r.jsx)(N.N,{onClick:()=>tt(!0),title:"Show Generated SQL",tabIndex:0,children:(0,r.jsx)(A.m,{label:"Show Generated SQL",children:(0,r.jsx)(z.A,{size:16})})}),(0,r.jsx)(N.N,{onClick:()=>e9(e=>!e),title:`${e7?"Disable":"Enable"}  Wrap Lines`,children:(0,r.jsx)(A.m,{label:`${e7?"Disable":"Enable"} Wrap Lines`,children:e7?(0,r.jsx)(L.A,{size:16}):(0,r.jsx)(M.A,{size:16})})}),(0,r.jsx)(eE.P,{data:eB,filename:`hyperdx_search_results_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}`,className:"fs-6",children:(0,r.jsx)(A.m,{label:`Download Table as CSV (max ${eH.toLocaleString()} rows)${eV?" - data truncated":""}`,children:(0,r.jsx)(D.A,{size:16})})}),null!=v&&(0,r.jsx)(N.N,{onClick:()=>v(),title:"Settings",children:(0,r.jsx)(A.m,{label:"Settings",children:(0,r.jsx)(F.A,{size:16})})})]})},s.id)})},t.id))}),(0,r.jsxs)("tbody",{children:[e3>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${e3}px`}})}),e1.map(e=>{let t=eQ[e.index],s=ez(t.original),a=eq[s]??!1;return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsxs)("tr",{"data-testid":`table-row-${s}`,className:i()(eu().tableRow,{[eu().tableRow__selected]:c&&c===s}),"data-index":e.index,ref:e0.measureElement,children:[ep&&(0,r.jsx)("td",{className:"align-top overflow-hidden",style:{width:"40px"},children:(0,W.Kv)(t.getVisibleCells()[0].column.columnDef.cell,t.getVisibleCells()[0].getContext())}),(0,r.jsx)("td",{className:"align-top overflow-hidden p-0",colSpan:eJ.length-!!ep,children:(0,r.jsxs)("button",{type:"button",className:i()(eu().rowContentButton,{[eu().isWrapped]:e7,[eu().isTruncated]:!e7}),onClick:e=>{ev(t.original)},"aria-label":"View details for log entry",children:[t.getVisibleCells().slice(+!!ep).map(e=>{let t=e.column.columnDef.meta?.className,s=e.column.getSize(),a=e.getValue();return(0,r.jsx)("div",{className:i()("flex-shrink-0 overflow-hidden position-relative",t),style:{width:s===Q.k?"auto":`${s}px`,flex:s===Q.k?"1":"none"},children:(0,r.jsx)("div",{className:eu().fieldTextContainer,children:(0,r.jsx)(eh,{cellValue:a,wrapLinesEnabled:e7,tableContainerRef:eN,columnName:e.column.columnDef.meta?.column,isChart:e.column.columnDef.meta?.column==="__hdx_pattern_trend",children:(0,W.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)}),ef&&(0,r.jsx)(ex,{row:t.original,getRowWhere:ef,sourceId:el?.id,isWrapped:e7,onToggleWrap:()=>e9(!e7)})]})})]}),ep&&a&&(0,r.jsx)(eA,{columnsLength:eJ.length,virtualKey:e.key.toString(),source:el,rowId:s,measureElement:e0.measureElement,virtualIndex:e.index,children:en?.({id:s,aliasWith:t.original[Z.ZO.ALIAS_WITH],...t.original})})]},e.key)}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:800,children:(0,r.jsx)("div",{className:"rounded fs-7 bg-muted text-center d-flex align-items-center justify-content-center mt-3",children:h?(0,r.jsxs)("div",{className:"my-3",children:[(0,r.jsx)("div",{className:"d-inline-block",children:(0,r.jsx)(I.A,{size:14,className:"spin-animate"})})," ",null!=U&&(0,r.jsxs)(r.Fragment,{children:["Searched ",(0,r.jsx)(ee.H,{value:U}),"."," "]}),"Loading results",J?.[0]!=null&&J?.[1]!=null?(0,r.jsxs)(r.Fragment,{children:[" ","across"," ",(0,o.A)(J?.[1],J?.[0])," ","(",(0,r.jsx)(ee.H,{value:J?.[0],format:"withYear"})," ","to"," ",(0,r.jsx)(ee.H,{value:J?.[1],format:"withYear"}),")"]}):null,"..."]}):!1==l&&!1==h&&ey.length>0?(0,r.jsx)("div",{className:"my-3",children:"End of Results"}):V?(0,r.jsxs)("div",{className:"my-3",children:[(0,r.jsx)(T.E,{ta:"center",size:"sm",children:"Error loading results, please check your query or try again."}),(0,r.jsxs)(C.a,{p:"sm",children:[(0,r.jsx)(C.a,{mt:"sm",children:(0,r.jsx)($.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:G?.message})}),G instanceof _.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(E.s,{w:"100%",ta:"initial",align:"center",justify:"center",children:(0,r.jsx)(ew.V,{data:G?.query})})]})]})]}):!1==l&&!1==h&&0===ey.length?(0,r.jsxs)("div",{className:"my-3","data-testid":"db-row-table-no-results",children:["No results found.",(0,r.jsx)(T.E,{mt:"sm",children:"Try checking the query explainer in the search bar if there are any search syntax issues."}),J?.[0]!=null&&J?.[1]!=null?(0,r.jsxs)(T.E,{mt:"sm",children:["Searched Time Range:"," ",(0,o.A)(J?.[1],J?.[0])," ","(",(0,r.jsx)(ee.H,{value:J?.[0],format:"withYear"})," ","to"," ",(0,r.jsx)(ee.H,{value:J?.[1],format:"withYear"}),")"]}):null]}):(0,r.jsx)("div",{})})})}),e5>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${e5}px`}})})]})]})]}),(0,r.jsx)(eS,{searchQuery:eK.searchQuery,matchIndices:eK.matchIndices,currentMatchIndex:eK.currentMatchIndex,dedupedRows:ey,tableRows:eQ,getRowId:ez,onMatchClick:eK.handleMatchClick})]})})});function eP(e){let t,s,r=(0,a.c)(12);r[0]!==e.connection||r[1]!==e.from.databaseName||r[2]!==e.from.tableName?(t={databaseName:e.from.databaseName,tableName:e.from.tableName,connectionId:e.connection},r[0]=e.connection,r[1]=e.from.databaseName,r[2]=e.from.tableName,r[3]=t):t=r[3];let{data:n}=(0,G.Z2)(t),l=n?.primary_key,i=n?.partition_key;e:{let t,a;if(null==l||null==i){s=void 0;break e}r[4]!==e.select||r[5]!==i||r[6]!==l?(t=function(e,t,s){let r=new Set([...(0,_.bZ)(s),...(0,_.bZ)(t)]);if("string"==typeof e){let t=new Set((0,S.AB)(e)),s=[...r].filter(e=>!t.has(e));return{select:[...t,...s].join(","),additionalKeysLength:s.length}}{let t=[...r].map(e=>({valueExpression:e}));return{select:[...e,...t],additionalKeysLength:t.length}}}(e.select,l,i),r[4]=e.select,r[5]=i,r[6]=l,r[7]=t):t=r[7];let{select:n,additionalKeysLength:o}=t;r[8]!==o||r[9]!==e||r[10]!==n?(a={...e,select:n,additionalKeysLength:o},r[8]=o,r[9]=e,r[10]=n,r[11]=a):a=r[11],s=a}return s}let eW=(0,n.memo)(function({config:e,sourceId:t,onError:s,onRowDetailsClick:a,highlightedLineId:l,enabled:i=!0,isLive:o=!1,queryKeyPrefix:c,onScroll:d,denoiseResults:u=!1,onChildModalOpen:m,onExpandedRowsChange:h,collapseAllRows:x,showExpandButton:g=!0,renderRowDetails:f,onSortingChange:b,initialSortBy:y,variant:v="default"}){var j;let{data:S}=H.Ay.useMe(),[w,E]=(0,n.useState)(y?.[0]??null),k=(0,n.useMemo)(()=>w?[w]:[],[w]),N=(0,n.useCallback)(e=>{b?.(e),E(e?.[0]??null)},[E,b]),A=(0,es.ZC)(t);(0,n.useEffect)(()=>{A&&A!==t&&N(null)},[t]);let $=(0,es.ZC)(y);(0,n.useEffect)(()=>{let e=y?.[0]??null,t=$?.[0]??null;JSON.stringify(e)!==JSON.stringify(t)&&E(e)},[y,$]);let I=(0,n.useMemo)(()=>{let t={...(0,V.Nz)(S?.team),...e};return k.length&&(t.orderBy=k.map(e=>({valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}))),t},[S,e,k]),R=eP(I),{data:z,fetchNextPage:L,hasNextPage:M,isFetching:D,isError:F,error:P}=(0,K.A)(R??e,{enabled:i&&null!=R&&("string"==typeof(j=e.select)?j.split(",").filter(e=>e.trim().length>0).length:j.length)>0,isLive:o,queryKeyPrefix:c}),W=(0,n.useMemo)(()=>(function(e,t){if(null==e||null==t)return new Map;let s=e.slice(0,e.length-t);return new Map(s?.map(e=>[e.name,{...e,_type:(0,_.rj)(e.type)}]))})(z?.meta,R?.additionalKeysLength),[z,R]),B=(0,n.useMemo)(()=>Array.from(W.keys()),[W]),q=(0,n.useMemo)(()=>B.filter(e=>{let t=W.get(e)?._type;return(0,_.Zo)(t)}),[B,W]),X=(0,n.useMemo)(()=>(z?.data??[]).map(e=>{let t={...e};return q.forEach(s=>{W.get(s)?._type===_.A2.JSON?t[s]=JSON.stringify(e[s]).replace(/\//g,"\\/"):t[s]=JSON.stringify(e[s])}),t}),[z,q,W]),G=(0,n.useMemo)(()=>(0,_.D7)(z?.chSql??{sql:"",params:{}}),[z]),Y=(0,Z.Ay)({meta:z?.meta,aliasMap:G}),Q=(0,n.useCallback)(e=>a?.(Y(e)),[a,Y]);(0,n.useEffect)(()=>{F&&s&&P&&s(P)},[F,s,P]);let{data:ee}=(0,U.Fo)({id:t}),et=B[B.length-1],er=(0,J.nt)({config:e,samples:1e4,bodyValueExpression:et??"",severityTextExpression:ee?.severityTextExpression??"",totalCount:void 0,enabled:u}),ea=(0,O.I)({queryKey:["noisy-patterns",e],queryFn:async()=>Object.values(er.data).filter(e=>e.count/(er.sampledRowCount??1)>.1),enabled:u&&null!=er.data&&Object.values(er.data).length>0&&null!=er.miner}),en=(0,n.useMemo)(()=>ea.data?.map(e=>e.id)??[],[ea.data]),el=(0,O.I)({queryKey:["denoised-rows",e,u,...u?[X]:[],en,et],queryFn:async()=>{if(!u)return[];if(0===en.length)return X;let e=await er.miner?.matchLogs(X.map(e=>e[et]));return X.filter((t,s)=>{let r=e?.[s];return!en.includes(`${r}`)})},placeholderData:(t,s)=>{if(s?.queryKey?.[0]==="denoised-rows"&&s?.queryKey?.[1]===e)return t},gcTime:o?p()("30s"):p()("5m"),enabled:u&&ea.isSuccess&&X.length>0&&null!=er.miner}),ei=u?D||el.isFetching||ea.isFetching||er.isLoading:D,eo=z?.window?.direction==="ASC"?z?.window?.endTime:z?.window?.startTime;return(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsxs)(C.a,{mb:"xxs",px:"sm",children:[(0,r.jsx)(T.E,{fw:"bold",fz:"xs",mb:"xxs",children:"Removed Noisy Event Patterns"}),(0,r.jsxs)(C.a,{mah:100,style:{overflow:"auto"},children:[ea.data?.map(e=>(0,r.jsx)(T.E,{fz:"xs",children:e.pattern},e.id)),0===en.length&&(0,r.jsx)(T.E,{fz:"xs",children:"No noisy patterns found"})]})]}),(0,r.jsx)(eO,{isLive:o,wrapLines:!1,displayedColumns:B,highlightedLineId:l,rows:u?el?.data??[]:X,renderRowDetails:f,isLoading:ei,fetchNextPage:L,hasNextPage:M,onRowDetailsClick:Q,onScroll:d,generateRowId:Y,isError:F,error:P??void 0,columnTypeMap:W,dateRange:e.dateRange,loadingDate:eo,config:I,onChildModalOpen:m,source:ee,onExpandedRowsChange:h,collapseAllRows:x,showExpandButton:g,enableSorting:!0,onSortingChange:N,sortOrder:k,getRowWhere:Y,variant:v})]})});function eB(){return""}function eH(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function eV(e){return e??""}},46466:(e,t,s)=>{"use strict";s.d(t,{Z:()=>k});var r=s(6029),a=s(75155),n=s(55729),l=s(75828),i=s.n(l),o=s(1909),c=s(66692),d=s(95516),u=s(15215),m=s(36417),h=s(22623),p=s(43517),x=s(63085),g=s(78253),f=s(67747),b=s(95352),y=s(78550),v=s(92917),j=s(74860),_=s(71470),S=s.n(_);let w="150px",E={lineNumbers:!1,foldGutter:!1,highlightActiveLine:!1,highlightActiveLineGutter:!1};function C({tableConnection:e,tableConnections:t,filterField:s,onChange:a,placeholder:l,onLanguageChange:o,language:_,onSubmit:C,error:k,value:N,size:A,label:T,disableKeywordAutocomplete:$,enableHotkey:I,tooltipText:R,additionalSuggestions:z=[],queryHistoryType:L,parentRef:M,allowMultiline:D=!0}){let{colorScheme:F}=(0,m.C)(),{data:O}=(0,y.Sh)((e?[e]:t)??[]),P=(0,n.useMemo)(()=>s?O?.filter(s):O,[O,s]),[W,B]=(0,v.mk)(L),H=(0,n.useCallback)((e,t,s,r)=>{e.dispatch({changes:{from:t,to:s,insert:r}}),(0,d.N)(e),B(r),C&&C()},[C,B]),V=(0,n.useMemo)(()=>()=>({from:0,options:W.map(e=>({label:e,section:"Search History",type:"keyword",apply:(t,s,r,a)=>{H(t,r,a,e)}}))}),[W,H]),[q,X]=(0,n.useState)(!1),G=(0,n.useRef)(null),K=(0,n.useRef)(new b.xx),J=(0,n.useCallback)(e=>{let t=e.state.doc.toString(),s=[...P?.map(e=>e.path.length>1?`${e.path[0]}['${e.path[1]}']`:e.path[0])??[],...z],r=(0,u.ll)({dialect:u.fy.define({keywords:s.join(" ")+($?"":" AND OR NOT IN LIKE ILIKE BETWEEN ASC DESC intDiv intDivOrZero isNaN moduloOrZero abs empty notEmpty length arrayConcat has hasAll hasAny indexOf arrayCount countEqual arrayUnion arrayIntersect arrayMap arrayFilter arraySort flatten arrayCompact arrayMin arrayMax arraySum arrayAvg if multiIf floor ceiling truncate round timestamp toTimeZone toYear toMonth toWeek toDayOfYear toDayOfMonth toDayOfWeek toUnixTimestamp toTime lower upper substring trim dictGet dictGetOrDefault dictGetOrNull")})}),a=(0,d.yU)({compareCompletions:(e,t)=>0,override:[V]});e.dispatch({effects:K.current.reconfigure(t.length>0?r:a)})},[P,z,V,$]);(0,n.useEffect)(()=>{null!=G.current&&null!=G.current.view&&J(G.current.view)},[J]),(0,c.vC)(["/","s"],()=>{I&&G.current?.view?.focus()},{preventDefault:!0,enableOnFormTags:!1,enableOnContentEditable:!1},[I]);let Z=(0,n.useMemo)(()=>null==M?[]:[(0,b.vX)({parent:M,tooltipSpace:e=>{let t=e.dom.getBoundingClientRect(),s=M.getBoundingClientRect();return{...t,right:t.right??0,left:s.left??t.left,top:s.top??t.top,bottom:s.bottom??t.bottom}}})],[M]),Y=(0,n.useMemo)(()=>[...Z,b.Lz.baseTheme({"&.cm-editor.cm-focused":{outline:"0px solid transparent"},"&.cm-editor":{background:"transparent !important"},".cm-editor-multiline &.cm-editor":{maxHeight:w},"& .cm-tooltip-autocomplete":{whiteSpace:"nowrap",wordWrap:"break-word",maxWidth:"100%",backgroundColor:"var(--color-bg-surface) !important",border:"1px solid var(--color-border) !important",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",padding:"4px"},"& .cm-tooltip-autocomplete > ul":{fontFamily:"inherit",maxHeight:"300px"},"& .cm-tooltip-autocomplete > ul > li":{padding:"4px 8px",borderRadius:"4px",cursor:"pointer",color:"var(--color-text)"},"& .cm-tooltip-autocomplete > ul > li[aria-selected]":{backgroundColor:"var(--color-bg-highlighted) !important",color:"var(--color-text-muted) !important"},"& .cm-tooltip-autocomplete .cm-completionLabel":{color:"var(--color-text)"},"& .cm-tooltip-autocomplete .cm-completionDetail":{color:"var(--color-text-muted)",fontStyle:"normal",marginLeft:"8px"},"& .cm-tooltip-autocomplete .cm-completionInfo":{backgroundColor:"var(--color-bg-field)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:"8px",color:"var(--color-text)"},"& .cm-completionIcon":{width:"16px",marginRight:"6px",opacity:.7},"& .cm-scroller":{overflowX:"hidden"},".cm-editor-multiline & .cm-scroller":{maxHeight:w,overflowY:"auto"}}),...D?[b.Lz.lineWrapping]:[],K.current.of((0,u.ll)({upperCaseKeywords:!0})),b.Nb.highest(b.w4.of([{key:"Enter",run:e=>null!=C&&(L&&G?.current?.view&&B(G?.current?.view.state.doc.toString()),C(),!0)},...D?[{key:"Shift-Enter",run:()=>!1}]:[]])),b.w4.of([{key:"Tab",run:d.$w}])],[D,C,L,B,Z]),U=(0,n.useCallback)(()=>{G?.current?.view&&(0,d.rB)(G.current.view)},[]),Q=D&&q;return(0,r.jsxs)("div",{className:S().wrapper,style:{"--editor-base-height":`${"xs"===A?32:36}px`},"data-expanded":Q?"true":void 0,children:[Q&&(0,r.jsx)("div",{className:S().placeholder,"aria-hidden":"true"}),(0,r.jsxs)(h.t,{shadow:"none",className:i()(S().paper,k?S().error:void 0,Q?S().expanded:void 0,D&&!Q?S().collapseFade:void 0),ps:"4px",children:[null!=T&&(0,r.jsx)(p.E,{mx:"4px",size:"xs",fw:"bold",className:i()(S().label,"xs"===A?S().sizeXs:void 0),component:"div",children:(0,r.jsx)(x.m,{label:R,disabled:!R,children:(0,r.jsxs)(g.s,{align:"center",gap:2,children:[T,R&&(0,r.jsx)(f.A,{size:16})]})})}),(0,r.jsx)("div",{className:i()(S().cmWrapper,"xs"===A?S().sizeXs:void 0,Q?void 0:S().collapsed,Q?"cm-editor-multiline":void 0),children:(0,r.jsx)(b.Ay,{indentWithTab:!1,ref:G,value:N,onChange:a,theme:"dark"===F?"dark":"light",onFocus:(0,n.useCallback)(()=>{X(!0)},[X]),onBlur:(0,n.useCallback)(()=>{X(!1)},[X]),extensions:Y,onCreateEditor:J,basicSetup:E,placeholder:l,onClick:U})}),null!=o&&null!=_&&(0,r.jsx)("div",{className:S().languageSwitchWrapper,children:(0,r.jsx)(j.A,{language:_,onLanguageChange:o})})]})]})}let k=(0,n.memo)(function(e){let t,s,n,l,i,c,d=(0,a.c)(15);d[0]!==e?({placeholder:n,filterField:s,additionalSuggestions:t,queryHistoryType:i,...l}=e,d[0]=e,d[1]=t,d[2]=s,d[3]=n,d[4]=l,d[5]=i):(t=d[1],s=d[2],n=d[3],l=d[4],i=d[5]);let{field:u,fieldState:m}=(0,o.as)(l),h=u.value||l.defaultValue,p="";"string"==typeof h?p=h:void 0!==h&&console.error("SQLInlineEditor: value is not a string",h);let x=m.error?.message;return d[6]!==t||d[7]!==u.onChange||d[8]!==s||d[9]!==n||d[10]!==l||d[11]!==i||d[12]!==p||d[13]!==x?(c=(0,r.jsx)(C,{filterField:s,onChange:u.onChange,placeholder:n,value:p,error:x,additionalSuggestions:t,queryHistoryType:i,...l}),d[6]=t,d[7]=u.onChange,d[8]=s,d[9]=n,d[10]=l,d[11]=i,d[12]=p,d[13]=x,d[14]=c):c=d[14],c})},50374:(e,t,s)=>{"use strict";s.d(t,{D:()=>e0,A:()=>e3});var r,a,n=s(6029),l=s(75155),i=s(55729),o=s(86508),c=s(84450),d=s.n(c),u=s(41038),m=s(7913),h=s(66692),p=s(82641),x=s(60481),g=s(78253),f=s(10174),b=s(34834),y=s(64441),v=s(24885);function j(e){let t,s,r,a=(0,l.c)(13),{hasLogSource:n}=e,[o,c]=(0,u.ZA)("traceWhere"),[d,m]=(0,u.ZA)("logWhere"),h=!!o||!!(n&&d),[p,x]=(0,i.useState)(h);a[0]!==m||a[1]!==c?(t=e=>{c(e.traceWhere||null),m(e.logWhere||null)},a[0]=m,a[1]=c,a[2]=t):t=a[2];let g=t;a[3]!==m||a[4]!==c?(s=()=>{c(null),m(null)},a[3]=m,a[4]=c,a[5]=s):s=a[5];let f=s;return a[6]!==f||a[7]!==h||a[8]!==p||a[9]!==d||a[10]!==g||a[11]!==o?(r={traceWhere:o,logWhere:d,isFilterActive:h,isFilterExpanded:p,setIsFilterExpanded:x,onSubmit:g,clear:f},a[6]=f,a[7]=h,a[8]=p,a[9]=d,a[10]=g,a[11]=o,a[12]=r):r=a[12],r}var _=s(78694),S=s(81973),w=s(96958),E=s(18006),C=s(26674),k=s(3635),N=s(43517),A=s(43085),T=s(98287);function $(e){let t,s,r,a,i=(0,l.c)(9),{traceId:o,dateRange:c,traceTableSourceId:d}=e;i[0]!==d?(t={id:d},i[0]=d,i[1]=t):t=i[1];let{data:u}=(0,S.Fo)(t);return i[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsxs)(k.Y,{gap:0,children:[(0,n.jsx)(N.E,{size:"sm",ps:"sm",children:"Service Map"}),(0,n.jsx)(A.E,{size:"xs",ms:"xs",color:"gray",autoContrast:!0,radius:"sm",children:"Beta"})]}),i[2]=s):s=i[2],i[3]!==c||i[4]!==o||i[5]!==u?(r=u?(0,n.jsx)(T.A,{traceTableSource:u,traceId:o,dateRange:c,isSingleTrace:!0}):null,i[3]=c,i[4]=o,i[5]=u,i[6]=r):r=i[6],i[7]!==r?(a=(0,n.jsxs)(b.B,{w:"100%",children:[s,r]}),i[7]=r,i[8]=a):a=i[8],a}var I=s(76539),R=s(43465),z=s(66631),L=s(76089),M=s(90124),D=s(62801),F=s(44595),O=s(53993),P=s(43152),W=s(40228),B=s(28450);let H=e=>{let t,s,r,a,c,d,u,m,h,p,x,g,f,b,y,v,j,_,S,w,E,C,N,A,T,$=(0,l.c)(73),{fieldPrefix:I,metricSource:O,timestamp:B,title:H,where:V}=e,[q,X]=(0,i.useState)("30m"),[G,K]=(0,i.useState)("sm");if($[0]!==q||$[1]!==B){let e={"30m":{minutes:15},"1h":{minutes:30},"1d":{hours:12}}[q];t=(0,R.A)(new Date(B),e),s=(0,z.A)([(0,o.A)(new Date(B),e),new Date]),$[0]=q,$[1]=B,$[2]=t,$[3]=s}else t=$[2],s=$[3];$[4]!==t||$[5]!==s?(r=[t,s],$[4]=t,$[5]=s,$[6]=r):r=$[6];let J=r;e:{switch(G){case"sm":{let e;$[7]===Symbol.for("react.memo_cache_sentinel")?(e={cols:3,height:200},$[7]=e):e=$[7],a=e;break e}case"md":{let e;$[8]===Symbol.for("react.memo_cache_sentinel")?(e={cols:2,height:250},$[8]=e):e=$[8],a=e;break e}case"lg":{let e;$[9]===Symbol.for("react.memo_cache_sentinel")?(e={cols:1,height:320},$[9]=e):e=$[9],a=e;break e}}a=void 0}let{cols:Z,height:Y}=a;$[10]!==J?(c=(0,L.tA)(J),$[10]=J,$[11]=c):c=$[11];let U=c,Q=`infra-subpanel-${I}`;$[12]!==H?(d=(0,n.jsx)("h4",{className:"fs-6 m-0",children:H}),$[12]=H,$[13]=d):d=$[13],$[14]===Symbol.for("react.memo_cache_sentinel")?(u=[{label:"30m",value:"30m"},{label:"1h",value:"1h"},{label:"1d",value:"1d"}],$[14]=u):u=$[14],$[15]===Symbol.for("react.memo_cache_sentinel")?(m=e=>X(e),$[15]=m):m=$[15],$[16]!==q?(h=(0,n.jsx)(M.I,{size:"xs",data:u,value:q,onChange:m}),$[16]=q,$[17]=h):h=$[17],$[18]!==h||$[19]!==d?(p=(0,n.jsxs)(k.Y,{align:"center",children:[d,h]}),$[18]=h,$[19]=d,$[20]=p):p=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(x=[{label:"SM",value:"sm"},{label:"MD",value:"md"},{label:"LG",value:"lg"}],$[21]=x):x=$[21],$[22]===Symbol.for("react.memo_cache_sentinel")?(g=e=>K(e),$[22]=g):g=$[22],$[23]!==G?(f=(0,n.jsx)(k.Y,{align:"center",children:(0,n.jsx)(M.I,{size:"xs",data:x,value:G,onChange:g})}),$[23]=G,$[24]=f):f=$[24],$[25]!==p||$[26]!==f?(b=(0,n.jsxs)(k.Y,{justify:"space-between",align:"center",children:[p,f]}),$[25]=p,$[26]=f,$[27]=b):b=$[27],$[28]!==J||$[29]!==I||$[30]!==U||$[31]!==O||$[32]!==V?(y=(0,P.ik)({dateRange:J,granularity:U,seriesReturnType:"column",series:[{type:"time",where:V,groupBy:[],aggFn:"avg",field:`${I}cpu.utilization - Gauge`,table:"metrics",numberFormat:P.p2}]},{metric:O}),$[28]=J,$[29]=I,$[30]=U,$[31]=O,$[32]=V,$[33]=y):y=$[33];let ee=B/1e3;$[34]!==y||$[35]!==ee?(v=(0,n.jsx)(W.S,{title:"CPU Usage (%)",config:y,showDisplaySwitcher:!1,logReferenceTimestamp:ee}),$[34]=y,$[35]=ee,$[36]=v):v=$[36],$[37]!==Y||$[38]!==v?(j=(0,n.jsx)(D.Z,{"data-testid":"cpu-usage-card",children:(0,n.jsx)(D.Z.Section,{py:8,px:8,h:Y,children:v})}),$[37]=Y,$[38]=v,$[39]=j):j=$[39],$[40]!==J||$[41]!==I||$[42]!==U||$[43]!==O||$[44]!==V?(_=(0,P.ik)({dateRange:J,granularity:U,seriesReturnType:"column",series:[{type:"time",where:V,groupBy:[],aggFn:"avg",field:`${I}memory.usage - Gauge`,table:"metrics",numberFormat:P.JD}]},{metric:O}),$[40]=J,$[41]=I,$[42]=U,$[43]=O,$[44]=V,$[45]=_):_=$[45];let et=B/1e3;$[46]!==_||$[47]!==et?(S=(0,n.jsx)(W.S,{title:"Memory Used",config:_,showDisplaySwitcher:!1,logReferenceTimestamp:et}),$[46]=_,$[47]=et,$[48]=S):S=$[48],$[49]!==Y||$[50]!==S?(w=(0,n.jsx)(D.Z,{"data-testid":"memory-usage-card",children:(0,n.jsx)(D.Z.Section,{py:8,px:8,h:Y,children:S})}),$[49]=Y,$[50]=S,$[51]=w):w=$[51],$[52]!==J||$[53]!==I||$[54]!==U||$[55]!==O||$[56]!==V?(E=(0,P.ik)({dateRange:J,granularity:U,seriesReturnType:"column",series:[{type:"time",where:V,groupBy:[],aggFn:"avg",field:`${I}filesystem.available - Gauge`,table:"metrics",numberFormat:P.nH}]},{metric:O}),$[52]=J,$[53]=I,$[54]=U,$[55]=O,$[56]=V,$[57]=E):E=$[57];let es=B/1e3;return $[58]!==E||$[59]!==es?(C=(0,n.jsx)(W.S,{title:"Disk Available",config:E,showDisplaySwitcher:!1,logReferenceTimestamp:es}),$[58]=E,$[59]=es,$[60]=C):C=$[60],$[61]!==Y||$[62]!==C?(N=(0,n.jsx)(D.Z,{"data-testid":"disk-usage-card",children:(0,n.jsx)(D.Z.Section,{py:8,px:8,h:Y,children:C})}),$[61]=Y,$[62]=C,$[63]=N):N=$[63],$[64]!==Z||$[65]!==j||$[66]!==w||$[67]!==N?(A=(0,n.jsxs)(F.r,{mt:"md",cols:Z,children:[j,w,N]}),$[64]=Z,$[65]=j,$[66]=w,$[67]=N,$[68]=A):A=$[68],$[69]!==b||$[70]!==A||$[71]!==Q?(T=(0,n.jsxs)("div",{"data-testid":Q,children:[b,A]}),$[69]=b,$[70]=A,$[71]=Q,$[72]=T):T=$[72],T},V=({rowData:e,rowId:t,source:s})=>{let{data:r}=(0,S.Fo)({id:s.metricSourceId}),a=e?.__hdx_resource_attributes["k8s.pod.uid"],l=e?.__hdx_resource_attributes["k8s.node.name"],i=new Date(e?.__hdx_timestamp).getTime();return(0,n.jsxs)(b.B,{my:"md",gap:40,children:[a&&(0,n.jsxs)("div",{children:[r&&(0,n.jsx)(H,{title:"Pod",where:`${r.resourceAttributesExpression}.k8s.pod.uid:"${a}"`,fieldPrefix:"k8s.pod.",timestamp:i,metricSource:r}),s&&(0,n.jsxs)(D.Z,{p:"md",mt:"xl",children:[(0,n.jsx)(D.Z.Section,{p:"md",py:"xs",children:"Pod Timeline"}),(0,n.jsx)(D.Z.Section,{children:(0,n.jsx)(O.F,{viewportProps:{style:{maxHeight:280}},children:(0,n.jsx)(x.a,{p:"md",py:"sm",children:(0,n.jsx)(B.FB,{logSource:s,q:`\`k8s.pod.uid\`:"${a}"`,dateRange:[(0,R.A)(new Date(i),{days:1}),(0,o.A)(new Date(i),{days:1})],anchorEvent:{label:(0,n.jsx)("div",{className:"text-brand",children:"This Event"}),timestamp:new Date(i).toISOString()}})})})})]})]}),l&&r&&(0,n.jsx)(H,{metricSource:r,title:"Node",where:`${r.resourceAttributesExpression}.k8s.node.name:"${l}"`,fieldPrefix:"k8s.node.",timestamp:i})]})};var q=s(37901),X=s(26837),G=s(82203),K=s.n(G),J=s(94720),Z=s(40147),Y=s(57030),U=s(71434),Q=s.n(U),ee=s(1909),et=s(14262),es=s.n(et),er=s(3145),ea=s(53061),en=s(47268),el=s(23935),ei=s(24589),eo=s(92789),ec=s(70114),ed=s(23474),eu=s(54134),em=s(225),eh=s(24196),ep=s(78744),ex=s(70727),eg=s(75828),ef=s.n(eg),eb=s(63085),ey=s(21440),ev=s(7565),ej=s(92917),e_=s(83101),eS=s.n(e_),ew=s(20699),eE=s.n(ew);let eC=(0,i.memo)(function(e){let t,s,r,a,i,o,c,d,u,m,h,p,x,g,f=(0,l.c)(30),{marker:b,eventStart:y,eventEnd:v,height:j}=e,_=(0,ev.a)(),S=v-y,w=b.timestamp-y,E=S>0?w/S*100:0;f[0]!==b.attributes?(t=Object.entries(b.attributes),f[0]=b.attributes,f[1]=t):t=f[1];let C=t;f[2]!==_||f[3]!==b.timestamp?(s=_(new Date(b.timestamp),{format:"withMs"}),f[2]=_,f[3]=b.timestamp,f[4]=s):s=f[4],f[5]!==s?(r=(0,n.jsx)(N.E,{size:"xxs",c:"dimmed",mb:"xxs",children:s}),f[5]=s,f[6]=r):r=f[6],f[7]!==b.name?(a=(0,n.jsx)(N.E,{size:"xs",children:b.name}),f[7]=b.name,f[8]=a):a=f[8],f[9]!==C?(i=C.length>0&&(0,n.jsxs)("div",{style:{fontSize:10,marginTop:4},children:[C.slice(0,5).map(eR),C.length>5&&(0,n.jsxs)("div",{style:{fontStyle:"italic"},children:["...and ",C.length-5," more"]})]}),f[9]=C,f[10]=i):i=f[10],f[11]!==r||f[12]!==a||f[13]!==i?(o=(0,n.jsxs)("div",{children:[r,a,i]}),f[11]=r,f[12]=a,f[13]=i,f[14]=o):o=f[14];let k=o;f[15]===Symbol.for("react.memo_cache_sentinel")?(c={transition:"fade"},d={fontSize:11,maxWidth:350,wordBreak:"break-word"},f[15]=c,f[16]=d):(c=f[15],d=f[16]),f[17]!==E?(u=E.toFixed(6),f[17]=E,f[18]=u):u=f[18];let A=`${u}%`;return f[19]!==A?(m={position:"absolute",left:A,top:"50%",transform:"translate(-50%, -50%)",width:8,height:8,cursor:"pointer",zIndex:10,pointerEvents:"auto"},f[19]=A,f[20]=m):m=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)("div",{style:{width:8,height:8,backgroundColor:"var(--color-bg-success)",transform:"rotate(45deg)",border:"1px solid #333",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}}),f[21]=h):h=f[21],f[22]!==j?(p=(0,n.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:1,height:j,backgroundColor:"var(--color-bg-success)",opacity:.4,zIndex:-1}}),f[22]=j,f[23]=p):p=f[23],f[24]!==m||f[25]!==p?(x=(0,n.jsxs)("div",{style:m,onMouseEnter:ez,onClick:eL,children:[h,p]}),f[24]=m,f[25]=p,f[26]=x):x=f[26],f[27]!==x||f[28]!==k?(g=(0,n.jsx)(eb.m,{label:k,color:"var(--color-bg-surface)",withArrow:!0,multiline:!0,transitionProps:c,style:d,children:x}),f[27]=x,f[28]=k,f[29]=g):g=f[29],g}),ek=(0,i.memo)(function(e){let t,s,r,a,i,o,c=(0,l.c)(25),{events:d,maxVal:u,height:m,eventStyles:h,onEventHover:p,scale:x,offset:g}=e,f=p??eM;c[0]!==m?(t={width:0,flexGrow:1,height:m,position:"relative"},c[0]=m,c[1]=t):t=c[1];let b=-1*g*x;c[2]!==b?(s=b.toFixed(6),c[2]=b,c[3]=s):s=c[3];let y=`${s}%`;if(c[4]!==y?(r=(0,n.jsx)("div",{style:{marginRight:y}}),c[4]=y,c[5]=r):r=c[5],c[6]!==d?(a=d??[],c[6]=d,c[7]=a):a=c[7],c[8]!==h||c[9]!==m||c[10]!==u||c[11]!==f||c[12]!==x||c[13]!==a){let e;c[15]!==h||c[16]!==m||c[17]!==u||c[18]!==f||c[19]!==x?(e=(e,t,s)=>{let r=(e.minWidthPerc??0)/100,a=s[t-1],l=a?.start!=null?a?.start+u*r:0,i=Math.max(a?.end??0,l),o=x*Math.max((e.end-e.start)/u,r)*100,c=x*((e.start-i)/u*100);return(0,n.jsx)(eb.m,{label:e.tooltip,color:"gray",withArrow:!0,multiline:!0,transitionProps:{transition:"fade-right"},style:{fontSize:11,maxWidth:300,wordBreak:"break-word"},children:(0,n.jsxs)("div",{onMouseEnter:()=>f(e.id),className:"d-flex align-items-center h-100 cursor-pointer text-truncate hover-opacity",style:{userSelect:"none",backgroundColor:e.color,minWidth:`${o.toFixed(6)}%`,width:`${o.toFixed(6)}%`,marginLeft:`${c.toFixed(6)}%`,position:"relative",..."function"==typeof h?h(e):h},children:[(0,n.jsx)("div",{style:{margin:"auto"},className:"px-2",children:e.body}),e.markers?.map((t,s)=>(0,n.jsx)(eC,{marker:t,eventStart:e.start,eventEnd:e.end,height:m},`${e.id}-marker-${s}`))]})},e.id)},c[15]=h,c[16]=m,c[17]=u,c[18]=f,c[19]=x,c[20]=e):e=c[20],i=a.map(e),c[8]=h,c[9]=m,c[10]=u,c[11]=f,c[12]=x,c[13]=a,c[14]=i}else i=c[14];return c[21]!==t||c[22]!==r||c[23]!==i?(o=(0,n.jsxs)("div",{className:"d-flex overflow-hidden",style:t,children:[r,i]}),c[21]=t,c[22]=r,c[23]=i,c[24]=o):o=c[24],o});function eN(e){return e<1e3?`${Math.round(e)}ms`:e%1e3==0?`${Math.floor(e/1e3)}s`:`${(e/1e3).toFixed(3)}s`}function eA(e){let t,s,r,a,i,o,c,d,u,m,h,p=(0,l.c)(19),{maxVal:x,labelWidth:g,height:f,scale:b,offset:y}=e,v=(h=m=Math.pow(10,Math.floor(Math.log10(u=x/b/10))),u>=2*m&&(h=2*m),u>=5*m&&(h=5*m),h),j=Math.floor(x/v),_=v/x*100*b;if(p[0]!==f||p[1]!==v||p[2]!==j||p[3]!==_){t=[];for(let e=0;e<j;e++)t.push((0,n.jsx)("div",{style:{height:f,width:1,marginRight:-1,marginLeft:0===e?0:`${_.toFixed(6)}%`,background:"var(--color-border-muted)"},children:(0,n.jsx)("div",{className:"ms-2 fs-8.5",children:eN(e*v)})},e));p[0]=f,p[1]=v,p[2]=j,p[3]=_,p[4]=t}else t=p[4];p[5]===Symbol.for("react.memo_cache_sentinel")?(s={position:"sticky",top:0,height:24,paddingTop:4,zIndex:200,pointerEvents:"none",background:"var(--color-bg-body)"},r=ef()("d-flex align-items-center"),p[5]=s,p[6]=r):(s=p[5],r=p[6]),p[7]!==g?(a=(0,n.jsx)("div",{style:{width:g,minWidth:g}}),p[7]=g,p[8]=a):a=p[8];let S=-1*y*b;p[9]!==S?(i=S.toFixed(6),p[9]=S,p[10]=i):i=p[10];let w=`${i}%`;return p[11]!==w?(o=(0,n.jsx)("div",{style:{marginRight:w}}),p[11]=w,p[12]=o):o=p[12],p[13]!==o||p[14]!==t?(c=(0,n.jsxs)("div",{className:"d-flex w-100 overflow-hidden",children:[o,t]}),p[13]=o,p[14]=t,p[15]=c):c=p[15],p[16]!==a||p[17]!==c?(d=(0,n.jsx)("div",{style:s,children:(0,n.jsxs)("div",{className:`${r}`,children:[a,c]})}),p[16]=a,p[17]=c,p[18]=d):d=p[18],d}function eT(e){let t,s,r,a,i,o,c,d,u,m=(0,l.c)(24),{xPerc:h,overlay:p,labelWidth:x,color:g,height:f}=e,b=Math.min(Math.max(100*h,-1),100);m[0]!==b?(t=b.toFixed(6),m[0]=b,m[1]=t):t=m[1];let y=`${t}%`,v=h<=0?"none":"block";return m[2]!==v?(s={position:"sticky",top:0,height:0,zIndex:250,pointerEvents:"none",display:v},m[2]=v,m[3]=s):s=m[3],m[4]!==x?(r=(0,n.jsx)("div",{style:{width:x,minWidth:x}}),m[4]=x,m[5]=r):r=m[5],m[6]!==y?(a={marginLeft:y},m[6]=y,m[7]=a):a=m[7],m[8]!==p||m[9]!==h?(i=null!=p&&(0,n.jsx)("div",{style:{height:0,marginLeft:h<.5?12:-150,top:12,position:"relative"},children:(0,n.jsx)("div",{children:(0,n.jsx)("span",{className:"p-2 rounded border",style:{background:"var(--color-bg-surface)"},children:p})})}),m[8]=p,m[9]=h,m[10]=i):i=m[10],m[11]!==g||m[12]!==f?(o=(0,n.jsx)("div",{style:{height:f,width:1,background:g}}),m[11]=g,m[12]=f,m[13]=o):o=m[13],m[14]!==a||m[15]!==i||m[16]!==o?(c=(0,n.jsx)("div",{className:"w-100 overflow-hidden",children:(0,n.jsxs)("div",{style:a,children:[i,o]})}),m[14]=a,m[15]=i,m[16]=o,m[17]=c):c=m[17],m[18]!==r||m[19]!==c?(d=(0,n.jsxs)("div",{className:"d-flex",children:[r,c]}),m[18]=r,m[19]=c,m[20]=d):d=m[20],m[21]!==d||m[22]!==s?(u=(0,n.jsx)("div",{style:s,children:d}),m[21]=d,m[22]=s,m[23]=u):u=m[23],u}function e$(e){let t,s,r,a=(0,l.c)(11),{containerRef:o,maxVal:c,labelWidth:d,height:u,scale:m,offset:h,xPerc:p,setXPerc:x}=e,[g,f]=(0,i.useState)(!1);a[0]!==o||a[1]!==d||a[2]!==x?(t=()=>{let e=t=>{if(null!=o.current){let s=o.current,r=s.getBoundingClientRect(),a=(t.clientX-r.left-d)/(s.clientWidth-d);null!=e&&x(a)}},t=()=>f(!0),s=()=>f(!1),r=o.current;return r?.addEventListener("mousemove",e),r?.addEventListener("mouseleave",s),r?.addEventListener("mouseenter",t),()=>{r?.removeEventListener("mousemove",e),r?.removeEventListener("mouseleave",s),r?.removeEventListener("mouseenter",t)}},s=[o,d,x],a[0]=o,a[1]=d,a[2]=x,a[3]=t,a[4]=s):(t=a[3],s=a[4]),(0,i.useEffect)(t,s);let b=(h/100+Math.max(p,0)/m)*c;return a[5]!==b||a[6]!==u||a[7]!==d||a[8]!==g||a[9]!==p?(r=g?(0,n.jsx)(eT,{xPerc:Math.max(p,0),overlay:eN(Math.max(b,0)),height:u,labelWidth:d,color:"var(--color-bg-neutral)"}):null,a[5]=b,a[6]=u,a[7]=d,a[8]=g,a[9]=p,a[10]=r):r=a[10],r}function eI({rows:e,cursors:t,rowHeight:s,onMouseMove:r,onEventClick:a,labelWidth:l,className:o,style:c,onClick:d,scale:u=1,setScale:m=()=>{},initialScrollRowIndex:h,scaleWithScroll:p=!1}){let[x,g]=(0,i.useState)(0),f=(0,ej.ZC)(u),b=l/window.innerWidth*100,{size:y,startResize:j}=(0,v.A)(b,"left"),_=y/100*window.innerWidth,S=(0,i.useRef)(null),w=(e,t)=>{if(null!=S.current&&null!=t){let s=S.current,r=s.getBoundingClientRect(),a=e.clientX-r.left;e.clientY,r.top,t(Math.max((x/100+(a-_)/(s.clientWidth-_)/u)*A))}},E=(0,i.useMemo)(()=>({onDrag:e=>{g(t=>Math.min(Math.max(t-e.movementX*(.125/u),0),100-100/u))}}),[u,g]);(0,ej.i3)(S,E);let[C,k]=(0,i.useState)(0),N=e=>{p&&(e.preventDefault(),m(t=>Math.max(t-.001*e.deltaY,1)))};(0,i.useEffect)(()=>{null!=f&&f!=u&&g(e=>{let t=Math.max(Math.min(C,1),0);return Math.min(Math.max(e+100*t/f-100*t/u,0),100-100/u)})},[u,f,C]),(0,i.useEffect)(()=>{let e=S.current;if(null!=e)return e.addEventListener("wheel",N,{passive:!1}),()=>{e.removeEventListener("wheel",N)}});let A=(0,i.useMemo)(()=>{let t=0;for(let s of e??[])for(let e of s.events)t=Math.max(t,e.end);return 1.1*t},[e]),T=(0,ey.Te)({count:e?.length??0,getScrollElement:()=>S.current,estimateSize:()=>s,overscan:5}),$=T.getVirtualItems(),[I,R]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{null!=h&&!I&&h>=0&&(R(!0),T.scrollToIndex(h,{align:"center"}))},[h,I,T]),(0,n.jsxs)("div",{style:{position:"relative",...c},className:o,ref:S,onClick:e=>{w(e,d)},onMouseMove:e=>{w(e,r)},children:[(t??[]).map(e=>{let t=(e.start/A-x/100)*u;return(0,n.jsx)(eT,{xPerc:t,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,color:e.color},e.id)}),(0,n.jsx)(e$,{containerRef:S,maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,scale:u,offset:x,xPerc:C,setXPerc:k}),(0,n.jsx)(eA,{maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,scale:u,offset:x}),(0,n.jsx)("div",{style:{height:`${T.getTotalSize()+32}px`,width:"100%",position:"relative"},children:(0,n.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${$?.[0]?.start??0}px)`},children:T.getVirtualItems().map(t=>{let r=e?.[t.index];return(0,n.jsxs)("div",{onClick:()=>a?.(r),"data-index":t.index,ref:T.measureElement,className:`${ef()("d-flex align-items-center overflow-hidden",r.className,eE().timelineRow,r.isActive&&eE().timelineRowActive)}`,style:{...r.style},children:[(0,n.jsxs)("div",{className:eE().labelContainer,style:{width:_,minWidth:_},children:[r.label,(0,n.jsx)("div",{className:eS().resizeHandle,onMouseDown:j,style:{backgroundColor:"var(--color-bg-neutral)"}})]}),(0,n.jsx)(ek,{events:r.events,height:s,maxVal:A,eventStyles:e=>({borderRadius:2,fontSize:.5*s,backgroundColor:e.isError?"var(--color-bg-danger)":"var(--color-bg-inverted)",color:"var(--color-text-inverted)"}),scale:u,offset:x})]},t.index)})})})]})}function eR(e){let[t,s]=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{style:{color:"var(--color-text-primary)"},children:[t,":"]})," ",String(s).length>50?String(s).substring(0,50)+"...":String(s)]},t)}function ez(e){return e.stopPropagation()}function eL(e){return e.stopPropagation()}function eM(){}var eD=s(59017),eF=s(66773),eO=s.n(eF);function eP(e){let t,s,r=(0,l.c)(6),{config:a,dateRangeStartInclusive:n,dateRange:i,enabled:o}=e;r[0]!==a||r[1]!==i||r[2]!==n?(t={...a,dateRange:i,dateRangeStartInclusive:n},r[0]=a,r[1]=i,r[2]=n,r[3]=t):t=r[3];let c=t;return r[4]!==o?(s={enabled:o},r[4]=o,r[5]=s):s=r[5],(0,ep.A)(c,s)}function eW(e){let t,s,r,a,n,i,o,c,d=(0,l.c)(32),{tableSource:u,focusDate:m,dateRange:h,traceId:x,enabled:g,hiddenRowExpression:f}=e;d[0]!==f||d[1]!==u||d[2]!==x?(t=function(e,t,s){let r={Body:e?.kind===p.GL.Trace?(0,S.pM)(e)??"":e?.kind===p.GL.Log?(0,S.N8)(e)??"":"",Timestamp:(0,S.xg)(e),Duration:e.durationExpression?(0,S.kg)(e):"",TraceId:e.traceIdExpression??"",SpanId:e.spanIdExpression??"",ParentSpanId:e.parentSpanIdExpression??"",StatusCode:e.statusCodeExpression??"",ServiceName:e.serviceNameExpression??"",SeverityText:e.severityTextExpression??"",SpanAttributes:e.eventAttributesExpression??"",SpanEvents:e.spanEventsValueExpression??""};if(e.highlightedTraceAttributeExpressions)for(let t of e.highlightedTraceAttributeExpressions)t.alias&&(r[t.alias]=t.sqlExpression);let a=[{valueExpression:r.Body,alias:"Body"},{valueExpression:r.Timestamp,alias:"Timestamp"},{valueExpression:r.SpanId,alias:"SpanId"},...r.ServiceName?[{valueExpression:r.ServiceName,alias:"ServiceName"}]:[],...s?[{valueExpression:s,valueExpressionLanguage:"lucene",alias:"__hdx_hidden"}]:[]];return(e.kind===p.GL.Trace||e.kind===p.GL.Log)&&a.push(...(0,E.z4)(e.highlightedTraceAttributeExpressions)),s&&(r.__hdx_hidden=s),e.kind===p.GL.Trace?a.push({valueExpression:r.Duration,alias:"Duration"},{valueExpression:r.ParentSpanId,alias:"ParentSpanId"},...r.StatusCode?[{valueExpression:r.StatusCode,alias:"StatusCode"}]:[],...r.SpanAttributes?[{valueExpression:r.SpanAttributes,alias:"SpanAttributes"}]:[],...r.SpanEvents?[{valueExpression:r.SpanEvents,alias:"SpanEvents"}]:[]):e.kind===p.GL.Log&&a.push(...r.SeverityText?[{valueExpression:r.SeverityText,alias:"SeverityText"}]:[]),{config:{select:a,from:e.from,timestampValueExpression:e.timestampValueExpression,where:`${r.TraceId} = '${t}'`,limit:{limit:5e4},connection:e.connection},alias:r,type:e.kind}}(u,x,f),d[0]=f,d[1]=u,d[2]=x,d[3]=t):t=d[3];let{config:b,alias:y,type:v}=t;d[4]!==h[0]||d[5]!==m?(s=[h[0],m],d[4]=h[0],d[5]=m,d[6]=s):s=d[6],d[7]!==b||d[8]!==g||d[9]!==s?(r={config:b,dateRangeStartInclusive:!0,dateRange:s,enabled:g},d[7]=b,d[8]=g,d[9]=s,d[10]=r):r=d[10];let{data:j,isFetching:_,error:w}=eP(r);d[11]!==h[1]||d[12]!==m?(a=[m,h[1]],d[11]=h[1],d[12]=m,d[13]=a):a=d[13],d[14]!==b||d[15]!==g||d[16]!==a?(n={config:b,dateRangeStartInclusive:!1,dateRange:a,enabled:g},d[14]=b,d[15]=g,d[16]=a,d[17]=n):n=d[17];let{data:C,isFetching:k,error:N}=eP(n),A=_||k,T=j?.meta??C?.meta,$=w||N;d[18]!==y||d[19]!==T?(i={meta:T,aliasMap:y},d[18]=y,d[19]=T,d[20]=i):i=d[20];let I=(0,ex.Ay)(i);e:{let e;if(!T||0===T.length){let e;d[21]===Symbol.for("react.memo_cache_sentinel")?(e=[],d[21]=e):e=d[21],o=e;break e}d[22]!==C?.data||d[23]!==j?.data||d[24]!==I||d[25]!==v?(e=[...j?.data??[],...C?.data??[]].map(e=>{let t=I((0,U.omit)(e,["SpanAttributes","SpanEvents","__hdx_hidden"]));return{...e,SpanId:e?.SpanId,__hdx_hidden:e?.__hdx_hidden,type:v,id:t.where,aliasWith:[]}}),d[22]=C?.data,d[23]=j?.data,d[24]=I,d[25]=v,d[26]=e):e=d[26],o=e}let R=o;return d[27]!==$||d[28]!==A||d[29]!==T||d[30]!==R?(c={rows:R,meta:T,isFetching:A,error:$},d[27]=$,d[28]=A,d[29]=T,d[30]=R,d[31]=c):c=d[31],c}function eB({traceTableSource:e,logTableSource:t,traceId:s,dateRange:r,focusDate:a,onClick:l,highlightedRowWhere:o,initialRowHighlightHint:c}){let{size:d,startResize:u}=(0,v.A)(30,"bottom"),m=(0,ev.a)(),{traceWhere:h,logWhere:g,clear:f,isFilterActive:b,isFilterExpanded:y,setIsFilterExpanded:_,onSubmit:S}=j({hasLogSource:!!t}),{control:w,handleSubmit:C,setValue:A}=(0,ee.mN)({defaultValues:{traceWhere:h??"",logWhere:g??""}}),T=(0,i.useCallback)(()=>{A("traceWhere",""),A("logWhere",""),f()},[f,A]),{rows:$,isFetching:I,meta:R,error:z}=eW({tableSource:e,focusDate:a,dateRange:r,traceId:s,hiddenRowExpression:h?`NOT (${h})`:void 0,enabled:!0}),{rows:L,isFetching:M,meta:D,error:F}=eW({tableSource:t||e,focusDate:a,dateRange:t?r:[r[1],r[0]],traceId:s,hiddenRowExpression:g?`NOT (${g})`:void 0,enabled:!!t}),O=I||M,P=z||F,W=(0,i.useMemo)(()=>[...$,...L],[$,L]);W.sort((e,t)=>{let s=es().fromString(e.Timestamp),r=es().fromString(t.Timestamp),a=s.getTimeT()-r.getTimeT();return 0===a?s.getNano()-r.getNano():a});let B=(0,i.useMemo)(()=>{let s=$?.filter(e=>!e.__hdx_hidden),r=(0,E.N4)(e,e.highlightedTraceAttributeExpressions,s,R);if(t&&L&&D){let e=L?.filter(e=>!e.__hdx_hidden);r.push(...(0,E.N4)(t,t.highlightedTraceAttributeExpressions,e,D))}return r.sort((e,t)=>e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value))},[e,$,R,t,L,D]);(0,i.useEffect)(()=>{if(c&&l&&null==o){let e=W.findIndex(e=>e.Timestamp===c.timestamp&&e.SpanId===c.spanId&&e.Body===c.body);-1!==e&&l?.({id:W[e].id,type:W[e].type??"",aliasWith:W[e].aliasWith})}},[c,W,l,o]);let H=(0,i.useMemo)(()=>new Set($?.filter(e=>Q().isString(e.SpanId)&&e.SpanId.length>0).map(e=>e.SpanId)??[]),[$]),V=[],q=new Map,X=new Map;for(let e of W??[]){let{type:t,SpanId:s,ParentSpanId:r}=e;if(!s)continue;let a=t===p.GL.Log?`${s}-log`:s,n=t===p.GL.Log?s:r||"",l={...e,children:[]};if(t===p.GL.Trace){if(!X.has(a)){X.set(a,e.id);let t=`placeholder-${a}`,s=q.get(t);s&&(l.children=s.children||[],q.delete(t))}q.set(e.id,l)}if(t!==p.GL.Trace||n&&H.has(n)){let e=X.get(n),t=e?q.get(e):void 0;if(!t){let e=`placeholder-${n}`;(t=q.get(e))||(t={children:[]},q.set(e,t))}t.children.push(l)}else V.push(l)}let[G,K]=(0,i.useState)(new Set),[J,Z]=(0,i.useState)(!0),Y=(0,i.useCallback)(e=>{K(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[K]),U=(e,t,s=0)=>{e.__hdx_hidden||t.push({level:s,...e}),G.has(e.id)||e?.children?.forEach(e=>U(e,t,s+1))},et=[];V.length>0&&V.forEach(e=>U(e,et));let ep=et.length,ex=et.filter(e=>"Error"===e.StatusCode||e.SeverityText?.toLowerCase()==="error").length,eg=`${ep} span${1!==ep?"s":""}`,ef=`${ex} error${1!==ex?"s":""}`,eb=W?.reduce((e,t)=>Math.min(e,new Date(t.Timestamp).getTime()),Number.MAX_SAFE_INTEGER)??0,ey=eb===Number.MAX_SAFE_INTEGER?0:eb,e_=et.map((e,t)=>{let s=1e3*(e.Duration||0),r=new Date(e.Timestamp).getTime(),a=r-ey,i=a+s,{Body:c,ServiceName:d,id:u,type:h,aliasWith:x}=e,g=`${c}`;try{g="string"==typeof c?c:JSON.stringify(c)}catch(e){console.warn("DBTraceWaterfallChart: Couldn't JSON stringify Body",e)}let f=e.SpanAttributes||{},y=f["http.url"]||f["http.method"],v=f["http.url"],j=y&&v?`${g} ${v}`:g,_=J&&e.SpanEvents?e.SpanEvents.map(e=>({timestamp:new Date(e.Timestamp).getTime()-ey,name:e.Name,attributes:e.Attributes||{}})):[],S="Error"==e.StatusCode||"error"===e.SeverityText,w=e.StatusCode||e.SeverityText,E="warn"===e.SeverityText,C=o===u;return{id:u,type:h,aliasWith:x,label:(0,n.jsx)("div",{className:`${function(e){let{isError:t,isWarn:s}=e;return t?"text-danger":s?"text-warning":""}({isError:S,isWarn:E})} ${C&&eO().traceTimelineLabelHighlighted} text-truncate cursor-pointer ps-2 ${eO().traceTimelineLabel}`,role:"button",onClick:()=>{l?.({id:u,type:h??"",aliasWith:x})},children:(0,n.jsxs)("div",{className:"d-flex align-items-center",style:{height:24},children:[Array.from({length:e.level}).map((e,t)=>(0,n.jsx)("div",{style:{borderLeft:"1px solid var(--color-border)",marginLeft:7,width:8,minWidth:8,maxWidth:8,flexGrow:1,flexShrink:0,height:"100%"}},t)),(0,n.jsxs)(ea.o,{style:{opacity:+(e.children.length>0)},onClick:()=>{Y(u)},children:[G.has(u)?(0,n.jsx)(ec.A,{size:16,className:"me-1 text-muted-hover"}):(0,n.jsx)(ed.A,{size:16,className:"me-1 text-muted-hover"})," "]}),!b&&(0,n.jsx)(N.E,{span:!0,size:"xxs",me:"xs",pt:"2px",children:e.children.length>0?`(${e.children.length})`:""}),(0,n.jsxs)(k.Y,{gap:0,wrap:"nowrap",children:[h===p.GL.Log?(0,n.jsx)(eu.A,{size:14,className:"align-middle me-2","aria-label":"Correlated Log Line"}):null,(0,n.jsxs)(N.E,{size:"xxs",truncate:"end",span:!0,title:`${d}${y&&v?` | ${j}`:""}`,role:"button",children:[d?`${d} | `:"",j]})]})]})}),style:{marginTop:32*(0===t)},isActive:C,events:[{id:u,type:h,aliasWith:x,start:a,end:i,tooltip:`${j} ${s>=0?`took ${s.toFixed(4)}ms`:""} ${w?`| Status: ${w}`:""}${!isNaN(r)?` | Started at ${m(new Date(r),{format:"withMs"})}`:""}`,color:function(e){let{isError:t,isWarn:s,isHighlighted:r}=e;return t?r?(0,ej.sS)():(0,ej.cM)():s?r?(0,ej.qS)():(0,ej.AD)():r?"#A9AFB7":"#6A7077"}({isError:S,isWarn:E,isHighlighted:C}),body:(0,n.jsx)("span",{children:j}),minWidthPerc:1,isError:S,markers:_}]}}),ew=et.findIndex(e=>e.id===o),eE=d/100*window.innerHeight;return(0,n.jsxs)(n.Fragment,{children:[y&&(0,n.jsx)("form",{onSubmit:C(S),children:(0,n.jsxs)(x.a,{style:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",gap:"12px"},children:[(0,n.jsx)(N.E,{size:"xs",children:"Spans filter"}),(0,n.jsx)(eh.A,{tableConnection:(0,er.VO)(e),placeholder:'Search trace spans w/ Lucene ex. StatusCode:"Error"',language:"lucene",name:"traceWhere",control:w,size:"xs",onSubmit:C(S),"data-testid":"trace-search-input"}),t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.E,{size:"xs",children:"Logs filter"}),(0,n.jsx)(eh.A,{tableConnection:(0,er.VO)(t),placeholder:'Search trace logs w/ Lucene ex. SeverityText:"error"',language:"lucene",name:"logWhere",control:w,size:"xs",onSubmit:C(S),"data-testid":"log-search-input"})]})]})}),(0,n.jsxs)(k.Y,{my:"xs",justify:"space-between",children:[(0,n.jsxs)(k.Y,{gap:"md",children:[(0,n.jsxs)(N.E,{size:"xs",children:[eg,","," ",(0,n.jsx)("span",{className:ex?"text-danger":"",children:ef})]}),(0,n.jsx)(en.S,{size:"xs",label:"Show span events",checked:J,onChange:()=>Z(!J)})]}),(0,n.jsxs)("span",{children:[(0,n.jsxs)(el.M,{underline:"always",onClick:()=>_(e=>!e),size:"xs",children:[y?"Hide Filters":"Show Filters"," ",b&&"(active)"]}),b&&(0,n.jsx)(el.M,{underline:"always",onClick:T,size:"xs",ms:"xs",children:"Clear Filters"})]})]}),!O&&!P&&(0,n.jsx)(eD.V,{attributes:B}),(0,n.jsx)("div",{style:{position:"relative",overflow:"hidden",maxHeight:`${eE}px`},children:O?(0,n.jsx)("div",{className:"my-3",children:"Loading Traces..."}):P?(0,n.jsxs)(x.a,{mt:"lg",children:[(0,n.jsx)(N.E,{my:"sm",size:"sm",children:"An error occurred while fetching trace data:"}),(0,n.jsx)(ei.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:P.message})]}):null==W?(0,n.jsxs)("div",{children:["An unknown error occurred. ",(0,n.jsx)(em.z,{})]}):0===et.length?(0,n.jsx)("div",{className:"my-3",children:"No matching spans or logs found"}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(eI,{style:{overflowY:"auto",maxHeight:`${eE}px`},scale:1,setScale:()=>{},rowHeight:22,labelWidth:300,onClick:e=>{},onEventClick:e=>{l?.({id:e.id,type:e.type??"",aliasWith:e.aliasWith??[]})},cursors:[],rows:e_,initialScrollRowIndex:ew})})}),(0,n.jsx)(eo.c,{mt:"md",className:eS().resizeYHandle,onMouseDown:u,style:{position:"relative",bottom:0}})]})}let eH=e=>{let t,s,r,a=(0,l.c)(13),{traceSourceId:i,rumSessionId:o,dateRange:c,focusDate:d,serviceName:u,setSubDrawerOpen:m}=e;a[0]!==i?(t={id:i},a[0]=i,a[1]=t):t=a[1];let{data:h}=(0,S.Fo)(t),p=h?.sessionSourceId;a[2]!==p?(s={id:p},a[2]=p,a[3]=s):s=a[3];let{data:x,isLoading:g}=(0,S.Fo)(s);if(!h||!x&&g){let e;return a[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(J.a,{}),a[4]=e):e=a[4],e}return a[5]!==c||a[6]!==d||a[7]!==o||a[8]!==u||a[9]!==x||a[10]!==m||a[11]!==h?(r=(0,n.jsx)(n.Fragment,{children:x?o&&h?(0,n.jsx)(Y.A,{start:c[0],end:c[1],traceSource:h,session:{serviceName:u},sessionSource:x,rumSessionId:o,setDrawerOpen:m,initialTs:d.getTime()}):(0,n.jsx)("span",{className:"p-3 text-muted",children:"Session ID not found."}):(0,n.jsxs)("div",{className:"m-2 fs-8 p-4",children:["No correlated session source found.",(0,n.jsx)("br",{}),"Go to ",(0,n.jsx)(K(),{href:"/team#sources",children:"Team Settings"})," and update the"," ",(0,n.jsx)("strong",{children:h?.name})," source to include the correlated session source."]})}),a[5]=c,a[6]=d,a[7]=o,a[8]=u,a[9]=x,a[10]=m,a[11]=h,a[12]=r):r=a[12],r};function eV(e){return null===e.parentSpanId&&e.rumSessionId}function eq(e){return e.rumSessionId}var eX=s(25062),eG=s(22623),eK=s(6892),eJ=s(46466),eZ=s(57478),eY=((r=eY||{}).Overview="overview",r.Parsed="parsed",r);function eU(e){let t,s,r,a,o,c,d,m,h,x,f,y,v,j,_,E,C,A,T,$,I,R,z,L=(0,l.c)(74),{childSourceId:M,traceId:D,dateRange:F,focusDate:O,parentSourceId:P,initialRowHighlightHint:W,"data-testid":B}=e;L[0]!==M?(t={defaultValues:{source:M}},L[0]=M,L[1]=t):t=L[1];let{control:H}=(0,ee.mN)(t);L[2]!==H?(s={control:H,name:"source"},L[2]=H,L[3]=s):s=L[3];let V=(0,ee.FH)(s);L[4]!==V?(r={id:V},L[4]=V,L[5]=r):r=L[5];let{data:G,isLoading:K}=(0,S.Fo)(r);L[6]!==P?(a={id:P},L[6]=P,L[7]=a):a=L[7];let{data:J,isLoading:Z}=(0,S.Fo)(a),Y=J?.kind===p.GL.Log?J:G?.kind===p.GL.Log?G:null,U=J?.kind===p.GL.Trace?J:G?.kind===p.GL.Trace?G:null;G?.kind===p.GL.Trace||(J?.kind,p.GL.Trace);let{mutate:Q}=(0,S.sr)();L[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,u.os)(),L[8]=o):o=L[8];let[et,es]=(0,u.ZA)("eventRowWhere",o),en=J?.traceIdExpression??"";L[9]!==en?(c={defaultValues:{traceIdExpression:en}},L[9]=en,L[10]=c):c=L[10];let{control:el,handleSubmit:ei,setValue:ec}=(0,ee.mN)(c);L[11]!==J||L[12]!==ec?(d=()=>{J?.traceIdExpression&&ec("traceIdExpression",J.traceIdExpression)},L[11]=J,L[12]=ec,L[13]=d):d=L[13];let ed=J?.traceIdExpression;L[14]!==ed||L[15]!==ec?(m=[ed,ec],L[14]=ed,L[15]=ec,L[16]=m):m=L[16],(0,i.useEffect)(d,m);let[eu,em]=(0,i.useState)(!1);L[17]!==es?(h=()=>()=>{es(null)},L[17]=es,L[18]=h):h=L[18],L[19]!==es||L[20]!==D?(x=[D,es],L[19]=es,L[20]=D,L[21]=x):x=L[21],(0,i.useEffect)(h,x);let[eh,ep]=(0,i.useState)("overview"),ex=J?.traceIdExpression,eg=D||"No trace id found for event";L[22]!==ex||L[23]!==eg?(f=(0,n.jsxs)(N.E,{size:"xs",me:"xs",children:[ex,":"," ",eg]}),L[22]=ex,L[23]=eg,L[24]=f):f=L[24],L[25]!==D?(y=null!=D&&(0,n.jsx)(eX.$,{variant:"subtle",size:"xs",onClick:()=>em(eQ),children:(0,n.jsx)(eK.A,{size:14})}),L[25]=D,L[26]=y):y=L[26],L[27]!==f||L[28]!==y?(v=(0,n.jsxs)(g.s,{align:"center",children:[f,y]}),L[27]=f,L[28]=y,L[29]=v):v=L[29];let ef=J?.kind===p.GL.Log?"Trace Source":"Correlated Log Source";return L[30]!==ef?(j=(0,n.jsx)(N.E,{size:"sm",children:ef}),L[30]=ef,L[31]=j):j=L[31],L[32]!==H?(_=(0,n.jsx)(eZ.W,{control:H,name:"source",size:"xs"}),L[32]=H,L[33]=_):_=L[33],L[34]!==j||L[35]!==_?(E=(0,n.jsxs)(k.Y,{gap:"sm",children:[j,_]}),L[34]=j,L[35]=_,L[36]=E):E=L[36],L[37]!==v||L[38]!==E?(C=(0,n.jsxs)(g.s,{align:"center",justify:"space-between",mb:"sm",children:[v,E]}),L[37]=v,L[38]=E,L[39]=C):C=L[39],L[40]!==J||L[41]!==P||L[42]!==eu||L[43]!==D||L[44]!==el||L[45]!==ei||L[46]!==Q?(A=(eu||!D)&&null!=P&&(0,n.jsxs)(b.B,{gap:"xs",children:[(0,n.jsx)(N.E,{size:"xs",children:"Trace ID Expression"}),(0,n.jsxs)(g.s,{align:"center",children:[(0,n.jsx)(eJ.Z,{tableConnection:(0,er.VO)(J),name:"traceIdExpression",placeholder:"Log Trace ID Column (ex. trace_id)",control:el,size:"xs",parentRef:"u">typeof document?document.body:null}),(0,n.jsx)(eX.$,{ms:"sm",variant:"primary",onClick:ei(e=>{let{traceIdExpression:t}=e;null!=J&&Q({source:{...J,traceIdExpression:t}})}),size:"xs",children:"Save"}),(0,n.jsx)(eX.$,{ms:"sm",variant:"secondary",onClick:()=>em(!1),size:"xs",children:"Cancel"})]})]}),L[40]=J,L[41]=P,L[42]=eu,L[43]=D,L[44]=el,L[45]=ei,L[46]=Q,L[47]=A):A=L[47],L[48]===Symbol.for("react.memo_cache_sentinel")?(T=(0,n.jsx)(eo.c,{my:"sm"}),L[48]=T):T=L[48],L[49]!==F||L[50]!==et?.id||L[51]!==O||L[52]!==W||L[53]!==Y||L[54]!==es||L[55]!==D||L[56]!==U?($=U?.kind===p.GL.Trace&&D&&(0,n.jsx)(eB,{traceTableSource:U,logTableSource:Y,traceId:D,dateRange:F,focusDate:O,highlightedRowWhere:et?.id,onClick:es,initialRowHighlightHint:W}),L[49]=F,L[50]=et?.id,L[51]=O,L[52]=W,L[53]=Y,L[54]=es,L[55]=D,L[56]=U,L[57]=$):$=L[57],L[58]!==eh||L[59]!==et||L[60]!==Y||L[61]!==U?(I=null!=U&&null!=et&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.E,{size:"sm",my:"sm",children:"Event Details"}),(0,n.jsx)(w.A,{className:"fs-8 mt-2",items:[{text:"Overview",value:"overview"},{text:"Column Values",value:"parsed"}],activeItem:eh,onClick:e=>ep(e)}),"overview"===eh&&(0,n.jsx)(X.W,{source:et?.type===p.GL.Log&&Y?Y:U,rowId:et?.id,aliasWith:et?.aliasWith}),"parsed"===eh&&(0,n.jsx)(q.dD,{source:et?.type===p.GL.Log&&Y?Y:U,rowId:et?.id,aliasWith:et?.aliasWith})]}),L[58]=eh,L[59]=et,L[60]=Y,L[61]=U,L[62]=I):I=L[62],L[63]!==et||L[64]!==D||L[65]!==U?(R=null!=U&&!et&&D&&(0,n.jsx)(eG.t,{shadow:"xs",p:"xl",mt:"md",children:(0,n.jsx)(ea.o,{mih:100,children:(0,n.jsx)(N.E,{size:"sm",children:"Please select a span above to view details."})})}),L[63]=et,L[64]=D,L[65]=U,L[66]=R):R=L[66],L[67]!==B||L[68]!==C||L[69]!==A||L[70]!==$||L[71]!==I||L[72]!==R?(z=(0,n.jsxs)("div",{"data-testid":B,children:[C,A,T,$,I,R]}),L[67]=B,L[68]=C,L[69]=A,L[70]=$,L[71]=I,L[72]=R,L[73]=z):z=L[73],z}function eQ(e){return!e}let e0=(0,i.createContext)({});var e1=((a=e1||{}).Overview="overview",a.Parsed="parsed",a.Debug="debug",a.Trace="trace",a.ServiceMap="serviceMap",a.Context="context",a.Replay="replay",a.Infrastructure="infrastructure",a);let e2=({rowId:e,aliasWith:t,source:s,isNestedPanel:r=!1,setSubDrawerOpen:a,onClose:c,breadcrumbPath:h=[],onBreadcrumbClick:f})=>{let b,{data:v,isLoading:j,isSuccess:C}=(0,q.k1)({source:s,rowId:e,aliasWith:t}),{dbSqlRowTableConfig:k}=(0,i.useContext)(e0),N=(0,i.useCallback)(e=>{let t=h.length;if(t>e)c(),f?.(e);else{if(t===e)return;f?.(e)}},[h.length,f,c]),A=(0,i.useMemo)(()=>!!s.resourceAttributesExpression||!!s.eventAttributesExpression,[s.eventAttributesExpression,s.resourceAttributesExpression]),T="trace"===s.kind?"trace":A?"overview":"parsed",[R,z]=(0,u.ZA)("sidePanelTab",(0,u.Oq)(Object.values(e1)).withDefault(T)),[L,M]=(0,i.useState)(T),D=r?M:z,F=r?L:R,O=v?.data?.[0],P=O?.__hdx_timestamp;b=new Date("number"==typeof P?1e3*P:P);let W=(0,S.N8)(s),B=d()(O?.__hdx_body)?O.__hdx_body:O?.__hdx_body!==void 0?JSON.stringify(O.__hdx_body):void 0,H=O?.__hdx_severity_text,G=(0,i.useMemo)(()=>{let e=[];return(s.kind===p.GL.Trace||s.kind===p.GL.Log)&&s.highlightedRowAttributeExpressions&&e.push(...s.highlightedRowAttributeExpressions),s.serviceNameExpression&&e.push({sqlExpression:s.serviceNameExpression}),v?(0,E.N4)(s,e,v.data||[],v.meta||[]):[]},[s,v]),K=(0,i.useMemo)(()=>[(0,o.A)(b,{minutes:-60}),(0,o.A)(b,{minutes:60})],[b]),J=(0,i.useMemo)(()=>[(0,o.A)(b,{hours:-4}),(0,o.A)(b,{hours:4})],[b]),Y=O?.__hdx_trace_id,U="log"===s.kind?s.traceSourceId:"trace"===s.kind?s.logSourceId:void 0,Q="trace"===s.kind?s.id:s.traceSourceId,ee=Y&&Q,{rumSessionId:et,rumServiceName:es}=(e=>{let t,s,r,a,n=(0,l.c)(42),{sourceId:i,traceId:o,dateRange:c,enabled:d}=e;n[0]!==i?(t={id:i},n[0]=i,n[1]=t):t=n[1];let{data:u}=(0,S.Fo)(t),{getFieldExpression:m}=(0,Z.A)(u);e:{let e,t,r,a,l,i,c,d,h;if(!u||!o||!m){s=void 0;break e}let p=`${u.timestampValueExpression}`;n[2]!==p?(e={valueExpression:p,alias:"Timestamp"},n[2]=p,n[3]=e):e=n[3];let x=u.resourceAttributesExpression??"ResourceAttributes";n[4]!==m||n[5]!==x?(t=m(x,"rum.sessionId"),n[4]=m,n[5]=x,n[6]=t):t=n[6];let g=`${t}`;n[7]!==g?(r={valueExpression:g,alias:"rumSessionId"},n[7]=g,n[8]=r):r=n[8];let f=u.resourceAttributesExpression??"ResourceAttributes";n[9]!==m||n[10]!==f?(a=m(f,"service.name"),n[9]=m,n[10]=f,n[11]=a):a=n[11];let b=`${a}`;n[12]!==b?(l={valueExpression:b,alias:"serviceName"},n[12]=b,n[13]=l):l=n[13];let y=`${u.parentSpanIdExpression}`;n[14]!==y?(i={valueExpression:y,alias:"parentSpanId"},n[14]=y,n[15]=i):i=n[15],n[16]!==l||n[17]!==i||n[18]!==e||n[19]!==r?(c=[e,r,l,i],n[16]=l,n[17]=i,n[18]=e,n[19]=r,n[20]=c):c=n[20],n[21]===Symbol.for("react.memo_cache_sentinel")?(d={limit:1e4},n[21]=d):d=n[21];let v=`${u.traceIdExpression} = '${o}'`;n[22]!==u.connection||n[23]!==u.from||n[24]!==u.timestampValueExpression||n[25]!==c||n[26]!==v?(h={select:c,from:u.from,timestampValueExpression:u.timestampValueExpression,limit:d,connection:u.connection,where:v,whereLanguage:"sql"},n[22]=u.connection,n[23]=u.from,n[24]=u.timestampValueExpression,n[25]=c,n[26]=v,n[27]=h):h=n[27],s=h}let h=s,p=void 0!==d&&d&&!!u&&!!h;n[28]!==h||n[29]!==c||n[30]!==p?(r={config:h,dateRangeStartInclusive:!0,dateRange:c,enabled:p},n[28]=h,n[29]=c,n[30]=p,n[31]=r):r=n[31];let{data:x}=eP(r);t:{let e,t,s;n[32]!==x?.data?(e=x?.data||[],n[32]=x?.data,n[33]=e):e=n[33];let r=e;n[34]!==r?(t=r.find(eV),n[34]=r,n[35]=t):t=n[35];let l=t;if(!l){let e;n[36]!==r?(e=r.find(eq),n[36]=r,n[37]=e):e=n[37],l=e}if(l){let e;n[38]!==l.rumSessionId||n[39]!==l.serviceName?(e={rumServiceName:l.serviceName,rumSessionId:l.rumSessionId},n[38]=l.rumSessionId,n[39]=l.serviceName,n[40]=e):e=n[40],a=e;break t}n[41]===Symbol.for("react.memo_cache_sentinel")?(s={rumServiceName:void 0,rumSessionId:void 0},n[41]=s):s=n[41],a=s}return a})({sourceId:Q,traceId:Y,dateRange:K,enabled:null!=e}),er=(0,i.useMemo)(()=>{try{if(!s?.resourceAttributesExpression||!O)return!1;let e=O.__hdx_resource_attributes;return e?.["k8s.pod.uid"]!=null||e?.["k8s.node.name"]!=null}catch(e){return console.error(e),!1}},[s,O]),ea=(0,i.useMemo)(()=>{if(O)return{timestamp:O.__hdx_timestamp,spanId:O.__hdx_span_id,body:O.__hdx_body}},[O]);return j?(0,n.jsx)("div",{className:eO().loadingState,children:"Loading..."}):C?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.a,{p:"sm",children:(0,n.jsx)(y.A,{date:b,attributes:G,mainContent:B,mainContentHeader:W,severityText:H,breadcrumbPath:h,onBreadcrumbClick:N})}),(0,n.jsx)(w.A,{"data-testid":"side-panel-tabs",className:"fs-8 mt-2",items:[...A?[{text:"Overview",value:"overview"}]:[],{text:"Column Values",value:"parsed"},{text:"Trace",value:"trace"},...ee?[{text:"Service Map",value:"serviceMap"}]:[],{text:"Surrounding Context",value:"context"},...null!=et?[{text:"Session Replay",value:"replay"}]:[],...er?[{text:"Infrastructure",value:"infrastructure"}]:[]],activeItem:F,onClick:e=>D(e)}),"overview"===F&&(0,n.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(X.W,{"data-testid":"side-panel-tab-overview",source:s,rowId:e,aliasWith:t,hideHeader:!0})}),"trace"===F&&(0,n.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,n.jsx)(eU,{"data-testid":"side-panel-tab-trace",parentSourceId:s.id,childSourceId:U,traceId:Y,dateRange:K,focusDate:b,initialRowHighlightHint:ea})})}),"serviceMap"===F&&ee&&(0,n.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(g.s,{p:"sm",flex:1,children:(0,n.jsx)($,{traceId:Y,traceTableSourceId:Q,dateRange:K})})}),"parsed"===F&&(0,n.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(q.dD,{"data-testid":"side-panel-tab-parsed",source:s,rowId:e,aliasWith:t})}),"context"===F&&(0,n.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(I.A,{"data-testid":"side-panel-tab-context",source:s,dbSqlRowTableConfig:k,rowData:O,rowId:e,breadcrumbPath:h,onBreadcrumbClick:N})}),"replay"===F&&(0,n.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)("div",{className:"overflow-hidden flex-grow-1",children:(0,n.jsx)(eH,{"data-testid":"side-panel-tab-replay",dateRange:J,focusDate:b,setSubDrawerOpen:a,traceSourceId:Q,serviceName:es,rumSessionId:et})})}),"infrastructure"===F&&(0,n.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,n.jsx)(V,{"data-testid":"side-panel-tab-infrastructure",source:s,rowData:O,rowId:e})})}),(0,n.jsx)(_.ir,{})]}):(0,n.jsx)("div",{className:eO().loadingState,children:"Error loading row data"})};function e3(e){let t,s,r,a,o,c,d,p,g,b,y,_,S,w=(0,l.c)(39),{onClose:E,rowId:k,aliasWith:N,source:A,isNestedPanel:T,breadcrumbPath:$,onBreadcrumbClick:I}=e;w[0]!==$?(t=void 0===$?[]:$,w[0]=$,w[1]=t):t=w[1];let R=t,z=(0,C.Y)()+10,{size:L,startResize:M}=(0,v.A)(80),[D,F]=(0,i.useState)(!1);(0,i.useContext)(e0),w[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,u.Oq)(Object.values(e1)),w[2]=s):s=w[2];let[,O]=(0,u.ZA)("tab",s);w[3]===Symbol.for("react.memo_cache_sentinel")?(r={},w[3]=r):r=w[3];let{clear:P}=j(r);w[4]!==P||w[5]!==T||w[6]!==E||w[7]!==O?(a=()=>{T||O(null),P(),E()},w[4]=P,w[5]=T,w[6]=E,w[7]=O,w[8]=a):a=w[8];let W=a;w[9]===Symbol.for("react.memo_cache_sentinel")?(o=["esc"],w[9]=o):o=w[9];let B=!1===D;w[10]!==B?(c={enabled:B},w[10]=B,w[11]=c):c=w[11],(0,h.vC)(o,W,c);let H=null!=k,V=!T;w[12]!==W||w[13]!==D?(d=()=>{D||W()},w[12]=W,w[13]=D,w[14]=d):d=w[14];let q=`${L}vw`;return w[15]===Symbol.for("react.memo_cache_sentinel")?(p={body:{padding:"0",height:"100vh"}},w[15]=p):p=w[15],w[16]!==M?(g=(0,n.jsx)(x.a,{className:eO().panelDragBar,onMouseDown:M}),w[16]=M,w[17]=g):g=w[17],w[18]!==W||w[19]!==N||w[20]!==R||w[21]!==T||w[22]!==I||w[23]!==k||w[24]!==A?(b=(0,n.jsx)(m.ErrorBoundary,{fallbackRender:e5,children:(0,n.jsx)(e2,{source:A,rowId:k,aliasWith:N,onClose:W,isNestedPanel:T,breadcrumbPath:R,setSubDrawerOpen:F,onBreadcrumbClick:I})}),w[18]=W,w[19]=N,w[20]=R,w[21]=T,w[22]=I,w[23]=k,w[24]=A,w[25]=b):b=w[25],w[26]!==g||w[27]!==b?(y=(0,n.jsxs)("div",{className:eO().panel,"data-testid":"row-side-panel",children:[g,b]}),w[26]=g,w[27]=b,w[28]=y):y=w[28],w[29]!==z||w[30]!==y?(_=(0,n.jsx)(C.S.Provider,{value:z,children:y}),w[29]=z,w[30]=y,w[31]=_):_=w[31],w[32]!==z||w[33]!==V||w[34]!==d||w[35]!==q||w[36]!==_||w[37]!==H?(S=(0,n.jsx)(f._,{opened:H,withCloseButton:!1,withOverlay:V,onClose:d,position:"right",size:q,styles:p,zIndex:z,children:_}),w[32]=z,w[33]=V,w[34]=d,w[35]=q,w[36]=_,w[37]=H,w[38]=S):S=w[38],S}function e5(e){return(0,n.jsxs)(b.B,{children:[(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),(0,n.jsx)("div",{className:"px-2 py-1 m-2 fs-7 font-monospace bg-body p-4",children:e?.error?.message})]})}},54167:(e,t,s)=>{"use strict";var r=s(31832);s(5062),s(75131),s(17769),r.N,r.M,r.P,t.oU=r.Q,r.O,r.L},57030:(e,t,s)=>{"use strict";s.d(t,{A:()=>eE});var r=s(6029),a=s(75155),n=s(55729),l=s(75828),i=s.n(l),o=s(47687),c=s.n(o),d=s(41038),u=s(1909),m=s(3145),h=s(95991),p=s(90124),x=s(63085),g=s(76013),f=s(3635),b=s(25062),y=s(92789),v=s(79621),j=s(10822),_=s(62118),S=s(97684),w=s(39614),E=s(81244),C=s(12853),k=s(50374),N=s(17273),A=s(40147),T=s(66692),$=s(86823),I=s(97039),R=s(61441),z=s(10708),L=s(56795),M=s(61411),D=s(81055),F=s(90515),O=s(45172),P=s(94502),W=s(80925),B=s(92917),H=s(81408),V=s.n(H);function q(e){return Math.max(e.getCurrentTime(),0)}let X=(0,n.memo)(({url:e})=>{let t,s;try{t=new URL(e)}catch{}try{let e=new URLSearchParams(t?.search??"");for(let[t,r]of(s=[],e.entries()))s.push({key:t,value:r})}catch{}return(0,r.jsxs)(I.j,{shadow:"md",position:"bottom-start",children:[(0,r.jsx)(I.j.Target,{children:(0,r.jsx)("div",{className:V().playerHeaderUrl,children:e||"Session Player"})}),e&&(0,r.jsx)(I.j.Dropdown,{children:(0,r.jsxs)("table",{className:"table fs-8 mb-0",children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(z.A,{size:14})}),(0,r.jsx)("td",{children:t?.host})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(L.A,{size:14})}),(0,r.jsx)("td",{children:t?.pathname})]}),s&&s.length>0&&s.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.key})}),(0,r.jsx)("td",{children:e.value})]},e.key))]})})]})});function G({config:{dateRange:e,serviceName:t,sessionId:s,sourceId:a},focus:l,setPlayerTime:o,playerState:d,setPlayerState:u,playerSpeed:m,skipInactive:h,setPlayerStartTimestamp:p,setPlayerEndTimestamp:x,setPlayerFullWidth:b,playerFullWidth:y,resizeKey:v,getSessionSourceFieldExpression:j}){let _=(0,B.uy)(),S=(0,n.useRef)(null),w=(0,n.useRef)(null),E=(0,n.useRef)(null),C=(0,n.useRef)([]),k=(0,n.useRef)(0),[N,A]=(0,n.useState)(0),I=(0,n.useRef)(c()(A,100,{leading:!0,trailing:!0})),[z,L]=(0,n.useState)(!1),[H,G]=(0,n.useState)(!1),K="",{isFetching:J,abort:Z}=(0,W.S)({serviceName:t,sessionId:s,sourceId:a,startDate:e?.[0]??new Date,endDate:e?.[1]??new Date,limit:1e6,onEvent:e=>{try{let{b:t,ck:s,tcks:r}=e;if(K+=t,!s||s===r){let e=JSON.parse(K);null!=E.current?E.current.addEvent(e):(null!=p&&0===C.current.length&&p(e.timestamp),C.current.push(e)),I.current(e.timestamp),k.current=e.timestamp,K=""}}catch(e){_&&console.error(e),K=""}C.current.length>5&&L(!0)},onEnd:()=>{L(!0),G(!0),null!=x&&(null!=E.current?x(k.current??0):C.current.length>0&&x(C.current[C.current.length-1].timestamp??0))},getSessionSourceFieldExpression:j},{keepPreviousData:!0,shouldAbortPendingRequest:!0}),[Y,U]=(0,n.useState)(""),Q=(0,n.useCallback)(()=>{if(null!=E.current)try{E.current.play(q(E.current))}catch(e){console.error(e)}},[E]),ee=(0,n.useCallback)(e=>{if(null!=E.current)try{E.current.pause(e)}catch(e){console.error(e)}},[E]);(0,T.vC)(["space"],()=>{"playing"===d?u("paused"):"paused"===d&&u("playing")});let et=(0,n.useRef)(o);(0,n.useEffect)(()=>{et.current=o},[o]);let es=(0,n.useRef)(0),er=(0,n.useCallback)(()=>{null!=E.current&&E.current.service.state.matches("playing")&&et.current(Math.round(E.current.getMetaData().startTime+q(E.current))),es.current=requestAnimationFrame(er)},[]);(0,n.useEffect)(()=>(es.current=requestAnimationFrame(er),()=>{cancelAnimationFrame(es.current)}),[er]),(0,n.useEffect)(()=>{null!=E.current&&("playing"===d?Q():"paused"===d&&ee())},[d,Q,ee]),(0,n.useEffect)(()=>{null!=E.current&&("playing"===d?(ee(),E.current?.setConfig({speed:m,skipInactive:h}),Q()):"paused"===d&&E.current?.setConfig({speed:m,skipInactive:h}))},[d,m,h,ee,Q]);let ea=(0,n.useCallback)(()=>{null!=S.current&&null!=w.current&&(w.current.style.transform="scale(0.0001)",window.requestAnimationFrame(()=>{if(null==S.current||null==w.current)return;let e=S.current.getBoundingClientRect(),t=E?.current?.iframe?.offsetWidth??1280,s=E?.current?.iframe?.offsetHeight??720,r=e.width/t,a=e.height/s;w.current.style.transform=`scale(${Math.min(r,a)})`}))},[S,w]);(0,n.useEffect)(()=>(window.addEventListener("resize",ea),()=>window.removeEventListener("resize",ea)),[ea]),(0,n.useEffect)(()=>{ea()},[v,ea]);let[en,el]=(0,n.useState)(!1);(0,n.useEffect)(()=>{C.current.length<2||null==w.current||null!=E.current||(E.current=new $.B(C.current,{root:w.current,mouseTail:!0,pauseAnimation:!1,showWarning:_,skipInactive:!0}),el(!0),_&&(window.__hdx_replayer=E.current),E.current.enableInteract(),E.current.on("event-cast",e=>{try{(e?.type===3&&e?.data?.source===4||4===e.type)&&setTimeout(()=>{ea()},0),e?.type===4&&U(e.data.href)}catch(e){_&&console.error(e)}}),"playing"===d&&E.current.getMetaData().endTime>(l?.ts??0)&&(null!=l&&ee(l.ts-E.current.getMetaData().startTime),Q()),setTimeout(()=>{ea()},0))},[ea,l,ee,z,d,Q,_]),(0,n.useEffect)(()=>{z&&en&&!(N<(l?.ts?l.ts+1e3:1/0))&&l?.setBy!=="player"&&null!=E.current&&(ee(l?.ts==null?0:l?.ts-E.current.getMetaData().startTime),ea(),"playing"===d&&Q())},[l,ee,u,d,Q,z,en,ea,N]),(0,n.useEffect)(()=>()=>{null!=E.current&&(E.current?.destroy(),E.current=null),Z()},[Z]);let ei=!1===z&&J,eo=!1===H&&(E.current?.getMetaData()?.endTime??0)<(l?.ts??0);return(0,n.useEffect)(()=>{null!=E.current&&null!=l&&E.current.getMetaData().endTime>l.ts&&"playing"===d&&E.current?.service?.state?.matches("paused")&&(ee(l.ts-E.current.getMetaData().startTime),Q())},[N,l,d,ee,Q]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:V().playerHeader,children:[(0,r.jsx)(g.M,{onClick:()=>b(!y),size:"sm",color:"gray",children:y?(0,r.jsx)(M.A,{size:14}):(0,r.jsx)(D.A,{size:14})}),(0,r.jsx)(R.i,{value:Y,children:({copied:e,copy:t})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X,{url:Y}),(0,r.jsx)(g.M,{onClick:t,title:"Copy URL",variant:"secondary",size:"sm",children:e?(0,r.jsx)(F.A,{size:14}):(0,r.jsx)(O.A,{size:14})})]})})]}),(0,r.jsxs)("div",{className:V().playerContainer,children:[ei||eo?(0,r.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[(0,r.jsx)(P.A,{className:"spin-animate",size:14}),eo?"Buffering to time...":"Loading replay..."]}):H&&null==E.current?(0,r.jsx)("div",{className:"text-center",children:"No replay available for this session, most likely due to this session starting and ending in a background tab."}):null,(0,r.jsx)("div",{ref:S,className:i()(V().domPlayerWrapper,"overflow-hidden",{"d-none":ei||eo,started:(E.current?.getCurrentTime()??0)>0,[V().domPlayerWrapperPaused]:"paused"===d}),children:(0,r.jsx)("div",{className:"player rr-block",ref:w})})]})]})}var K=s(831),J=s.n(K),Z=s(4308),Y=s(91021),U=s(29766);let Q=U.Ay.object({body:U.Ay.string().nullish(),component:U.Ay.string().nullish(),durationInMs:U.Ay.number(),"error.message":U.Ay.string().nullish(),"http.method":U.Ay.string().nullish(),"http.status_code":U.Ay.string().nullish(),"http.url":U.Ay.string().nullish(),id:U.Ay.string(),"location.href":U.Ay.string().nullish(),"otel.library.name":U.Ay.string(),parent_span_id:U.Ay.string(),severity_text:U.Ay.string(),span_id:U.Ay.string(),span_name:U.Ay.string(),timestamp:U.Ay.string(),trace_id:U.Ay.string(),type:U.Ay.string().nullish()});var ee=s(9953),et=s(7565),es=s(2326),er=s.n(es);let ea=e=>{let t,s,l,i,o,c,d,u=(0,a.c)(28),{min:m,max:h,value:p,markers:g,playerState:f,onChange:b,setPlayerState:y}=e,v=(0,et.a)();u[0]!==v||u[1]!==m?(t=e=>{let t=Math.max(e-m,0),s=Math.floor(t/1e3/60),r=Math.floor(t/1e3%60),a=`${s}:${r<10?"0":""}${r}`,n=v(e,{format:"short"});return`${a} at ${n}`},u[0]=v,u[1]=m,u[2]=t):t=u[2];let j=t;u[3]!==g||u[4]!==h||u[5]!==m||u[6]!==b?(s=g?.map(e=>(0,r.jsx)(x.m,{color:e.isError?"red":"gray",label:(0,B.EJ)(e?.description??"",240,"...",/\n/),position:"top",withArrow:!0,children:(0,r.jsx)("div",{className:er().markerDot,style:{backgroundColor:e.isSuccess?"var(--color-text-success)":e.isError?"var(--color-text-danger)":"var(--color-text-muted)",left:`${(e.ts-m)/(h-m)*100}%`},onClick:()=>b(e.ts)})},e.id)),u[3]=g,u[4]=h,u[5]=m,u[6]=b,u[7]=s):s=u[7];let _=s,[S,w]=n.useState(f);u[8]!==f||u[9]!==y?(l=()=>{w(f),y("paused")},u[8]=f,u[9]=y,u[10]=l):l=u[10];let E=l;u[11]!==S||u[12]!==y?(i=()=>{y(S)},u[11]=S,u[12]=y,u[13]=i):i=u[13];let C=i;u[14]!==_?(o=(0,r.jsx)("div",{className:er().markers,children:_}),u[14]=_,u[15]=o):o=u[15];let k="playing"===f?"green":"gray",N=p||m;return u[16]!==E||u[17]!==C||u[18]!==h||u[19]!==m||u[20]!==b||u[21]!==k||u[22]!==N||u[23]!==j?(c=(0,r.jsx)(ee.A,{color:k,size:"sm",min:m,max:h,value:N,step:1e3,label:j,onChange:b,onMouseDown:E,onMouseUp:C}),u[16]=E,u[17]=C,u[18]=h,u[19]=m,u[20]=b,u[21]=k,u[22]=N,u[23]=j,u[24]=c):c=u[24],u[25]!==o||u[26]!==c?(d=(0,r.jsxs)("div",{className:er().wrapper,children:[o,c]}),u[25]=o,u[26]=c,u[27]=d):d=u[27],d};function en(e){let{timestamp:t,durationInMs:s}=e,r=new Date(t).getTime(),a=new Date(r).getTime()+s;return{...e,startOffset:r,endOffset:a}}function el(e){return e.data}function ei(e){return e.success}function eo(e){return Q.safeParse(e)}var ec=s(34834),ed=s(67214),eu=s(53993),em=s(91104),eh=s(54396),ep=s(56906),ex=s(69986),eg=s(98632),ef=s(34027),eb=s(21440),ey=s(70727);let ev={navigation:(0,r.jsx)(eh.A,{size:14}),chat:(0,r.jsx)(ep.A,{size:14}),network:(0,r.jsx)(ex.A,{size:14}),custom:(0,r.jsx)(eg.A,{size:14})},ej=n.forwardRef((e,t)=>{let s,n,l,o,c,d,u,m,h,p,x=(0,a.c)(30),{dataIndex:g,event:f,isHighlighted:b,onClick:y,onTimeClick:v}=e;return x[0]!==f.isError||x[1]!==f.isSuccess||x[2]!==b?(s=i()(V().eventRow,{[V().eventRowError]:f.isError,[V().eventRowSuccess]:f.isSuccess,[V().eventRowHighlighted]:b}),x[0]=f.isError,x[1]=f.isSuccess,x[2]=b,x[3]=s):s=x[3],x[4]!==f.eventSource?(n=ev[f.eventSource]||(0,r.jsx)(ef.A,{size:14}),x[4]=f.eventSource,x[5]=n):n=x[5],x[6]!==n?(l=(0,r.jsx)("div",{className:V().eventRowIcon,children:n}),x[6]=n,x[7]=l):l=x[7],x[8]!==f.duration?(o=f.duration>0&&(0,r.jsxs)("span",{children:[f.duration,"ms"]}),x[8]=f.duration,x[9]=o):o=x[9],x[10]!==f.title||x[11]!==o?(c=(0,r.jsxs)("div",{className:V().eventRowTitle,children:[f.title," ",o]}),x[10]=f.title,x[11]=o,x[12]=c):c=x[12],x[13]!==f.description?(d=(0,r.jsx)("div",{className:V().eventRowDescription,title:f.description,children:f.description}),x[13]=f.description,x[14]=d):d=x[14],x[15]!==y||x[16]!==c||x[17]!==d?(u=(0,r.jsxs)("div",{className:V().eventRowContent,onClick:y,children:[c,d]}),x[15]=y,x[16]=c,x[17]=d,x[18]=u):u=x[18],x[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(_.A,{size:12,className:"me-1"}),x[19]=m):m=x[19],x[20]!==f.formattedTimestamp||x[21]!==v?(h=(0,r.jsxs)("div",{className:V().eventRowTimestamp,onClick:v,children:[m,f.formattedTimestamp]}),x[20]=f.formattedTimestamp,x[21]=v,x[22]=h):h=x[22],x[23]!==g||x[24]!==t||x[25]!==s||x[26]!==l||x[27]!==u||x[28]!==h?(p=(0,r.jsxs)("div",{"data-index":g,ref:t,className:s,children:[l,u,h]}),x[23]=g,x[24]=t,x[25]=s,x[26]=l,x[27]=u,x[28]=h,x[29]=p):p=x[29],p}),e_=({queriedConfig:e,aliasMap:t,onClick:s,onTimeClick:a,focus:l,minTs:i,showRelativeTime:o,eventsFollowPlayerPosition:c})=>{let{data:d,isLoading:u}=(0,Y.HD)(e,{placeholderData:e=>e,queryKey:["SessionEventList",e]}),m=(0,et.a)(),h=n.useMemo(()=>d?.data?.map(e=>Q.safeParse(e)).filter(e=>e.success).map(e=>e.data)??[],[d?.data]),p=(0,ey.Ay)({meta:d?.meta,aliasMap:t}),x=n.useMemo(()=>h.map(e=>{let{timestamp:t,durationInMs:s}=e,r=new Date(t).getTime(),a=new Date(r).getTime()+s,n=e["http.url"]??"",l=Number(e["http.status_code"]??""),c=e["http.method"]??"",d=(0,B.Up)(n),u=""!=c&&null!=c&&null!=n&&""!=n,h=e["error.message"],p=e.body??"",x=e.component,g=e.span_name,f=e["location.href"]??"",b=e["otel.library.name"],y=(0,B.Up)(f),v="custom-action"===b,j="routeChange"===g||"documentLoad"===g,_=e.severity_text?.toLowerCase()==="error"||"error"===x||l>499;return{id:e.id,row:e,isError:_,isSuccess:!_&&l<400&&l>99,eventSource:j?"navigation":u?"network":v?"custom":"intercom.onShow"===g?"chat":"log",title:j?"Navigated":"console.error"===g?"console.error":"console.log"===g?"console.log":"console.warn"===g?"console.warn":n.length>0?`${l} ${c}`:"intercom.onShow"===g?"Intercom Chat Opened":v||"console"===x?g:"console.error",description:j?y:null!=h&&h.length>0?h:"console"===x?p??"":n.length>0?d:"",timestamp:new Date(r),formattedTimestamp:o?(0,B.ax)(r-i):m(r,{format:"time"}),duration:a-r}})??[],[h,o,i,m]),g=n.useRef(null),f=(0,eb.Te)({count:x.length,getScrollElement:()=>g.current,estimateSize:()=>36}),b=(0,em.D)(x.findIndex(e=>e.timestamp.getTime()>=(l?.ts??0)),500);return(n.useEffect(()=>{f&&b>=0&&c&&f.scrollToIndex(b,{align:"center"})},[b,c,f]),u)?(0,r.jsxs)(ec.B,{p:"sm",gap:"xs",children:[(0,r.jsx)(ed.E,{height:36}),(0,r.jsx)(ed.E,{height:36}),(0,r.jsx)(ed.E,{height:36})]}):(0,r.jsx)(eu.F,{h:"100%",scrollbarSize:4,viewportRef:g,children:(0,r.jsx)("div",{className:V().eventListContainer,children:(0,r.jsx)("div",{style:{height:`${f.getTotalSize()}px`,width:"100%",position:"relative"},children:f.getVirtualItems().map(e=>{let t=x[e.index];return(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},children:(0,r.jsx)(ej,{event:t,dataIndex:e.index,isHighlighted:b===e.index,ref:f.measureElement,onClick:()=>s(p(t.row)),onTimeClick:()=>a(t.timestamp.getTime())})},e.key)})})})})},eS=(0,n.memo)(function(e){let t,s,n,l,i,o=(0,a.c)(18),{playerState:c,setPlayerState:d,setFocus:u,playbackRange:m,focus:h,queriedConfig:p}=e,x=m[0].getTime(),g=m[1].getTime(),f=1e3*Math.ceil(m[1].getTime()/1e3),b=1e3*Math.floor(m[0].getTime()/1e3);o[0]!==p?(t={placeholderData:Z.rX,queryKey:["PlayBar",p]},o[0]=p,o[1]=t):t=o[1];let{data:y}=(0,Y.HD)(p,t);y?.data,o[2]!==y?.data?(s=y?.data?.map(eo).filter(ei).map(el)??[],o[2]=y?.data,o[3]=s):s=o[3];let v=s;o[4]!==v||o[5]!==g||o[6]!==x?(n=J()(v.map(en).filter(e=>{let{startOffset:t}=e;return t>=x&&t<=g}).map(e=>{let t=e.span_name,s=e["location.href"]??"",r=(0,B.Up)(s),a=e["error.message"]??"",n=e["http.url"]??"",l=Number(e["http.status_code"]??""),i=e["http.method"]??"",o=(0,B.Up)(n),c=e.severity_text?.toLowerCase()==="error"||"error"===e.component||"console"===e.component||l>=399;return{id:e.id,ts:e.startOffset,percentage:Math.round((e.startOffset-x)/(g-x)*100),description:"routeChange"===t||"documentLoad"===t?`Navigated to ${r}`:n.length>0?`${l} ${i}${n.length>0?` ${o}`:""}`:null!=a&&a.length>0?a:"intercom.onShow"===t?"Intercom Chat Opened":e.body??"",isError:c,isSuccess:!c&&l<400&&l>99}})??[],"percentage"),o[4]=v,o[5]=g,o[6]=x,o[7]=n):n=o[7];let j=n,_=h?.ts;return o[8]!==u?(l=e=>{u({ts:e,setBy:"slider"})},o[8]=u,o[9]=l):l=o[9],o[10]!==j||o[11]!==f||o[12]!==b||o[13]!==c||o[14]!==d||o[15]!==_||o[16]!==l?(i=(0,r.jsx)(ea,{markers:j,min:b,max:f,value:_,onChange:l,setPlayerState:d,playerState:c}),o[10]=j,o[11]=f,o[12]=b,o[13]=c,o[14]=d,o[15]=_,o[16]=l,o[17]=i):i=o[17],i});function ew(e,t){let{valueExpression:s,alias:r}=t;return e[r]=s,e}function eE(e){let t,s,l,o,T,$,I,R,z,L,M,D,F,O,P,W,H,q,X,K,J,Z,Y,U,Q,ee,es,er,ea,en,el,ei,eo,ec,ed,eu,em,eh,ep,ex,eg,ef,eb,ey,ev,ej,eE,ek,eN,eA,eT,e$,eI,eR,ez,eL,eM,eD,eF,eO,eP,eW,eB,eH,eV,eq,eX,eG,eK,eJ=(0,a.c)(197),{traceSource:eZ,sessionSource:eY,session:eU,setDrawerOpen:eQ,rumSessionId:e0,start:e1,end:e2,initialTs:e3,whereLanguage:e5,onLanguageChange:e4}=e,e6=void 0===e5?"lucene":e5,[e7,e9]=(0,n.useState)(void 0);eJ[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],eJ[0]=t):t=eJ[0];let[e8,te]=(0,n.useState)(t);eJ[1]===Symbol.for("react.memo_cache_sentinel")?(s=d.GJ.withOptions({history:"replace"}),eJ[1]=s):s=eJ[1];let[tt,ts]=(0,d.ZA)("ts",s),tr=(0,B.ZC)(tt);eJ[2]!==e3?(l=null!=e3?{ts:e3,setBy:"parent"}:void 0,eJ[2]=e3,eJ[3]=l):l=eJ[3];let[ta,tn]=(0,n.useState)(l);eJ[4]!==tr||eJ[5]!==tt?(o=()=>{null==tr&&null!=tt&&tn({ts:tt,setBy:"url"})},T=[tr,tt],eJ[4]=tr,eJ[5]=tt,eJ[6]=o,eJ[7]=T):(o=eJ[6],T=eJ[7]),(0,n.useEffect)(o,T),eJ[8]!==ts?($=c()(async e=>{ts(e)},1e3),eJ[8]=ts,eJ[9]=$):$=eJ[9];let tl=(0,n.useRef)($).current;eJ[10]!==ts?(I=()=>()=>{ts(null)},R=[ts],eJ[10]=ts,eJ[11]=I,eJ[12]=R):(I=eJ[11],R=eJ[12]),(0,n.useEffect)(I,R),eJ[13]!==ts?(z=e=>{"player"===e.setBy?tl(e.ts):ts(e.ts),tn(e)},eJ[13]=ts,eJ[14]=z):z=eJ[14];let ti=z,[to,tc]=(0,n.useState)("paused"),[td,tu]=(0,n.useState)(void 0);eJ[15]===Symbol.for("react.memo_cache_sentinel")?(L={history:"push"},eJ[15]=L):L=eJ[15];let[tm,th]=(0,d.ZA)("session_q",L);eJ[16]!==td||eJ[17]!==tm?(M=()=>{null!=tm&&null==td&&tu(tm)},D=[tm,td],eJ[16]=td,eJ[17]=tm,eJ[18]=M,eJ[19]=D):(M=eJ[18],D=eJ[19]),(0,n.useEffect)(M,D);let tp=tm??"";eJ[20]!==th?(F=()=>()=>{th(null,{history:"replace"})},O=[th],eJ[20]=th,eJ[21]=F,eJ[22]=O):(F=eJ[21],O=eJ[22]),(0,n.useEffect)(F,O);let[tx,tg]=(0,n.useState)("highlighted"),[tf,tb]=(0,B.Mj)("hdx-session-subpanel-show-relative-time",!1),[ty,tv]=(0,B.Mj)("hdx-session-subpanel-player-speed",1),[tj,t_]=(0,B.Mj)("hdx-session-subpanel-skip-inactive",!0),[tS,tw]=(0,B.Mj)("hdx-session-subpanel-events-follow-player-position",!0),[tE,tC]=(0,n.useState)(e1.getTime()+144e5),[tk,tN]=(0,n.useState)(e2.getTime()-144e5);eJ[23]!==tE?(P=new Date(tE),eJ[23]=tE,eJ[24]=P):P=eJ[24],eJ[25]!==tk?(W=new Date(tk),eJ[25]=tk,eJ[26]=W):W=eJ[26],eJ[27]!==P||eJ[28]!==W?(H=[P,W],eJ[27]=P,eJ[28]=W,eJ[29]=H):H=eJ[29];let tA=H,{getFieldExpression:tT}=(0,A.A)(eY);eJ[30]!==e2||eJ[31]!==e0||eJ[32]!==tp||eJ[33]!==e1||eJ[34]!==tx||eJ[35]!==eZ||eJ[36]!==e6?(q={traceSource:eZ,rumSessionId:e0,where:tp,whereLanguage:e6,start:e1,end:e2,tab:tx},eJ[30]=e2,eJ[31]=e0,eJ[32]=tp,eJ[33]=e1,eJ[34]=tx,eJ[35]=eZ,eJ[36]=e6,eJ[37]=q):q=eJ[37];let{eventsConfig:t$,aliasMap:tI}=function(e){let t,s,r,n,l,i,o=(0,a.c)(96),{traceSource:c,rumSessionId:d,where:u,whereLanguage:m,start:h,end:p,tab:x}=e,{getFieldExpression:g}=(0,A.A)(c);e:{let e,s,r,a,n,l,i,d,u,m,h,p,x,f,b,y,v,j,_,S,w,E,C,k,N;if(!g){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}let A=c.eventAttributesExpression??"SpanAttributes";o[1]!==g||o[2]!==A?(e=g(A,"message"),o[1]=g,o[2]=A,o[3]=e):e=o[3];let T=`${e}`;o[4]!==T?(s={valueExpression:T,alias:"body"},o[4]=T,o[5]=s):s=o[5];let $=c.eventAttributesExpression??"SpanAttributes";o[6]!==g||o[7]!==$?(r=g($,"component"),o[6]=g,o[7]=$,o[8]=r):r=o[8];let I=`${r}`;o[9]!==I?(a={valueExpression:I,alias:"component"},o[9]=I,o[10]=a):a=o[10];let R=`toFloat64OrZero(toString(${c.durationExpression})) * pow(10, 3) / pow(10, toInt8OrZero(toString(${c.durationPrecision})))`;o[11]!==R?(n={valueExpression:R,alias:"durationInMs"},o[11]=R,o[12]=n):n=o[12];let z=c.eventAttributesExpression??"SpanAttributes";o[13]!==g||o[14]!==z?(l=g(z,"error.message"),o[13]=g,o[14]=z,o[15]=l):l=o[15];let L=`${l}`;o[16]!==L?(i={valueExpression:L,alias:"error.message"},o[16]=L,o[17]=i):i=o[17];let M=c.eventAttributesExpression??"SpanAttributes";o[18]!==g||o[19]!==M?(d=g(M,"http.method"),o[18]=g,o[19]=M,o[20]=d):d=o[20];let D=`${d}`;o[21]!==D?(u={valueExpression:D,alias:"http.method"},o[21]=D,o[22]=u):u=o[22];let F=c.eventAttributesExpression??"SpanAttributes";o[23]!==g||o[24]!==F?(m=g(F,"http.status_code"),o[23]=g,o[24]=F,o[25]=m):m=o[25];let O=`${m}`;o[26]!==O?(h={valueExpression:O,alias:"http.status_code"},o[26]=O,o[27]=h):h=o[27];let P=c.eventAttributesExpression??"SpanAttributes";o[28]!==g||o[29]!==P?(p=g(P,"http.url"),o[28]=g,o[29]=P,o[30]=p):p=o[30];let W=`${p}`;o[31]!==W?(x={valueExpression:W,alias:"http.url"},o[31]=W,o[32]=x):x=o[32];let B=`toString(cityHash64(${c.traceIdExpression}, ${c.parentSpanIdExpression}, ${c.spanIdExpression}))`;o[33]!==B?(f={valueExpression:B,alias:"id"},o[33]=B,o[34]=f):f=o[34];let H=c.eventAttributesExpression??"SpanAttributes";o[35]!==g||o[36]!==H?(b=g(H,"location.href"),o[35]=g,o[36]=H,o[37]=b):b=o[37];let V=`${b}`;o[38]!==V?(y={valueExpression:V,alias:"location.href"},o[38]=V,o[39]=y):y=o[39],o[40]===Symbol.for("react.memo_cache_sentinel")?(v={valueExpression:"ScopeName",alias:"otel.library.name"},o[40]=v):v=o[40];let q=`${c.parentSpanIdExpression}`;o[41]!==q?(j={valueExpression:q,alias:"parent_span_id"},o[41]=q,o[42]=j):j=o[42];let X=`${c.statusCodeExpression}`;o[43]!==X?(_={valueExpression:X,alias:"severity_text"},o[43]=X,o[44]=_):_=o[44];let G=`${c.spanIdExpression}`;o[45]!==G?(S={valueExpression:G,alias:"span_id"},o[45]=G,o[46]=S):S=o[46];let K=`${c.spanNameExpression}`;o[47]!==K?(w={valueExpression:K,alias:"span_name"},o[47]=K,o[48]=w):w=o[48];let J=`${c.timestampValueExpression}`;o[49]!==J?(E={valueExpression:J,alias:"timestamp"},o[49]=J,o[50]=E):E=o[50];let Z=`${c.traceIdExpression}`;o[51]!==Z?(C={valueExpression:Z,alias:"trace_id"},o[51]=Z,o[52]=C):C=o[52],o[53]===Symbol.for("react.memo_cache_sentinel")?(k={valueExpression:"CAST('span', 'String')",alias:"type"},o[53]=k):k=o[53],o[54]!==n||o[55]!==i||o[56]!==u||o[57]!==h||o[58]!==x||o[59]!==f||o[60]!==y||o[61]!==j||o[62]!==_||o[63]!==S||o[64]!==w||o[65]!==E||o[66]!==C||o[67]!==s||o[68]!==a?(N=[s,a,n,i,u,h,x,f,y,v,j,_,S,w,E,C,k],o[54]=n,o[55]=i,o[56]=u,o[57]=h,o[58]=x,o[59]=f,o[60]=y,o[61]=j,o[62]=_,o[63]=S,o[64]=w,o[65]=E,o[66]=C,o[67]=s,o[68]=a,o[69]=N):N=o[69],t=N}let f=t,b=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:>299 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[70]!==b?(s={type:"lucene",condition:b},o[70]=b,o[71]=s):s=o[71];let y=s;t:{let e;if(!g){r=void 0;break t}let t=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:* 
      OR ${c.eventAttributesExpression}.component:"console" 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[72]!==t?(e={type:"lucene",condition:t},o[72]=t,o[73]=e):e=o[73],r=e}let v=r;s:{let e,t,s,r;if(!g||!f||!v){n=void 0;break s}o[74]!==p||o[75]!==h?(e=[h,p],o[74]=p,o[75]=h,o[76]=e):e=o[76];let a=`${c.timestampValueExpression} ASC`;o[77]===Symbol.for("react.memo_cache_sentinel")?(t={limit:4e3,offset:0},o[77]=t):t=o[77];let l="highlighted"===x?y:v;o[78]!==l?(s=[l],o[78]=l,o[79]=s):s=o[79],o[80]!==f||o[81]!==s||o[82]!==e||o[83]!==a||o[84]!==c.connection||o[85]!==c.from||o[86]!==c.implicitColumnExpression||o[87]!==c.timestampValueExpression||o[88]!==u||o[89]!==m?(r={select:f,from:c.from,dateRange:e,whereLanguage:m,where:u,timestampValueExpression:c.timestampValueExpression,implicitColumnExpression:c.implicitColumnExpression,connection:c.connection,orderBy:a,limit:t,filters:s},o[80]=f,o[81]=s,o[82]=e,o[83]=a,o[84]=c.connection,o[85]=c.from,o[86]=c.implicitColumnExpression,o[87]=c.timestampValueExpression,o[88]=u,o[89]=m,o[90]=r):r=o[90],n=r}let j=n;r:{let e;if(!g){l=void 0;break r}o[91]!==f?(e=f.reduce(ew,{}),o[91]=f,o[92]=e):e=o[92],l=e}let _=l;return o[93]!==_||o[94]!==j?(i={eventsConfig:j,aliasMap:_},o[93]=_,o[94]=j,o[95]=i):i=o[95],i}(q),[tR,tz]=(0,n.useState)(!1);eJ[38]!==ty||eJ[39]!==tv?(X=()=>{1==ty?tv(2):2==ty?tv(4):4==ty?tv(8):8==ty&&tv(1)},eJ[38]=ty,eJ[39]=tv,eJ[40]=X):X=eJ[40];let tL=X,tM=tA[0].getTime(),tD=tA[1].getTime();eJ[41]===Symbol.for("react.memo_cache_sentinel")?(K=()=>{tc(eC)},eJ[41]=K):K=eJ[41];let tF=K;eJ[42]!==ta?.ts||eJ[43]!==tM||eJ[44]!==ti?(J=()=>{ti({ts:Math.max((ta?.ts??tM)-15e3,tM),setBy:"skip-backward"})},eJ[42]=ta?.ts,eJ[43]=tM,eJ[44]=ti,eJ[45]=J):J=eJ[45],ta?.ts;let tO=J;eJ[46]!==ta?.ts||eJ[47]!==tD||eJ[48]!==tM||eJ[49]!==ti?(Z=()=>{ti({ts:Math.min((ta?.ts??tM)+15e3,tD),setBy:"skip-forward"})},eJ[46]=ta?.ts,eJ[47]=tD,eJ[48]=tM,eJ[49]=ti,eJ[50]=Z):Z=eJ[50],ta?.ts;let tP=Z;eJ[51]!==tp||eJ[52]!==e6?(Y={values:{where:tp,whereLanguage:e6}},eJ[51]=tp,eJ[52]=e6,eJ[53]=Y):Y=eJ[53];let{control:tW,handleSubmit:tB}=(0,u.mN)(Y);eJ[54]!==th?(U=e=>{th(e.where)},eJ[54]=th,eJ[55]=U):U=eJ[55];let tH=U;eJ[56]!==eQ?(Q=e=>{eQ(!0),e9(e.where),te(e.aliasWith)},eJ[56]=eQ,eJ[57]=Q):Q=eJ[57];let tV=Q;eJ[58]!==ti?(ee=e=>{ti({ts:e,setBy:"timeline"})},eJ[58]=ti,eJ[59]=ee):ee=eJ[59];let tq=ee;eJ[60]!==ta?.setBy||eJ[61]!==ta?.ts||eJ[62]!==ti?(es=e=>{(ta?.setBy!=="player"||ta?.ts!==e)&&ti({ts:e,setBy:"player"})},eJ[60]=ta?.setBy,eJ[61]=ta?.ts,eJ[62]=ti,eJ[63]=es):es=eJ[63];let tX=es;eJ[64]!==e8||eJ[65]!==e7||eJ[66]!==eQ||eJ[67]!==eZ?(er=null!=e7&&eZ&&(0,r.jsx)(h.Z,{children:(0,r.jsx)(k.A,{source:eZ,rowId:e7,aliasWith:e8,onClose:()=>{eQ(!1),e9(void 0)}})}),eJ[64]=e8,eJ[65]=e7,eJ[66]=eQ,eJ[67]=eZ,eJ[68]=er):er=eJ[68],eJ[69]!==tR?(ea=i()(V().eventList,{"d-none":tR}),eJ[69]=tR,eJ[70]=ea):ea=eJ[70],eJ[71]===Symbol.for("react.memo_cache_sentinel")?(en={zIndex:100,width:"100%"},eJ[71]=en):en=eJ[71],eJ[72]!==tB||eJ[73]!==tH?(el=tB(tH),eJ[72]=tB,eJ[73]=tH,eJ[74]=el):el=eJ[74],eJ[75]!==eZ?(ei=(0,m.VO)(eZ),eJ[75]=eZ,eJ[76]=ei):ei=eJ[76],eJ[77]!==tB||eJ[78]!==tH?(eo=tB(tH),eJ[77]=tB,eJ[78]=tH,eJ[79]=eo):eo=eJ[79],eJ[80]!==tW||eJ[81]!==e4||eJ[82]!==ei||eJ[83]!==eo?(ec=(0,r.jsx)(N.A,{tableConnection:ei,control:tW,name:"where",size:"xs",showLabel:!1,enableHotkey:!0,onSubmit:eo,onLanguageChange:e4}),eJ[80]=tW,eJ[81]=e4,eJ[82]=ei,eJ[83]=eo,eJ[84]=ec):ec=eJ[84],eJ[85]!==el||eJ[86]!==ec?(ed=(0,r.jsx)("form",{style:en,onSubmit:el,children:ec}),eJ[85]=el,eJ[86]=ec,eJ[87]=ed):ed=eJ[87],eJ[88]===Symbol.for("react.memo_cache_sentinel")?(eu=[{value:"highlighted",label:"Highlighted"},{value:"events",label:"All Events"}],eJ[88]=eu):eu=eJ[88],eJ[89]===Symbol.for("react.memo_cache_sentinel")?(em=e=>tg(e),eJ[89]=em):em=eJ[89],eJ[90]!==tx?(eh=(0,r.jsx)(p.I,{flex:1,size:"xs",data:eu,value:tx,onChange:em}),eJ[90]=tx,eJ[91]=eh):eh=eJ[91];let tG=tS?"filled":"subtle";eJ[92]!==tS||eJ[93]!==tw?(ep=()=>tw(!tS),eJ[92]=tS,eJ[93]=tw,eJ[94]=ep):ep=eJ[94],eJ[95]===Symbol.for("react.memo_cache_sentinel")?(ex=(0,r.jsx)(v.A,{size:18}),eJ[95]=ex):ex=eJ[95],eJ[96]!==tG||eJ[97]!==ep?(eg=(0,r.jsx)(x.m,{label:"Sync with player position",color:"gray",children:(0,r.jsx)(g.M,{size:"md",color:"gray",variant:tG,onClick:ep,children:ex})}),eJ[96]=tG,eJ[97]=ep,eJ[98]=eg):eg=eJ[98],eJ[99]!==eh||eJ[100]!==eg?(ef=(0,r.jsxs)(f.Y,{gap:6,children:[eh,eg]}),eJ[99]=eh,eJ[100]=eg,eJ[101]=ef):ef=eJ[101],eJ[102]!==ed||eJ[103]!==ef?(eb=(0,r.jsxs)("div",{className:V().eventListHeader,children:[ed,ef]}),eJ[102]=ed,eJ[103]=ef,eJ[104]=eb):eb=eJ[104],eJ[105]!==tI||eJ[106]!==t$||eJ[107]!==tS||eJ[108]!==ta||eJ[109]!==tM||eJ[110]!==tV||eJ[111]!==tq||eJ[112]!==tf?(ey=t$&&tI&&(0,r.jsx)(e_,{eventsFollowPlayerPosition:tS,aliasMap:tI,queriedConfig:t$,onClick:tV,focus:ta,onTimeClick:tq,minTs:tM,showRelativeTime:tf}),eJ[105]=tI,eJ[106]=t$,eJ[107]=tS,eJ[108]=ta,eJ[109]=tM,eJ[110]=tV,eJ[111]=tq,eJ[112]=tf,eJ[113]=ey):ey=eJ[113],eJ[114]!==ea||eJ[115]!==eb||eJ[116]!==ey?(ev=(0,r.jsxs)("div",{className:ea,children:[eb,ey]}),eJ[114]=ea,eJ[115]=eb,eJ[116]=ey,eJ[117]=ev):ev=eJ[117],eJ[118]!==e2||eJ[119]!==ta||eJ[120]!==tT||eJ[121]!==tR||eJ[122]!==ty||eJ[123]!==to||eJ[124]!==e0||eJ[125]!==eU||eJ[126]!==eY||eJ[127]!==tX||eJ[128]!==tj||eJ[129]!==e1?(ej=tT&&(0,r.jsx)(G,{playerState:to,setPlayerState:tc,focus:ta,setPlayerTime:tX,config:{serviceName:eU.serviceName,sourceId:eY.id,sessionId:e0,dateRange:[e1,e2]},playerSpeed:ty,skipInactive:tj,setPlayerStartTimestamp:tC,setPlayerEndTimestamp:tN,setPlayerFullWidth:tz,playerFullWidth:tR,resizeKey:`${tR}`,getSessionSourceFieldExpression:tT}),eJ[118]=e2,eJ[119]=ta,eJ[120]=tT,eJ[121]=tR,eJ[122]=ty,eJ[123]=to,eJ[124]=e0,eJ[125]=eU,eJ[126]=eY,eJ[127]=tX,eJ[128]=tj,eJ[129]=e1,eJ[130]=ej):ej=eJ[130],eJ[131]!==t$||eJ[132]!==ta||eJ[133]!==tA||eJ[134]!==to||eJ[135]!==ti?(eE=t$&&(0,r.jsx)(eS,{playerState:to,setPlayerState:tc,focus:ta,setFocus:ti,playbackRange:tA,queriedConfig:t$}),eJ[131]=t$,eJ[132]=ta,eJ[133]=tA,eJ[134]=to,eJ[135]=ti,eJ[136]=eE):eE=eJ[136],eJ[137]!==eE?(ek=(0,r.jsx)("div",{className:V().playerPlaybar,children:eE}),eJ[137]=eE,eJ[138]=ek):ek=eJ[138],eJ[139]!==tb||eJ[140]!==tf?(eN=()=>tb(!tf),eJ[139]=tb,eJ[140]=tf,eJ[141]=eN):eN=eJ[141],eJ[142]!==ta?.ts||eJ[143]!==tD||eJ[144]!==tM||eJ[145]!==tf?(eA=tf?(0,r.jsxs)(r.Fragment,{children:[(0,B.ax)((ta?.ts??0)-tM),(0,r.jsxs)("span",{className:"fw-normal ms-2",children:[" / ",(0,B.ax)(tD-tM)]})]}):(0,r.jsx)(et.H,{value:ta?.ts||tM,format:"time"}),eJ[142]=ta?.ts,eJ[143]=tD,eJ[144]=tM,eJ[145]=tf,eJ[146]=eA):eA=eJ[146],eJ[147]!==eN||eJ[148]!==eA?(eT=(0,r.jsx)("div",{className:V().playerTimestamp,children:(0,r.jsx)(x.m,{label:"Toggle relative time",color:"gray",children:(0,r.jsx)(b.$,{variant:"subtle",color:"gray",onClick:eN,size:"compact-xs",children:eA})})}),eJ[147]=eN,eJ[148]=eA,eJ[149]=eT):eT=eJ[149];let tK=(ta?.ts||0)<=tM;eJ[150]===Symbol.for("react.memo_cache_sentinel")?(e$=(0,r.jsx)(j.A,{size:18}),eJ[150]=e$):e$=eJ[150],eJ[151]!==tO||eJ[152]!==tK?(eI=(0,r.jsx)(x.m,{label:"Go 15 seconds back",color:"gray",children:(0,r.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tO,disabled:tK,children:e$})}),eJ[151]=tO,eJ[152]=tK,eJ[153]=eI):eI=eJ[153];let tJ="playing"===to?"Pause":"Play";eJ[154]!==to?(eR=(0,r.jsx)(g.M,{variant:"secondary",size:"lg",radius:"xl",onClick:tF,children:"paused"===to?(0,r.jsx)(_.A,{size:20}):(0,r.jsx)(S.A,{size:20})}),eJ[154]=to,eJ[155]=eR):eR=eJ[155],eJ[156]!==tJ||eJ[157]!==eR?(ez=(0,r.jsx)(x.m,{label:tJ,color:"gray",children:eR}),eJ[156]=tJ,eJ[157]=eR,eJ[158]=ez):ez=eJ[158];let tZ=(ta?.ts||0)>=tD;return eJ[159]===Symbol.for("react.memo_cache_sentinel")?(eL=(0,r.jsx)(w.A,{size:18}),eJ[159]=eL):eL=eJ[159],eJ[160]!==tP||eJ[161]!==tZ?(eM=(0,r.jsx)(x.m,{label:"Skip 15 seconds",color:"gray",children:(0,r.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tP,disabled:tZ,children:eL})}),eJ[160]=tP,eJ[161]=tZ,eJ[162]=eM):eM=eJ[162],eJ[163]!==eI||eJ[164]!==ez||eJ[165]!==eM?(eD=(0,r.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[eI,ez,eM]}),eJ[163]=eI,eJ[164]=ez,eJ[165]=eM,eJ[166]=eD):eD=eJ[166],eJ[167]!==tj?(eF=tj?(0,r.jsx)(E.A,{size:18,className:"pe-1"}):(0,r.jsx)(C.A,{size:18,className:"pe-1"}),eJ[167]=tj,eJ[168]=eF):eF=eJ[168],eJ[169]!==t_||eJ[170]!==tj?(eO=()=>t_(!tj),eJ[169]=t_,eJ[170]=tj,eJ[171]=eO):eO=eJ[171],eJ[172]===Symbol.for("react.memo_cache_sentinel")?(eP=(0,r.jsx)(y.c,{orientation:"vertical",ml:"sm"}),eJ[172]=eP):eP=eJ[172],eJ[173]!==eF||eJ[174]!==eO?(eW=(0,r.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eF,onClick:eO,children:["Skip Idle",eP]}),eJ[173]=eF,eJ[174]=eO,eJ[175]=eW):eW=eJ[175],eJ[176]!==ty?(eB=(0,r.jsxs)("span",{className:"fw-bold pe-1",children:[ty,"x"]}),eJ[176]=ty,eJ[177]=eB):eB=eJ[177],eJ[178]===Symbol.for("react.memo_cache_sentinel")?(eH=(0,r.jsx)(y.c,{orientation:"vertical",ml:"sm"}),eJ[178]=eH):eH=eJ[178],eJ[179]!==tL||eJ[180]!==eB?(eV=(0,r.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eB,onClick:tL,children:["Speed",eH]}),eJ[179]=tL,eJ[180]=eB,eJ[181]=eV):eV=eJ[181],eJ[182]!==eW||eJ[183]!==eV?(eq=(0,r.jsxs)(f.Y,{align:"center",justify:"flex-end",gap:"xs",children:[eW,eV]}),eJ[182]=eW,eJ[183]=eV,eJ[184]=eq):eq=eJ[184],eJ[185]!==eT||eJ[186]!==eD||eJ[187]!==eq?(eX=(0,r.jsxs)("div",{className:V().playerToolbar,children:[eT,eD,eq]}),eJ[185]=eT,eJ[186]=eD,eJ[187]=eq,eJ[188]=eX):eX=eJ[188],eJ[189]!==ej||eJ[190]!==ek||eJ[191]!==eX?(eG=(0,r.jsxs)("div",{className:V().player,children:[ej,ek,eX]}),eJ[189]=ej,eJ[190]=ek,eJ[191]=eX,eJ[192]=eG):eG=eJ[192],eJ[193]!==er||eJ[194]!==ev||eJ[195]!==eG?(eK=(0,r.jsxs)("div",{className:V().wrapper,children:[er,ev,eG]}),eJ[193]=er,eJ[194]=ev,eJ[195]=eG,eJ[196]=eK):eK=eJ[196],eK}function eC(e){return"playing"===e?"paused":"playing"}},58541:(e,t,s)=>{"use strict";s.d(t,{g:()=>k});var r=s(6029),a=s(55729),n=s(11335),l=s(1909),i=s(59589),o=s(29135),c=s(82641),d=s(92495),u=s(34834),m=s(43517),h=s(18341),p=s(3635),x=s(59029),g=s(39603),f=s(25062),b=s(60665),y=s(32963),v=s(95352),j=s(6876),_=s(36600),S=s(92917);let w=["{{title}}","{{body}}","{{link}}","{{state}}","{{startTime}}","{{endTime}}","{{eventId}}"],E=w.join(" | "),C=()=>e=>""===e.state.doc.toString().trim()?[]:(0,i.cp)()(e);function k({webhook:e,onClose:t,onSuccess:s}){let k=(0,_.Kh)(),N=j.Ay.useSaveWebhook(),A=j.Ay.useUpdateWebhook(),T=j.Ay.useTestWebhook(),$=null!=e,I=(0,l.mN)({defaultValues:{service:e?.service||c.x.Slack,name:e?.name||"",url:e?.url||"",description:e?.description||"",body:e?.body||"",headers:e?.headers?JSON.stringify(e.headers,null,2):""}});(0,a.useEffect)(()=>{e&&I.reset({service:e.service,name:e.name,url:e.url,description:e.description,body:e.body,headers:e.headers?JSON.stringify(e.headers,null,2):""},{})},[e,I]);let R=async e=>{let t,{service:s,url:r,body:a,headers:l}=e;if(l&&l.trim())try{t=JSON.parse(l)}catch(t){let e=t instanceof Error?t.message:"Invalid JSON format";b.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let i=a;a||(s===c.x.Generic?i=`{"text": "${E}"}`:s===c.x.IncidentIO&&(i=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));try{await T.mutateAsync({service:s,url:r,body:i,headers:t}),b.$e.show({color:"green",message:"Test webhook sent successfully"})}catch(t){console.error(t);let e="Failed to send test webhook. Please check your webhook configuration.";if(t instanceof n.H)try{let s=await t.response.json();s.message&&(e=s.message)}catch(e){console.error("Failed to parse error response:",e)}b.$e.show({message:e,color:"red",autoClose:5e3})}},z=async r=>{let{service:a,name:l,url:i,description:o,body:d,headers:u}=r;try{let r;if(u&&u.trim())try{r=JSON.parse(u)}catch(t){let e=t instanceof Error?t.message:"Invalid JSON format";b.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let n=d;d||(a===c.x.Generic?n=`{"text": "${E}"}`:a===c.x.IncidentIO&&(n=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));let m={service:a,name:l,url:i,description:o||"",body:n,headers:r},h=$?await A.mutateAsync({id:e._id,...m}):await N.mutateAsync(m);b.$e.show({color:"green",message:`Webhook ${$?"updated":"created"} successfully`}),s(h.data?._id),t()}catch(t){console.error(t);let e=`Something went wrong. Please contact ${k} team.`;if(t instanceof n.H)try{let s=await t.response.json();if(s.error?.issues&&Array.isArray(s.error.issues)){let t=s.error.issues.map(e=>{let t=e.path.join(".");return`${t}: ${e.message}`}).join(", ");e=`Validation error: ${t}`}else e=s.message?s.message:JSON.stringify(s)}catch(e){console.error("Failed to parse error response:",e)}b.$e.show({message:e,color:"red",autoClose:5e3})}},L=(0,l.FH)({control:I.control,name:"service"});return(0,r.jsx)("form",{onSubmit:I.handleSubmit(z),children:(0,r.jsxs)(u.B,{mt:"sm",children:[(0,r.jsx)(m.E,{children:$?"Edit Webhook":"Create Webhook"}),(0,r.jsx)(h.s.Group,{"data-testid":"service-type-radio-group",label:"Service Type",required:!0,value:L,onChange:e=>I.setValue("service",e),children:(0,r.jsxs)(p.Y,{mt:"xs",children:[(0,r.jsx)(h.s,{value:c.x.Slack,label:"Slack"}),(0,r.jsx)(h.s,{value:c.x.IncidentIO,label:"incident.io"}),(0,r.jsx)(h.s,{value:c.x.Generic,label:"Generic"})]})}),(0,r.jsx)(x.k,{label:"Webhook Name","data-testid":"webhook-name-input",placeholder:"Post to #dev-alerts",required:!0,error:I.formState.errors.name?.message,...I.register("name",{required:!0})}),(0,r.jsx)(x.k,{label:"Webhook URL","data-testid":"webhook-url-input",placeholder:L===c.x.Slack?"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX":L===c.x.IncidentIO?"https://api.incident.io/v2/alert_events/http/ZZZZZZZZ?token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX":"https://example.com/webhook",type:"url",required:!0,error:I.formState.errors.url?.message,...I.register("url",{required:!0,validate:(e,t)=>t.service===c.x.Slack?(0,d.AB)(e)||"URL must be valid and have a slack.com domain":(0,S.AY)(e)||"URL must be valid"})}),(0,r.jsx)(x.k,{label:"Webhook Description (optional)",placeholder:"To be used for dev alerts",error:I.formState.errors.description?.message,...I.register("description")}),L===c.x.Generic&&[(0,r.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Headers (optional)"},"1"),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(l.xI,{name:"headers",control:I.control,render:({field:e})=>(0,r.jsx)(v.Ay,{height:"100px",extensions:[(0,i.Pq)(),(0,o.bu)(C()),(0,v.qf)(`{
	"Authorization": "Bearer token",
	"X-Custom-Header": "value"
}`)],theme:"dark",value:e.value,onChange:t=>e.onChange(t)})})},"2"),(0,r.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Body (optional)"},"3"),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(l.xI,{name:"body",control:I.control,render:({field:e})=>(0,r.jsx)(v.Ay,{height:"100px",extensions:[(0,i.Pq)(),(0,o.bu)(C()),(0,v.qf)(`{
	"text": "${E}"
}`)],theme:"dark",value:e.value,onChange:t=>e.onChange(t)})})},"4"),(0,r.jsxs)(g.F,{icon:(0,r.jsx)(y.A,{size:16}),className:"mb-4",color:"gray",children:[(0,r.jsx)("span",{children:"Currently the body supports the following message template variables:"}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:w.map((e,t)=>(0,r.jsxs)("span",{children:[(0,r.jsx)("code",{children:e}),t<w.length-1&&", "]},t))})]},"5")],(0,r.jsxs)(p.Y,{justify:"space-between",children:[(0,r.jsxs)(p.Y,{children:[(0,r.jsx)(f.$,{variant:"primary",type:"submit","data-testid":"add-webhook-button",loading:N.isPending||A.isPending,children:$?"Update Webhook":"Add Webhook"}),(0,r.jsx)(f.$,{variant:"secondary",onClick:I.handleSubmit(R),loading:T.isPending,type:"button",children:"Test Webhook"})]}),(0,r.jsx)(f.$,{variant:"secondary",onClick:t,type:"reset",children:"Cancel"})]})]})})}},59017:(e,t,s)=>{"use strict";s.d(t,{V:()=>d});var r=s(6029),a=s(75155),n=s(55729),l=s(23935),i=s(78253),o=s(50374),c=s(94937);function d(e){let t,s,d,m,h,p=(0,a.c)(21),{attributes:x}=e;p[0]!==x?(t=void 0===x?[]:x,p[0]=x,p[1]=t):t=p[1];let g=t,[f,b]=(0,n.useState)(!1),{onPropertyAddClick:y,generateSearchUrl:v,source:j}=(0,n.useContext)(o.D);p[2]!==g||p[3]!==f?(s=g.sort(u).slice(0,f?g.length:12),p[2]=g,p[3]=f,p[4]=s):s=p[4];let _=s,S=g.length-_.length;if(p[5]!==j?.id||p[6]!==v||p[7]!==y||p[8]!==_){let e;p[10]!==j?.id||p[11]!==v||p[12]!==y?(e=e=>{let{displayedKey:t,value:s,sql:a,lucene:n,source:l}=e;return(0,r.jsx)(c.A,{displayedKey:t,name:n||a,nameLanguage:n?"lucene":"sql",value:s,...y&&j?.id===l.id?{onPropertyAddClick:y,sqlExpression:a}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:v?(e,t)=>v({where:e||"",whereLanguage:t??"lucene",source:l}):void 0},`${t}-${s}-${l.id}`)},p[10]=j?.id,p[11]=v,p[12]=y,p[13]=e):e=p[13],d=_.map(e),p[5]=j?.id,p[6]=v,p[7]=y,p[8]=_,p[9]=d}else d=p[9];return p[14]!==g.length||p[15]!==S||p[16]!==f?(m=g.length>12&&(0,r.jsx)(l.M,{size:"xs",onClick:()=>b(!f),children:f?"Show Less":`Show ${S} More...`}),p[14]=g.length,p[15]=S,p[16]=f,p[17]=m):m=p[17],p[18]!==d||p[19]!==m?(h=(0,r.jsxs)(i.s,{wrap:"wrap",gap:"2px",mb:"md",align:"baseline",children:[d,m]}),p[18]=d,p[19]=m,p[20]=h):h=p[20],h}function u(e,t){return e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value)}},61629:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(6029),a=s(75155),n=s(43517),l=s(92917);function i(e){let t,s,i,o=(0,a.c)(7);o[0]!==e?({level:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]);let c=(0,l.lO)(t),d="error"===c?"red":"warn"===c?"var(--color-chart-warning)":"gray";return o[3]!==t||o[4]!==s||o[5]!==d?(i=(0,r.jsx)(n.E,{component:"span",size:"xs",c:d,...s,children:t}),o[3]=t,o[4]=s,o[5]=d,o[6]=i):i=o[6],i}},64441:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var r=s(6029),a=s(75155),n=s(55729),l=s(63085),i=s(8737),o=s(43517),c=s(60481),d=s(20294),u=s(78253),m=s(22623),h=s(25062),p=s(15216),x=s(16232),g=s(7565),f=s(57820),b=s(92917),y=s(59017),v=s(50374),j=s(61629);let _=e=>"getTime"in e&&!isNaN(e.getTime());function S(e){let t,s,n,u=(0,a.c)(9),{breadcrumbPath:m,onNavigateToLevel:h}=e;u[0]!==h?(t=e=>{h?.(e)},u[0]=h,u[1]=t):t=u[1];let p=t;e:{let e;if(0===m.length){let e;u[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],u[2]=e):e=u[2],s=e;break e}if(u[3]!==m||u[4]!==p){let t;e=[],m.forEach((t,s)=>{let a,n=t.rowData?(a=(t.rowData.__hdx_body||"").trim()).length>200?`${a.substring(0,197)}...`:a:"";e.push((0,r.jsx)(l.m,{label:n,disabled:!n,position:"bottom",withArrow:!0,children:(0,r.jsx)(i.N,{onClick:()=>p(s),style:{textDecoration:"none"},children:(0,r.jsx)(o.E,{size:"sm",c:"blue",style:{cursor:"pointer"},children:0===s?"Original Event":t.label})})},`crumb-${s}`))}),u[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(o.E,{size:"sm",children:"Selected Event"},"current"),u[6]=t):t=u[6],e.push(t),u[3]=m,u[4]=p,u[5]=e}else e=u[5];s=e}let x=s;return 0===m.length?null:(u[7]!==x?(n=(0,r.jsx)(c.a,{mb:"sm",pb:"sm",className:"border-bottom border-dark",children:(0,r.jsx)(d.B,{separator:"›",separatorMargin:"xs",children:x})}),u[7]=x,u[8]=n):n=u[8],n)}function w(e){let t,s,l,i,d,w,C,k,N,A,T,$,I,R=(0,a.c)(41),{attributes:z,mainContent:L,mainContentHeader:M,date:D,severityText:F,breadcrumbPath:O,onBreadcrumbClick:P}=e;R[0]!==z?(t=void 0===z?[]:z,R[0]=z,R[1]=t):t=R[1];let W=t,B=void 0===L?"":L;R[2]!==O?(s=void 0===O?[]:O,R[2]=O,R[3]=s):s=R[3];let H=s,[V,q]=n.useState(!1),{generateSearchUrl:X}=(0,n.useContext)(v.D),G=B.length>2e3;R[4]!==V||R[5]!==B?(l=V?B:B?.slice(0,2e3),R[4]=V,R[5]=B,R[6]=l):l=R[6];let K=l,[J,Z]=(0,n.useState)(null),[Y,U]=(0,n.useState)(0);R[7]!==J?(i=()=>{if(!J)return;let e=()=>{U(J.offsetHeight)};e();let t=new ResizeObserver(e);return t.observe(J),()=>{t.disconnect()}},d=[J],R[7]=J,R[8]=i,R[9]=d):(i=R[8],d=R[9]),(0,n.useEffect)(i,d);let{userPreferences:Q,setUserPreference:ee}=(0,f.HW)(),{expandSidebarHeader:et}=Q;return R[10]!==H||R[11]!==P?(w=(0,r.jsx)(S,{breadcrumbPath:H,onNavigateToLevel:P}),R[10]=H,R[11]=P,R[12]=w):w=R[12],R[13]!==F?(C=F&&(0,r.jsx)(j.A,{level:F}),R[13]=F,R[14]=C):C=R[14],R[15]!==D||R[16]!==F?(k=F&&_(D)&&(0,r.jsx)(o.E,{size:"xs",mx:"xs",children:"\xb7"}),R[15]=D,R[16]=F,R[17]=k):k=R[17],R[18]!==D?(N=_(D)&&(0,r.jsxs)(o.E,{size:"xs",children:[(0,r.jsx)(g.H,{value:D})," \xb7"," ",(0,b.Jk)(D)," ago"]}),R[18]=D,R[19]=N):N=R[19],R[20]!==C||R[21]!==k||R[22]!==N?(A=(0,r.jsxs)(u.s,{children:[C,k,N]}),R[20]=C,R[21]=k,R[22]=N,R[23]=A):A=R[23],R[24]!==V||R[25]!==et||R[26]!==Y||R[27]!==G||R[28]!==B||R[29]!==K||R[30]!==M||R[31]!==ee||R[32]!==Q?(T=B?(0,r.jsxs)(m.t,{p:"xs",mt:"sm",style:{maxHeight:et?void 0:120,overflow:"auto",overflowWrap:"break-word"},ref:Z,children:[(0,r.jsxs)(u.s,{justify:"space-between",mb:"xs",children:[(0,r.jsx)(o.E,{size:"xs",children:M}),Y>=120&&(0,r.jsx)(h.$,{size:"compact-xs",variant:"subtle",onClick:()=>ee({...Q,expandSidebarHeader:!et}),children:et?(0,r.jsx)(p.A,{size:14}):(0,r.jsx)(x.A,{size:14})})]}),K,G&&(0,r.jsx)(h.$,{size:"compact-xs",variant:"subtle",color:"gray",onClick:()=>{q(E)},children:V?"Collapse":"Expand"})]}):(0,r.jsx)(m.t,{p:"xs",mt:"sm",children:(0,r.jsx)(o.E,{size:"xs",mb:"xs",children:"[Empty]"})}),R[24]=V,R[25]=et,R[26]=Y,R[27]=G,R[28]=B,R[29]=K,R[30]=M,R[31]=ee,R[32]=Q,R[33]=T):T=R[33],R[34]!==W?($=(0,r.jsx)(c.a,{mt:"xs",children:(0,r.jsx)(y.V,{attributes:W})}),R[34]=W,R[35]=$):$=R[35],R[36]!==A||R[37]!==T||R[38]!==$||R[39]!==w?(I=(0,r.jsxs)(r.Fragment,{children:[w,A,T,$]}),R[36]=A,R[37]=T,R[38]=$,R[39]=w,R[40]=I):I=R[40],I}function E(e){return!e}},65081:(e,t,s)=>{"use strict";s.d(t,{z:()=>D});var r=s(6029),a=s(75155),n=s(55729),l=s(81278),i=s.n(l),o=s(67549),c=s(83595),d=s(60449),u=s.n(d),m=s(8737),h=s(56513),p=s(3635),x=s(96061),g=s(25062),f=s(60481),b=s(22623),y=s(43517),v=s(39785),j=s(60665),_=s(24602),S=s(95316),w=s(90515),E=s(9385),C=s(41279),k=s(9841),N=s(6723),A=s(23195),T=s(45172),$=s(26355),I=s(92917),R=s(50374);function z(e,t,s="JSONExtractString"){let r=e.slice(t.length);if(0===r.length)return null;let a=t[t.length-1],n=r.map(e=>`'${e}'`).join(", ");return`${s}(${a}, ${n})`}let L=(0,c.tG)("hdx_json_viewer_options",{normallyExpanded:!0,lineWrap:!0,tabulate:!0,filterBlanks:!1});function M(){let e,t,s,n,l,i,c,d,u,x,g,f,b,y,v,j,E=(0,a.c)(39),[C,k]=(0,o.fp)(L);return E[0]!==C||E[1]!==k?(e=()=>k({...C,lineWrap:!C.lineWrap}),E[0]=C,E[1]=k,E[2]=e):e=E[2],E[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(_.A,{size:14}),E[3]=t):t=E[3],E[4]!==e?(s=(0,r.jsx)(m.N,{color:"gray",onClick:e,children:t}),E[4]=e,E[5]=s):s=E[5],E[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(h.W.Target,{children:(0,r.jsx)(m.N,{children:(0,r.jsx)(S.A,{size:14})})}),E[6]=n):n=E[6],E[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(h.W.Label,{lh:1,py:6,children:"Properties view options"}),E[7]=l):l=E[7],E[8]!==C||E[9]!==k?(i=()=>k({...C,normallyExpanded:!C.normallyExpanded}),E[8]=C,E[9]=k,E[10]=i):i=E[10],E[11]!==C.normallyExpanded?(c=C.normallyExpanded?(0,r.jsx)(w.A,{size:14,className:"ps-2"}):null,E[11]=C.normallyExpanded,E[12]=c):c=E[12],E[13]!==i||E[14]!==c?(d=(0,r.jsx)(h.W.Item,{onClick:i,lh:"1",py:8,rightSection:c,children:"Expand all properties"}),E[13]=i,E[14]=c,E[15]=d):d=E[15],E[16]!==C.tabulate?(u=C.tabulate?(0,r.jsx)(w.A,{size:14,className:"ps-2"}):null,E[16]=C.tabulate,E[17]=u):u=E[17],E[18]!==C||E[19]!==k?(x=()=>k({...C,tabulate:!C.tabulate}),E[18]=C,E[19]=k,E[20]=x):x=E[20],E[21]!==u||E[22]!==x?(g=(0,r.jsx)(h.W.Item,{lh:"1",py:8,rightSection:u,onClick:x,children:"Tabulate"}),E[21]=u,E[22]=x,E[23]=g):g=E[23],E[24]!==C.filterBlanks?(f=C.filterBlanks?(0,r.jsx)(w.A,{size:14,className:"ps-2"}):null,E[24]=C.filterBlanks,E[25]=f):f=E[25],E[26]!==C||E[27]!==k?(b=()=>k({...C,filterBlanks:!C.filterBlanks}),E[26]=C,E[27]=k,E[28]=b):b=E[28],E[29]!==f||E[30]!==b?(y=(0,r.jsx)(h.W.Item,{lh:"1",py:8,rightSection:f,onClick:b,children:"Hide blank values"}),E[29]=f,E[30]=b,E[31]=y):y=E[31],E[32]!==g||E[33]!==y||E[34]!==d?(v=(0,r.jsxs)(h.W,{width:240,withinPortal:!1,children:[n,(0,r.jsxs)(h.W.Dropdown,{children:[l,d,g,y]})]}),E[32]=g,E[33]=y,E[34]=d,E[35]=v):v=E[35],E[36]!==v||E[37]!==s?(j=(0,r.jsxs)(p.Y,{children:[s,v]}),E[36]=v,E[37]=s,E[38]=j):j=E[38],j}function D(e){let t,s,l,c,d,m,h,_,S,w,D,O,P=(0,a.c)(31),{data:W,jsonColumns:B}=e;P[0]!==B?(t=void 0===B?[]:B,P[0]=B,P[1]=t):t=P[1];let H=t,{onPropertyAddClick:V,generateSearchUrl:q,generateChartUrl:X,displayedColumns:G,toggleColumn:K}=(0,n.useContext)(R.D),[J,Z]=(0,n.useState)(""),[Y]=(0,v.o)(J,100),U=(0,o.md)(L);e:{let e;if(!W){s=null;break e}if(P[2]!==W||P[3]!==Y||P[4]!==U.filterBlanks){let t=Object.fromEntries(Object.entries(W).filter(F));U.filterBlanks&&(t=function e(t){if(null!==t&&""!==t){if(Array.isArray(t)){let s=t.map(e).filter(e=>void 0!==e);return s.length>0?s:void 0}if("object"==typeof t){let s={};for(let[r,a]of Object.entries(t)){let t=e(a);void 0!==t&&(s[r]=t)}return Object.keys(s).length>0?s:void 0}return t}}(t)),e=function e(t,s){if("object"!=typeof t||null===t||""===s)return t;let r={};for(let[a,n]of Object.entries(t))if(null!==n&&((a.toLowerCase().includes(s.toLowerCase())||"string"==typeof n&&n.toLowerCase().includes(s.toLowerCase()))&&(r[a]=n),"object"==typeof n)){let t=e(n,s);Object.keys(t).length>0&&(r[a]=t)}return r}(t,Y),P[2]=W,P[3]=Y,P[4]=U.filterBlanks,P[5]=e}else e=P[5];s=e}let Q=s;P[6]!==G||P[7]!==X||P[8]!==q||P[9]!==H||P[10]!==V||P[11]!==Q||P[12]!==K?(l=e=>{let{keyPath:t,value:s,isInParsedJson:a,parsedJsonRootPath:n}=e,l=[],o=(0,I.uc)(t,H),c=t.length>0&&H?.includes(t[0]);if(null!=V&&"string"==typeof s&&s&&"Timestamp"!=o&&"TimestampTime"!=o&&l.push({key:"add-to-search",label:(0,r.jsxs)(p.Y,{gap:2,children:[(0,r.jsx)(E.A,{size:14}),"Add to Filters"]}),title:"Add to Filters",onClick:()=>{let e;if(a&&n){let s=z(t,n);e=s||(c?`toString(${o})`:o)}else e=c?`toString(${o})`:o;V(e,s),j.$e.show({color:"green",message:`Added "${o} = ${s}" to filters`})}}),q&&"object"!=typeof s&&l.push({key:"search",label:(0,r.jsxs)(p.Y,{gap:2,children:[(0,r.jsx)(C.A,{size:14}),"Search"]}),title:"Search for this value only",onClick:()=>{let e=o;if(a&&n){let r="JSONExtractString";"number"==typeof s?r="JSONExtractFloat":"boolean"==typeof s&&(r="JSONExtractBool");let a=z(t,n,r);a&&(e=a)}let r=`${e} = ${"string"==typeof s?`'${s}'`:s}`;("Timestamp"==e||"TimestampTime"==e)&&(r=`${e} = parseDateTime64BestEffort('${s}', 9)`),i().push(q({where:r,whereLanguage:"sql"}))}}),X&&"number"==typeof s&&l.push({key:"chart",label:(0,r.jsx)(k.A,{size:14}),title:"Chart",onClick:()=>{let e=o;if(a&&n){let s=z(t,n);s&&(e=s)}i().push(X({aggFn:"avg",field:e,groupBy:[]}))}}),K&&"object"!=typeof s){let e=o;if(a&&n){let s=z(t,n);s&&(e=s)}let s=G?.includes(e);l.push({key:"toggle-column",label:s?(0,r.jsxs)(p.Y,{gap:2,children:[(0,r.jsx)(N.A,{size:14}),"Column"]}):(0,r.jsxs)(p.Y,{gap:2,children:[(0,r.jsx)(A.A,{size:14}),"Column"]}),title:s?`Remove ${o} column from results table`:`Add ${o} column to results table`,onClick:()=>{K(e),j.$e.show({color:"green",message:`Column "${o}" ${s?"removed from":"added to"} results table`})}})}return"object"==typeof s?l.push({key:"copy-object",label:"Copy Object",onClick:()=>{let e;e=a&&n?s:0===t.length?Q:u()(Q,t),window.navigator.clipboard.writeText(JSON.stringify(e,null,2)),j.$e.show({color:"green",message:"Copied object to clipboard"})}}):l.push({key:"copy-value",label:(0,r.jsxs)(p.Y,{gap:2,children:[(0,r.jsx)(T.A,{size:14}),"Copy Value"]}),onClick:()=>{window.navigator.clipboard.writeText("string"==typeof s?s:JSON.stringify(s,null,2)),j.$e.show({color:"green",message:"Value copied to clipboard"})}}),l},P[6]=G,P[7]=X,P[8]=q,P[9]=H,P[10]=V,P[11]=Q,P[12]=K,P[13]=l):l=P[13];let ee=l;return P[14]===Symbol.for("react.memo_cache_sentinel")?(c=e=>Z(e.currentTarget.value),d=(0,r.jsx)(C.A,{size:16}),P[14]=c,P[15]=d):(c=P[14],d=P[15]),P[16]!==J?(m=(0,r.jsx)(x.p,{size:"xs",w:"100%",maw:"400px",placeholder:"Search properties by key or value",value:J,onChange:c,leftSection:d}),h=J&&(0,r.jsx)(g.$,{variant:"secondary",size:"xs",onClick:()=>Z(""),children:"Clear"}),P[16]=J,P[17]=m,P[18]=h):(m=P[17],h=P[18]),P[19]===Symbol.for("react.memo_cache_sentinel")?(S=(0,r.jsx)("div",{className:"flex-grow-1"}),_=(0,r.jsx)(M,{}),P[19]=_,P[20]=S):(_=P[19],S=P[20]),P[21]!==m||P[22]!==h?(w=(0,r.jsx)(f.a,{py:"xs",children:(0,r.jsxs)(p.Y,{gap:"xs",children:[m,h,S,_]})}),P[21]=m,P[22]=h,P[23]=w):w=P[23],P[24]!==ee||P[25]!==U||P[26]!==Q?(D=(0,r.jsx)(b.t,{bg:"transparent",mt:"sm",children:null!=Q?(0,r.jsx)($.A,{data:Q,getLineActions:ee,...U}):(0,r.jsx)(y.E,{children:"No data"})}),P[24]=ee,P[25]=U,P[26]=Q,P[27]=D):D=P[27],P[28]!==w||P[29]!==D?(O=(0,r.jsxs)("div",{className:"flex-grow-1 overflow-auto",children:[w,D]}),P[28]=w,P[29]=D,P[30]=O):O=P[30],O}function F(e){return!e[0].startsWith("__hdx_")}},65723:e=>{e.exports={container:"HyperJson_container__GNwuL",withTabulate:"HyperJson_withTabulate__MzU_L",key:"HyperJson_key__AQ6QF",withLineWrap:"HyperJson_withLineWrap__gfDDi",valueContainer:"HyperJson_valueContainer__Ui_5y",string:"HyperJson_string__vkc96",treeNode:"HyperJson_treeNode__bDzsg",line:"HyperJson_line__n3Ltu",lineMenu:"HyperJson_lineMenu__Sg84e",expanded:"HyperJson_expanded__gHv9Z",object:"HyperJson_object__ChLzl",array:"HyperJson_array__rJBNC",expandable:"HyperJson_expandable__futZ8",lineMenuBtn:"HyperJson_lineMenuBtn__QKgME",clickable:"HyperJson_clickable__UNRbd",value:"HyperJson_value__aSXTw",hoverable:"HyperJson_hoverable__oWIY9",hoverContent:"HyperJson_hoverContent__2Ir2x",jsonBtn:"HyperJson_jsonBtn__T1ObP",keyContainer:"HyperJson_keyContainer___KqED",number:"HyperJson_number__VFmbX",boolean:"HyperJson_boolean__KkQsQ",expandMoreProps:"HyperJson_expandMoreProps__uHkwZ"}},66773:e=>{e.exports={panel:"LogSidePanel_panel__JgveL",panelDragBar:"LogSidePanel_panelDragBar__sFi62",panelHeader:"LogSidePanel_panelHeader__Fl4jA",panelDetails:"LogSidePanel_panelDetails__wGBLr",panelContent:"LogSidePanel_panelContent__Olcws",severityChip:"LogSidePanel_severityChip__hIK7I",loadingState:"LogSidePanel_loadingState__b5y0C",panelSectionWrapper:"LogSidePanel_panelSectionWrapper__gOBKh",panelSectionWrapperTitle:"LogSidePanel_panelSectionWrapperTitle__eBMsG",kbdShortcuts:"LogSidePanel_kbdShortcuts__ogLDt",kbd:"LogSidePanel_kbd__gmxFq",kbdDivider:"LogSidePanel_kbdDivider____Gi4",lineContext:"LogSidePanel_lineContext__rCVjx",lineContextCurrentLine:"LogSidePanel_lineContextCurrentLine__K3t4J",lineContextLineNo:"LogSidePanel_lineContextLineNo__LuYmr",emptyMessage:"LogSidePanel_emptyMessage__6fbwp",traceTimelineLabel:"LogSidePanel_traceTimelineLabel___WCaD",traceTimelineLabelHighlighted:"LogSidePanel_traceTimelineLabelHighlighted__elopt",stacktraceRowInteractive:"LogSidePanel_stacktraceRowInteractive__i18zL"}},67272:(e,t,s)=>{"use strict";s.d(t,{F9:()=>d});var r=s(6029),a=s(75155),n=s(55729),l=s(1909),i=s(76089),o=s(38206);function c(e){let t,s,n,l=(0,a.c)(7),{value:c,onChange:d,disabled:u}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{value:"auto",label:"Auto Granularity"},{value:i.Z7.ThirtySecond,label:"30 Seconds Granularity"},{value:i.Z7.OneMinute,label:"1 Minute Granularity"},{value:i.Z7.FiveMinute,label:"5 Minutes Granularity"},{value:i.Z7.TenMinute,label:"10 Minutes Granularity"},{value:i.Z7.FifteenMinute,label:"15 Minutes Granularity"},{value:i.Z7.ThirtyMinute,label:"30 Minutes Granularity"},{value:i.Z7.OneHour,label:"1 Hour Granularity"},{value:i.Z7.TwelveHour,label:"12 Hours Granularity"},{value:i.Z7.OneDay,label:"1 Day Granularity"},{value:i.Z7.SevenDay,label:"7 Day Granularity"}],l[0]=t):t=l[0],l[1]!==d?(s=e=>d(e??void 0),l[1]=d,l[2]=s):s=l[2],l[3]!==u||l[4]!==s||l[5]!==c?(n=(0,r.jsx)(o.l,{disabled:u,"data-testid":"granularity-picker",data:t,onChange:s,value:c}),l[3]=u,l[4]=s,l[5]=c,l[6]=n):n=l[6],n}let d=(0,n.memo)(function(e){let t,s=(0,a.c)(3),{field:n}=(0,l.as)(e);return s[0]!==n.onChange||s[1]!==n.value?(t=(0,r.jsx)(c,{value:n.value,onChange:n.onChange}),s[0]=n.onChange,s[1]=n.value,s[2]=t):t=s[2],t})},67398:e=>{e.exports={searchingHeader:"SearchInputV2_searchingHeader__n6jUL",searchingDescription:"SearchInputV2_searchingDescription__t0nLB",examplesLabel:"SearchInputV2_examplesLabel__xqeIs",exampleRow:"SearchInputV2_exampleRow__Soa_C",exampleLabel:"SearchInputV2_exampleLabel__5Xyqr",exampleCode:"SearchInputV2_exampleCode__frAb_",docsLink:"SearchInputV2_docsLink__3JECv"}},68269:(e,t,s)=>{"use strict";s.d(t,{R:()=>C});var r=s(6029),a=s(75155),n=s(55729),l=s(40684),i=s(45381),o=s(65248),c=s(31292),d=s(53259),u=s(35467),m=s(43517),h=s(60481),p=s(24589),x=s(78253),g=s(43152),f=s(91021),b=s(57389),y=s(81973),v=s(92917),j=s(15628),_=s(23648),S=s(99082),w=s(88339);let E=(0,n.memo)(e=>{let t,s=(0,a.c)(5),{active:n,payload:l,numberFormat:i}=e;if(!n||!l?.length)return null;let o=l[0];return s[0]!==o.name||s[1]!==o.payload.color||s[2]!==o.value||s[3]!==i?(t=(0,r.jsx)(_.l,{children:(0,r.jsx)(_.H,{color:o.payload.color,name:o.name,value:o.value,numberFormat:i,indicator:"none"})}),s[0]=o.name,s[1]=o.payload.color,s[2]=o.value,s[3]=i,s[4]=t):t=s[4],t}),C=e=>{let t,s,n,d,_,C,A,T,$=(0,a.c)(37),{config:I,title:R,enabled:z,queryKeyPrefix:L,showMVOptimizationIndicator:M,toolbarPrefix:D,toolbarSuffix:F}=e,O=void 0===z||z,P=void 0===M||M;$[0]!==I.source?(t={id:I.source},$[0]=I.source,$[1]=t):t=$[1];let{data:W}=(0,y.Fo)(t);$[2]!==I?(s=(0,g.dY)(I),$[2]=I,$[3]=s):s=$[3];let B=s,{data:H}=(0,b.d)(B);$[4]!==B||$[5]!==L?(n=[L,B],$[4]=B,$[5]=L,$[6]=n):n=$[6],$[7]!==O||$[8]!==n?(d={placeholderData:k,queryKey:n,enabled:O},$[7]=O,$[8]=n,$[9]=d):d=$[9];let{data:V,isLoading:q,isError:X,error:G}=(0,f.HD)(B,d);if($[10]!==H||$[11]!==B||$[12]!==P||$[13]!==W||$[14]!==D||$[15]!==F){let e;if(_=[],D&&D.length>0&&_.push(...D),W&&P){let e;$[17]!==B||$[18]!==W?(e=(0,r.jsx)(S.A,{config:B,source:W,variant:"icon"},"db-table-chart-mv-indicator"),$[17]=B,$[18]=W,$[19]=e):e=$[19],_.push(e)}$[20]!==H||$[21]!==B.dateRange?(e=(0,g.m9)({mvOptimizationData:H,originalDateRange:B.dateRange}),$[20]=H,$[21]=B.dateRange,$[22]=e):e=$[22];let t=e;t&&_.push(t),F&&F.length>0&&_.push(...F),$[10]=H,$[11]=B,$[12]=P,$[13]=W,$[14]=D,$[15]=F,$[16]=_}else _=$[16];let K=_;e:{let e;if(!V){let e;$[23]===Symbol.for("react.memo_cache_sentinel")?(e=[],$[23]=e):e=$[23],C=e;break e}$[24]!==V?(e=(0,g.ME)(V,v.ob),$[24]=V,$[25]=e):e=$[25],C=e}let J=C;return $[26]!==I.numberFormat||$[27]!==V||$[28]!==G||$[29]!==X||$[30]!==q||$[31]!==J?(A=q&&!V?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):X&&G?(0,r.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted overflow-scroll",children:[(0,r.jsx)(m.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsxs)(h.a,{mt:"sm",children:[(0,r.jsx)(m.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(p.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:G.message}),G instanceof u.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(w.V,{data:G?.query})]})]})]}):V?.data.length===0?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,r.jsx)(x.s,{"data-testid":"pie-chart-container",align:"center",justify:"center",h:"100%",style:{flexGrow:1},children:(0,r.jsx)(l.u,{height:"100%",width:"100%",className:q?"effect-pulse":"",children:(0,r.jsxs)(i.r,{children:[(0,r.jsx)(o.F,{cx:"50%",cy:"50%",data:J,dataKey:"value",fill:"#8884d8",nameKey:"label",legendType:"none",children:J.map(N)}),(0,r.jsx)(c.m,{content:(0,r.jsx)(E,{numberFormat:I.numberFormat})})]})})}),$[26]=I.numberFormat,$[27]=V,$[28]=G,$[29]=X,$[30]=q,$[31]=J,$[32]=A):A=$[32],$[33]!==A||$[34]!==R||$[35]!==K?(T=(0,r.jsx)(j.A,{title:R,toolbarItems:K,children:A}),$[33]=A,$[34]=R,$[35]=K,$[36]=T):T=$[36],T};function k(e){return e}function N(e){return(0,r.jsx)(d.f,{fill:e.color,stroke:"none"},e.label)}},68344:(e,t,s)=>{"use strict";s.d(t,{t:()=>u});var r=s(6029),a=s(75155);s(55729);var n=s(7913),l=s(39603),i=s(34834),o=s(43517),c=s(25062),d=s(96556);let u=e=>{let t,s,u=(0,a.c)(8),{children:h,onRetry:p,allowReset:x,showErrorMessage:g,message:f}=e,b=x||!!p;return u[0]!==f||u[1]!==p||u[2]!==g||u[3]!==b?(t=e=>{let{error:t,resetErrorBoundary:s}=e;return(0,r.jsx)(l.F,{p:"xs",color:"red",icon:(0,r.jsx)(d.A,{size:16}),title:f||"Something went wrong",children:(g||b)&&(0,r.jsxs)(i.B,{align:"flex-start",gap:"xs",children:[g&&(0,r.jsx)(o.E,{size:"xs",children:t.message}),b&&(0,r.jsx)(c.$,{onClick:p||s,size:"compact-xs",variant:"danger",children:"Retry"})]})})},u[0]=f,u[1]=p,u[2]=g,u[3]=b,u[4]=t):t=u[4],u[5]!==h||u[6]!==t?(s=(0,r.jsx)(n.ErrorBoundary,{onError:m,fallbackRender:t,children:h}),u[5]=h,u[6]=t,u[7]=s):s=u[7],s};function m(e){console.error(e)}},70628:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return m}});let r=s(14761)._(s(55729)),a=s(93522),n=[],l=[],i=!1;function o(e){let t=e(),s={loading:!0,loaded:null,error:null};return s.promise=t.then(e=>(s.loading=!1,s.loaded=e,e)).catch(e=>{throw s.loading=!1,s.error=e,e}),s}class c{constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}}function d(e){return function(e,t){let s=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),n=null;function o(){if(!n){let t=new c(e,s);n={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return n.promise()}if(!i){let e=s.webpack&&1?s.webpack():s.modules;e&&l.push(t=>{for(let s of e)if(t.includes(s))return o()})}function d(e,t){let l;o(),(l=r.default.useContext(a.LoadableContext))&&Array.isArray(s.modules)&&s.modules.forEach(e=>{l(e)});let i=r.default.useSyncExternalStore(n.subscribe,n.getCurrentValue,n.getCurrentValue);return r.default.useImperativeHandle(t,()=>({retry:n.retry}),[]),r.default.useMemo(()=>{var t;return i.loading||i.error?r.default.createElement(s.loading,{isLoading:i.loading,pastDelay:i.pastDelay,timedOut:i.timedOut,error:i.error,retry:n.retry}):i.loaded?r.default.createElement((t=i.loaded)&&t.default?t.default:t,e):null},[e,i])}return d.preload=()=>o(),d.displayName="LoadableComponent",r.default.forwardRef(d)}(o,e)}function u(e,t){let s=[];for(;e.length;){let r=e.pop();s.push(r(t))}return Promise.all(s).then(()=>{if(e.length)return u(e,t)})}d.preloadAll=()=>new Promise((e,t)=>{u(n).then(e,t)}),d.preloadReady=(e=[])=>new Promise(t=>{let s=()=>(i=!0,t());u(l,e).then(s,s)}),window.__NEXT_PRELOADREADY=d.preloadReady;let m=d},70727:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>u,C2:()=>d,ZO:()=>c});var r=s(55729),a=s(6033),n=s.n(a),l=s(80519),i=s.n(l),o=s(35467);let c={ID:"__hyperdx_id",ALIAS_WITH:"__hyperdx_alias_with"};function d(e){return e?Object.entries(e).filter(([,e])=>null!=e&&""!==e.trim()).map(([e,t])=>({name:e,sql:{sql:t,params:{}},isSubquery:!1})):[]}function u({meta:e,aliasMap:t}){let s=(0,r.useMemo)(()=>new Map(e?.map(e=>{let s=null!=t?t[e.name]??e.name:e.name;return[e.name,{...e,valueExpr:s,jsType:(0,o.rj)(e.type)}]})),[e,t]),a=(0,r.useMemo)(()=>d(t),[t]);return(0,r.useCallback)(e=>{let{[c.ID]:t,[c.ALIAS_WITH]:r,...l}=e;return{where:Object.entries(l).map(([e,t])=>{let r=s.get(e),a=r?.type,l=r?.jsType,c=r?.valueExpr;if(null==a)throw Error(`Column type not found for ${e}, ${JSON.stringify(s)}`);if(null==c)throw Error(`valueExpr not found for ${e}, ${JSON.stringify(s)}`);switch(l){case o.A2.Date:return i().format("?=parseDateTime64BestEffort(?, 9)",[i().raw(c),t]);case o.A2.Array:case o.A2.Map:return i().format("?=JSONExtract(?, ?)",[i().raw(c),t,a]);case o.A2.Tuple:return i().format("toJSONString(?)=?",[i().raw(c),t]);case o.A2.JSON:return i().format("lower(hex(MD5(toString(?))))=?",[i().raw(c),n()(t).toString()]);case o.A2.Dynamic:if(null==t||"null"===t)return i().format("isNull(??)",[c]);return(t.length>1e3||e.length>1e3)&&console.warn("Search value/object key too large."),i().format("toJSONString(?) = coalesce(toJSONString(JSONExtract(?, 'Dynamic')), toJSONString(?))",[i().raw(c),t,t]);default:if(null==t)return i().format("isNull(?)",[i().raw(c)]);if(t.length>512)return i().format("lower(hex(MD5(leftUTF8(?, 1000))))=?",[i().raw(c),n()(t.substring(0,1e3)).toString()]);return i().format("?=?",[i().raw(c),t])}}).join(" AND "),aliasWith:a}},[s,a])}},71024:(e,t,s)=>{e.exports=s(34955)},71470:e=>{e.exports={wrapper:"SQLInlineEditor_wrapper__pT7MN",placeholder:"SQLInlineEditor_placeholder__Lx1ui",paper:"SQLInlineEditor_paper__Gtsf3",error:"SQLInlineEditor_error__RXa7x",expanded:"SQLInlineEditor_expanded__yWAQc",label:"SQLInlineEditor_label__shxMn",sizeXs:"SQLInlineEditor_sizeXs__ianH0",cmWrapper:"SQLInlineEditor_cmWrapper__u4wLo",collapsed:"SQLInlineEditor_collapsed__9rkFt",languageSwitchWrapper:"SQLInlineEditor_languageSwitchWrapper__gsIbr",collapseFade:"SQLInlineEditor_collapseFade__3N8c7"}},71781:(e,t,s)=>{"use strict";s.d(t,{M7:()=>d,aJ:()=>m,mh:()=>h,t4:()=>u});var r=s(6029),a=s(75155);s(55729);var n=s(1909),l=s(59029),i=s(96061),o=s(45544),c=s(47268);function d(e){let t,s,i,o,c,d,u=(0,a.c)(12);return u[0]!==e?({name:s,control:t,rules:o,...i}=e,u[0]=e,u[1]=t,u[2]=s,u[3]=i,u[4]=o):(t=u[1],s=u[2],i=u[3],o=u[4]),u[5]!==i?(c=e=>{let{field:t,fieldState:s}=e,{error:a}=s;return(0,r.jsx)(l.k,{...i,...t,error:a?.message})},u[5]=i,u[6]=c):c=u[6],u[7]!==t||u[8]!==s||u[9]!==o||u[10]!==c?(d=(0,r.jsx)(n.xI,{name:s,control:t,rules:o,render:c}),u[7]=t,u[8]=s,u[9]=o,u[10]=c,u[11]=d):d=u[11],d}function u(e){let t,s,l,o,c,d,u=(0,a.c)(12);return u[0]!==e?({name:s,control:t,rules:o,...l}=e,u[0]=e,u[1]=t,u[2]=s,u[3]=l,u[4]=o):(t=u[1],s=u[2],l=u[3],o=u[4]),u[5]!==l?(c=e=>{let{field:t,fieldState:s}=e,{error:a}=s;return(0,r.jsx)(i.p,{...l,...t,error:a?.message})},u[5]=l,u[6]=c):c=u[6],u[7]!==t||u[8]!==s||u[9]!==o||u[10]!==c?(d=(0,r.jsx)(n.xI,{name:s,control:t,rules:o,render:c}),u[7]=t,u[8]=s,u[9]=o,u[10]=c,u[11]=d):d=u[11],d}function m(e){let t,s,l,i,c,d,u=(0,a.c)(12);return u[0]!==e?({name:s,control:t,rules:i,...l}=e,u[0]=e,u[1]=t,u[2]=s,u[3]=l,u[4]=i):(t=u[1],s=u[2],l=u[3],i=u[4]),u[5]!==l?(c=e=>{let{field:t,fieldState:s}=e,{error:a}=s;return(0,r.jsx)(o.y,{...l,...t,error:a?.message})},u[5]=l,u[6]=c):c=u[6],u[7]!==t||u[8]!==s||u[9]!==i||u[10]!==c?(d=(0,r.jsx)(n.xI,{name:s,control:t,rules:i,render:c}),u[7]=t,u[8]=s,u[9]=i,u[10]=c,u[11]=d):d=u[11],d}function h(e){let t,s,l,i,o,d,u=(0,a.c)(12);return u[0]!==e?({name:s,control:t,rules:i,...l}=e,u[0]=e,u[1]=t,u[2]=s,u[3]=l,u[4]=i):(t=u[1],s=u[2],l=u[3],i=u[4]),u[5]!==l?(o=e=>{let{field:t,fieldState:s}=e,{value:a,...n}=t,{error:i}=s;return(0,r.jsx)(c.S,{...l,...n,checked:a,error:i?.message})},u[5]=l,u[6]=o):o=u[6],u[7]!==t||u[8]!==s||u[9]!==i||u[10]!==o?(d=(0,r.jsx)(n.xI,{name:s,control:t,rules:i,render:o}),u[7]=t,u[8]=s,u[9]=i,u[10]=o,u[11]=d):d=u[11],d}},72075:(e,t,s)=>{"use strict";s.d(t,{L:()=>x,X:()=>p});var r=s(6029),a=s(75155);s(55729);var n=s(75828),l=s.n(n),i=s(58333),o=s(23474),c=s(79220),d=s(39696),u=s(68593),m=s(34011),h=s.n(m);let p=({data:e=[],columns:t,emptyMessage:s,hideHeader:a,borderless:n,density:i="normal",interactive:o,tableMeta:m})=>{let p=(0,c.N4)({data:e,columns:t,meta:m,getCoreRowModel:(0,d.HT)()});return e.length?(0,r.jsx)("div",{className:l()(h().tableWrapper,{[h().tableBorderless]:n,[h().tableDensityZero]:"zero"===i,[h().tableDensityCompact]:"compact"===i,[h().tableDensityComfortable]:"comfortable"===i,[h().tableInteractive]:o}),children:(0,r.jsxs)("table",{children:[!a&&(0,r.jsx)("thead",{children:p.getHeaderGroups().map(e=>(0,r.jsx)("tr",{children:e.headers.map(e=>(0,r.jsx)("th",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)("tbody",{children:p.getRowModel().rows.map(e=>(0,r.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,r.jsx)("td",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}):(0,r.jsx)("div",{className:h().emptyMessage,children:s})},x=e=>{let t,s,n,l,c=(0,a.c)(12),{onClick:d,title:u,label:m,biIcon:p}=e;return c[0]!==m?(t=m&&(0,r.jsx)("span",{children:m}),c[0]=m,c[1]=t):t=c[1],c[2]!==p?(s="chevron-up"===p&&(0,r.jsx)(i.A,{size:14}),c[2]=p,c[3]=s):s=c[3],c[4]!==p?(n="chevron-down"===p&&(0,r.jsx)(o.A,{size:14}),c[4]=p,c[5]=n):n=c[5],c[6]!==d||c[7]!==t||c[8]!==s||c[9]!==n||c[10]!==u?(l=(0,r.jsxs)("button",{className:h().tableCellButton,title:u,onClick:d,children:[t,s,n]}),c[6]=d,c[7]=t,c[8]=s,c[9]=n,c[10]=u,c[11]=l):l=c[11],l}},74620:e=>{e.exports={tableWrapper:"LogTable_tableWrapper__1X2n1",muted:"LogTable_muted__aIZSq",table:"LogTable_table__l63_F",tableHead:"LogTable_tableHead__sTgaD",tableRow:"LogTable_tableRow__7BXPl",tableRow__selected:"LogTable_tableRow__selected__DoaNL",rowButtons:"LogTable_rowButtons__XTh2c",rowContentButton:"LogTable_rowContentButton__fjkQI",expandButton:"LogTable_expandButton__nKsH0",expandedRowContent:"LogTable_expandedRowContent__Ps6mn",expanded:"LogTable_expanded___w9XA",expandButtonSeparator:"LogTable_expandButtonSeparator__lYPgm",isWrapped:"LogTable_isWrapped__ksgah",isTruncated:"LogTable_isTruncated__jXz22",iconActionButton:"LogTable_iconActionButton__hO7Fo",copied:"LogTable_copied__wZME1",fieldTextContainer:"LogTable_fieldTextContainer__4Dj7Q",fieldText:"LogTable_fieldText__zVjaq",chart:"LogTable_chart__8kFaD",truncated:"LogTable_truncated__Hv6oN",wrapped:"LogTable_wrapped__Dz8eR",fieldTextPopover:"LogTable_fieldTextPopover__dygEB"}},74860:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(6029),a=s(75155),n=s(38206),l=s(23474);let i=[{value:"sql",label:"SQL"},{value:"lucene",label:"Lucene"}];function o(e){let t,s,o,c,d=(0,a.c)(7),{language:u,onLanguageChange:m}=e;return d[0]!==m?(t=e=>{("sql"===e||"lucene"===e)&&m(e)},d[0]=m,d[1]=t):t=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(l.A,{size:14}),o={input:{border:"none",background:"transparent",minHeight:28,fontWeight:500},dropdown:{minWidth:96}},d[2]=s,d[3]=o):(s=d[2],o=d[3]),d[4]!==u||d[5]!==t?(c=(0,r.jsx)(n.l,{size:"xs",value:u,onChange:t,data:i,w:80,rightSection:s,styles:o,"aria-label":"Query language"}),d[4]=u,d[5]=t,d[6]=c):c=d[6],c}},75359:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var r,a=s(6029),n=s(75155),l=s(55729),i=s(41038),o=s(81973),c=s(96958),d=s(92917),u=s(76539),m=s(37901),h=s(26837),p=s(50374),x=s(46061);function g(e){let t,s,r,c,d,m,h,g,f,y=(0,n.c)(47),{sourceId:v,config:j,onError:_,onScroll:S,context:w,onExpandedRowsChange:E,denoiseResults:C,collapseAllRows:k,isLive:N,enabled:A,isNestedPanel:T,breadcrumbPath:$,onSidebarOpen:I,onSortingChange:R,initialSortBy:z,variant:L}=e;y[0]!==v?(t={id:v},y[0]=v,y[1]=t):t=y[1];let{data:M}=(0,o.Fo)(t),[D,F]=(0,i.ZA)("rowWhere"),[O,P]=(0,i.ZA)("rowSource");y[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],y[2]=s):s=y[2];let[W,B]=(0,l.useState)(s),{setContextRowId:H,setContextRowSource:V}=(0,u.g)();y[3]!==I||y[4]!==F||y[5]!==P||y[6]!==v?(r=e=>{F(e.where),B(e.aliasWith),P(v),I?.(e.where)},y[3]=I,y[4]=F,y[5]=P,y[6]=v,y[7]=r):r=y[7];let q=r;y[8]!==T||y[9]!==H||y[10]!==V||y[11]!==F||y[12]!==P?(c=()=>{F(null),P(null),T||(H(null),V(null))},y[8]=T,y[9]=H,y[10]=V,y[11]=F,y[12]=P,y[13]=c):c=y[13];let X=c;y[14]!==M?(d=e=>M?(0,a.jsx)(b,{source:M,rowId:e.id,aliasWith:e.aliasWith}):(0,a.jsx)("div",{className:"p-3 text-muted",children:"Loading..."}),y[14]=M,y[15]=d):d=y[15];let G=d;y[16]!==w?(m=w??{},y[16]=w,y[17]=m):m=y[17],y[18]!==W||y[19]!==$||y[20]!==T||y[21]!==X||y[22]!==D||y[23]!==O||y[24]!==M||y[25]!==v?(h=M&&(O===v||!O)&&(0,a.jsx)(p.A,{source:M,rowId:D??void 0,aliasWith:W,isNestedPanel:T,breadcrumbPath:$,onClose:X}),y[18]=W,y[19]=$,y[20]=T,y[21]=X,y[22]=D,y[23]=O,y[24]=M,y[25]=v,y[26]=h):h=y[26];let K=D??void 0,J=N??!0;return y[27]!==k||y[28]!==j||y[29]!==C||y[30]!==A||y[31]!==z||y[32]!==_||y[33]!==E||y[34]!==q||y[35]!==S||y[36]!==R||y[37]!==G||y[38]!==v||y[39]!==K||y[40]!==J||y[41]!==L?(g=(0,a.jsx)(x.rD,{config:j,sourceId:v,onRowDetailsClick:q,highlightedLineId:K,enabled:A,isLive:J,queryKeyPrefix:"dbSqlRowTable",onSortingChange:R,denoiseResults:C,initialSortBy:z,renderRowDetails:G,onScroll:S,onError:_,onExpandedRowsChange:E,collapseAllRows:k,variant:L}),y[27]=k,y[28]=j,y[29]=C,y[30]=A,y[31]=z,y[32]=_,y[33]=E,y[34]=q,y[35]=S,y[36]=R,y[37]=G,y[38]=v,y[39]=K,y[40]=J,y[41]=L,y[42]=g):g=y[42],y[43]!==g||y[44]!==m||y[45]!==h?(f=(0,a.jsxs)(p.D.Provider,{value:m,children:[h,g]}),y[43]=g,y[44]=m,y[45]=h,y[46]=f):f=y[46],f}var f=((r=f||{}).Overview="overview",r.ColumnValues="columnValues",r);function b(e){let t,s,r,l,i,o,u=(0,n.c)(20),{source:p,rowId:x,aliasWith:g}=e,[f,b]=(0,d.Mj)("hdx-expanded-row-default-tab","columnValues");return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{text:"Overview",value:"overview"},{text:"Column Values",value:"columnValues"}],u[0]=t):t=u[0],u[1]!==f||u[2]!==b?(s=(0,a.jsx)("div",{className:"px-3 pt-2 position-relative",children:(0,a.jsx)(c.A,{className:"fs-8",items:t,activeItem:f,onClick:b})}),u[1]=f,u[2]=b,u[3]=s):s=u[3],u[4]!==f||u[5]!==g||u[6]!==x||u[7]!==p?(r="overview"===f&&(0,a.jsx)("div",{className:"inline-overview-panel",children:(0,a.jsx)(h.W,{source:p,rowId:x,aliasWith:g})}),u[4]=f,u[5]=g,u[6]=x,u[7]=p,u[8]=r):r=u[8],u[9]!==f||u[10]!==g||u[11]!==x||u[12]!==p?(l="columnValues"===f&&(0,a.jsx)(m.dD,{source:p,rowId:x,aliasWith:g}),u[9]=f,u[10]=g,u[11]=x,u[12]=p,u[13]=l):l=u[13],u[14]!==r||u[15]!==l?(i=(0,a.jsxs)("div",{children:[r,l]}),u[14]=r,u[15]=l,u[16]=i):i=u[16],u[17]!==s||u[18]!==i?(o=(0,a.jsxs)("div",{className:"position-relative",children:[s,i]}),u[17]=s,u[18]=i,u[19]=o):o=u[19],o}},76539:(e,t,s)=>{"use strict";s.d(t,{A:()=>E,g:()=>w});var r,a=s(6029),n=s(75155),l=s(55729),i=s(67264),o=s.n(i),c=s(41038),d=s(1909),u=s(3145),m=s(78253),h=s(3635),p=s(90124),x=s(43085),g=s(39785),f=s(17273),b=s(81973),y=s(92917),v=s(37901),j=s(50374),_=s(46061),S=((r=S||{}).All="all",r.Custom="custom",r.Host="host",r.Node="k8s.node.name",r.Pod="k8s.pod.name",r.Service="service",r);function w(e){let t,s,r,a=(0,n.c)(11),i=(0,c.ZA)("contextRowId",c.tU),o=(0,c.ZA)("contextRowSource",c.tU);a[0]!==i||a[1]!==o?(t={contextRowId:i,contextRowSource:o},a[0]=i,a[1]=o,a[2]=t):t=a[2];let d=t,u=(0,l.useState)(null),m=(0,l.useState)(null);a[3]!==u||a[4]!==m?(s={contextRowId:u,contextRowSource:m},a[3]=u,a[4]=m,a[5]=s):s=a[5];let h=s,p=e?h:d;return a[6]!==p.contextRowId[0]||a[7]!==p.contextRowId[1]||a[8]!==p.contextRowSource[0]||a[9]!==p.contextRowSource[1]?(r={contextRowId:p.contextRowId[0],contextRowSource:p.contextRowSource[0],setContextRowId:p.contextRowId[1],setContextRowSource:p.contextRowSource[1]},a[6]=p.contextRowId[0],a[7]=p.contextRowId[1],a[8]=p.contextRowSource[0],a[9]=p.contextRowSource[1],a[10]=r):r=a[10],r}function E(e){let t,s,r,i,c,S,E,C,k,N,A,T,$,I,R,z,L,M,D,F,O,P,W,B,H,V,q,X,G=(0,n.c)(98),{source:K,dbSqlRowTableConfig:J,rowData:Z,rowId:Y,breadcrumbPath:U,onBreadcrumbClick:Q}=e;G[0]!==U?(t=void 0===U?[]:U,G[0]=U,G[1]=t):t=G[1];let ee=t,et=Z[v.$_.TIMESTAMP];G[2]!==J?(s=J??{},G[2]=J,G[3]=s):s=G[3];let{whereLanguage:es}=s,er=void 0===es?"lucene":es;G[4]===Symbol.for("react.memo_cache_sentinel")?(r=o()("30s"),G[4]=r):r=G[4];let[ea,en]=(0,l.useState)(r),[el,ei]=(0,l.useState)("all");G[5]!==er?(i=er??(0,f.S)()??"lucene",G[5]=er,G[6]=i):i=G[6],G[7]!==i?(c={defaultValues:{where:"",whereLanguage:i}},G[7]=i,G[8]=c):c=G[8];let{control:eo}=(0,d.mN)(c);G[9]!==eo?(S={control:eo,name:"where"},G[9]=eo,G[10]=S):S=G[10];let ec=(0,d.FH)(S),[ed]=(0,g.o)(ec,1e3),{contextRowId:eu,contextRowSource:em,setContextRowId:eh,setContextRowSource:ep}=w(ee.length>0),ex=em||"";G[11]!==ex?(E={id:ex},G[11]=ex,G[12]=E):E=G[12];let{data:eg}=(0,b.Fo)(E);G[13]===Symbol.for("react.memo_cache_sentinel")?(C=[],G[13]=C):C=G[13];let[ef,eb]=(0,l.useState)(C);G[14]!==eh||G[15]!==ep?(k=()=>{eh(null),ep(null)},G[14]=eh,G[15]=ep,G[16]=k):k=G[16];let ey=k,{setChildModalOpen:ev}=(0,l.useContext)(j.D);G[17]!==eh||G[18]!==ep||G[19]!==K.id?(N=e=>{eh(e.where),eb(e.aliasWith),ep(K.id)},G[17]=eh,G[18]=ep,G[19]=K.id,G[20]=N):N=G[20];let ej=N;G[21]!==et?(A=new Date(et),G[21]=et,G[22]=A):A=G[22];let e_=A,eS=e_.getTime()-ea/2;G[23]!==eS?(T=new Date(eS),G[23]=eS,G[24]=T):T=G[24];let ew=e_.getTime()+ea/2;G[25]!==ew?($=new Date(ew),G[25]=ew,G[26]=$):$=G[26],G[27]!==T||G[28]!==$?(I=[T,$],G[27]=T,G[28]=$,G[29]=I):I=G[29];let eE=I;G[30]!==Z?(R=Z[v.$_.RESOURCE_ATTRIBUTES]??{},G[30]=Z,G[31]=R):R=G[31];let{"k8s.node.name":eC,"k8s.pod.name":ek,"host.name":eN,"service.name":eA}=R;G[32]===Symbol.for("react.memo_cache_sentinel")?(z={field:"",value:""},G[32]=z):z=G[32];let eT=ed||"";G[33]!==eT?(L={field:"",value:eT},G[33]=eT,G[34]=L):L=G[34],G[35]!==eA?(M={field:"service.name",value:eA},G[35]=eA,G[36]=M):M=G[36],G[37]!==eN?(D={field:"host.name",value:eN},G[37]=eN,G[38]=D):D=G[38],G[39]!==ek?(F={field:"k8s.pod.name",value:ek},G[39]=ek,G[40]=F):F=G[40],G[41]!==eC?(O={field:"k8s.node.name",value:eC},G[41]=eC,G[42]=O):O=G[42],G[43]!==L||G[44]!==M||G[45]!==D||G[46]!==F||G[47]!==O?(P={all:z,custom:L,service:M,host:D,"k8s.pod.name":F,"k8s.node.name":O},G[43]=L,G[44]=M,G[45]=D,G[46]=F,G[47]=O,G[48]=P):P=G[48];let e$=P;G[49]!==e$||G[50]!==er?(W=e=>{let t="sql"===er,s=e$[e];return"all"===e?s.value:"custom"===e?s.value.trim():(0,y.ji)("ResourceAttributes",s.field,s.value,t)},G[49]=e$,G[50]=er,G[51]=W):W=G[51];let eI=W;G[52]!==eN||G[53]!==eC||G[54]!==ek||G[55]!==eA?(B=function(){return[{label:"All",value:"all"},...eA?[{label:"Service",value:"service"}]:[],...eN?[{label:"Host",value:"host"}]:[],...ek?[{label:"Pod",value:"k8s.pod.name"}]:[],...eC?[{label:"Node",value:"k8s.node.name"}]:[],{label:"Custom",value:"custom"}]},G[52]=eN,G[53]=eC,G[54]=ek,G[55]=eA,G[56]=B):B=G[56];let eR=B;e:{let e,t,s;G[57]!==el||G[58]!==eI?(e=eI(el),G[57]=el,G[58]=eI,G[59]=e):e=G[59];let r=e;if(!J){let e,t,s=K.defaultTableSelectExpression||"";G[60]===Symbol.for("react.memo_cache_sentinel")?(e={limit:200},G[60]=e):e=G[60];let a=`${K.timestampValueExpression} DESC`;G[61]!==eE||G[62]!==er||G[63]!==K.connection||G[64]!==K.from||G[65]!==K.timestampValueExpression||G[66]!==s||G[67]!==a||G[68]!==r?(t={connection:K.connection,from:K.from,timestampValueExpression:K.timestampValueExpression,select:s,limit:e,orderBy:a,where:r,whereLanguage:er,dateRange:eE},G[61]=eE,G[62]=er,G[63]=K.connection,G[64]=K.from,G[65]=K.timestampValueExpression,G[66]=s,G[67]=a,G[68]=r,G[69]=t):t=G[69],H=t;break e}G[70]===Symbol.for("react.memo_cache_sentinel")?(t=[],G[70]=t):t=G[70],G[71]!==J||G[72]!==eE||G[73]!==er||G[74]!==r?(s={...J,where:r,whereLanguage:er,dateRange:eE,filters:t},G[71]=J,G[72]=eE,G[73]=er,G[74]=r,G[75]=s):s=G[75],H=s}let ez=H;return G[76]!==e$||G[77]!==ez||G[78]!==el||G[79]!==eo||G[80]!==eR||G[81]!==ej||G[82]!==ea||G[83]!==Y||G[84]!==ev||G[85]!==K?(V=ez&&(0,a.jsxs)(m.s,{direction:"column",mih:"0px",style:{flexGrow:1},children:[(0,a.jsxs)(h.Y,{justify:"space-between",p:"sm",children:[(0,a.jsx)(p.I,{size:"xs",data:eR(),value:el,onChange:e=>ei(e)}),"custom"===el&&(0,a.jsx)(f.A,{tableConnection:(0,u.VO)(K),control:eo,name:"where",enableHotkey:!0,size:"xs"}),(0,a.jsx)(p.I,{size:"xs",data:[{label:"100ms",value:o()("100ms").toString()},{label:"500ms",value:o()("500ms").toString()},{label:"1s",value:o()("1s").toString()},{label:"5s",value:o()("5s").toString()},{label:"30s",value:o()("30s").toString()},{label:"1m",value:o()("1m").toString()},{label:"5m",value:o()("5m").toString()},{label:"15m",value:o()("15m").toString()}],value:ea.toString(),onChange:e=>en(Number(e))})]}),(0,a.jsx)(h.Y,{p:"sm",children:(0,a.jsxs)("div",{children:["all"!==el&&(0,a.jsxs)(x.E,{size:"md",variant:"default",children:[el,":",e$[el].value]}),(0,a.jsxs)(x.E,{size:"md",variant:"default",children:["Time range: \xb1",o()(ea/2)]})]})}),(0,a.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,a.jsx)(_.rD,{sourceId:K.id,highlightedLineId:Y,showExpandButton:!1,isLive:!1,config:ez,queryKeyPrefix:"context",onRowDetailsClick:ej,onChildModalOpen:ev})})]}),G[76]=e$,G[77]=ez,G[78]=el,G[79]=eo,G[80]=eR,G[81]=ej,G[82]=ea,G[83]=Y,G[84]=ev,G[85]=K,G[86]=V):V=G[86],G[87]!==ee||G[88]!==ef||G[89]!==eu||G[90]!==eg||G[91]!==ey||G[92]!==Q||G[93]!==Z?(q=eu&&eg&&(0,a.jsx)(j.A,{source:eg,rowId:eu,aliasWith:ef,onClose:ey,isNestedPanel:!0,breadcrumbPath:[...ee,{label:"Surrounding Context",rowData:Z}],onBreadcrumbClick:Q}),G[87]=ee,G[88]=ef,G[89]=eu,G[90]=eg,G[91]=ey,G[92]=Q,G[93]=Z,G[94]=q):q=G[94],G[95]!==V||G[96]!==q?(X=(0,a.jsxs)(a.Fragment,{children:[V,q]}),G[95]=V,G[96]=q,G[97]=X):X=G[97],X}},78694:(e,t,s)=>{"use strict";s.d(t,{iV:()=>g,ir:()=>v,$K:()=>f,hF:()=>b,Qx:()=>y});var r=s(6029),a=s(75155),n=s(55729);s(82203);var l=s(75828),i=(s(63085),s(8468)),o=s(20158),c=s(70114),d=s(23474);s(38067),s(26355);s(94720),s(3635);var u=s(72075),m=s(68593);s(7565),s(94364);var h=s(92917),p=s(66773),x=s.n(p);let g=e=>{let t,s,l,i,o,u,m=(0,a.c)(15),{title:h,children:p,initiallyCollapsed:x}=e,[g,f]=n.useState(x??!1);return m[0]!==g?(t=()=>f(!g),s=g?(0,r.jsx)(c.A,{size:14,className:"me-2"}):(0,r.jsx)(d.A,{size:14,className:"me-2"}),m[0]=g,m[1]=t,m[2]=s):(t=m[1],s=m[2]),m[3]!==h?(l=(0,r.jsx)("div",{className:"fs-7",children:h}),m[3]=h,m[4]=l):l=m[4],m[5]!==t||m[6]!==s||m[7]!==l?(i=(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,l]}),m[5]=t,m[6]=s,m[7]=l,m[8]=i):i=m[8],m[9]!==p||m[10]!==g?(o=g?null:(0,r.jsx)("div",{className:"mb-4",children:p}),m[9]=p,m[10]=g,m[11]=o):o=m[11],m[12]!==i||m[13]!==o?(u=(0,r.jsxs)("div",{className:"my-3",children:[i,o]}),m[12]=i,m[13]=o,m[14]=u):u=m[14],u},f=e=>{let t,s,n=(0,a.c)(5),{children:l,title:i}=e;return n[0]!==i?(t=i&&(0,r.jsx)("div",{className:x().panelSectionWrapperTitle,children:i}),n[0]=i,n[1]=t):t=n[1],n[2]!==l||n[3]!==t?(s=(0,r.jsxs)("div",{className:x().panelSectionWrapper,children:[t,l]}),n[2]=l,n[3]=t,n[4]=s):s=n[4],s};m.k;let b=[{accessorKey:"0",header:"Header",size:260,cell:({row:e})=>(0,r.jsx)("div",{className:"text-truncate",title:e.original[0],children:e.original[0]})},{size:m.k,accessorKey:"1",header:"Value"}],y=[{accessorKey:"label",header:"Label",size:260,cell:({row:e})=>(0,r.jsx)("span",{children:e.original.label})},{size:m.k,accessorKey:"value",header:"Value",cell:({row:e})=>(0,r.jsx)("span",{className:e.original.className,children:e.original.value})}],v=()=>{let e,t,s,n,l,c=(0,a.c)(7),[d,u]=(0,h.Mj)("kbd-shortcuts-dismissed",!1);c[0]!==u?(e=()=>{u(!0)},c[0]=u,c[1]=e):e=c[1];let m=e;return d?null:(c[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(i.u,{className:"me-1",children:"←"}),s=(0,r.jsx)(i.u,{children:"→"}),c[2]=t,c[3]=s):(t=c[2],s=c[3]),c[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,r.jsxs)("div",{children:["Use ",t,s," arrow keys or ",(0,r.jsx)(i.u,{className:"me-1",children:"k"}),(0,r.jsx)(i.u,{children:"j"})," to move through events"]}),(0,r.jsx)("div",{className:x().kbdDivider}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.u,{children:"ESC"})," to close"]})]}),c[4]=n):n=c[4],c[5]!==m?(l=(0,r.jsx)("div",{className:x().kbdShortcuts,children:(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center ",children:[n,(0,r.jsx)(o.J,{"aria-label":"Hide",onClick:m})]})}),c[5]=m,c[6]=l):l=c[6],l)}},80925:(e,t,s)=>{"use strict";s.d(t,{S:()=>g,t:()=>h});var r=s(55729),a=s(67843),n=s(35467),l=s(67270),i=s(12482),o=s(92917),c=s(40147),d=s(78550),u=s(49672),m=s(81973);function h({traceSource:e,sessionSource:t,dateRange:s,where:r,whereLanguage:a},o){let{enabled:m=!0}=o||{},{getFieldExpression:h,isLoading:p}=(0,c.A)(e),{getFieldExpression:x,isLoading:g}=(0,c.A)(t),f=["teamId","teamName","userEmail","userName"],b="sessions",y=(0,u.fu)(),v=(0,d.Ge)();return(0,i.I)({queryKey:["sessions",e?.id,t?.id,s,r,a],queryFn:async()=>{if(!e||!t||!h||!x)return[];let i=h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId"),[o,c,d]=await Promise.all([(0,l.PV)({select:[{valueExpression:`${e.serviceNameExpression}`,alias:"serviceName"},{valueExpression:i,alias:"sessionId"},{alias:"maxTimestamp",valueExpression:`MAX(${e.timestampValueExpression})`},{alias:"minTimestamp",valueExpression:`MIN(${e.timestampValueExpression})`},{aggFn:"count",alias:"sessionCount",valueExpression:"*"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.eventAttributesExpression}.component:"user-interaction"`,valueExpression:"",alias:"interactionCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.statusCodeExpression}:error`,valueExpression:"",alias:"errorCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.spanNameExpression}:"record init"`,valueExpression:"",alias:"recordingCount"},...f.map(t=>({valueExpression:`MAX(${h(e.eventAttributesExpression??"SpanAttributes",t)})`,alias:t}))],from:e.from,dateRange:s,where:`${e.resourceAttributesExpression}.rum.sessionId:*`,whereLanguage:"lucene",...r&&{filters:[{type:a??"lucene",condition:r}]},timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e.connection,groupBy:"serviceName, sessionId"},v,e.querySettings),(0,l.PV)({select:[{valueExpression:`DISTINCT ${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:t.from,dateRange:s,where:`${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b})`,whereLanguage:"sql",timestampValueExpression:t.timestampValueExpression,implicitColumnExpression:t.implicitColumnExpression,connection:t.connection},v,t.querySettings),(0,l.PV)({select:[{valueExpression:`DISTINCT ${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:e.from,dateRange:s,where:`(${e.spanNameExpression}='record init' OR ${e.spanNameExpression}='visibility') AND (${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b}))`,whereLanguage:"sql",timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e?.connection},v,e.querySettings)]),u=(0,n.kg)`
        WITH _${b} AS (${o}),
        ${b} AS (
          SELECT * 
          FROM _${b}
          ${r?"":"HAVING interactionCount > 0 OR recordingCount > 0"}
          ORDER BY maxTimestamp DESC
          LIMIT 500
        )
      `,m=r&&r.length>0?(0,n.kg)`
        ${u},
        sessionIdsWithRecordings AS (${c}),
        sessionIdsWithUserActivity AS (${d})
        SELECT *
        FROM ${b}
        WHERE ${b}.sessionId IN (
          SELECT sessionIdsWithRecordings.sessionId FROM sessionIdsWithRecordings
        ) OR ${b}.sessionId IN (
          SELECT sessionIdsWithUserActivity.sessionId FROM sessionIdsWithUserActivity
        )
      `:(0,n.kg)`
        ${u}
        SELECT *
        FROM ${b}
        `;return await y.query({query:m.sql,query_params:m.params,connectionId:e?.connection}).then(e=>e.json())},staleTime:3e5,...o,enabled:!!m&&!p&&!g})}class p extends Error{}async function*x(e){let t=e.getReader();try{for(;;){let{done:e,value:s}=await t.read();if(e)return;yield s}}finally{t.releaseLock()}}function g({serviceName:e,sessionId:t,sourceId:s,startDate:n,endDate:i,limit:c=100,onEvent:h,onEnd:g,resultsKey:f,getSessionSourceFieldExpression:b},y){let v=y?.keepPreviousData??!1,j=y?.shouldAbortPendingRequest??!0,_=(0,d.Ge)(),[S,w]=(0,r.useState)({key:"",data:[]}),[E,C]=(0,r.useState)(!0),[k,N]=(0,r.useState)(!0),A=(0,r.useRef)(null),[T,$]=(0,r.useState)("idle"),I=(0,r.useRef)(void 0),{data:R}=(0,m.Fo)({id:s}),z=(0,r.useCallback)(async({pageParam:s=0,limit:r})=>{if(!R)return;let o=[],d=0,y=n.getTime().toString(),j=i.getTime().toString(),S=(r??c).toString(),E=s.toString(),k=new AbortController;A.current=k,C(!0),$("fetching"),I.current="fetching";let T=await (0,l.PV)({select:[{valueExpression:m.kJ.implicitColumnExpression,alias:"b"},{valueExpression:`simpleJSONExtractInt(${m.kJ.implicitColumnExpression}, 'type')`,alias:"t"},{valueExpression:`${b(m.kJ.eventAttributesExpression,"rr-web.chunk")}`,alias:"ck"},{valueExpression:`${b(m.kJ.eventAttributesExpression,"rr-web.total-chunks")}`,alias:"tcks"}],dateRange:[new Date(parseInt(y)),new Date(parseInt(j))],from:R.from,whereLanguage:"lucene",where:`ServiceName:"${e}" AND ${m.kJ.resourceAttributesExpression}.rum.sessionId:"${t}"`,timestampValueExpression:R.timestampValueExpression,implicitColumnExpression:m.kJ.implicitColumnExpression,connection:R.connection,orderBy:`${R.timestampValueExpression} ASC`,limit:{limit:Math.min(1e6,parseInt(S)),offset:parseInt(E)}},_,R.querySettings),z=(async()=>{let e,t=(0,u.W)(),s=await t.query({query:T.sql,query_params:T.params,format:"JSONEachRow",connectionId:R.connection});for await(let t of(e=h||(v?e=>o.push(e):e=>w(t=>(0,a.Ay)(t,t=>{t.key=f??t.key??"DEFAULT_KEY",t.data.push(e)}))),x(s.stream())))for(let s of t)try{let t=s.json();d++,e(t)}catch{}g?.(),v&&w({key:f??"DEFAULT_KEY",data:o}),(0===d||d<c)&&N(!1)})();try{await Promise.race([z,new Promise((e,t)=>{setTimeout(()=>{t(new p("Timeout"))},18e4)})])}catch(e){e instanceof p?(C(!1),$("idle"),I.current="idle",k.abort(),console.warn("Closing event source due to timeout"),g?.(new p)):console.error(e)}k.abort(),C(!1),$("idle"),I.current="idle"},[R,e,t,n,i,c,v,w,h,g,f,_,b]),L=[t,n,i,c].join("||"),M=(0,o.ZC)(L);(0,r.useEffect)(()=>{M!=L&&("fetching"!==I.current||j)&&(j&&"fetching"===I.current&&A.current?.abort(),v||w({key:"",data:[]}),N(!0),z({pageParam:0}))},[M,L,j,z,v]);let D=(0,r.useCallback)(e=>{k&&"idle"===I.current&&S.data.length>0&&z({pageParam:S.data.length,limit:e?.limit}).then(()=>{e?.cb?.()})},[z,S.data.length,k]),F=(0,r.useCallback)(()=>{A.current?.abort()},[]);return{hasNextPage:k,isFetching:E,results:S.data,resultsKey:S.key,fetchNextPage:D,abort:F}}},81408:e=>{e.exports={wrapper:"SessionSubpanelV2_wrapper__5kN48",eventList:"SessionSubpanelV2_eventList__CJCVt",eventListHeader:"SessionSubpanelV2_eventListHeader__Hbhpi",eventListContainer:"SessionSubpanelV2_eventListContainer__r2wEN",eventRow:"SessionSubpanelV2_eventRow__XFl1t",eventRowError:"SessionSubpanelV2_eventRowError__61zDU",eventRowIcon:"SessionSubpanelV2_eventRowIcon__C371Y",eventRowTitle:"SessionSubpanelV2_eventRowTitle__BCmpn",eventRowSuccess:"SessionSubpanelV2_eventRowSuccess___a9Kd",eventRowHighlighted:"SessionSubpanelV2_eventRowHighlighted__YWXks",eventRowContent:"SessionSubpanelV2_eventRowContent__Y9_5z",eventRowTimestamp:"SessionSubpanelV2_eventRowTimestamp__MPRLq",eventRowDescription:"SessionSubpanelV2_eventRowDescription__XJ9b7",player:"SessionSubpanelV2_player___Erie",playerHeader:"SessionSubpanelV2_playerHeader__qMRJo",playerHeaderUrl:"SessionSubpanelV2_playerHeaderUrl__K3MEs",playerContainer:"SessionSubpanelV2_playerContainer__m7RnT",domPlayerWrapper:"SessionSubpanelV2_domPlayerWrapper__wKZpR",domPlayerWrapperPaused:"SessionSubpanelV2_domPlayerWrapperPaused__9xhaT",playerTimestamp:"SessionSubpanelV2_playerTimestamp__ebCzv",playerPlaybar:"SessionSubpanelV2_playerPlaybar__FEw0u",playerToolbar:"SessionSubpanelV2_playerToolbar__7sL7N"}},83101:e=>{e.exports={resizeHandle:"ResizablePanel_resizeHandle__4fEVM",resizeYHandle:"ResizablePanel_resizeYHandle__1pBbm"}},84851:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(6029),a=s(55729),n=s(42604),l=s(15628);let i=(0,a.memo)(({config:{markdown:e},title:t,toolbarItems:s})=>(0,r.jsx)(l.A,{title:t,toolbarItems:s,disableReactiveContainer:!0,children:(0,r.jsx)("div",{className:"hdx-markdown",children:(0,r.jsx)(n.oz,{children:e??""})})}))},86761:(e,t,s)=>{"use strict";s.d(t,{A:()=>y});var r=s(6029),a=s(75155),n=s(55729),l=s(82641),i=s(43517),o=s(63085),c=s(22623),d=s(27166),u=s(64488),m=s(6620),h=s(94502),p=s(78550),x=s(88339);let g=e=>{let t,s,n,l=(0,a.c)(11),{onClick:c,isEnabled:d,tableCount:u,iconStyles:h,variant:p}=e,x=void 0===p?"icon":p,g=d?u>1?"Show Table Schemas":"Show Table Schema":"Select a table to view its schema";return l[0]!==d||l[1]!==c?(t=()=>d&&c(),l[0]=d,l[1]=c,l[2]=t):t=l[2],l[3]!==h||l[4]!==d||l[5]!==x?(s="text"===x?(0,r.jsx)(i.E,{fw:500,size:"xs",className:"text-sucess-hover",style:{cursor:d?"pointer":"default",...h},children:"Schema"}):(0,r.jsx)(m.A,{size:16}),l[3]=h,l[4]=d,l[5]=x,l[6]=s):s=l[6],l[7]!==t||l[8]!==s||l[9]!==g?(n=(0,r.jsx)(o.m,{label:g,color:"dark",position:"right",onClick:t,children:s}),l[7]=t,l[8]=s,l[9]=g,l[10]=n):n=l[10],n},f=e=>{let t,s,n,l=(0,a.c)(8),{databaseName:i,tableName:o,connectionId:d}=e;l[0]!==d||l[1]!==i||l[2]!==o?(t={databaseName:i,tableName:o,connectionId:d},l[0]=d,l[1]=i,l[2]=o,l[3]=t):t=l[3];let{data:u,isLoading:m}=(0,p.Z2)(t);return l[4]===Symbol.for("react.memo_cache_sentinel")?(s={overflow:"hidden"},l[4]=s):s=l[4],l[5]!==u?.create_table_query||l[6]!==m?(n=(0,r.jsx)(c.t,{flex:"auto",shadow:"none",radius:"sm",p:"xs",style:s,children:m?(0,r.jsx)("div",{className:"d-inline-block",children:(0,r.jsx)(h.A,{className:"spin-animate"})}):(0,r.jsx)(x.V,{data:u?.create_table_query??"Schema is not available",enableCopy:!!u?.create_table_query,copyButtonSize:"xs"})}),l[5]=u?.create_table_query,l[6]=m,l[7]=n):n=l[7],n},b={[l.SX.Sum]:"Sum",[l.SX.Gauge]:"Gauge",[l.SX.Histogram]:"Histogram",[l.SX.Summary]:"Summary",[l.SX.ExponentialHistogram]:"Exponential Histogram"},y=e=>{let t,s,i,o,c,m=(0,a.c)(34),{source:h,iconStyles:p,variant:x}=e,f=void 0===x?"icon":x,[y,S]=(0,n.useState)(!1),w=h?.kind==="metric";if(m[0]!==w||m[1]!==h){let e,s;if(t=[],h&&w){let e,s,r;m[3]===Symbol.for("react.memo_cache_sentinel")?(e=Object.values(l.SX),m[3]=e):e=m[3],m[4]!==h?(s=e.map(e=>({metricType:e,tableName:h.metricTables?.[e]})).filter(v),m[4]=h,m[5]=s):s=m[5],m[6]!==h||m[7]!==s?(r=s.map(e=>{let{metricType:t,tableName:s}=e;return{databaseName:h.from.databaseName,tableName:s,connectionId:h.connection,title:b[t]}}),m[6]=h,m[7]=s,m[8]=r):r=m[8],t.push(...r)}else if(h&&h.from.tableName){let e,s=h.name??h.from.tableName;m[9]!==h.connection||m[10]!==h.from.databaseName||m[11]!==h.from.tableName||m[12]!==s?(e={databaseName:h.from.databaseName,tableName:h.from.tableName,connectionId:h.connection,title:s},m[9]=h.connection,m[10]=h.from.databaseName,m[11]=h.from.tableName,m[12]=s,m[13]=e):e=m[13],t.push(e)}m[14]!==h?.materializedViews?(e=h?.materializedViews??[],m[14]=h?.materializedViews,m[15]=e):e=m[15];let r=e;if(m[16]!==r||m[17]!==h){let e;m[19]!==h?(e=e=>{let{tableName:t,databaseName:s}=e;return{databaseName:s,tableName:t,connectionId:h.connection,title:`${t} (MV)`}},m[19]=h,m[20]=e):e=m[20],s=r.map(e),m[16]=r,m[17]=h,m[18]=s}else s=m[18];t.push(...s),m[0]=w,m[1]=h,m[2]=t}else t=m[2];let E=!!h&&t.length>0;return m[21]===Symbol.for("react.memo_cache_sentinel")?(s=()=>S(!0),m[21]=s):s=m[21],m[22]!==p||m[23]!==E||m[24]!==t.length||m[25]!==f?(i=(0,r.jsx)(g,{isEnabled:E,onClick:s,iconStyles:p,tableCount:t.length,variant:f}),m[22]=p,m[23]=E,m[24]=t.length,m[25]=f,m[26]=i):i=m[26],m[27]!==E||m[28]!==y||m[29]!==t?(o=E&&(0,r.jsx)(d.a,{opened:y,onClose:()=>S(!1),size:"auto",title:t.length>1?"Table Schemas":"Table Schema",children:(0,r.jsxs)(u.t,{defaultValue:`${t[0]?.databaseName}.${t[0]?.tableName}.${t[0]?.title}`,children:[(0,r.jsx)(u.t.List,{children:t.map(j)}),t.map(_)]})}),m[27]=E,m[28]=y,m[29]=t,m[30]=o):o=m[30],m[31]!==i||m[32]!==o?(c=(0,r.jsxs)(r.Fragment,{children:[i,o]}),m[31]=i,m[32]=o,m[33]=c):c=m[33],c};function v(e){let{tableName:t}=e;return!!t}function j(e){return(0,r.jsx)(u.t.Tab,{value:`${e.databaseName}.${e.tableName}.${e.title}`,children:e.title},`${e.databaseName}.${e.tableName}.${e.title}`)}function _(e){return(0,r.jsx)(u.t.Panel,{value:`${e.databaseName}.${e.tableName}.${e.title}`,pt:"sm",children:(0,r.jsx)(f,{...e})},`${e.databaseName}.${e.tableName}.${e.title}`)}},91148:(e,t,s)=>{"use strict";s.d(t,{A:()=>b});var r=s(6029),a=s(75155),n=s(35467),l=s(43517),i=s(60481),o=s(24589),c=s(78253),d=s(43152),u=s(91021),m=s(57389),h=s(81973),p=s(92917),x=s(15628),g=s(99082),f=s(88339);function b(e){let t,s,b,v,j,_,S,w,E=(0,a.c)(36),{config:C,enabled:k,queryKeyPrefix:N,title:A,toolbarPrefix:T,toolbarSuffix:$,showMVOptimizationIndicator:I}=e,R=void 0===k||k,z=void 0===I||I;E[0]!==C?(t=(0,d._t)(C),E[0]=C,E[1]=t):t=E[1];let L=t,{data:M}=(0,m.d)(L);E[2]!==L||E[3]!==N?(s=[N,L],E[2]=L,E[3]=N,E[4]=s):s=E[4],E[5]!==R||E[6]!==s?(b={placeholderData:y,queryKey:s,enabled:R},E[5]=R,E[6]=s,E[7]=b):b=E[7];let{data:D,isLoading:F,isError:O,error:P}=(0,u.HD)(L,b);E[8]!==C.numberFormat||E[9]!==D?.data?.[0]?(v=(0,p.ZV)(Object.values(D?.data?.[0]??{})?.[0]??NaN,C.numberFormat),E[8]=C.numberFormat,E[9]=D?.data?.[0],E[10]=v):v=E[10];let W=v;E[11]!==C.source?(j={id:C.source},E[11]=C.source,E[12]=j):j=E[12];let{data:B}=(0,h.Fo)(j);if(E[13]!==M||E[14]!==L||E[15]!==z||E[16]!==B||E[17]!==T||E[18]!==$){let e;if(_=[],T&&T.length>0&&_.push(...T),B&&z){let e;E[20]!==L||E[21]!==B?(e=(0,r.jsx)(g.A,{config:L,source:B,variant:"icon"},"db-number-chart-mv-indicator"),E[20]=L,E[21]=B,E[22]=e):e=E[22],_.push(e)}E[23]!==M||E[24]!==L.dateRange?(e=(0,d.m9)({mvOptimizationData:M,originalDateRange:L.dateRange}),E[23]=M,E[24]=L.dateRange,E[25]=e):e=E[25];let t=e;t&&_.push(t),$&&$.length>0&&_.push(...$),E[13]=M,E[14]=L,E[15]=z,E[16]=B,E[17]=T,E[18]=$,E[19]=_}else _=E[19];let H=_;return E[26]!==D||E[27]!==P||E[28]!==O||E[29]!==F||E[30]!==W?(S=F&&!D?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):O?(0,r.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted",children:[(0,r.jsx)(l.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsxs)(i.a,{mt:"sm",children:[(0,r.jsx)(l.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(o.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:P.message}),P instanceof n.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(f.V,{data:P?.query})]})]})]}):D?.data.length===0?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,r.jsx)(c.s,{align:"center",justify:"center",h:"100%",style:{flexGrow:1},children:(0,r.jsx)(l.E,{size:"4rem",children:W??"N/A"})}),E[26]=D,E[27]=P,E[28]=O,E[29]=F,E[30]=W,E[31]=S):S=E[31],E[32]!==S||E[33]!==A||E[34]!==H?(w=(0,r.jsx)(x.A,{title:A,toolbarItems:H,children:S}),E[32]=S,E[33]=A,E[34]=H,E[35]=w):w=E[35],w}function y(e){return e}},91939:(e,t,s)=>{"use strict";s.d(t,{A:()=>z});var r=s(6029),a=s(75155),n=s(55729),l=s(35467),i=s(43517),o=s(60481),c=s(24589),d=s(43152),u=s(82203),m=s.n(u),h=s(75828),p=s.n(h),x=s(8737),g=s(24602),f=s(40387),b=s(79220),y=s(39696),v=s(21440),j=s(17421),_=s(48423),S=s(55024),w=s(36600),E=s(68593),C=s(92917);let k=({data:e,groupColumnName:t,columns:s,getRowSearchLink:a,tableBottom:l,sorting:i,onSortingChange:o,variant:c="default"})=>{let d=(0,w.Kh)(),u=(0,n.useRef)(null),h=u.current?.clientWidth,k=s.filter(e=>!1!==e.visible).length+1,N=Math.min(100-s.filter(e=>!1!==e.visible).map(({columnWidthPercent:e})=>Math.max(null!=h?100/h*100:0,e??1/k*100)).reduce((e,t)=>e+t,0),75),A=[...null!=t?[{accessorKey:"group",header:t,size:null!=h?Math.max(N/100*h,100):200}]:[],...s.filter(e=>!1!==e.visible).map(({id:e,dataKey:t,displayName:s,numberFormat:n,columnWidthPercent:l},i)=>({id:e,accessorKey:t,header:s,accessorFn:e=>e[t],cell:({getValue:e,row:t})=>{let s=e(),l=s??null;if(n&&(l=(0,C.ZV)(s,n)),null==a)return l;let i=a(t.original);return i?(0,r.jsx)(m(),{href:i,className:p()("align-top overflow-hidden py-1 pe-3",{"text-break":D,"text-truncate":!D}),style:{display:"block",color:"inherit",textDecoration:"none"},children:l}):(0,r.jsx)("div",{className:p()("align-top overflow-hidden py-1 pe-3",{"text-break":D,"text-truncate":!D}),children:l})},size:i===k-2?E.k:null!=h&&null!=l?Math.max(l/100*h,100):null!=h?h/k:200,enableResizing:i!==k-2}))],T=(0,b.N4)({data:e,columns:A,getCoreRowModel:(0,y.HT)(),enableColumnResizing:!0,columnResizeMode:"onChange",enableSorting:!0,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(i);o?.(t??null)}else o?.(e??null)},state:{sorting:i}}),{rows:$}=T.getRowModel(),I=(0,v.Te)({count:$.length,getScrollElement:()=>u.current,estimateSize:(0,n.useCallback)(()=>58,[]),overscan:10,paddingEnd:20}),R=I.getVirtualItems(),z=I.getTotalSize(),[L,M]=(0,n.useMemo)(()=>R.length>0?[Math.max(0,R[0].start-I.options.scrollMargin),Math.max(0,z-R[R.length-1].end)]:[0,0],[R,I.options.scrollMargin,z]),[D,F]=(0,n.useState)(!1),{csvData:O}=(0,S.u)(e,s.map(e=>({dataKey:e.dataKey,displayName:e.displayName})),{groupColumnName:t});return(0,r.jsxs)("div",{className:"overflow-auto h-100 fs-8",ref:u,children:[(0,r.jsxs)("table",{className:"w-100",style:{tableLayout:"fixed",borderCollapse:"collapse",fontFamily:"var(--font-ibm-plex-mono)"},children:[(0,r.jsx)("thead",{style:{position:"sticky",top:0,background:"muted"===c?"var(--color-bg-muted)":"var(--color-bg-body)"},children:T.getHeaderGroups().map(e=>(0,r.jsx)("tr",{children:e.headers.map((t,s)=>(0,r.jsx)(_.A,{header:t,isLast:s===e.headers.length-1,lastItemButtons:(0,r.jsx)(r.Fragment,{children:s===e.headers.length-1&&(0,r.jsxs)("div",{className:"d-flex align-items-center",children:[(0,r.jsx)(x.N,{onClick:()=>F(e=>!e),children:(0,r.jsx)(g.A,{size:14})}),(0,r.jsx)(j.P,{data:O,filename:`${d}_table_results`,className:"fs-8 ms-2",title:"Download table as CSV",children:(0,r.jsx)(f.A,{size:14})})]})})},t.id))},e.id))}),(0,r.jsxs)("tbody",{children:[L>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${L}px`}})}),R.map(e=>{let t=$[e.index];return(0,r.jsx)("tr",{className:"bg-muted-hover","data-index":e.index,ref:I.measureElement,children:t.getVisibleCells().map(e=>(0,r.jsx)("td",{title:`${e.getValue()}`,children:(0,b.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.key)}),M>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${M}px`}})})]})]}),l]})};var N=s(57389),A=s(78744),T=s(81973),$=s(15628),I=s(99082),R=s(88339);function z(e){let t,s,u,m,h,p,x,g,f,b,y,v=(0,a.c)(56),{config:j,getRowSearchLink:_,enabled:S,queryKeyPrefix:w,onSortingChange:E,sort:z,hiddenColumns:F,title:O,toolbarPrefix:P,toolbarSuffix:W,showMVOptimizationIndicator:B,variant:H}=e,V=void 0===S||S;v[0]!==F?(t=void 0===F?[]:F,v[0]=F,v[1]=t):t=v[1];let q=t,X=void 0===B||B;v[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],v[2]=s):s=v[2];let[G,K]=(0,n.useState)(s);v[3]!==j.source?(u={id:j.source},v[3]=j.source,v[4]=u):u=v[4];let{data:J}=(0,T.Fo)(u),Z=z||G;v[5]!==E?(m=e=>{K(e),E&&E(e)},v[5]=E,v[6]=m):m=v[6];let Y=m;if(v[7]!==j||v[8]!==Z){if(h=(0,d.Z7)(j),Z.length){let e;v[10]!==Z?(e=Z.map(D),v[10]=Z,v[11]=e):e=v[11],h.orderBy=e}v[7]=j,v[8]=Z,v[9]=h}else h=v[9];let U=h,{data:Q}=(0,N.d)(U);v[12]!==V||v[13]!==w?(p={enabled:V,queryKeyPrefix:w},v[12]=V,v[13]=w,v[14]=p):p=v[14];let{data:ee,fetchNextPage:et,hasNextPage:es,isLoading:er,isError:ea,error:en}=(0,A.A)(U,p),{observerRef:el}=(0,C.BL)(et);e:{let e;if("string"==typeof j.select){let e;v[15]===Symbol.for("react.memo_cache_sentinel")?(e=[],v[15]=e):e=v[15],x=e;break e}v[16]!==j.select?(e=j.select.reduce(M,[]),v[16]=j.select,v[17]=e):e=v[17],x=e}let ei=x;t:{let e,t;v[18]!==ee?.data?(e=ee?.data??[],v[18]=ee?.data,v[19]=e):e=v[19];let s=e;if(0===s.length){let e;v[20]===Symbol.for("react.memo_cache_sentinel")?(e=[],v[20]=e):e=v[20],g=e;break t}if(v[21]!==ei||v[22]!==j.numberFormat||v[23]!==q||v[24]!==U.groupBy||v[25]!==s[0]){let e=[];U.groupBy&&"string"==typeof U.groupBy&&(e=U.groupBy.split(",").map(L)),t=Object.keys(s?.[0]).filter(e=>!q.includes(e)).map(t=>({id:ei.includes(t)?`"${t}"`:t,dataKey:t,displayName:t,numberFormat:e.includes(t)?void 0:j.numberFormat})),v[21]=ei,v[22]=j.numberFormat,v[23]=q,v[24]=U.groupBy,v[25]=s[0],v[26]=t}else t=v[26];g=t}let eo=g;if(v[27]!==Q||v[28]!==U||v[29]!==X||v[30]!==J||v[31]!==P||v[32]!==W){let e;if(f=[],P&&P.length>0&&f.push(...P),J&&X){let e;v[34]!==U||v[35]!==J?(e=(0,r.jsx)(I.A,{config:U,source:J,variant:"icon"},"db-table-chart-mv-indicator"),v[34]=U,v[35]=J,v[36]=e):e=v[36],f.push(e)}v[37]!==Q||v[38]!==U.dateRange?(e=(0,d.m9)({mvOptimizationData:Q,originalDateRange:U.dateRange}),v[37]=Q,v[38]=U.dateRange,v[39]=e):e=v[39];let t=e;t&&f.push(t),W&&W.length>0&&f.push(...W),v[27]=Q,v[28]=U,v[29]=X,v[30]=J,v[31]=P,v[32]=W,v[33]=f}else f=v[33];let ec=f;return v[40]!==eo||v[41]!==ee||v[42]!==Z||v[43]!==en||v[44]!==el||v[45]!==_||v[46]!==Y||v[47]!==es||v[48]!==ea||v[49]!==er||v[50]!==H?(b=er&&!ee?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):ea&&en?(0,r.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted overflow-scroll",children:[(0,r.jsx)(i.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsxs)(o.a,{mt:"sm",children:[(0,r.jsx)(i.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(c.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:en.message}),en instanceof l.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(R.V,{data:en?.query})]})]})]}):ee?.data.length===0?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,r.jsx)(k,{data:ee?.data??[],columns:eo,getRowSearchLink:_,sorting:Z,onSortingChange:Y,variant:H,tableBottom:es&&(0,r.jsx)(i.E,{ref:el,ta:"center",children:"Loading..."})}),v[40]=eo,v[41]=ee,v[42]=Z,v[43]=en,v[44]=el,v[45]=_,v[46]=Y,v[47]=es,v[48]=ea,v[49]=er,v[50]=H,v[51]=b):b=v[51],v[52]!==b||v[53]!==O||v[54]!==ec?(y=(0,r.jsx)($.A,{title:O,toolbarItems:ec,children:b}),v[52]=b,v[53]=O,v[54]=ec,v[55]=y):y=v[55],y}function L(e){return e.trim()}function M(e,t){return t.alias&&e.push(t.alias),e}function D(e){return{valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}}},92495:(e,t)=>{"use strict";t.AB=function(e){let t,s;return function(e){try{return new URL(e),!0}catch(e){return!1}}(e)&&"slack.com"===((s=(t=new URL(e).hostname).split(".")).length>=2?s.slice(-2).join("."):t)}},93522:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return r}});let r=s(14761)._(s(55729)).default.createContext(null)},94364:(e,t,s)=>{"use strict";s.d(t,{f:()=>r});let r=e=>({isLoading:!1,error:null,enrichedFrame:null})},94937:(e,t,s)=>{"use strict";s.d(t,{A:()=>v});var r=s(6029),a=s(75155),n=s(55729),l=s(82203),i=s.n(l),o=s(80519),c=s.n(o),d=s(37659),u=s(3635),m=s(43517),h=s(63085),p=s(34834),x=s(25062),g=s(56795),f=s(28975),b=s(41279),y=s(18006);function v(e){let t,s,l,o,v,j,_,S,w,E,C,k,N,A,T,$,I,R,z=(0,a.c)(62),{displayedKey:L,name:M,nameLanguage:D,sqlExpression:F,value:O,onPropertyAddClick:P,generateSearchUrl:W}=e,B=void 0===D?"lucene":D,[H,V]=(0,n.useState)(!1);z[0]!==O?(t=(0,y.OH)(O),z[0]=O,z[1]=t):t=z[1];let q=t;if(!(P||W||q)){let e,t=L||M;return z[2]!==M||z[3]!==t||z[4]!==O?(e=(0,r.jsxs)("div",{className:"bg-highlighted px-2 py-0.5 me-1 my-1",children:[t,": ",O]},M),z[2]=M,z[3]=t,z[4]=O,z[5]=e):e=z[5],e}if(z[6]!==L||z[7]!==W||z[8]!==q||z[9]!==M||z[10]!==B||z[11]!==P||z[12]!==H||z[13]!==F||z[14]!==O){let e,t,a="sql"===B?c().format("? = ?",[c().raw(M),O]):`${M}:${"string"==typeof O?`"${O}"`:O}`;o=d.A,A="top",T=!1,v=!0,j=H,_=V,z[29]===Symbol.for("react.memo_cache_sentinel")?(e={wordBreak:"break-word"},z[29]=e):e=z[29],z[30]!==L||z[31]!==q||z[32]!==M||z[33]!==H||z[34]!==O?(t=q?(0,r.jsxs)("a",{href:encodeURI(O),target:"_blank",rel:"noopener noreferrer",className:"d-flex flex-row align-items-center bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",children:[L||M,(0,r.jsx)(g.A,{size:14,className:"ms-1"})]}):(0,r.jsxs)(u.Y,{className:"bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",wrap:"nowrap",gap:0,onClick:()=>V(!H),children:[L||M,":",(0,r.jsx)(m.E,{size:"xs",ms:4,maw:300,truncate:!0,children:O})]}),z[30]=L,z[31]=q,z[32]=M,z[33]=H,z[34]=O,z[35]=t):t=z[35],z[36]!==t||z[37]!==O?(S=(0,r.jsx)(d.A.Target,{children:(0,r.jsx)(h.m,{label:O,withArrow:!0,maw:400,multiline:!0,style:e,position:"bottom",children:t})}),z[36]=t,z[37]=O,z[38]=S):S=z[38],l=d.A.Dropdown,N=2,s=p.B,w=0,E="stretch",z[39]!==P||z[40]!==F||z[41]!==O?(C=P&&(0,r.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,r.jsx)(f.A,{size:14}),onClick:()=>{P(F,O),V(!1)},children:"Add to Search"}),z[39]=P,z[40]=F,z[41]=O,z[42]=C):C=z[42],k=W&&(0,r.jsx)(i(),{href:W(a,B),children:(0,r.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,r.jsx)(b.A,{size:14}),children:"Search This Value"})}),z[6]=L,z[7]=W,z[8]=q,z[9]=M,z[10]=B,z[11]=P,z[12]=H,z[13]=F,z[14]=O,z[15]=s,z[16]=l,z[17]=o,z[18]=v,z[19]=j,z[20]=_,z[21]=S,z[22]=w,z[23]=E,z[24]=C,z[25]=k,z[26]=N,z[27]=A,z[28]=T}else s=z[15],l=z[16],o=z[17],v=z[18],j=z[19],_=z[20],S=z[21],w=z[22],E=z[23],C=z[24],k=z[25],N=z[26],A=z[27],T=z[28];return z[43]!==s||z[44]!==w||z[45]!==E||z[46]!==C||z[47]!==k?($=(0,r.jsxs)(s,{gap:w,justify:E,children:[C,k]}),z[43]=s,z[44]=w,z[45]=E,z[46]=C,z[47]=k,z[48]=$):$=z[48],z[49]!==l||z[50]!==$||z[51]!==N?(I=(0,r.jsx)(l,{p:N,children:$}),z[49]=l,z[50]=$,z[51]=N,z[52]=I):I=z[52],z[53]!==o||z[54]!==v||z[55]!==j||z[56]!==_||z[57]!==S||z[58]!==I||z[59]!==A||z[60]!==T?(R=(0,r.jsxs)(o,{position:A,withinPortal:T,withArrow:v,opened:j,onChange:_,children:[S,I]}),z[53]=o,z[54]=v,z[55]=j,z[56]=_,z[57]=S,z[58]=I,z[59]=A,z[60]=T,z[61]=R):R=z[61],R}},96958:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(6029),a=s(75155),n=s(75828),l=s.n(n);function i(e){let t,s,n,i,o,c,d,u,m,h,p,x=(0,a.c)(23);x[0]!==e?({children:s,onClick:i,active:t,className:n,style:c,...o}=e,x[0]=e,x[1]=t,x[2]=s,x[3]=n,x[4]=i,x[5]=o,x[6]=c):(t=x[1],s=x[2],n=x[3],i=x[4],o=x[5],c=x[6]);let g=!t;x[7]!==t||x[8]!==n||x[9]!==g?(d=l()("text-center cursor-pointer",{"fw-bold text-white-hover":t,"text-muted-hover":g},n),x[7]=t,x[8]=n,x[9]=g,x[10]=d):d=x[10],x[11]!==s?(u=(0,r.jsx)("span",{children:s}),x[11]=s,x[12]=u):u=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(m={height:2},x[13]=m):m=x[13];let f=t?"var(--color-text-brand)":"var(--color-border)";return x[14]!==f?(h=(0,r.jsx)("div",{className:"w-100 mt-2",style:m,children:(0,r.jsx)("div",{className:"h-100 w-100",style:{background:f}})}),x[14]=f,x[15]=h):h=x[15],x[16]!==i||x[17]!==o||x[18]!==c||x[19]!==d||x[20]!==u||x[21]!==h?(p=(0,r.jsxs)("div",{className:d,onClick:i,style:c,...o,children:[u,h]}),x[16]=i,x[17]=o,x[18]=c,x[19]=d,x[20]=u,x[21]=h,x[22]=p):p=x[22],p}function o(e){let t,s,n,o,c=(0,a.c)(14),{items:d,activeItem:u,className:m,onClick:h,"data-testid":p}=e;if(c[0]!==m?(t=l()("d-flex flex-wrap",m),c[0]=m,c[1]=t):t=c[1],c[2]!==u||c[3]!==d||c[4]!==h){let e;c[6]!==u||c[7]!==h?(e=e=>(0,r.jsx)(i,{"data-testid":`tab-${String(e.value).toLowerCase()}`,active:e.value===u,onClick:()=>h?.(e.value),children:(0,r.jsx)("span",{className:"mx-4 text-nowrap",children:e.text})},e.value),c[6]=u,c[7]=h,c[8]=e):e=c[8],s=d.map(e),c[2]=u,c[3]=d,c[4]=h,c[5]=s}else s=c[5];return c[9]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(i,{className:"flex-grow-1 pe-none",children:"\xa0"}),c[9]=n):n=c[9],c[10]!==p||c[11]!==t||c[12]!==s?(o=(0,r.jsxs)("div",{className:t,"data-testid":p,children:[s,n]}),c[10]=p,c[11]=t,c[12]=s,c[13]=o):o=c[13],o}}},e=>{e.O(0,[7756,883,2928,6171,5554,910,1606,1909,6747,3062,1445,2990,4607,9979,8855,5165,5948,9353,9207,8718,1021,6514,3234,8374,6593,636,8792],()=>e(e.s=32833)),_N_E=e.O()}]);