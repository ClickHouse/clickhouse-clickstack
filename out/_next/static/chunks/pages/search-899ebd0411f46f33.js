(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{225:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var r=s(6029),n=s(75155),a=s(98142);let l=()=>{let e,t=(0,n.c)(2);if(a.bp){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)("span",{children:["Please open an issue on"," ",(0,r.jsx)("a",{href:"https://github.com/hyperdxio/hyperdx/issues",target:"_blank",children:"GitHub"}),"."]}),t[0]=e):e=t[0],e}return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("span",{children:"Please contact support."}),t[1]=e):e=t[1],e}},1639:(e,t,s)=>{"use strict";s.d(t,{A:()=>L});var r=s(6029),n=s(75155),a=s(55729),l=s(71024),i=s.n(l),o=s(92884),c=s(36006),d=s.n(c),u=s(35467),m=s(76089),h=s(43517),x=s(60481),p=s(25062),g=s(3635),f=s(27166),y=s(24589),b=s(92789),v=s(78341),j=s(88849),S=s(16232),w=s(43152),_=s(91021),E=s(7565),C=s(92917),k=s(15628),N=s(88339);let A=["rgba(253, 231, 37, 1.0)","rgba(181, 222, 43, 0.92)","rgba(110, 206, 88, 0.9)","rgba(53, 183, 121, 0.8)","rgba(31, 158, 137, 0.8)","rgba(38, 130, 142, 0.7)","rgba(49, 104, 142, 0.7)","rgba(62, 73, 137, 0.7)","hsla(259, 35%, 25%, 0.7)"].reverse(),T={stroke:"rgba(102,102,102,1)",font:"12px IBM Plex Mono, monospace",grid:{show:!0,stroke:"rgba(52,58,64)",dash:[3,3],width:1},border:{show:!0,stroke:"rgba(102,102,102,1)",width:1}},$={width:1500,height:600,mode:2,ms:1,legend:{show:!1},scales:{x:{time:!0}},axes:[{...T},{...T}],series:[{},{label:"Latency",paths:function(e){let{disp:t}=e;return(e,s,r,n)=>(o.default.orient(e,s,(r,n,a,l,i,o,c,d,u,m,h,x,p,g,f)=>{let[y,b,v]=e.data[s],j=y.length,S=t.fill.values(e,s),w=t.fill.lookup??[...new Set(S)],_=w.map(e=>new Path2D),E=j-b.lastIndexOf(b[0]),C=b[1]-b[0],k=o(y[E]-y[0],l,m,d)-o(0,l,m,d),N=c(C,i,h,u)-c(0,i,h,u),A=b.slice(0,E).map(e=>Math.round(c(e,i,h,u)-N/2)),T=Array.from({length:j/E},(e,t)=>Math.round(o(y[t*E],l,m,d)-k/2));for(let e=0;e<j;e++)if(v[e]>0&&y[e]>=(l.min??-1/0)&&y[e]<=(l.max??1/0)&&b[e]>=(i.min??-1/0)&&b[e]<=(i.max??1/0)){let t=T[~~(e/E)],s=A[e%E];g(_[S[e]],t,s,k,N)}e.ctx.save(),e.ctx.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),_.forEach((t,s)=>{e.ctx.fillStyle=w[s],e.ctx.fill(t)}),e.ctx.restore()}),null)}({disp:{fill:{lookup:A,values:(e,t)=>{let s=e.data[t][2],r=1/0,n=-1/0;for(let e=0;e<s.length;e++)s[e]>0&&(r=Math.min(r,s[e]),n=Math.max(n,s[e]));let a=e=>Math.log(e)/Math.log(20),l=a(n)-a(r),i=A.length,o=Array(s.length);for(let e=0;e<s.length;e++)o[e]=0===s[e]?-1:Math.max(Math.min(i-1,Math.floor(Math.max(i*(a(s[e])-a(r)),1e-32)/l)),0);return o}}}}),facets:[{scale:"x",auto:!0,sorted:1},{scale:"y",auto:!0}]}]};function z(e){let t,s,a,l,i,o,c=(0,n.c)(18),{config:d,enabled:b,onFilter:j,title:E,toolbarPrefix:C,toolbarSuffix:A}=e,T=void 0===b||b,$=d.dateRange,z=(0,m.tA)($,245),L=d.select[0].valueExpression,M=d.select[0].countExpression??"count()";c[0]!==L?(t=(0,w.eY)(L),c[0]=L,c[1]=t):t=c[1];let R=t;c[2]!==d||c[3]!==R||c[4]!==L?(s=R?{...d,where:"",orderBy:void 0,granularity:void 0,select:[{aggFn:"min",aggCondition:"value_calc >= 0",aggConditionLanguage:"sql",valueExpression:"value_calc",alias:"min"},{aggFn:"max",valueExpression:"value_calc",alias:"max"}],with:[{name:"min_max_calc",chartConfig:{...d,select:[{valueExpression:L,alias:"value_calc"}],orderBy:void 0}}],timestampValueExpression:"__hdx_time_bucket",from:{databaseName:"",tableName:"min_max_calc"}}:{...d,orderBy:void 0,granularity:void 0,select:[{aggFn:"min",valueExpression:L,aggCondition:`${L} >= 0`,aggConditionLanguage:"sql",alias:"min"},{aggFn:"max",valueExpression:L,aggCondition:"",alias:"max"}]},c[2]=d,c[3]=R,c[4]=L,c[5]=s):s=c[5];let D=s;c[6]!==D?(a=["heatmap",D],c[6]=D,c[7]=a):a=c[7],c[8]!==T||c[9]!==a?(l={queryKey:a,enabled:T},c[8]=T,c[9]=a,c[10]=l):l=c[10];let{data:P,isLoading:O,error:F}=(0,_.HD)(D,l),[V,B]=(0,v.j)(),W=Number.parseInt(P?.data?.[0]?.min??"0",10),H=Number.parseInt(P?.data?.[0]?.max??"0",10),q=R?{...d,where:"",select:[{valueExpression:"sum(value_count)",alias:"count"}],groupBy:[{valueExpression:`widthBucket(value_calc, ${W}, ${H}, 80)`,alias:"x_bucket"}],with:[{name:"bucket_calc",chartConfig:{...d,select:[{valueExpression:L,alias:"value_calc"},{valueExpression:M,alias:"value_count"}],granularity:z,orderBy:void 0}}],timestampValueExpression:"__hdx_time_bucket",from:{databaseName:"",tableName:"bucket_calc"},orderBy:[{valueExpression:"x_bucket",ordering:"ASC"}],granularity:z}:{...d,select:[{valueExpression:M,alias:"count"}],groupBy:[{valueExpression:`widthBucket(${L}, ${W}, ${H}, 80)`,alias:"x_bucket"}],orderBy:[{valueExpression:"x_bucket",ordering:"ASC"}],granularity:z},{data:X,isLoading:Y,error:J}=(0,_.HD)(q,{queryKey:["heatmap_bucket",q],enabled:!!P&&null!=q}),K=(0,w.Ht)($[0],$[1],z),G=(0,u.zo)(X?.meta??[]),Z=[],U=[],Q=[];if(null!=X&&null!=G){let e=0;for(let t=0;t<K.length;t++){let s=K[t].getTime();for(let t=0;t<=81;t++){let r=X?.data?.[e];null!=r&&new Date(r[G.name]).getTime()==s&&r.x_bucket==t?(Z.push(new Date(r[G.name]).getTime()),U.push(W+r.x_bucket*((H-W)/80)),Q.push(Number.parseInt(r.count,10)),e++):(Z.push(s),U.push(W+(H-W)/80*t),Q.push(0))}}}c[11]!==C||c[12]!==A?(i=[],C&&C.length>0&&i.push(...C),A&&A.length>0&&i.push(...A),c[11]=C,c[12]=A,c[13]=i):i=c[13];let ee=i,et=J||F,es=Y||O?(0,r.jsx)(h.E,{size:"sm",ta:"center",p:"xl",children:"Loading..."}):et?(0,r.jsxs)(x.a,{p:"xl",ta:"center",h:"100%",children:[(0,r.jsx)(h.E,{size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsx)(p.$,{className:"mx-auto",variant:"subtle",color:"red",onClick:()=>B.open(),children:(0,r.jsxs)(g.Y,{gap:"xxs",children:[(0,r.jsx)(S.A,{size:16}),"See Error Details"]})}),(0,r.jsx)(f.a,{opened:V,onClose:()=>B.close(),title:"Error Details",children:(0,r.jsxs)(g.Y,{align:"start",children:[(0,r.jsx)(h.E,{size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(y.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:et.message}),et instanceof u.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(N.V,{data:et?.query,enableCopy:!0})]})]})})]}):Z.length<2||K?.length<2?(0,r.jsx)(h.E,{size:"sm",ta:"center",p:"xl",children:"Not enough data points to render heatmap. Try expanding your search criteria."}):(0,r.jsx)(I,{data:[Z,U,Q],numberFormat:d.numberFormat,onFilter:j},JSON.stringify(d));return c[14]!==es||c[15]!==E||c[16]!==ee?(o=(0,r.jsx)(k.A,{title:E,toolbarItems:ee,disableReactiveContainer:!0,children:es}),c[14]=es,c[15]=E,c[16]=ee,c[17]=o):o=c[17],o}let L=i()(()=>Promise.resolve(z),{ssr:!1});function I(e){let t,s,l,i,o,c,u,m,x,p,g,f,y,v,S,w,_,k,N=(0,n.c)(41),{data:A,numberFormat:T,onFilter:z}=e,[L,I]=(0,a.useState)(void 0),[R,D]=(0,a.useState)(void 0),{ref:P,width:O,height:F}=(0,j.L)();N[0]!==T?(t=e=>T?(0,C.ZV)(e,{...T,average:!0,mantissa:0,unit:void 0}):new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e),N[0]=T,N[1]=t):t=N[1];let V=t;N[2]!==V?(s=null!=$&&null!=$.axes?{axes:[$.axes[0],{...$.axes[1],values:(e,t)=>t.map(V)}]}:{},N[2]=V,N[3]=s):s=N[3],N[4]===Symbol.for("react.memo_cache_sentinel")?(l={setScale:!1,x:!0,y:!0,dist:5},N[4]=l):l=N[4],N[5]===Symbol.for("react.memo_cache_sentinel")?(i={drag:l,show:!0,focus:{prox:100}},N[5]=i):i=N[5],N[6]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{let{xVal:t,yVal:s,countVal:r,closestDistance:n,closestIndex:a,xCoord:l,yCoord:i,xSize:o,ySize:c}=e;D({xVal:t,yVal:s,countVal:r,closestDistance:n,closestIndex:a,xCoord:l,yCoord:i,xSize:o,ySize:c})},N[6]=o):o=N[6],N[7]!==V?(c=function({proximity:e,yFormatter:t,xFormatter:s,onPointHighlight:r}){let n=-1;return{hooks:{setCursor:t=>{let{top:s,left:a}=t.cursor;if(null==s||null==a)return;let[l,i,o]=t.data[1],c=0,d=1/0;for(let e=0;e<l.length;e++){let r=Math.sqrt((t.valToPos(l[e],"x")-a)**2+(t.valToPos(i[e],"y")-s)**2);r<d&&o[e]>0&&(c=e,d=r)}let u=l.length-i.lastIndexOf(i[0]),m=i[1]-i[0],h=l[u]-l[0],x=Math.abs(t.valToPos(h,"x")-t.valToPos(0,"x")),p=Math.abs(t.valToPos(m,"y")-t.valToPos(0,"y")),g=t.valToPos(l[c],"x"),f=t.valToPos(i[c],"y"),y=o[c],b=l[c],v=i[c],{offsetLeft:j,offsetTop:S}=t.over;d<e&&c!==n&&(n=c,r({xVal:b,yVal:v,countVal:y,closestDistance:d,closestIndex:c,xCoord:g+j,yCoord:f+S,xSize:x,ySize:p}))}}}}({proximity:20,yFormatter:V,xFormatter:M,onPointHighlight:o}),N[7]=V,N[8]=c):c=N[8],N[9]===Symbol.for("react.memo_cache_sentinel")?(u={hooks:{setSelect:e=>{let{offsetLeft:t,offsetTop:s}=e.over,r=e.posToVal(e.select.left,"x"),n=e.posToVal(e.select.left+e.select.width,"x"),a=e.posToVal(e.select.top,"y"),l=e.posToVal(e.select.top+e.select.height,"y");setTimeout(()=>{I({top:e.select.top+s,left:e.select.left+t,width:e.select.width,height:e.select.height,xMin:r,xMax:n,yMin:l,yMax:a})},20)}}},N[9]=u):u=N[9],N[10]!==c?(m=[c,u],N[10]=c,N[11]=m):m=N[11],N[12]!==F||N[13]!==s||N[14]!==m||N[15]!==O?(x={...$,...s,width:O,height:F,cursor:i,plugins:m},N[12]=F,N[13]=s,N[14]=m,N[15]=O,N[16]=x):x=N[16];let B=x;return N[17]===Symbol.for("react.memo_cache_sentinel")?(p={width:"100%",height:"100%",position:"relative"},N[17]=p):p=N[17],N[18]!==L?(g=()=>{null!=L&&I(void 0)},N[18]=L,N[19]=g):g=N[19],N[20]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{D(void 0)},N[20]=f):f=N[20],N[21]===Symbol.for("react.memo_cache_sentinel")?(y=[],N[21]=y):y=N[21],N[22]!==A?(v=[y,A],N[22]=A,N[23]=v):v=N[23],N[24]!==B||N[25]!==v?(S=(0,r.jsx)(d(),{options:B,data:v,resetScales:!0}),N[24]=B,N[25]=v,N[26]=S):S=N[26],N[27]!==R||N[28]!==V||N[29]!==O?(w=null!=R&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{position:"absolute",top:R.yCoord,left:R.xCoord,width:R.xSize,height:R.ySize,pointerEvents:"none",background:"rgba(255, 255, 255, 0.8)"}}),(0,r.jsxs)("div",{className:"px-2 py-1 fs-8",style:{position:"absolute",top:R.yCoord+5,...R.xCoord>2*O/3?{right:O-R.xCoord+10}:{left:R.xCoord+10},backdropFilter:"blur(8px)",backgroundColor:"rgba(#1A1D23 0.75)",border:"1px solid #5F6776",borderRadius:2,pointerEvents:"none"},children:[(0,r.jsx)(h.E,{size:"10px",pt:"4px",children:"Click & Drag to Select Data"}),(0,r.jsx)(b.c,{my:"xs"}),(0,r.jsx)("div",{children:(0,r.jsx)(E.H,{value:R.xVal})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Y Value:"})," ",V(R.yVal)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:"Count Value:"})," ",new Intl.NumberFormat("en-US",{notation:"standard",compactDisplay:"short"}).format(R.countVal)]})]})]}),N[27]=R,N[28]=V,N[29]=O,N[30]=w):w=N[30],N[31]!==F||N[32]!==z||N[33]!==L?(_=null!=L&&null!=z&&(0,r.jsx)("div",{className:"px-2 py-1 fs-8",style:{backdropFilter:"blur(4px)",backgroundColor:"rgba(#1A1D23 0.4)",border:"1px solid #5F6776",borderRadius:2,position:"absolute",bottom:F-L?.top+4,left:L?.left},onClick:e=>{e.stopPropagation(),z?.(L.xMin/1e3,L.xMax/1e3,L.yMin,L.yMax)},role:"button",children:"Filter by Selection"}),N[31]=F,N[32]=z,N[33]=L,N[34]=_):_=N[34],N[35]!==P||N[36]!==g||N[37]!==S||N[38]!==w||N[39]!==_?(k=(0,r.jsxs)("div",{ref:P,style:p,onClick:g,onMouseLeave:f,children:[S,w,_]}),N[35]=P,N[36]=g,N[37]=S,N[38]=w,N[39]=_,N[40]=k):k=N[40],k}function M(e){return`${new Date(e).toLocaleString()}`}},2326:e=>{e.exports={wrapper:"PlaybarSlider_wrapper__WAjbf",markers:"PlaybarSlider_markers__X51XN",markerDot:"PlaybarSlider_markerDot__X23nO"}},12869:(e,t,s)=>{"use strict";s.d(t,{A8:()=>g,C5:()=>b,J_:()=>f,cv:()=>p,gK:()=>m,lT:()=>u,mo:()=>y,nq:()=>x,vX:()=>v,yN:()=>h});var r=s(43465),n=s(49730),a=s(67012),l=s(85508),i=s(71434),o=s.n(i),c=s(76089),d=s(82641);function u(e){return"1m"===e?c.Z7.OneMinute:"5m"===e?c.Z7.FiveMinute:"15m"===e?c.Z7.FifteenMinute:"30m"===e?c.Z7.ThirtyMinute:"1h"===e?c.Z7.OneHour:"6h"===e?c.Z7.SixHour:"12h"===e?c.Z7.TwelveHour:c.Z7.OneDay}function m(e){let t=new Date;return"1m"===e?[(0,r.A)(t,{minutes:15}),t]:"5m"===e?[(0,r.A)(t,{hours:1}),t]:"15m"===e?[(0,r.A)(t,{hours:4}),t]:"30m"===e?[(0,r.A)(t,{hours:8}),t]:"1h"===e?[(0,r.A)(t,{hours:16}),t]:"6h"===e?[(0,r.A)(t,{days:4}),t]:"12h"===e||"1d"===e?[(0,r.A)(t,{days:7}),t]:[t,t]}function h(e,t){let[s,i]=e;return"1m"===t&&15>(0,n.A)(i,s)?[(0,r.A)(i,{minutes:15}),i]:"5m"===t&&1>(0,a.A)(i,s)?[(0,r.A)(i,{hours:1}),i]:"15m"===t&&4>(0,a.A)(i,s)?[(0,r.A)(i,{hours:4}),i]:"30m"===t&&8>(0,a.A)(i,s)?[(0,r.A)(i,{hours:8}),i]:"1h"===t&&16>(0,a.A)(i,s)?[(0,r.A)(i,{hours:16}),i]:"6h"===t&&4>(0,l.A)(i,s)?[(0,r.A)(i,{days:4}),i]:"12h"===t&&7>(0,l.A)(i,s)||"1d"===t&&7>(0,l.A)(i,s)?[(0,r.A)(i,{days:7}),i]:e}let x={above:"At least (≥)",below:"Below (<)"},p={above:"is at least (≥)",below:"falls below (<)"},g={"1m":"1 minute","5m":"5 minute","15m":"15 minute","30m":"30 minute","1h":"1 hour","6h":"6 hour","12h":"12 hour","1d":"1 day"},f=o().pick(g,["5m","15m","30m","1h","6h","12h","1d"]),y={webhook:"Webhook"},b={threshold:1,thresholdType:d.qQ.ABOVE,interval:"5m",channel:{type:"webhook",webhookId:""}};function v(e){return!!e&&new Date>new Date(e.until)}},17513:(e,t,s)=>{"use strict";s.d(t,{WD:()=>m,dG:()=>u,w7:()=>h,cm:()=>x});var r=s(6029);s(55729);var n=s(82641),a=s(51058),l=s(56795),i=s(75155);function o(e){let t,s,n,a,l=(0,i.c)(6),{style:o,width:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("title",{children:"Incident.io"}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)("g",{clipPath:"url(#clip0_1361_12546)",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.7336 139.642V163C20.7585 156.323 0 131.711 0 102.372C0 85.4557 7.15792 72.0354 18.1053 58.8703C27.1831 47.9534 49.5985 19.0426 56.6543 3.08954C58.3673 -0.783473 62.7348 -0.633805 64.6182 1.44721C70.6432 8.10421 78.0694 22.6432 80.4983 39.135C80.9932 42.4953 81.1969 45.2388 81.3587 47.4184C81.706 52.0954 81.8604 54.1748 84.2854 54.1748C88.0955 54.1748 90.588 48.3977 91.1358 42.4345C91.4869 38.6136 95.2774 37.3346 97.8914 38.6136C110.463 44.7644 123.292 74.0426 126.393 88.4102C127.366 92.9158 128 97.5719 128 102.372C128 131.646 107.335 156.214 79.4537 162.955V139.642H48.7336ZM64.0002 130.333C73.8316 130.333 81.8016 122.789 81.8016 113.483C81.8016 98.6407 70.8577 88.0345 65.4048 84.8105C65.0364 84.5928 64.8523 84.4839 64.3512 84.4974C63.9843 84.5073 63.4429 84.7369 63.181 84.9935C62.8232 85.3441 62.7283 85.743 62.5387 86.5409C61.5721 90.6065 58.5292 93.5054 55.327 96.556C50.9141 100.76 46.1988 105.252 46.1988 113.483C46.1988 122.789 54.1688 130.333 64.0002 130.333Z",fill:"currentColor"})}),l[1]=s):s=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_1361_12546",children:(0,r.jsx)("rect",{width:"128",height:"163",fill:"white"})})}),l[2]=n):n=l[2],l[3]!==o||l[4]!==c?(a=(0,r.jsxs)("svg",{width:c,height:c,viewBox:"0 0 128 163",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid",style:o,children:[t,s,n]}),l[3]=o,l[4]=c,l[5]=a):a=l[5],a}let c={[n.x.Slack]:{name:"Slack",icon:(0,r.jsx)(a.A,{size:16}),order:1},[n.x.IncidentIO]:{name:"incident.io",icon:(0,r.jsx)(o,{width:16}),order:4},[n.x.Generic]:{name:"Generic",icon:(0,r.jsx)(l.A,{size:16}),order:5}},d={[n.x.Generic]:(0,r.jsx)(l.A,{size:16}),[n.x.Slack]:(0,r.jsx)(a.A,{size:16}),[n.x.IncidentIO]:(0,r.jsx)(o,{width:16})},u=e=>{if(e)return c[e]},m=e=>e&&d[e]||d[n.x.Generic],h=e=>{let t=u(e);return t?.name||e||"Unknown"},x=e=>Object.entries(e.reduce((e,t)=>{let s=t.service;return e[s]||(e[s]=[]),e[s].push(t),e},{})).sort(([e],[t])=>(c[e]?.order||999)-(c[t]?.order||999))},17978:(e,t,s)=>{"use strict";s.d(t,{I:()=>a,s:()=>n});var r=s(41038);let n=(0,r.Cp)({parse:e=>e.replace(/%0A/g,"\n"),serialize:e=>e.replace(/\n/g,"%0A")}),a=(0,r.Cp)({parse:e=>{if(!e)return null;let t=e.split(" "),s=t.pop();return{id:t.join(" "),desc:"DESC"===s}},serialize:e=>e?`${e.id} ${e.desc?"DESC":"ASC"}`:""})},18006:(e,t,s)=>{"use strict";s.d(t,{N4:()=>a,OH:()=>l,z4:()=>n});var r=s(37901);function n(e=[]){return e.map(({sqlExpression:e,alias:t})=>({valueExpression:e,alias:t||e}))}function a(e,t=[],s,n){let l=new Map,i=new Map,o=new Map,c=(0,r.bn)(n);try{for(let e of s)for(let{sqlExpression:s,luceneExpression:r,alias:n}of t){let t=n||s,a=c.includes(s.split(".")[0])?`toString(${s})`:s;i.set(t,a),r&&o.set(t,r);let d=e[t];d&&"string"==typeof d&&(l.has(t)||l.set(t,new Set),l.get(t).add(d))}}catch(e){console.error("Error extracting attributes from data",e)}return Array.from(l.entries()).flatMap(([t,s])=>[...s].map(s=>({displayedKey:t,value:s,sql:i.get(t),lucene:o.get(t),source:e})))}function l(e){try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}},20699:e=>{e.exports={timelineRow:"TimelineChart_timelineRow__qebNk",timelineRowActive:"TimelineChart_timelineRowActive__V6ZZf",labelContainer:"TimelineChart_labelContainer__6r6Eb"}},24885:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(55729);let n=function(e,t="right"){let[s,n]=(0,r.useState)(e),a=(0,r.useRef)(0),l=(0,r.useRef)(0),i="top"===t||"bottom"===t,o=i?"clientY":"clientX",c="right"===t||"top"===t?-1:1,d=(0,r.useCallback)(e=>{let t=i?window.innerHeight:window.innerWidth,s=e[o]-a.current,r=i?window.innerHeight:document.body.offsetWidth;n(Math.min(Math.max(10,l.current+s/t*100*c),(r-25)/t*100))},[i,o,c]),u=(0,r.useCallback)(()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d]),m=(0,r.useCallback)(e=>{e.preventDefault(),a.current=e[o],l.current=s,document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)},[o,s,d,u]);return(0,r.useEffect)(()=>()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d,u]),{size:s,startResize:m}}},25156:()=>{},26355:(e,t,s)=>{"use strict";s.d(t,{A:()=>M});var r=s(6029),n=s(75155),a=s(55729),l=s(75828),i=s.n(l),o=s(70921),c=s(67549),d=s(40399),u=s(91544),m=s.n(u),h=s(59513),x=s.n(h),p=s(77494),g=s.n(p),f=s(97554),y=s.n(f),b=s(64022),v=s.n(b),j=s(84450),S=s.n(j),w=s(22273),_=s(33958),E=s(88302),C=s(74805),k=s(65723),N=s.n(k);let A=(0,o.eU)({normallyExpanded:!1}),T=a.memo(a.forwardRef((e,t)=>{let s=(0,n.c)(19),{value:a}=e;if(g()(a)){let e;return s[0]!==t?(e=(0,r.jsx)("span",{ref:t,className:N().null,children:"null"}),s[0]=t,s[1]=e):e=s[1],e}if(S()(a)){let e;return s[2]!==t||s[3]!==a?(e=(0,r.jsx)("span",{ref:t,className:N().string,children:a}),s[2]=t,s[3]=a,s[4]=e):e=s[4],e}if(y()(a)){let e;return s[5]!==t||s[6]!==a?(e=(0,r.jsx)("span",{ref:t,className:N().number,children:a}),s[5]=t,s[6]=a,s[7]=e):e=s[7],e}if(x()(a)){let e,n=a?"true":"false";return s[8]!==t||s[9]!==n?(e=(0,r.jsx)("span",{ref:t,className:N().boolean,children:n}),s[8]=t,s[9]=n,s[10]=e):e=s[10],e}if(v()(a)){let e,n;return s[11]!==a?(e=Object.keys(a),s[11]=a,s[12]=e):e=s[12],s[13]!==t||s[14]!==e.length?(n=(0,r.jsxs)("span",{ref:t,className:N().object,children:["{}"," ",e.length," keys"]}),s[13]=t,s[14]=e.length,s[15]=n):n=s[15],n}if(m()(a)){let e;return s[16]!==t||s[17]!==a.length?(e=(0,r.jsxs)("span",{ref:t,className:N().array,children:["[]"," ",a.length," items"]}),s[16]=t,s[17]=a.length,s[18]=e):e=s[18],e}return null})),$=a.memo(e=>{let t,s,a,l=(0,n.c)(12),{keyName:i,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}=e,{getLineActions:h}=(0,c.md)(A);e:{let e;if(h){let e;l[0]!==h||l[1]!==u||l[2]!==i||l[3]!==o||l[4]!==m||l[5]!==d?(e=h({key:i,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}),l[0]=h,l[1]=u,l[2]=i,l[3]=o,l[4]=m,l[5]=d,l[6]=e):e=l[6],t=e;break e}l[7]===Symbol.for("react.memo_cache_sentinel")?(e=[],l[7]=e):e=l[7],t=e}let x=t;return l[8]!==x?(s=x.map(R),l[8]=x,l[9]=s):s=l[9],l[10]!==s?(a=(0,r.jsx)("div",{className:N().lineMenu,children:s}),l[10]=s,l[11]=a):a=l[11],a}),z=a.memo(({keyName:e,keyPath:t,value:s,disableMenu:n,isInParsedJson:l=!1,parsedJsonRootPath:o=[]})=>{let{normallyExpanded:d}=(0,c.md)(A),{ref:u,hovered:h}=(0,w.M)(),x=a.useMemo(()=>{if(!S()(s))return!1;try{if(s.startsWith("{")&&s.endsWith("}")||s.startsWith("[")&&s.endsWith("]"))return!!JSON.parse(s)}catch(e){return!1}},[s]),[p,g]=a.useState(d&&!x);a.useEffect(()=>{g(d&&!x)},[x,d]);let f=a.useMemo(()=>v()(s)&&Object.keys(s).length>0||m()(s)&&s.length>0||x,[x,s]),y=a.useCallback(()=>{f&&g(e=>!e)},[f]),b=a.useMemo(()=>{if(x)try{return JSON.parse(s)}catch(e){return null}return s},[x,s]),j=t.length,k=a.useMemo(()=>[...t,e],[e,t]),z=l||x,I=a.useMemo(()=>x?k:o,[x,k,o]),M=a.useRef(null),[R,D]=a.useState(!1),P=a.useCallback(()=>{D(!0)},[]),O=a.useCallback(()=>{D(!1)},[]);return a.useEffect(()=>{let e=M.current;return e?.addEventListener("selectstart",P),e?.addEventListener("mouseup",O),()=>{e?.removeEventListener("selectstart",P),e?.removeEventListener("mouseup",O)}},[O,P]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{ref:u,onClick:y,className:i()(N().line,{[N().nestedLine]:j>0,[N().expanded]:p,[N().expandable]:f}),style:{marginLeft:16*j},children:[(0,r.jsx)("div",{className:N().keyContainer,children:(0,r.jsxs)("div",{className:N().key,children:[f&&(p?(0,r.jsx)(_.A,{size:10}):(0,r.jsx)(E.A,{size:10})),e,(0,r.jsx)("div",{className:N().hoverContent,children:(0,r.jsx)(C.A,{size:14})})]})}),(0,r.jsx)("div",{className:N().valueContainer,children:x?p?(0,r.jsxs)("div",{className:N().object,children:["{}"," Parsed JSON"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T,{value:s,ref:M}),(0,r.jsx)("div",{className:N().jsonBtn,children:"Expand JSON"})]}):(0,r.jsx)(T,{value:s,ref:M})}),h&&!n&&!R&&(0,r.jsx)($,{keyName:e,keyPath:k,value:s,isInParsedJson:l,parsedJsonRootPath:o})]},e),p&&f&&(0,r.jsx)(L,{data:b,keyPath:k,disableMenu:n,isInParsedJson:z,parsedJsonRootPath:I})]})});function L(e){let t,s,l,o,c,d,u,m=(0,n.c)(22),{data:h,keyPath:x,disableMenu:p,isInParsedJson:g,parsedJsonRootPath:f}=e;m[0]!==x?(t=void 0===x?[]:x,m[0]=x,m[1]=t):t=m[1];let y=t,b=void 0!==p&&p,v=void 0!==g&&g;m[2]!==f?(s=void 0===f?[]:f,m[2]=f,m[3]=s):s=m[3];let j=s,[S,w]=a.useState(!1);m[4]!==h?(l=Object.keys(h),m[4]=h,m[5]=l):l=m[5];let _=l.length;m[6]!==h||m[7]!==S?(o=S?Object.entries(h):Object.entries(h).slice(0,50),m[6]=h,m[7]=S,m[8]=o):o=m[8];let E=o,C=y?.length||0;return m[9]!==b||m[10]!==v||m[11]!==y||m[12]!==j||m[13]!==E?(c=E.map(e=>{let[t,s]=e;return(0,r.jsx)(z,{keyName:t,value:s,keyPath:y,disableMenu:b,isInParsedJson:v,parsedJsonRootPath:j},t)}),m[9]=b,m[10]=v,m[11]=y,m[12]=j,m[13]=E,m[14]=c):c=m[14],m[15]!==S||m[16]!==C||m[17]!==_?(d=_>50&&!S&&(0,r.jsx)("div",{className:i()(N().line,N().nestedLine,N().expandable),style:{marginLeft:16*C},onClick:()=>w(!0),children:(0,r.jsx)("div",{className:N().keyContainer,children:(0,r.jsxs)("div",{className:N().jsonBtn,children:["Expand ",_-50," more properties"]})})}),m[15]=S,m[16]=C,m[17]=_,m[18]=d):d=m[18],m[19]!==d||m[20]!==c?(u=(0,r.jsxs)(r.Fragment,{children:[c,d]}),m[19]=d,m[20]=c,m[21]=u):u=m[21],u}let I=e=>{let t,s,r,l=(0,n.c)(6),{children:i,initialValues:o}=e;l[0]!==o?(t=[[A,o]],l[0]=o,l[1]=t):t=l[1],(0,d.RH)(t);let u=(0,c.Xr)(A);return l[2]!==o||l[3]!==u?(s=()=>{u(o)},r=[o,u],l[2]=o,l[3]=u,l[4]=s,l[5]=r):(s=l[4],r=l[5]),a.useEffect(s,r),i},M=e=>{let t,s,a,l,o,d,u=(0,n.c)(17),{data:m,normallyExpanded:h,tabulate:x,lineWrap:p,getLineActions:g}=e,f=void 0!==h&&h,y=void 0!==x&&x;u[0]!==m?(t=Object.keys(m),u[0]=m,u[1]=t):t=u[1];let b=0===t.length;return u[2]!==g||u[3]!==f?(s={normallyExpanded:f,getLineActions:g},u[2]=g,u[3]=f,u[4]=s):s=u[4],u[5]!==p||u[6]!==y?(a=i()(N().container,{[N().withTabulate]:y,[N().withLineWrap]:p}),u[5]=p,u[6]=y,u[7]=a):a=u[7],u[8]!==m||u[9]!==b?(l=b?(0,r.jsx)("div",{children:"Empty"}):(0,r.jsx)(L,{data:m}),u[8]=m,u[9]=b,u[10]=l):l=u[10],u[11]!==a||u[12]!==l?(o=(0,r.jsx)("div",{className:a,children:l}),u[11]=a,u[12]=l,u[13]=o):o=u[13],u[14]!==s||u[15]!==o?(d=(0,r.jsx)(c.Kq,{children:(0,r.jsx)(I,{initialValues:s,children:o})}),u[14]=s,u[15]=o,u[16]=d):d=u[16],d};function R(e){return(0,r.jsx)("button",{title:e.title,className:N().lineMenuBtn,onClick:t=>{e.onClick(),t.stopPropagation()},children:e.label},e.key)}},26674:(e,t,s)=>{"use strict";s.d(t,{S:()=>n,Y:()=>a});var r=s(55729);let n=(0,r.createContext)(0);function a(){return(0,r.useContext)(n)}},26814:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(6029),n=s(75155),a=s(1909);function l(e){let t,s=(0,n.c)(2),{field:l}=(0,a.as)(e),i="sql"===l.value?e.sqlInput:e.luceneInput;return s[0]!==i?(t=(0,r.jsx)(r.Fragment,{children:i}),s[0]=i,s[1]=t):t=s[1],t}},26837:(e,t,s)=>{"use strict";s.d(t,{W:()=>ew});var r=s(6029),n=s(55729),a=s(75155),l=s(84450),i=s.n(l),o=s(16943),c=s.n(o),d=s(82641),u=s(60481),m=s(45005),h=s(43517),x=s(78253),p=s(81973),g=s(18006),f=s(37901),y=s(65081),b=s(50374),v=s(64441),j=s(94937),S=s(75828),w=s.n(S),_=s(7913),E=s(63085),C=s(25062),k=s(94720),N=s(3635),A=s(70114),T=s(23474),$=s(54134),z=s(58333),L=s(7565),I=s(94364),M=s(72075),R=s(66773),D=s.n(R);let P=e=>{let t,s,n,l,i,o,c,d=(0,a.c)(19),{filename:u,function:m,lineno:h,colno:x,isLoading:p}=e,g=p?.8:1,f=p?"blur(1px)":"none";return d[0]!==g||d[1]!==f?(t={opacity:g,filter:f},d[0]=g,d[1]=f,d[2]=t):t=d[2],d[3]!==x||d[4]!==h?(s=(0,r.jsxs)("span",{children:[":",h,":",x]}),d[3]=x,d[4]=h,d[5]=s):s=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("span",{children:" in "}),d[6]=n):n=d[6],d[7]!==m?(l=m&&(0,r.jsx)("span",{style:{background:"#ffffff10",padding:"0 4px",borderRadius:4},children:m}),d[7]=m,d[8]=l):l=d[8],d[9]!==u||d[10]!==t||d[11]!==s||d[12]!==l?(i=(0,r.jsxs)("div",{className:" fs-8",style:t,children:[u,s,n,l]}),d[9]=u,d[10]=t,d[11]=s,d[12]=l,d[13]=i):i=d[13],d[14]!==p?(o=p&&(0,r.jsx)(k.a,{size:"xs",color:"gray"}),d[14]=p,d[15]=o):o=d[15],d[16]!==i||d[17]!==o?(c=(0,r.jsxs)(N.Y,{gap:"xs",display:"inline-flex",children:[i,o]}),d[16]=i,d[17]=o,d[18]=c):c=d[18],c},O=e=>{let t,s,l,i,o,c,d=(0,a.c)(15),{title:u,children:m,initiallyCollapsed:h}=e,[x,p]=n.useState(h??!1);return d[0]!==x?(t=()=>p(!x),s=x?(0,r.jsx)(A.A,{size:14,className:"me-2"}):(0,r.jsx)(T.A,{size:14,className:"me-2"}),d[0]=x,d[1]=t,d[2]=s):(t=d[1],s=d[2]),d[3]!==u?(l=(0,r.jsx)("div",{className:"fs-7",children:u}),d[3]=u,d[4]=l):l=d[4],d[5]!==t||d[6]!==s||d[7]!==l?(i=(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,l]}),d[5]=t,d[6]=s,d[7]=l,d[8]=i):i=d[8],d[9]!==m||d[10]!==x?(o=x?null:(0,r.jsx)("div",{className:"mb-4",children:m}),d[9]=m,d[10]=x,d[11]=o):o=d[11],d[12]!==i||d[13]!==o?(c=(0,r.jsxs)("div",{className:"my-3",children:[i,o]}),d[12]=i,d[13]=o,d[14]=c):c=d[14],c},F=e=>{let t,s,n=(0,a.c)(5),{children:l,title:i}=e;return n[0]!==i?(t=i&&(0,r.jsx)("div",{className:D().panelSectionWrapperTitle,children:i}),n[0]=i,n[1]=t):t=n[1],n[2]!==l||n[3]!==t?(s=(0,r.jsxs)("div",{className:D().panelSectionWrapper,children:[t,l]}),n[2]=l,n[3]=t,n[4]=s):s=n[4],s},V=e=>{let t,s,n,l,i=(0,a.c)(8),{label:o,value:c}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={paddingRight:20,marginRight:12,borderRight:"1px solid #ffffff20"},i[0]=t):t=i[0],i[1]!==o?(s=(0,r.jsx)("div",{children:o}),i[1]=o,i[2]=s):s=i[2],i[3]!==c?(n=(0,r.jsx)("div",{className:"fs-7",children:c}),i[3]=c,i[4]=n):n=i[4],i[5]!==s||i[6]!==n?(l=(0,r.jsxs)("div",{style:t,children:[s,n]}),i[5]=s,i[6]=n,i[7]=l):l=i[7],l},B=e=>{let t,s=(0,a.c)(3),{onClick:n,isOpen:l}=e,i=l?"chevron-up":"chevron-down";return s[0]!==n||s[1]!==i?(t=(0,r.jsx)(M.L,{label:"",biIcon:i,onClick:n}),s[0]=n,s[1]=i,s[2]=t):t=s[2],t},W=[{accessorKey:"filename",cell:e=>{let t,s,l,i,o,c,d,u,m,h=(0,a.c)(31),{row:x,table:p}=e,g=p.options.meta,[f,y]=n.useState(x.index===g.firstFrameIndex);h[0]!==f?(t=()=>{y(!f)},h[0]=f,h[1]=t):t=h[1];let b=t,v=x.original,{isLoading:j,enrichedFrame:S}=(0,I.f)(v),_=S??v,C=!!_.context_line;return h[2]!==C?(s=w()("w-100 py-2 px-4 d-flex justify-content-between align-items-center",{[D().stacktraceRowInteractive]:C}),h[2]=C,h[3]=s):s=h[3],h[4]!==_.in_app?(l=!_.in_app&&(0,r.jsx)(E.m,{label:"in_app: false",position:"top",withArrow:!0,color:"gray",children:(0,r.jsx)($.A,{size:14,className:"me-2","aria-label":"in_app: false"})}),h[4]=_.in_app,h[5]=l):l=h[5],h[6]!==_||h[7]!==j?(i=_&&(0,r.jsx)(P,{colno:_.colno,filename:_.filename,lineno:_.lineno,function:_.function,isLoading:j}),h[6]=_,h[7]=j,h[8]=i):i=h[8],h[9]!==l||h[10]!==i?(o=(0,r.jsxs)("div",{children:[l,i]}),h[9]=l,h[10]=i,h[11]=o):o=h[11],h[12]!==b||h[13]!==C||h[14]!==f?(c=C&&(0,r.jsx)(B,{onClick:b,isOpen:f}),h[12]=b,h[13]=C,h[14]=f,h[15]=c):c=h[15],h[16]!==b||h[17]!==s||h[18]!==o||h[19]!==c?(d=(0,r.jsxs)("div",{className:s,onClick:b,children:[o,c]}),h[16]=b,h[17]=s,h[18]=o,h[19]=c,h[20]=d):d=h[20],h[21]!==_.context_line||h[22]!==_.lineno||h[23]!==_.post_context||h[24]!==_.pre_context||h[25]!==C||h[26]!==f?(u=f&&C&&(0,r.jsxs)("pre",{className:D().lineContext,children:[_.pre_context?.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:D().lineContextLineNo,children:(_.lineno??0)-(_.pre_context?.length??0)+t}),e]},e+t)),_.context_line&&(0,r.jsxs)("div",{className:D().lineContextCurrentLine,children:[(0,r.jsx)("span",{className:D().lineContextLineNo,children:_.lineno}),_.context_line]}),_.post_context?.map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:D().lineContextLineNo,children:_.lineno+t+1}),e]},e+t))]}),h[21]=_.context_line,h[22]=_.lineno,h[23]=_.post_context,h[24]=_.pre_context,h[25]=C,h[26]=f,h[27]=u):u=h[27],h[28]!==d||h[29]!==u?(m=(0,r.jsxs)(r.Fragment,{children:[d,u]}),h[28]=d,h[29]=u,h[30]=m):m=h[30],m}}],H=e=>{let t,s=(0,a.c)(2),{url:n}=e;return s[0]!==n?(t=(0,r.jsx)("span",{title:n,children:n}),s[0]=n,s[1]=t):t=s[1],t},q=n.memo(e=>{let t,s=(0,a.c)(3),{status:n}=e;if(!n)return null;let l=n>=500?"text-danger bg-danger":n>=400?"text-warning bg-warning":"text-success bg-success",i=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${l}`;return s[0]!==n||s[1]!==i?(t=(0,r.jsx)("span",{className:i,children:n}),s[0]=n,s[1]=i,s[2]=t):t=s[2],t}),X=n.memo(e=>{let t,s=(0,a.c)(3),{level:n}=e;if(!n)return null;let l=n.includes("error")?"text-danger bg-danger":n.includes("warn")||n.includes("warning")?"text-warning bg-warning":"bg-muted",i=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${l}`;return s[0]!==n||s[1]!==i?(t=(0,r.jsx)("span",{className:i,children:n}),s[0]=n,s[1]=i,s[2]=t):t=s[2],t}),Y=[{accessorKey:"category",header:"Category",size:180,cell:({row:e})=>(0,r.jsxs)("span",{className:"d-flex align-items-center gap-2",children:[e.original.category,"console"===e.original.category&&(0,r.jsx)(X,{level:e.original.level}),"fetch"===e.original.category||"xhr"===e.original.category?(0,r.jsx)(q,{status:e.original.data?.status_code}):null]})},{accessorKey:"message",header:"Data",size:99999,cell:({row:e})=>{if(e.original.data&&("fetch"===e.original.category||"xhr"===e.original.category)){let{method:t,url:s}=e.original.data;return(0,r.jsxs)("div",{className:"text-truncate",children:[(0,r.jsxs)("span",{children:[t," "]}),(0,r.jsx)("span",{title:s,children:(0,r.jsx)(H,{url:s})})]})}if("navigation"===e.original.category&&e.original.data){let{from:t,to:s}=e.original.data;return(0,r.jsxs)("div",{className:"text-truncate",children:[(0,r.jsx)("span",{title:t,children:(0,r.jsx)(H,{url:t})}),(0,r.jsx)("span",{children:" → "}),(0,r.jsx)("span",{title:s,children:(0,r.jsx)(H,{url:s})})]})}if("console"===e.original.category){let{message:t}=e.original;return(0,r.jsx)("pre",{className:"mb-0 text-truncate fs-8",title:t,children:t})}return e.original.message?(0,r.jsx)("div",{className:"text-truncate",children:e.original.message}):(0,r.jsx)("span",{className:"text-muted",children:"Empty"})}},{header:"Timestamp",size:220,cell:({row:e})=>(0,r.jsx)("span",{className:"text-muted",children:(0,r.jsx)(L.H,{value:1e3*e.original.timestamp,format:"withMs"})})}],J=e=>{let t,s,r,l=(0,a.c)(11),{rows:i,maxRows:o}=e,c=void 0===o?5:o,[d,u]=n.useState(!1);l[0]!==d||l[1]!==c||l[2]!==i?(t=d?i:i.slice(0,c),l[0]=d,l[1]=c,l[2]=i,l[3]=t):t=l[3];let m=t,h=i.length??0,x=h>c?h-c:null;l[4]!==d?(s=()=>{u(!d)},l[4]=d,l[5]=s):s=l[5];let p=s;return l[6]!==p||l[7]!==x||l[8]!==d||l[9]!==m?(r={visibleRows:m,hiddenRowsCount:x,handleToggleMoreRows:p,isExpanded:d},l[6]=p,l[7]=x,l[8]=d,l[9]=m,l[10]=r):r=l[10],r},K=e=>{let t,s,n,l,i,o,c,d,u,m,x,p,g,f,y=(0,a.c)(42),{logData:b,breadcrumbs:v,exceptionValues:j}=e,S=j[0];S?.stacktrace?.frames;e:{let e;if(!S?.stacktrace?.frames){let e;y[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],y[0]=e):e=y[0],t=e;break e}y[1]!==S?.stacktrace.frames?(e=S?.stacktrace.frames.slice().reverse(),y[1]=S?.stacktrace.frames,y[2]=e):e=y[2],t=e}let w=t;if(y[3]!==w){let e=w&&w.length?w.find(e=>e.in_app)??w.find(e=>!!e.function||!!e.filename)??w[0]:null;s=e?w.indexOf(e):-1,y[3]=w,y[4]=s}else s=y[4];let E=s;y[5]!==v||y[6]!==S||y[7]!==b?.timestamp?(n=()=>[...S&&v?[{category:"exception",timestamp:new Date(b?.timestamp??0).getTime()/1e3,message:`${S.type}: ${S.value} `}]:[],...v?.slice().reverse()??[]],y[5]=v,y[6]=S,y[7]=b?.timestamp,y[8]=n):n=y[8],b?.timestamp,y[9]!==n?(l=n(),y[9]=n,y[10]=l):l=y[10];let k=l,N=Math.max(5,E+1);y[11]!==w||y[12]!==N?(i={rows:w,maxRows:N},y[11]=w,y[12]=N,y[13]=i):i=y[13];let{handleToggleMoreRows:A,hiddenRowsCount:$,visibleRows:L,isExpanded:I}=J(i);y[14]!==k?(o={rows:k},y[14]=k,y[15]=o):o=y[15];let{handleToggleMoreRows:R,hiddenRowsCount:D,visibleRows:P,isExpanded:B}=J(o);return y[16]!==S?(c=S&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(h.E,{fw:"bold",component:"span",size:"sm",variant:"danger",children:[S.type,":"," "]}),(0,r.jsx)("span",{className:"text-muted",children:S.value})]}),S.mechanism&&(0,r.jsxs)("div",{className:"d-flex gap-2 flex-wrap pt-3",children:[(0,r.jsx)(V,{label:"mechanism",value:S.mechanism?.type}),(0,r.jsx)(V,{label:"handled",value:S.mechanism?.handled?(0,r.jsx)("span",{className:"text-success",children:"true"}):(0,r.jsx)("span",{className:"text-danger",children:"false"})}),S.mechanism?.data?.function?(0,r.jsx)(V,{label:"function",value:S.mechanism.data.function}):null,S.mechanism?.data?.handler?(0,r.jsx)(V,{label:"handler",value:S.mechanism.data.handler}):null,S.mechanism?.data?.target?(0,r.jsx)(V,{label:"target",value:S.mechanism.data.target}):null]})]}),y[16]=S,y[17]=c):c=y[17],y[18]!==E?(d={firstFrameIndex:E},y[18]=E,y[19]=d):d=y[19],y[20]!==L||y[21]!==d?(u=(0,r.jsx)(_.ErrorBoundary,{onError:G,fallbackRender:Z,children:(0,r.jsx)(M.X,{hideHeader:!0,columns:W,data:L,density:"zero",tableMeta:d})}),y[20]=L,y[21]=d,y[22]=u):u=y[22],y[23]!==j[0].stacktrace?(m="string"==typeof j[0].stacktrace&&(0,r.jsx)("pre",{className:"px-4",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:j[0].stacktrace}),y[23]=j[0].stacktrace,y[24]=m):m=y[24],y[25]!==A||y[26]!==I||y[27]!==$?(x=$?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:A,children:I?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.A,{size:14,className:"me-2"})," Hide stack trace"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",$," more frames"]})}):null,y[25]=A,y[26]=I,y[27]=$,y[28]=x):x=y[28],y[29]!==u||y[30]!==m||y[31]!==x||y[32]!==c?(p=(0,r.jsxs)(F,{title:c,children:[u,m,x]}),y[29]=u,y[30]=m,y[31]=x,y[32]=c,y[33]=p):p=y[33],y[34]!==B||y[35]!==D||y[36]!==P||y[37]!==R?(g=P.length>0&&(0,r.jsx)(O,{title:"Breadcrumbs",children:(0,r.jsxs)(F,{children:[(0,r.jsx)(M.X,{columns:Y,data:P,emptyMessage:"No breadcrumbs found"}),D?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:R,children:B?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.A,{size:14,className:"me-2"})," Hide breadcrumbs"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",D," more breadcrumbs"]})}):null]})}),y[34]=B,y[35]=D,y[36]=P,y[37]=R,y[38]=g):g=y[38],y[39]!==p||y[40]!==g?(f=(0,r.jsxs)("div",{children:[p,g]}),y[39]=p,y[40]=g,y[41]=f):f=y[41],f};function G(e){console.error(e)}function Z(){return(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering stacktrace"})}var U=s(65234),Q=s.n(U),ee=s(21510),et=s(60665),es=s(34027),er=s(26355),en=s(78694);let ea=function(e){let t="";return e&&(t=` ${({GET:"-X GET",POST:"-X POST",PUT:"-X PUT",PATCH:"-X PATCH",DELETE:"-X DELETE"})[e.toUpperCase()]}`)," \\\n"+t},el=function(e){let t="";return e&&e.map(([e,s])=>{t+=` \\
-H "${e}: ${s.replace(/(\\|")/g,"\\$1")}"`}),t},ei=function(e){let t="";return e&&(t+=` \\
-d "${JSON.stringify(e).replace(/(\\|")/g,"\\$1")}"`),t},eo=function(e){let t="";return e&&(t+=` \\
--data-raw ${/[\0-\x1F\x7F-\x9F!]|\'/.test(e)?"$'"+e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(e){let t=e.charCodeAt(0).toString(16);for(;t.length<4;)t="0"+t;return"\\u"+t})+"'":"'"+e+"'"}`),t},ec=function(e){let t="";return e&&Object.keys(e).forEach(s=>{let r=s.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`);if(e[s])"boolean"==typeof e[s]&&e[s]?t+=`--${r} `:"string"==typeof e[s]&&(t+=`--${r} ${e[s]} `);else throw Error(`Invalid Curl option ${s}`)}),t?` \\
${t}`:t},ed=function(e,t){let s="curl ";return s+=e.url,s+=ea(e.method),s+=el(e.headers),s+="string"==typeof e.body?eo(e.body):ei(e.body),(s+=ec(t)).trim()},eu={base00:"#00000000",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#8378FF",base0E:"#ae81ff",base0F:"#cc6633"},em=(e,t)=>Object.entries(c()(t,(t,s)=>s.startsWith(e))).flatMap(([t,s])=>{let r=s;try{"string"==typeof s&&(r=JSON.parse(s))}catch(e){}let n=t.replace(e,"").replace("_","-"),a=[[n,`${r}`]];if(Array.isArray(r))a=r.map(e=>[n,`${e}`]);else if("object"==typeof r&&Object.keys(r).length>0)try{a=[[n,`${JSON.stringify(r)}`]]}catch(e){console.error(e)}return a}),eh=({body:e,theme:t,emptyMessage:s,notCollectedMessage:a})=>{let l=n.useCallback(e=>(0,r.jsx)("pre",{className:"d-inline text-break",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e}),[]),i=n.useMemo(()=>{if("string"!=typeof e)return null;try{if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))return JSON.parse(e)}catch(e){return null}},[e]);return(0,r.jsx)(r.Fragment,{children:null!=e&&""!=e?(0,r.jsx)("pre",{className:"m-0 px-4 py-3",style:{wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:i?(0,r.jsx)(er.A,{data:i,normallyExpanded:!0}):"string"==typeof e?e:(0,r.jsx)(ee.d,{hideRoot:!0,invertTheme:!1,data:e,theme:t,valueRenderer:l})}):""===e?(0,r.jsx)("div",{className:"px-4 py-3",children:s}):(0,r.jsx)("div",{className:"px-4 py-3",children:a})})};function ex(e){let t,s,n,l,i,o,c,d,u,m,h,x,p,g,f,y=(0,a.c)(41),{eventAttributes:b}=e;y[0]!==b?(t=em("http.request.header.",b),y[0]=b,y[1]=t):t=y[1];let v=t;y[2]!==b?(s=em("http.response.header.",b),y[2]=b,y[3]=s):s=y[3];let j=s,S=b["http.url"],w=b["net.peer.ip"],_=b["http.status_code"],E=b["http.method"],k=b["http.request.body"],N=b["http.response.body"];y[4]!==E||y[5]!==k||y[6]!==v||y[7]!==S?(n=ed({method:E,headers:v,url:S,body:k}),y[4]=E,y[5]=k,y[6]=v,y[7]=S,y[8]=n):n=y[8];let A=n;return S||E||_?(y[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsxs)(C.$,{size:"xs",variant:"primary",children:[(0,r.jsx)(es.A,{size:14,className:"me-2"}),"Copy Request as Curl"]}),y[9]=l):l=y[9],y[10]!==A?(i=(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)(Q(),{text:A,onCopy:ep,children:l})}),y[10]=A,y[11]=i):i=y[11],y[12]!==S?(o=S&&{label:"URL",value:S},y[12]=S,y[13]=o):o=y[13],y[14]!==E?(c=E&&{label:"Method",value:E},y[14]=E,y[15]=c):c=y[15],y[16]!==w?(d=w&&{label:"Remote Address",value:w},y[16]=w,y[17]=d):d=y[17],y[18]!==b||y[19]!==_?(u=_&&{label:"Status",value:`${_} ${b["http.status_text"]??""}`,className:_>=500?"text-danger":_>=400?"text-warning":"text-success"},y[18]=b,y[19]=_,y[20]=u):u=y[20],y[21]!==o||y[22]!==c||y[23]!==d||y[24]!==u?(m=(0,r.jsx)(en.$K,{children:(0,r.jsx)(M.X,{borderless:!0,density:"compact",columns:en.Qx,data:[o,c,d,u].filter(Boolean),hideHeader:!0})}),y[21]=o,y[22]=c,y[23]=d,y[24]=u,y[25]=m):m=y[25],y[26]!==v?(h=v.length>0&&(0,r.jsx)(en.iV,{title:`Request Headers (${v.length})`,initiallyCollapsed:!0,children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(M.X,{borderless:!0,hideHeader:!0,density:"compact",columns:en.hF,data:v,emptyMessage:"No request headers collected"})})}),y[26]=v,y[27]=h):h=y[27],y[28]!==k?(x=null!=k&&(0,r.jsx)(en.iV,{title:"Request Body",children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(eh,{body:k,theme:eu,emptyMessage:"Empty request",notCollectedMessage:"No request body collected"})})}),y[28]=k,y[29]=x):x=y[29],y[30]!==j?(p=j.length>0&&(0,r.jsx)(en.iV,{title:`Response Headers (${j.length})`,initiallyCollapsed:!0,children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(M.X,{borderless:!0,hideHeader:!0,density:"compact",columns:en.hF,data:j,emptyMessage:"No response headers collected"})})}),y[30]=j,y[31]=p):p=y[31],y[32]!==N?(g=null!=N&&(0,r.jsx)(en.iV,{title:"Response Body",children:(0,r.jsx)(en.$K,{children:(0,r.jsx)(eh,{body:N,theme:eu,emptyMessage:"Empty response",notCollectedMessage:"No response body collected"})})}),y[32]=N,y[33]=g):g=y[33],y[34]!==m||y[35]!==h||y[36]!==x||y[37]!==p||y[38]!==g||y[39]!==i?(f=(0,r.jsxs)("div",{children:[i,m,h,x,p,g]}),y[34]=m,y[35]=h,y[36]=x,y[37]=p,y[38]=g,y[39]=i,y[40]=f):f=y[40],f):null}function ep(){et.$e.show({color:"green",message:"Curl command copied to clipboard"})}let eg=[{accessorKey:"Timestamp",header:"Timestamp",size:120,cell:({row:e})=>(0,r.jsx)("span",{className:"text-muted",title:e.original.Timestamp,children:(0,r.jsx)(L.H,{value:new Date(e.original.Timestamp).getTime(),format:"withMs"})})},{accessorKey:"Name",header:"Name",size:180,cell:({row:e})=>(0,r.jsx)("span",{className:"d-flex align-items-center gap-2",children:e.original.Name})},{accessorKey:"Attributes",header:"Attributes",size:400,cell:({row:e})=>{let t=e.original.Attributes;return t&&Object.keys(t).length>0?(0,r.jsx)(u.a,{children:(0,r.jsx)(y.z,{data:t})}):(0,r.jsx)("span",{className:"text-muted",children:"Empty"})}}],ef=e=>{let t,s,n,l,i,o=(0,a.c)(15),{spanEvents:c}=e;e:{let e;if(!c||0===c.length){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}o[1]!==c?(e=[...c.filter(ey)].sort(eb),o[1]=c,o[2]=e):e=o[2],t=e}let d=t;o[3]!==d?(s={rows:d,maxRows:5},o[3]=d,o[4]=s):s=o[4];let{handleToggleMoreRows:u,hiddenRowsCount:m,visibleRows:h,isExpanded:x}=J(s);if(!d||0===d.length){let e;return o[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:"p-3 text-muted fs-7",children:"No span events available for this trace"}),o[5]=e):e=o[5],e}return o[6]!==h?(n=(0,r.jsx)(_.ErrorBoundary,{onError:ev,fallbackRender:ej,children:(0,r.jsx)(M.X,{columns:eg,data:h,emptyMessage:"No span events found"})}),o[6]=h,o[7]=n):n=o[7],o[8]!==u||o[9]!==m||o[10]!==x?(l=m?(0,r.jsx)(C.$,{variant:"secondary",size:"xs",my:"sm",onClick:u,children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.A,{size:14,className:"me-2"})," Hide events"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.A,{size:14,className:"me-2"}),"Show ",m," more events"]})}):null,o[8]=u,o[9]=m,o[10]=x,o[11]=l):l=o[11],o[12]!==n||o[13]!==l?(i=(0,r.jsx)("div",{children:(0,r.jsxs)(F,{children:[n,l]})}),o[12]=n,o[13]=l,o[14]=i):i=o[14],i};function ey(e){return"string"==typeof e.Timestamp&&"string"==typeof e.Name&&void 0!==e.Attributes}function eb(e,t){let s=new Date(e.Timestamp).getTime();return new Date(t.Timestamp).getTime()-s}function ev(e){console.error(e)}function ej(){return(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering span events"})}let eS={};function ew(e){let t,s,l,o,S,w,_,E,C,k,N,A,T,$,z,L,I,M,R,D,P,O,F,V,B,W,H,q,X,Y,J=(0,a.c)(96),{source:G,rowId:Z,aliasWith:U,hideHeader:Q,"data-testid":ee}=e,et=void 0!==Q&&Q;J[0]!==U||J[1]!==Z||J[2]!==G?(t={source:G,rowId:Z,aliasWith:U},J[0]=U,J[1]=Z,J[2]=G,J[3]=t):t=J[3];let{data:es}=(0,f.k1)(t),{onPropertyAddClick:er,generateSearchUrl:en}=(0,n.useContext)(b.D);J[4]!==G.highlightedRowAttributeExpressions||J[5]!==G.kind?(s=G.kind===d.GL.Trace||G.kind===d.GL.Log?G.highlightedRowAttributeExpressions??[]:[],J[4]=G.highlightedRowAttributeExpressions,J[5]=G.kind,J[6]=s):s=J[6];let ea=s;J[7]!==ea||J[8]!==es||J[9]!==G?(l=es?(0,g.N4)(G,ea,es.data||[],es.meta||[]):[],J[7]=ea,J[8]=es,J[9]=G,J[10]=l):l=J[10];let el=l,ei=es?.meta;J[11]!==ei?(o=(0,f.bn)(ei),J[11]=ei,J[12]=o):o=J[12];let eo=o,ec=G.eventAttributesExpression;e:{let e,t;J[13]!==es?.data?.[0]?(e=es?.data?.[0]??{},J[13]=es?.data?.[0],J[14]=e):e=J[14],J[15]!==e?(t={...e},J[15]=e,J[16]=t):t=J[16];let s=t;if(!s){S=null;break e}S=s}let ed=S;J[17]===Symbol.for("react.memo_cache_sentinel")?(w=["ServiceName","SpanName","Duration","SeverityText","StatusCode","StatusMessage","SpanKind","TraceId","SpanId","ParentSpanId","ScopeName","ScopeVersion"],J[17]=w):w=J[17];let eu=w;J[18]===Symbol.for("react.memo_cache_sentinel")?(_=(e,t)=>""!==e&&!!eu.includes(t),J[18]=_):_=J[18],J[19]!==ed?(E=c()(ed,_),J[19]=ed,J[20]=E):E=J[20];let em=E,eh=ed?.__hdx_resource_attributes??eS,ep=ed?.__hdx_event_attributes??eS;J[21]!==ec||J[22]!==ed?(C=ec&&ed?.[ec]&&Object.keys(ed[ec]).length>0?{[ec]:ed[ec]}:{},J[21]=ec,J[22]=ed,J[23]=C):C=J[23];let eg=C;J[24]!==en?(k=(e,t)=>en?.({where:e,whereLanguage:t})??"/",J[24]=en,J[25]=k):k=J[25];let ey=k,eb=ec&&eg?.[ec],ev=eb?.["http.url"]!=null;t:{let e;if(!ec){N=eg;break t}let t=eg?.[ec];J[26]!==t||J[27]!==eg||J[28]!==ec||J[29]!==ev?(e=ev&&t?{[ec]:c()(t,e_)}:eg,J[26]=t,J[27]=eg,J[28]=ec,J[29]=ev,J[30]=e):e=J[30],N=e}let ej=N,ew=ed?.__hdx_events_exception_attributes??eS,eE=ew?.["exception.stacktrace"]||ew?.["exception.parsed_stacktrace"],eC=eE??"[]";try{let e;J[31]!==eE?(e=JSON.parse(eE),J[31]=eE,J[32]=e):e=J[32],eC=e}catch(e){}let ek=ew?.["exception.type"];J[33]!==ew?(A="string"!=typeof ew?.["exception.message"]?JSON.stringify(ew?.["exception.message"]):ew?.["exception.message"],J[33]=ew,J[34]=A):A=J[34];let eN=ew?.["exception.mechanism"];J[35]!==eC||J[36]!==ek||J[37]!==A||J[38]!==eN?(T=[{stacktrace:eC,type:ek,value:A,mechanism:eN}],J[35]=eC,J[36]=ek,J[37]=A,J[38]=eN,J[39]=T):T=J[39];let eA=T;J[40]!==ed?.__hdx_events_exception_attributes?($=()=>Object.keys(ed?.__hdx_events_exception_attributes??{}).length>0,J[40]=ed?.__hdx_events_exception_attributes,J[41]=$):$=J[41],ed?.__hdx_events_exception_attributes;let eT=$();ed?.__hdx_span_events;let e$=Array.isArray(ed?.__hdx_span_events)&&ed?.__hdx_span_events.length>0;J[42]!==G?(z=(0,p.N8)(G),J[42]=G,J[43]=z):z=J[43];let ez=z;J[44]!==ed?(L=i()(ed?.__hdx_body)?ed.__hdx_body:ed?.__hdx_body!==void 0?JSON.stringify(ed.__hdx_body):void 0,J[44]=ed,J[45]=L):L=J[45];let eL=L;J[46]!==ed?.__hdx_severity_text||J[47]!==ed?.__hdx_timestamp||J[48]!==et||J[49]!==el||J[50]!==eL||J[51]!==ez?(I=!et&&(0,r.jsx)(u.a,{px:"sm",pt:"md",children:(0,r.jsx)(v.A,{attributes:el,date:new Date(ed?.__hdx_timestamp??0),mainContent:eL,mainContentHeader:ez,severityText:ed?.__hdx_severity_text})}),J[46]=ed?.__hdx_severity_text,J[47]=ed?.__hdx_timestamp,J[48]=et,J[49]=el,J[50]=eL,J[51]=ez,J[52]=I):I=J[52],J[53]===Symbol.for("react.memo_cache_sentinel")?(M=["exception","spanEvents","network","resourceAttributes","eventAttributes","topLevelAttributes"],J[53]=M):M=J[53],J[54]!==ep||J[55]!==ev?(R=ev&&(0,r.jsxs)(m.n.Item,{value:"network",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"HTTP Request"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(ex,{eventAttributes:ep})})})]}),J[54]=ep,J[55]=ev,J[56]=R):R=J[56],J[57]!==eA||J[58]!==ed?.__hdx_timestamp||J[59]!==eT?(D=eT&&(0,r.jsxs)(m.n.Item,{value:"exception",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Exception"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(K,{exceptionValues:eA,breadcrumbs:[],logData:{timestamp:ed?.__hdx_timestamp}})})})]}),J[57]=eA,J[58]=ed?.__hdx_timestamp,J[59]=eT,J[60]=D):D=J[60],J[61]!==ed?.__hdx_span_events||J[62]!==e$?(P=e$&&(0,r.jsxs)(m.n.Item,{value:"spanEvents",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Span Events"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(ef,{spanEvents:ed?.__hdx_span_events})})})]}),J[61]=ed?.__hdx_span_events,J[62]=e$,J[63]=P):P=J[63],J[64]!==eo||J[65]!==em?(O=Object.keys(em).length>0&&(0,r.jsxs)(m.n.Item,{value:"topLevelAttributes",children:[(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Top Level Attributes"})}),(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(y.z,{data:em,jsonColumns:eo})})})]}),J[64]=eo,J[65]=em,J[66]=O):O=J[66];let eI="log"===G.kind?"Log":"Span";return J[67]!==eI?(F=(0,r.jsx)(m.n.Control,{children:(0,r.jsxs)(h.E,{size:"sm",ps:"md",children:[eI," Attributes"]})}),J[67]=eI,J[68]=F):F=J[68],J[69]!==ej||J[70]!==eo?(V=(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(u.a,{px:"md",children:(0,r.jsx)(y.z,{data:ej,jsonColumns:eo})})}),J[69]=ej,J[70]=eo,J[71]=V):V=J[71],J[72]!==F||J[73]!==V?(B=(0,r.jsxs)(m.n.Item,{value:"eventAttributes",children:[F,V]}),J[72]=F,J[73]=V,J[74]=B):B=J[74],J[75]===Symbol.for("react.memo_cache_sentinel")?(W=(0,r.jsx)(m.n.Control,{children:(0,r.jsx)(h.E,{size:"sm",ps:"md",children:"Resource Attributes"})}),J[75]=W):W=J[75],J[76]!==eh?(H=Object.entries(eh),J[76]=eh,J[77]=H):H=J[77],J[78]!==ey||J[79]!==en||J[80]!==eo||J[81]!==er||J[82]!==G.resourceAttributesExpression||J[83]!==H?(q=(0,r.jsxs)(m.n.Item,{value:"resourceAttributes",children:[W,(0,r.jsx)(m.n.Panel,{children:(0,r.jsx)(x.s,{wrap:"wrap",gap:"2px",mx:"md",mb:"lg",children:H.map(e=>{let[t,s]=e;return(0,n.createElement)(j.A,{...er?{onPropertyAddClick:er,sqlExpression:G.resourceAttributesExpression&&eo?.includes(G.resourceAttributesExpression)?`toString(${G.resourceAttributesExpression}.${t})`:`${G.resourceAttributesExpression}['${t}']`}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:en?ey:void 0,displayedKey:t,name:`${G.resourceAttributesExpression}.${t}`,value:s,key:t})})})})]}),J[78]=ey,J[79]=en,J[80]=eo,J[81]=er,J[82]=G.resourceAttributesExpression,J[83]=H,J[84]=q):q=J[84],J[85]!==R||J[86]!==D||J[87]!==P||J[88]!==O||J[89]!==B||J[90]!==q?(X=(0,r.jsxs)(m.n,{mt:"sm",defaultValue:M,multiple:!0,variant:"noPadding",children:[R,D,P,O,B,q]}),J[85]=R,J[86]=D,J[87]=P,J[88]=O,J[89]=B,J[90]=q,J[91]=X):X=J[91],J[92]!==ee||J[93]!==I||J[94]!==X?(Y=(0,r.jsxs)("div",{className:"flex-grow-1 overflow-auto","data-testid":ee,children:[I,X]}),J[92]=ee,J[93]=I,J[94]=X,J[95]=Y):Y=J[95],Y}function e_(e,t){return!t.startsWith("http.")}},26932:(e,t,s)=>{"use strict";s.d(t,{e:()=>y,h:()=>b});var r=s(6029),n=s(75155),a=s(1909),l=s(69580),i=s(88140),o=s(93463),c=s(35555),d=s(82641),u=s(25062),m=s(3635),h=s(27166),x=s(78341),p=s(6876),g=s(58541);let f=e=>{let t,s,i,o,c,f,y,b,j,S,w,_=(0,n.c)(31);_[0]===Symbol.for("react.memo_cache_sentinel")?(t=[d.x.Slack,d.x.Generic,d.x.IncidentIO],_[0]=t):t=_[0];let{data:E,refetch:C}=p.Ay.useWebhooks(t),[k,N]=(0,x.j)(!1),{open:A,close:T}=N,$=Array.isArray(E?.data)&&E.data.length>0;if(_[1]!==E?.data){let e,t=E?.data.map(v)||[];_[3]===Symbol.for("react.memo_cache_sentinel")?(e={value:"",label:"Select a Webhook",disabled:!0},_[3]=e):e=_[3],s=[e,...t],_[1]=E?.data,_[2]=s}else s=_[2];let z=s;_[4]!==e.control||_[5]!==e.name?(i={control:e.control,name:e.name},_[4]=e.control,_[5]=e.name,_[6]=i):i=_[6];let{field:L}=(0,a.as)(i);_[7]!==T||_[8]!==L||_[9]!==C?(o=async e=>{await C(),e&&(L.onChange(e),L.onBlur()),T()},_[7]=T,_[8]=L,_[9]=C,_[10]=o):o=_[10];let I=o;_[11]===Symbol.for("react.memo_cache_sentinel")?(c={withinPortal:!1},_[11]=c):c=_[11];let M=$?"Select a Webhook":"No Webhooks available";return _[12]!==z||_[13]!==e||_[14]!==M?(f=(0,r.jsx)(l.l6,{comboboxProps:c,required:!0,size:"xs",flex:1,placeholder:M,data:z,name:e.name,control:e.control,...e}),_[12]=z,_[13]=e,_[14]=M,_[15]=f):f=_[15],_[16]!==A?(y=(0,r.jsx)(u.$,{size:"xs",variant:"subtle",color:"gray",onClick:A,children:"Add New Incoming Webhook"}),_[16]=A,_[17]=y):y=_[17],_[18]!==f||_[19]!==y?(b=(0,r.jsxs)(m.Y,{gap:"md",justify:"space-between",children:[f,y]}),_[18]=f,_[19]=y,_[20]=b):b=_[20],_[21]!==T||_[22]!==I?(j=(0,r.jsx)(g.g,{onClose:T,onSuccess:I}),_[21]=T,_[22]=I,_[23]=j):j=_[23],_[24]!==T||_[25]!==k||_[26]!==j?(S=(0,r.jsx)(h.a,{opened:k,onClose:T,title:"Add New Webhook",centered:!0,zIndex:9999,size:"lg",children:j}),_[24]=T,_[25]=k,_[26]=j,_[27]=S):S=_[27],_[28]!==S||_[29]!==b?(w=(0,r.jsxs)("div",{children:[b,S]}),_[28]=S,_[29]=b,_[30]=w):w=_[30],w},y=e=>{let t=(0,n.c)(3),{control:s,type:a,namePrefix:l}=e;if("webhook"===a){let e,n=`${void 0===l?"":l}channel.webhookId`;return t[0]!==s||t[1]!==n?(e=(0,r.jsx)(f,{control:s,name:n}),t[0]=s,t[1]=n,t[2]=e):e=t[2],e}return null},b=({thresholdType:e,threshold:t})=>null!=t&&"below"===e?(0,r.jsx)(i.T,{y1:0,y2:t,ifOverflow:"extendDomain",fill:"red",strokeWidth:0,fillOpacity:.05}):null!=t&&"above"===e?(0,r.jsx)(i.T,{y1:t,ifOverflow:"extendDomain",fill:"red",strokeWidth:0,fillOpacity:.05}):null!=t?(0,r.jsx)(o.e,{y:t,label:(0,r.jsx)(c.J,{value:"Alert Threshold",fill:"white",fontSize:11,opacity:.7}),stroke:"red",strokeDasharray:"3 3"}):null;function v(e){return{value:e._id,label:e.name}}},28450:(e,t,s)=>{"use strict";s.d(t,{FB:()=>j,Qg:()=>b,xD:()=>S});var r=s(6029),n=s(75155);s(55729);var a=s(82203),l=s.n(a),i=s(43465),o=s(67270),c=s(30039),d=s(43517),u=s(3635),m=s(43085),h=s(12482),x=s(49672),p=s(78550),g=s(81973),f=s(9897),y=s(7565);let b=(e,t)=>{let s,r,a,l=(0,n.c)(22),{dateRange:i,extraSelects:c,limit:d,logSource:u,order:m,where:f,whereLanguage:y}=e,b=(0,x.fu)(),v=(0,p.Ge)();return l[0]!==i||l[1]!==c||l[2]!==d||l[3]!==u.id||l[4]!==m||l[5]!==f||l[6]!==y?(s=["v2LogBatch",u.id,c,i,f,y,d,m],l[0]=i,l[1]=c,l[2]=d,l[3]=u.id,l[4]=m,l[5]=f,l[6]=y,l[7]=s):s=l[7],l[8]!==b||l[9]!==i||l[10]!==c||l[11]!==d||l[12]!==u||l[13]!==v||l[14]!==m||l[15]!==f||l[16]!==y?(r=async()=>{let e=await (0,o.PV)({select:[{valueExpression:(0,g.xg)(u),alias:"timestamp"},{valueExpression:`${u.serviceNameExpression}`,alias:"_service"},...c&&Array.isArray(c)?c:[]],from:u.from,dateRange:i,timestampValueExpression:u.timestampValueExpression,implicitColumnExpression:u.implicitColumnExpression,where:f,whereLanguage:y,connection:u.connection,limit:{limit:d??50,offset:0},orderBy:`${u.timestampValueExpression} ${m}`},v,u.querySettings);return await b.query({query:e.sql,query_params:e.params,connectionId:u.connection}).then(w)},l[8]=b,l[9]=i,l[10]=c,l[11]=d,l[12]=u,l[13]=v,l[14]=m,l[15]=f,l[16]=y,l[17]=r):r=l[17],l[18]!==t||l[19]!==s||l[20]!==r?(a={queryKey:s,queryFn:r,staleTime:3e5,...t},l[18]=t,l[19]=s,l[20]=r,l[21]=a):a=l[21],(0,h.I)(a)},v=e=>t=>{let s="#";try{s=`/search?q=${encodeURIComponent(`${e.resourceAttributesExpression}.k8s.pod.name:"${t["k8s.pod.name"]}"`)}&source=${e.id}&from=${new Date(t.timestamp).getTime()-9e5}&to=${new Date(t.timestamp).getTime()+1}`}catch(e){}return(0,r.jsxs)(c.K.Item,{children:[(0,r.jsx)(l(),{href:s,children:(0,r.jsx)(d.E,{size:"xs",fz:11,title:t.timestamp,c:"green",td:"underline",fw:"bold",children:(0,r.jsx)(y.H,{value:t.timestamp})})}),(0,r.jsxs)(u.Y,{gap:"xs",my:4,children:[(0,r.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:t["object.reason"]}),t["object.type"]&&(0,r.jsx)(m.E,{variant:"light",size:"xs",fw:"normal",color:"Normal"===t["object.type"]?"green":"yellow",children:t["object.type"]})]}),(0,r.jsx)(d.E,{size:"xs",children:t["object.note"]||t["object.message"]})]},t.id)},j=e=>{let t,s,a,l,o,m,h,x,p,g,f,j,S,w,C,k,N,A,T,$,z=(0,n.c)(82),{q:L,logSource:I,anchorEvent:M,dateRange:R}=e;z[0]!==R?.[0]?(t=R?.[0]??(0,i.A)(new Date,{days:1}),z[0]=R?.[0],z[1]=t):t=z[1];let D=t;z[2]!==R?.[1]?(s=R?.[1]??new Date,z[2]=R?.[1],z[3]=s):s=z[3];let P=s;z[4]!==P||z[5]!==D?(a=[D,P],z[4]=P,z[5]=D,z[6]=a):a=z[6];let O=`${I.eventAttributesExpression}.k8s.resource.name:"events" ${L}`;z[7]===Symbol.for("react.memo_cache_sentinel")?(l={valueExpression:"generateUUIDv4()",alias:"id"},z[7]=l):l=z[7];let F=`JSONExtractString(${I.eventAttributesExpression}['object'], 'metadata', 'creationTimestamp')`;z[8]!==F?(o={valueExpression:F,alias:"object.metadata.creationTimestamp"},z[8]=F,z[9]=o):o=z[9];let V=`JSONExtractString(${I.eventAttributesExpression}['object'], 'reason')`;z[10]!==V?(m={valueExpression:V,alias:"object.reason"},z[10]=V,z[11]=m):m=z[11];let B=`JSONExtractString(${I.eventAttributesExpression}['object'], 'note')`;z[12]!==B?(h={valueExpression:B,alias:"object.note"},z[12]=B,z[13]=h):h=z[13];let W=`JSONExtractString(${I.eventAttributesExpression}['object'], 'type')`;z[14]!==W?(x={valueExpression:W,alias:"object.type"},z[14]=W,z[15]=x):x=z[15];let H=`JSONExtractString(${I.eventAttributesExpression}['object'], 'message')`;z[16]!==H?(p={valueExpression:H,alias:"object.message"},z[16]=H,z[17]=p):p=z[17];let q=`JSONExtractString(${I.eventAttributesExpression}['object'], 'regarding', 'name')`;z[18]!==q?(g={valueExpression:q,alias:"k8s.pod.name"},z[18]=q,z[19]=g):g=z[19];let X=`JSONExtractString(${I.eventAttributesExpression}['object'], 'regarding', 'uid')`;z[20]!==X?(f={valueExpression:X,alias:"k8s.pod.uid"},z[20]=X,z[21]=f):f=z[21];let Y=`JSONExtractString(${I.eventAttributesExpression}['object'], 'type')`;z[22]!==Y?(j={valueExpression:Y,alias:"type"},z[22]=Y,z[23]=j):j=z[23];let J=`JSONExtractString(${I.eventAttributesExpression}['object'], 'type')`;z[24]!==J?(S={valueExpression:J,alias:"severity_text"},z[24]=J,z[25]=S):S=z[25];let K=`JSONExtractString(${I.eventAttributesExpression}['object'], 'note')`;z[26]!==K?(w={valueExpression:K,alias:"body"},z[26]=K,z[27]=w):w=z[27],z[28]!==h||z[29]!==x||z[30]!==p||z[31]!==g||z[32]!==f||z[33]!==j||z[34]!==S||z[35]!==w||z[36]!==o||z[37]!==m?(C=[l,o,m,h,x,p,g,f,j,S,w],z[28]=h,z[29]=x,z[30]=p,z[31]=g,z[32]=f,z[33]=j,z[34]=S,z[35]=w,z[36]=o,z[37]=m,z[38]=C):C=z[38],z[39]!==I||z[40]!==C||z[41]!==a||z[42]!==O?(k={dateRange:a,limit:50,logSource:I,order:"desc",where:O,whereLanguage:"lucene",extraSelects:C},z[39]=I,z[40]=C,z[41]=a,z[42]=O,z[43]=k):k=z[43];let{data:G,isLoading:Z}=b(k);z[44]!==G?.data?(N=G?.data||[],z[44]=G?.data,z[45]=N):N=z[45],z[46]!==N?(A=N.sort(_),z[46]=N,z[47]=A):A=z[47];let U=A;z[48]!==U||z[49]!==M?(T=M?U.filter(e=>new Date(e.timestamp)<new Date(M.timestamp)):[],z[48]=U,z[49]=M,z[50]=T):T=z[50];let Q=T;z[51]!==U||z[52]!==M?($=M?U.filter(e=>new Date(e.timestamp)>new Date(M.timestamp)):[],z[51]=U,z[52]=M,z[53]=$):$=z[53];let ee=$;if(Z){let e;return z[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.E,{color:"muted",ta:"center",children:"Loading..."}),z[54]=e):e=z[54],e}if(0===U.length){let e;return z[55]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(d.E,{color:"muted",ta:"center",children:"No events"}),z[55]=e):e=z[55],e}if(M){let e,t,s,n,a,l,i;return z[56]!==I||z[57]!==ee?(e=ee.map(v(I)),z[56]=I,z[57]=ee,z[58]=e):e=z[58],z[59]!==M.timestamp?(t=(0,r.jsx)(y.H,{value:M.timestamp}),z[59]=M.timestamp,z[60]=t):t=z[60],z[61]!==M.timestamp||z[62]!==t?(s=(0,r.jsx)(d.E,{size:"xs",fz:11,title:M.timestamp,children:t}),z[61]=M.timestamp,z[62]=t,z[63]=s):s=z[63],z[64]!==M.label?(n=(0,r.jsx)(u.Y,{gap:"xs",my:4,children:(0,r.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:M.label})}),z[64]=M.label,z[65]=n):n=z[65],z[66]!==M.timestamp||z[67]!==s||z[68]!==n?(a=(0,r.jsxs)(c.K.Item,{ref:E,children:[s,n]},M.timestamp),z[66]=M.timestamp,z[67]=s,z[68]=n,z[69]=a):a=z[69],z[70]!==I||z[71]!==Q?(l=Q.map(v(I)),z[70]=I,z[71]=Q,z[72]=l):l=z[72],z[73]!==e||z[74]!==a||z[75]!==l?(i=(0,r.jsxs)(c.K,{bulletSize:12,lineWidth:1,children:[e,a,l]}),z[73]=e,z[74]=a,z[75]=l,z[76]=i):i=z[76],i}{let e,t;return z[77]!==U||z[78]!==I?(e=U.map(v(I)),z[77]=U,z[78]=I,z[79]=e):e=z[79],z[80]!==e?(t=(0,r.jsx)(c.K,{bulletSize:12,lineWidth:1,children:e}),z[80]=e,z[81]=t):t=z[81],t}},S=e=>{let t=(0,n.c)(6),{status:s}=e;switch(s){case f.h.Pending:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"yellow",fw:"normal",tt:"none",size:"md",children:"Pending"}),t[0]=e):e=t[0],e}case f.h.Running:{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Running"}),t[1]=e):e=t[1],e}case f.h.Succeeded:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"indigo",fw:"normal",tt:"none",size:"md",children:"Succeeded"}),t[2]=e):e=t[2],e}case f.h.Failed:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Failed"}),t[3]=e):e=t[3],e}case f.h.Unknown:{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[4]=e):e=t[4],e}default:{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[5]=e):e=t[5],e}}};function w(e){return e.json()}function _(e,t){return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()}function E(e){null!==e&&e.scrollIntoView({block:"nearest"})}},28959:(e,t,s)=>{"use strict";s.d(t,{RW:()=>m,Ye:()=>u,ae:()=>i,hd:()=>o,mA:()=>d});var r=s(75155),n=s(55729),a=s(67843),l=s(92917);let i="isRootSpan",o=(e,{stringifyKeys:t=!1}={})=>Object.entries(e).filter(([e,t])=>t.included.size>0||t.excluded.size>0||null!=t.range).flatMap(([e,s])=>{let r=[],n=t?`toString(${e})`:e;return s.included.size>0&&r.push({type:"sql",condition:`${n} IN (${Array.from(s.included).map(e=>"string"==typeof e?`'${e}'`:e).join(", ")})`}),s.excluded.size>0&&r.push({type:"sql",condition:`${n} NOT IN (${Array.from(s.excluded).map(e=>"string"==typeof e?`'${e}'`:e).join(", ")})`}),null!=s.range&&r.push({type:"sql",condition:`${n} BETWEEN ${s.range.min} AND ${s.range.max}`}),r}),c=e=>{let t=e.trim();return["true","false"].includes(t.toLowerCase())?"true"===t.toLowerCase():t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):t},d=e=>{let t=new Map;for(let s of e)if("sql"===s.type){if(s.condition.includes(" BETWEEN ")){let e=s.condition.match(/^(.+?)\s+BETWEEN\s+(.+?)\s+AND\s+(.+?)$/i);if(e){let[,s,r,n]=e,a=s.trim(),l=parseFloat(r.trim()),i=parseFloat(n.trim());t.has(a)?t.get(a).range={min:l,max:i}:t.set(a,{included:new Set,excluded:new Set,range:{min:l,max:i}});continue}}for(let e of function(e){let t=[],s=[],r="",n=!1;for(let t=0;t<e.length;t++){let a=e[t];if("'"===a&&(0===t||"\\"!==e[t-1])){n=!n,r+=a;continue}if(!n&&" AND "===e.slice(t,t+5).toUpperCase()){r.trim()&&s.push(r.trim()),r="",t+=4;continue}r+=a}for(let e of(r.trim()&&s.push(r.trim()),s)){if(e.toUpperCase().includes(" OR ")||e.includes("=")||e.includes("<")||e.includes(">"))continue;let s=e.includes("NOT IN");if(e.includes(" IN ")||e.includes(" NOT IN ")){let[r,n]=e.split(s?" NOT IN ":" IN ");if(r&&n){let e=r.trim(),a=n.trim(),l=function(e){let t=[],s="",r=!1;for(let n=0;n<e.length;n++){let a=e[n];if("'"===a&&(0===n||"\\"!==e[n-1])){r=!r,s+=a;continue}if(!r&&","===a){s.trim()&&t.push(c(s)),s="";continue}s+=a}return s.trim()&&t.push(c(s)),t}(a.startsWith("(")&&a.endsWith(")")?a.slice(1,-1):a);t.push({key:e,values:l,isExclude:s})}}}return t}(s.condition)){t.has(e.key)||t.set(e.key,{included:new Set,excluded:new Set});let s=t.get(e.key);e.values.forEach(t=>{e.isExclude?s.excluded.add(t):s.included.add(t)})}}return{filters:Object.fromEntries(t)}},u=({searchQuery:e=[],onFilterChange:t})=>{let s=n.useMemo(()=>{try{return d(e)}catch(e){return console.error(e),{filters:{}}}},[e]),[r,l]=n.useState({});n.useEffect(()=>{((e,t)=>{let s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(let r of s){if(!t[r]||e[r].included.size!==t[r].included.size)return!1;for(let s of e[r].included)if(!t[r].included.has(s))return!1;if(e[r].excluded.size!==t[r].excluded.size)return!1;for(let s of e[r].excluded)if(!t[r].excluded.has(s))return!1;if(e[r].range?.min!==t[r].range?.min||e[r].range?.max!==t[r].range?.max)return!1}return!0})(r,s.filters)||l(s.filters)},[s.filters]);let i=n.useCallback(e=>{t(o(e))},[t]),c=n.useCallback((e,t,s)=>{l(r=>{let n=(0,a.Ay)(r,r=>{if(r[e]||(r[e]={included:new Set,excluded:new Set}),"only"===s){r[e]={included:new Set([t]),excluded:new Set};return}if("exclude"===s){r[e].included.delete(t),r[e].excluded.has(t)?r[e].excluded.delete(t):r[e].excluded.add(t);return}r[e].excluded.delete(t),r[e].included.has(t)?r[e].included.delete(t):r[e].included.add(t)});return i(n),n})},[i]),u=n.useCallback((e,t)=>{l(s=>{let r=(0,a.Ay)(s,s=>{s[e]||(s[e]={included:new Set,excluded:new Set}),s[e].range=t});return i(r),r})},[i]),m=n.useCallback(e=>{l(t=>{let s=(0,a.Ay)(t,t=>{delete t[e]});return i(s),s})},[i]),h=n.useCallback(()=>{l(()=>({})),i({})},[i]);return{filters:r,setFilters:l,setFilterValue:c,setFilterRange:u,clearFilter:m,clearAllFilters:h}};function m(e){let t,s,n,i,o,c,d=(0,r.c)(18),{pinnedFilters:u,setPinnedFilters:m,pinnedFields:h,setPinnedFields:x}=function(e){let t,s,n,i,o,c,d,u=(0,r.c)(19);u[0]===Symbol.for("react.memo_cache_sentinel")?(t={},u[0]=t):t=u[0];let[m,h]=(0,l.Mj)("hdx-pinned-search-filters",t);u[1]===Symbol.for("react.memo_cache_sentinel")?(s={},u[1]=s):s=u[1];let[x,p]=(0,l.Mj)("hdx-pinned-fields",s);u[2]!==m||u[3]!==e?(n=e&&m[e]?m[e]:{},u[2]=m,u[3]=e,u[4]=n):n=u[4];let g=n;u[5]!==x||u[6]!==e?(i=e&&x[e]?x[e]:[],u[5]=x,u[6]=e,u[7]=i):i=u[7];let f=i;u[8]!==h||u[9]!==e?(o=t=>{e&&h(s=>(0,a.Ay)(s,s=>{s[e]=t instanceof Function?t(s[e]??{}):t}))},u[8]=h,u[9]=e,u[10]=o):o=u[10];let y=o;u[11]!==p||u[12]!==e?(c=t=>{e&&p(s=>(0,a.Ay)(s,s=>{s[e]=t instanceof Function?t(s[e]??[]):t}))},u[11]=p,u[12]=e,u[13]=c):c=u[13];let b=c;return u[14]!==f||u[15]!==g||u[16]!==b||u[17]!==y?(d={pinnedFilters:g,setPinnedFilters:y,pinnedFields:f,setPinnedFields:b},u[14]=f,u[15]=g,u[16]=b,u[17]=y,u[18]=d):d=u[18],d}(e);d[0]!==x||d[1]!==m?(t=(e,t)=>{m(s=>(0,a.Ay)(s,s=>{s[e]||(s[e]=[]);let r=s[e].findIndex(e=>e===t);return r>=0?s[e].splice(r,1):s[e].push(t),s})),x(t=>t.includes(e)?t:[...t,e])},d[0]=x,d[1]=m,d[2]=t):t=d[2];let p=t;d[3]!==x?(s=e=>{x(t=>{let s=t.findIndex(t=>t===e);return s>=0?t.filter((e,t)=>t!==s):[...t,e]})},d[3]=x,d[4]=s):s=d[4];let g=s;d[5]!==u?(n=(e,t)=>u[e]&&u[e].some(e=>e===t),d[5]=u,d[6]=n):n=d[6];let f=n;d[7]!==h?(i=e=>h.includes(e),d[7]=h,d[8]=i):i=d[8];let y=i;d[9]!==h?(o=()=>h,d[9]=h,d[10]=o):o=d[10];let b=o;return d[11]!==b||d[12]!==y||d[13]!==f||d[14]!==u||d[15]!==g||d[16]!==p?(c={toggleFilterPin:p,toggleFieldPin:g,isFilterPinned:f,isFieldPinned:y,getPinnedFields:b,pinnedFilters:u},d[11]=b,d[12]=y,d[13]=f,d[14]=u,d[15]=g,d[16]=p,d[17]=c):c=d[17],c}},31451:(e,t,s)=>{"use strict";s.d(t,{Q$:()=>f,nt:()=>v,vN:()=>g,xj:()=>p});var r=s(75155),n=s(36722),a=s.n(n),l=s(76089),i=s(12482),o=s(43152),c=s(46061),d=s(91021),u=s(81973);async function m(){let e=await window.loadPyodide();await e.loadPackage("micropip");let t=e.pyimport("micropip"),s=new URL("/jsonpickle-4.1.1-py3-none-any.whl",window.location.origin);await t.install(s.href);let r=new URL("/drain3-0.9.11-py3-none-any.whl",window.location.origin);return await t.install(r.href),e}class h{constructor(e){this.pyodide=e,this.id=Math.random().toString(36).substring(2,15),this.minerVariableName=`m_${this.id}`}async init(){await this.pyodide.runPythonAsync(`
import js
import json
from drain3 import TemplateMiner
from drain3.template_miner_config import TemplateMinerConfig

${this.minerVariableName} = TemplateMiner(None, TemplateMinerConfig())
    `)}async minePatterns(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        ${s}.append(${this.minerVariableName}.add_log_message(log))
      json.dumps(${s})
    `))}async matchLogs(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        match = ${this.minerVariableName}.match(log)
        ${s}.append(match.cluster_id if match else None)
      json.dumps(${s})
    `))}}async function x(e,t){let s=new h(t);return await s.init(),{miner:s,patterns:await s.minePatterns(e)}}let p="__hdx_pattern_field",g="__hdx_timestamp",f="__hdx_severity_text",y="__hdx_status_code";function b(e){return a()(e[p])}function v(e){let t,s,n,a,h,v=(0,r.c)(22),{config:w,samples:_,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:k,totalCount:N,enabled:A}=e,T=void 0===A||A;v[0]!==E||v[1]!==w||v[2]!==T||v[3]!==_||v[4]!==C||v[5]!==k?(t={config:w,samples:_,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:k,enabled:T},v[0]=E,v[1]=w,v[2]=T,v[3]=_,v[4]=C,v[5]=k,v[6]=t):t=v[6];let{data:$,isLoading:z,patternQueryConfig:L}=function(e){var t;let s,n,a,l,o,h,v,j,S,w,_,E,C,k,N,A,T=(0,r.c)(36),{config:$,samples:z,bodyValueExpression:L,severityTextExpression:I,statusCodeExpression:M,enabled:R}=e,D=void 0===R||R,P=`${L} as ${p}`;T[0]!==$.timestampValueExpression?(s=(0,u.AF)($.timestampValueExpression),T[0]=$.timestampValueExpression,T[1]=s):s=T[1];let O=`${s} as ${g}`;T[2]!==I?(n=I?[`${I} as ${f}`]:[],T[2]=I,T[3]=n):n=T[3],T[4]!==M?(a=M?[`${M} as ${y}`]:[],T[4]=M,T[5]=a):a=T[5],T[6]!==P||T[7]!==O||T[8]!==n||T[9]!==a?(l=[P,O,...n,...a],T[6]=P,T[7]=O,T[8]=n,T[9]=a,T[10]=l):l=T[10];let F=l.join(",");T[11]===Symbol.for("react.memo_cache_sentinel")?(o=[{ordering:"DESC",valueExpression:"rand()"}],T[11]=o):o=T[11],T[12]!==z?(h={limit:z},T[12]=z,T[13]=h):h=T[13],T[14]!==$||T[15]!==h||T[16]!==F?(v={...$,select:F,orderBy:o,limit:h},T[14]=$,T[15]=h,T[16]=F,T[17]=v):v=T[17];let V=(0,c.YB)(v),B=null!=V&&D;T[18]!==B?(j={enabled:B},T[18]=B,T[19]=j):j=T[19];let{data:W,isLoading:H}=(0,d.HD)(V??$,j);T[20]!==D?(S={enabled:D},T[20]=D,T[21]=S):S=T[21];let{data:q,isLoading:X}=(t=S,(A=(0,r.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(k=["pyodide"],A[0]=k):k=A[0],A[1]!==t.enabled?(N={queryKey:k,queryFn:m,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1,enabled:t.enabled},A[1]=t.enabled,A[2]=N):N=A[2],(0,i.I)(N));T[22]!==$?(w=["patterns",$],T[22]=$,T[23]=w):w=T[23],T[24]!==V||T[25]!==q||T[26]!==W?(_=()=>{if(null==V)throw Error("Unexpected configWithPrimaryAndPartitionKey is null");return x(W?.data.map(b)??[],q).then(e=>{let t=[],s=e.patterns;for(let e=0;e<s.length;e++){let r=s[e],n=W?.data[e];t.push({...n,__hdx_patternId:r.cluster_id,__hdx_pattern:r.template_mined})}return{...W,data:t,additionalKeysLength:V.additionalKeysLength,miner:e.miner}})},T[24]=V,T[25]=q,T[26]=W,T[27]=_):_=T[27];let Y=null!=W&&null!=q&&D;T[28]!==w||T[29]!==_||T[30]!==Y?(E={queryKey:w,queryFn:_,refetchOnWindowFocus:!1,enabled:Y},T[28]=w,T[29]=_,T[30]=Y,T[31]=E):E=T[31];let J=(0,i.I)(E),K=J.isLoading||H||X;return T[32]!==V||T[33]!==J||T[34]!==K?(C={...J,isLoading:K,patternQueryConfig:V},T[32]=V,T[33]=J,T[34]=K,T[35]=C):C=T[35],C}(t),I=$?.data.length,M=N&&I?N/I:1;v[7]!==w.dateRange?(s=(0,l.tA)(w.dateRange,24),n=(0,o.Ht)(w.dateRange[0],w.dateRange[1],s),v[7]=w.dateRange,v[8]=s,v[9]=n):(s=v[8],n=v[9]);let R=n;if(v[10]!==w.dateRange||v[11]!==s||v[12]!==$?.data||v[13]!==M||v[14]!==R){let e=$?.data.reduce(S,{});a={},Object.entries(e??{}).forEach(e=>{let[t,r]=e,n=R.reduce(j,{}),l=r.reduce((e,t)=>{let r=t[g],n=(0,o.W6)(new Date(r),s).getTime();return e[n]=(e[n]||0)+1,e},n),i=Math.max(Math.round(r.length*M),1),c=r.at(-1);a[t]={id:t,pattern:c?.__hdx_pattern,count:i,countStr:`~${i}`,severityText:c?.[f],statusCode:c?.[y],samples:r,__hdx_pattern_trend:{data:Object.entries(l).map(e=>{let[t,s]=e;return{bucket:Number.parseInt(t)/1e3,count:Math.round(s*M)}}),granularity:s,dateRange:w.dateRange}}}),v[10]=w.dateRange,v[11]=s,v[12]=$?.data,v[13]=M,v[14]=R,v[15]=a}else a=v[15];let D=a,P=$?.miner;return v[16]!==D||v[17]!==z||v[18]!==L||v[19]!==I||v[20]!==P?(h={data:D,isLoading:z,miner:P,sampledRowCount:I,patternQueryConfig:L},v[16]=D,v[17]=z,v[18]=L,v[19]=I,v[20]=P,v[21]=h):h=v[21],h}function j(e,t){return e[t.getTime()]=0,e}function S(e,t){let s=`${t.__hdx_patternId}`;return e[s]=e[s]||[],e[s].push(t),e}},35729:(e,t,s)=>{"use strict";s.d(t,{B:()=>d,y:()=>u});var r=s(6029),n=s(55729),a=s(66692),l=s(60481),i=s(3635),o=s(43517),c=s(20158);let d=n.memo(({header:e,onClose:t,closeEsc:s=!0})=>((0,a.vC)(["esc"],()=>t?.(),{enabled:s}),(0,r.jsx)(l.a,{px:"md",py:"xs",className:"border-bottom border-dark",children:(0,r.jsxs)(i.Y,{justify:"space-between",align:"center",children:[(0,r.jsx)(o.E,{size:"md",children:e}),(0,r.jsx)(c.J,{onClick:t,"aria-label":"Close modal",variant:"subtle",size:"md"})]})}))),u=n.memo(({children:e})=>(0,r.jsx)(l.a,{className:"w-100 overflow-auto",px:"sm",py:"md",children:e}))},37901:(e,t,s)=>{"use strict";s.d(t,{$_:()=>h,bn:()=>p,dD:()=>g,k1:()=>x});var r,n=s(6029),a=s(75155),l=s(46375),i=s(82641),o=s(60481),c=s(91021),d=s(81973),u=s(18006),m=s(65081),h=((r={}).TIMESTAMP="__hdx_timestamp",r.BODY="__hdx_body",r.TRACE_ID="__hdx_trace_id",r.SPAN_ID="__hdx_span_id",r.SEVERITY_TEXT="__hdx_severity_text",r.SERVICE_NAME="__hdx_service_name",r.RESOURCE_ATTRIBUTES="__hdx_resource_attributes",r.EVENT_ATTRIBUTES="__hdx_event_attributes",r.EVENTS_EXCEPTION_ATTRIBUTES="__hdx_events_exception_attributes",r.SPAN_EVENTS="__hdx_span_events",r);function x(e){let t,s,r,n,o,m,h,x,p,g,f,y=(0,a.c)(62),{source:b,rowId:v,aliasWith:j}=e;y[0]!==b?(t=(0,d.N8)(b),y[0]=b,y[1]=t):t=y[1];let S=t,w=b.traceIdExpression,_=b.spanIdExpression,E=b.severityTextExpression||b.statusCodeExpression;if(y[2]!==S||y[3]!==_||y[4]!==w||y[5]!==E||y[6]!==b){let e,t,a,l,o,m,h,x,p,g,f,v=b.kind===i.GL.Trace||b.kind===i.GL.Log?(0,u.z4)(b.highlightedRowAttributeExpressions):[];n=c.HD,s=b.connection,y[10]===Symbol.for("react.memo_cache_sentinel")?(e={valueExpression:"*"},y[10]=e):e=y[10],y[11]!==b?(t=(0,d.xg)(b),y[11]=b,y[12]=t):t=y[12],y[13]!==t?(a={valueExpression:t,alias:"__hdx_timestamp"},y[13]=t,y[14]=a):a=y[14],y[15]!==S?(l=S?[{valueExpression:S,alias:"__hdx_body"}]:[],y[15]=S,y[16]=l):l=y[16],y[17]!==w?(o=w?[{valueExpression:w,alias:"__hdx_trace_id"}]:[],y[17]=w,y[18]=o):o=y[18],y[19]!==_?(m=_?[{valueExpression:_,alias:"__hdx_span_id"}]:[],y[19]=_,y[20]=m):m=y[20],y[21]!==E?(h=E?[{valueExpression:E,alias:"__hdx_severity_text"}]:[],y[21]=E,y[22]=h):h=y[22],y[23]!==b.serviceNameExpression?(x=b.serviceNameExpression?[{valueExpression:b.serviceNameExpression,alias:"__hdx_service_name"}]:[],y[23]=b.serviceNameExpression,y[24]=x):x=y[24],y[25]!==b.resourceAttributesExpression?(p=b.resourceAttributesExpression?[{valueExpression:b.resourceAttributesExpression,alias:"__hdx_resource_attributes"}]:[],y[25]=b.resourceAttributesExpression,y[26]=p):p=y[26],y[27]!==b.eventAttributesExpression?(g=b.eventAttributesExpression?[{valueExpression:b.eventAttributesExpression,alias:"__hdx_event_attributes"}]:[],y[27]=b.eventAttributesExpression,y[28]=g):g=y[28],y[29]!==b.kind||y[30]!==b.spanEventsValueExpression?(f=b.kind===i.GL.Trace&&b.spanEventsValueExpression?[{valueExpression:`${b.spanEventsValueExpression}.Attributes[indexOf(${b.spanEventsValueExpression}.Name, 'exception')]`,alias:"__hdx_events_exception_attributes"},{valueExpression:b.spanEventsValueExpression,alias:"__hdx_span_events"}]:[],y[29]=b.kind,y[30]=b.spanEventsValueExpression,y[31]=f):f=y[31],r=[e,a,...l,...o,...m,...h,...x,...p,...g,...f,...v],y[2]=S,y[3]=_,y[4]=w,y[5]=E,y[6]=b,y[7]=s,y[8]=r,y[9]=n}else s=y[7],r=y[8],n=y[9];let C=v??"0=1";y[32]===Symbol.for("react.memo_cache_sentinel")?(o={limit:1},y[32]=o):o=y[32],y[33]!==j?(m=j&&j.length>0?{with:j}:{},y[33]=j,y[34]=m):m=y[34],y[35]!==b.from||y[36]!==s||y[37]!==r||y[38]!==C||y[39]!==m?(h={connection:s,select:r,where:C,from:b.from,limit:o,...m},y[35]=b.from,y[36]=s,y[37]=r,y[38]=C,y[39]=m,y[40]=h):h=y[40],y[41]!==j||y[42]!==v||y[43]!==b?(x=["row_side_panel",v,j,b],y[41]=j,y[42]=v,y[43]=b,y[44]=x):x=y[44];let k=null!=v;y[45]!==k||y[46]!==x?(p={queryKey:x,enabled:k},y[45]=k,y[46]=x,y[47]=p):p=y[47];let N=n(h,p);e:{let e,t,s;if(!N.data?.data?.[0]){g=N.data;break e}let r=N.data.data[0];if(y[48]!==r){if(e={...r},r.__hdx_resource_attributes){let t,s=r.__hdx_resource_attributes;y[50]!==s?(t=(0,l.flatten)(s),y[50]=s,y[51]=t):t=y[51],e.__hdx_resource_attributes=t}if(r.__hdx_event_attributes){let t,s=r.__hdx_event_attributes;y[52]!==s?(t=(0,l.flatten)(s),y[52]=s,y[53]=t):t=y[53],e.__hdx_event_attributes=t}y[48]=r,y[49]=e}else e=y[49];y[54]!==e?(t=[e],y[54]=e,y[55]=t):t=y[55],y[56]!==N.data||y[57]!==t?(s={...N.data,data:t},y[56]=N.data,y[57]=t,y[58]=s):s=y[58],g=s}let A=g;return y[59]!==A||y[60]!==N?(f={...N,data:A},y[59]=A,y[60]=N,y[61]=f):f=y[61],f}function p(e){return e?.filter(e=>"JSON"===e.type||e.type.startsWith("JSON(")).map(e=>e.name)??[]}function g(e){let t,s,r,l,i,c=(0,a.c)(16),{source:d,rowId:u,aliasWith:h,"data-testid":g}=e;c[0]!==h||c[1]!==u||c[2]!==d?(t={source:d,rowId:u,aliasWith:h},c[0]=h,c[1]=u,c[2]=d,c[3]=t):t=c[3];let{data:f}=x(t);e:{let e,t;c[4]!==f?.data?.[0]?(e=f?.data?.[0]??{},c[4]=f?.data?.[0],c[5]=e):e=c[5],c[6]!==e?(t={...e},c[6]=e,c[7]=t):t=c[7];let r=t;if(!r){s=null;break e}s=r}let y=s,b=f?.meta;c[8]!==b?(r=p(b),c[8]=b,c[9]=r):r=c[9];let v=r;return c[10]!==y||c[11]!==v?(l=(0,n.jsx)(o.a,{mx:"md",my:"sm",children:(0,n.jsx)(m.z,{data:y,jsonColumns:v})}),c[10]=y,c[11]=v,c[12]=l):l=c[12],c[13]!==g||c[14]!==l?(i=(0,n.jsx)("div",{className:"flex-grow-1 overflow-auto","data-testid":g,children:l}),c[13]=g,c[14]=l,c[15]=i):i=c[15],i}},40147:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(75155),n=s(80519),a=s.n(n),l=s(3145),i=s(78550);function o(e){let t,s=(0,r.c)(6);s[0]!==e?(t=(0,l.VO)(e),s[0]=e,s[1]=t):t=s[1];let{data:n,isLoading:o}=(0,i.n$)(t);if(e&&!o){let e;return s[2]!==n?(e={isLoading:!1,getFieldExpression:(e,t,s)=>n?.includes(e)?a().format(`${void 0===s?"toString":s}(??.??)`,[e,t]):a().format("??[?]",[e,t])},s[2]=n,s[3]=e):e=s[3],e}{let e;return s[4]!==o?(e={isLoading:o,getFieldExpression:void 0},s[4]=o,s[5]=e):e=s[5],e}}},41029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=s(80842).Ay},43370:(e,t,s)=>{"use strict";s.d(t,{A:()=>k});var r=s(6029),n=s(75155),a=s(55729),l=s(1909),i=s(66692),o=s(54167),c=s(3635),d=s(21604),u=s(1885),m=s(37659),h=s(94193),x=s(8737),p=s(92917),g=s(52154);function f(e){let t,s,l,i,o,c,d,f,v,j,S,w,_,E,C,k,N,A,T,$,z,L,I,M,R=(0,n.c)(86),{inputRef:D,value:P,onChange:O,placeholder:F,autocompleteOptions:V,size:B,aboveSuggestions:W,belowSuggestions:H,showSuggestionsOnEmpty:q,suggestionsHeader:X,zIndex:Y,onLanguageChange:J,language:K,showHotkey:G,onSubmit:Z,queryHistoryType:U,"data-testid":Q}=e,ee=void 0===F?"Search your events for anything...":F,et=void 0===B?"sm":B,es=void 0===X?"Properties":X,er=void 0===Y?999:Y,[en,ea]=(0,a.useState)(!1),[el,ei]=(0,a.useState)(!1);R[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{ea(e),ei(e)},R[0]=t):t=R[0];let eo=t,[ec,ed]=(0,a.useState)("auto"),[eu,em]=(0,a.useState)(720),[eh,ex]=(0,a.useState)(-1),[ep,eg]=(0,a.useState)(-1),[ef,ey]=(0,p.mk)(U);e:{let e;if(!U||!ef){let e;R[1]===Symbol.for("react.memo_cache_sentinel")?(e=[],R[1]=e):e=R[1],s=e;break e}R[2]!==ef?(e=ef.map(b),R[2]=ef,R[3]=e):e=R[3],s=e}let eb=s,ev=null!=P&&0===P.length&&eb.length>0&&U;R[4]!==V?(l=new u.A(V??[],{keys:["value"],threshold:0,ignoreLocation:!0}),R[4]=V,R[5]=l):l=R[5];let ej=l,eS=(0,p.d7)(P??"",200);if(R[6]!==V||R[7]!==eS||R[8]!==ej||R[9]!==q){t:{let e=eS.split(" "),t=e[e.length-1];if(0===t.length&&q){let e;R[11]!==V?(e=V??[],R[11]=V,R[12]=e):e=R[12],i=e;break t}i=ej.search(t).map(y)}R[6]=V,R[7]=eS,R[8]=ej,R[9]=q,R[10]=i}else i=R[10];let ew=i;R[13]!==O||R[14]!==Z||R[15]!==ey?(o=e=>{eg(-1),O(e),ey(e),ei(!1),Z?.()},R[13]=O,R[14]=Z,R[15]=ey,R[16]=o):o=R[16];let e_=o;R[17]!==D||R[18]!==O||R[19]!==P?(c=e=>{ex(-1),O(null==P?e:P.split(" ").slice(0,-1).join(" ")+`${P.split(" ").length>1?" ":""}${e}`),D.current?.focus()},R[17]=D,R[18]=O,R[19]=P,R[20]=c):c=R[20];let eE=c,eC=(0,a.useRef)(null);R[21]!==D?(d=()=>{eC.current&&ed(eC.current.clientWidth),D.current&&em(D.current.clientWidth)},R[21]=D,R[22]=d):d=R[22],R[23]!==D||R[24]!==K||R[25]!==J?(f=[K,J,D],R[23]=D,R[24]=K,R[25]=J,R[26]=f):f=R[26],(0,a.useLayoutEffect)(d,f);let ek=eu>300?eu:720;return R[27]!==ek||R[28]!==er?(v={dropdown:{maxWidth:ek,width:"100%",zIndex:er}},R[27]=ek,R[28]=er,R[29]=v):v=R[29],R[30]===Symbol.for("react.memo_cache_sentinel")?(j={flexGrow:1,resize:"none"},R[30]=j):j=R[30],R[31]!==O?(S=e=>O(e.target.value),R[31]=O,R[32]=S):S=R[32],R[33]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{ex(-1),eg(-1),eo(!0)},_=()=>{ex(-1),eg(-1),eo(!1)},R[33]=w,R[34]=_):(w=R[33],_=R[34]),R[35]!==eE||R[36]!==Z||R[37]!==U||R[38]!==eh||R[39]!==ey||R[40]!==ew||R[41]!==P?(E=e=>{"Escape"===e.key&&e.target instanceof HTMLTextAreaElement&&(e.preventDefault(),ei(!1),e.target.blur()),"Tab"===e.key&&e.target instanceof HTMLTextAreaElement&&ew.length>0&&eh<ew.length&&eh>=0&&(e.preventDefault(),eE(ew[eh].value)),"Enter"===e.key&&e.target instanceof HTMLTextAreaElement&&(ew.length>0&&eh<ew.length&&eh>=0?(e.preventDefault(),eE(ew[eh].value)):e.shiftKey||(e.preventDefault(),U&&P&&ey(P),Z?.())),"ArrowDown"===e.key&&e.target instanceof HTMLTextAreaElement&&ew.length>0&&ex(Math.min(eh+1,ew.length-1,9)),"ArrowUp"===e.key&&e.target instanceof HTMLTextAreaElement&&ew.length>0&&ex(Math.max(eh-1,0))},R[35]=eE,R[36]=Z,R[37]=U,R[38]=eh,R[39]=ey,R[40]=ew,R[41]=P,R[42]=E):E=R[42],R[43]!==en||R[44]!==K||R[45]!==J||R[46]!==G?(C=null!=K&&null!=J?(0,r.jsx)("div",{ref:eC,children:(0,r.jsx)(g.A,{showHotkey:G&&en,language:K,onLanguageChange:J})}):void 0,R[43]=en,R[44]=K,R[45]=J,R[46]=G,R[47]=C):C=R[47],R[48]!==Q||R[49]!==D||R[50]!==ee||R[51]!==ec||R[52]!==et||R[53]!==S||R[54]!==E||R[55]!==C||R[56]!==P?(k=(0,r.jsx)(m.A.Target,{children:(0,r.jsx)(h.T,{ref:D,placeholder:ee,className:"fs-8",value:P,size:et,autosize:!0,minRows:1,maxRows:4,style:j,"data-testid":Q,onChange:S,onFocus:w,onBlur:_,onKeyDown:E,rightSectionWidth:ec,rightSection:C})}),R[48]=Q,R[49]=D,R[50]=ee,R[51]=ec,R[52]=et,R[53]=S,R[54]=E,R[55]=C,R[56]=P,R[57]=k):k=R[57],R[58]!==W?(N=null!=W&&(0,r.jsx)("div",{className:"d-flex p-2 flex-wrap px-3",children:W}),R[58]=W,R[59]=N):N=R[59],R[60]!==eE||R[61]!==eh||R[62]!==ew||R[63]!==es?(A=ew.length>0&&(0,r.jsxs)("div",{className:"border-top border-dark fs-8 py-2",children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between px-3 mb-2",children:[(0,r.jsx)("div",{className:"me-2 text-light",children:es}),ew.length>10&&(0,r.jsxs)("div",{className:"text-muted",children:["(Showing Top ",10,")"]})]}),ew.slice(0,10).map((e,t)=>{let{value:s,label:n}=e;return(0,r.jsx)("div",{className:`py-2 px-3 ${eh===t?"bg-muted":""}`,role:"button",onMouseOver:()=>{ex(t)},onClick:()=>{eE(s)},children:(0,r.jsx)("span",{className:"me-1",children:n})},s)})]}),R[60]=eE,R[61]=eh,R[62]=ew,R[63]=es,R[64]=A):A=R[64],R[65]!==A?(T=(0,r.jsx)("div",{children:A}),R[65]=A,R[66]=T):T=R[66],R[67]!==H?($=null!=H&&(0,r.jsx)("div",{className:"border-top px-3 pt-2 pb-1 fs-8 d-flex align-items-center text-muted flex-wrap",children:H}),R[67]=H,R[68]=$):$=R[68],R[69]!==e_||R[70]!==eb||R[71]!==ep||R[72]!==ev?(z=ev&&(0,r.jsxs)("div",{className:"border-top border-dark fs-8 py-2",children:[(0,r.jsx)("div",{className:"text-muted fs-8 fw-bold me-1 px-3",children:"Search History:"}),eb.map((e,t)=>{let{value:s,label:n}=e;return(0,r.jsx)(x.N,{className:`d-block w-100 text-start text-muted fw-normal px-3 py-2 fs-8 ${ep===t?"bg-muted":""}`,onMouseOver:()=>eg(t),onClick:()=>e_(s),children:(0,r.jsx)("span",{className:"me-1 text-truncate",children:n})},s)})]}),R[69]=e_,R[70]=eb,R[71]=ep,R[72]=ev,R[73]=z):z=R[73],R[74]!==z?(L=(0,r.jsx)("div",{children:z}),R[74]=z,R[75]=L):L=R[75],R[76]!==N||R[77]!==T||R[78]!==$||R[79]!==L?(I=(0,r.jsxs)(m.A.Dropdown,{className:"p-0",children:[N,T,$,L]}),R[76]=N,R[77]=T,R[78]=$,R[79]=L,R[80]=I):I=R[80],R[81]!==el||R[82]!==v||R[83]!==k||R[84]!==I?(M=(0,r.jsxs)(m.A,{opened:el,onChange:ei,position:"bottom-start",offset:8,width:"target",withinPortal:!0,closeOnClickOutside:!0,closeOnEscape:!0,styles:v,children:[k,I]}),R[81]=el,R[82]=v,R[83]=k,R[84]=I,R[85]=M):M=R[85],M}function y(e){return e.item}function b(e){return{value:e,label:e}}var v=s(78550);let j=Date.now();function S(e){let{databaseName:t,tableName:s,connectionId:r}=e;return{connection:r,from:{databaseName:t,tableName:s},timestampValueExpression:"",select:"",where:"",dateRange:[new Date(j-432e5),new Date(j)]}}function w(e){return{value:e,label:e}}function _(e){return null!==e.jsType}class E{formatFieldValue(e){return e.path.join(".")}formatFieldLabel(e){return`${e.path.join(".")} (${e.jsType})`}formatKeyValPair(e,t){return`${e}:"${t}"`}}let C=new E;function k(e){let t,s,u,m,h,x,g,y,b,j,E,k,N,A,T,$,z,L,I,M,R,D,P,O,F,V,B,W,H,q,X,Y,J,K,G,Z,U,Q=(0,n.c)(78);Q[0]!==e?({tableConnection:E,tableConnections:k,placeholder:b,size:j,zIndex:N,language:m,onLanguageChange:h,enableHotkey:u,onSubmit:x,additionalSuggestions:t,queryHistoryType:y,"data-testid":s,...g}=e,Q[0]=e,Q[1]=t,Q[2]=s,Q[3]=u,Q[4]=m,Q[5]=h,Q[6]=x,Q[7]=g,Q[8]=y,Q[9]=b,Q[10]=j,Q[11]=E,Q[12]=k,Q[13]=N):(t=Q[1],s=Q[2],u=Q[3],m=Q[4],h=Q[5],x=Q[6],g=Q[7],y=Q[8],b=Q[9],j=Q[10],E=Q[11],k=Q[12],N=Q[13]);let ee=void 0===b?"Search your events for anything...":b,et=void 0===j?"sm":j,{field:es}=(0,l.as)(g),{onChange:er,value:en}=es,ea=(0,v.Ge)(),el=(0,a.useRef)(null),[ei,eo]=(0,a.useState)(""),ec=E||k;Q[14]!==t||Q[15]!==ec?(A={tableConnection:ec,additionalSuggestions:t},Q[14]=t,Q[15]=ec,Q[16]=A):A=Q[16];let ed=function(e,t,s){let r,l,i,o,c,d,u,m,h,x,g,f,y,b,j=(0,n.c)(39),{tableConnection:E,additionalSuggestions:C}=s;j[0]!==E?(r=E?Array.isArray(E)?E:[E]:[],j[0]=E,j[1]=r):r=j[1];let{data:k}=(0,v.Sh)(r);if(j[2]!==C||j[3]!==k||j[4]!==e){let t=(k??[]).filter(_);l=new Map,i=[...t.map(t=>{let s={value:e.formatFieldValue(t),label:e.formatFieldLabel(t)};return l.set(s.value,t),s}),...C?.map(w)??[]],j[2]=C,j[3]=k,j[4]=e,j[5]=l,j[6]=i}else l=j[5],i=j[6];let N=i;j[7]!==l||j[8]!==N?(o={fieldCompleteOptions:N,fieldCompleteMap:l},j[7]=l,j[8]=N,j[9]=o):o=j[9];let{fieldCompleteOptions:A,fieldCompleteMap:T}=o,[$,z]=(0,a.useState)(null);j[10]!==T||j[11]!==t?(c=()=>{let e=T.get(t);e&&z(e)},d=[T,t],j[10]=T,j[11]=t,j[12]=c,j[13]=d):(c=j[12],d=j[13]),(0,a.useEffect)(c,d),j[14]!==e||j[15]!==$||j[16]!==t?(u=()=>{$&&(t.startsWith(e.formatFieldValue($))||z(null))},m=[$,z,t,e],j[14]=e,j[15]=$,j[16]=t,j[17]=u,j[18]=m):(u=j[17],m=j[18]),(0,a.useEffect)(u,m);let L=Array.isArray(E)?E.length>0?E[0]:void 0:E;j[19]!==L?(h=L??{tableName:"",databaseName:"",connectionId:""},j[19]=L,j[20]=h):h=j[20];let{data:I}=(0,v.n$)(h);j[21]!==I||j[22]!==$?(x=$&&I?[(0,p.uc)($.path,I)]:[],j[21]=I,j[22]=$,j[23]=x):x=j[23];let M=x;j[24]!==E?(g=(0,p.$r)(E).map(S),j[24]=E,j[25]=g):g=j[25];let R=g;j[26]!==R||j[27]!==M?(f={chartConfigs:R,keys:M},j[26]=R,j[27]=M,j[28]=f):f=j[28];let{data:D}=(0,v.nT)(f);e:{let t;if(!D||!$){y=A;break e}if(j[29]!==e||j[30]!==$||j[31]!==D){let s;j[33]!==e||j[34]!==$?(s=t=>t.value.flatMap(t=>{if("string"==typeof t){let s=e.formatKeyValPair(e.formatFieldValue($),t);return[{value:s,label:s}]}if("object"!=typeof t)return[];{let s=[];for(let[r,n]of Object.entries(t)){if("string"!=typeof r||"string"!=typeof n)return console.error("unknown type for autocomplete object ",t),[];let a=structuredClone($);a.path.push(r);let l=e.formatKeyValPair(e.formatFieldValue(a),n);s.push({value:l,label:l})}return s}}),j[33]=e,j[34]=$,j[35]=s):s=j[35],t=D.flatMap(s),j[29]=e,j[30]=$,j[31]=D,j[32]=t}else t=j[32];y=t}let P=y;return j[36]!==A||j[37]!==P?(b=(0,v.Ii)([A,P]),j[36]=A,j[37]=P,j[38]=b):b=j[38],b}(C,null!=en?`${en}`:"",A);Q[17]!==ea||Q[18]!==E||Q[19]!==en?(T=()=>{E&&(0,o.oU)({query:en,tableConnection:E,metadata:ea}).then(e=>{eo(e)})},$=[en,E,ea],Q[17]=ea,Q[18]=E,Q[19]=en,Q[20]=T,Q[21]=$):(T=Q[20],$=Q[21]),(0,a.useEffect)(T,$),Q[22]!==u?(z=()=>{u&&el.current?.focus()},Q[22]=u,Q[23]=z):z=Q[23],Q[24]===Symbol.for("react.memo_cache_sentinel")?(L={preventDefault:!0},Q[24]=L):L=Q[24],Q[25]!==u?(I=[u],Q[25]=u,Q[26]=I):I=Q[26],(0,i.vC)("/",z,L,I),Q[27]===Symbol.for("react.memo_cache_sentinel")?(M=(0,r.jsx)("div",{className:"text-muted fs-8 fw-bold me-1",children:"Searching for:"}),Q[27]=M):M=Q[27];let eu=""===ei?"Matching all events, enter a query to search.":ei;return Q[28]!==eu?(R=(0,r.jsxs)(r.Fragment,{children:[M,(0,r.jsx)("div",{className:"text-muted fs-8",children:eu})]}),Q[28]=eu,Q[29]=R):R=Q[29],Q[30]===Symbol.for("react.memo_cache_sentinel")?(D=(0,r.jsx)("div",{className:"me-2 mb-2 text-light",children:"Examples:"}),Q[30]=D):D=Q[30],Q[31]===Symbol.for("react.memo_cache_sentinel")?(P=(0,r.jsx)("span",{className:"me-1",children:"Full Text:"}),Q[31]=P):P=Q[31],Q[32]!==er||Q[33]!==en?(O=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[P,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"my log")},children:"my log"})]}),Q[32]=er,Q[33]=en,Q[34]=O):O=Q[34],Q[35]===Symbol.for("react.memo_cache_sentinel")?(F=(0,r.jsx)("span",{className:"me-1",children:"Substring:"}),Q[35]=F):F=Q[35],Q[36]!==er||Q[37]!==en?(V=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[F,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"*err*")},children:"*err*"})]}),Q[36]=er,Q[37]=en,Q[38]=V):V=Q[38],Q[39]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.jsx)("span",{className:"me-1",children:"Exact:"}),Q[39]=B):B=Q[39],Q[40]!==er||Q[41]!==en?(W=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[B,(0,r.jsxs)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+'level:"info"')},children:["level:",'"',"info",'"']})]}),Q[40]=er,Q[41]=en,Q[42]=W):W=Q[42],Q[43]===Symbol.for("react.memo_cache_sentinel")?(H=(0,r.jsx)("span",{className:"me-1",children:"Not:"}),Q[43]=H):H=Q[43],Q[44]!==er||Q[45]!==en?(q=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[H,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"-level:info")},children:"-level:info"})]}),Q[44]=er,Q[45]=en,Q[46]=q):q=Q[46],Q[47]===Symbol.for("react.memo_cache_sentinel")?(X=(0,r.jsx)("span",{className:"me-1",children:"Existence:"}),Q[47]=X):X=Q[47],Q[48]!==er||Q[49]!==en?(Y=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[X,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+"service:*")},children:"service:*"})]}),Q[48]=er,Q[49]=en,Q[50]=Y):Y=Q[50],Q[51]===Symbol.for("react.memo_cache_sentinel")?(J=(0,r.jsx)("span",{className:"me-1",children:"Boolean:"}),Q[51]=J):J=Q[51],Q[52]!==er||Q[53]!==en?(K=(0,r.jsxs)("div",{className:"mb-2 me-2",children:[J,(0,r.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{er(en+(en.length>0?" ":"")+'("foo" OR "bar")')},children:"(foo OR bar)"})]}),Q[52]=er,Q[53]=en,Q[54]=K):K=Q[54],Q[55]===Symbol.for("react.memo_cache_sentinel")?(G=(0,r.jsx)("a",{className:"text-muted mb-2",target:"_blank",href:"https://clickhouse.com/docs/use-cases/observability/clickstack/search",rel:"noreferrer",children:(0,r.jsxs)(c.Y,{gap:5,children:[(0,r.jsx)(d.A,{size:14}),(0,r.jsx)("span",{children:"Docs"})]})}),Q[55]=G):G=Q[55],Q[56]!==O||Q[57]!==V||Q[58]!==W||Q[59]!==q||Q[60]!==Y||Q[61]!==K?(Z=(0,r.jsxs)(r.Fragment,{children:[D,O,V,W,q,Y,K,G]}),Q[56]=O,Q[57]=V,Q[58]=W,Q[59]=q,Q[60]=Y,Q[61]=K,Q[62]=Z):Z=Q[62],Q[63]!==ed||Q[64]!==s||Q[65]!==u||Q[66]!==m||Q[67]!==er||Q[68]!==h||Q[69]!==x||Q[70]!==ee||Q[71]!==y||Q[72]!==et||Q[73]!==R||Q[74]!==Z||Q[75]!==en||Q[76]!==N?(U=(0,r.jsx)(f,{inputRef:el,value:en,onChange:er,placeholder:ee,autocompleteOptions:ed,size:et,zIndex:N,language:m,showHotkey:u,onLanguageChange:h,onSubmit:x,queryHistoryType:y,"data-testid":s,aboveSuggestions:R,belowSuggestions:Z}),Q[63]=ed,Q[64]=s,Q[65]=u,Q[66]=m,Q[67]=er,Q[68]=h,Q[69]=x,Q[70]=ee,Q[71]=y,Q[72]=et,Q[73]=R,Q[74]=Z,Q[75]=en,Q[76]=N,Q[77]=U):U=Q[77],U}},46061:(e,t,s)=>{"use strict";s.d(t,{rD:()=>eV,Ho:()=>eO,YB:()=>eF});var r=s(6029),n=s(75155),a=s(55729),l=s(75828),i=s.n(l),o=s(92799),c=s(84450),d=s.n(c),u=s(90310),m=s.n(u),h=s(67264),x=s.n(h),p=s(66692),g=s(2893),f=s(47122),y=s(14693),b=s(31292),v=s(40684),j=s(92205),S=s(35467),w=s(76089),_=s(27166),E=s(78253),C=s(60481),k=s(3635),N=s(8737),A=s(63085),T=s(43517),$=s(24589),z=s(94502),L=s(73454),I=s(6620),M=s(38314),R=s(24602),D=s(40387),P=s(95316),O=s(12482),F=s(39696),V=s(79220),B=s(21440),W=s(6876),H=s(61410),q=s(91021),X=s(55024),Y=s(78550),J=s(78744),K=s(31451),G=s(70727),Z=s(39785),U=s(81973),Q=s(68593),ee=s(7565),et=s(57820),es=s(92917),er=s(37659),en=s(78341),ea=s(45172),el=s(9385),ei=s(96413),eo=s(50374),ec=s(90515),ed=s(74620),eu=s.n(ed);let em=e=>{let t,s,a,l,o,c=(0,n.c)(19),{onClick:d,className:u,title:m,tabIndex:h,children:x,variant:p,isActive:g,iconSize:f}=e,y=void 0===h?-1:h,b=void 0===p?"default":p,v=void 0!==g&&g,j=void 0===f?14:f;c[0]!==d?(t=e=>{e.stopPropagation(),e.preventDefault(),d(e)},c[0]=d,c[1]=t):t=c[1];let S=t;c[2]!==u||c[3]!==v||c[4]!==b?(s="copy"===b?i()(eu().iconActionButton,{[eu().copied]:v}):u,c[2]=u,c[3]=v,c[4]=b,c[5]=s):s=c[5];let w=s,_=!m;return c[6]!==x||c[7]!==j||c[8]!==v?(a=v?(0,r.jsx)(ec.A,{size:j}):x,c[6]=x,c[7]=j,c[8]=v,c[9]=a):a=c[9],c[10]!==w||c[11]!==S||c[12]!==a||c[13]!==y?(l=(0,r.jsx)(N.N,{onClick:S,component:"div",className:w,tabIndex:y,role:"button",children:a}),c[10]=w,c[11]=S,c[12]=a,c[13]=y,c[14]=l):l=c[14],c[15]!==_||c[16]!==l||c[17]!==m?(o=(0,r.jsx)(A.m,{label:m,position:"top",withArrow:!0,disabled:_,openDelay:300,closeDelay:100,fz:"xs",children:l}),c[15]=_,c[16]=l,c[17]=m,c[18]=o):o=c[18],o},eh=({children:e,cellValue:t,tableContainerRef:s,wrapLinesEnabled:n,columnName:l,isChart:o=!1})=>{let[c,{close:d,open:u}]=(0,en.j)(!1),[m,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)(!1),g=(0,a.useRef)(void 0),f=(0,a.useRef)(void 0);(0,a.useEffect)(()=>()=>{g.current&&clearTimeout(g.current),f.current&&clearTimeout(f.current)},[]);let{onPropertyAddClick:y}=(0,a.useContext)(eo.D),b=l&&y&&null!=t,v=()=>{x||(g.current&&clearTimeout(g.current),u())},j=()=>{g.current=setTimeout(()=>{d()},100)},S=()=>{d(),p(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{p(!1)},1e3)},w=async()=>{try{let e="string"==typeof t?t:String(t??"");await navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)}catch(e){console.error("Failed to copy to clipboard:",e)}},_=b?3:1;return o?(0,r.jsx)("div",{className:i()(eu().fieldText,{[eu().chart]:o}),style:{display:"flex",alignItems:"center"},children:e}):(0,r.jsx)("div",{className:i()(eu().fieldText,{[eu().truncated]:!n&&!o,[eu().wrapped]:n,[eu().chart]:o}),children:(0,r.jsxs)(er.A,{width:20*_+4*(_-1),position:"top-start",offset:5,opened:c,portalProps:{target:s??void 0},closeOnClickOutside:!1,clickOutsideEvents:[],children:[(0,r.jsx)(er.A.Target,{children:(0,r.jsx)("span",{onMouseEnter:v,onMouseLeave:j,onClick:S,tabIndex:-1,"aria-hidden":"true",style:{cursor:"pointer"},children:e})}),(0,r.jsx)(er.A.Dropdown,{style:{pointerEvents:"auto"},onMouseEnter:v,onMouseLeave:j,className:eu().fieldTextPopover,children:(0,r.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,r.jsx)(em,{onClick:w,variant:"copy",isActive:m,title:m?"Copied!":"Copy field value",children:(0,r.jsx)(ea.A,{size:14})}),b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(em,{onClick:()=>{b&&(y(l,"string"==typeof t?t:String(t??""),"include"),S())},variant:"copy",title:"Toggle filter for this value",children:(0,r.jsx)(el.A,{size:14})}),(0,r.jsx)(em,{onClick:()=>{b&&(y(l,"string"==typeof t?t:String(t??""),"exclude"),S())},variant:"copy",title:"Exclude this value",children:(0,r.jsx)(ei.A,{size:14})})]})]})})]})})};var ex=s(56795);let ep=({row:e,getRowWhere:t,sourceId:s,isWrapped:n,onToggleWrap:l})=>{let[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),u=async()=>{try{let{[G.ZO.ID]:t,...s}=e,r=Object.entries(s).reduce((e,[t,s])=>{if("string"==typeof s&&s.startsWith("{")||s.startsWith("["))try{e[t]=JSON.parse(s)}catch{e[t]=s}else e[t]=s;return e},{}),n=JSON.stringify(r,null,2);await navigator.clipboard.writeText(n),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy row data to clipboard:",e)}},m=async()=>{try{let r=t(e),n=new URL(window.location.href);n.searchParams.set("rowWhere",r.where),s&&n.searchParams.set("rowSource",s),await navigator.clipboard.writeText(n.toString()),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error("Failed to copy URL to clipboard:",e)}};return(0,r.jsxs)("div",{className:eu().rowButtons,children:[!n&&(0,r.jsx)(em,{onClick:l,variant:"copy",title:"Wrap All Lines",children:(0,r.jsx)(R.A,{size:16})}),(0,r.jsx)(em,{onClick:u,variant:"copy",isActive:i,title:i?"Copied entire row as JSON!":"Copy entire row as JSON",children:(0,r.jsx)(ea.A,{size:16})}),(0,r.jsx)(em,{onClick:m,variant:"copy",isActive:c,title:c?"Copied shareable link!":"Copy shareable link to this specific row",children:(0,r.jsx)(ex.A,{size:16})})]})};var eg=s(48423),ef=s(22623),ey=s(59029),eb=s(74011),ev=s(97767),ej=s(67872);let eS=({searchQuery:e,onSearchChange:t,matchIndices:s,currentMatchIndex:n,onPreviousMatch:l,onNextMatch:i,isVisible:o,onVisibilityChange:c,containerRef:d})=>{let[u,m]=(0,a.useState)(!1),h=(0,a.useRef)(null),x=o??u,p=(0,a.useCallback)(()=>{void 0!==o?c?.(!1):m(!1),t("")},[o,t,c]),g=(0,a.useCallback)(()=>{void 0!==o?c?.(!0):m(!0),setTimeout(()=>{h.current?.focus(),h.current?.select()},0)},[o,c]),f=(0,a.useCallback)(e=>{if((e.metaKey||e.ctrlKey)&&"f"===e.key){if(d&&!(0,es.dS)(d))return;e.preventDefault(),g()}"Escape"===e.key&&x&&p()},[x,p,g]);(0,a.useEffect)(()=>(window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}),[f]);let y=(0,a.useCallback)(e=>{"Enter"===e.key&&s.length>0&&(e.shiftKey?l():i(),e.preventDefault())},[s.length,l,i]);return x?(0,r.jsx)(ef.t,{p:"xs",withBorder:!0,shadow:"md",pos:"absolute",top:8,right:8,style:{zIndex:2},miw:400,maw:500,role:"search","aria-label":"Table search",children:(0,r.jsxs)(k.Y,{gap:"xs",align:"center",wrap:"nowrap",children:[(0,r.jsx)(ey.k,{ref:h,placeholder:"Find in table...",value:e,onChange:e=>t(e.target.value),onKeyDown:y,size:"xs",style:{flex:1,minWidth:0},"aria-label":"Search table contents","aria-describedby":s.length>0?"search-match-count":void 0,rightSection:e?(0,r.jsx)(N.N,{onClick:()=>t(""),display:"flex",style:{alignItems:"center"},title:"Clear search","aria-label":"Clear search",children:(0,r.jsx)(eb.A,{size:14})}):null}),s.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(T.E,{id:"search-match-count",size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},"aria-live":"polite",children:[n+1," of ",s.length]}),(0,r.jsxs)(k.Y,{gap:4,children:[(0,r.jsx)(N.N,{onClick:l,display:"flex",style:{alignItems:"center"},title:"Previous match (Shift+Enter)","aria-label":"Previous match",children:(0,r.jsx)(ev.A,{size:16})}),(0,r.jsx)(N.N,{onClick:i,display:"flex",style:{alignItems:"center"},title:"Next match (Enter)","aria-label":"Next match",children:(0,r.jsx)(ej.A,{size:16})})]})]}):e?(0,r.jsx)(T.E,{size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},role:"status","aria-live":"polite",children:"No matches"}):null,(0,r.jsx)(N.N,{onClick:p,display:"flex",style:{alignItems:"center"},title:"Close search (Esc)","aria-label":"Close search",children:(0,r.jsx)(eb.A,{size:16})})]})}):null},ew=e=>{let t,s,a,l=(0,n.c)(17),{searchQuery:i,matchIndices:o,currentMatchIndex:c,dedupedRows:d,tableRows:u,getRowId:m,onMatchClick:h}=e;if(!i||0===o.length||0===u.length)return null;if(l[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",zIndex:1},l[0]=t):t=l[0],l[1]!==c||l[2]!==d||l[3]!==m||l[4]!==o||l[5]!==h||l[6]!==u){let e;l[8]!==c||l[9]!==d||l[10]!==m||l[11]!==o.length||l[12]!==h||l[13]!==u?(e=(e,t)=>{let s=d[e];if(!s)return null;let n=u.findIndex(e=>m(e.original)===m(s));if(-1===n)return null;let a=n/u.length*100,l=100/u.length,i=t===c;return(0,r.jsx)(C.a,{pos:"absolute",top:`${a}%`,right:0,w:"100%",h:`${l}%`,bg:i?"var(--mantine-color-orange-5)":"var(--mantine-color-yellow-5)",style:{cursor:"pointer",pointerEvents:"auto",minHeight:1,maxHeight:4},onClick:()=>h(t),title:`Match ${t+1} of ${o.length}`},`match-indicator-${e}`)},l[8]=c,l[9]=d,l[10]=m,l[11]=o.length,l[12]=h,l[13]=u,l[14]=e):e=l[14],s=o.map(e),l[1]=c,l[2]=d,l[3]=m,l[4]=o,l[5]=h,l[6]=u,l[7]=s}else s=l[7];return l[15]!==s?(a=(0,r.jsx)(C.a,{pos:"absolute",right:0,top:0,bottom:0,w:8,style:t,children:s}),l[15]=s,l[16]=a):a=l[16],a};var e_=s(88339),eE=s(17421),eC=s(41038),ek=s(81055),eN=s(70114);let eA=(0,a.memo)(e=>{let t,s,a,l,o,c=(0,n.c)(17),{columnsLength:d,children:u,virtualKey:m,source:h,rowId:x,measureElement:p,virtualIndex:g}=e,f=(()=>{let e,t=(0,n.c)(3),[,s]=(0,eC.ZA)("rowWhere"),[,r]=(0,eC.ZA)("rowSource");return t[0]!==s||t[1]!==r?(e=(e,t)=>{s(e),r(t??null)},t[0]=s,t[1]=r,t[2]=e):e=t[2],e})(),y=`expanded-row-${x}`,b=`${m}-expanded`;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=i()("mx-2 mb-2 rounded",eu().expandedRowContent),c[0]=t):t=c[0],c[1]!==f||c[2]!==x||c[3]!==h?.id?(s=f&&(0,r.jsx)("button",{type:"button",className:i()("position-absolute top-0 end-0 mt-1 me-1 p-1 border-0 bg-transparent text-muted rounded",eu().expandButton),onClick:()=>f(x,h?.id),title:"Open in sidebar","aria-label":"Open in sidebar",style:{zIndex:1,fontSize:"12px",lineHeight:1},children:(0,r.jsx)(ek.A,{size:14})}),c[1]=f,c[2]=x,c[3]=h?.id,c[4]=s):s=c[4],c[5]!==u||c[6]!==s?(a=(0,r.jsx)("div",{className:t,children:(0,r.jsx)("div",{className:"position-relative",children:(0,r.jsxs)("div",{className:"px-3 pt-2 position-relative",children:[s,u]})})}),c[5]=u,c[6]=s,c[7]=a):a=c[7],c[8]!==d||c[9]!==a?(l=(0,r.jsx)("td",{colSpan:d,className:"p-0 border-0",children:a}),c[8]=d,c[9]=a,c[10]=l):l=c[10],c[11]!==p||c[12]!==y||c[13]!==b||c[14]!==l||c[15]!==g?(o=(0,r.jsx)("tr",{"data-testid":y,className:eu().expandedRow,"data-index":g,ref:p,children:l},b),c[11]=p,c[12]=y,c[13]=b,c[14]=l,c[15]=g,c[16]=o):o=c[16],o}),eT=(0,a.memo)(e=>{let t,s,a,l,o,c,d=(0,n.c)(16),{rowId:u,isExpanded:m,highlightedLineId:h,toggleRowExpansion:x}=e,p=h===u,g=h!==u;d[0]!==m||d[1]!==p||d[2]!==g?(t=i()(eu().expandButton,{[eu().expanded]:m,"text-brand":p,"text-muted":g}),d[0]=m,d[1]=p,d[2]=g,d[3]=t):t=d[3],d[4]!==u||d[5]!==x?(s=e=>{e.stopPropagation(),x(u)},d[4]=u,d[5]=x,d[6]=s):s=d[6];let f=`${m?"Collapse":"Expand"} log details`;return d[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(eN.A,{size:16}),d[7]=a):a=d[7],d[8]!==m||d[9]!==t||d[10]!==s||d[11]!==f?(l=(0,r.jsx)("button",{type:"button",className:t,onClick:s,"aria-expanded":m,"aria-label":f,children:a}),d[8]=m,d[9]=t,d[10]=s,d[11]=f,d[12]=l):l=d[12],d[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("span",{className:eu().expandButtonSeparator}),d[13]=o):o=d[13],d[14]!==l?(c=(0,r.jsxs)("span",{className:"d-flex align-items-center justify-content-center",children:[l,o]}),d[14]=l,d[15]=c):c=d[15],c});eT.displayName="ExpandButton";var e$=s(61629);let ez="NULL",eL={duration:e=>e.duration>=0?e.duration:ez,severityText:e=>e.severityText??e.statusCode,default:(e,t)=>e[t]},eI=e=>e[G.ZO.ID];function eM(e,t){return(eL[e]??eL.default)(t,e)}let eR=()=>null,eD=e=>{let t,s,a,l,i,o,c,d,u,m,h=(0,n.c)(17),{data:x,dateRange:p,color:S}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={position:"relative",width:"100%",height:"100%"},s={position:"absolute",left:0,right:0,bottom:0,top:0},h[0]=t,h[1]=s):(t=h[0],s=h[1]),h[2]===Symbol.for("react.memo_cache_sentinel")?(a={top:4,left:0,right:4,bottom:0},h[2]=a):a=h[2];let w=p[0].getTime()/1e3,_=p[1].getTime()/1e3;h[3]!==w||h[4]!==_?(l=[w,_],h[3]=w,h[4]=_,h[5]=l):l=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(i={fontSize:12,fontFamily:"IBM Plex Mono, monospace"},h[6]=i):i=h[6],h[7]!==l?(o=(0,r.jsx)(g.W,{dataKey:"bucket",domain:l,interval:"preserveStartEnd",scale:"time",type:"number",tickFormatter:eB,minTickGap:50,tick:i}),h[7]=l,h[8]=o):o=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(f.h,{width:40,minTickGap:25,tickFormatter:eW,tick:{fontSize:12,fontFamily:"IBM Plex Mono, monospace"}}),h[9]=c):c=h[9];let E=S||es.lm[0];return h[10]!==E?(d=(0,r.jsx)(y.y,{isAnimationActive:!1,dataKey:"count",stackId:"a",fill:E,maxBarSize:24}),h[10]=E,h[11]=d):d=h[11],h[12]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)(b.m,{content:(0,r.jsx)(eR,{})}),h[12]=u):u=h[12],h[13]!==x||h[14]!==d||h[15]!==o?(m=(0,r.jsx)("div",{style:t,children:(0,r.jsx)("div",{style:s,children:(0,r.jsx)(v.u,{width:"100%",height:"100%",minWidth:0,children:(0,r.jsxs)(j.E,{width:500,height:300,data:x,syncId:"hdx",syncMethod:"value",margin:a,children:[o,c,d,u]})})})}),h[13]=x,h[14]=d,h[15]=o,h[16]=m):m=h[16],m},eP=e=>{let t,s,a,l,i=(0,n.c)(12),{opened:o,onClose:c,config:d}=e;i[0]!==d?(t=["SqlModal",d],i[0]=d,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(s={queryKey:t,placeholderData:eH,enabled:o},i[2]=o,i[3]=t,i[4]=s):s=i[4];let{data:u,isLoading:m}=(0,q.zu)(d,s);return i[5]!==m||i[6]!==u?(a=u?(0,r.jsx)(e_.V,{data:u,enableCopy:!0}):m?(0,r.jsxs)("div",{className:"text-center my-2",children:[(0,r.jsx)("div",{className:"d-inline-block me-2",children:(0,r.jsx)(z.A,{size:14,className:"spin-animate"})}),"Loading SQL..."]}):(0,r.jsx)("div",{className:"text-center my-2",children:"No SQL available"}),i[5]=m,i[6]=u,i[7]=a):a=i[7],i[8]!==c||i[9]!==o||i[10]!==a?(l=(0,r.jsx)(_.a,{opened:o,onClose:c,title:"Generated SQL",size:"auto",children:a}),i[8]=c,i[9]=o,i[10]=a,i[11]=l):l=i[11],l},eO=(0,a.memo)(({tableId:e,displayedColumns:t,fetchNextPage:s,hasNextPage:l,highlightedLineId:c,isLive:u,isLoading:h,rows:x,generateRowId:g,onInstructionsClick:f,onRowDetailsClick:y,onScroll:b,onSettingsClick:v,onShowPatternsClick:j,wrapLines:w=!1,columnNameMap:_,showServiceColumn:O=!0,dedupRows:W,isError:H,error:Y,columnTypeMap:J,dateRange:K,loadingDate:U,config:er,onChildModalOpen:en,renderRowDetails:ea,source:el,onExpandedRowsChange:ei,collapseAllRows:eo,enableSorting:ec=!1,onSortingChange:ed,sortOrder:em,showExpandButton:ex=!0,getRowWhere:ef,variant:ey="default"})=>{let eb=(0,a.useMemo)(()=>{let e=new Set;return(W?x.filter(t=>{let s=g(t);return!e.has(s.where)&&(e.add(s.where),!0)}):x).map(e=>{let t=g(e);return{...e,[G.ZO.ID]:t.where,[G.ZO.ALIAS_WITH]:t.aliasWith}})},[x,W,g]),ev=(0,a.useCallback)(e=>{y?.(e)},[y]),{userPreferences:{isUTC:ej}}=(0,et.HW)(),[eC,ek]=(0,es.Mj)(`${e}-column-sizes`,{}),[eN,eL]=(0,a.useState)(null),eR=(0,a.useCallback)(e=>(e&&eL(e),()=>{eL(null)}),[]),{data:eO}=(0,q.Kc)(er),eF=(0,es.ZC)(u);(0,a.useEffect)(()=>{u&&!1===eF&&null!=eN&&(eN.scrollTop=0)},[u,eF,eN]);let eV=(0,a.useMemo)(()=>(function(e){let t={},s=Math.min(e.length,100);for(let r=0;r<s;r++){let s=e[r];Object.keys(s).forEach(e=>{let r=s[e];(r?.length||0)>0&&512>(r?.length||0)&&d()(r)&&null!=(0,es.lO)(r)&&(t[e]=(t[e]??0)+1)})}let r=0,n="";for(let[e,s]of Object.entries(t))s>r&&(r=s,n=e);if(r>0)return n})(eb),[eb]),{csvData:eB,maxRows:eW,isLimited:eH}=(0,X.u)(eb,t.map(e=>({dataKey:e,displayName:_?.[e]??e}))),{expandedRows:eq,toggleRowExpansion:eX,collapseAllRows:eY}=(e=>{let t,s,r,l,i=(0,n.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(t={},i[0]=t):t=i[0];let[o,c]=(0,a.useState)(t);i[1]!==e?(s=t=>{c(s=>{let r={...s,[t]:!s[t]},n=Object.values(r).some(Boolean);return e?.(n),r})},i[1]=e,i[2]=s):s=i[2];let d=s;i[3]!==e?(r=()=>{c({}),e?.(!1)},i[3]=e,i[4]=r):r=i[4];let u=r;return i[5]!==u||i[6]!==o||i[7]!==d?(l={expandedRows:o,toggleRowExpansion:d,collapseAllRows:u},i[5]=u,i[6]=o,i[7]=d,i[8]=l):l=i[8],l})(ei);(0,a.useEffect)(()=>{eo&&eY()},[eo,eY]);let eJ=function({rows:e,searchableColumns:t,debounceMs:s=300,onVisibilityChange:r}){let[n,l]=(0,a.useState)(""),[i]=(0,Z.o)(n,s),[o,c]=(0,a.useState)(0),[d,u]=(0,a.useState)([]),[m,h]=(0,a.useState)(!1),x=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(!i.trim()){u([]),c(0);return}let s=i.toLowerCase(),r=[];e.forEach((e,n)=>{t.map(t=>{let s=e[t];return null!=s?String(s).toLowerCase():""}).join(" ").includes(s)&&r.push(n)});let n=d.length;u(r),0===n&&r.length>0?(c(0),x.current=!0):r.length>0&&o>=r.length&&(c(r.length-1),x.current=!0)},[i,e,t]),(0,a.useEffect)(()=>{r?.(m)},[m,r]);let p=(0,a.useCallback)(e=>{l(e),e||(u([]),c(0),x.current=!1)},[]),g=(0,a.useCallback)(()=>{x.current=!0,c(e=>e>0?e-1:d.length-1)},[d.length]),f=(0,a.useCallback)(()=>{x.current=!0,c(e=>e<d.length-1?e+1:0)},[d.length]),y=(0,a.useCallback)(e=>{x.current=!0,c(e)},[]),b=(0,a.useCallback)(()=>{l(""),u([]),c(0),x.current=!1,h(!1)},[]),v=(0,a.useCallback)(()=>{x.current=!1},[]);return{searchQuery:i,inputValue:n,setInputValue:l,matchIndices:d,currentMatchIndex:o,isSearchVisible:m,setIsSearchVisible:h,shouldScrollToMatch:x.current,clearShouldScrollToMatch:v,handlePreviousMatch:g,handleNextMatch:f,handleMatchClick:y,handleSearchChange:p,resetSearch:b}}({rows:eb,searchableColumns:t,debounceMs:300}),eK=(0,a.useMemo)(()=>[...ex?[{id:"expand-btn",accessorKey:G.ZO.ID,header:()=>"",cell:e=>{let t=e.getValue(),s=eq[t]??!1;return(0,r.jsx)(eT,{rowId:t,isExpanded:s,highlightedLineId:c,toggleRowExpansion:eX})},size:32,enableResizing:!1,enableSorting:!1,meta:{className:"text-center"}}]:[],...t.map((e,s)=>{let n=J.get(e)?._type,a=n===S.A2.Date,l=e===eV;return{meta:{column:e,jsColumnType:n},id:eO?.[e]?`"${e}"`:e,enableSorting:n!==S.A2.Dynamic,accessorFn:m()(eM)(e),header:`${_?.[e]??e}${a?ej?" (UTC)":" (Local)":""}`,cell:t=>{let s=t.getValue();if("__hdx_pattern_trend"===e)return(0,r.jsx)("div",{style:{height:50,width:"100%"},children:(0,r.jsx)(eD,{data:s.data,dateRange:s.dateRange,color:(0,es.aw)(t.row.original.severityText??t.row.original.statusCode)})});if(a){let e=new Date(s);return(0,r.jsx)("span",{className:"text-muted",children:(0,r.jsx)(ee.H,{value:e,format:"withMs"})})}let n="string"==typeof s?s:`${s}`;if(e===eV)return(0,r.jsx)(e$.A,{level:n});let l=n.length>500?`${n.slice(0,500)}...`:n,o=!!eJ.searchQuery&&eJ.matchIndices.length>0&&eJ.matchIndices[eJ.currentMatchIndex]===t.row.index,c=eJ.searchQuery?((e,t,s={})=>{if(!t.trim())return e;let n=s.isCurrentMatch?s.currentMatchBackgroundColor||"var(--mantine-color-orange-5)":s.backgroundColor||"var(--mantine-color-yellow-3)",a=e.toLowerCase(),l=t.toLowerCase(),i=[],o=0,c=a.indexOf(l);for(;-1!==c;)c>o&&i.push(e.slice(o,c)),i.push((0,r.jsx)("mark",{style:{backgroundColor:n,color:s.textColor||"var(--color-text-inverted)",padding:0},children:e.slice(c,c+t.length)},`${c}-${o}`)),o=c+t.length,c=a.indexOf(l,o);return o<e.length&&i.push(e.slice(o)),i.length>0?(0,r.jsx)(r.Fragment,{children:i}):e})(l,eJ.searchQuery,{isCurrentMatch:o}):l;return(0,r.jsx)("span",{className:i()({"text-muted":s===ez}),children:c})},size:s===t.length-1?Q.k:eC[e]??(a?170:l?115:160)}})],[ej,c,t,eC,_,J,eV,eq,eX,ex,eO,eJ.searchQuery,eJ.matchIndices,eJ.currentMatchIndex]),eG=(0,a.useCallback)(e=>{if(e){let{scrollHeight:t,scrollTop:r,clientHeight:n}=e;t-r-n<500&&!h&&l&&s?.({cancelRefetch:!1})}},[s,h,l]);(0,a.useEffect)(()=>{eG(eN)},[eG,eN]);let eZ=(0,a.useMemo)(()=>{let t={data:eb,columns:eK,getCoreRowModel:(0,F.HT)(),enableSorting:ec,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(em??[]);ed?.(t??null)}else ed?.(e??null)},state:{sorting:em??[]},enableColumnResizing:!0,columnResizeMode:"onChange"};return e?{...t,state:{columnSizing:eC},onColumnSizingChange:e=>{let t=e instanceof Function?e():e;ek({...eC,...t})}}:t},[eK,eb,e,em,ec,ed,eC,ek]),eU=(0,V.N4)(eZ),{rows:eQ}=eU.getRowModel(),e0=(0,B.Te)({count:eQ.length,getScrollElement:(0,a.useCallback)(()=>eN,[eN]),estimateSize:(0,a.useCallback)(()=>23,[]),overscan:30,paddingEnd:20}),e1=e0.getVirtualItems(),e2=e0.getTotalSize(),[e3,e5]=(0,a.useMemo)(()=>e1.length>0?[Math.max(0,e1[0].start-e0.options.scrollMargin),Math.max(0,e2-e1[e1.length-1].end)]:[0,0],[e1,e0.options.scrollMargin,e2]),[e4,e6]=(0,a.useState)(!1),[e7,e8]=(0,es.Mj)(`${e}-wrap-lines`,w??!1),[e9,te]=(0,a.useState)(!1),tt=e=>{te(e),en?.(e)};(0,a.useEffect)(()=>{if(eJ.shouldScrollToMatch)if(eJ.matchIndices.length>0&&e0&&eJ.currentMatchIndex<eJ.matchIndices.length&&eJ.searchQuery.trim()){let e=eb[eJ.matchIndices[eJ.currentMatchIndex]];if(e){let t=eQ.findIndex(t=>eI(t.original)===eI(e));-1!==t?requestAnimationFrame(()=>{e0.scrollToIndex(t,{align:"center"}),eJ.clearShouldScrollToMatch()}):eJ.clearShouldScrollToMatch()}else eJ.clearShouldScrollToMatch()}else eJ.clearShouldScrollToMatch()},[eJ.shouldScrollToMatch,eJ.currentMatchIndex,eJ.matchIndices,eJ.searchQuery,eJ.clearShouldScrollToMatch,e0,eQ,eb]),(0,a.useEffect)(()=>{if(e4||!c||null==e0)return;let e=eb.findIndex(e=>eI(e)===c);-1==e&&c?eb.length<1e3&&!h&&l&&s?.({cancelRefetch:!1}):(e6(!0),null==e0.getVirtualItems().find(t=>t.index===e)&&e0.scrollToIndex(e,{align:"center"}))},[eb,c,s,e0,e4,h,l]);let ts=(0,a.useCallback)(e=>{if(null==c)return;let t=eb.findIndex(e=>eI(e)===c)+e;t<0||t>=eb.length||ev(eb[t])},[c,ev,eb]);return(0,p.vC)(["ArrowRight","ArrowDown","j"],e=>{e.preventDefault(),ts(1)}),(0,p.vC)(["ArrowLeft","ArrowUp","k"],e=>{e.preventDefault(),ts(-1)}),(0,r.jsx)(E.s,{direction:"column",h:"100%",children:(0,r.jsxs)(C.a,{pos:"relative",style:{flex:1,minHeight:0},children:[(0,r.jsx)(eS,{searchQuery:eJ.inputValue,onSearchChange:eJ.handleSearchChange,matchIndices:eJ.matchIndices,currentMatchIndex:eJ.currentMatchIndex,onPreviousMatch:eJ.handlePreviousMatch,onNextMatch:eJ.handleNextMatch,isVisible:eJ.isSearchVisible,onVisibilityChange:eJ.setIsSearchVisible,containerRef:eN}),(0,r.jsxs)("div",{"data-testid":"search-results-table",className:i()("overflow-auto h-100 fs-8",eu().tableWrapper,{[eu().muted]:"muted"===ey}),onScroll:e=>{if(eG(e.target),null!=e.target){let{scrollTop:t}=e.target;b?.(t)}},ref:eR,children:[er&&(0,r.jsx)(eP,{opened:e9,onClose:()=>tt(!1),config:er}),(0,r.jsxs)("table",{className:i()("w-100",eu().table),id:e,children:[(0,r.jsx)("thead",{className:eu().tableHead,children:t.length>0&&eU.getHeaderGroups().map(t=>(0,r.jsx)("tr",{children:t.headers.map((s,n)=>{let a=n===t.headers.length-1;return(0,r.jsx)(eg.A,{header:s,isLast:a,lastItemButtons:(0,r.jsxs)(k.Y,{gap:8,mr:8,children:[e&&Object.keys(eC).length>0&&(0,r.jsx)(N.N,{onClick:()=>ek({}),title:"Reset Column Widths",children:(0,r.jsx)(A.m,{label:"Reset Column Widths",children:(0,r.jsx)(L.A,{size:16})})}),er&&(0,r.jsx)(N.N,{onClick:()=>tt(!0),title:"Show Generated SQL",tabIndex:0,children:(0,r.jsx)(A.m,{label:"Show Generated SQL",children:(0,r.jsx)(I.A,{size:16})})}),(0,r.jsx)(N.N,{onClick:()=>e8(e=>!e),title:`${e7?"Disable":"Enable"}  Wrap Lines`,children:(0,r.jsx)(A.m,{label:`${e7?"Disable":"Enable"} Wrap Lines`,children:e7?(0,r.jsx)(M.A,{size:16}):(0,r.jsx)(R.A,{size:16})})}),(0,r.jsx)(eE.P,{data:eB,filename:`hyperdx_search_results_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}`,className:"fs-6",children:(0,r.jsx)(A.m,{label:`Download Table as CSV (max ${eW.toLocaleString()} rows)${eH?" - data truncated":""}`,children:(0,r.jsx)(D.A,{size:16})})}),null!=v&&(0,r.jsx)(N.N,{onClick:()=>v(),title:"Settings",children:(0,r.jsx)(A.m,{label:"Settings",children:(0,r.jsx)(P.A,{size:16})})})]})},s.id)})},t.id))}),(0,r.jsxs)("tbody",{children:[e3>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${e3}px`}})}),e1.map(e=>{let t=eQ[e.index],s=eI(t.original),n=eq[s]??!1;return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("tr",{"data-testid":`table-row-${s}`,className:i()(eu().tableRow,{[eu().tableRow__selected]:c&&c===s}),"data-index":e.index,ref:e0.measureElement,children:[ex&&(0,r.jsx)("td",{className:"align-top overflow-hidden",style:{width:"40px"},children:(0,V.Kv)(t.getVisibleCells()[0].column.columnDef.cell,t.getVisibleCells()[0].getContext())}),(0,r.jsx)("td",{className:"align-top overflow-hidden p-0",colSpan:eK.length-!!ex,children:(0,r.jsxs)("button",{type:"button",className:i()(eu().rowContentButton,{[eu().isWrapped]:e7,[eu().isTruncated]:!e7}),onClick:e=>{ev(t.original)},"aria-label":"View details for log entry",children:[t.getVisibleCells().slice(+!!ex).map(e=>{let t=e.column.columnDef.meta?.className,s=e.column.getSize(),n=e.getValue();return(0,r.jsx)("div",{className:i()("flex-shrink-0 overflow-hidden position-relative",t),style:{width:s===Q.k?"auto":`${s}px`,flex:s===Q.k?"1":"none"},children:(0,r.jsx)("div",{className:eu().fieldTextContainer,children:(0,r.jsx)(eh,{cellValue:n,wrapLinesEnabled:e7,tableContainerRef:eN,columnName:e.column.columnDef.meta?.column,isChart:e.column.columnDef.meta?.column==="__hdx_pattern_trend",children:(0,V.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)}),ef&&(0,r.jsx)(ep,{row:t.original,getRowWhere:ef,sourceId:el?.id,isWrapped:e7,onToggleWrap:()=>e8(!e7)})]})})]}),ex&&n&&(0,r.jsx)(eA,{columnsLength:eK.length,virtualKey:e.key.toString(),source:el,rowId:s,measureElement:e0.measureElement,virtualIndex:e.index,children:ea?.({id:s,aliasWith:t.original[G.ZO.ALIAS_WITH],...t.original})})]},e.key)}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:800,children:(0,r.jsx)("div",{className:"rounded fs-7 bg-muted text-center d-flex align-items-center justify-content-center mt-3",children:h?(0,r.jsxs)("div",{className:"my-3",children:[(0,r.jsx)("div",{className:"d-inline-block",children:(0,r.jsx)(z.A,{size:14,className:"spin-animate"})})," ",null!=U&&(0,r.jsxs)(r.Fragment,{children:["Searched ",(0,r.jsx)(ee.H,{value:U}),"."," "]}),"Loading results",K?.[0]!=null&&K?.[1]!=null?(0,r.jsxs)(r.Fragment,{children:[" ","across"," ",(0,o.A)(K?.[1],K?.[0])," ","(",(0,r.jsx)(ee.H,{value:K?.[0],format:"withYear"})," ","to"," ",(0,r.jsx)(ee.H,{value:K?.[1],format:"withYear"}),")"]}):null,"..."]}):!1==l&&!1==h&&eb.length>0?(0,r.jsx)("div",{className:"my-3",children:"End of Results"}):H?(0,r.jsxs)("div",{className:"my-3",children:[(0,r.jsx)(T.E,{ta:"center",size:"sm",children:"Error loading results, please check your query or try again."}),(0,r.jsxs)(C.a,{p:"sm",children:[(0,r.jsx)(C.a,{mt:"sm",children:(0,r.jsx)($.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:Y?.message})}),Y instanceof S.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(E.s,{w:"100%",ta:"initial",align:"center",justify:"center",children:(0,r.jsx)(e_.V,{data:Y?.query})})]})]})]}):!1==l&&!1==h&&0===eb.length?(0,r.jsxs)("div",{className:"my-3","data-testid":"db-row-table-no-results",children:["No results found.",(0,r.jsx)(T.E,{mt:"sm",children:"Try checking the query explainer in the search bar if there are any search syntax issues."}),K?.[0]!=null&&K?.[1]!=null?(0,r.jsxs)(T.E,{mt:"sm",children:["Searched Time Range:"," ",(0,o.A)(K?.[1],K?.[0])," ","(",(0,r.jsx)(ee.H,{value:K?.[0],format:"withYear"})," ","to"," ",(0,r.jsx)(ee.H,{value:K?.[1],format:"withYear"}),")"]}):null]}):(0,r.jsx)("div",{})})})}),e5>0&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:99999,style:{height:`${e5}px`}})})]})]})]}),(0,r.jsx)(ew,{searchQuery:eJ.searchQuery,matchIndices:eJ.matchIndices,currentMatchIndex:eJ.currentMatchIndex,dedupedRows:eb,tableRows:eQ,getRowId:eI,onMatchClick:eJ.handleMatchClick})]})})});function eF(e){let t,s,r=(0,n.c)(12);r[0]!==e.connection||r[1]!==e.from.databaseName||r[2]!==e.from.tableName?(t={databaseName:e.from.databaseName,tableName:e.from.tableName,connectionId:e.connection},r[0]=e.connection,r[1]=e.from.databaseName,r[2]=e.from.tableName,r[3]=t):t=r[3];let{data:a}=(0,Y.Z2)(t),l=a?.primary_key,i=a?.partition_key;e:{let t,n;if(null==l||null==i){s=void 0;break e}r[4]!==e.select||r[5]!==i||r[6]!==l?(t=function(e,t,s){let r=new Set([...(0,S.bZ)(s),...(0,S.bZ)(t)]);if("string"==typeof e){let t=new Set((0,w.AB)(e)),s=[...r].filter(e=>!t.has(e));return{select:[...t,...s].join(","),additionalKeysLength:s.length}}{let t=[...r].map(e=>({valueExpression:e}));return{select:[...e,...t],additionalKeysLength:t.length}}}(e.select,l,i),r[4]=e.select,r[5]=i,r[6]=l,r[7]=t):t=r[7];let{select:a,additionalKeysLength:o}=t;r[8]!==o||r[9]!==e||r[10]!==a?(n={...e,select:a,additionalKeysLength:o},r[8]=o,r[9]=e,r[10]=a,r[11]=n):n=r[11],s=n}return s}let eV=(0,a.memo)(function({config:e,sourceId:t,onError:s,onRowDetailsClick:n,highlightedLineId:l,enabled:i=!0,isLive:o=!1,queryKeyPrefix:c,onScroll:d,denoiseResults:u=!1,onChildModalOpen:m,onExpandedRowsChange:h,collapseAllRows:p,showExpandButton:g=!0,renderRowDetails:f,onSortingChange:y,initialSortBy:b,variant:v="default"}){var j;let{data:w}=W.Ay.useMe(),[_,E]=(0,a.useState)(b?.[0]??null),k=(0,a.useMemo)(()=>_?[_]:[],[_]),N=(0,a.useCallback)(e=>{y?.(e),E(e?.[0]??null)},[E,y]),A=(0,es.ZC)(t);(0,a.useEffect)(()=>{A&&A!==t&&N(null)},[t]);let $=(0,es.ZC)(b);(0,a.useEffect)(()=>{let e=b?.[0]??null,t=$?.[0]??null;JSON.stringify(e)!==JSON.stringify(t)&&E(e)},[b,$]);let z=(0,a.useMemo)(()=>{let t={...(0,H.Nz)(w?.team),...e};return k.length&&(t.orderBy=k.map(e=>({valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}))),t},[w,e,k]),L=eF(z),{data:I,fetchNextPage:M,hasNextPage:R,isFetching:D,isError:P,error:F}=(0,J.A)(L??e,{enabled:i&&null!=L&&("string"==typeof(j=e.select)?j.split(",").filter(e=>e.trim().length>0).length:j.length)>0,isLive:o,queryKeyPrefix:c}),V=(0,a.useMemo)(()=>(function(e,t){if(null==e||null==t)return new Map;let s=e.slice(0,e.length-t);return new Map(s?.map(e=>[e.name,{...e,_type:(0,S.rj)(e.type)}]))})(I?.meta,L?.additionalKeysLength),[I,L]),B=(0,a.useMemo)(()=>Array.from(V.keys()),[V]),q=(0,a.useMemo)(()=>B.filter(e=>{let t=V.get(e)?._type;return(0,S.Zo)(t)}),[B,V]),X=(0,a.useMemo)(()=>(I?.data??[]).map(e=>{let t={...e};return q.forEach(s=>{V.get(s)?._type===S.A2.JSON?t[s]=JSON.stringify(e[s]).replace(/\//g,"\\/"):t[s]=JSON.stringify(e[s])}),t}),[I,q,V]),Y=(0,a.useMemo)(()=>(0,S.D7)(I?.chSql??{sql:"",params:{}}),[I]),Z=(0,G.Ay)({meta:I?.meta,aliasMap:Y}),Q=(0,a.useCallback)(e=>n?.(Z(e)),[n,Z]);(0,a.useEffect)(()=>{P&&s&&F&&s(F)},[P,s,F]);let{data:ee}=(0,U.Fo)({id:t}),et=B[B.length-1],er=(0,K.nt)({config:e,samples:1e4,bodyValueExpression:et??"",severityTextExpression:ee?.severityTextExpression??"",totalCount:void 0,enabled:u}),en=(0,O.I)({queryKey:["noisy-patterns",e],queryFn:async()=>Object.values(er.data).filter(e=>e.count/(er.sampledRowCount??1)>.1),enabled:u&&null!=er.data&&Object.values(er.data).length>0&&null!=er.miner}),ea=(0,a.useMemo)(()=>en.data?.map(e=>e.id)??[],[en.data]),el=(0,O.I)({queryKey:["denoised-rows",e,u,...u?[X]:[],ea,et],queryFn:async()=>{if(!u)return[];if(0===ea.length)return X;let e=await er.miner?.matchLogs(X.map(e=>e[et]));return X.filter((t,s)=>{let r=e?.[s];return!ea.includes(`${r}`)})},placeholderData:(t,s)=>{if(s?.queryKey?.[0]==="denoised-rows"&&s?.queryKey?.[1]===e)return t},gcTime:o?x()("30s"):x()("5m"),enabled:u&&en.isSuccess&&X.length>0&&null!=er.miner}),ei=u?D||el.isFetching||en.isFetching||er.isLoading:D,eo=I?.window?.direction==="ASC"?I?.window?.endTime:I?.window?.startTime;return(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsxs)(C.a,{mb:"xxs",px:"sm",children:[(0,r.jsx)(T.E,{fw:"bold",fz:"xs",mb:"xxs",children:"Removed Noisy Event Patterns"}),(0,r.jsxs)(C.a,{mah:100,style:{overflow:"auto"},children:[en.data?.map(e=>(0,r.jsx)(T.E,{fz:"xs",children:e.pattern},e.id)),0===ea.length&&(0,r.jsx)(T.E,{fz:"xs",children:"No noisy patterns found"})]})]}),(0,r.jsx)(eO,{isLive:o,wrapLines:!1,displayedColumns:B,highlightedLineId:l,rows:u?el?.data??[]:X,renderRowDetails:f,isLoading:ei,fetchNextPage:M,hasNextPage:R,onRowDetailsClick:Q,onScroll:d,generateRowId:Z,isError:P,error:F??void 0,columnTypeMap:V,dateRange:e.dateRange,loadingDate:eo,config:z,onChildModalOpen:m,source:ee,onExpandedRowsChange:h,collapseAllRows:p,showExpandButton:g,enableSorting:!0,onSortingChange:N,sortOrder:k,getRowWhere:Z,variant:v})]})});function eB(){return""}function eW(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function eH(e){return e??""}},50374:(e,t,s)=>{"use strict";s.d(t,{D:()=>e0,A:()=>e3});var r,n,a=s(6029),l=s(75155),i=s(55729),o=s(86508),c=s(84450),d=s.n(c),u=s(41038),m=s(7913),h=s(66692),x=s(82641),p=s(60481),g=s(78253),f=s(10174),y=s(34834),b=s(64441),v=s(24885);function j(e){let t,s,r,n=(0,l.c)(13),{hasLogSource:a}=e,[o,c]=(0,u.ZA)("traceWhere"),[d,m]=(0,u.ZA)("logWhere"),h=!!o||!!(a&&d),[x,p]=(0,i.useState)(h);n[0]!==m||n[1]!==c?(t=e=>{c(e.traceWhere||null),m(e.logWhere||null)},n[0]=m,n[1]=c,n[2]=t):t=n[2];let g=t;n[3]!==m||n[4]!==c?(s=()=>{c(null),m(null)},n[3]=m,n[4]=c,n[5]=s):s=n[5];let f=s;return n[6]!==f||n[7]!==h||n[8]!==x||n[9]!==d||n[10]!==g||n[11]!==o?(r={traceWhere:o,logWhere:d,isFilterActive:h,isFilterExpanded:x,setIsFilterExpanded:p,onSubmit:g,clear:f},n[6]=f,n[7]=h,n[8]=x,n[9]=d,n[10]=g,n[11]=o,n[12]=r):r=n[12],r}var S=s(78694),w=s(81973),_=s(96958),E=s(18006),C=s(26674),k=s(3635),N=s(43517),A=s(43085),T=s(98287);function $(e){let t,s,r,n,i=(0,l.c)(9),{traceId:o,dateRange:c,traceTableSourceId:d}=e;i[0]!==d?(t={id:d},i[0]=d,i[1]=t):t=i[1];let{data:u}=(0,w.Fo)(t);return i[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsxs)(k.Y,{gap:0,children:[(0,a.jsx)(N.E,{size:"sm",ps:"sm",children:"Service Map"}),(0,a.jsx)(A.E,{size:"xs",ms:"xs",color:"gray",autoContrast:!0,radius:"sm",children:"Beta"})]}),i[2]=s):s=i[2],i[3]!==c||i[4]!==o||i[5]!==u?(r=u?(0,a.jsx)(T.A,{traceTableSource:u,traceId:o,dateRange:c,isSingleTrace:!0}):null,i[3]=c,i[4]=o,i[5]=u,i[6]=r):r=i[6],i[7]!==r?(n=(0,a.jsxs)(y.B,{w:"100%",children:[s,r]}),i[7]=r,i[8]=n):n=i[8],n}var z=s(76539),L=s(43465),I=s(66631),M=s(76089),R=s(90124),D=s(62801),P=s(44595),O=s(53993),F=s(43152),V=s(40228),B=s(28450);let W=e=>{let t,s,r,n,c,d,u,m,h,x,p,g,f,y,b,v,j,S,w,_,E,C,N,A,T,$=(0,l.c)(73),{fieldPrefix:z,metricSource:O,timestamp:B,title:W,where:H}=e,[q,X]=(0,i.useState)("30m"),[Y,J]=(0,i.useState)("sm");if($[0]!==q||$[1]!==B){let e={"30m":{minutes:15},"1h":{minutes:30},"1d":{hours:12}}[q];t=(0,L.A)(new Date(B),e),s=(0,I.A)([(0,o.A)(new Date(B),e),new Date]),$[0]=q,$[1]=B,$[2]=t,$[3]=s}else t=$[2],s=$[3];$[4]!==t||$[5]!==s?(r=[t,s],$[4]=t,$[5]=s,$[6]=r):r=$[6];let K=r;e:{switch(Y){case"sm":{let e;$[7]===Symbol.for("react.memo_cache_sentinel")?(e={cols:3,height:200},$[7]=e):e=$[7],n=e;break e}case"md":{let e;$[8]===Symbol.for("react.memo_cache_sentinel")?(e={cols:2,height:250},$[8]=e):e=$[8],n=e;break e}case"lg":{let e;$[9]===Symbol.for("react.memo_cache_sentinel")?(e={cols:1,height:320},$[9]=e):e=$[9],n=e;break e}}n=void 0}let{cols:G,height:Z}=n;$[10]!==K?(c=(0,M.tA)(K),$[10]=K,$[11]=c):c=$[11];let U=c,Q=`infra-subpanel-${z}`;$[12]!==W?(d=(0,a.jsx)("h4",{className:"fs-6 m-0",children:W}),$[12]=W,$[13]=d):d=$[13],$[14]===Symbol.for("react.memo_cache_sentinel")?(u=[{label:"30m",value:"30m"},{label:"1h",value:"1h"},{label:"1d",value:"1d"}],$[14]=u):u=$[14],$[15]===Symbol.for("react.memo_cache_sentinel")?(m=e=>X(e),$[15]=m):m=$[15],$[16]!==q?(h=(0,a.jsx)(R.I,{size:"xs",data:u,value:q,onChange:m}),$[16]=q,$[17]=h):h=$[17],$[18]!==h||$[19]!==d?(x=(0,a.jsxs)(k.Y,{align:"center",children:[d,h]}),$[18]=h,$[19]=d,$[20]=x):x=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(p=[{label:"SM",value:"sm"},{label:"MD",value:"md"},{label:"LG",value:"lg"}],$[21]=p):p=$[21],$[22]===Symbol.for("react.memo_cache_sentinel")?(g=e=>J(e),$[22]=g):g=$[22],$[23]!==Y?(f=(0,a.jsx)(k.Y,{align:"center",children:(0,a.jsx)(R.I,{size:"xs",data:p,value:Y,onChange:g})}),$[23]=Y,$[24]=f):f=$[24],$[25]!==x||$[26]!==f?(y=(0,a.jsxs)(k.Y,{justify:"space-between",align:"center",children:[x,f]}),$[25]=x,$[26]=f,$[27]=y):y=$[27],$[28]!==K||$[29]!==z||$[30]!==U||$[31]!==O||$[32]!==H?(b=(0,F.ik)({dateRange:K,granularity:U,seriesReturnType:"column",series:[{type:"time",where:H,groupBy:[],aggFn:"avg",field:`${z}cpu.utilization - Gauge`,table:"metrics",numberFormat:F.p2}]},{metric:O}),$[28]=K,$[29]=z,$[30]=U,$[31]=O,$[32]=H,$[33]=b):b=$[33];let ee=B/1e3;$[34]!==b||$[35]!==ee?(v=(0,a.jsx)(V.S,{title:"CPU Usage (%)",config:b,showDisplaySwitcher:!1,logReferenceTimestamp:ee}),$[34]=b,$[35]=ee,$[36]=v):v=$[36],$[37]!==Z||$[38]!==v?(j=(0,a.jsx)(D.Z,{"data-testid":"cpu-usage-card",children:(0,a.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:v})}),$[37]=Z,$[38]=v,$[39]=j):j=$[39],$[40]!==K||$[41]!==z||$[42]!==U||$[43]!==O||$[44]!==H?(S=(0,F.ik)({dateRange:K,granularity:U,seriesReturnType:"column",series:[{type:"time",where:H,groupBy:[],aggFn:"avg",field:`${z}memory.usage - Gauge`,table:"metrics",numberFormat:F.JD}]},{metric:O}),$[40]=K,$[41]=z,$[42]=U,$[43]=O,$[44]=H,$[45]=S):S=$[45];let et=B/1e3;$[46]!==S||$[47]!==et?(w=(0,a.jsx)(V.S,{title:"Memory Used",config:S,showDisplaySwitcher:!1,logReferenceTimestamp:et}),$[46]=S,$[47]=et,$[48]=w):w=$[48],$[49]!==Z||$[50]!==w?(_=(0,a.jsx)(D.Z,{"data-testid":"memory-usage-card",children:(0,a.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:w})}),$[49]=Z,$[50]=w,$[51]=_):_=$[51],$[52]!==K||$[53]!==z||$[54]!==U||$[55]!==O||$[56]!==H?(E=(0,F.ik)({dateRange:K,granularity:U,seriesReturnType:"column",series:[{type:"time",where:H,groupBy:[],aggFn:"avg",field:`${z}filesystem.available - Gauge`,table:"metrics",numberFormat:F.nH}]},{metric:O}),$[52]=K,$[53]=z,$[54]=U,$[55]=O,$[56]=H,$[57]=E):E=$[57];let es=B/1e3;return $[58]!==E||$[59]!==es?(C=(0,a.jsx)(V.S,{title:"Disk Available",config:E,showDisplaySwitcher:!1,logReferenceTimestamp:es}),$[58]=E,$[59]=es,$[60]=C):C=$[60],$[61]!==Z||$[62]!==C?(N=(0,a.jsx)(D.Z,{"data-testid":"disk-usage-card",children:(0,a.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:C})}),$[61]=Z,$[62]=C,$[63]=N):N=$[63],$[64]!==G||$[65]!==j||$[66]!==_||$[67]!==N?(A=(0,a.jsxs)(P.r,{mt:"md",cols:G,children:[j,_,N]}),$[64]=G,$[65]=j,$[66]=_,$[67]=N,$[68]=A):A=$[68],$[69]!==y||$[70]!==A||$[71]!==Q?(T=(0,a.jsxs)("div",{"data-testid":Q,children:[y,A]}),$[69]=y,$[70]=A,$[71]=Q,$[72]=T):T=$[72],T},H=({rowData:e,rowId:t,source:s})=>{let{data:r}=(0,w.Fo)({id:s.metricSourceId}),n=e?.__hdx_resource_attributes["k8s.pod.uid"],l=e?.__hdx_resource_attributes["k8s.node.name"],i=new Date(e?.__hdx_timestamp).getTime();return(0,a.jsxs)(y.B,{my:"md",gap:40,children:[n&&(0,a.jsxs)("div",{children:[r&&(0,a.jsx)(W,{title:"Pod",where:`${r.resourceAttributesExpression}.k8s.pod.uid:"${n}"`,fieldPrefix:"k8s.pod.",timestamp:i,metricSource:r}),s&&(0,a.jsxs)(D.Z,{p:"md",mt:"xl",children:[(0,a.jsx)(D.Z.Section,{p:"md",py:"xs",children:"Pod Timeline"}),(0,a.jsx)(D.Z.Section,{children:(0,a.jsx)(O.F,{viewportProps:{style:{maxHeight:280}},children:(0,a.jsx)(p.a,{p:"md",py:"sm",children:(0,a.jsx)(B.FB,{logSource:s,q:`\`k8s.pod.uid\`:"${n}"`,dateRange:[(0,L.A)(new Date(i),{days:1}),(0,o.A)(new Date(i),{days:1})],anchorEvent:{label:(0,a.jsx)("div",{className:"text-brand",children:"This Event"}),timestamp:new Date(i).toISOString()}})})})})]})]}),l&&r&&(0,a.jsx)(W,{metricSource:r,title:"Node",where:`${r.resourceAttributesExpression}.k8s.node.name:"${l}"`,fieldPrefix:"k8s.node.",timestamp:i})]})};var q=s(37901),X=s(26837),Y=s(82203),J=s.n(Y),K=s(94720),G=s(40147),Z=s(57030),U=s(71434),Q=s.n(U),ee=s(1909),et=s(14262),es=s.n(et),er=s(3145),en=s(53061),ea=s(47268),el=s(23935),ei=s(24589),eo=s(92789),ec=s(70114),ed=s(23474),eu=s(54134),em=s(225),eh=s(78744),ex=s(70727),ep=s(43370),eg=s(75828),ef=s.n(eg),ey=s(63085),eb=s(21440),ev=s(7565),ej=s(92917),eS=s(83101),ew=s.n(eS),e_=s(20699),eE=s.n(e_);let eC=(0,i.memo)(function(e){let t,s,r,n,i,o,c,d,u,m,h,x,p,g,f=(0,l.c)(30),{marker:y,eventStart:b,eventEnd:v,height:j}=e,S=(0,ev.a)(),w=v-b,_=y.timestamp-b,E=w>0?_/w*100:0;f[0]!==y.attributes?(t=Object.entries(y.attributes),f[0]=y.attributes,f[1]=t):t=f[1];let C=t;f[2]!==S||f[3]!==y.timestamp?(s=S(new Date(y.timestamp),{format:"withMs"}),f[2]=S,f[3]=y.timestamp,f[4]=s):s=f[4],f[5]!==s?(r=(0,a.jsx)(N.E,{size:"xxs",c:"dimmed",mb:"xxs",children:s}),f[5]=s,f[6]=r):r=f[6],f[7]!==y.name?(n=(0,a.jsx)(N.E,{size:"xs",children:y.name}),f[7]=y.name,f[8]=n):n=f[8],f[9]!==C?(i=C.length>0&&(0,a.jsxs)("div",{style:{fontSize:10,marginTop:4},children:[C.slice(0,5).map(eL),C.length>5&&(0,a.jsxs)("div",{style:{fontStyle:"italic"},children:["...and ",C.length-5," more"]})]}),f[9]=C,f[10]=i):i=f[10],f[11]!==r||f[12]!==n||f[13]!==i?(o=(0,a.jsxs)("div",{children:[r,n,i]}),f[11]=r,f[12]=n,f[13]=i,f[14]=o):o=f[14];let k=o;f[15]===Symbol.for("react.memo_cache_sentinel")?(c={transition:"fade"},d={fontSize:11,maxWidth:350,wordBreak:"break-word"},f[15]=c,f[16]=d):(c=f[15],d=f[16]),f[17]!==E?(u=E.toFixed(6),f[17]=E,f[18]=u):u=f[18];let A=`${u}%`;return f[19]!==A?(m={position:"absolute",left:A,top:"50%",transform:"translate(-50%, -50%)",width:8,height:8,cursor:"pointer",zIndex:10,pointerEvents:"auto"},f[19]=A,f[20]=m):m=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsx)("div",{style:{width:8,height:8,backgroundColor:"var(--color-bg-success)",transform:"rotate(45deg)",border:"1px solid #333",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}}),f[21]=h):h=f[21],f[22]!==j?(x=(0,a.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:1,height:j,backgroundColor:"var(--color-bg-success)",opacity:.4,zIndex:-1}}),f[22]=j,f[23]=x):x=f[23],f[24]!==m||f[25]!==x?(p=(0,a.jsxs)("div",{style:m,onMouseEnter:eI,onClick:eM,children:[h,x]}),f[24]=m,f[25]=x,f[26]=p):p=f[26],f[27]!==p||f[28]!==k?(g=(0,a.jsx)(ey.m,{label:k,color:"var(--color-bg-surface)",withArrow:!0,multiline:!0,transitionProps:c,style:d,children:p}),f[27]=p,f[28]=k,f[29]=g):g=f[29],g}),ek=(0,i.memo)(function(e){let t,s,r,n,i,o,c=(0,l.c)(25),{events:d,maxVal:u,height:m,eventStyles:h,onEventHover:x,scale:p,offset:g}=e,f=x??eR;c[0]!==m?(t={width:0,flexGrow:1,height:m,position:"relative"},c[0]=m,c[1]=t):t=c[1];let y=-1*g*p;c[2]!==y?(s=y.toFixed(6),c[2]=y,c[3]=s):s=c[3];let b=`${s}%`;if(c[4]!==b?(r=(0,a.jsx)("div",{style:{marginRight:b}}),c[4]=b,c[5]=r):r=c[5],c[6]!==d?(n=d??[],c[6]=d,c[7]=n):n=c[7],c[8]!==h||c[9]!==m||c[10]!==u||c[11]!==f||c[12]!==p||c[13]!==n){let e;c[15]!==h||c[16]!==m||c[17]!==u||c[18]!==f||c[19]!==p?(e=(e,t,s)=>{let r=(e.minWidthPerc??0)/100,n=s[t-1],l=n?.start!=null?n?.start+u*r:0,i=Math.max(n?.end??0,l),o=p*Math.max((e.end-e.start)/u,r)*100,c=p*((e.start-i)/u*100);return(0,a.jsx)(ey.m,{label:e.tooltip,color:"gray",withArrow:!0,multiline:!0,transitionProps:{transition:"fade-right"},style:{fontSize:11,maxWidth:300,wordBreak:"break-word"},children:(0,a.jsxs)("div",{onMouseEnter:()=>f(e.id),className:"d-flex align-items-center h-100 cursor-pointer text-truncate hover-opacity",style:{userSelect:"none",backgroundColor:e.color,minWidth:`${o.toFixed(6)}%`,width:`${o.toFixed(6)}%`,marginLeft:`${c.toFixed(6)}%`,position:"relative",..."function"==typeof h?h(e):h},children:[(0,a.jsx)("div",{style:{margin:"auto"},className:"px-2",children:e.body}),e.markers?.map((t,s)=>(0,a.jsx)(eC,{marker:t,eventStart:e.start,eventEnd:e.end,height:m},`${e.id}-marker-${s}`))]})},e.id)},c[15]=h,c[16]=m,c[17]=u,c[18]=f,c[19]=p,c[20]=e):e=c[20],i=n.map(e),c[8]=h,c[9]=m,c[10]=u,c[11]=f,c[12]=p,c[13]=n,c[14]=i}else i=c[14];return c[21]!==t||c[22]!==r||c[23]!==i?(o=(0,a.jsxs)("div",{className:"d-flex overflow-hidden",style:t,children:[r,i]}),c[21]=t,c[22]=r,c[23]=i,c[24]=o):o=c[24],o});function eN(e){return e<1e3?`${Math.round(e)}ms`:e%1e3==0?`${Math.floor(e/1e3)}s`:`${(e/1e3).toFixed(3)}s`}function eA(e){let t,s,r,n,i,o,c,d,u,m,h,x=(0,l.c)(19),{maxVal:p,labelWidth:g,height:f,scale:y,offset:b}=e,v=(h=m=Math.pow(10,Math.floor(Math.log10(u=p/y/10))),u>=2*m&&(h=2*m),u>=5*m&&(h=5*m),h),j=Math.floor(p/v),S=v/p*100*y;if(x[0]!==f||x[1]!==v||x[2]!==j||x[3]!==S){t=[];for(let e=0;e<j;e++)t.push((0,a.jsx)("div",{style:{height:f,width:1,marginRight:-1,marginLeft:0===e?0:`${S.toFixed(6)}%`,background:"var(--color-border-muted)"},children:(0,a.jsx)("div",{className:"ms-2 fs-8.5",children:eN(e*v)})},e));x[0]=f,x[1]=v,x[2]=j,x[3]=S,x[4]=t}else t=x[4];x[5]===Symbol.for("react.memo_cache_sentinel")?(s={position:"sticky",top:0,height:24,paddingTop:4,zIndex:200,pointerEvents:"none",background:"var(--color-bg-body)"},r=ef()("d-flex align-items-center"),x[5]=s,x[6]=r):(s=x[5],r=x[6]),x[7]!==g?(n=(0,a.jsx)("div",{style:{width:g,minWidth:g}}),x[7]=g,x[8]=n):n=x[8];let w=-1*b*y;x[9]!==w?(i=w.toFixed(6),x[9]=w,x[10]=i):i=x[10];let _=`${i}%`;return x[11]!==_?(o=(0,a.jsx)("div",{style:{marginRight:_}}),x[11]=_,x[12]=o):o=x[12],x[13]!==o||x[14]!==t?(c=(0,a.jsxs)("div",{className:"d-flex w-100 overflow-hidden",children:[o,t]}),x[13]=o,x[14]=t,x[15]=c):c=x[15],x[16]!==n||x[17]!==c?(d=(0,a.jsx)("div",{style:s,children:(0,a.jsxs)("div",{className:`${r}`,children:[n,c]})}),x[16]=n,x[17]=c,x[18]=d):d=x[18],d}function eT(e){let t,s,r,n,i,o,c,d,u,m=(0,l.c)(24),{xPerc:h,overlay:x,labelWidth:p,color:g,height:f}=e,y=Math.min(Math.max(100*h,-1),100);m[0]!==y?(t=y.toFixed(6),m[0]=y,m[1]=t):t=m[1];let b=`${t}%`,v=h<=0?"none":"block";return m[2]!==v?(s={position:"sticky",top:0,height:0,zIndex:250,pointerEvents:"none",display:v},m[2]=v,m[3]=s):s=m[3],m[4]!==p?(r=(0,a.jsx)("div",{style:{width:p,minWidth:p}}),m[4]=p,m[5]=r):r=m[5],m[6]!==b?(n={marginLeft:b},m[6]=b,m[7]=n):n=m[7],m[8]!==x||m[9]!==h?(i=null!=x&&(0,a.jsx)("div",{style:{height:0,marginLeft:h<.5?12:-150,top:12,position:"relative"},children:(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"p-2 rounded border",style:{background:"var(--color-bg-surface)"},children:x})})}),m[8]=x,m[9]=h,m[10]=i):i=m[10],m[11]!==g||m[12]!==f?(o=(0,a.jsx)("div",{style:{height:f,width:1,background:g}}),m[11]=g,m[12]=f,m[13]=o):o=m[13],m[14]!==n||m[15]!==i||m[16]!==o?(c=(0,a.jsx)("div",{className:"w-100 overflow-hidden",children:(0,a.jsxs)("div",{style:n,children:[i,o]})}),m[14]=n,m[15]=i,m[16]=o,m[17]=c):c=m[17],m[18]!==r||m[19]!==c?(d=(0,a.jsxs)("div",{className:"d-flex",children:[r,c]}),m[18]=r,m[19]=c,m[20]=d):d=m[20],m[21]!==d||m[22]!==s?(u=(0,a.jsx)("div",{style:s,children:d}),m[21]=d,m[22]=s,m[23]=u):u=m[23],u}function e$(e){let t,s,r,n=(0,l.c)(11),{containerRef:o,maxVal:c,labelWidth:d,height:u,scale:m,offset:h,xPerc:x,setXPerc:p}=e,[g,f]=(0,i.useState)(!1);n[0]!==o||n[1]!==d||n[2]!==p?(t=()=>{let e=t=>{if(null!=o.current){let s=o.current,r=s.getBoundingClientRect(),n=(t.clientX-r.left-d)/(s.clientWidth-d);null!=e&&p(n)}},t=()=>f(!0),s=()=>f(!1),r=o.current;return r?.addEventListener("mousemove",e),r?.addEventListener("mouseleave",s),r?.addEventListener("mouseenter",t),()=>{r?.removeEventListener("mousemove",e),r?.removeEventListener("mouseleave",s),r?.removeEventListener("mouseenter",t)}},s=[o,d,p],n[0]=o,n[1]=d,n[2]=p,n[3]=t,n[4]=s):(t=n[3],s=n[4]),(0,i.useEffect)(t,s);let y=(h/100+Math.max(x,0)/m)*c;return n[5]!==y||n[6]!==u||n[7]!==d||n[8]!==g||n[9]!==x?(r=g?(0,a.jsx)(eT,{xPerc:Math.max(x,0),overlay:eN(Math.max(y,0)),height:u,labelWidth:d,color:"var(--color-bg-neutral)"}):null,n[5]=y,n[6]=u,n[7]=d,n[8]=g,n[9]=x,n[10]=r):r=n[10],r}function ez({rows:e,cursors:t,rowHeight:s,onMouseMove:r,onEventClick:n,labelWidth:l,className:o,style:c,onClick:d,scale:u=1,setScale:m=()=>{},initialScrollRowIndex:h,scaleWithScroll:x=!1}){let[p,g]=(0,i.useState)(0),f=(0,ej.ZC)(u),y=l/window.innerWidth*100,{size:b,startResize:j}=(0,v.A)(y,"left"),S=b/100*window.innerWidth,w=(0,i.useRef)(null),_=(e,t)=>{if(null!=w.current&&null!=t){let s=w.current,r=s.getBoundingClientRect(),n=e.clientX-r.left;e.clientY,r.top,t(Math.max((p/100+(n-S)/(s.clientWidth-S)/u)*A))}},E=(0,i.useMemo)(()=>({onDrag:e=>{g(t=>Math.min(Math.max(t-e.movementX*(.125/u),0),100-100/u))}}),[u,g]);(0,ej.i3)(w,E);let[C,k]=(0,i.useState)(0),N=e=>{x&&(e.preventDefault(),m(t=>Math.max(t-.001*e.deltaY,1)))};(0,i.useEffect)(()=>{null!=f&&f!=u&&g(e=>{let t=Math.max(Math.min(C,1),0);return Math.min(Math.max(e+100*t/f-100*t/u,0),100-100/u)})},[u,f,C]),(0,i.useEffect)(()=>{let e=w.current;if(null!=e)return e.addEventListener("wheel",N,{passive:!1}),()=>{e.removeEventListener("wheel",N)}});let A=(0,i.useMemo)(()=>{let t=0;for(let s of e??[])for(let e of s.events)t=Math.max(t,e.end);return 1.1*t},[e]),T=(0,eb.Te)({count:e?.length??0,getScrollElement:()=>w.current,estimateSize:()=>s,overscan:5}),$=T.getVirtualItems(),[z,L]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{null!=h&&!z&&h>=0&&(L(!0),T.scrollToIndex(h,{align:"center"}))},[h,z,T]),(0,a.jsxs)("div",{style:{position:"relative",...c},className:o,ref:w,onClick:e=>{_(e,d)},onMouseMove:e=>{_(e,r)},children:[(t??[]).map(e=>{let t=(e.start/A-p/100)*u;return(0,a.jsx)(eT,{xPerc:t,height:w.current?.getBoundingClientRect().height??300,labelWidth:S,color:e.color},e.id)}),(0,a.jsx)(e$,{containerRef:w,maxVal:A,height:w.current?.getBoundingClientRect().height??300,labelWidth:S,scale:u,offset:p,xPerc:C,setXPerc:k}),(0,a.jsx)(eA,{maxVal:A,height:w.current?.getBoundingClientRect().height??300,labelWidth:S,scale:u,offset:p}),(0,a.jsx)("div",{style:{height:`${T.getTotalSize()+32}px`,width:"100%",position:"relative"},children:(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${$?.[0]?.start??0}px)`},children:T.getVirtualItems().map(t=>{let r=e?.[t.index];return(0,a.jsxs)("div",{onClick:()=>n?.(r),"data-index":t.index,ref:T.measureElement,className:`${ef()("d-flex align-items-center overflow-hidden",r.className,eE().timelineRow,r.isActive&&eE().timelineRowActive)}`,style:{...r.style},children:[(0,a.jsxs)("div",{className:eE().labelContainer,style:{width:S,minWidth:S},children:[r.label,(0,a.jsx)("div",{className:ew().resizeHandle,onMouseDown:j,style:{backgroundColor:"var(--color-bg-neutral)"}})]}),(0,a.jsx)(ek,{events:r.events,height:s,maxVal:A,eventStyles:e=>({borderRadius:2,fontSize:.5*s,backgroundColor:e.isError?"var(--color-bg-danger)":"var(--color-bg-inverted)",color:"var(--color-text-inverted)"}),scale:u,offset:p})]},t.index)})})})]})}function eL(e){let[t,s]=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{style:{color:"var(--color-text-primary)"},children:[t,":"]})," ",String(s).length>50?String(s).substring(0,50)+"...":String(s)]},t)}function eI(e){return e.stopPropagation()}function eM(e){return e.stopPropagation()}function eR(){}var eD=s(59017),eP=s(66773),eO=s.n(eP);function eF(e){let t,s,r=(0,l.c)(6),{config:n,dateRangeStartInclusive:a,dateRange:i,enabled:o}=e;r[0]!==n||r[1]!==i||r[2]!==a?(t={...n,dateRange:i,dateRangeStartInclusive:a},r[0]=n,r[1]=i,r[2]=a,r[3]=t):t=r[3];let c=t;return r[4]!==o?(s={enabled:o},r[4]=o,r[5]=s):s=r[5],(0,eh.A)(c,s)}function eV(e){let t,s,r,n,a,i,o,c,d=(0,l.c)(32),{tableSource:u,focusDate:m,dateRange:h,traceId:p,enabled:g,hiddenRowExpression:f}=e;d[0]!==f||d[1]!==u||d[2]!==p?(t=function(e,t,s){let r={Body:e?.kind===x.GL.Trace?(0,w.pM)(e)??"":e?.kind===x.GL.Log?(0,w.N8)(e)??"":"",Timestamp:(0,w.xg)(e),Duration:e.durationExpression?(0,w.kg)(e):"",TraceId:e.traceIdExpression??"",SpanId:e.spanIdExpression??"",ParentSpanId:e.parentSpanIdExpression??"",StatusCode:e.statusCodeExpression??"",ServiceName:e.serviceNameExpression??"",SeverityText:e.severityTextExpression??"",SpanAttributes:e.eventAttributesExpression??"",SpanEvents:e.spanEventsValueExpression??""};if(e.highlightedTraceAttributeExpressions)for(let t of e.highlightedTraceAttributeExpressions)t.alias&&(r[t.alias]=t.sqlExpression);let n=[{valueExpression:r.Body,alias:"Body"},{valueExpression:r.Timestamp,alias:"Timestamp"},{valueExpression:r.SpanId,alias:"SpanId"},...r.ServiceName?[{valueExpression:r.ServiceName,alias:"ServiceName"}]:[],...s?[{valueExpression:s,valueExpressionLanguage:"lucene",alias:"__hdx_hidden"}]:[]];return(e.kind===x.GL.Trace||e.kind===x.GL.Log)&&n.push(...(0,E.z4)(e.highlightedTraceAttributeExpressions)),s&&(r.__hdx_hidden=s),e.kind===x.GL.Trace?n.push({valueExpression:r.Duration,alias:"Duration"},{valueExpression:r.ParentSpanId,alias:"ParentSpanId"},...r.StatusCode?[{valueExpression:r.StatusCode,alias:"StatusCode"}]:[],...r.SpanAttributes?[{valueExpression:r.SpanAttributes,alias:"SpanAttributes"}]:[],...r.SpanEvents?[{valueExpression:r.SpanEvents,alias:"SpanEvents"}]:[]):e.kind===x.GL.Log&&n.push(...r.SeverityText?[{valueExpression:r.SeverityText,alias:"SeverityText"}]:[]),{config:{select:n,from:e.from,timestampValueExpression:e.timestampValueExpression,where:`${r.TraceId} = '${t}'`,limit:{limit:5e4},connection:e.connection},alias:r,type:e.kind}}(u,p,f),d[0]=f,d[1]=u,d[2]=p,d[3]=t):t=d[3];let{config:y,alias:b,type:v}=t;d[4]!==h[0]||d[5]!==m?(s=[h[0],m],d[4]=h[0],d[5]=m,d[6]=s):s=d[6],d[7]!==y||d[8]!==g||d[9]!==s?(r={config:y,dateRangeStartInclusive:!0,dateRange:s,enabled:g},d[7]=y,d[8]=g,d[9]=s,d[10]=r):r=d[10];let{data:j,isFetching:S,error:_}=eF(r);d[11]!==h[1]||d[12]!==m?(n=[m,h[1]],d[11]=h[1],d[12]=m,d[13]=n):n=d[13],d[14]!==y||d[15]!==g||d[16]!==n?(a={config:y,dateRangeStartInclusive:!1,dateRange:n,enabled:g},d[14]=y,d[15]=g,d[16]=n,d[17]=a):a=d[17];let{data:C,isFetching:k,error:N}=eF(a),A=S||k,T=j?.meta??C?.meta,$=_||N;d[18]!==b||d[19]!==T?(i={meta:T,aliasMap:b},d[18]=b,d[19]=T,d[20]=i):i=d[20];let z=(0,ex.Ay)(i);e:{let e;if(!T||0===T.length){let e;d[21]===Symbol.for("react.memo_cache_sentinel")?(e=[],d[21]=e):e=d[21],o=e;break e}d[22]!==C?.data||d[23]!==j?.data||d[24]!==z||d[25]!==v?(e=[...j?.data??[],...C?.data??[]].map(e=>{let t=z((0,U.omit)(e,["SpanAttributes","SpanEvents","__hdx_hidden"]));return{...e,SpanId:e?.SpanId,__hdx_hidden:e?.__hdx_hidden,type:v,id:t.where,aliasWith:[]}}),d[22]=C?.data,d[23]=j?.data,d[24]=z,d[25]=v,d[26]=e):e=d[26],o=e}let L=o;return d[27]!==$||d[28]!==A||d[29]!==T||d[30]!==L?(c={rows:L,meta:T,isFetching:A,error:$},d[27]=$,d[28]=A,d[29]=T,d[30]=L,d[31]=c):c=d[31],c}function eB({traceTableSource:e,logTableSource:t,traceId:s,dateRange:r,focusDate:n,onClick:l,highlightedRowWhere:o,initialRowHighlightHint:c}){let{size:d,startResize:u}=(0,v.A)(30,"bottom"),m=(0,ev.a)(),{traceWhere:h,logWhere:g,clear:f,isFilterActive:y,isFilterExpanded:b,setIsFilterExpanded:S,onSubmit:w}=j({hasLogSource:!!t}),{control:_,handleSubmit:C,setValue:A}=(0,ee.mN)({defaultValues:{traceWhere:h??"",logWhere:g??""}}),T=(0,i.useCallback)(()=>{A("traceWhere",""),A("logWhere",""),f()},[f,A]),{rows:$,isFetching:z,meta:L,error:I}=eV({tableSource:e,focusDate:n,dateRange:r,traceId:s,hiddenRowExpression:h?`NOT (${h})`:void 0,enabled:!0}),{rows:M,isFetching:R,meta:D,error:P}=eV({tableSource:t||e,focusDate:n,dateRange:t?r:[r[1],r[0]],traceId:s,hiddenRowExpression:g?`NOT (${g})`:void 0,enabled:!!t}),O=z||R,F=I||P,V=(0,i.useMemo)(()=>[...$,...M],[$,M]);V.sort((e,t)=>{let s=es().fromString(e.Timestamp),r=es().fromString(t.Timestamp),n=s.getTimeT()-r.getTimeT();return 0===n?s.getNano()-r.getNano():n});let B=(0,i.useMemo)(()=>{let s=$?.filter(e=>!e.__hdx_hidden),r=(0,E.N4)(e,e.highlightedTraceAttributeExpressions,s,L);if(t&&M&&D){let e=M?.filter(e=>!e.__hdx_hidden);r.push(...(0,E.N4)(t,t.highlightedTraceAttributeExpressions,e,D))}return r.sort((e,t)=>e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value))},[e,$,L,t,M,D]);(0,i.useEffect)(()=>{if(c&&l&&null==o){let e=V.findIndex(e=>e.Timestamp===c.timestamp&&e.SpanId===c.spanId&&e.Body===c.body);-1!==e&&l?.({id:V[e].id,type:V[e].type??"",aliasWith:V[e].aliasWith})}},[c,V,l,o]);let W=(0,i.useMemo)(()=>new Set($?.filter(e=>Q().isString(e.SpanId)&&e.SpanId.length>0).map(e=>e.SpanId)??[]),[$]),H=[],q=new Map,X=new Map;for(let e of V??[]){let{type:t,SpanId:s,ParentSpanId:r}=e;if(!s)continue;let n=t===x.GL.Log?`${s}-log`:s,a=t===x.GL.Log?s:r||"",l={...e,children:[]};if(t===x.GL.Trace){if(!X.has(n)){X.set(n,e.id);let t=`placeholder-${n}`,s=q.get(t);s&&(l.children=s.children||[],q.delete(t))}q.set(e.id,l)}if(t!==x.GL.Trace||a&&W.has(a)){let e=X.get(a),t=e?q.get(e):void 0;if(!t){let e=`placeholder-${a}`;(t=q.get(e))||(t={children:[]},q.set(e,t))}t.children.push(l)}else H.push(l)}let[Y,J]=(0,i.useState)(new Set),[K,G]=(0,i.useState)(!0),Z=(0,i.useCallback)(e=>{J(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[J]),U=(e,t,s=0)=>{e.__hdx_hidden||t.push({level:s,...e}),Y.has(e.id)||e?.children?.forEach(e=>U(e,t,s+1))},et=[];H.length>0&&H.forEach(e=>U(e,et));let eh=et.length,ex=et.filter(e=>"Error"===e.StatusCode||e.SeverityText?.toLowerCase()==="error").length,eg=`${eh} span${1!==eh?"s":""}`,ef=`${ex} error${1!==ex?"s":""}`,ey=V?.reduce((e,t)=>Math.min(e,new Date(t.Timestamp).getTime()),Number.MAX_SAFE_INTEGER)??0,eb=ey===Number.MAX_SAFE_INTEGER?0:ey,eS=et.map((e,t)=>{let s=1e3*(e.Duration||0),r=new Date(e.Timestamp).getTime(),n=r-eb,i=n+s,{Body:c,ServiceName:d,id:u,type:h,aliasWith:p}=e,g=`${c}`;try{g="string"==typeof c?c:JSON.stringify(c)}catch(e){console.warn("DBTraceWaterfallChart: Couldn't JSON stringify Body",e)}let f=e.SpanAttributes||{},b=f["http.url"]||f["http.method"],v=f["http.url"],j=b&&v?`${g} ${v}`:g,S=K&&e.SpanEvents?e.SpanEvents.map(e=>({timestamp:new Date(e.Timestamp).getTime()-eb,name:e.Name,attributes:e.Attributes||{}})):[],w="Error"==e.StatusCode||"error"===e.SeverityText,_=e.StatusCode||e.SeverityText,E="warn"===e.SeverityText,C=o===u;return{id:u,type:h,aliasWith:p,label:(0,a.jsx)("div",{className:`${function(e){let{isError:t,isWarn:s}=e;return t?"text-danger":s?"text-warning":""}({isError:w,isWarn:E})} ${C&&eO().traceTimelineLabelHighlighted} text-truncate cursor-pointer ps-2 ${eO().traceTimelineLabel}`,role:"button",onClick:()=>{l?.({id:u,type:h??"",aliasWith:p})},children:(0,a.jsxs)("div",{className:"d-flex align-items-center",style:{height:24},children:[Array.from({length:e.level}).map((e,t)=>(0,a.jsx)("div",{style:{borderLeft:"1px solid var(--color-border)",marginLeft:7,width:8,minWidth:8,maxWidth:8,flexGrow:1,flexShrink:0,height:"100%"}},t)),(0,a.jsxs)(en.o,{style:{opacity:+(e.children.length>0)},onClick:()=>{Z(u)},children:[Y.has(u)?(0,a.jsx)(ec.A,{size:16,className:"me-1 text-muted-hover"}):(0,a.jsx)(ed.A,{size:16,className:"me-1 text-muted-hover"})," "]}),!y&&(0,a.jsx)(N.E,{span:!0,size:"xxs",me:"xs",pt:"2px",children:e.children.length>0?`(${e.children.length})`:""}),(0,a.jsxs)(k.Y,{gap:0,wrap:"nowrap",children:[h===x.GL.Log?(0,a.jsx)(eu.A,{size:14,className:"align-middle me-2","aria-label":"Correlated Log Line"}):null,(0,a.jsxs)(N.E,{size:"xxs",truncate:"end",span:!0,title:`${d}${b&&v?` | ${j}`:""}`,role:"button",children:[d?`${d} | `:"",j]})]})]})}),style:{marginTop:32*(0===t)},isActive:C,events:[{id:u,type:h,aliasWith:p,start:n,end:i,tooltip:`${j} ${s>=0?`took ${s.toFixed(4)}ms`:""} ${_?`| Status: ${_}`:""}${!isNaN(r)?` | Started at ${m(new Date(r),{format:"withMs"})}`:""}`,color:function(e){let{isError:t,isWarn:s,isHighlighted:r}=e;return t?r?(0,ej.sS)():(0,ej.cM)():s?r?(0,ej.qS)():(0,ej.AD)():r?"#A9AFB7":"#6A7077"}({isError:w,isWarn:E,isHighlighted:C}),body:(0,a.jsx)("span",{children:j}),minWidthPerc:1,isError:w,markers:S}]}}),e_=et.findIndex(e=>e.id===o),eE=d/100*window.innerHeight;return(0,a.jsxs)(a.Fragment,{children:[b&&(0,a.jsx)("form",{onSubmit:C(w),children:(0,a.jsxs)(p.a,{style:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",gap:"12px"},children:[(0,a.jsx)(N.E,{size:"xs",children:"Spans filter"}),(0,a.jsx)(ep.A,{tableConnection:(0,er.VO)(e),placeholder:'Search trace spans w/ Lucene ex. StatusCode:"Error"',language:"lucene",name:"traceWhere",control:_,size:"xs",onSubmit:C(w),"data-testid":"trace-search-input"}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.E,{size:"xs",children:"Logs filter"}),(0,a.jsx)(ep.A,{tableConnection:(0,er.VO)(t),placeholder:'Search trace logs w/ Lucene ex. SeverityText:"error"',language:"lucene",name:"logWhere",control:_,size:"xs",onSubmit:C(w),"data-testid":"log-search-input"})]})]})}),(0,a.jsxs)(k.Y,{my:"xs",justify:"space-between",children:[(0,a.jsxs)(k.Y,{gap:"md",children:[(0,a.jsxs)(N.E,{size:"xs",children:[eg,","," ",(0,a.jsx)("span",{className:ex?"text-danger":"",children:ef})]}),(0,a.jsx)(ea.S,{size:"xs",label:"Show span events",checked:K,onChange:()=>G(!K)})]}),(0,a.jsxs)("span",{children:[(0,a.jsxs)(el.M,{underline:"always",onClick:()=>S(e=>!e),size:"xs",children:[b?"Hide Filters":"Show Filters"," ",y&&"(active)"]}),y&&(0,a.jsx)(el.M,{underline:"always",onClick:T,size:"xs",ms:"xs",children:"Clear Filters"})]})]}),!O&&!F&&(0,a.jsx)(eD.V,{attributes:B}),(0,a.jsx)("div",{style:{position:"relative",overflow:"hidden",maxHeight:`${eE}px`},children:O?(0,a.jsx)("div",{className:"my-3",children:"Loading Traces..."}):F?(0,a.jsxs)(p.a,{mt:"lg",children:[(0,a.jsx)(N.E,{my:"sm",size:"sm",children:"An error occurred while fetching trace data:"}),(0,a.jsx)(ei.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:F.message})]}):null==V?(0,a.jsxs)("div",{children:["An unknown error occurred. ",(0,a.jsx)(em.z,{})]}):0===et.length?(0,a.jsx)("div",{className:"my-3",children:"No matching spans or logs found"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ez,{style:{overflowY:"auto",maxHeight:`${eE}px`},scale:1,setScale:()=>{},rowHeight:22,labelWidth:300,onClick:e=>{},onEventClick:e=>{l?.({id:e.id,type:e.type??"",aliasWith:e.aliasWith??[]})},cursors:[],rows:eS,initialScrollRowIndex:e_})})}),(0,a.jsx)(eo.c,{mt:"md",className:ew().resizeYHandle,onMouseDown:u,style:{position:"relative",bottom:0}})]})}let eW=e=>{let t,s,r,n=(0,l.c)(13),{traceSourceId:i,rumSessionId:o,dateRange:c,focusDate:d,serviceName:u,setSubDrawerOpen:m}=e;n[0]!==i?(t={id:i},n[0]=i,n[1]=t):t=n[1];let{data:h}=(0,w.Fo)(t),x=h?.sessionSourceId;n[2]!==x?(s={id:x},n[2]=x,n[3]=s):s=n[3];let{data:p,isLoading:g}=(0,w.Fo)(s);if(!h||!p&&g){let e;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(K.a,{}),n[4]=e):e=n[4],e}return n[5]!==c||n[6]!==d||n[7]!==o||n[8]!==u||n[9]!==p||n[10]!==m||n[11]!==h?(r=(0,a.jsx)(a.Fragment,{children:p?o&&h?(0,a.jsx)(Z.A,{start:c[0],end:c[1],traceSource:h,session:{serviceName:u},sessionSource:p,rumSessionId:o,setDrawerOpen:m,initialTs:d.getTime()}):(0,a.jsx)("span",{className:"p-3 text-muted",children:"Session ID not found."}):(0,a.jsxs)("div",{className:"m-2 fs-8 p-4",children:["No correlated session source found.",(0,a.jsx)("br",{}),"Go to ",(0,a.jsx)(J(),{href:"/team#sources",children:"Team Settings"})," and update the"," ",(0,a.jsx)("strong",{children:h?.name})," source to include the correlated session source."]})}),n[5]=c,n[6]=d,n[7]=o,n[8]=u,n[9]=p,n[10]=m,n[11]=h,n[12]=r):r=n[12],r};function eH(e){return null===e.parentSpanId&&e.rumSessionId}function eq(e){return e.rumSessionId}var eX=s(25062),eY=s(22623),eJ=s(6892),eK=s(57478),eG=s(64467),eZ=((r=eZ||{}).Overview="overview",r.Parsed="parsed",r);function eU(e){let t,s,r,n,o,c,d,m,h,p,f,b,v,j,S,E,C,A,T,$,z,L,I,M=(0,l.c)(74),{childSourceId:R,traceId:D,dateRange:P,focusDate:O,parentSourceId:F,initialRowHighlightHint:V,"data-testid":B}=e;M[0]!==R?(t={defaultValues:{source:R}},M[0]=R,M[1]=t):t=M[1];let{control:W}=(0,ee.mN)(t);M[2]!==W?(s={control:W,name:"source"},M[2]=W,M[3]=s):s=M[3];let H=(0,ee.FH)(s);M[4]!==H?(r={id:H},M[4]=H,M[5]=r):r=M[5];let{data:Y,isLoading:J}=(0,w.Fo)(r);M[6]!==F?(n={id:F},M[6]=F,M[7]=n):n=M[7];let{data:K,isLoading:G}=(0,w.Fo)(n),Z=K?.kind===x.GL.Log?K:Y?.kind===x.GL.Log?Y:null,U=K?.kind===x.GL.Trace?K:Y?.kind===x.GL.Trace?Y:null;Y?.kind===x.GL.Trace||(K?.kind,x.GL.Trace);let{mutate:Q}=(0,w.sr)();M[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,u.os)(),M[8]=o):o=M[8];let[et,es]=(0,u.ZA)("eventRowWhere",o),ea=K?.traceIdExpression??"";M[9]!==ea?(c={defaultValues:{traceIdExpression:ea}},M[9]=ea,M[10]=c):c=M[10];let{control:el,handleSubmit:ei,setValue:ec}=(0,ee.mN)(c);M[11]!==K||M[12]!==ec?(d=()=>{K?.traceIdExpression&&ec("traceIdExpression",K.traceIdExpression)},M[11]=K,M[12]=ec,M[13]=d):d=M[13];let ed=K?.traceIdExpression;M[14]!==ed||M[15]!==ec?(m=[ed,ec],M[14]=ed,M[15]=ec,M[16]=m):m=M[16],(0,i.useEffect)(d,m);let[eu,em]=(0,i.useState)(!1);M[17]!==es?(h=()=>()=>{es(null)},M[17]=es,M[18]=h):h=M[18],M[19]!==es||M[20]!==D?(p=[D,es],M[19]=es,M[20]=D,M[21]=p):p=M[21],(0,i.useEffect)(h,p);let[eh,ex]=(0,i.useState)("overview"),ep=K?.traceIdExpression,eg=D||"No trace id found for event";M[22]!==ep||M[23]!==eg?(f=(0,a.jsxs)(N.E,{size:"xs",me:"xs",children:[ep,":"," ",eg]}),M[22]=ep,M[23]=eg,M[24]=f):f=M[24],M[25]!==D?(b=null!=D&&(0,a.jsx)(eX.$,{variant:"subtle",size:"xs",onClick:()=>em(eQ),children:(0,a.jsx)(eJ.A,{size:14})}),M[25]=D,M[26]=b):b=M[26],M[27]!==f||M[28]!==b?(v=(0,a.jsxs)(g.s,{align:"center",children:[f,b]}),M[27]=f,M[28]=b,M[29]=v):v=M[29];let ef=K?.kind===x.GL.Log?"Trace Source":"Correlated Log Source";return M[30]!==ef?(j=(0,a.jsx)(N.E,{size:"sm",children:ef}),M[30]=ef,M[31]=j):j=M[31],M[32]!==W?(S=(0,a.jsx)(eK.W,{control:W,name:"source",size:"xs"}),M[32]=W,M[33]=S):S=M[33],M[34]!==j||M[35]!==S?(E=(0,a.jsxs)(k.Y,{gap:"sm",children:[j,S]}),M[34]=j,M[35]=S,M[36]=E):E=M[36],M[37]!==v||M[38]!==E?(C=(0,a.jsxs)(g.s,{align:"center",justify:"space-between",mb:"sm",children:[v,E]}),M[37]=v,M[38]=E,M[39]=C):C=M[39],M[40]!==K||M[41]!==F||M[42]!==eu||M[43]!==D||M[44]!==el||M[45]!==ei||M[46]!==Q?(A=(eu||!D)&&null!=F&&(0,a.jsxs)(y.B,{gap:"xs",children:[(0,a.jsx)(N.E,{size:"xs",children:"Trace ID Expression"}),(0,a.jsxs)(g.s,{children:[(0,a.jsx)(eG.Z,{tableConnection:(0,er.VO)(K),name:"traceIdExpression",placeholder:"Log Trace ID Column (ex. trace_id)",control:el,size:"xs"}),(0,a.jsx)(eX.$,{ms:"sm",variant:"primary",onClick:ei(e=>{let{traceIdExpression:t}=e;null!=K&&Q({source:{...K,traceIdExpression:t}})}),size:"xs",children:"Save"}),(0,a.jsx)(eX.$,{ms:"sm",variant:"secondary",onClick:()=>em(!1),size:"xs",children:"Cancel"})]})]}),M[40]=K,M[41]=F,M[42]=eu,M[43]=D,M[44]=el,M[45]=ei,M[46]=Q,M[47]=A):A=M[47],M[48]===Symbol.for("react.memo_cache_sentinel")?(T=(0,a.jsx)(eo.c,{my:"sm"}),M[48]=T):T=M[48],M[49]!==P||M[50]!==et?.id||M[51]!==O||M[52]!==V||M[53]!==Z||M[54]!==es||M[55]!==D||M[56]!==U?($=U?.kind===x.GL.Trace&&D&&(0,a.jsx)(eB,{traceTableSource:U,logTableSource:Z,traceId:D,dateRange:P,focusDate:O,highlightedRowWhere:et?.id,onClick:es,initialRowHighlightHint:V}),M[49]=P,M[50]=et?.id,M[51]=O,M[52]=V,M[53]=Z,M[54]=es,M[55]=D,M[56]=U,M[57]=$):$=M[57],M[58]!==eh||M[59]!==et||M[60]!==Z||M[61]!==U?(z=null!=U&&null!=et&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.E,{size:"sm",my:"sm",children:"Event Details"}),(0,a.jsx)(_.A,{className:"fs-8 mt-2",items:[{text:"Overview",value:"overview"},{text:"Column Values",value:"parsed"}],activeItem:eh,onClick:e=>ex(e)}),"overview"===eh&&(0,a.jsx)(X.W,{source:et?.type===x.GL.Log&&Z?Z:U,rowId:et?.id,aliasWith:et?.aliasWith}),"parsed"===eh&&(0,a.jsx)(q.dD,{source:et?.type===x.GL.Log&&Z?Z:U,rowId:et?.id,aliasWith:et?.aliasWith})]}),M[58]=eh,M[59]=et,M[60]=Z,M[61]=U,M[62]=z):z=M[62],M[63]!==et||M[64]!==D||M[65]!==U?(L=null!=U&&!et&&D&&(0,a.jsx)(eY.t,{shadow:"xs",p:"xl",mt:"md",children:(0,a.jsx)(en.o,{mih:100,children:(0,a.jsx)(N.E,{size:"sm",children:"Please select a span above to view details."})})}),M[63]=et,M[64]=D,M[65]=U,M[66]=L):L=M[66],M[67]!==B||M[68]!==C||M[69]!==A||M[70]!==$||M[71]!==z||M[72]!==L?(I=(0,a.jsxs)("div",{"data-testid":B,children:[C,A,T,$,z,L]}),M[67]=B,M[68]=C,M[69]=A,M[70]=$,M[71]=z,M[72]=L,M[73]=I):I=M[73],I}function eQ(e){return!e}let e0=(0,i.createContext)({});var e1=((n=e1||{}).Overview="overview",n.Parsed="parsed",n.Debug="debug",n.Trace="trace",n.ServiceMap="serviceMap",n.Context="context",n.Replay="replay",n.Infrastructure="infrastructure",n);let e2=({rowId:e,aliasWith:t,source:s,isNestedPanel:r=!1,setSubDrawerOpen:n,onClose:c,breadcrumbPath:h=[],onBreadcrumbClick:f})=>{let y,{data:v,isLoading:j,isSuccess:C}=(0,q.k1)({source:s,rowId:e,aliasWith:t}),{dbSqlRowTableConfig:k}=(0,i.useContext)(e0),N=(0,i.useCallback)(e=>{let t=h.length;if(t>e)c(),f?.(e);else{if(t===e)return;f?.(e)}},[h.length,f,c]),A=(0,i.useMemo)(()=>!!s.resourceAttributesExpression||!!s.eventAttributesExpression,[s.eventAttributesExpression,s.resourceAttributesExpression]),T="trace"===s.kind?"trace":A?"overview":"parsed",[L,I]=(0,u.ZA)("sidePanelTab",(0,u.Oq)(Object.values(e1)).withDefault(T)),[M,R]=(0,i.useState)(T),D=r?R:I,P=r?M:L,O=v?.data?.[0],F=O?.__hdx_timestamp;y=new Date("number"==typeof F?1e3*F:F);let V=(0,w.N8)(s),B=d()(O?.__hdx_body)?O.__hdx_body:O?.__hdx_body!==void 0?JSON.stringify(O.__hdx_body):void 0,W=O?.__hdx_severity_text,Y=(0,i.useMemo)(()=>{let e=[];return(s.kind===x.GL.Trace||s.kind===x.GL.Log)&&s.highlightedRowAttributeExpressions&&e.push(...s.highlightedRowAttributeExpressions),s.serviceNameExpression&&e.push({sqlExpression:s.serviceNameExpression}),v?(0,E.N4)(s,e,v.data||[],v.meta||[]):[]},[s,v]),J=(0,i.useMemo)(()=>[(0,o.A)(y,{minutes:-60}),(0,o.A)(y,{minutes:60})],[y]),K=(0,i.useMemo)(()=>[(0,o.A)(y,{hours:-4}),(0,o.A)(y,{hours:4})],[y]),Z=O?.__hdx_trace_id,U="log"===s.kind?s.traceSourceId:"trace"===s.kind?s.logSourceId:void 0,Q="trace"===s.kind?s.id:s.traceSourceId,ee=Z&&Q,{rumSessionId:et,rumServiceName:es}=(e=>{let t,s,r,n,a=(0,l.c)(42),{sourceId:i,traceId:o,dateRange:c,enabled:d}=e;a[0]!==i?(t={id:i},a[0]=i,a[1]=t):t=a[1];let{data:u}=(0,w.Fo)(t),{getFieldExpression:m}=(0,G.A)(u);e:{let e,t,r,n,l,i,c,d,h;if(!u||!o||!m){s=void 0;break e}let x=`${u.timestampValueExpression}`;a[2]!==x?(e={valueExpression:x,alias:"Timestamp"},a[2]=x,a[3]=e):e=a[3];let p=u.resourceAttributesExpression??"ResourceAttributes";a[4]!==m||a[5]!==p?(t=m(p,"rum.sessionId"),a[4]=m,a[5]=p,a[6]=t):t=a[6];let g=`${t}`;a[7]!==g?(r={valueExpression:g,alias:"rumSessionId"},a[7]=g,a[8]=r):r=a[8];let f=u.resourceAttributesExpression??"ResourceAttributes";a[9]!==m||a[10]!==f?(n=m(f,"service.name"),a[9]=m,a[10]=f,a[11]=n):n=a[11];let y=`${n}`;a[12]!==y?(l={valueExpression:y,alias:"serviceName"},a[12]=y,a[13]=l):l=a[13];let b=`${u.parentSpanIdExpression}`;a[14]!==b?(i={valueExpression:b,alias:"parentSpanId"},a[14]=b,a[15]=i):i=a[15],a[16]!==l||a[17]!==i||a[18]!==e||a[19]!==r?(c=[e,r,l,i],a[16]=l,a[17]=i,a[18]=e,a[19]=r,a[20]=c):c=a[20],a[21]===Symbol.for("react.memo_cache_sentinel")?(d={limit:1e4},a[21]=d):d=a[21];let v=`${u.traceIdExpression} = '${o}'`;a[22]!==u.connection||a[23]!==u.from||a[24]!==u.timestampValueExpression||a[25]!==c||a[26]!==v?(h={select:c,from:u.from,timestampValueExpression:u.timestampValueExpression,limit:d,connection:u.connection,where:v,whereLanguage:"sql"},a[22]=u.connection,a[23]=u.from,a[24]=u.timestampValueExpression,a[25]=c,a[26]=v,a[27]=h):h=a[27],s=h}let h=s,x=void 0!==d&&d&&!!u&&!!h;a[28]!==h||a[29]!==c||a[30]!==x?(r={config:h,dateRangeStartInclusive:!0,dateRange:c,enabled:x},a[28]=h,a[29]=c,a[30]=x,a[31]=r):r=a[31];let{data:p}=eF(r);t:{let e,t,s;a[32]!==p?.data?(e=p?.data||[],a[32]=p?.data,a[33]=e):e=a[33];let r=e;a[34]!==r?(t=r.find(eH),a[34]=r,a[35]=t):t=a[35];let l=t;if(!l){let e;a[36]!==r?(e=r.find(eq),a[36]=r,a[37]=e):e=a[37],l=e}if(l){let e;a[38]!==l.rumSessionId||a[39]!==l.serviceName?(e={rumServiceName:l.serviceName,rumSessionId:l.rumSessionId},a[38]=l.rumSessionId,a[39]=l.serviceName,a[40]=e):e=a[40],n=e;break t}a[41]===Symbol.for("react.memo_cache_sentinel")?(s={rumServiceName:void 0,rumSessionId:void 0},a[41]=s):s=a[41],n=s}return n})({sourceId:Q,traceId:Z,dateRange:J,enabled:null!=e}),er=(0,i.useMemo)(()=>{try{if(!s?.resourceAttributesExpression||!O)return!1;let e=O.__hdx_resource_attributes;return e?.["k8s.pod.uid"]!=null||e?.["k8s.node.name"]!=null}catch(e){return console.error(e),!1}},[s,O]),en=(0,i.useMemo)(()=>{if(O)return{timestamp:O.__hdx_timestamp,spanId:O.__hdx_span_id,body:O.__hdx_body}},[O]);return j?(0,a.jsx)("div",{className:eO().loadingState,children:"Loading..."}):C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.a,{p:"sm",children:(0,a.jsx)(b.A,{date:y,attributes:Y,mainContent:B,mainContentHeader:V,severityText:W,breadcrumbPath:h,onBreadcrumbClick:N})}),(0,a.jsx)(_.A,{"data-testid":"side-panel-tabs",className:"fs-8 mt-2",items:[...A?[{text:"Overview",value:"overview"}]:[],{text:"Column Values",value:"parsed"},{text:"Trace",value:"trace"},...ee?[{text:"Service Map",value:"serviceMap"}]:[],{text:"Surrounding Context",value:"context"},...null!=et?[{text:"Session Replay",value:"replay"}]:[],...er?[{text:"Infrastructure",value:"infrastructure"}]:[]],activeItem:P,onClick:e=>D(e)}),"overview"===P&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(X.W,{"data-testid":"side-panel-tab-overview",source:s,rowId:e,aliasWith:t,hideHeader:!0})}),"trace"===P&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(p.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,a.jsx)(eU,{"data-testid":"side-panel-tab-trace",parentSourceId:s.id,childSourceId:U,traceId:Z,dateRange:J,focusDate:y,initialRowHighlightHint:en})})}),"serviceMap"===P&&ee&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(g.s,{p:"sm",flex:1,children:(0,a.jsx)($,{traceId:Z,traceTableSourceId:Q,dateRange:J})})}),"parsed"===P&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(q.dD,{"data-testid":"side-panel-tab-parsed",source:s,rowId:e,aliasWith:t})}),"context"===P&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(z.A,{"data-testid":"side-panel-tab-context",source:s,dbSqlRowTableConfig:k,rowData:O,rowId:e,breadcrumbPath:h,onBreadcrumbClick:N})}),"replay"===P&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)("div",{className:"overflow-hidden flex-grow-1",children:(0,a.jsx)(eW,{"data-testid":"side-panel-tab-replay",dateRange:K,focusDate:y,setSubDrawerOpen:n,traceSourceId:Q,serviceName:es,rumSessionId:et})})}),"infrastructure"===P&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(p.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,a.jsx)(H,{"data-testid":"side-panel-tab-infrastructure",source:s,rowData:O,rowId:e})})}),(0,a.jsx)(S.ir,{})]}):(0,a.jsx)("div",{className:eO().loadingState,children:"Error loading row data"})};function e3(e){let t,s,r,n,o,c,d,x,g,y,b,S,w,_=(0,l.c)(39),{onClose:E,rowId:k,aliasWith:N,source:A,isNestedPanel:T,breadcrumbPath:$,onBreadcrumbClick:z}=e;_[0]!==$?(t=void 0===$?[]:$,_[0]=$,_[1]=t):t=_[1];let L=t,I=(0,C.Y)()+10,{size:M,startResize:R}=(0,v.A)(80),[D,P]=(0,i.useState)(!1);(0,i.useContext)(e0),_[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,u.Oq)(Object.values(e1)),_[2]=s):s=_[2];let[,O]=(0,u.ZA)("tab",s);_[3]===Symbol.for("react.memo_cache_sentinel")?(r={},_[3]=r):r=_[3];let{clear:F}=j(r);_[4]!==F||_[5]!==T||_[6]!==E||_[7]!==O?(n=()=>{T||O(null),F(),E()},_[4]=F,_[5]=T,_[6]=E,_[7]=O,_[8]=n):n=_[8];let V=n;_[9]===Symbol.for("react.memo_cache_sentinel")?(o=["esc"],_[9]=o):o=_[9];let B=!1===D;_[10]!==B?(c={enabled:B},_[10]=B,_[11]=c):c=_[11],(0,h.vC)(o,V,c);let W=null!=k,H=!T;_[12]!==V||_[13]!==D?(d=()=>{D||V()},_[12]=V,_[13]=D,_[14]=d):d=_[14];let q=`${M}vw`;return _[15]===Symbol.for("react.memo_cache_sentinel")?(x={body:{padding:"0",height:"100vh"}},_[15]=x):x=_[15],_[16]!==R?(g=(0,a.jsx)(p.a,{className:eO().panelDragBar,onMouseDown:R}),_[16]=R,_[17]=g):g=_[17],_[18]!==V||_[19]!==N||_[20]!==L||_[21]!==T||_[22]!==z||_[23]!==k||_[24]!==A?(y=(0,a.jsx)(m.ErrorBoundary,{fallbackRender:e5,children:(0,a.jsx)(e2,{source:A,rowId:k,aliasWith:N,onClose:V,isNestedPanel:T,breadcrumbPath:L,setSubDrawerOpen:P,onBreadcrumbClick:z})}),_[18]=V,_[19]=N,_[20]=L,_[21]=T,_[22]=z,_[23]=k,_[24]=A,_[25]=y):y=_[25],_[26]!==g||_[27]!==y?(b=(0,a.jsxs)("div",{className:eO().panel,"data-testid":"row-side-panel",children:[g,y]}),_[26]=g,_[27]=y,_[28]=b):b=_[28],_[29]!==I||_[30]!==b?(S=(0,a.jsx)(C.S.Provider,{value:I,children:b}),_[29]=I,_[30]=b,_[31]=S):S=_[31],_[32]!==I||_[33]!==H||_[34]!==d||_[35]!==q||_[36]!==S||_[37]!==W?(w=(0,a.jsx)(f._,{opened:W,withCloseButton:!1,withOverlay:H,onClose:d,position:"right",size:q,styles:x,zIndex:I,children:S}),_[32]=I,_[33]=H,_[34]=d,_[35]=q,_[36]=S,_[37]=W,_[38]=w):w=_[38],w}function e5(e){return(0,a.jsxs)(y.B,{children:[(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),(0,a.jsx)("div",{className:"px-2 py-1 m-2 fs-7 font-monospace bg-body p-4",children:e?.error?.message})]})}},54167:(e,t,s)=>{"use strict";var r=s(24914);s(78666),s(25496),s(64700),r.N,r.M,r.P,t.oU=r.Q,r.O,r.L},57030:(e,t,s)=>{"use strict";s.d(t,{A:()=>eC});var r=s(6029),n=s(75155),a=s(55729),l=s(75828),i=s.n(l),o=s(47687),c=s.n(o),d=s(41038),u=s(1909),m=s(3145),h=s(95991),x=s(90124),p=s(63085),g=s(76013),f=s(3635),y=s(25062),b=s(92789),v=s(79621),j=s(10822),S=s(62118),w=s(97684),_=s(39614),E=s(81244),C=s(12853),k=s(50374),N=s(64467),A=s(40147),T=s(66692),$=s(86823),z=s(97039),L=s(61441),I=s(10708),M=s(56795),R=s(61411),D=s(81055),P=s(90515),O=s(45172),F=s(94502),V=s(80925),B=s(92917),W=s(81408),H=s.n(W);function q(e){return Math.max(e.getCurrentTime(),0)}let X=(0,a.memo)(({url:e})=>{let t,s;try{t=new URL(e)}catch{}try{let e=new URLSearchParams(t?.search??"");for(let[t,r]of(s=[],e.entries()))s.push({key:t,value:r})}catch{}return(0,r.jsxs)(z.j,{shadow:"md",position:"bottom-start",children:[(0,r.jsx)(z.j.Target,{children:(0,r.jsx)("div",{className:H().playerHeaderUrl,children:e||"Session Player"})}),e&&(0,r.jsx)(z.j.Dropdown,{children:(0,r.jsxs)("table",{className:"table fs-8 mb-0",children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(I.A,{size:14})}),(0,r.jsx)("td",{children:t?.host})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(M.A,{size:14})}),(0,r.jsx)("td",{children:t?.pathname})]}),s&&s.length>0&&s.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("strong",{children:e.key})}),(0,r.jsx)("td",{children:e.value})]},e.key))]})})]})});function Y({config:{dateRange:e,serviceName:t,sessionId:s,sourceId:n},focus:l,setPlayerTime:o,playerState:d,setPlayerState:u,playerSpeed:m,skipInactive:h,setPlayerStartTimestamp:x,setPlayerEndTimestamp:p,setPlayerFullWidth:y,playerFullWidth:b,resizeKey:v,getSessionSourceFieldExpression:j}){let S=(0,B.uy)(),w=(0,a.useRef)(null),_=(0,a.useRef)(null),E=(0,a.useRef)(null),C=(0,a.useRef)([]),k=(0,a.useRef)(0),[N,A]=(0,a.useState)(0),z=(0,a.useRef)(c()(A,100,{leading:!0,trailing:!0})),[I,M]=(0,a.useState)(!1),[W,Y]=(0,a.useState)(!1),J="",{isFetching:K,abort:G}=(0,V.S)({serviceName:t,sessionId:s,sourceId:n,startDate:e?.[0]??new Date,endDate:e?.[1]??new Date,limit:1e6,onEvent:e=>{try{let{b:t,ck:s,tcks:r}=e;if(J+=t,!s||s===r){let e=JSON.parse(J);null!=E.current?E.current.addEvent(e):(null!=x&&0===C.current.length&&x(e.timestamp),C.current.push(e)),z.current(e.timestamp),k.current=e.timestamp,J=""}}catch(e){S&&console.error(e),J=""}C.current.length>5&&M(!0)},onEnd:()=>{M(!0),Y(!0),null!=p&&(null!=E.current?p(k.current??0):C.current.length>0&&p(C.current[C.current.length-1].timestamp??0))},getSessionSourceFieldExpression:j},{keepPreviousData:!0,shouldAbortPendingRequest:!0}),[Z,U]=(0,a.useState)(""),Q=(0,a.useCallback)(()=>{if(null!=E.current)try{E.current.play(q(E.current))}catch(e){console.error(e)}},[E]),ee=(0,a.useCallback)(e=>{if(null!=E.current)try{E.current.pause(e)}catch(e){console.error(e)}},[E]);(0,T.vC)(["space"],()=>{"playing"===d?u("paused"):"paused"===d&&u("playing")});let et=(0,a.useRef)(o);(0,a.useEffect)(()=>{et.current=o},[o]);let es=(0,a.useRef)(0),er=(0,a.useCallback)(()=>{null!=E.current&&E.current.service.state.matches("playing")&&et.current(Math.round(E.current.getMetaData().startTime+q(E.current))),es.current=requestAnimationFrame(er)},[]);(0,a.useEffect)(()=>(es.current=requestAnimationFrame(er),()=>{cancelAnimationFrame(es.current)}),[er]),(0,a.useEffect)(()=>{null!=E.current&&("playing"===d?Q():"paused"===d&&ee())},[d,Q,ee]),(0,a.useEffect)(()=>{null!=E.current&&("playing"===d?(ee(),E.current?.setConfig({speed:m,skipInactive:h}),Q()):"paused"===d&&E.current?.setConfig({speed:m,skipInactive:h}))},[d,m,h,ee,Q]);let en=(0,a.useCallback)(()=>{null!=w.current&&null!=_.current&&(_.current.style.transform="scale(0.0001)",window.requestAnimationFrame(()=>{if(null==w.current||null==_.current)return;let e=w.current.getBoundingClientRect(),t=E?.current?.iframe?.offsetWidth??1280,s=E?.current?.iframe?.offsetHeight??720,r=e.width/t,n=e.height/s;_.current.style.transform=`scale(${Math.min(r,n)})`}))},[w,_]);(0,a.useEffect)(()=>(window.addEventListener("resize",en),()=>window.removeEventListener("resize",en)),[en]),(0,a.useEffect)(()=>{en()},[v,en]);let[ea,el]=(0,a.useState)(!1);(0,a.useEffect)(()=>{C.current.length<2||null==_.current||null!=E.current||(E.current=new $.B(C.current,{root:_.current,mouseTail:!0,pauseAnimation:!1,showWarning:S,skipInactive:!0}),el(!0),S&&(window.__hdx_replayer=E.current),E.current.enableInteract(),E.current.on("event-cast",e=>{try{(e?.type===3&&e?.data?.source===4||4===e.type)&&setTimeout(()=>{en()},0),e?.type===4&&U(e.data.href)}catch(e){S&&console.error(e)}}),"playing"===d&&E.current.getMetaData().endTime>(l?.ts??0)&&(null!=l&&ee(l.ts-E.current.getMetaData().startTime),Q()),setTimeout(()=>{en()},0))},[en,l,ee,I,d,Q,S]),(0,a.useEffect)(()=>{I&&ea&&!(N<(l?.ts?l.ts+1e3:1/0))&&l?.setBy!=="player"&&null!=E.current&&(ee(l?.ts==null?0:l?.ts-E.current.getMetaData().startTime),en(),"playing"===d&&Q())},[l,ee,u,d,Q,I,ea,en,N]),(0,a.useEffect)(()=>()=>{null!=E.current&&(E.current?.destroy(),E.current=null),G()},[G]);let ei=!1===I&&K,eo=!1===W&&(E.current?.getMetaData()?.endTime??0)<(l?.ts??0);return(0,a.useEffect)(()=>{null!=E.current&&null!=l&&E.current.getMetaData().endTime>l.ts&&"playing"===d&&E.current?.service?.state?.matches("paused")&&(ee(l.ts-E.current.getMetaData().startTime),Q())},[N,l,d,ee,Q]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:H().playerHeader,children:[(0,r.jsx)(g.M,{onClick:()=>y(!b),size:"sm",color:"gray",children:b?(0,r.jsx)(R.A,{size:14}):(0,r.jsx)(D.A,{size:14})}),(0,r.jsx)(L.i,{value:Z,children:({copied:e,copy:t})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X,{url:Z}),(0,r.jsx)(g.M,{onClick:t,title:"Copy URL",variant:"secondary",size:"sm",children:e?(0,r.jsx)(P.A,{size:14}):(0,r.jsx)(O.A,{size:14})})]})})]}),(0,r.jsxs)("div",{className:H().playerContainer,children:[ei||eo?(0,r.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[(0,r.jsx)(F.A,{className:"spin-animate",size:14}),eo?"Buffering to time...":"Loading replay..."]}):W&&null==E.current?(0,r.jsx)("div",{className:"text-center",children:"No replay available for this session, most likely due to this session starting and ending in a background tab."}):null,(0,r.jsx)("div",{ref:w,className:i()(H().domPlayerWrapper,"overflow-hidden",{"d-none":ei||eo,started:(E.current?.getCurrentTime()??0)>0,[H().domPlayerWrapperPaused]:"paused"===d}),children:(0,r.jsx)("div",{className:"player rr-block",ref:_})})]})]})}var J=s(831),K=s.n(J),G=s(4308),Z=s(91021),U=s(29766);let Q=U.Ay.object({body:U.Ay.string().nullish(),component:U.Ay.string().nullish(),durationInMs:U.Ay.number(),"error.message":U.Ay.string().nullish(),"http.method":U.Ay.string().nullish(),"http.status_code":U.Ay.string().nullish(),"http.url":U.Ay.string().nullish(),id:U.Ay.string(),"location.href":U.Ay.string().nullish(),"otel.library.name":U.Ay.string(),parent_span_id:U.Ay.string(),severity_text:U.Ay.string(),span_id:U.Ay.string(),span_name:U.Ay.string(),timestamp:U.Ay.string(),trace_id:U.Ay.string(),type:U.Ay.string().nullish()});var ee=s(9953),et=s(7565),es=s(2326),er=s.n(es);let en=e=>{let t,s,l,i,o,c,d,u=(0,n.c)(28),{min:m,max:h,value:x,markers:g,playerState:f,onChange:y,setPlayerState:b}=e,v=(0,et.a)();u[0]!==v||u[1]!==m?(t=e=>{let t=Math.max(e-m,0),s=Math.floor(t/1e3/60),r=Math.floor(t/1e3%60),n=`${s}:${r<10?"0":""}${r}`,a=v(e,{format:"short"});return`${n} at ${a}`},u[0]=v,u[1]=m,u[2]=t):t=u[2];let j=t;u[3]!==g||u[4]!==h||u[5]!==m||u[6]!==y?(s=g?.map(e=>(0,r.jsx)(p.m,{color:e.isError?"red":"gray",label:(0,B.EJ)(e?.description??"",240,"...",/\n/),position:"top",withArrow:!0,children:(0,r.jsx)("div",{className:er().markerDot,style:{backgroundColor:e.isSuccess?"var(--color-text-success)":e.isError?"var(--color-text-danger)":"var(--color-text-muted)",left:`${(e.ts-m)/(h-m)*100}%`},onClick:()=>y(e.ts)})},e.id)),u[3]=g,u[4]=h,u[5]=m,u[6]=y,u[7]=s):s=u[7];let S=s,[w,_]=a.useState(f);u[8]!==f||u[9]!==b?(l=()=>{_(f),b("paused")},u[8]=f,u[9]=b,u[10]=l):l=u[10];let E=l;u[11]!==w||u[12]!==b?(i=()=>{b(w)},u[11]=w,u[12]=b,u[13]=i):i=u[13];let C=i;u[14]!==S?(o=(0,r.jsx)("div",{className:er().markers,children:S}),u[14]=S,u[15]=o):o=u[15];let k="playing"===f?"green":"gray",N=x||m;return u[16]!==E||u[17]!==C||u[18]!==h||u[19]!==m||u[20]!==y||u[21]!==k||u[22]!==N||u[23]!==j?(c=(0,r.jsx)(ee.A,{color:k,size:"sm",min:m,max:h,value:N,step:1e3,label:j,onChange:y,onMouseDown:E,onMouseUp:C}),u[16]=E,u[17]=C,u[18]=h,u[19]=m,u[20]=y,u[21]=k,u[22]=N,u[23]=j,u[24]=c):c=u[24],u[25]!==o||u[26]!==c?(d=(0,r.jsxs)("div",{className:er().wrapper,children:[o,c]}),u[25]=o,u[26]=c,u[27]=d):d=u[27],d};function ea(e){let{timestamp:t,durationInMs:s}=e,r=new Date(t).getTime(),n=new Date(r).getTime()+s;return{...e,startOffset:r,endOffset:n}}function el(e){return e.data}function ei(e){return e.success}function eo(e){return Q.safeParse(e)}var ec=s(43370),ed=s(34834),eu=s(67214),em=s(53993),eh=s(91104),ex=s(54396),ep=s(56906),eg=s(69986),ef=s(98632),ey=s(34027),eb=s(21440),ev=s(70727);let ej={navigation:(0,r.jsx)(ex.A,{size:14}),chat:(0,r.jsx)(ep.A,{size:14}),network:(0,r.jsx)(eg.A,{size:14}),custom:(0,r.jsx)(ef.A,{size:14})},eS=a.forwardRef((e,t)=>{let s,a,l,o,c,d,u,m,h,x,p=(0,n.c)(30),{dataIndex:g,event:f,isHighlighted:y,onClick:b,onTimeClick:v}=e;return p[0]!==f.isError||p[1]!==f.isSuccess||p[2]!==y?(s=i()(H().eventRow,{[H().eventRowError]:f.isError,[H().eventRowSuccess]:f.isSuccess,[H().eventRowHighlighted]:y}),p[0]=f.isError,p[1]=f.isSuccess,p[2]=y,p[3]=s):s=p[3],p[4]!==f.eventSource?(a=ej[f.eventSource]||(0,r.jsx)(ey.A,{size:14}),p[4]=f.eventSource,p[5]=a):a=p[5],p[6]!==a?(l=(0,r.jsx)("div",{className:H().eventRowIcon,children:a}),p[6]=a,p[7]=l):l=p[7],p[8]!==f.duration?(o=f.duration>0&&(0,r.jsxs)("span",{children:[f.duration,"ms"]}),p[8]=f.duration,p[9]=o):o=p[9],p[10]!==f.title||p[11]!==o?(c=(0,r.jsxs)("div",{className:H().eventRowTitle,children:[f.title," ",o]}),p[10]=f.title,p[11]=o,p[12]=c):c=p[12],p[13]!==f.description?(d=(0,r.jsx)("div",{className:H().eventRowDescription,title:f.description,children:f.description}),p[13]=f.description,p[14]=d):d=p[14],p[15]!==b||p[16]!==c||p[17]!==d?(u=(0,r.jsxs)("div",{className:H().eventRowContent,onClick:b,children:[c,d]}),p[15]=b,p[16]=c,p[17]=d,p[18]=u):u=p[18],p[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(S.A,{size:12,className:"me-1"}),p[19]=m):m=p[19],p[20]!==f.formattedTimestamp||p[21]!==v?(h=(0,r.jsxs)("div",{className:H().eventRowTimestamp,onClick:v,children:[m,f.formattedTimestamp]}),p[20]=f.formattedTimestamp,p[21]=v,p[22]=h):h=p[22],p[23]!==g||p[24]!==t||p[25]!==s||p[26]!==l||p[27]!==u||p[28]!==h?(x=(0,r.jsxs)("div",{"data-index":g,ref:t,className:s,children:[l,u,h]}),p[23]=g,p[24]=t,p[25]=s,p[26]=l,p[27]=u,p[28]=h,p[29]=x):x=p[29],x}),ew=({queriedConfig:e,aliasMap:t,onClick:s,onTimeClick:n,focus:l,minTs:i,showRelativeTime:o,eventsFollowPlayerPosition:c})=>{let{data:d,isLoading:u}=(0,Z.HD)(e,{placeholderData:e=>e,queryKey:["SessionEventList",e]}),m=(0,et.a)(),h=a.useMemo(()=>d?.data?.map(e=>Q.safeParse(e)).filter(e=>e.success).map(e=>e.data)??[],[d?.data]),x=(0,ev.Ay)({meta:d?.meta,aliasMap:t}),p=a.useMemo(()=>h.map(e=>{let{timestamp:t,durationInMs:s}=e,r=new Date(t).getTime(),n=new Date(r).getTime()+s,a=e["http.url"]??"",l=Number(e["http.status_code"]??""),c=e["http.method"]??"",d=(0,B.Up)(a),u=""!=c&&null!=c&&null!=a&&""!=a,h=e["error.message"],x=e.body??"",p=e.component,g=e.span_name,f=e["location.href"]??"",y=e["otel.library.name"],b=(0,B.Up)(f),v="custom-action"===y,j="routeChange"===g||"documentLoad"===g,S=e.severity_text?.toLowerCase()==="error"||"error"===p||l>499;return{id:e.id,row:e,isError:S,isSuccess:!S&&l<400&&l>99,eventSource:j?"navigation":u?"network":v?"custom":"intercom.onShow"===g?"chat":"log",title:j?"Navigated":"console.error"===g?"console.error":"console.log"===g?"console.log":"console.warn"===g?"console.warn":a.length>0?`${l} ${c}`:"intercom.onShow"===g?"Intercom Chat Opened":v||"console"===p?g:"console.error",description:j?b:null!=h&&h.length>0?h:"console"===p?x??"":a.length>0?d:"",timestamp:new Date(r),formattedTimestamp:o?(0,B.ax)(r-i):m(r,{format:"time"}),duration:n-r}})??[],[h,o,i,m]),g=a.useRef(null),f=(0,eb.Te)({count:p.length,getScrollElement:()=>g.current,estimateSize:()=>36}),y=(0,eh.D)(p.findIndex(e=>e.timestamp.getTime()>=(l?.ts??0)),500);return(a.useEffect(()=>{f&&y>=0&&c&&f.scrollToIndex(y,{align:"center"})},[y,c,f]),u)?(0,r.jsxs)(ed.B,{p:"sm",gap:"xs",children:[(0,r.jsx)(eu.E,{height:36}),(0,r.jsx)(eu.E,{height:36}),(0,r.jsx)(eu.E,{height:36})]}):(0,r.jsx)(em.F,{h:"100%",scrollbarSize:4,viewportRef:g,children:(0,r.jsx)("div",{className:H().eventListContainer,children:(0,r.jsx)("div",{style:{height:`${f.getTotalSize()}px`,width:"100%",position:"relative"},children:f.getVirtualItems().map(e=>{let t=p[e.index];return(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},children:(0,r.jsx)(eS,{event:t,dataIndex:e.index,isHighlighted:y===e.index,ref:f.measureElement,onClick:()=>s(x(t.row)),onTimeClick:()=>n(t.timestamp.getTime())})},e.key)})})})})},e_=(0,a.memo)(function(e){let t,s,a,l,i,o=(0,n.c)(18),{playerState:c,setPlayerState:d,setFocus:u,playbackRange:m,focus:h,queriedConfig:x}=e,p=m[0].getTime(),g=m[1].getTime(),f=1e3*Math.ceil(m[1].getTime()/1e3),y=1e3*Math.floor(m[0].getTime()/1e3);o[0]!==x?(t={placeholderData:G.rX,queryKey:["PlayBar",x]},o[0]=x,o[1]=t):t=o[1];let{data:b}=(0,Z.HD)(x,t);b?.data,o[2]!==b?.data?(s=b?.data?.map(eo).filter(ei).map(el)??[],o[2]=b?.data,o[3]=s):s=o[3];let v=s;o[4]!==v||o[5]!==g||o[6]!==p?(a=K()(v.map(ea).filter(e=>{let{startOffset:t}=e;return t>=p&&t<=g}).map(e=>{let t=e.span_name,s=e["location.href"]??"",r=(0,B.Up)(s),n=e["error.message"]??"",a=e["http.url"]??"",l=Number(e["http.status_code"]??""),i=e["http.method"]??"",o=(0,B.Up)(a),c=e.severity_text?.toLowerCase()==="error"||"error"===e.component||"console"===e.component||l>=399;return{id:e.id,ts:e.startOffset,percentage:Math.round((e.startOffset-p)/(g-p)*100),description:"routeChange"===t||"documentLoad"===t?`Navigated to ${r}`:a.length>0?`${l} ${i}${a.length>0?` ${o}`:""}`:null!=n&&n.length>0?n:"intercom.onShow"===t?"Intercom Chat Opened":e.body??"",isError:c,isSuccess:!c&&l<400&&l>99}})??[],"percentage"),o[4]=v,o[5]=g,o[6]=p,o[7]=a):a=o[7];let j=a,S=h?.ts;return o[8]!==u?(l=e=>{u({ts:e,setBy:"slider"})},o[8]=u,o[9]=l):l=o[9],o[10]!==j||o[11]!==f||o[12]!==y||o[13]!==c||o[14]!==d||o[15]!==S||o[16]!==l?(i=(0,r.jsx)(en,{markers:j,min:y,max:f,value:S,onChange:l,setPlayerState:d,playerState:c}),o[10]=j,o[11]=f,o[12]=y,o[13]=c,o[14]=d,o[15]=S,o[16]=l,o[17]=i):i=o[17],i});function eE(e,t){let{valueExpression:s,alias:r}=t;return e[r]=s,e}function eC(e){let t,s,l,o,T,$,z,L,I,M,R,D,P,O,F,V,W,q,X,J,K,G,Z,U,Q,ee,es,er,en,ea,el,ei,eo,ed,eu,em,eh,ex,ep,eg,ef,ey,eb,ev,ej,eS,eC,eN,eA,eT,e$,ez,eL,eI,eM,eR,eD,eP,eO,eF,eV,eB,eW,eH,eq,eX,eY,eJ=(0,n.c)(192),{traceSource:eK,sessionSource:eG,session:eZ,setDrawerOpen:eU,rumSessionId:eQ,start:e0,end:e1,initialTs:e2,whereLanguage:e3}=e,e5=void 0===e3?"lucene":e3,[e4,e6]=(0,a.useState)(void 0);eJ[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],eJ[0]=t):t=eJ[0];let[e7,e8]=(0,a.useState)(t);eJ[1]===Symbol.for("react.memo_cache_sentinel")?(s=d.GJ.withOptions({history:"replace"}),eJ[1]=s):s=eJ[1];let[e9,te]=(0,d.ZA)("ts",s),tt=(0,B.ZC)(e9);eJ[2]!==e2?(l=null!=e2?{ts:e2,setBy:"parent"}:void 0,eJ[2]=e2,eJ[3]=l):l=eJ[3];let[ts,tr]=(0,a.useState)(l);eJ[4]!==tt||eJ[5]!==e9?(o=()=>{null==tt&&null!=e9&&tr({ts:e9,setBy:"url"})},T=[tt,e9],eJ[4]=tt,eJ[5]=e9,eJ[6]=o,eJ[7]=T):(o=eJ[6],T=eJ[7]),(0,a.useEffect)(o,T),eJ[8]!==te?($=c()(async e=>{te(e)},1e3),eJ[8]=te,eJ[9]=$):$=eJ[9];let tn=(0,a.useRef)($).current;eJ[10]!==te?(z=()=>()=>{te(null)},L=[te],eJ[10]=te,eJ[11]=z,eJ[12]=L):(z=eJ[11],L=eJ[12]),(0,a.useEffect)(z,L),eJ[13]!==te?(I=e=>{"player"===e.setBy?tn(e.ts):te(e.ts),tr(e)},eJ[13]=te,eJ[14]=I):I=eJ[14];let ta=I,[tl,ti]=(0,a.useState)("paused"),[to,tc]=(0,a.useState)(void 0);eJ[15]===Symbol.for("react.memo_cache_sentinel")?(M={history:"push"},eJ[15]=M):M=eJ[15];let[td,tu]=(0,d.ZA)("session_q",M);eJ[16]!==to||eJ[17]!==td?(R=()=>{null!=td&&null==to&&tc(td)},D=[td,to],eJ[16]=to,eJ[17]=td,eJ[18]=R,eJ[19]=D):(R=eJ[18],D=eJ[19]),(0,a.useEffect)(R,D);let tm=td??"";eJ[20]!==tu?(P=()=>()=>{tu(null,{history:"replace"})},O=[tu],eJ[20]=tu,eJ[21]=P,eJ[22]=O):(P=eJ[21],O=eJ[22]),(0,a.useEffect)(P,O);let[th,tx]=(0,a.useState)("highlighted"),[tp,tg]=(0,B.Mj)("hdx-session-subpanel-show-relative-time",!1),[tf,ty]=(0,B.Mj)("hdx-session-subpanel-player-speed",1),[tb,tv]=(0,B.Mj)("hdx-session-subpanel-skip-inactive",!0),[tj,tS]=(0,B.Mj)("hdx-session-subpanel-events-follow-player-position",!0),[tw,t_]=(0,a.useState)(e0.getTime()+144e5),[tE,tC]=(0,a.useState)(e1.getTime()-144e5);eJ[23]!==tw?(F=new Date(tw),eJ[23]=tw,eJ[24]=F):F=eJ[24],eJ[25]!==tE?(V=new Date(tE),eJ[25]=tE,eJ[26]=V):V=eJ[26],eJ[27]!==F||eJ[28]!==V?(W=[F,V],eJ[27]=F,eJ[28]=V,eJ[29]=W):W=eJ[29];let tk=W,{getFieldExpression:tN}=(0,A.A)(eG);eJ[30]!==e1||eJ[31]!==eQ||eJ[32]!==tm||eJ[33]!==e0||eJ[34]!==th||eJ[35]!==eK||eJ[36]!==e5?(q={traceSource:eK,rumSessionId:eQ,where:tm,whereLanguage:e5,start:e0,end:e1,tab:th},eJ[30]=e1,eJ[31]=eQ,eJ[32]=tm,eJ[33]=e0,eJ[34]=th,eJ[35]=eK,eJ[36]=e5,eJ[37]=q):q=eJ[37];let{eventsConfig:tA,aliasMap:tT}=function(e){let t,s,r,a,l,i,o=(0,n.c)(96),{traceSource:c,rumSessionId:d,where:u,whereLanguage:m,start:h,end:x,tab:p}=e,{getFieldExpression:g}=(0,A.A)(c);e:{let e,s,r,n,a,l,i,d,u,m,h,x,p,f,y,b,v,j,S,w,_,E,C,k,N;if(!g){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}let A=c.eventAttributesExpression??"SpanAttributes";o[1]!==g||o[2]!==A?(e=g(A,"message"),o[1]=g,o[2]=A,o[3]=e):e=o[3];let T=`${e}`;o[4]!==T?(s={valueExpression:T,alias:"body"},o[4]=T,o[5]=s):s=o[5];let $=c.eventAttributesExpression??"SpanAttributes";o[6]!==g||o[7]!==$?(r=g($,"component"),o[6]=g,o[7]=$,o[8]=r):r=o[8];let z=`${r}`;o[9]!==z?(n={valueExpression:z,alias:"component"},o[9]=z,o[10]=n):n=o[10];let L=`toFloat64OrZero(toString(${c.durationExpression})) * pow(10, 3) / pow(10, toInt8OrZero(toString(${c.durationPrecision})))`;o[11]!==L?(a={valueExpression:L,alias:"durationInMs"},o[11]=L,o[12]=a):a=o[12];let I=c.eventAttributesExpression??"SpanAttributes";o[13]!==g||o[14]!==I?(l=g(I,"error.message"),o[13]=g,o[14]=I,o[15]=l):l=o[15];let M=`${l}`;o[16]!==M?(i={valueExpression:M,alias:"error.message"},o[16]=M,o[17]=i):i=o[17];let R=c.eventAttributesExpression??"SpanAttributes";o[18]!==g||o[19]!==R?(d=g(R,"http.method"),o[18]=g,o[19]=R,o[20]=d):d=o[20];let D=`${d}`;o[21]!==D?(u={valueExpression:D,alias:"http.method"},o[21]=D,o[22]=u):u=o[22];let P=c.eventAttributesExpression??"SpanAttributes";o[23]!==g||o[24]!==P?(m=g(P,"http.status_code"),o[23]=g,o[24]=P,o[25]=m):m=o[25];let O=`${m}`;o[26]!==O?(h={valueExpression:O,alias:"http.status_code"},o[26]=O,o[27]=h):h=o[27];let F=c.eventAttributesExpression??"SpanAttributes";o[28]!==g||o[29]!==F?(x=g(F,"http.url"),o[28]=g,o[29]=F,o[30]=x):x=o[30];let V=`${x}`;o[31]!==V?(p={valueExpression:V,alias:"http.url"},o[31]=V,o[32]=p):p=o[32];let B=`toString(cityHash64(${c.traceIdExpression}, ${c.parentSpanIdExpression}, ${c.spanIdExpression}))`;o[33]!==B?(f={valueExpression:B,alias:"id"},o[33]=B,o[34]=f):f=o[34];let W=c.eventAttributesExpression??"SpanAttributes";o[35]!==g||o[36]!==W?(y=g(W,"location.href"),o[35]=g,o[36]=W,o[37]=y):y=o[37];let H=`${y}`;o[38]!==H?(b={valueExpression:H,alias:"location.href"},o[38]=H,o[39]=b):b=o[39],o[40]===Symbol.for("react.memo_cache_sentinel")?(v={valueExpression:"ScopeName",alias:"otel.library.name"},o[40]=v):v=o[40];let q=`${c.parentSpanIdExpression}`;o[41]!==q?(j={valueExpression:q,alias:"parent_span_id"},o[41]=q,o[42]=j):j=o[42];let X=`${c.statusCodeExpression}`;o[43]!==X?(S={valueExpression:X,alias:"severity_text"},o[43]=X,o[44]=S):S=o[44];let Y=`${c.spanIdExpression}`;o[45]!==Y?(w={valueExpression:Y,alias:"span_id"},o[45]=Y,o[46]=w):w=o[46];let J=`${c.spanNameExpression}`;o[47]!==J?(_={valueExpression:J,alias:"span_name"},o[47]=J,o[48]=_):_=o[48];let K=`${c.timestampValueExpression}`;o[49]!==K?(E={valueExpression:K,alias:"timestamp"},o[49]=K,o[50]=E):E=o[50];let G=`${c.traceIdExpression}`;o[51]!==G?(C={valueExpression:G,alias:"trace_id"},o[51]=G,o[52]=C):C=o[52],o[53]===Symbol.for("react.memo_cache_sentinel")?(k={valueExpression:"CAST('span', 'String')",alias:"type"},o[53]=k):k=o[53],o[54]!==a||o[55]!==i||o[56]!==u||o[57]!==h||o[58]!==p||o[59]!==f||o[60]!==b||o[61]!==j||o[62]!==S||o[63]!==w||o[64]!==_||o[65]!==E||o[66]!==C||o[67]!==s||o[68]!==n?(N=[s,n,a,i,u,h,p,f,b,v,j,S,w,_,E,C,k],o[54]=a,o[55]=i,o[56]=u,o[57]=h,o[58]=p,o[59]=f,o[60]=b,o[61]=j,o[62]=S,o[63]=w,o[64]=_,o[65]=E,o[66]=C,o[67]=s,o[68]=n,o[69]=N):N=o[69],t=N}let f=t,y=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:>299 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[70]!==y?(s={type:"lucene",condition:y},o[70]=y,o[71]=s):s=o[71];let b=s;t:{let e;if(!g){r=void 0;break t}let t=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:* 
      OR ${c.eventAttributesExpression}.component:"console" 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[72]!==t?(e={type:"lucene",condition:t},o[72]=t,o[73]=e):e=o[73],r=e}let v=r;s:{let e,t,s,r;if(!g||!f||!v){a=void 0;break s}o[74]!==x||o[75]!==h?(e=[h,x],o[74]=x,o[75]=h,o[76]=e):e=o[76];let n=`${c.timestampValueExpression} ASC`;o[77]===Symbol.for("react.memo_cache_sentinel")?(t={limit:4e3,offset:0},o[77]=t):t=o[77];let l="highlighted"===p?b:v;o[78]!==l?(s=[l],o[78]=l,o[79]=s):s=o[79],o[80]!==f||o[81]!==s||o[82]!==e||o[83]!==n||o[84]!==c.connection||o[85]!==c.from||o[86]!==c.implicitColumnExpression||o[87]!==c.timestampValueExpression||o[88]!==u||o[89]!==m?(r={select:f,from:c.from,dateRange:e,whereLanguage:m,where:u,timestampValueExpression:c.timestampValueExpression,implicitColumnExpression:c.implicitColumnExpression,connection:c.connection,orderBy:n,limit:t,filters:s},o[80]=f,o[81]=s,o[82]=e,o[83]=n,o[84]=c.connection,o[85]=c.from,o[86]=c.implicitColumnExpression,o[87]=c.timestampValueExpression,o[88]=u,o[89]=m,o[90]=r):r=o[90],a=r}let j=a;r:{let e;if(!g){l=void 0;break r}o[91]!==f?(e=f.reduce(eE,{}),o[91]=f,o[92]=e):e=o[92],l=e}let S=l;return o[93]!==S||o[94]!==j?(i={eventsConfig:j,aliasMap:S},o[93]=S,o[94]=j,o[95]=i):i=o[95],i}(q),[t$,tz]=(0,a.useState)(!1);eJ[38]!==tf||eJ[39]!==ty?(X=()=>{1==tf?ty(2):2==tf?ty(4):4==tf?ty(8):8==tf&&ty(1)},eJ[38]=tf,eJ[39]=ty,eJ[40]=X):X=eJ[40];let tL=X,tI=tk[0].getTime(),tM=tk[1].getTime();eJ[41]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{ti(ek)},eJ[41]=J):J=eJ[41];let tR=J;eJ[42]!==ts?.ts||eJ[43]!==tI||eJ[44]!==ta?(K=()=>{ta({ts:Math.max((ts?.ts??tI)-15e3,tI),setBy:"skip-backward"})},eJ[42]=ts?.ts,eJ[43]=tI,eJ[44]=ta,eJ[45]=K):K=eJ[45],ts?.ts;let tD=K;eJ[46]!==ts?.ts||eJ[47]!==tM||eJ[48]!==tI||eJ[49]!==ta?(G=()=>{ta({ts:Math.min((ts?.ts??tI)+15e3,tM),setBy:"skip-forward"})},eJ[46]=ts?.ts,eJ[47]=tM,eJ[48]=tI,eJ[49]=ta,eJ[50]=G):G=eJ[50],ts?.ts;let tP=G;eJ[51]!==tm?(Z={values:{where:tm}},eJ[51]=tm,eJ[52]=Z):Z=eJ[52];let{control:tO,handleSubmit:tF}=(0,u.mN)(Z);eJ[53]!==tu?(U=e=>{tu(e.where)},eJ[53]=tu,eJ[54]=U):U=eJ[54];let tV=U;eJ[55]!==eU?(Q=e=>{eU(!0),e6(e.where),e8(e.aliasWith)},eJ[55]=eU,eJ[56]=Q):Q=eJ[56];let tB=Q;eJ[57]!==ta?(ee=e=>{ta({ts:e,setBy:"timeline"})},eJ[57]=ta,eJ[58]=ee):ee=eJ[58];let tW=ee;eJ[59]!==ts?.setBy||eJ[60]!==ts?.ts||eJ[61]!==ta?(es=e=>{(ts?.setBy!=="player"||ts?.ts!==e)&&ta({ts:e,setBy:"player"})},eJ[59]=ts?.setBy,eJ[60]=ts?.ts,eJ[61]=ta,eJ[62]=es):es=eJ[62];let tH=es;eJ[63]!==e7||eJ[64]!==e4||eJ[65]!==eU||eJ[66]!==eK?(er=null!=e4&&eK&&(0,r.jsx)(h.Z,{children:(0,r.jsx)(k.A,{source:eK,rowId:e4,aliasWith:e7,onClose:()=>{eU(!1),e6(void 0)}})}),eJ[63]=e7,eJ[64]=e4,eJ[65]=eU,eJ[66]=eK,eJ[67]=er):er=eJ[67],eJ[68]!==t$?(en=i()(H().eventList,{"d-none":t$}),eJ[68]=t$,eJ[69]=en):en=eJ[69],eJ[70]===Symbol.for("react.memo_cache_sentinel")?(ea={zIndex:100,width:"100%"},eJ[70]=ea):ea=eJ[70],eJ[71]!==tF||eJ[72]!==tV?(el=tF(tV),eJ[71]=tF,eJ[72]=tV,eJ[73]=el):el=eJ[73],eJ[74]!==tO||eJ[75]!==tF||eJ[76]!==tV||eJ[77]!==eK||eJ[78]!==e5?(ei="sql"===e5?(0,r.jsx)(N.Z,{tableConnection:(0,m.VO)(eK),control:tO,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",language:"sql",size:"xs",enableHotkey:!0,onSubmit:tF(tV)}):(0,r.jsx)(ec.A,{tableConnection:(0,m.VO)(eK),control:tO,name:"where",language:"lucene",size:"xs",placeholder:"Search your events w/ Lucene ex. column:foo",enableHotkey:!0,onSubmit:tF(tV)}),eJ[74]=tO,eJ[75]=tF,eJ[76]=tV,eJ[77]=eK,eJ[78]=e5,eJ[79]=ei):ei=eJ[79],eJ[80]!==el||eJ[81]!==ei?(eo=(0,r.jsx)("form",{style:ea,onSubmit:el,children:ei}),eJ[80]=el,eJ[81]=ei,eJ[82]=eo):eo=eJ[82],eJ[83]===Symbol.for("react.memo_cache_sentinel")?(ed=[{value:"highlighted",label:"Highlighted"},{value:"events",label:"All Events"}],eJ[83]=ed):ed=eJ[83],eJ[84]===Symbol.for("react.memo_cache_sentinel")?(eu=e=>tx(e),eJ[84]=eu):eu=eJ[84],eJ[85]!==th?(em=(0,r.jsx)(x.I,{flex:1,size:"xs",data:ed,value:th,onChange:eu}),eJ[85]=th,eJ[86]=em):em=eJ[86];let tq=tj?"filled":"subtle";eJ[87]!==tj||eJ[88]!==tS?(eh=()=>tS(!tj),eJ[87]=tj,eJ[88]=tS,eJ[89]=eh):eh=eJ[89],eJ[90]===Symbol.for("react.memo_cache_sentinel")?(ex=(0,r.jsx)(v.A,{size:18}),eJ[90]=ex):ex=eJ[90],eJ[91]!==tq||eJ[92]!==eh?(ep=(0,r.jsx)(p.m,{label:"Sync with player position",color:"gray",children:(0,r.jsx)(g.M,{size:"md",color:"gray",variant:tq,onClick:eh,children:ex})}),eJ[91]=tq,eJ[92]=eh,eJ[93]=ep):ep=eJ[93],eJ[94]!==em||eJ[95]!==ep?(eg=(0,r.jsxs)(f.Y,{gap:6,children:[em,ep]}),eJ[94]=em,eJ[95]=ep,eJ[96]=eg):eg=eJ[96],eJ[97]!==eo||eJ[98]!==eg?(ef=(0,r.jsxs)("div",{className:H().eventListHeader,children:[eo,eg]}),eJ[97]=eo,eJ[98]=eg,eJ[99]=ef):ef=eJ[99],eJ[100]!==tT||eJ[101]!==tA||eJ[102]!==tj||eJ[103]!==ts||eJ[104]!==tI||eJ[105]!==tB||eJ[106]!==tW||eJ[107]!==tp?(ey=tA&&tT&&(0,r.jsx)(ew,{eventsFollowPlayerPosition:tj,aliasMap:tT,queriedConfig:tA,onClick:tB,focus:ts,onTimeClick:tW,minTs:tI,showRelativeTime:tp}),eJ[100]=tT,eJ[101]=tA,eJ[102]=tj,eJ[103]=ts,eJ[104]=tI,eJ[105]=tB,eJ[106]=tW,eJ[107]=tp,eJ[108]=ey):ey=eJ[108],eJ[109]!==en||eJ[110]!==ef||eJ[111]!==ey?(eb=(0,r.jsxs)("div",{className:en,children:[ef,ey]}),eJ[109]=en,eJ[110]=ef,eJ[111]=ey,eJ[112]=eb):eb=eJ[112],eJ[113]!==e1||eJ[114]!==ts||eJ[115]!==tN||eJ[116]!==t$||eJ[117]!==tf||eJ[118]!==tl||eJ[119]!==eQ||eJ[120]!==eZ||eJ[121]!==eG||eJ[122]!==tH||eJ[123]!==tb||eJ[124]!==e0?(ev=tN&&(0,r.jsx)(Y,{playerState:tl,setPlayerState:ti,focus:ts,setPlayerTime:tH,config:{serviceName:eZ.serviceName,sourceId:eG.id,sessionId:eQ,dateRange:[e0,e1]},playerSpeed:tf,skipInactive:tb,setPlayerStartTimestamp:t_,setPlayerEndTimestamp:tC,setPlayerFullWidth:tz,playerFullWidth:t$,resizeKey:`${t$}`,getSessionSourceFieldExpression:tN}),eJ[113]=e1,eJ[114]=ts,eJ[115]=tN,eJ[116]=t$,eJ[117]=tf,eJ[118]=tl,eJ[119]=eQ,eJ[120]=eZ,eJ[121]=eG,eJ[122]=tH,eJ[123]=tb,eJ[124]=e0,eJ[125]=ev):ev=eJ[125],eJ[126]!==tA||eJ[127]!==ts||eJ[128]!==tk||eJ[129]!==tl||eJ[130]!==ta?(ej=tA&&(0,r.jsx)(e_,{playerState:tl,setPlayerState:ti,focus:ts,setFocus:ta,playbackRange:tk,queriedConfig:tA}),eJ[126]=tA,eJ[127]=ts,eJ[128]=tk,eJ[129]=tl,eJ[130]=ta,eJ[131]=ej):ej=eJ[131],eJ[132]!==ej?(eS=(0,r.jsx)("div",{className:H().playerPlaybar,children:ej}),eJ[132]=ej,eJ[133]=eS):eS=eJ[133],eJ[134]!==tg||eJ[135]!==tp?(eC=()=>tg(!tp),eJ[134]=tg,eJ[135]=tp,eJ[136]=eC):eC=eJ[136],eJ[137]!==ts?.ts||eJ[138]!==tM||eJ[139]!==tI||eJ[140]!==tp?(eN=tp?(0,r.jsxs)(r.Fragment,{children:[(0,B.ax)((ts?.ts??0)-tI),(0,r.jsxs)("span",{className:"fw-normal ms-2",children:[" / ",(0,B.ax)(tM-tI)]})]}):(0,r.jsx)(et.H,{value:ts?.ts||tI,format:"time"}),eJ[137]=ts?.ts,eJ[138]=tM,eJ[139]=tI,eJ[140]=tp,eJ[141]=eN):eN=eJ[141],eJ[142]!==eC||eJ[143]!==eN?(eA=(0,r.jsx)("div",{className:H().playerTimestamp,children:(0,r.jsx)(p.m,{label:"Toggle relative time",color:"gray",children:(0,r.jsx)(y.$,{variant:"subtle",color:"gray",onClick:eC,size:"compact-xs",children:eN})})}),eJ[142]=eC,eJ[143]=eN,eJ[144]=eA):eA=eJ[144];let tX=(ts?.ts||0)<=tI;eJ[145]===Symbol.for("react.memo_cache_sentinel")?(eT=(0,r.jsx)(j.A,{size:18}),eJ[145]=eT):eT=eJ[145],eJ[146]!==tD||eJ[147]!==tX?(e$=(0,r.jsx)(p.m,{label:"Go 15 seconds back",color:"gray",children:(0,r.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tD,disabled:tX,children:eT})}),eJ[146]=tD,eJ[147]=tX,eJ[148]=e$):e$=eJ[148];let tY="playing"===tl?"Pause":"Play";eJ[149]!==tl?(ez=(0,r.jsx)(g.M,{variant:"secondary",size:"lg",radius:"xl",onClick:tR,children:"paused"===tl?(0,r.jsx)(S.A,{size:20}):(0,r.jsx)(w.A,{size:20})}),eJ[149]=tl,eJ[150]=ez):ez=eJ[150],eJ[151]!==tY||eJ[152]!==ez?(eL=(0,r.jsx)(p.m,{label:tY,color:"gray",children:ez}),eJ[151]=tY,eJ[152]=ez,eJ[153]=eL):eL=eJ[153];let tJ=(ts?.ts||0)>=tM;return eJ[154]===Symbol.for("react.memo_cache_sentinel")?(eI=(0,r.jsx)(_.A,{size:18}),eJ[154]=eI):eI=eJ[154],eJ[155]!==tP||eJ[156]!==tJ?(eM=(0,r.jsx)(p.m,{label:"Skip 15 seconds",color:"gray",children:(0,r.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tP,disabled:tJ,children:eI})}),eJ[155]=tP,eJ[156]=tJ,eJ[157]=eM):eM=eJ[157],eJ[158]!==e$||eJ[159]!==eL||eJ[160]!==eM?(eR=(0,r.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[e$,eL,eM]}),eJ[158]=e$,eJ[159]=eL,eJ[160]=eM,eJ[161]=eR):eR=eJ[161],eJ[162]!==tb?(eD=tb?(0,r.jsx)(E.A,{size:18,className:"pe-1"}):(0,r.jsx)(C.A,{size:18,className:"pe-1"}),eJ[162]=tb,eJ[163]=eD):eD=eJ[163],eJ[164]!==tv||eJ[165]!==tb?(eP=()=>tv(!tb),eJ[164]=tv,eJ[165]=tb,eJ[166]=eP):eP=eJ[166],eJ[167]===Symbol.for("react.memo_cache_sentinel")?(eO=(0,r.jsx)(b.c,{orientation:"vertical",ml:"sm"}),eJ[167]=eO):eO=eJ[167],eJ[168]!==eD||eJ[169]!==eP?(eF=(0,r.jsxs)(y.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eD,onClick:eP,children:["Skip Idle",eO]}),eJ[168]=eD,eJ[169]=eP,eJ[170]=eF):eF=eJ[170],eJ[171]!==tf?(eV=(0,r.jsxs)("span",{className:"fw-bold pe-1",children:[tf,"x"]}),eJ[171]=tf,eJ[172]=eV):eV=eJ[172],eJ[173]===Symbol.for("react.memo_cache_sentinel")?(eB=(0,r.jsx)(b.c,{orientation:"vertical",ml:"sm"}),eJ[173]=eB):eB=eJ[173],eJ[174]!==tL||eJ[175]!==eV?(eW=(0,r.jsxs)(y.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eV,onClick:tL,children:["Speed",eB]}),eJ[174]=tL,eJ[175]=eV,eJ[176]=eW):eW=eJ[176],eJ[177]!==eF||eJ[178]!==eW?(eH=(0,r.jsxs)(f.Y,{align:"center",justify:"flex-end",gap:"xs",children:[eF,eW]}),eJ[177]=eF,eJ[178]=eW,eJ[179]=eH):eH=eJ[179],eJ[180]!==eA||eJ[181]!==eR||eJ[182]!==eH?(eq=(0,r.jsxs)("div",{className:H().playerToolbar,children:[eA,eR,eH]}),eJ[180]=eA,eJ[181]=eR,eJ[182]=eH,eJ[183]=eq):eq=eJ[183],eJ[184]!==ev||eJ[185]!==eS||eJ[186]!==eq?(eX=(0,r.jsxs)("div",{className:H().player,children:[ev,eS,eq]}),eJ[184]=ev,eJ[185]=eS,eJ[186]=eq,eJ[187]=eX):eX=eJ[187],eJ[188]!==er||eJ[189]!==eb||eJ[190]!==eX?(eY=(0,r.jsxs)("div",{className:H().wrapper,children:[er,eb,eX]}),eJ[188]=er,eJ[189]=eb,eJ[190]=eX,eJ[191]=eY):eY=eJ[191],eY}function ek(e){return"playing"===e?"paused":"playing"}},58541:(e,t,s)=>{"use strict";s.d(t,{g:()=>k});var r=s(6029),n=s(55729),a=s(11335),l=s(1909),i=s(59589),o=s(29135),c=s(82641),d=s(92495),u=s(34834),m=s(43517),h=s(18341),x=s(3635),p=s(59029),g=s(39603),f=s(25062),y=s(60665),b=s(32963),v=s(95352),j=s(6876),S=s(36600),w=s(92917);let _=["{{title}}","{{body}}","{{link}}","{{state}}","{{startTime}}","{{endTime}}","{{eventId}}"],E=_.join(" | "),C=()=>e=>""===e.state.doc.toString().trim()?[]:(0,i.cp)()(e);function k({webhook:e,onClose:t,onSuccess:s}){let k=(0,S.Kh)(),N=j.Ay.useSaveWebhook(),A=j.Ay.useUpdateWebhook(),T=j.Ay.useTestWebhook(),$=null!=e,z=(0,l.mN)({defaultValues:{service:e?.service||c.x.Slack,name:e?.name||"",url:e?.url||"",description:e?.description||"",body:e?.body||"",headers:e?.headers?JSON.stringify(e.headers,null,2):""}});(0,n.useEffect)(()=>{e&&z.reset({service:e.service,name:e.name,url:e.url,description:e.description,body:e.body,headers:e.headers?JSON.stringify(e.headers,null,2):""},{})},[e,z]);let L=async e=>{let t,{service:s,url:r,body:n,headers:l}=e;if(l&&l.trim())try{t=JSON.parse(l)}catch(t){let e=t instanceof Error?t.message:"Invalid JSON format";y.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let i=n;n||(s===c.x.Generic?i=`{"text": "${E}"}`:s===c.x.IncidentIO&&(i=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));try{await T.mutateAsync({service:s,url:r,body:i,headers:t}),y.$e.show({color:"green",message:"Test webhook sent successfully"})}catch(t){console.error(t);let e="Failed to send test webhook. Please check your webhook configuration.";if(t instanceof a.H)try{let s=await t.response.json();s.message&&(e=s.message)}catch(e){console.error("Failed to parse error response:",e)}y.$e.show({message:e,color:"red",autoClose:5e3})}},I=async r=>{let{service:n,name:l,url:i,description:o,body:d,headers:u}=r;try{let r;if(u&&u.trim())try{r=JSON.parse(u)}catch(t){let e=t instanceof Error?t.message:"Invalid JSON format";y.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let a=d;d||(n===c.x.Generic?a=`{"text": "${E}"}`:n===c.x.IncidentIO&&(a=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));let m={service:n,name:l,url:i,description:o||"",body:a,headers:r},h=$?await A.mutateAsync({id:e._id,...m}):await N.mutateAsync(m);y.$e.show({color:"green",message:`Webhook ${$?"updated":"created"} successfully`}),s(h.data?._id),t()}catch(t){console.error(t);let e=`Something went wrong. Please contact ${k} team.`;if(t instanceof a.H)try{let s=await t.response.json();if(s.error?.issues&&Array.isArray(s.error.issues)){let t=s.error.issues.map(e=>{let t=e.path.join(".");return`${t}: ${e.message}`}).join(", ");e=`Validation error: ${t}`}else e=s.message?s.message:JSON.stringify(s)}catch(e){console.error("Failed to parse error response:",e)}y.$e.show({message:e,color:"red",autoClose:5e3})}},M=(0,l.FH)({control:z.control,name:"service"});return(0,r.jsx)("form",{onSubmit:z.handleSubmit(I),children:(0,r.jsxs)(u.B,{mt:"sm",children:[(0,r.jsx)(m.E,{children:$?"Edit Webhook":"Create Webhook"}),(0,r.jsx)(h.s.Group,{label:"Service Type",required:!0,value:M,onChange:e=>z.setValue("service",e),children:(0,r.jsxs)(x.Y,{mt:"xs",children:[(0,r.jsx)(h.s,{value:c.x.Slack,label:"Slack"}),(0,r.jsx)(h.s,{value:c.x.IncidentIO,label:"incident.io"}),(0,r.jsx)(h.s,{value:c.x.Generic,label:"Generic"})]})}),(0,r.jsx)(p.k,{label:"Webhook Name",placeholder:"Post to #dev-alerts",required:!0,error:z.formState.errors.name?.message,...z.register("name",{required:!0})}),(0,r.jsx)(p.k,{label:"Webhook URL",placeholder:M===c.x.Slack?"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX":M===c.x.IncidentIO?"https://api.incident.io/v2/alert_events/http/ZZZZZZZZ?token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX":"https://example.com/webhook",type:"url",required:!0,error:z.formState.errors.url?.message,...z.register("url",{required:!0,validate:(e,t)=>t.service===c.x.Slack?(0,d.AB)(e)||"URL must be valid and have a slack.com domain":(0,w.AY)(e)||"URL must be valid"})}),(0,r.jsx)(p.k,{label:"Webhook Description (optional)",placeholder:"To be used for dev alerts",error:z.formState.errors.description?.message,...z.register("description")}),M===c.x.Generic&&[(0,r.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Headers (optional)"},"1"),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(l.xI,{name:"headers",control:z.control,render:({field:e})=>(0,r.jsx)(v.Ay,{height:"100px",extensions:[(0,i.Pq)(),(0,o.bu)(C()),(0,v.qf)(`{
	"Authorization": "Bearer token",
	"X-Custom-Header": "value"
}`)],theme:"dark",value:e.value,onChange:t=>e.onChange(t)})})},"2"),(0,r.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Body (optional)"},"3"),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)(l.xI,{name:"body",control:z.control,render:({field:e})=>(0,r.jsx)(v.Ay,{height:"100px",extensions:[(0,i.Pq)(),(0,o.bu)(C()),(0,v.qf)(`{
	"text": "${E}"
}`)],theme:"dark",value:e.value,onChange:t=>e.onChange(t)})})},"4"),(0,r.jsxs)(g.F,{icon:(0,r.jsx)(b.A,{size:16}),className:"mb-4",color:"gray",children:[(0,r.jsx)("span",{children:"Currently the body supports the following message template variables:"}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:_.map((e,t)=>(0,r.jsxs)("span",{children:[(0,r.jsx)("code",{children:e}),t<_.length-1&&", "]},t))})]},"5")],(0,r.jsxs)(x.Y,{justify:"space-between",children:[(0,r.jsxs)(x.Y,{children:[(0,r.jsx)(f.$,{variant:"primary",type:"submit",loading:N.isPending||A.isPending,children:$?"Update Webhook":"Add Webhook"}),(0,r.jsx)(f.$,{variant:"secondary",onClick:z.handleSubmit(L),loading:T.isPending,type:"button",children:"Test Webhook"})]}),(0,r.jsx)(f.$,{variant:"secondary",onClick:t,type:"reset",children:"Cancel"})]})]})})}},59017:(e,t,s)=>{"use strict";s.d(t,{V:()=>d});var r=s(6029),n=s(75155),a=s(55729),l=s(23935),i=s(78253),o=s(50374),c=s(94937);function d(e){let t,s,d,m,h,x=(0,n.c)(21),{attributes:p}=e;x[0]!==p?(t=void 0===p?[]:p,x[0]=p,x[1]=t):t=x[1];let g=t,[f,y]=(0,a.useState)(!1),{onPropertyAddClick:b,generateSearchUrl:v,source:j}=(0,a.useContext)(o.D);x[2]!==g||x[3]!==f?(s=g.sort(u).slice(0,f?g.length:12),x[2]=g,x[3]=f,x[4]=s):s=x[4];let S=s,w=g.length-S.length;if(x[5]!==j?.id||x[6]!==v||x[7]!==b||x[8]!==S){let e;x[10]!==j?.id||x[11]!==v||x[12]!==b?(e=e=>{let{displayedKey:t,value:s,sql:n,lucene:a,source:l}=e;return(0,r.jsx)(c.A,{displayedKey:t,name:a||n,nameLanguage:a?"lucene":"sql",value:s,...b&&j?.id===l.id?{onPropertyAddClick:b,sqlExpression:n}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:v?(e,t)=>v({where:e||"",whereLanguage:t??"lucene",source:l}):void 0},`${t}-${s}-${l.id}`)},x[10]=j?.id,x[11]=v,x[12]=b,x[13]=e):e=x[13],d=S.map(e),x[5]=j?.id,x[6]=v,x[7]=b,x[8]=S,x[9]=d}else d=x[9];return x[14]!==g.length||x[15]!==w||x[16]!==f?(m=g.length>12&&(0,r.jsx)(l.M,{size:"xs",onClick:()=>y(!f),children:f?"Show Less":`Show ${w} More...`}),x[14]=g.length,x[15]=w,x[16]=f,x[17]=m):m=x[17],x[18]!==d||x[19]!==m?(h=(0,r.jsxs)(i.s,{wrap:"wrap",gap:"2px",mb:"md",align:"baseline",children:[d,m]}),x[18]=d,x[19]=m,x[20]=h):h=x[20],h}function u(e,t){return e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value)}},61629:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(6029),n=s(75155),a=s(43517),l=s(92917);function i(e){let t,s,i,o=(0,n.c)(7);o[0]!==e?({level:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]);let c=(0,l.lO)(t),d="error"===c?"red":"warn"===c?"var(--color-chart-warning)":"gray";return o[3]!==t||o[4]!==s||o[5]!==d?(i=(0,r.jsx)(a.E,{component:"span",size:"xs",c:d,...s,children:t}),o[3]=t,o[4]=s,o[5]=d,o[6]=i):i=o[6],i}},64441:(e,t,s)=>{"use strict";s.d(t,{A:()=>_});var r=s(6029),n=s(75155),a=s(55729),l=s(63085),i=s(8737),o=s(43517),c=s(60481),d=s(20294),u=s(78253),m=s(22623),h=s(25062),x=s(15216),p=s(16232),g=s(7565),f=s(57820),y=s(92917),b=s(59017),v=s(50374),j=s(61629);let S=e=>"getTime"in e&&!isNaN(e.getTime());function w(e){let t,s,a,u=(0,n.c)(9),{breadcrumbPath:m,onNavigateToLevel:h}=e;u[0]!==h?(t=e=>{h?.(e)},u[0]=h,u[1]=t):t=u[1];let x=t;e:{let e;if(0===m.length){let e;u[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],u[2]=e):e=u[2],s=e;break e}if(u[3]!==m||u[4]!==x){let t;e=[],m.forEach((t,s)=>{let n,a=t.rowData?(n=(t.rowData.__hdx_body||"").trim()).length>200?`${n.substring(0,197)}...`:n:"";e.push((0,r.jsx)(l.m,{label:a,disabled:!a,position:"bottom",withArrow:!0,children:(0,r.jsx)(i.N,{onClick:()=>x(s),style:{textDecoration:"none"},children:(0,r.jsx)(o.E,{size:"sm",c:"blue",style:{cursor:"pointer"},children:0===s?"Original Event":t.label})})},`crumb-${s}`))}),u[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(o.E,{size:"sm",children:"Selected Event"},"current"),u[6]=t):t=u[6],e.push(t),u[3]=m,u[4]=x,u[5]=e}else e=u[5];s=e}let p=s;return 0===m.length?null:(u[7]!==p?(a=(0,r.jsx)(c.a,{mb:"sm",pb:"sm",className:"border-bottom border-dark",children:(0,r.jsx)(d.B,{separator:"›",separatorMargin:"xs",children:p})}),u[7]=p,u[8]=a):a=u[8],a)}function _(e){let t,s,l,i,d,_,C,k,N,A,T,$,z,L=(0,n.c)(41),{attributes:I,mainContent:M,mainContentHeader:R,date:D,severityText:P,breadcrumbPath:O,onBreadcrumbClick:F}=e;L[0]!==I?(t=void 0===I?[]:I,L[0]=I,L[1]=t):t=L[1];let V=t,B=void 0===M?"":M;L[2]!==O?(s=void 0===O?[]:O,L[2]=O,L[3]=s):s=L[3];let W=s,[H,q]=a.useState(!1),{generateSearchUrl:X}=(0,a.useContext)(v.D),Y=B.length>2e3;L[4]!==H||L[5]!==B?(l=H?B:B?.slice(0,2e3),L[4]=H,L[5]=B,L[6]=l):l=L[6];let J=l,[K,G]=(0,a.useState)(null),[Z,U]=(0,a.useState)(0);L[7]!==K?(i=()=>{if(!K)return;let e=()=>{U(K.offsetHeight)};e();let t=new ResizeObserver(e);return t.observe(K),()=>{t.disconnect()}},d=[K],L[7]=K,L[8]=i,L[9]=d):(i=L[8],d=L[9]),(0,a.useEffect)(i,d);let{userPreferences:Q,setUserPreference:ee}=(0,f.HW)(),{expandSidebarHeader:et}=Q;return L[10]!==W||L[11]!==F?(_=(0,r.jsx)(w,{breadcrumbPath:W,onNavigateToLevel:F}),L[10]=W,L[11]=F,L[12]=_):_=L[12],L[13]!==P?(C=P&&(0,r.jsx)(j.A,{level:P}),L[13]=P,L[14]=C):C=L[14],L[15]!==D||L[16]!==P?(k=P&&S(D)&&(0,r.jsx)(o.E,{size:"xs",mx:"xs",children:"\xb7"}),L[15]=D,L[16]=P,L[17]=k):k=L[17],L[18]!==D?(N=S(D)&&(0,r.jsxs)(o.E,{size:"xs",children:[(0,r.jsx)(g.H,{value:D})," \xb7"," ",(0,y.Jk)(D)," ago"]}),L[18]=D,L[19]=N):N=L[19],L[20]!==C||L[21]!==k||L[22]!==N?(A=(0,r.jsxs)(u.s,{children:[C,k,N]}),L[20]=C,L[21]=k,L[22]=N,L[23]=A):A=L[23],L[24]!==H||L[25]!==et||L[26]!==Z||L[27]!==Y||L[28]!==B||L[29]!==J||L[30]!==R||L[31]!==ee||L[32]!==Q?(T=B?(0,r.jsxs)(m.t,{p:"xs",mt:"sm",style:{maxHeight:et?void 0:120,overflow:"auto",overflowWrap:"break-word"},ref:G,children:[(0,r.jsxs)(u.s,{justify:"space-between",mb:"xs",children:[(0,r.jsx)(o.E,{size:"xs",children:R}),Z>=120&&(0,r.jsx)(h.$,{size:"compact-xs",variant:"subtle",onClick:()=>ee({...Q,expandSidebarHeader:!et}),children:et?(0,r.jsx)(x.A,{size:14}):(0,r.jsx)(p.A,{size:14})})]}),J,Y&&(0,r.jsx)(h.$,{size:"compact-xs",variant:"subtle",color:"gray",onClick:()=>{q(E)},children:H?"Collapse":"Expand"})]}):(0,r.jsx)(m.t,{p:"xs",mt:"sm",children:(0,r.jsx)(o.E,{size:"xs",mb:"xs",children:"[Empty]"})}),L[24]=H,L[25]=et,L[26]=Z,L[27]=Y,L[28]=B,L[29]=J,L[30]=R,L[31]=ee,L[32]=Q,L[33]=T):T=L[33],L[34]!==V?($=(0,r.jsx)(c.a,{mt:"xs",children:(0,r.jsx)(b.V,{attributes:V})}),L[34]=V,L[35]=$):$=L[35],L[36]!==A||L[37]!==T||L[38]!==$||L[39]!==_?(z=(0,r.jsxs)(r.Fragment,{children:[_,A,T,$]}),L[36]=A,L[37]=T,L[38]=$,L[39]=_,L[40]=z):z=L[40],z}function E(e){return!e}},64501:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var r=s(6029),n=s(55729),a=s(82641),l=s(27166),i=s(43517),o=s(92789),c=s(25062),d=s(78253),u=s(94720),m=s(60665),h=s(24583),x=s(43567),p=s(98142),g=s(93108),f=s(78550),y=s(81973),b=s(36600),v=s(24314),j=s(54970);async function S({connectionId:e,createSourceMutation:t,updateSourceMutation:s,logSourceDatabaseName:r,logSourceName:n,logSourceTableName:l,metricsSourceDatabaseName:i,metricsSourceName:o,sessionSourceDatabaseName:c,sessionSourceName:d,sessionSourceTableName:u,traceSourceDatabaseName:m,traceSourceName:h,traceSourceTableName:x,traceSourceHighlightedTraceAttributes:p,traceSourceMaterializedViews:g}){let f,y,b=r&&n&&l,v=i&&o;b&&(f=await t.mutateAsync({source:{kind:a.GL.Log,name:n,connection:e,from:{databaseName:r,tableName:l},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, SeverityText, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body",displayedTimestampValueExpression:"Timestamp"}}));let j=await t.mutateAsync({source:{kind:a.GL.Trace,name:h,connection:e,from:{databaseName:m,tableName:x},timestampValueExpression:"Timestamp",defaultTableSelectExpression:"Timestamp, ServiceName, StatusCode, round(Duration / 1e6), SpanName",serviceNameExpression:"ServiceName",eventAttributesExpression:"SpanAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"SpanName",durationExpression:"Duration",durationPrecision:9,parentSpanIdExpression:"ParentSpanId",spanKindExpression:"SpanKind",spanNameExpression:"SpanName",...b?{logSourceId:"l-758211293"}:{},statusCodeExpression:"StatusCode",statusMessageExpression:"StatusMessage",spanEventsValueExpression:"Events",highlightedTraceAttributeExpressions:p,materializedViews:g}});v&&(y=await t.mutateAsync({source:{kind:a.GL.Metric,name:o,connection:e,from:{databaseName:i,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:{[a.SX.Gauge]:"otel_metrics_gauge",[a.SX.Histogram]:"otel_metrics_histogram",[a.SX.Sum]:"otel_metrics_sum",[a.SX.Summary]:"otel_metrics_summary",[a.SX.ExponentialHistogram]:"otel_metrics_exponential_histogram"},resourceAttributesExpression:"ResourceAttributes",...b&&f?{logSourceId:f.id}:{}}}));let S=await t.mutateAsync({source:{kind:a.GL.Session,name:d,connection:e,from:{databaseName:c,tableName:u},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceSourceId:j.id,traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body"}});await Promise.all([...b&&f?[s.mutateAsync({source:{...f,sessionSourceId:S.id,traceSourceId:j.id,...v&&y?{metricSourceId:y.id}:{}}})]:[],s.mutateAsync({source:{...j,...b&&f?{logSourceId:f.id}:{},...v&&y?{metricSourceId:y.id}:{},sessionSourceId:S.id}})])}let w=(0,n.memo)(function({requireSource:e=!0}){let t=(0,b.Kh)(),{data:s}=(0,y.oE)(),{data:w}=(0,g.ZY)(),_=w?.length===0?"connection":s?.length===0&&e?"auto-detect":void 0,[E,C]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{null!=_&&null==E&&C(_)},[_,E]);let k=(0,y.nd)(),N=(0,g.Ir)(),A=(0,y.sr)(),T=(0,y.YI)(),$=(0,f.Ge)(),[z,L]=(0,n.useState)(!1),[I,M]=(0,n.useState)(!1),[R,D]=(0,n.useState)([]),P=(0,n.useCallback)(async e=>{try{L(!0),M(!0);let t=await $.getOtelTables({connectionId:e});if(!t)return void C("source");let s=[];if(t.tables.logs){let r=await (0,y.Ys)({databaseName:t.database,tableName:t.tables.logs,connectionId:e,metadata:$});if(null!=r.timestampValueExpression){let n=await k.mutateAsync({source:{kind:a.GL.Log,name:"Logs",connection:e,from:{databaseName:t.database,tableName:t.tables.logs},...r,timestampValueExpression:r.timestampValueExpression}});s.push(n)}else console.error("Log source was found but missing required fields",r)}if(t.tables.traces){let r=await (0,y.Ys)({databaseName:t.database,tableName:t.tables.traces,connectionId:e,metadata:$});if(null!=r.timestampValueExpression){let n=await k.mutateAsync({source:{kind:a.GL.Trace,name:"Traces",connection:e,from:{databaseName:t.database,tableName:t.tables.traces},...r,timestampValueExpression:r.timestampValueExpression}});s.push(n)}else console.error("Trace source was found but missing required fields",r)}if(Object.values(t.tables.metrics).some(e=>null!=e)){let r={[a.SX.Gauge]:"",[a.SX.Histogram]:"",[a.SX.Sum]:"",[a.SX.Summary]:"",[a.SX.ExponentialHistogram]:""};t.tables.metrics.gauge&&(r[a.SX.Gauge]=t.tables.metrics.gauge),t.tables.metrics.histogram&&(r[a.SX.Histogram]=t.tables.metrics.histogram),t.tables.metrics.sum&&(r[a.SX.Sum]=t.tables.metrics.sum),t.tables.metrics.summary&&(r[a.SX.Summary]=t.tables.metrics.summary),t.tables.metrics.expHistogram&&(r[a.SX.ExponentialHistogram]=t.tables.metrics.expHistogram);let n=await k.mutateAsync({source:{kind:a.GL.Metric,name:"Metrics",connection:e,from:{databaseName:t.database,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:r,resourceAttributesExpression:"ResourceAttributes"}});s.push(n)}if(t.tables.sessions){let r=await (0,y.Ys)({databaseName:t.database,tableName:t.tables.sessions,connectionId:e,metadata:$}),n=s.find(e=>e.kind===a.GL.Trace);if(null!=r.timestampValueExpression&&null!=n){let l=await k.mutateAsync({source:{kind:a.GL.Session,name:"Sessions",connection:e,from:{databaseName:t.database,tableName:t.tables.sessions},...r,timestampValueExpression:r.timestampValueExpression,traceSourceId:n.id}});s.push(l)}else console.error("Session source was found but missing required fields",r)}if(0===s.length){console.error("No sources created due to missing required fields"),C("source");return}let r=s.find(e=>e.kind===a.GL.Log),n=s.find(e=>e.kind===a.GL.Trace),l=s.find(e=>e.kind===a.GL.Metric),i=s.find(e=>e.kind===a.GL.Session),o=[];r&&o.push(A.mutateAsync({source:{...r,...n?{traceSourceId:n.id}:{},...l?{metricSourceId:l.id}:{},...i?{sessionSourceId:i.id}:{}}})),n&&o.push(A.mutateAsync({source:{...n,...r?{logSourceId:r.id}:{},...l?{metricSourceId:l.id}:{},...i?{sessionSourceId:i.id}:{}}})),await Promise.all(o),D(s),m.$e.show({title:"Success",message:`Automatically detected and created ${s.length} source${s.length>1?"s":""}.`}),C("closed")}catch(e){console.error("Error auto-detecting sources:",e),m.$e.show({color:"red",title:"Error",message:"Failed to auto-detect telemetry sources. Please set up manually."}),C("source")}finally{L(!1)}},[$,k,A,C,D]);(0,n.useEffect)(()=>{"auto-detect"===E&&s?.length===0&&w&&w.length>0&&!1===z&&!1===I&&P(w[0].id)},[E,w,P,z,s,I]);let O=(0,n.useCallback)(async()=>{if(!p.Ju)try{if(s)for(let e of s)"local"===e.connection&&e.name.startsWith("Demo")&&"otel_v2"!==e.from.databaseName&&await T.mutateAsync({id:e.id});let e="";await N.mutateAsync({connection:{name:"Demo",host:"https://sql-clickhouse.clickhouse.com",username:"otel_demo",password:""}},{onSuccess(t){e=t.id},onError(e){console.error("Failed to create demo connection: ",e)}}),await S({connectionId:e,createConnectionMutation:N,createSourceMutation:k,deleteSourceMutation:T,logSourceDatabaseName:"otel_v2",logSourceName:"Demo Logs",logSourceTableName:"otel_logs",metricsSourceDatabaseName:"otel_v2",metricsSourceName:"Demo Metrics",sessionSourceDatabaseName:"otel_v2",sessionSourceName:"Demo Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_v2",traceSourceName:"Demo Traces",traceSourceTableName:"otel_traces",traceSourceMaterializedViews:[{databaseName:"otel_v2",tableName:"otel_traces_1m",dimensionColumns:"ServiceName, StatusCode",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"}]},{databaseName:"otel_v2",tableName:"otel_traces_1m_v2",dimensionColumns:"ServiceName, SpanName, SpanKind",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"},{mvColumn:"quantile__Duration",aggFn:"quantile",sourceColumn:"Duration"}]}],updateSourceMutation:A}),await S({connectionId:e,createConnectionMutation:N,createSourceMutation:k,deleteSourceMutation:T,sessionSourceDatabaseName:"otel_clickpy",sessionSourceName:"ClickPy Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_clickpy",traceSourceName:"ClickPy Traces",traceSourceTableName:"otel_traces",traceSourceHighlightedTraceAttributes:[{sqlExpression:"if((SpanAttributes['http.route']) LIKE '%dashboard%', concat('https://clickpy.clickhouse.com', path(SpanAttributes['http.target'])), '')",alias:"clickpy_link"}],updateSourceMutation:A}),m.$e.show({title:"Success",message:`Connected to ${t} demo server.`}),C("closed")}catch(e){console.error(e),m.$e.show({color:"red",title:"Error",message:`Could not connect to the ${t} demo server, please try again later.`})}},[t,k,N,A,T,s]);return(0,r.jsxs)(l.a,{"data-testid":"onboarding-modal",opened:null!=E&&"closed"!==E,onClose:()=>{},title:`Welcome to ${t}`,size:"xl",withCloseButton:!1,children:["connection"===E&&null!=w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.E,{size:"sm",mb:"md",children:"Lets set up your connection to ClickHouse"}),0===w.length?(0,r.jsx)(x.B,{connection:{id:"",name:"Default",host:"http://localhost:8123",username:"default",password:""},onSave:()=>{I?C("source"):C("auto-detect")},isNew:!0}):(0,r.jsx)(x.B,{connection:w[0],isNew:!1,onSave:()=>{I?C("source"):C("auto-detect")},showCancelButton:!1,showDeleteButton:!1}),!p.VO&&(0,r.jsx)(i.E,{size:"xs",mt:"md",children:"You can always add and edit connections later."}),!p.Ju&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.c,{label:"OR",my:"md"}),(0,r.jsx)(c.$,{"data-testid":"demo-server-button",variant:"secondary",w:"100%",onClick:O,children:"Connect to Demo Server"})]})]}),"auto-detect"===E&&(0,r.jsx)(r.Fragment,{children:z?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(d.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,r.jsx)(u.a,{size:"md",mb:"md"}),(0,r.jsx)(i.E,{size:"sm",c:"dimmed",mb:"md",children:"Detecting available tables..."}),(0,r.jsx)(c.$,{variant:"subtle",size:"xs",onClick:()=>{L(!1),C("source")},children:"Skip and setup manually"})]})}):R.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.$,{variant:"subtle",onClick:()=>C("connection"),p:"xs",mb:"md",children:[(0,r.jsx)(h.A,{size:14,className:"me-2"})," Back"]}),(0,r.jsxs)(i.E,{size:"sm",mb:"md",children:["We automatically detected and created"," ",R.length," source",R.length>1?"s":""," from your connection. You can review, edit, or continue."]}),(0,r.jsx)(j.v,{withCard:!1,variant:"default",showEmptyState:!1}),(0,r.jsxs)(d.s,{justify:"space-between",mt:"md",children:[(0,r.jsx)(c.$,{variant:"subtle",onClick:()=>{C("source")},children:"Add more sources"}),(0,r.jsx)(c.$,{variant:"primary",onClick:()=>{C("closed")},children:"Continue"})]})]}):(0,r.jsxs)(d.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,r.jsx)(i.E,{size:"sm",c:"dimmed",mb:"md",children:"No OTel tables detected automatically, please setup sources manually."}),(0,r.jsx)(c.$,{variant:"primary",onClick:()=>{C("source")},children:"Continue"})]})}),"source"===E&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.$,{variant:"subtle",onClick:()=>C("connection"),p:"xs",mb:"md",children:[(0,r.jsx)(h.A,{size:14,className:"me-2"})," Back"]}),(0,r.jsx)(i.E,{size:"sm",mb:"md",children:"Lets set up a source table to query telemetry from."}),(0,r.jsx)(v.Eb,{isNew:!0,defaultName:"Logs",onCreate:()=>{C("closed")}}),(0,r.jsx)(i.E,{size:"xs",mt:"lg",children:"You can always add and edit sources later."})]})]})})},65081:(e,t,s)=>{"use strict";s.d(t,{z:()=>D});var r=s(6029),n=s(75155),a=s(55729),l=s(81278),i=s.n(l),o=s(67549),c=s(83595),d=s(60449),u=s.n(d),m=s(8737),h=s(56513),x=s(3635),p=s(96061),g=s(25062),f=s(60481),y=s(22623),b=s(43517),v=s(39785),j=s(60665),S=s(24602),w=s(95316),_=s(90515),E=s(9385),C=s(41279),k=s(9841),N=s(6723),A=s(23195),T=s(45172),$=s(26355),z=s(92917),L=s(50374);function I(e,t,s="JSONExtractString"){let r=e.slice(t.length);if(0===r.length)return null;let n=t[t.length-1],a=r.map(e=>`'${e}'`).join(", ");return`${s}(${n}, ${a})`}let M=(0,c.tG)("hdx_json_viewer_options",{normallyExpanded:!0,lineWrap:!0,tabulate:!0,filterBlanks:!1});function R(){let e,t,s,a,l,i,c,d,u,p,g,f,y,b,v,j,E=(0,n.c)(39),[C,k]=(0,o.fp)(M);return E[0]!==C||E[1]!==k?(e=()=>k({...C,lineWrap:!C.lineWrap}),E[0]=C,E[1]=k,E[2]=e):e=E[2],E[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(S.A,{size:14}),E[3]=t):t=E[3],E[4]!==e?(s=(0,r.jsx)(m.N,{color:"gray",onClick:e,children:t}),E[4]=e,E[5]=s):s=E[5],E[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(h.W.Target,{children:(0,r.jsx)(m.N,{children:(0,r.jsx)(w.A,{size:14})})}),E[6]=a):a=E[6],E[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)(h.W.Label,{lh:1,py:6,children:"Properties view options"}),E[7]=l):l=E[7],E[8]!==C||E[9]!==k?(i=()=>k({...C,normallyExpanded:!C.normallyExpanded}),E[8]=C,E[9]=k,E[10]=i):i=E[10],E[11]!==C.normallyExpanded?(c=C.normallyExpanded?(0,r.jsx)(_.A,{size:14,className:"ps-2"}):null,E[11]=C.normallyExpanded,E[12]=c):c=E[12],E[13]!==i||E[14]!==c?(d=(0,r.jsx)(h.W.Item,{onClick:i,lh:"1",py:8,rightSection:c,children:"Expand all properties"}),E[13]=i,E[14]=c,E[15]=d):d=E[15],E[16]!==C.tabulate?(u=C.tabulate?(0,r.jsx)(_.A,{size:14,className:"ps-2"}):null,E[16]=C.tabulate,E[17]=u):u=E[17],E[18]!==C||E[19]!==k?(p=()=>k({...C,tabulate:!C.tabulate}),E[18]=C,E[19]=k,E[20]=p):p=E[20],E[21]!==u||E[22]!==p?(g=(0,r.jsx)(h.W.Item,{lh:"1",py:8,rightSection:u,onClick:p,children:"Tabulate"}),E[21]=u,E[22]=p,E[23]=g):g=E[23],E[24]!==C.filterBlanks?(f=C.filterBlanks?(0,r.jsx)(_.A,{size:14,className:"ps-2"}):null,E[24]=C.filterBlanks,E[25]=f):f=E[25],E[26]!==C||E[27]!==k?(y=()=>k({...C,filterBlanks:!C.filterBlanks}),E[26]=C,E[27]=k,E[28]=y):y=E[28],E[29]!==f||E[30]!==y?(b=(0,r.jsx)(h.W.Item,{lh:"1",py:8,rightSection:f,onClick:y,children:"Hide blank values"}),E[29]=f,E[30]=y,E[31]=b):b=E[31],E[32]!==g||E[33]!==b||E[34]!==d?(v=(0,r.jsxs)(h.W,{width:240,withinPortal:!1,children:[a,(0,r.jsxs)(h.W.Dropdown,{children:[l,d,g,b]})]}),E[32]=g,E[33]=b,E[34]=d,E[35]=v):v=E[35],E[36]!==v||E[37]!==s?(j=(0,r.jsxs)(x.Y,{children:[s,v]}),E[36]=v,E[37]=s,E[38]=j):j=E[38],j}function D(e){let t,s,l,c,d,m,h,S,w,_,D,O,F=(0,n.c)(31),{data:V,jsonColumns:B}=e;F[0]!==B?(t=void 0===B?[]:B,F[0]=B,F[1]=t):t=F[1];let W=t,{onPropertyAddClick:H,generateSearchUrl:q,generateChartUrl:X,displayedColumns:Y,toggleColumn:J}=(0,a.useContext)(L.D),[K,G]=(0,a.useState)(""),[Z]=(0,v.o)(K,100),U=(0,o.md)(M);e:{let e;if(!V){s=null;break e}if(F[2]!==V||F[3]!==Z||F[4]!==U.filterBlanks){let t=Object.fromEntries(Object.entries(V).filter(P));U.filterBlanks&&(t=function e(t){if(null!==t&&""!==t){if(Array.isArray(t)){let s=t.map(e).filter(e=>void 0!==e);return s.length>0?s:void 0}if("object"==typeof t){let s={};for(let[r,n]of Object.entries(t)){let t=e(n);void 0!==t&&(s[r]=t)}return Object.keys(s).length>0?s:void 0}return t}}(t)),e=function e(t,s){if("object"!=typeof t||null===t||""===s)return t;let r={};for(let[n,a]of Object.entries(t))if(null!==a&&((n.toLowerCase().includes(s.toLowerCase())||"string"==typeof a&&a.toLowerCase().includes(s.toLowerCase()))&&(r[n]=a),"object"==typeof a)){let t=e(a,s);Object.keys(t).length>0&&(r[n]=t)}return r}(t,Z),F[2]=V,F[3]=Z,F[4]=U.filterBlanks,F[5]=e}else e=F[5];s=e}let Q=s;F[6]!==Y||F[7]!==X||F[8]!==q||F[9]!==W||F[10]!==H||F[11]!==Q||F[12]!==J?(l=e=>{let{keyPath:t,value:s,isInParsedJson:n,parsedJsonRootPath:a}=e,l=[],o=(0,z.uc)(t,W),c=t.length>0&&W?.includes(t[0]);if(null!=H&&"string"==typeof s&&s&&"Timestamp"!=o&&"TimestampTime"!=o&&l.push({key:"add-to-search",label:(0,r.jsxs)(x.Y,{gap:2,children:[(0,r.jsx)(E.A,{size:14}),"Add to Filters"]}),title:"Add to Filters",onClick:()=>{let e;if(n&&a){let s=I(t,a);e=s||(c?`toString(${o})`:o)}else e=c?`toString(${o})`:o;H(e,s),j.$e.show({color:"green",message:`Added "${o} = ${s}" to filters`})}}),q&&"object"!=typeof s&&l.push({key:"search",label:(0,r.jsxs)(x.Y,{gap:2,children:[(0,r.jsx)(C.A,{size:14}),"Search"]}),title:"Search for this value only",onClick:()=>{let e=o;if(n&&a){let r="JSONExtractString";"number"==typeof s?r="JSONExtractFloat":"boolean"==typeof s&&(r="JSONExtractBool");let n=I(t,a,r);n&&(e=n)}let r=`${e} = ${"string"==typeof s?`'${s}'`:s}`;("Timestamp"==e||"TimestampTime"==e)&&(r=`${e} = parseDateTime64BestEffort('${s}', 9)`),i().push(q({where:r,whereLanguage:"sql"}))}}),X&&"number"==typeof s&&l.push({key:"chart",label:(0,r.jsx)(k.A,{size:14}),title:"Chart",onClick:()=>{let e=o;if(n&&a){let s=I(t,a);s&&(e=s)}i().push(X({aggFn:"avg",field:e,groupBy:[]}))}}),J&&"object"!=typeof s){let e=o;if(n&&a){let s=I(t,a);s&&(e=s)}let s=Y?.includes(e);l.push({key:"toggle-column",label:s?(0,r.jsxs)(x.Y,{gap:2,children:[(0,r.jsx)(N.A,{size:14}),"Column"]}):(0,r.jsxs)(x.Y,{gap:2,children:[(0,r.jsx)(A.A,{size:14}),"Column"]}),title:s?`Remove ${o} column from results table`:`Add ${o} column to results table`,onClick:()=>{J(e),j.$e.show({color:"green",message:`Column "${o}" ${s?"removed from":"added to"} results table`})}})}return"object"==typeof s?l.push({key:"copy-object",label:"Copy Object",onClick:()=>{let e;e=n&&a?s:0===t.length?Q:u()(Q,t),window.navigator.clipboard.writeText(JSON.stringify(e,null,2)),j.$e.show({color:"green",message:"Copied object to clipboard"})}}):l.push({key:"copy-value",label:(0,r.jsxs)(x.Y,{gap:2,children:[(0,r.jsx)(T.A,{size:14}),"Copy Value"]}),onClick:()=>{window.navigator.clipboard.writeText("string"==typeof s?s:JSON.stringify(s,null,2)),j.$e.show({color:"green",message:"Value copied to clipboard"})}}),l},F[6]=Y,F[7]=X,F[8]=q,F[9]=W,F[10]=H,F[11]=Q,F[12]=J,F[13]=l):l=F[13];let ee=l;return F[14]===Symbol.for("react.memo_cache_sentinel")?(c=e=>G(e.currentTarget.value),d=(0,r.jsx)(C.A,{size:16}),F[14]=c,F[15]=d):(c=F[14],d=F[15]),F[16]!==K?(m=(0,r.jsx)(p.p,{size:"xs",w:"100%",maw:"400px",placeholder:"Search properties by key or value",value:K,onChange:c,leftSection:d}),h=K&&(0,r.jsx)(g.$,{variant:"secondary",size:"xs",onClick:()=>G(""),children:"Clear"}),F[16]=K,F[17]=m,F[18]=h):(m=F[17],h=F[18]),F[19]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.jsx)("div",{className:"flex-grow-1"}),S=(0,r.jsx)(R,{}),F[19]=S,F[20]=w):(S=F[19],w=F[20]),F[21]!==m||F[22]!==h?(_=(0,r.jsx)(f.a,{py:"xs",children:(0,r.jsxs)(x.Y,{gap:"xs",children:[m,h,w,S]})}),F[21]=m,F[22]=h,F[23]=_):_=F[23],F[24]!==ee||F[25]!==U||F[26]!==Q?(D=(0,r.jsx)(y.t,{bg:"transparent",mt:"sm",children:null!=Q?(0,r.jsx)($.A,{data:Q,getLineActions:ee,...U}):(0,r.jsx)(b.E,{children:"No data"})}),F[24]=ee,F[25]=U,F[26]=Q,F[27]=D):D=F[27],F[28]!==_||F[29]!==D?(O=(0,r.jsxs)("div",{className:"flex-grow-1 overflow-auto",children:[_,D]}),F[28]=_,F[29]=D,F[30]=O):O=F[30],O}function P(e){return!e[0].startsWith("__hdx_")}},65723:e=>{e.exports={container:"HyperJson_container__GNwuL",withTabulate:"HyperJson_withTabulate__MzU_L",key:"HyperJson_key__AQ6QF",withLineWrap:"HyperJson_withLineWrap__gfDDi",valueContainer:"HyperJson_valueContainer__Ui_5y",string:"HyperJson_string__vkc96",treeNode:"HyperJson_treeNode__bDzsg",line:"HyperJson_line__n3Ltu",lineMenu:"HyperJson_lineMenu__Sg84e",expanded:"HyperJson_expanded__gHv9Z",object:"HyperJson_object__ChLzl",array:"HyperJson_array__rJBNC",expandable:"HyperJson_expandable__futZ8",lineMenuBtn:"HyperJson_lineMenuBtn__QKgME",clickable:"HyperJson_clickable__UNRbd",value:"HyperJson_value__aSXTw",hoverable:"HyperJson_hoverable__oWIY9",hoverContent:"HyperJson_hoverContent__2Ir2x",jsonBtn:"HyperJson_jsonBtn__T1ObP",keyContainer:"HyperJson_keyContainer___KqED",number:"HyperJson_number__VFmbX",boolean:"HyperJson_boolean__KkQsQ",expandMoreProps:"HyperJson_expandMoreProps__uHkwZ"}},65952:e=>{e.exports={tagWrapper:"Tags_tagWrapper__rCeVe"}},66773:e=>{e.exports={panel:"LogSidePanel_panel__JgveL",panelDragBar:"LogSidePanel_panelDragBar__sFi62",panelHeader:"LogSidePanel_panelHeader__Fl4jA",panelDetails:"LogSidePanel_panelDetails__wGBLr",panelContent:"LogSidePanel_panelContent__Olcws",severityChip:"LogSidePanel_severityChip__hIK7I",loadingState:"LogSidePanel_loadingState__b5y0C",panelSectionWrapper:"LogSidePanel_panelSectionWrapper__gOBKh",panelSectionWrapperTitle:"LogSidePanel_panelSectionWrapperTitle__eBMsG",kbdShortcuts:"LogSidePanel_kbdShortcuts__ogLDt",kbd:"LogSidePanel_kbd__gmxFq",kbdDivider:"LogSidePanel_kbdDivider____Gi4",lineContext:"LogSidePanel_lineContext__rCVjx",lineContextCurrentLine:"LogSidePanel_lineContextCurrentLine__K3t4J",lineContextLineNo:"LogSidePanel_lineContextLineNo__LuYmr",emptyMessage:"LogSidePanel_emptyMessage__6fbwp",traceTimelineLabel:"LogSidePanel_traceTimelineLabel___WCaD",traceTimelineLabelHighlighted:"LogSidePanel_traceTimelineLabelHighlighted__elopt",stacktraceRowInteractive:"LogSidePanel_stacktraceRowInteractive__i18zL"}},68344:(e,t,s)=>{"use strict";s.d(t,{t:()=>u});var r=s(6029),n=s(75155);s(55729);var a=s(7913),l=s(39603),i=s(34834),o=s(43517),c=s(25062),d=s(96556);let u=e=>{let t,s,u=(0,n.c)(8),{children:h,onRetry:x,allowReset:p,showErrorMessage:g,message:f}=e,y=p||!!x;return u[0]!==f||u[1]!==x||u[2]!==g||u[3]!==y?(t=e=>{let{error:t,resetErrorBoundary:s}=e;return(0,r.jsx)(l.F,{p:"xs",color:"red",icon:(0,r.jsx)(d.A,{size:16}),title:f||"Something went wrong",children:(g||y)&&(0,r.jsxs)(i.B,{align:"flex-start",gap:"xs",children:[g&&(0,r.jsx)(o.E,{size:"xs",children:t.message}),y&&(0,r.jsx)(c.$,{onClick:x||s,size:"compact-xs",variant:"danger",children:"Retry"})]})})},u[0]=f,u[1]=x,u[2]=g,u[3]=y,u[4]=t):t=u[4],u[5]!==h||u[6]!==t?(s=(0,r.jsx)(a.ErrorBoundary,{onError:m,fallbackRender:t,children:h}),u[5]=h,u[6]=t,u[7]=s):s=u[7],s};function m(e){console.error(e)}},70727:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>u,C2:()=>d,ZO:()=>c});var r=s(55729),n=s(6033),a=s.n(n),l=s(80519),i=s.n(l),o=s(35467);let c={ID:"__hyperdx_id",ALIAS_WITH:"__hyperdx_alias_with"};function d(e){return e?Object.entries(e).filter(([,e])=>null!=e&&""!==e.trim()).map(([e,t])=>({name:e,sql:{sql:t,params:{}},isSubquery:!1})):[]}function u({meta:e,aliasMap:t}){let s=(0,r.useMemo)(()=>new Map(e?.map(e=>{let s=null!=t?t[e.name]??e.name:e.name;return[e.name,{...e,valueExpr:s,jsType:(0,o.rj)(e.type)}]})),[e,t]),n=(0,r.useMemo)(()=>d(t),[t]);return(0,r.useCallback)(e=>{let{[c.ID]:t,[c.ALIAS_WITH]:r,...l}=e;return{where:Object.entries(l).map(([e,t])=>{let r=s.get(e),n=r?.type,l=r?.jsType,c=r?.valueExpr;if(null==n)throw Error(`Column type not found for ${e}, ${JSON.stringify(s)}`);if(null==c)throw Error(`valueExpr not found for ${e}, ${JSON.stringify(s)}`);switch(l){case o.A2.Date:return i().format("?=parseDateTime64BestEffort(?, 9)",[i().raw(c),t]);case o.A2.Array:case o.A2.Map:return i().format("?=JSONExtract(?, ?)",[i().raw(c),t,n]);case o.A2.Tuple:return i().format("toJSONString(?)=?",[i().raw(c),t]);case o.A2.JSON:return i().format("lower(hex(MD5(toString(?))))=?",[i().raw(c),a()(t).toString()]);case o.A2.Dynamic:if(null==t||"null"===t)return i().format("isNull(??)",[c]);return(t.length>1e3||e.length>1e3)&&console.warn("Search value/object key too large."),i().format("toJSONString(?) = coalesce(toJSONString(JSONExtract(?, 'Dynamic')), toJSONString(?))",[i().raw(c),t,t]);default:if(null==t)return i().format("isNull(?)",[i().raw(c)]);if(t.length>512)return i().format("lower(hex(MD5(leftUTF8(?, 1000))))=?",[i().raw(c),a()(t.substring(0,1e3)).toString()]);return i().format("?=?",[i().raw(c),t])}}).join(" AND "),aliasWith:n}},[s,n])}},72075:(e,t,s)=>{"use strict";s.d(t,{L:()=>p,X:()=>x});var r=s(6029),n=s(75155);s(55729);var a=s(75828),l=s.n(a),i=s(58333),o=s(23474),c=s(79220),d=s(39696),u=s(68593),m=s(34011),h=s.n(m);let x=({data:e=[],columns:t,emptyMessage:s,hideHeader:n,borderless:a,density:i="normal",interactive:o,tableMeta:m})=>{let x=(0,c.N4)({data:e,columns:t,meta:m,getCoreRowModel:(0,d.HT)()});return e.length?(0,r.jsx)("div",{className:l()(h().tableWrapper,{[h().tableBorderless]:a,[h().tableDensityZero]:"zero"===i,[h().tableDensityCompact]:"compact"===i,[h().tableDensityComfortable]:"comfortable"===i,[h().tableInteractive]:o}),children:(0,r.jsxs)("table",{children:[!n&&(0,r.jsx)("thead",{children:x.getHeaderGroups().map(e=>(0,r.jsx)("tr",{children:e.headers.map(e=>(0,r.jsx)("th",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)("tbody",{children:x.getRowModel().rows.map(e=>(0,r.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,r.jsx)("td",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}):(0,r.jsx)("div",{className:h().emptyMessage,children:s})},p=e=>{let t,s,a,l,c=(0,n.c)(12),{onClick:d,title:u,label:m,biIcon:x}=e;return c[0]!==m?(t=m&&(0,r.jsx)("span",{children:m}),c[0]=m,c[1]=t):t=c[1],c[2]!==x?(s="chevron-up"===x&&(0,r.jsx)(i.A,{size:14}),c[2]=x,c[3]=s):s=c[3],c[4]!==x?(a="chevron-down"===x&&(0,r.jsx)(o.A,{size:14}),c[4]=x,c[5]=a):a=c[5],c[6]!==d||c[7]!==t||c[8]!==s||c[9]!==a||c[10]!==u?(l=(0,r.jsxs)("button",{className:h().tableCellButton,title:u,onClick:d,children:[t,s,a]}),c[6]=d,c[7]=t,c[8]=s,c[9]=a,c[10]=u,c[11]=l):l=c[11],l}},74620:e=>{e.exports={tableWrapper:"LogTable_tableWrapper__1X2n1",muted:"LogTable_muted__aIZSq",table:"LogTable_table__l63_F",tableHead:"LogTable_tableHead__sTgaD",tableRow:"LogTable_tableRow__7BXPl",tableRow__selected:"LogTable_tableRow__selected__DoaNL",rowButtons:"LogTable_rowButtons__XTh2c",rowContentButton:"LogTable_rowContentButton__fjkQI",expandButton:"LogTable_expandButton__nKsH0",expandedRowContent:"LogTable_expandedRowContent__Ps6mn",expanded:"LogTable_expanded___w9XA",expandButtonSeparator:"LogTable_expandButtonSeparator__lYPgm",isWrapped:"LogTable_isWrapped__ksgah",isTruncated:"LogTable_isTruncated__jXz22",iconActionButton:"LogTable_iconActionButton__hO7Fo",copied:"LogTable_copied__wZME1",fieldTextContainer:"LogTable_fieldTextContainer__4Dj7Q",fieldText:"LogTable_fieldText__zVjaq",chart:"LogTable_chart__8kFaD",truncated:"LogTable_truncated__Hv6oN",wrapped:"LogTable_wrapped__Dz8eR",fieldTextPopover:"LogTable_fieldTextPopover__dygEB"}},75359:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var r,n=s(6029),a=s(75155),l=s(55729),i=s(41038),o=s(81973),c=s(96958),d=s(92917),u=s(76539),m=s(37901),h=s(26837),x=s(50374),p=s(46061);function g(e){let t,s,r,c,d,m,h,g,f,b=(0,a.c)(47),{sourceId:v,config:j,onError:S,onScroll:w,context:_,onExpandedRowsChange:E,denoiseResults:C,collapseAllRows:k,isLive:N,enabled:A,isNestedPanel:T,breadcrumbPath:$,onSidebarOpen:z,onSortingChange:L,initialSortBy:I,variant:M}=e;b[0]!==v?(t={id:v},b[0]=v,b[1]=t):t=b[1];let{data:R}=(0,o.Fo)(t),[D,P]=(0,i.ZA)("rowWhere"),[O,F]=(0,i.ZA)("rowSource");b[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],b[2]=s):s=b[2];let[V,B]=(0,l.useState)(s),{setContextRowId:W,setContextRowSource:H}=(0,u.g)();b[3]!==z||b[4]!==P||b[5]!==F||b[6]!==v?(r=e=>{P(e.where),B(e.aliasWith),F(v),z?.(e.where)},b[3]=z,b[4]=P,b[5]=F,b[6]=v,b[7]=r):r=b[7];let q=r;b[8]!==T||b[9]!==W||b[10]!==H||b[11]!==P||b[12]!==F?(c=()=>{P(null),F(null),T||(W(null),H(null))},b[8]=T,b[9]=W,b[10]=H,b[11]=P,b[12]=F,b[13]=c):c=b[13];let X=c;b[14]!==R?(d=e=>R?(0,n.jsx)(y,{source:R,rowId:e.id,aliasWith:e.aliasWith}):(0,n.jsx)("div",{className:"p-3 text-muted",children:"Loading..."}),b[14]=R,b[15]=d):d=b[15];let Y=d;b[16]!==_?(m=_??{},b[16]=_,b[17]=m):m=b[17],b[18]!==V||b[19]!==$||b[20]!==T||b[21]!==X||b[22]!==D||b[23]!==O||b[24]!==R||b[25]!==v?(h=R&&(O===v||!O)&&(0,n.jsx)(x.A,{source:R,rowId:D??void 0,aliasWith:V,isNestedPanel:T,breadcrumbPath:$,onClose:X}),b[18]=V,b[19]=$,b[20]=T,b[21]=X,b[22]=D,b[23]=O,b[24]=R,b[25]=v,b[26]=h):h=b[26];let J=D??void 0,K=N??!0;return b[27]!==k||b[28]!==j||b[29]!==C||b[30]!==A||b[31]!==I||b[32]!==S||b[33]!==E||b[34]!==q||b[35]!==w||b[36]!==L||b[37]!==Y||b[38]!==v||b[39]!==J||b[40]!==K||b[41]!==M?(g=(0,n.jsx)(p.rD,{config:j,sourceId:v,onRowDetailsClick:q,highlightedLineId:J,enabled:A,isLive:K,queryKeyPrefix:"dbSqlRowTable",onSortingChange:L,denoiseResults:C,initialSortBy:I,renderRowDetails:Y,onScroll:w,onError:S,onExpandedRowsChange:E,collapseAllRows:k,variant:M}),b[27]=k,b[28]=j,b[29]=C,b[30]=A,b[31]=I,b[32]=S,b[33]=E,b[34]=q,b[35]=w,b[36]=L,b[37]=Y,b[38]=v,b[39]=J,b[40]=K,b[41]=M,b[42]=g):g=b[42],b[43]!==g||b[44]!==m||b[45]!==h?(f=(0,n.jsxs)(x.D.Provider,{value:m,children:[h,g]}),b[43]=g,b[44]=m,b[45]=h,b[46]=f):f=b[46],f}var f=((r=f||{}).Overview="overview",r.ColumnValues="columnValues",r);function y(e){let t,s,r,l,i,o,u=(0,a.c)(20),{source:x,rowId:p,aliasWith:g}=e,[f,y]=(0,d.Mj)("hdx-expanded-row-default-tab","columnValues");return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{text:"Overview",value:"overview"},{text:"Column Values",value:"columnValues"}],u[0]=t):t=u[0],u[1]!==f||u[2]!==y?(s=(0,n.jsx)("div",{className:"px-3 pt-2 position-relative",children:(0,n.jsx)(c.A,{className:"fs-8",items:t,activeItem:f,onClick:y})}),u[1]=f,u[2]=y,u[3]=s):s=u[3],u[4]!==f||u[5]!==g||u[6]!==p||u[7]!==x?(r="overview"===f&&(0,n.jsx)("div",{className:"inline-overview-panel",children:(0,n.jsx)(h.W,{source:x,rowId:p,aliasWith:g})}),u[4]=f,u[5]=g,u[6]=p,u[7]=x,u[8]=r):r=u[8],u[9]!==f||u[10]!==g||u[11]!==p||u[12]!==x?(l="columnValues"===f&&(0,n.jsx)(m.dD,{source:x,rowId:p,aliasWith:g}),u[9]=f,u[10]=g,u[11]=p,u[12]=x,u[13]=l):l=u[13],u[14]!==r||u[15]!==l?(i=(0,n.jsxs)("div",{children:[r,l]}),u[14]=r,u[15]=l,u[16]=i):i=u[16],u[17]!==s||u[18]!==i?(o=(0,n.jsxs)("div",{className:"position-relative",children:[s,i]}),u[17]=s,u[18]=i,u[19]=o):o=u[19],o}},76539:(e,t,s)=>{"use strict";s.d(t,{A:()=>k,g:()=>C});var r,n=s(6029),a=s(75155),l=s(55729),i=s(67264),o=s.n(i),c=s(41038),d=s(1909),u=s(3145),m=s(78253),h=s(3635),x=s(90124),p=s(43085),g=s(39785),f=s(64467),y=s(26814),b=s(43370),v=s(81973),j=s(92917),S=s(37901),w=s(50374),_=s(46061),E=((r=E||{}).All="all",r.Custom="custom",r.Host="host",r.Node="k8s.node.name",r.Pod="k8s.pod.name",r.Service="service",r);function C(e){let t,s,r,n=(0,a.c)(11),i=(0,c.ZA)("contextRowId",c.tU),o=(0,c.ZA)("contextRowSource",c.tU);n[0]!==i||n[1]!==o?(t={contextRowId:i,contextRowSource:o},n[0]=i,n[1]=o,n[2]=t):t=n[2];let d=t,u=(0,l.useState)(null),m=(0,l.useState)(null);n[3]!==u||n[4]!==m?(s={contextRowId:u,contextRowSource:m},n[3]=u,n[4]=m,n[5]=s):s=n[5];let h=s,x=e?h:d;return n[6]!==x.contextRowId[0]||n[7]!==x.contextRowId[1]||n[8]!==x.contextRowSource[0]||n[9]!==x.contextRowSource[1]?(r={contextRowId:x.contextRowId[0],contextRowSource:x.contextRowSource[0],setContextRowId:x.contextRowId[1],setContextRowSource:x.contextRowSource[1]},n[6]=x.contextRowId[0],n[7]=x.contextRowId[1],n[8]=x.contextRowSource[0],n[9]=x.contextRowSource[1],n[10]=r):r=n[10],r}function k(e){let t,s,r,i,c,E,k,N,A,T,$,z,L,I,M,R,D,P,O,F,V,B,W,H,q,X,Y,J=(0,a.c)(97),{source:K,dbSqlRowTableConfig:G,rowData:Z,rowId:U,breadcrumbPath:Q,onBreadcrumbClick:ee}=e;J[0]!==Q?(t=void 0===Q?[]:Q,J[0]=Q,J[1]=t):t=J[1];let et=t,es=Z[S.$_.TIMESTAMP];J[2]!==G?(s=G??{},J[2]=G,J[3]=s):s=J[3];let{whereLanguage:er}=s,en=void 0===er?"lucene":er;J[4]===Symbol.for("react.memo_cache_sentinel")?(r=o()("30s"),J[4]=r):r=J[4];let[ea,el]=(0,l.useState)(r),[ei,eo]=(0,l.useState)("all"),ec=en??"lucene";J[5]!==ec?(i={defaultValues:{where:"",whereLanguage:ec}},J[5]=ec,J[6]=i):i=J[6];let{control:ed}=(0,d.mN)(i);J[7]!==ed?(c={control:ed,name:"where"},J[7]=ed,J[8]=c):c=J[8];let eu=(0,d.FH)(c),[em]=(0,g.o)(eu,1e3),{contextRowId:eh,contextRowSource:ex,setContextRowId:ep,setContextRowSource:eg}=C(et.length>0),ef=ex||"";J[9]!==ef?(E={id:ef},J[9]=ef,J[10]=E):E=J[10];let{data:ey}=(0,v.Fo)(E);J[11]===Symbol.for("react.memo_cache_sentinel")?(k=[],J[11]=k):k=J[11];let[eb,ev]=(0,l.useState)(k);J[12]!==ep||J[13]!==eg?(N=()=>{ep(null),eg(null)},J[12]=ep,J[13]=eg,J[14]=N):N=J[14];let ej=N,{setChildModalOpen:eS}=(0,l.useContext)(w.D);J[15]!==ep||J[16]!==eg||J[17]!==K.id?(A=e=>{ep(e.where),ev(e.aliasWith),eg(K.id)},J[15]=ep,J[16]=eg,J[17]=K.id,J[18]=A):A=J[18];let ew=A;J[19]!==es?(T=new Date(es),J[19]=es,J[20]=T):T=J[20];let e_=T,eE=e_.getTime()-ea/2;J[21]!==eE?($=new Date(eE),J[21]=eE,J[22]=$):$=J[22];let eC=e_.getTime()+ea/2;J[23]!==eC?(z=new Date(eC),J[23]=eC,J[24]=z):z=J[24],J[25]!==$||J[26]!==z?(L=[$,z],J[25]=$,J[26]=z,J[27]=L):L=J[27];let ek=L;J[28]!==Z.ResourceAttributes?(I=Z.ResourceAttributes??{},J[28]=Z.ResourceAttributes,J[29]=I):I=J[29];let{"k8s.node.name":eN,"k8s.pod.name":eA,"host.name":eT,"service.name":e$}=I;J[30]===Symbol.for("react.memo_cache_sentinel")?(M={field:"",value:""},J[30]=M):M=J[30];let ez=em||"";J[31]!==ez?(R={field:"",value:ez},J[31]=ez,J[32]=R):R=J[32],J[33]!==e$?(D={field:"service.name",value:e$},J[33]=e$,J[34]=D):D=J[34],J[35]!==eT?(P={field:"host.name",value:eT},J[35]=eT,J[36]=P):P=J[36],J[37]!==eA?(O={field:"k8s.pod.name",value:eA},J[37]=eA,J[38]=O):O=J[38],J[39]!==eN?(F={field:"k8s.node.name",value:eN},J[39]=eN,J[40]=F):F=J[40],J[41]!==R||J[42]!==D||J[43]!==P||J[44]!==O||J[45]!==F?(V={all:M,custom:R,service:D,host:P,"k8s.pod.name":O,"k8s.node.name":F},J[41]=R,J[42]=D,J[43]=P,J[44]=O,J[45]=F,J[46]=V):V=J[46];let eL=V;J[47]!==eL||J[48]!==en?(B=e=>{let t="sql"===en,s=eL[e];return"all"===e?s.value:"custom"===e?s.value.trim():(0,j.ji)("ResourceAttributes",s.field,s.value,t)},J[47]=eL,J[48]=en,J[49]=B):B=J[49];let eI=B;J[50]!==eT||J[51]!==eN||J[52]!==eA||J[53]!==e$?(W=function(){return[{label:"All",value:"all"},...e$?[{label:"Service",value:"service"}]:[],...eT?[{label:"Host",value:"host"}]:[],...eA?[{label:"Pod",value:"k8s.pod.name"}]:[],...eN?[{label:"Node",value:"k8s.node.name"}]:[],{label:"Custom",value:"custom"}]},J[50]=eT,J[51]=eN,J[52]=eA,J[53]=e$,J[54]=W):W=J[54];let eM=W;e:{let e,t,s;J[55]!==ei||J[56]!==eI?(e=eI(ei),J[55]=ei,J[56]=eI,J[57]=e):e=J[57];let r=e;if(!G){let e,t,s=K.defaultTableSelectExpression||"";J[58]===Symbol.for("react.memo_cache_sentinel")?(e={limit:200},J[58]=e):e=J[58];let n=`${K.timestampValueExpression} DESC`;J[59]!==ek||J[60]!==en||J[61]!==K.connection||J[62]!==K.from||J[63]!==K.timestampValueExpression||J[64]!==s||J[65]!==n||J[66]!==r?(t={connection:K.connection,from:K.from,timestampValueExpression:K.timestampValueExpression,select:s,limit:e,orderBy:n,where:r,whereLanguage:en,dateRange:ek},J[59]=ek,J[60]=en,J[61]=K.connection,J[62]=K.from,J[63]=K.timestampValueExpression,J[64]=s,J[65]=n,J[66]=r,J[67]=t):t=J[67],H=t;break e}J[68]===Symbol.for("react.memo_cache_sentinel")?(t=[],J[68]=t):t=J[68],J[69]!==G||J[70]!==ek||J[71]!==en||J[72]!==r?(s={...G,where:r,whereLanguage:en,dateRange:ek,filters:t},J[69]=G,J[70]=ek,J[71]=en,J[72]=r,J[73]=s):s=J[73],H=s}let eR=H;return J[74]!==eL||J[75]!==eR||J[76]!==ei||J[77]!==ed||J[78]!==eM||J[79]!==ew||J[80]!==en||J[81]!==ea||J[82]!==U||J[83]!==eS||J[84]!==K?(q=eR&&(0,n.jsxs)(m.s,{direction:"column",mih:"0px",style:{flexGrow:1},children:[(0,n.jsxs)(h.Y,{justify:"space-between",p:"sm",children:[(0,n.jsx)(x.I,{size:"xs",data:eM(),value:ei,onChange:e=>eo(e)}),"custom"===ei&&(0,n.jsx)(y.A,{name:"whereLanguage",control:ed,sqlInput:"lucene"===en?null:(0,n.jsx)(f.Z,{tableConnection:(0,u.VO)(K),control:ed,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",language:"sql",enableHotkey:!0,size:"sm"}),luceneInput:"sql"===en?null:(0,n.jsx)(b.A,{tableConnection:(0,u.VO)(K),control:ed,name:"where",language:"lucene",placeholder:"Lucene where clause (ex. column:value)",enableHotkey:!0,size:"sm"})}),(0,n.jsx)(x.I,{size:"xs",data:[{label:"100ms",value:o()("100ms").toString()},{label:"500ms",value:o()("500ms").toString()},{label:"1s",value:o()("1s").toString()},{label:"5s",value:o()("5s").toString()},{label:"30s",value:o()("30s").toString()},{label:"1m",value:o()("1m").toString()},{label:"5m",value:o()("5m").toString()},{label:"15m",value:o()("15m").toString()}],value:ea.toString(),onChange:e=>el(Number(e))})]}),(0,n.jsx)(h.Y,{p:"sm",children:(0,n.jsxs)("div",{children:["all"!==ei&&(0,n.jsxs)(p.E,{size:"md",variant:"default",children:[ei,":",eL[ei].value]}),(0,n.jsxs)(p.E,{size:"md",variant:"default",children:["Time range: \xb1",o()(ea/2)]})]})}),(0,n.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,n.jsx)(_.rD,{sourceId:K.id,highlightedLineId:U,showExpandButton:!1,isLive:!1,config:eR,queryKeyPrefix:"context",onRowDetailsClick:ew,onChildModalOpen:eS})})]}),J[74]=eL,J[75]=eR,J[76]=ei,J[77]=ed,J[78]=eM,J[79]=ew,J[80]=en,J[81]=ea,J[82]=U,J[83]=eS,J[84]=K,J[85]=q):q=J[85],J[86]!==et||J[87]!==eb||J[88]!==eh||J[89]!==ey||J[90]!==ej||J[91]!==ee||J[92]!==Z?(X=eh&&ey&&(0,n.jsx)(w.A,{source:ey,rowId:eh,aliasWith:eb,onClose:ej,isNestedPanel:!0,breadcrumbPath:[...et,{label:"Surrounding Context",rowData:Z}],onBreadcrumbClick:ee}),J[86]=et,J[87]=eb,J[88]=eh,J[89]=ey,J[90]=ej,J[91]=ee,J[92]=Z,J[93]=X):X=J[93],J[94]!==q||J[95]!==X?(Y=(0,n.jsxs)(n.Fragment,{children:[q,X]}),J[94]=q,J[95]=X,J[96]=Y):Y=J[96],Y}},76755:e=>{e.exports={filtersPanel:"SearchPage_filtersPanel__RSzmw",textButton:"SearchPage_textButton__bKr4G",filterCheckbox:"SearchPage_filterCheckbox__7aZCJ",filterActions:"SearchPage_filterActions__DIG8F",searchPageContainer:"SearchPage_searchPageContainer__PfX3Y",chevron:"SearchPage_chevron__eBKPl",recentlyMoved:"SearchPage_recentlyMoved___7dIo",highlight:"SearchPage_highlight__F9zRq",searchStatsContainer:"SearchPage_searchStatsContainer__W2ySO",timeChartContainer:"SearchPage_timeChartContainer__Ufski",searchForm:"SearchPage_searchForm__amID0"}},78694:(e,t,s)=>{"use strict";s.d(t,{iV:()=>g,ir:()=>v,$K:()=>f,hF:()=>y,Qx:()=>b});var r=s(6029),n=s(75155),a=s(55729);s(82203);var l=s(75828),i=(s(63085),s(8468)),o=s(20158),c=s(70114),d=s(23474);s(38067),s(26355);s(94720),s(3635);var u=s(72075),m=s(68593);s(7565),s(94364);var h=s(92917),x=s(66773),p=s.n(x);let g=e=>{let t,s,l,i,o,u,m=(0,n.c)(15),{title:h,children:x,initiallyCollapsed:p}=e,[g,f]=a.useState(p??!1);return m[0]!==g?(t=()=>f(!g),s=g?(0,r.jsx)(c.A,{size:14,className:"me-2"}):(0,r.jsx)(d.A,{size:14,className:"me-2"}),m[0]=g,m[1]=t,m[2]=s):(t=m[1],s=m[2]),m[3]!==h?(l=(0,r.jsx)("div",{className:"fs-7",children:h}),m[3]=h,m[4]=l):l=m[4],m[5]!==t||m[6]!==s||m[7]!==l?(i=(0,r.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,l]}),m[5]=t,m[6]=s,m[7]=l,m[8]=i):i=m[8],m[9]!==x||m[10]!==g?(o=g?null:(0,r.jsx)("div",{className:"mb-4",children:x}),m[9]=x,m[10]=g,m[11]=o):o=m[11],m[12]!==i||m[13]!==o?(u=(0,r.jsxs)("div",{className:"my-3",children:[i,o]}),m[12]=i,m[13]=o,m[14]=u):u=m[14],u},f=e=>{let t,s,a=(0,n.c)(5),{children:l,title:i}=e;return a[0]!==i?(t=i&&(0,r.jsx)("div",{className:p().panelSectionWrapperTitle,children:i}),a[0]=i,a[1]=t):t=a[1],a[2]!==l||a[3]!==t?(s=(0,r.jsxs)("div",{className:p().panelSectionWrapper,children:[t,l]}),a[2]=l,a[3]=t,a[4]=s):s=a[4],s};m.k;let y=[{accessorKey:"0",header:"Header",size:260,cell:({row:e})=>(0,r.jsx)("div",{className:"text-truncate",title:e.original[0],children:e.original[0]})},{size:m.k,accessorKey:"1",header:"Value"}],b=[{accessorKey:"label",header:"Label",size:260,cell:({row:e})=>(0,r.jsx)("span",{children:e.original.label})},{size:m.k,accessorKey:"value",header:"Value",cell:({row:e})=>(0,r.jsx)("span",{className:e.original.className,children:e.original.value})}],v=()=>{let e,t,s,a,l,c=(0,n.c)(7),[d,u]=(0,h.Mj)("kbd-shortcuts-dismissed",!1);c[0]!==u?(e=()=>{u(!0)},c[0]=u,c[1]=e):e=c[1];let m=e;return d?null:(c[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(i.u,{className:"me-1",children:"←"}),s=(0,r.jsx)(i.u,{children:"→"}),c[2]=t,c[3]=s):(t=c[2],s=c[3]),c[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,r.jsxs)("div",{children:["Use ",t,s," arrow keys or ",(0,r.jsx)(i.u,{className:"me-1",children:"k"}),(0,r.jsx)(i.u,{children:"j"})," to move through events"]}),(0,r.jsx)("div",{className:p().kbdDivider}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.u,{children:"ESC"})," to close"]})]}),c[4]=a):a=c[4],c[5]!==m?(l=(0,r.jsx)("div",{className:p().kbdShortcuts,children:(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center ",children:[a,(0,r.jsx)(o.J,{"aria-label":"Hide",onClick:m})]})}),c[5]=m,c[6]=l):l=c[6],l)}},80842:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>sv});var r=s(6029),n=s(75155),a=s(55729),l=s(71024),i=s.n(l),o=s(95669),c=s.n(o),d=s(82203),u=s.n(d),m=s(81278),h=s.n(m),x=s(41038),p=s(1909),g=s(6663),f=s(52789),y=s(35467),b=s(3145),v=s(76089),j=s(82641),S=s(56513),w=s(76013),_=s(43517),E=s(27166),C=s(25062),k=s(62801),N=s(34834),A=s(60481),T=s(3635),$=s(78253),z=s(63085),L=s(38206),I=s(22623),M=s(53061),R=s(48378),D=s(24589),P=s(2489),O=s(289),F=s(78341),V=s(60665),B=s(95316),W=s(28975),H=s(27798),q=s(62118),X=s(74011),Y=s(23195),J=s(28200),K=s(68934),G=s(95352),Z=s(225),U=s(75828),Q=s.n(U),ee=s(8737),et=s(47268),es=s(51564),er=s(45005),en=s(59029),ea=s(94720),el=s(53993),ei=s(64488),eo=s(28282),ec=s(64490),ed=s(94502),eu=s(95009),em=s(45556),eh=s(3562),ex=s(41279),ep=s(58333),eg=s(70114),ef=s(93607),ey=s(85318),eb=s(23474),ev=s(98142),ej=s(78550),eS=s(24885),ew=s(28959),e_=s(81973),eE=s(92917),eC=s(76755),ek=s.n(eC);let eN=e=>{let t,s,l,i,o,c,d,u,m,h,x,p,g,f,y,b,v,j,S=(0,n.c)(72),{name:w,childFilters:E,selectedValues:C,onChange:k,onClearClick:A,onOnlyClick:$,onExcludeClick:L,onPinClick:I,isPinned:M,onFieldPinClick:R,isFieldPinned:D,onLoadMore:P,loadMoreLoading:O,hasLoadedMore:F,isDefaultExpanded:V,"data-testid":B,chartConfig:W,isLive:H}=e;S[0]!==C?(t=void 0===C?{}:C,S[0]=C,S[1]=t):t=S[1];let q=t;S[2]!==q?(s=Object.values(q).reduce(eA,0),S[2]=q,S[3]=s):s=S[3];let X=s,[Y,J]=(0,a.useState)(V??X>0);S[4]===Symbol.for("react.memo_cache_sentinel")?(l={chevron:ek().chevron},S[4]=l):l=S[4];let K=Y?w:null;S[5]!==w?(i=e=>J(e===w),S[5]=w,S[6]=i):i=S[6],S[7]===Symbol.for("react.memo_cache_sentinel")?(o={chevron:"m-0",label:"p-0"},S[7]=o):o=S[7];let G=E.length?"":"opacity-50",Z=w.length>26?0:1500;S[8]!==w?(c=(0,r.jsx)(_.E,{size:"xs",fw:"500",children:w}),S[8]=w,S[9]=c):c=S[9];let U=`{${E.length}}`;if(S[10]!==U?(d=(0,r.jsx)(_.E,{size:"xs",c:"dimmed",children:U}),S[10]=U,S[11]=d):d=S[11],S[12]!==c||S[13]!==d?(u=(0,r.jsxs)(T.Y,{gap:"xs",wrap:"nowrap",flex:"1",children:[c,d]}),S[12]=c,S[13]=d,S[14]=u):u=S[14],S[15]!==w||S[16]!==u||S[17]!==Z?(m=(0,r.jsx)(z.m,{openDelay:Z,label:w,position:"top",withArrow:!0,fz:"xxs",color:"gray",children:u}),S[15]=w,S[16]=u,S[17]=Z,S[18]=m):m=S[18],S[19]!==m||S[20]!==G?(h=(0,r.jsx)("div",{className:ek().filterGroupHeader,children:(0,r.jsx)(er.n.Control,{component:ee.N,flex:"1",p:"0",pr:"xxxs","data-testid":"nested-filter-group-control",classNames:o,className:G,children:m})}),S[19]=m,S[20]=G,S[21]=h):h=S[21],S[22]===Symbol.for("react.memo_cache_sentinel")?(x={content:"pl-3 pt-1 pb-0"},S[22]=x):x=S[22],S[23]!==W||S[24]!==E||S[25]!==F||S[26]!==D||S[27]!==H||S[28]!==M||S[29]!==O||S[30]!==k||S[31]!==A||S[32]!==L||S[33]!==R||S[34]!==P||S[35]!==$||S[36]!==I||S[37]!==q){let e;S[39]!==W||S[40]!==F||S[41]!==D||S[42]!==H||S[43]!==M||S[44]!==O||S[45]!==k||S[46]!==A||S[47]!==L||S[48]!==R||S[49]!==P||S[50]!==$||S[51]!==I||S[52]!==q?(e=e=>{let t=q[e.key]||{included:new Set,excluded:new Set},s=t.included.size+t.excluded.size>0;return(0,r.jsx)(eD,{"data-testid":`nested-filter-group-${e.key}`,name:e.propertyPath,distributionKey:e.key,options:e.value.map(eT),optionsLoading:!1,selectedValues:t,onChange:t=>k(e.key,t),onClearClick:()=>A(e.key),onOnlyClick:t=>$(e.key,t),onExcludeClick:t=>L(e.key,t),onPinClick:t=>I(e.key,t),isPinned:t=>M(e.key,t),onFieldPinClick:()=>R?.(e.key),isFieldPinned:D?.(e.key),onLoadMore:()=>P(e.key),loadMoreLoading:O[e.key]||!1,hasLoadedMore:F[e.key]||!1,isDefaultExpanded:s,chartConfig:W,isLive:H},e.key)},S[39]=W,S[40]=F,S[41]=D,S[42]=H,S[43]=M,S[44]=O,S[45]=k,S[46]=A,S[47]=L,S[48]=R,S[49]=P,S[50]=$,S[51]=I,S[52]=q,S[53]=e):e=S[53],p=E.map(e),S[23]=W,S[24]=E,S[25]=F,S[26]=D,S[27]=H,S[28]=M,S[29]=O,S[30]=k,S[31]=A,S[32]=L,S[33]=R,S[34]=P,S[35]=$,S[36]=I,S[37]=q,S[38]=p}else p=S[38];return S[54]!==p?(g=(0,r.jsx)(N.B,{gap:"xs",children:p}),S[54]=p,S[55]=g):g=S[55],S[56]!==E.length?(f=0===E.length&&(0,r.jsx)(T.Y,{m:6,gap:"xs",children:(0,r.jsx)(_.E,{c:"dimmed",size:"xs",children:"No properties found"})}),S[56]=E.length,S[57]=f):f=S[57],S[58]!==g||S[59]!==f?(y=(0,r.jsx)(er.n.Panel,{"data-testid":"nested-filter-group-panel",classNames:x,children:(0,r.jsxs)("div",{className:ek().filterGroupPanel,children:[g,f]})}),S[58]=g,S[59]=f,S[60]=y):y=S[60],S[61]!==h||S[62]!==y?(b=(0,r.jsxs)("div",{className:ek().filterGroup,children:[h,y]}),S[61]=h,S[62]=y,S[63]=b):b=S[63],S[64]!==B||S[65]!==w||S[66]!==b?(v=(0,r.jsx)(er.n.Item,{value:w,"data-testid":B,children:b}),S[64]=B,S[65]=w,S[66]=b,S[67]=v):v=S[67],S[68]!==v||S[69]!==K||S[70]!==i?(j=(0,r.jsx)(er.n,{variant:"unstyled",chevronPosition:"left",classNames:l,value:K,onChange:i,children:v}),S[68]=v,S[69]=K,S[70]=i,S[71]=j):j=S[71],j};function eA(e,t){return e+t.included.size+t.excluded.size}function eT(e){return{value:e,label:e.toString()}}var e$=s(83101),ez=s.n(e$);let eL=e=>{let t,s,a=(0,n.c)(8),{onClick:l,label:i,ms:o,display:c,"data-testid":d}=e;return a[0]!==i||a[1]!==o?(t=(0,r.jsx)(_.E,{size:"xxs",lh:1,ms:o,children:i}),a[0]=i,a[1]=o,a[2]=t):t=a[2],a[3]!==d||a[4]!==c||a[5]!==l||a[6]!==t?(s=(0,r.jsx)(ee.N,{display:c,onClick:l,className:ek().textButton,"data-testid":d,children:t}),a[3]=d,a[4]=c,a[5]=l,a[6]=t,a[7]=s):s=a[7],s},eI=e=>{let t,s,a=(0,n.c)(5),{percentage:l,isLoading:i}=e;a[0]!==l?(t=l<1?"<1%":l>=99.5?">99%":`~${Math.round(l)}%`,a[0]=l,a[1]=t):t=a[1];let o=t,c=i?"effect-pulse":"";return a[2]!==o||a[3]!==c?(s=(0,r.jsx)(_.E,{size:"xs",className:c,children:o}),a[2]=o,a[3]=c,a[4]=s):s=a[4],s},eM=e=>{let t,s,a,l,i,o,c,d,u,m,h,x,p,g,f,y,b,v=(0,n.c)(57),{value:j,label:S,pinned:E,onChange:C,onClickOnly:k,onClickExclude:N,onClickPin:A,className:$,percentage:L,isPercentageLoading:I}=e;v[0]!==$?(t=Q()(ek().filterCheckbox,$),v[0]=$,v[1]=t):t=v[1];let R=`filter-checkbox-${S}`;v[2]!==C||v[3]!==j?(s=()=>C?.(!j),v[2]=C,v[3]=j,v[4]=s):s=v[4],v[5]===Symbol.for("react.memo_cache_sentinel")?(a={minWidth:0},v[5]=a):a=v[5];let D=!!j,P="excluded"===j,O=`filter-checkbox-input-${S}`;v[6]!==D||v[7]!==P||v[8]!==O?(l=(0,r.jsx)(et.S,{checked:D,size:13,onChange:eF,indeterminate:P,"data-testid":O}),v[6]=D,v[7]=P,v[8]=O,v[9]=l):l=v[9];let F=S.length>22?0:1500,V="excluded"===j?"var(--color-text-danger)":"var(--color-text)";v[10]!==S?(i=S||(0,r.jsx)("span",{className:"fst-italic",children:"(empty)"}),v[10]=S,v[11]=i):i=v[11],v[12]!==S||v[13]!==V||v[14]!==i?(o=(0,r.jsx)(_.E,{size:"xs",c:V,truncate:"end",flex:1,title:S,children:i}),v[12]=S,v[13]=V,v[14]=i,v[15]=o):o=v[15],v[16]!==I||v[17]!==L?(c=null!=L&&(0,r.jsx)(eI,{percentage:L,isLoading:I}),v[16]=I,v[17]=L,v[18]=c):c=v[18],v[19]!==o||v[20]!==c?(d=(0,r.jsxs)(T.Y,{w:"100%",gap:"xs",wrap:"nowrap",justify:"space-between",pe:"4px",miw:0,children:[o,c]}),v[19]=o,v[20]=c,v[21]=d):d=v[21],v[22]!==S||v[23]!==d||v[24]!==F?(u=(0,r.jsx)(z.m,{openDelay:F,label:S,position:"right",withArrow:!0,fz:"xxs",color:"gray",children:d}),v[22]=S,v[23]=d,v[24]=F,v[25]=u):u=v[25],v[26]!==u||v[27]!==s||v[28]!==l?(m=(0,r.jsxs)(T.Y,{gap:8,onClick:s,style:a,wrap:"nowrap",children:[l,u]}),v[26]=u,v[27]=s,v[28]=l,v[29]=m):m=v[29],v[30]!==S||v[31]!==k?(h=k&&(0,r.jsx)(eL,{onClick:k,label:"Only","data-testid":`filter-only-${S}`}),v[30]=S,v[31]=k,v[32]=h):h=v[32],v[33]!==S||v[34]!==N?(x=N&&(0,r.jsx)(eL,{onClick:N,label:"Exclude","data-testid":`filter-exclude-${S}`}),v[33]=S,v[34]=N,v[35]=x):x=v[35];let B=E?"Unpin field":"Pin field",W=`filter-pin-${S}`;return v[36]!==E?(p=E?(0,r.jsx)(eo.A,{size:12}):(0,r.jsx)(ec.A,{size:12}),v[36]=E,v[37]=p):p=v[37],v[38]!==A||v[39]!==E||v[40]!==B||v[41]!==W||v[42]!==p?(g=(0,r.jsx)(w.M,{onClick:A,size:"xs",variant:"subtle",color:"gray","aria-label":B,role:"checkbox","aria-checked":E,"data-testid":W,children:p}),v[38]=A,v[39]=E,v[40]=B,v[41]=W,v[42]=p,v[43]=g):g=v[43],v[44]!==h||v[45]!==x||v[46]!==g?(f=(0,r.jsxs)("div",{className:ek().filterActions,children:[h,x,g]}),v[44]=h,v[45]=x,v[46]=g,v[47]=f):f=v[47],v[48]!==S||v[49]!==E?(y=E&&(0,r.jsx)(M.o,{me:"1px",children:(0,r.jsx)(eo.A,{size:12,"data-testid":`filter-pin-${S}-pinned`})}),v[48]=S,v[49]=E,v[50]=y):y=v[50],v[51]!==t||v[52]!==m||v[53]!==R||v[54]!==f||v[55]!==y?(b=(0,r.jsxs)("div",{className:t,"data-testid":R,children:[m,f,y]}),v[51]=t,v[52]=m,v[53]=R,v[54]=f,v[55]=y,v[56]=b):b=v[56],b},eR=e=>{let t,s,l,i,o,c,d,u,m=(0,n.c)(18),{range:h,onRangeChange:x}=e,[p,g]=(0,a.useState)(h.min),[f,y]=(0,a.useState)(h.max);m[0]!==f||m[1]!==x?(t=e=>{let t="string"==typeof e?parseFloat(e):e;!isNaN(t)&&(g(t),x&&x({min:t,max:f}))},m[0]=f,m[1]=x,m[2]=t):t=m[2];let b=t;m[3]!==p||m[4]!==x?(s=e=>{let t="string"==typeof e?parseFloat(e):e;!isNaN(t)&&(y(t),x&&x({min:p,max:t}))},m[3]=p,m[4]=x,m[5]=s):s=m[5];let v=s;return m[6]===Symbol.for("react.memo_cache_sentinel")?(l={input:{fontSize:"11px"}},m[6]=l):l=m[6],m[7]!==b||m[8]!==p?(i=(0,r.jsx)(es.Q,{size:"xs",placeholder:"Min",value:p,onChange:b,styles:l,flex:1,hideControls:!0}),m[7]=b,m[8]=p,m[9]=i):i=m[9],m[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(_.E,{size:"xs",c:"dimmed",children:"to"}),m[10]=o):o=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(c={input:{fontSize:"11px"}},m[11]=c):c=m[11],m[12]!==v||m[13]!==f?(d=(0,r.jsx)(es.Q,{size:"xs",placeholder:"Max",value:f,onChange:v,styles:c,flex:1,hideControls:!0}),m[12]=v,m[13]=f,m[14]=d):d=m[14],m[15]!==i||m[16]!==d?(u=(0,r.jsx)(N.B,{gap:8,px:"xs",mb:"xs",children:(0,r.jsxs)(T.Y,{gap:4,wrap:"nowrap",children:[i,o,d]})}),m[15]=i,m[16]=d,m[17]=u):u=m[17],u},eD=({name:e,options:t,optionsLoading:s,selectedValues:n={included:new Set,excluded:new Set},onChange:l,onClearClick:i,onOnlyClick:o,onExcludeClick:c,isPinned:d,onPinClick:u,onFieldPinClick:m,isFieldPinned:h,onLoadMore:x,loadMoreLoading:p,hasLoadedMore:g,isDefaultExpanded:f,"data-testid":y,chartConfig:b,isLive:v,distributionKey:j,onRangeChange:S})=>{let[E,C]=(0,a.useState)(""),[k,A]=(0,a.useState)(!1),[$,L]=(0,a.useState)(f??!1),[I,R]=(0,a.useState)(new Set),[D,P]=(0,a.useState)(!1),[O,F]=(0,a.useState)(b.dateRange),B=null!=n.range;(0,a.useEffect)(()=>{v||F(b.dateRange)},[b.dateRange,v]),(0,a.useEffect)(()=>{f&&L(!0)},[f]);let W=(0,a.useCallback)(t=>{C(t),t&&!g&&x(e)},[g,e,x]),{data:H,isFetching:q,error:X}=(0,ej.kN)({chartConfig:{...b,dateRange:O},key:j||e,limit:100},{enabled:D});(0,a.useEffect)(()=>{X&&(V.$e.show({color:"red",title:"Error loading filter distribution",message:X?.message,autoClose:5e3}),P(!1))},[X]);let Y=n.included.size+n.excluded.size+ +!!B,J=(0,a.useMemo)(()=>[...Array.from(new Set([...n.included,...n.excluded])).filter(e=>!t.find(t=>t.value===e)).map(e=>({value:e,label:e.toString()})),...t],[t,n]),K=k?50:10,G=(0,a.useMemo)(()=>E?J.filter(e=>e.value&&e.label.toLowerCase().includes(E.toLowerCase())).toSorted((e,t)=>e.label.localeCompare(t.label,void 0,{numeric:!0})):J.toSorted((e,t)=>{let s=d(e.value),r=n.included.has(e.value),a=n.excluded.has(e.value),l=d(t.value),i=n.included.has(t.value),o=n.excluded.has(t.value);if(s&&!l)return -1;if(!s&&l)return 1;if(r&&!i)return -1;if(!r&&i)return 1;if(a&&!o)return -1;if(!a&&o)return 1;let c=H?.get(e.value.toString())??0,u=H?.get(t.value.toString())??0;return c!==u?u-c:e.label.localeCompare(t.label,void 0,{numeric:!0})}),[E,J,d,n.included,n.excluded,H]),Z=(0,a.useMemo)(()=>G.length<=K?G:G.slice(0,K),[G,K]),U=(0,a.useCallback)(e=>{n.included.has(e)||(R(t=>new Set(t).add(e)),setTimeout(()=>{R(t=>{let s=new Set(t);return s.delete(e),s})},600)),l(e)},[l,n]),Q=G.length>Z.length,et=!E&&J.length>10&&Y<J.length;return(0,r.jsx)(er.n,{variant:"unstyled",chevronPosition:"left",classNames:{chevron:ek().chevron},value:$?e:null,onChange:t=>{L(t===e)},children:(0,r.jsx)(er.n.Item,{value:e,"data-testid":y,children:(0,r.jsxs)(N.B,{gap:0,children:[(0,r.jsxs)(M.o,{children:[(0,r.jsx)(er.n.Control,{component:ee.N,flex:"1",p:"0",pr:"xxxs","data-testid":"filter-group-control",style:{overflow:"hidden"},classNames:{chevron:"m-0",label:"p-0"},className:Z.length?"":"opacity-50",children:(0,r.jsx)(z.m,{openDelay:e.length>26?0:1500,label:e,position:"top",withArrow:!0,fz:"xxs",color:"gray",children:(0,r.jsx)(_.E,{size:"xs",fw:"500",truncate:"end",children:e})})}),(0,r.jsxs)(T.Y,{gap:0,wrap:"nowrap",children:[!B&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.m,{label:D?"Hide Distribution":"Show Distribution",position:"top",withArrow:!0,fz:"xxs",color:"gray",children:(0,r.jsx)(w.M,{size:"xs",variant:"subtle",color:"gray",onClick:()=>{D||(L(!0),F(b.dateRange)),P(e=>!e)},"data-testid":`toggle-distribution-button-${e}`,"aria-checked":D,role:"checkbox",children:q?(0,r.jsx)(M.o,{children:(0,r.jsx)(ed.A,{className:"spin-animate",size:12})}):D?(0,r.jsx)(eu.A,{size:14}):(0,r.jsx)(em.A,{size:14})})}),m&&(0,r.jsx)(z.m,{label:h?"Unpin Field":"Pin Field",position:"top",withArrow:!0,fz:"xxs",color:"gray",children:(0,r.jsx)(w.M,{size:"xs",variant:"subtle",color:"gray",onClick:m,children:h?(0,r.jsx)(eo.A,{size:14}):(0,r.jsx)(ec.A,{size:14})})})]}),Y>0&&(0,r.jsx)(z.m,{label:"Clear Filters",position:"top",withArrow:!0,fz:"xxs",color:"gray",children:(0,r.jsx)(w.M,{size:"xs",variant:"subtle",color:"gray",onClick:()=>{i(),C("")},children:(0,r.jsx)(eh.A,{size:14})})})]})]}),(0,r.jsx)(er.n.Panel,{"data-testid":"filter-group-panel",classNames:{content:"p-0 pt-2"},children:B&&n.range?(0,r.jsx)(eR,{name:e,range:n.range,onClearClick:i,onRangeChange:S}):(0,r.jsxs)(N.B,{gap:0,children:[$&&J.length>5&&(0,r.jsx)("div",{className:"px-2 pb-2",children:(0,r.jsx)(en.k,{size:"xs",placeholder:"Search values...",value:E,"data-testid":`filter-search-${e}`,onChange:e=>W(e.currentTarget.value),rightSectionWidth:20,rightSection:(0,r.jsx)(ex.A,{size:12,stroke:2}),classNames:{input:"ps-0.5"}})}),Z.map(e=>(0,r.jsx)(eM,{label:e.label,pinned:d(e.value),className:I.has(e.value)?ek().recentlyMoved:"",value:n.included.has(e.value)?"included":!!n.excluded.has(e.value)&&"excluded",onChange:()=>U(e.value),onClickOnly:()=>o(e.value),onClickExclude:()=>c(e.value),onClickPin:()=>u(e.value),isPercentageLoading:q,percentage:D&&H?H.get(e.value.toString())??0:void 0},e.value.toString())),s?(0,r.jsxs)(T.Y,{m:6,gap:"xs",children:[(0,r.jsx)(ea.a,{size:12,color:"gray"}),(0,r.jsx)(_.E,{c:"dimmed",size:"xs",children:"Loading..."})]}):0===Z.length?(0,r.jsx)(T.Y,{m:6,gap:"xs",children:(0,r.jsx)(_.E,{c:"dimmed",size:"xs",children:"No options found"})}):null,Q&&(k||E)&&(0,r.jsx)(_.E,{size:"xxs",ms:28,fs:"italic",children:"Search to see more"}),p&&(0,r.jsxs)(T.Y,{m:6,gap:"xs",children:[(0,r.jsx)(ea.a,{size:12,color:"gray"}),(0,r.jsx)(_.E,{c:"dimmed",size:"xs",children:"Loading more..."})]}),et&&(0,r.jsx)("div",{className:"d-flex m-1",children:(0,r.jsx)(eL,{"data-testid":`filter-show-more-${e}`,label:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ep.A,{size:12})," Less"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eg.A,{size:12})," Show more"]}),onClick:()=>{A(!k),k||x?.(e)}})}),x&&!et&&!k&&!g&&!p&&(0,r.jsx)("div",{className:"d-flex m-1",children:(0,r.jsx)(eL,{"data-testid":`filter-load-more-${e}`,display:g?"none":void 0,label:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eg.A,{size:12})," Load more"]}),onClick:()=>x(e)})})]})})]})})})};function eP(e,t){return e?.primary_key?.includes(t)}let eO=(0,a.memo)(({filters:e,clearAllFilters:t,clearFilter:s,setFilterValue:n,isLive:l,chartConfig:i,analysisMode:o,setAnalysisMode:c,sourceId:d,showDelta:u,denoiseResults:m,setDenoiseResults:h,setFilterRange:x})=>{let p=(0,a.useCallback)((e,t,s)=>n(e,t,s),[n]),{toggleFilterPin:g,toggleFieldPin:f,isFilterPinned:y,isFieldPinned:v,getPinnedFields:S,pinnedFilters:w}=(0,ew.RW)(d??null),{size:E,startResize:k}=(0,eS.A)(16,"left"),{data:L}=(0,ej.n$)({databaseName:i.from.databaseName,tableName:i.from.tableName,connectionId:i.connection}),{data:I,isLoading:M,error:R}=(0,ej.ws)({databaseName:i.from.databaseName,tableName:i.from.tableName,connectionId:i.connection}),{data:D}=(0,ej.Zh)({databaseName:i.from.databaseName,tableName:i.from.tableName,connectionId:i.connection}),{data:P}=(0,e_.Fo)({id:d}),{data:O}=(0,ej.Z2)((0,b.VO)(P));(0,a.useEffect)(()=>{R&&V.$e.show({color:"red",title:R?.name,message:R?.message,autoClose:5e3})},[R]);let[F,B]=(0,a.useState)(!1),W=(0,a.useMemo)(()=>I?I.sort((e,t)=>e.type.includes("LowCardinality")&&!t.type.includes("LowCardinality")?-1:1).filter(e=>e.jsType&&["string"].includes(e.jsType)).map(({path:e,type:t})=>({type:t,path:(0,eE.uc)(e,L??[])})).filter(t=>F||t.type.includes("LowCardinality")||Object.keys(e).includes(t.path)||v(t.path)).map(({path:e})=>e).filter(e=>!["body","timestamp","_hdx_body"].includes(e.toLowerCase())):[],[I,L,e,F,v]),[H,q]=(0,a.useState)(i.dateRange);(0,a.useEffect)(()=>{l||(q(i.dateRange),Q({}))},[i.dateRange,l]),(0,a.useEffect)(()=>{Q({})},[d]);let X=l&&H!==i.dateRange,{data:Y,isLoading:J,isFetching:K}=(0,ej.lo)({chartConfig:{...i,dateRange:H},limit:20,keys:W}),G=(0,a.useMemo)(()=>{let e=new Map((Y??[]).map(e=>[e.key,e.value]));return Array.from(new Set([...e.keys(),...Object.keys(w),...S()])).map(t=>{let s=new Set([...e.get(t)??[],...w[t]??[]]);return{key:t,value:Array.from(s)}})},[Y,w,S]),Z=(0,ej.Ge)(),[U,Q]=(0,a.useState)({}),[ee,es]=(0,a.useState)(new Set),er=(0,a.useCallback)(async e=>{es(t=>new Set(t).add(e));try{let t=await Z.getKeyValuesWithMVs({chartConfig:{...i,dateRange:H},keys:[e],limit:1e4,disableRowLimit:!0,source:P}),s=t[0].value?.map(e=>e.toString())??[];s.length>0&&Q(t=>({...t,[e]:[...t[e]||[],...s]}))}catch(e){console.error("failed to fetch more keys",e)}finally{es(t=>{let s=new Set(t);return s.delete(e),s})}},[i,Q,H,Z,P]),en=(0,a.useMemo)(()=>{let t=[];for(let s of G??[]){let r=structuredClone(s);L?.some(e=>r.key.startsWith(e))&&(r.key=`toString(${r.key})`);let n=e[r.key],a=n&&(n.included.size>0||n.excluded.size>0),l=v(r.key);if(r.value?.length>0||a||l){let e=U[r.key];if(e&&e.length>0){let s=r.value.slice();for(let t of e)s.includes(t)||s.push(t);t.push({key:r.key,value:s})}else t.push(r)}}for(let s of Object.keys(e).filter(e=>!t.some(t=>t.key===e)))t.push({key:s,value:Array.from(e[s].included)});return t.sort((e,t)=>{let s=eP(O,e.key),r=eP(O,t.key);return s&&!r?-1:r&&!s?1:0}),t.sort((e,t)=>{let s=v(e.key),r=v(t.key);return s&&!r?-1:r&&!s?1:0}),t.sort((t,s)=>{let r=e?.[t.key]?.included.size>0,n=e?.[s.key]?.included.size>0;return r&&!n?-1:n&&!r?1:0}),t.sort((t,s)=>{let r=e?.[t.key]?.range,n=e?.[s.key]?.range;return r&&!n?-1:!r&&n?1:0}),t},[G,e,O,U,v,L]),eo=(0,a.useMemo)(()=>Object.values(e).some(e=>e.included.size>0||e.excluded.size>0||null!=e.range),[e]),ec=(0,a.useCallback)(e=>{P?.parentSpanIdExpression&&(e?D?.some(e=>e.name===ew.ae)?p(ew.ae,!0,"only"):p(P.parentSpanIdExpression,"","only"):(s(P.parentSpanIdExpression),s(ew.ae)))},[p,s,P,D]),eu=(0,a.useMemo)(()=>{if(!P?.parentSpanIdExpression||P.kind!==j.GL.Trace)return!1;let t=e?.[P?.parentSpanIdExpression],s=e?.[ew.ae];return t?.included.size===1&&t?.included.has("")||s?.included.size===1&&s?.included.has(!0)},[e,P]);return(0,r.jsxs)(A.a,{className:ek().filtersPanel,style:{width:`${E}%`},children:[(0,r.jsx)("div",{className:ez().resizeHandle,onMouseDown:k}),(0,r.jsx)(el.F,{h:"100%",scrollbarSize:4,scrollbars:"y",style:{display:"block",width:"100%",overflow:"hidden"},children:(0,r.jsxs)(N.B,{gap:"sm",p:"xs",children:[(0,r.jsx)(_.E,{size:"xxs",c:"dimmed",fw:"bold",children:"Analysis Mode"}),(0,r.jsx)(ei.t,{value:o,onChange:e=>c(e),orientation:"vertical",w:"100%",placement:"right",children:(0,r.jsxs)(ei.t.List,{w:"100%",children:[(0,r.jsx)(ei.t.Tab,{value:"results",size:"xs",h:"24px",children:(0,r.jsx)(_.E,{size:"xs",children:"Results Table"})}),u&&(0,r.jsx)(ei.t.Tab,{value:"delta",size:"xs",h:"24px",children:(0,r.jsx)(_.E,{size:"xs",children:"Event Deltas"})}),!ev.Ju&&(0,r.jsx)(ei.t.Tab,{value:"pattern",size:"xs",h:"24px",children:(0,r.jsx)(_.E,{size:"xs",children:"Event Patterns"})})]})}),(0,r.jsxs)($.s,{align:"center",justify:"space-between",children:[(0,r.jsxs)($.s,{className:K?"effect-pulse":"",children:[(0,r.jsxs)(_.E,{size:"xxs",c:"dimmed",fw:"bold",children:["Filters ",K&&"\xb7\xb7\xb7"]}),X&&(0,r.jsx)(eL,{label:(0,r.jsx)(ed.A,{size:14,className:"ms-1",onClick:()=>q(i.dateRange)})})]}),eo&&(0,r.jsx)(eL,{label:"Clear all",onClick:()=>{t()}})]}),"results"===o&&(0,r.jsx)(et.S,{size:13,checked:m,ms:"6px",label:(0,r.jsx)(z.m,{openDelay:200,color:"gray",position:"right",withArrow:!0,label:"Denoise results will visually remove events matching common event patterns from the results table.",children:(0,r.jsx)(_.E,{size:"xs",mt:"-2px",component:"div",children:(0,r.jsxs)(T.Y,{gap:2,children:[(0,r.jsx)(ef.A,{size:14,style:{display:"inline",verticalAlign:"middle"}}),"Denoise Results"]})})}),onChange:()=>h(!m)}),P?.kind===j.GL.Trace&&P.parentSpanIdExpression&&(0,r.jsx)(et.S,{size:13,checked:eu,ms:"6px",label:(0,r.jsx)(z.m,{openDelay:200,color:"gray",position:"right",withArrow:!0,label:"Only show root spans (spans with no parent span).",children:(0,r.jsx)(_.E,{size:"xs",mt:"-2px",component:"div",children:(0,r.jsxs)(T.Y,{gap:2,children:[(0,r.jsx)(ey.A,{size:14,style:{display:"inline",verticalAlign:"middle"}}),"Root Spans Only"]})})}),onChange:e=>ec(e.target.checked)}),M||J?(0,r.jsx)($.s,{align:"center",justify:"center",children:(0,r.jsx)(ea.a,{size:"xs",color:"gray"})}):0===en.length&&(0,r.jsx)(_.E,{size:"xxs",children:"No filters available"}),(()=>{let{grouped:t,nonGrouped:n}=function(e){let t=new Map,s=[];for(let r of e){let e=function(e){let t=e.replace(/^toString\((.+)\)$/,"$1").replace(/`([^`]+)`/g,"$1"),s=t.match(/^([^[]+)\[['"]([^'"]+)['"]\]$/);if(s)return{baseName:s[1],propertyPath:s[2]};let r=t.match(/^([^.]+)\.(.+)$/);return r?{baseName:r[1],propertyPath:r[2]}:null}(r.key);if(e){let{baseName:s,propertyPath:n}=e;t.has(s)||t.set(s,{key:s,value:[],children:[]}),t.get(s).children.push({...r,propertyPath:n})}else s.push(r)}return{grouped:Array.from(t.values()),nonGrouped:s}}(en);return(0,r.jsxs)(r.Fragment,{children:[t.map(t=>(0,r.jsx)(eN,{"data-testid":`nested-filter-group-${t.key}`,name:t.key,childFilters:t.children,selectedValues:t.children.reduce((t,s)=>(t[s.key]=e[s.key]?e[s.key]:{included:new Set,excluded:new Set},t),{}),onChange:(e,t)=>{p(e,t)},onClearClick:e=>s(e),onOnlyClick:(e,t)=>{p(e,t,"only")},onExcludeClick:(e,t)=>{p(e,t,"exclude")},onPinClick:(e,t)=>g(e,t),isPinned:(e,t)=>y(e,t),onFieldPinClick:e=>f(e),isFieldPinned:e=>v(e),onLoadMore:er,loadMoreLoading:t.children.reduce((e,t)=>(e[t.key]=ee.has(t.key),e),{}),hasLoadedMore:t.children.reduce((e,t)=>(e[t.key]=!!U[t.key],e),{}),isDefaultExpanded:t.children.some(t=>e[t.key]&&(e[t.key].included.size>0||e[t.key].excluded.size>0)||v(t.key)),chartConfig:i,isLive:l},t.key)),n.map(t=>{var n;return(0,r.jsx)(eD,{"data-testid":`filter-group-${t.key}`,name:(n=t.key).startsWith("toString")?n.slice(9,n.length-1).split(".").map(e=>e.startsWith("`")&&e.endsWith("`")?e.slice(1,-1):e).join("."):n,options:t.value.map(e=>({value:e,label:e.toString()})),optionsLoading:J,selectedValues:e[t.key]?e[t.key]:{included:new Set,excluded:new Set},onChange:e=>{p(t.key,e)},onClearClick:()=>s(t.key),onOnlyClick:e=>{p(t.key,e,"only")},onExcludeClick:e=>{p(t.key,e,"exclude")},onPinClick:e=>g(t.key,e),isPinned:e=>y(t.key,e),onFieldPinClick:()=>f(t.key),isFieldPinned:v(t.key),onLoadMore:er,loadMoreLoading:ee.has(t.key),hasLoadedMore:!!U[t.key],isDefaultExpanded:eP(O,t.key)||v(t.key)||e[t.key]&&(e[t.key].included.size>0||e[t.key].excluded.size>0||null!=e[t.key].range),chartConfig:i,isLive:l,onRangeChange:e=>x(t.key,e)},t.key)})]})})(),(0,r.jsx)(C.$,{variant:"secondary",size:"compact-xs",loading:K,rightSection:F?(0,r.jsx)(ep.A,{size:14}):(0,r.jsx)(eb.A,{size:14}),onClick:()=>B(!F),children:F?"Less filters":"More filters"}),F&&(0,r.jsxs)("div",{children:[(0,r.jsx)(_.E,{size:"xs",fw:"bold",children:"Not seeing a filter?"}),(0,r.jsx)(_.E,{size:"xxs",children:"Try searching instead (e.g. column:foo)"})]})]})})]})});function eF(){}var eV=s(40228),eB=s(68344),eW=s(71781),eH=s(64501),eq=s(5653),eX=s(90993),eY=s(90586);function eJ(e){let t,s,a,l,i,o,c,d=(0,n.c)(11),{onClickDeleteSavedSearch:u,onClickRenameSavedSearch:m}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t={flexShrink:0},d[0]=t):t=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(S.W.Target,{children:(0,r.jsx)(w.M,{variant:"secondary",style:t,size:"input-xs",children:(0,r.jsx)(eq.A,{size:14})})}),d[1]=s):s=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(eX.A,{size:16}),d[2]=a):a=d[2],d[3]!==u?(l=(0,r.jsx)(S.W.Item,{leftSection:a,onClick:u,children:"Delete Saved Search"}),d[3]=u,d[4]=l):l=d[4],d[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)(eY.A,{size:16}),d[5]=i):i=d[5],d[6]!==m?(o=(0,r.jsx)(S.W.Item,{leftSection:i,onClick:m,children:"Rename Saved Search"}),d[6]=m,d[7]=o):o=d[7],d[8]!==l||d[9]!==o?(c=(0,r.jsxs)(S.W,{width:250,children:[s,(0,r.jsxs)(S.W.Dropdown,{children:[l,o]})]}),d[8]=l,d[9]=o,d[10]=c):c=d[10],c}var eK=s(4308),eG=s(6876),eZ=s(43152),eU=s(91021);function eQ(e,t,s){let r,a,l,i,o,c,d,u,m=(0,n.c)(25);m[0]!==s?(r=void 0===s?{}:s,m[0]=s,m[1]=r):r=m[1];let{disableQueryChunking:h,enableParallelQueries:x}=r;m[2]!==e?(a=(0,eZ.O7)(e),m[2]=e,m[3]=a):a=m[3];let p=a,{data:g,isLoading:f}=eG.Ay.useMe(),b=g?.team?.parallelizeWhenPossible;m[4]!==h||m[5]!==x||m[6]!==b?(l={disableQueryChunking:h,enableParallelQueries:x,parallelizeWhenPossible:b},m[4]=h,m[5]=x,m[6]=b,m[7]=l):l=m[7],m[8]!==p||m[9]!==t||m[10]!==l?(i=[t,p,"chunked",l],m[8]=p,m[9]=t,m[10]=l,m[11]=i):i=m[11];let v=!f;m[12]!==i||m[13]!==v?(o={queryKey:i,staleTime:3e5,refetchOnWindowFocus:!1,placeholderData:eK.rX,enableQueryChunking:!0,enabled:v},m[12]=i,m[13]=v,m[14]=o):o=m[14];let{data:j,isLoading:S,isError:w}=(0,eU.HD)(p,o),_=!!j?.isComplete,E=j?.meta;if(m[15]!==E)c=!E||E.find(e=>"count()"===e.name)?"count()":(0,y.P1)(E,[y.A2.Number])?.[0].name??"count()",m[15]=E,m[16]=c;else c=m[16];let C=c;m[17]!==C||m[18]!==j?.data?(d=j?.data?.reduce((e,t)=>e+Number.parseInt(t[C]),0),m[17]=C,m[18]=j?.data,m[19]=d):d=m[19];let k=d;return m[20]!==w||m[21]!==S||m[22]!==_||m[23]!==k?(u={totalCount:k,isLoading:S,isError:w,isTotalCountComplete:_},m[20]=w,m[21]=S,m[22]=_,m[23]=k,m[24]=u):u=m[24],u}function e0(e){let t,s,a,l=(0,n.c)(9),{config:i,queryKeyPrefix:o,disableQueryChunking:c,enableParallelQueries:d}=e;l[0]!==c||l[1]!==d?(t={disableQueryChunking:c,enableParallelQueries:d},l[0]=c,l[1]=d,l[2]=t):t=l[2];let{totalCount:u,isLoading:m,isError:h}=eQ(i,o,t);return l[3]!==h||l[4]!==m||l[5]!==u?(s=m?(0,r.jsx)("span",{className:"effect-pulse",children:"\xb7\xb7\xb7 Results"}):null===u||h?"0 Results":`${u?.toLocaleString()} Results`,l[3]=h,l[4]=m,l[5]=u,l[6]=s):s=l[6],l[7]!==s?(a=(0,r.jsx)(_.E,{size:"xs",mb:4,children:s}),l[7]=s,l[8]=a):a=l[8],a}var e1=s(24314),e2=s(57478),e3=s(64467),e5=s(85014),e4=s(58153),e6=s(26814),e7=s(8989),e8=s(70727),e9=s(56514),te=s(87095),tt=s(43370),ts=s(36600),tr=s(387),tn=s(88339),ta=s(75359),tl=s(46061),ti=s(31451),to=s(10174),tc=s(50374),td=s(35729),tu=s(26674),tm=s(66773),th=s.n(tm);function tx(e){let t,s,l,i,o,c,d,u,m,h,x,p,g,f,b,v,j,S,w,E,C,A,T,$,z=(0,n.c)(55),{isOpen:L,onClose:I,pattern:M,bodyValueExpression:R,source:D}=e,P=(0,tu.Y)()+100,[O,F]=a.useState(null),V=D?.serviceNameExpression||"Service";z[0]===Symbol.for("react.memo_cache_sentinel")?(t=[ti.vN,{_type:y.A2.Date}],z[0]=t):t=z[0],z[1]===Symbol.for("react.memo_cache_sentinel")?(s=[ti.xj,{_type:y.A2.String}],z[1]=s):s=z[1],z[2]===Symbol.for("react.memo_cache_sentinel")?(l=[ti.Q$,{_type:y.A2.String}],z[2]=l):l=z[2],z[3]===Symbol.for("react.memo_cache_sentinel")?(i={_type:y.A2.String},z[3]=i):i=z[3],z[4]!==V?(o=new Map([t,s,l,[V,i]]),z[4]=V,z[5]=o):o=z[5];let B=o;z[6]!==V?(c={[ti.vN]:"Timestamp",[V]:"Service",[ti.Q$]:"level",[ti.xj]:"Body"},z[6]=V,z[7]=c):c=z[7];let W=c;z[8]!==V?(d=[ti.vN,V,ti.Q$,ti.xj],z[8]=V,z[9]=d):d=z[9];let H=d;z[10]===Symbol.for("react.memo_cache_sentinel")?(u=[{name:"body",type:"String"},{name:"ts",type:"DateTime64(9)"}],z[10]=u):u=z[10],z[11]!==D.timestampValueExpression?(m=(0,e_.AF)(D.timestampValueExpression),z[11]=D.timestampValueExpression,z[12]=m):m=z[12],z[13]!==R||z[14]!==m?(h={meta:u,aliasMap:{body:R,ts:m}},z[13]=R,z[14]=m,z[15]=h):h=z[15];let q=(0,e8.Ay)(h);z[16]!==q?(x=e=>{F(q({body:e[ti.xj],ts:e[ti.vN]}))},z[16]=q,z[17]=x):x=z[17];let X=x;z[18]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{F(null)},z[18]=p):p=z[18];let Y=p,J=O?Y:I;z[19]===Symbol.for("react.memo_cache_sentinel")?(g={body:{padding:0}},z[19]=g):g=z[19];let K=O?Y:I;return z[20]!==K?(f=(0,r.jsx)(td.B,{header:"Pattern",onClose:K}),z[20]=K,z[21]=f):f=z[21],z[22]!==M.pattern?(b=(0,r.jsx)(k.Z,{p:"md",children:(0,r.jsx)(_.E,{size:"sm",children:M.pattern})}),z[22]=M.pattern,z[23]=b):b=z[23],z[24]!==M.count?(v=M.count?.toLocaleString(),z[24]=M.count,z[25]=v):v=z[25],z[26]!==v?(j=(0,r.jsxs)(k.Z.Section,{p:"md",py:"xs",children:["~",v," Sample Events"]}),z[26]=v,z[27]=j):j=z[27],z[28]!==W||z[29]!==B||z[30]!==H||z[31]!==X||z[32]!==M.samples?(S=(0,r.jsx)(tl.Ho,{rows:M.samples,generateRowId:tp,displayedColumns:H,columnTypeMap:B,columnNameMap:W,onRowDetailsClick:X,wrapLines:!1,showExpandButton:!1,isLive:!1}),z[28]=W,z[29]=B,z[30]=H,z[31]=X,z[32]=M.samples,z[33]=S):S=z[33],z[34]!==j||z[35]!==S?(w=(0,r.jsxs)(k.Z,{p:"md",children:[j,S]}),z[34]=j,z[35]=S,z[36]=w):w=z[36],z[37]!==b||z[38]!==w?(E=(0,r.jsx)(td.y,{children:(0,r.jsxs)(N.B,{children:[b,w]})}),z[37]=b,z[38]=w,z[39]=E):E=z[39],z[40]!==O||z[41]!==D?(C=O&&(0,r.jsx)(tc.A,{source:D,rowId:O.where,aliasWith:O.aliasWith,onClose:Y,isNestedPanel:!0,breadcrumbPath:[{label:"Pattern Overview"}]}),z[40]=O,z[41]=D,z[42]=C):C=z[42],z[43]!==f||z[44]!==E||z[45]!==C?(A=(0,r.jsxs)("div",{className:th().panel,children:[f,E,C]}),z[43]=f,z[44]=E,z[45]=C,z[46]=A):A=z[46],z[47]!==P||z[48]!==A?(T=(0,r.jsx)(tu.S.Provider,{value:P,children:A}),z[47]=P,z[48]=A,z[49]=T):T=z[49],z[50]!==P||z[51]!==L||z[52]!==J||z[53]!==T?($=(0,r.jsx)(to._,{opened:L,onClose:J,position:"right",size:"70vw",withCloseButton:!1,zIndex:P,styles:g,children:T}),z[50]=P,z[51]=L,z[52]=J,z[53]=T,z[54]=$):$=z[54],$}function tp(e){return{where:e.id,aliasWith:[]}}let tg=new Map;function tf(e){let t,s,l,i,o,c,d,u,m,h=(0,n.c)(24),{config:x,totalCountConfig:p,totalCountQueryKeyPrefix:g,bodyValueExpression:f,source:y}=e,[b,v]=(0,a.useState)(null),{totalCount:j,isLoading:S,isTotalCountComplete:w}=eQ(p,g),_=y?.severityTextExpression??"",E=y?.statusCodeExpression??"";h[0]!==f||h[1]!==x||h[2]!==_||h[3]!==E||h[4]!==j?(t={config:x,samples:1e4,bodyValueExpression:f,severityTextExpression:_,statusCodeExpression:E,totalCount:j},h[0]=f,h[1]=x,h[2]=_,h[3]=E,h[4]=j,h[5]=t):t=h[5];let{data:C,isLoading:k,patternQueryConfig:N}=(0,ti.nt)(t),A=S||!w||k;h[6]!==C?(s=Object.values(C).sort(tv),h[6]=C,h[7]=s):s=h[7];let T=s;return h[8]!==T?(l=T??[],h[8]=T,h[9]=l):l=h[9],h[10]===Symbol.for("react.memo_cache_sentinel")?(i=["__hdx_pattern_trend","countStr","severityText","pattern"],o=e=>v(e),h[10]=i,h[11]=o):(i=h[10],o=h[11]),h[12]===Symbol.for("react.memo_cache_sentinel")?(c={__hdx_pattern_trend:"Trend",countStr:"Count",pattern:"Pattern",severityText:"Level"},h[12]=c):c=h[12],h[13]!==A||h[14]!==N||h[15]!==l?(d=(0,r.jsx)(tl.Ho,{isLive:!1,wrapLines:!0,isLoading:A,rows:l,displayedColumns:i,onRowDetailsClick:o,hasNextPage:!1,fetchNextPage:tb,highlightedLineId:"",columnTypeMap:tg,generateRowId:ty,columnNameMap:c,config:N,showExpandButton:!1}),h[13]=A,h[14]=N,h[15]=l,h[16]=d):d=h[16],h[17]!==f||h[18]!==b||h[19]!==y?(u=b&&y&&(0,r.jsx)(tx,{isOpen:!0,source:y,pattern:b,bodyValueExpression:f,onClose:()=>v(null)}),h[17]=f,h[18]=b,h[19]=y,h[20]=u):u=h[20],h[21]!==u||h[22]!==d?(m=(0,r.jsxs)(r.Fragment,{children:[d,u]}),h[21]=u,h[22]=d,h[23]=m):m=h[23],m}function ty(e){return{where:e.id,aliasWith:[]}}function tb(){}function tv(e,t){return t.count-e.count}var tj=s(7913),tS=s(2893),tw=s(47122),t_=s(31292),tE=s(14693),tC=s(40684),tk=s(92205),tN=s(83171),tA=s(78482),tT=s(43736),t$=s.n(tT);function tz(e){let t={};return!function e(s,r){if(Object(s)!==s)t[r]=s;else if(Array.isArray(s)){let n;for(let t=0,n=s.length;t<n;t++)e(s[t],r+"["+t+"]");0==n&&(t[r]=[])}else{let n=!0;for(let t in s)n=!1,e(s[t],r?r+"."+t:t);n&&r&&(t[r]={})}}(e,""),t}function tL(e){let t=e.map(tz),s=new Map,r=new Set;t.forEach(e=>{Object.entries(e).forEach(([e,t])=>{let n=s.get(e)||0;s.set(e,n+1),n+1>=5&&r.add(e)})});let n=new Map;t.forEach(e=>{Object.entries(e).forEach(([e,t])=>{if(r.has(e)){let s=n.get(e);s||(s=new Map,n.set(e,s));let r=s.get(t)||0;s.set(t,r+1)}})});let a=new Map;return n.forEach((e,t)=>{let r=new Map;e.forEach((e,n)=>{r.set(n,e/(s.get(t)??0)*100)}),a.set(t,r)}),{percentageOccurences:a}}function tI(e,t){let s=[];return Array.from(new Set([...e.keys(),...t.keys()])).sort().forEach(r=>{let n=e.get(r)||0,a=t.get(r)||0;s.push({name:r,outlierCount:n,inlierCount:a})}),s}let tM=(0,tj.withErrorBoundary)((0,a.memo)(e=>{let t=(0,n.c)(12),{active:s,payload:a,label:l,title:i}=e;if(s&&a&&a.length){let e,s,n,o,c;return t[0]!==i?(e=i&&(0,r.jsx)(_.E,{size:"xs",mb:"xs",children:i}),t[0]=i,t[1]=e):e=t[1],t[2]!==l?(s=0===l.length?(0,r.jsx)("i",{children:"Empty String"}):l,t[2]=l,t[3]=s):s=t[3],t[4]!==s?(n=(0,r.jsx)(_.E,{size:"xs",mb:"xs",children:s}),t[4]=s,t[5]=n):n=t[5],t[6]!==a?(o=a.sort(tF).map(tV),t[6]=a,t[7]=o):o=t[7],t[8]!==e||t[9]!==n||t[10]!==o?(c=(0,r.jsx)("div",{className:t$().chartTooltip,children:(0,r.jsxs)("div",{className:t$().chartTooltipContent,children:[e,n,o]})}),t[8]=e,t[9]=n,t[10]=o,t[11]=c):c=t[11],c}return null}),{onError:console.error,fallback:(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-8 font-monospace bg-danger-transparent",children:"An error occurred while rendering the tooltip."})});function tR(e){let t,s,a,l,i,o,c,d,u,m,h,x,p,g,f,y=(0,n.c)(26),{name:b,outlierValueOccurences:v,inlierValueOccurences:j}=e;y[0]!==j||y[1]!==v?(t=tI(v,j),y[0]=j,y[1]=v,y[2]=t):t=y[2];let S=t;return y[3]===Symbol.for("react.memo_cache_sentinel")?(s={width:340,height:120},y[3]=s):s=y[3],y[4]!==b?(a=(0,eE.kU)(b,32),y[4]=b,y[5]=a):a=y[5],y[6]!==b||y[7]!==a?(l=(0,r.jsx)(_.E,{size:"xs",ta:"center",title:b,children:a}),y[6]=b,y[7]=a,y[8]=l):l=y[8],y[9]===Symbol.for("react.memo_cache_sentinel")?(i={top:0,right:0,left:0,bottom:0},y[9]=i):i=y[9],y[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(tS.W,{dataKey:"name",tick:{fontSize:10,fontFamily:"IBM Plex Mono, monospace"}}),y[10]=o):o=y[10],y[11]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(tw.h,{tick:{fontSize:11,fontFamily:"IBM Plex Mono, monospace"}}),y[11]=c):c=y[11],y[12]===Symbol.for("react.memo_cache_sentinel")?(d={zIndex:1e3},y[12]=d):d=y[12],y[13]!==b?(u=(0,r.jsx)(tM,{title:b}),y[13]=b,y[14]=u):u=y[14],y[15]===Symbol.for("react.memo_cache_sentinel")?(m={y:!0},y[15]=m):m=y[15],y[16]!==u?(h=(0,r.jsx)(t_.m,{wrapperStyle:d,content:u,allowEscapeViewBox:m}),y[16]=u,y[17]=h):h=y[17],y[18]===Symbol.for("react.memo_cache_sentinel")?(x=(0,r.jsx)(tE.y,{dataKey:"outlierCount",name:"Outliers",fill:(0,eE.cM)(),isAnimationActive:!1}),y[18]=x):x=y[18],y[19]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(tE.y,{dataKey:"inlierCount",name:"Inliers",fill:(0,eE.V9)(),isAnimationActive:!1}),y[19]=p):p=y[19],y[20]!==S||y[21]!==h?(g=(0,r.jsx)(tC.u,{width:"100%",height:"100%",children:(0,r.jsxs)(tk.E,{barGap:2,width:500,height:300,data:S,margin:i,children:[o,c,h,x,p]})}),y[20]=S,y[21]=h,y[22]=g):g=y[22],y[23]!==g||y[24]!==l?(f=(0,r.jsxs)("div",{style:s,children:[l,g]}),y[23]=g,y[24]=l,y[25]=f):f=y[25],f}function tD(e){let t,s,l,i,o,c,d,u,m,h,x,p,g,f=(0,n.c)(41),{config:b,valueExpr:v,xMin:j,xMax:S,yMin:w,yMax:E}=e;f[0]!==v?(t=(0,eZ.eY)(v),f[0]=v,f[1]=t):t=f[1];let C=t,k=(0,e_.AF)(b.timestampValueExpression),N=e=>{let t,s=C?{name:"AggregatedTimestamps",chartConfig:{...b,from:b.from,select:k,filters:[...b.filters??[],{type:"sql",condition:`${k} >= ${j}`},{type:"sql",condition:`${k} <= ${S}`},...b.where?[{type:b.whereLanguage,condition:b.where}]:[]],groupBy:k,having:`(${v}) >= ${w} AND (${v}) <= ${E}`}}:null,r=(t=`${k} >= ${j} AND ${k} <= ${S}`,C||(t+=` AND (${v}) >= ${w} AND (${v}) <= ${E}`),e?t:`NOT (${t})`),n=e?`${k} IN (SELECT ${k} FROM AggregatedTimestamps)`:`${k} NOT IN (SELECT ${k} FROM AggregatedTimestamps)`;return[...s?[s]:[],{name:"PartIds",chartConfig:{...b,select:"tuple(_part, _part_offset)",filters:[...b.filters??[],{type:"sql",condition:r},...C?[{type:"sql",condition:n}]:[]],orderBy:[{ordering:"DESC",valueExpression:"rand()"}],limit:{limit:1e3}}}]},z=e=>{let t=C?e?`${k} >= ${j} AND ${k} <= ${S}`:`NOT (${k} >= ${j} AND ${k} <= ${S})`:e?`(${v}) >= ${w} AND (${v}) <= ${E} AND ${k} >= ${j} AND ${k} <= ${S}`:`NOT ((${v}) >= ${w} AND (${v}) <= ${E} AND ${k} >= ${j} AND ${k} <= ${S})`,s=e?`${k} IN (SELECT ${k} FROM AggregatedTimestamps)`:`${k} NOT IN (SELECT ${k} FROM AggregatedTimestamps)`;return[...b.filters??[],{type:"sql",condition:t},...C?[{type:"sql",condition:s}]:[],{type:"sql",condition:"indexHint((_part, _part_offset) IN PartIds)"}]},{data:L,error:I}=(0,eU.HD)({...b,with:N(!0),select:"*",filters:z(!0),orderBy:[{ordering:"DESC",valueExpression:"rand()"}],limit:{limit:1e3}}),M=N(!1);f[2]!==z?(s=z(!1),f[2]=z,f[3]=s):s=f[3],f[4]===Symbol.for("react.memo_cache_sentinel")?(l=[{ordering:"DESC",valueExpression:"rand()"}],i={limit:1e3},f[4]=l,f[5]=i):(l=f[4],i=f[5]),f[6]!==b||f[7]!==M||f[8]!==s?(o={...b,with:M,select:"*",filters:s,orderBy:l,limit:i},f[6]=b,f[7]=M,f[8]=s,f[9]=o):o=f[9];let{data:R}=(0,eU.HD)(o);if(L?.data,R?.data,f[10]!==R?.data||f[11]!==L?.data){({percentageOccurences:d}=tL(L?.data??[])),{percentageOccurences:c}=tL(R?.data??[]);let e=new Set([...d.keys()]);0===e.size&&(e=new Set([...c.keys()])),u=Array.from(e).map(e=>{let t=c.get(e)??new Map,s=tI(d.get(e)??new Map,t),r=0;return s.forEach(e=>{let t=Math.abs(e.outlierCount-e.inlierCount);t>r&&(r=t)}),[e,r]}).sort(tO).map(tP),f[10]=R?.data,f[11]=L?.data,f[12]=c,f[13]=d,f[14]=u}else c=f[12],d=f[13],u=f[14];let P=u;f[15]!==c||f[16]!==d||f[17]!==P?(m={sortedProperties:P,outlierValueOccurences:d,inlierValueOccurences:c},f[15]=c,f[16]=d,f[17]=P,f[18]=m):m=f[18];let{sortedProperties:O,outlierValueOccurences:F,inlierValueOccurences:V}=m,[B,W]=(0,a.useState)(1);if(I){let e,t,s,n,a,l;return f[19]===Symbol.for("react.memo_cache_sentinel")?(e={overflow:"auto"},f[19]=e):e=f[19],f[20]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(_.E,{my:"sm",size:"sm",children:"Error Message:"}),f[20]=t):t=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(s={whiteSpace:"pre-wrap"},f[21]=s):s=f[21],f[22]!==I.message?(n=(0,r.jsxs)(A.a,{mt:"lg",children:[t,(0,r.jsx)(D.C,{block:!0,style:s,children:I.message})]}),f[22]=I.message,f[23]=n):n=f[23],f[24]!==I?(a=I instanceof y.p1&&(0,r.jsxs)(A.a,{mt:"lg",children:[(0,r.jsx)(_.E,{my:"sm",size:"sm",children:"Original Query:"}),(0,r.jsx)(D.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:(0,r.jsx)(tn.V,{data:I.query,formatData:!0})})]}),f[24]=I,f[25]=a):a=f[25],f[26]!==n||f[27]!==a?(l=(0,r.jsxs)(tN.m,{style:e,children:[n,a]}),f[26]=n,f[27]=a,f[28]=l):l=f[28],l}f[29]===Symbol.for("react.memo_cache_sentinel")?(h={overflow:"auto",height:"100%"},f[29]=h):h=f[29];let H=Math.ceil(O.length/12);return f[30]!==B||f[31]!==H?(x=(0,r.jsx)($.s,{justify:"flex-end",mx:"md",mb:"md",children:(0,r.jsx)(tA.d,{size:"xs",value:B,onChange:W,total:H})}),f[30]=B,f[31]=H,f[32]=x):x=f[32],f[33]!==B||f[34]!==V||f[35]!==F||f[36]!==O?(p=(0,r.jsx)(T.Y,{children:Array.from(O).slice((B-1)*12,12*B).map(e=>(0,r.jsx)(tR,{name:e,outlierValueOccurences:F.get(e)??new Map,inlierValueOccurences:V.get(e)??new Map},e))}),f[33]=B,f[34]=V,f[35]=F,f[36]=O,f[37]=p):p=f[37],f[38]!==x||f[39]!==p?(g=(0,r.jsxs)(A.a,{style:h,children:[x,p]}),f[38]=x,f[39]=p,f[40]=g):g=f[40],g}function tP(e){return e[0]}function tO(e,t){return t[1]-e[1]}function tF(e,t){return t.value-e.value}function tV(e){return(0,r.jsxs)("div",{children:[e.name,": ",e.value.toFixed(2),"%"]},e.dataKey)}var tB=s(1639);let tW=g.Ik({value:g.Yj().trim().min(1),count:g.Yj().trim().optional()});function tH(e){let t,s,l,i,o,c,d,u,m,h,p,g,f,y,v,S=(0,n.c)(42),{chartConfig:w,source:E,isReady:C}=e;S[0]!==E?(t=x.tU.withDefault((0,e_.Dp)(E)),S[0]=E,S[1]=t):t=S[1],S[2]===Symbol.for("react.memo_cache_sentinel")?(s=x.tU.withDefault("count()"),S[2]=s):s=S[2],S[3]!==t?(l={value:t,count:s,xMin:x.YC,xMax:x.YC,yMin:x.YC,yMax:x.YC},S[3]=t,S[4]=l):l=S[4];let[k,N]=(0,x.ab)(l),[T,z]=(0,a.useState)(null);S[5]===Symbol.for("react.memo_cache_sentinel")?(i={overflow:"hidden"},S[5]=i):i=S[5],S[6]!==E?(o=(0,b.VO)(E),S[6]=E,S[7]=o):o=S[7],S[8]!==k.count||S[9]!==k.value?(c={value:k.value,count:k.count},S[8]=k.count,S[9]=k.value,S[10]=c):c=S[10],S[11]!==N?(d=e=>{N({value:e.value,count:e.count})},S[11]=N,S[12]=d):d=S[12],S[13]!==T||S[14]!==o||S[15]!==c||S[16]!==d?(u=(0,r.jsx)(A.a,{mx:"lg",mt:"xs",mb:0,children:(0,r.jsx)(tq,{connection:o,defaultValues:c,parentRef:T,onSubmit:d})}),S[13]=T,S[14]=o,S[15]=c,S[16]=d,S[17]=u):u=S[17],S[18]===Symbol.for("react.memo_cache_sentinel")?(m={minHeight:210,maxHeight:210,width:"100%",position:"relative"},S[18]=m):m=S[18];let L=k.count||void 0;return S[19]!==k.value||S[20]!==L?(h=[{aggFn:"heatmap",valueExpression:k.value,countExpression:L}],S[19]=k.value,S[20]=L,S[21]=h):h=S[21],S[22]!==w||S[23]!==h?(p={...w,select:h,granularity:"auto",displayType:j.t2.Heatmap},S[22]=w,S[23]=h,S[24]=p):p=S[24],S[25]!==N?(g=(e,t,s,r)=>{N({xMin:e,xMax:t,yMin:s,yMax:r})},S[25]=N,S[26]=g):g=S[26],S[27]!==C||S[28]!==p||S[29]!==g?(f=(0,r.jsx)("div",{style:m,children:(0,r.jsx)(tB.A,{config:p,enabled:C,onFilter:g})}),S[27]=C,S[28]=p,S[29]=g,S[30]=f):f=S[30],S[31]!==w||S[32]!==k.value||S[33]!==k.xMax||S[34]!==k.xMin||S[35]!==k.yMax||S[36]!==k.yMin?(y=null!=k.xMin&&null!=k.xMax&&null!=k.yMin&&null!=k.yMax?(0,r.jsx)(tD,{config:{...w,with:void 0},valueExpr:k.value,xMin:k.xMin,xMax:k.xMax,yMin:k.yMin,yMax:k.yMax}):(0,r.jsx)(I.t,{shadow:"xs",p:"xl",h:"100%",children:(0,r.jsx)(M.o,{mih:100,h:"100%",children:(0,r.jsx)(_.E,{size:"sm",children:"Please highlight an outlier range in the heatmap to view the delta chart."})})}),S[31]=w,S[32]=k.value,S[33]=k.xMax,S[34]=k.xMin,S[35]=k.yMax,S[36]=k.yMin,S[37]=y):y=S[37],S[38]!==f||S[39]!==y||S[40]!==u?(v=(0,r.jsxs)($.s,{direction:"column",w:"100%",style:i,ref:z,children:[u,f,y]}),S[38]=f,S[39]=y,S[40]=u,S[41]=v):v=S[41],v}function tq(e){let t,s,a,l,i,o,c,d,u,m,h,x,g,y,b,v=(0,n.c)(36),{connection:j,defaultValues:S,parentRef:_,onSubmit:E}=e;v[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.u)(tW),v[0]=t):t=v[0],v[1]!==S?(s={resolver:t,defaultValues:S},v[1]=S,v[2]=s):s=v[2];let C=(0,p.mN)(s);v[3]!==C||v[4]!==E?(a=C.handleSubmit(E),v[3]=C,v[4]=E,v[5]=a):a=v[5],v[6]===Symbol.for("react.memo_cache_sentinel")?(l={position:"relative"},v[6]=l):l=v[6],v[7]===Symbol.for("react.memo_cache_sentinel")?(i={flex:1,overflow:"hidden"},v[7]=i):i=v[7];let k=C.control;v[8]!==C||v[9]!==E?(o=C.handleSubmit(E),v[8]=C,v[9]=E,v[10]=o):o=v[10];let N=C.formState.errors.value?.message;v[11]===Symbol.for("react.memo_cache_sentinel")?(c={required:!0},v[11]=c):c=v[11],v[12]!==j||v[13]!==C.control||v[14]!==_||v[15]!==o||v[16]!==N?(d=(0,r.jsx)("div",{style:i,children:(0,r.jsx)(e3.Z,{parentRef:_,tableConnection:j,control:k,name:"value",size:"xs",tooltipText:"Controls the Y axis range and scale — defines the metric plotted vertically.",placeholder:"SQL expression",language:"sql",onSubmit:o,label:"Value",error:N,rules:c})}),v[12]=j,v[13]=C.control,v[14]=_,v[15]=o,v[16]=N,v[17]=d):d=v[17],v[18]===Symbol.for("react.memo_cache_sentinel")?(u={flex:1,overflow:"hidden"},v[18]=u):u=v[18];let A=C.control;v[19]!==C||v[20]!==E?(m=C.handleSubmit(E),v[19]=C,v[20]=E,v[21]=m):m=v[21];let T=C.formState.errors.count?.message;return v[22]===Symbol.for("react.memo_cache_sentinel")?(h={required:!0},v[22]=h):h=v[22],v[23]!==j||v[24]!==C.control||v[25]!==_||v[26]!==m||v[27]!==T?(x=(0,r.jsx)("div",{style:u,children:(0,r.jsx)(e3.Z,{parentRef:_,tableConnection:j,control:A,name:"count",placeholder:"SQL expression",language:"sql",size:"xs",tooltipText:"Controls the color intensity (Z axis) — shows how frequently or strongly each value occurs.",onSubmit:m,label:"Count",error:T,rules:h})}),v[23]=j,v[24]=C.control,v[25]=_,v[26]=m,v[27]=T,v[28]=x):x=v[28],v[29]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)(w.M,{w:"40px",variant:"primary",type:"submit",h:"auto",title:"Run",children:(0,r.jsx)(q.A,{})}),v[29]=g):g=v[29],v[30]!==d||v[31]!==x?(y=(0,r.jsxs)($.s,{m:"0",mb:"xs",align:"stretch",gap:"xs",children:[d,x,g]}),v[30]=d,v[31]=x,v[32]=y):y=v[32],v[33]!==y||v[34]!==a?(b=(0,r.jsx)("form",{onSubmit:a,style:l,children:y}),v[33]=y,v[34]=a,v[35]=b):b=v[35],b}var tX=s(86761),tY=s(13759);class tJ{detect(e){let t=!1,s=!1;for(let r of e)if("'"===r)s?s=!1:t=!t;else if('"'===r){if(t)continue;return!0}else"\\"===r&&(s=!0);return!1}userMessage(e){return`ClickHouse does not support double quotes (") but they were detected in ${e.toUpperCase()}. Switch to single quotes?`}correct(e){let t=!1,s="",r=!1;for(let n=0;n<e.length;n++)switch(e[n]){case"'":r?t=!t:r=!1,s+=e[n];break;case'"':s+=t?'"':"'";break;case"\\":r=!0,s+=e[n];break;default:s+=e[n]}return s}}let tK=[new tJ];var tG=s(17978),tZ=s(93108),tU=s(69580),tQ=s(39603),t0=s(61982),t1=s(32963),t2=s(9841),t3=s(93251),t5=s(12869),t4=s(26932);let t6=e=>{let t,s,a,l,i,o,c,d,u=(0,n.c)(31),{source:m,where:h,whereLanguage:x,interval:p,groupBy:g,threshold:f,thresholdType:y,select:b}=e,v=(b&&b.trim().length>0?b:m.defaultTableSelectExpression)??"",j=h||"",S=x||void 0;u[0]!==v||u[1]!==m.connection||u[2]!==m.from||u[3]!==j||u[4]!==S?(t={select:v,where:j,connection:m.connection,from:m.from,whereLanguage:S},u[0]=v,u[1]=m.connection,u[2]=m.from,u[3]=j,u[4]=S,u[5]=t):t=u[5];let{data:w}=(0,eU.Kc)(t);u[6]!==w?(s=(0,e8.C2)(w),u[6]=w,u[7]=s):s=u[7];let _=s,E=m.id;u[8]!==f||u[9]!==y?(a=(0,t4.h)({threshold:f,thresholdType:y}),u[8]=f,u[9]=y,u[10]=a):a=u[10];let C=h||"",k=x||void 0;return u[11]!==p?(l=(0,t5.gK)(p),u[11]=p,u[12]=l):l=u[12],u[13]!==p?(i=(0,t5.lT)(p),u[13]=p,u[14]=i):i=u[14],u[15]===Symbol.for("react.memo_cache_sentinel")?(o=[{aggFn:"count",aggCondition:"",aggConditionLanguage:"sql",valueExpression:""}],u[15]=o):o=u[15],u[16]!==_||u[17]!==g||u[18]!==m.connection||u[19]!==m.from||u[20]!==m.implicitColumnExpression||u[21]!==m.timestampValueExpression||u[22]!==i||u[23]!==C||u[24]!==k||u[25]!==l?(c={where:C,whereLanguage:k,dateRange:l,granularity:i,implicitColumnExpression:m.implicitColumnExpression,groupBy:g,with:_,select:o,timestampValueExpression:m.timestampValueExpression,from:m.from,connection:m.connection},u[16]=_,u[17]=g,u[18]=m.connection,u[19]=m.from,u[20]=m.implicitColumnExpression,u[21]=m.timestampValueExpression,u[22]=i,u[23]=C,u[24]=k,u[25]=l,u[26]=c):c=u[26],u[27]!==m.id||u[28]!==c||u[29]!==a?(d=(0,r.jsx)(I.t,{w:"100%",h:200,children:(0,r.jsx)(eV.S,{sourceId:E,showDisplaySwitcher:!1,showMVOptimizationIndicator:!1,showDateRangeIndicator:!1,referenceLines:a,config:c})}),u[27]=m.id,u[28]=c,u[29]=a,u[30]=d):d=u[30],d};var t7=s(17513);let t8=g.Ik({interval:j.lZ,threshold:g.ai().int().min(1),thresholdType:g.fc(j.qQ),channel:j.Oq}).passthrough(),t9=e=>{let t,s,a,l,i,o,c,d,u,m,h,x,g,y,v,S,w,E,k,A,$,z,L,M,R,D,P,O,F,V,B,W,H,q,X,Y,J,K,G,Z,U,Q,ee=(0,n.c)(98),{sourceId:et,where:es,whereLanguage:en,select:ea,defaultValues:el,loading:ei,deleteLoading:eo,hasSavedSearch:ec,onDelete:ed,onSubmit:eu,onClose:em}=e;ee[0]!==et?(t={id:et},ee[0]=et,ee[1]=t):t=ee[1];let{data:eh}=(0,e_.Fo)(t);ee[2]!==el?(s=el||{interval:"5m",threshold:1,thresholdType:j.qQ.ABOVE,source:j.w5.SAVED_SEARCH,channel:{type:"webhook",webhookId:""}},ee[2]=el,ee[3]=s):s=ee[3],ee[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,f.u)(t8),ee[4]=a):a=ee[4],ee[5]!==s?(l={defaultValues:s,resolver:a},ee[5]=s,ee[6]=l):l=ee[6];let{control:ex,handleSubmit:ep}=(0,p.mN)(l);ee[7]!==ex?(i={control:ex,name:"groupBy"},ee[7]=ex,ee[8]=i):i=ee[8];let eg=(0,p.FH)(i);ee[9]!==ex?(o={control:ex,name:"thresholdType"},ee[9]=ex,ee[10]=o):o=ee[10];let ef=(0,p.FH)(o);ee[11]!==ex?(c={control:ex,name:"channel.type"},ee[11]=ex,ee[12]=c):c=ee[12];let ey=(0,p.FH)(c);ee[13]!==ex?(d={control:ex,name:"interval"},ee[13]=ex,ee[14]=d):d=ee[14];let eb=(0,p.FH)(d);ee[15]!==ex?(u={control:ex,name:"groupBy"},ee[15]=ex,ee[16]=u):u=ee[16];let ev=(0,p.FH)(u);ee[17]!==ex?(m={control:ex,name:"threshold"},ee[17]=ex,ee[18]=m):m=ee[18];let ej=(0,p.FH)(m);ee[19]!==ep||ee[20]!==eu?(h=ep(eu),ee[19]=ep,ee[20]=eu,ee[21]=h):h=ee[21],ee[22]===Symbol.for("react.memo_cache_sentinel")?(x=(0,r.jsx)(_.E,{size:"xxs",opacity:.5,children:"Trigger"}),ee[22]=x):x=ee[22],ee[23]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)(_.E,{size:"sm",opacity:.7,children:"Alert when"}),ee[23]=g):g=ee[23],ee[24]===Symbol.for("react.memo_cache_sentinel")?(y=(0,eE.kR)(t5.nq),ee[24]=y):y=ee[24],ee[25]!==ex?(v=(0,r.jsx)(tU.mh,{data:y,size:"xs",name:"thresholdType",control:ex}),S=(0,r.jsx)(tU.Q7,{min:1,size:"xs",w:80,control:ex,name:"threshold"}),ee[25]=ex,ee[26]=v,ee[27]=S):(v=ee[26],S=ee[27]),ee[28]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.jsx)(_.E,{size:"sm",opacity:.7,children:"lines appear within"}),ee[28]=w):w=ee[28],ee[29]===Symbol.for("react.memo_cache_sentinel")?(E=(0,eE.kR)(t5.A8),ee[29]=E):E=ee[29],ee[30]!==ex?(k=(0,r.jsx)(tU.mh,{data:E,size:"xs",name:"interval",control:ex}),ee[30]=ex,ee[31]=k):k=ee[31],ee[32]===Symbol.for("react.memo_cache_sentinel")?(A=(0,r.jsx)(_.E,{size:"sm",opacity:.7,children:"via"}),ee[32]=A):A=ee[32],ee[33]===Symbol.for("react.memo_cache_sentinel")?($=(0,eE.kR)(t5.mo),ee[33]=$):$=ee[33],ee[34]!==ex?(z=(0,r.jsx)(tU.mh,{data:$,size:"xs",name:"channel.type",control:ex}),ee[34]=ex,ee[35]=z):z=ee[35],ee[36]!==v||ee[37]!==S||ee[38]!==k||ee[39]!==z?(L=(0,r.jsxs)(T.Y,{gap:"xs",children:[g,v,S,w,k,A,z]}),ee[36]=v,ee[37]=S,ee[38]=k,ee[39]=z,ee[40]=L):L=ee[40],ee[41]===Symbol.for("react.memo_cache_sentinel")?(M=(0,r.jsx)(_.E,{size:"xxs",opacity:.5,mb:4,mt:"xs",children:"grouped by"}),ee[41]=M):M=ee[41],ee[42]!==eh?(R=(0,b.VO)(eh),ee[42]=eh,ee[43]=R):R=ee[43],ee[44]!==ex||ee[45]!==R?(D=(0,r.jsx)(e3.Z,{tableConnection:R,control:ex,name:"groupBy",placeholder:"SQL Columns",disableKeywordAutocomplete:!0,size:"xs"}),ee[44]=ex,ee[45]=R,ee[46]=D):D=ee[46],ee[47]!==L||ee[48]!==D?(P=(0,r.jsxs)(I.t,{px:"md",py:"sm",radius:"xs",children:[x,L,M,D]}),ee[47]=L,ee[48]=D,ee[49]=P):P=ee[49],ee[50]===Symbol.for("react.memo_cache_sentinel")?(O=(0,r.jsx)(_.E,{size:"xxs",opacity:.5,mb:4,children:"Send to"}),ee[50]=O):O=ee[50],ee[51]!==ey||ee[52]!==ex?(F=(0,r.jsxs)(I.t,{px:"md",py:"sm",radius:"xs",children:[O,(0,r.jsx)(t4.e,{control:ex,type:ey})]}),ee[51]=ey,ee[52]=ex,ee[53]=F):F=ee[53],ee[54]!==eg||ee[55]!==ef?(V=eg&&ef===j.qQ.BELOW&&(0,r.jsx)(tQ.F,{icon:(0,r.jsx)(t1.A,{size:16}),bg:"dark",py:"xs",children:(0,r.jsx)(_.E,{size:"sm",opacity:.7,children:'Warning: Alerts with a "Below (<)" threshold and a "grouped by" value will not alert for periods with no data for a group.'})}),ee[54]=eg,ee[55]=ef,ee[56]=V):V=ee[56],ee[57]!==P||ee[58]!==F||ee[59]!==V?(B=(0,r.jsxs)(N.B,{gap:"xs",children:[P,F,V]}),ee[57]=P,ee[58]=F,ee[59]=V,ee[60]=B):B=ee[60],ee[61]===Symbol.for("react.memo_cache_sentinel")?(W=(0,r.jsx)(er.n.Control,{icon:(0,r.jsx)(t2.A,{size:16}),children:(0,r.jsx)(_.E,{size:"sm",children:"Threshold chart"})}),ee[61]=W):W=ee[61],ee[62]!==ev||ee[63]!==eb||ee[64]!==ea||ee[65]!==eh||ee[66]!==ej||ee[67]!==ef||ee[68]!==es||ee[69]!==en?(H=eh&&(0,r.jsx)(t6,{source:eh,where:es,whereLanguage:en,select:ea,interval:eb,groupBy:ev,threshold:ej,thresholdType:ef}),ee[62]=ev,ee[63]=eb,ee[64]=ea,ee[65]=eh,ee[66]=ej,ee[67]=ef,ee[68]=es,ee[69]=en,ee[70]=H):H=ee[70],ee[71]!==H?(q=(0,r.jsx)(er.n,{defaultValue:"chart",mt:"sm",mx:-16,children:(0,r.jsxs)(er.n.Item,{value:"chart",children:[W,(0,r.jsx)(er.n.Panel,{children:H})]})}),ee[71]=H,ee[72]=q):q=ee[72],ee[73]!==el?(X=el?.createdBy&&(0,r.jsxs)(I.t,{px:"md",py:"sm",radius:"xs",mt:"sm",children:[(0,r.jsx)(_.E,{size:"xxs",opacity:.5,mb:4,children:"Created by"}),(0,r.jsx)(_.E,{size:"sm",opacity:.8,children:el.createdBy.name||el.createdBy.email}),el.createdBy.name&&(0,r.jsx)(_.E,{size:"xs",opacity:.6,children:el.createdBy.email})]}),ee[73]=el,ee[74]=X):X=ee[74],ee[75]!==el||ee[76]!==eo||ee[77]!==ed?(Y=el&&(0,r.jsx)(C.$,{variant:"subtle",color:"red",size:"compact-sm",onClick:()=>ed(el.id),loading:eo,children:"Delete Alert"}),ee[75]=el,ee[76]=eo,ee[77]=ed,ee[78]=Y):Y=ee[78],ee[79]!==Y?(J=(0,r.jsx)("div",{children:Y}),ee[79]=Y,ee[80]=J):J=ee[80],ee[81]!==em?(K=(0,r.jsx)(C.$,{variant:"secondary",onClick:em,children:"Cancel"}),ee[81]=em,ee[82]=K):K=ee[82];let eS=el?"Save Alert":ec?"Create Alert":"Save Search with Alert";return ee[83]!==ei||ee[84]!==eS?(G=(0,r.jsx)(C.$,{variant:"primary",type:"submit",loading:ei,children:eS}),ee[83]=ei,ee[84]=eS,ee[85]=G):G=ee[85],ee[86]!==K||ee[87]!==G?(Z=(0,r.jsxs)(T.Y,{gap:"xs",children:[K,G]}),ee[86]=K,ee[87]=G,ee[88]=Z):Z=ee[88],ee[89]!==J||ee[90]!==Z?(U=(0,r.jsxs)(T.Y,{mt:"lg",justify:"space-between",gap:"xs",children:[J,Z]}),ee[89]=J,ee[90]=Z,ee[91]=U):U=ee[91],ee[92]!==h||ee[93]!==B||ee[94]!==q||ee[95]!==X||ee[96]!==U?(Q=(0,r.jsxs)("form",{onSubmit:h,children:[B,q,X,U]}),ee[92]=h,ee[93]=B,ee[94]=q,ee[95]=X,ee[96]=U,ee[97]=Q):Q=ee[97],Q},se=({id:e,searchedConfig:t,onClose:s,open:n})=>{let l=(0,ts.Kh)(),i=(0,t3.jE)(),o=eG.Ay.useCreateAlert(),c=eG.Ay.useUpdateAlert(),d=eG.Ay.useDeleteAlert(),u=(0,te.V3)(),{data:m,isLoading:x}=(0,te.rs)({id:e||""},{enabled:!!e}),[p,g]=a.useState("stage"),[f,y]=a.useState(""),b=async r=>{try{if(!e&&t){if(!f)return void V.$e.show({color:"red",message:"Please provide a name for the saved search.",autoClose:5e3});let e=await u.mutateAsync({name:f,select:t.select??"",where:t.where??"",whereLanguage:t.whereLanguage??"lucene",source:t.source??"",orderBy:t.orderBy??"",filters:t.filters??[],tags:[]});await o.mutate({...r,source:j.w5.SAVED_SEARCH,savedSearchId:e.id}),h().push(`/search/${e.id}`),s()}else if(e){if("stage"===p)await o.mutate({...r,source:j.w5.SAVED_SEARCH,savedSearchId:e});else{if(!r.id)return;await c.mutate({...r,id:r.id,source:j.w5.SAVED_SEARCH,savedSearchId:e})}V.$e.show({color:"green",message:`Alert ${"stage"===p?"created":"updated"}!`,autoClose:5e3})}}catch(e){V.$e.show({color:"red",message:`Something went wrong. Please contact ${l} team.`,autoClose:5e3})}i.invalidateQueries({queryKey:["saved-search"]}),s()},v=async e=>{try{await d.mutate(e),V.$e.show({color:"green",message:"Alert deleted!",autoClose:5e3})}catch(e){V.$e.show({color:"red",message:`Something went wrong. Please contact ${l} team.`,autoClose:5e3})}i.invalidateQueries({queryKey:["saved-search"]}),s()};return(0,r.jsx)(E.a,{"data-testid":"alerts-modal",opened:n,onClose:s,size:"xl",withCloseButton:!1,zIndex:9999,children:(0,r.jsxs)(A.a,{pos:"relative",children:[(0,r.jsx)(t0.p,{visible:x,m:-16,zIndex:1e3,overlayProps:{radius:"sm"},loaderProps:{type:"dots"}}),(0,r.jsxs)(N.B,{gap:0,mb:"md",children:[(0,r.jsxs)(T.Y,{children:[(0,r.jsxs)(_.E,{size:"sm",children:["Alerts for ",(0,r.jsx)("strong",{children:m?.name})]}),!e&&(0,r.jsx)(en.k,{size:"xs",placeholder:"Saved search name",value:f,onChange:e=>y(e.currentTarget.value),required:!0})]}),(0,r.jsx)(_.E,{size:"xxs",children:m?.where})]}),(0,r.jsx)(ei.t,{value:p,onChange:e=>{null===e||("stage"===e?g(e):g(`${parseInt(e)}`))},mb:"xs",children:(0,r.jsxs)(ei.t.List,{children:[(m?.alerts||[]).map((e,t)=>(0,r.jsx)(ei.t.Tab,{value:`${t}`,children:(0,r.jsxs)(T.Y,{gap:"xs",children:[(0,t7.WD)(e.channel.type)," Alert ",t+1]})},e.id)),(0,r.jsx)(ei.t.Tab,{value:"stage",children:(0,r.jsxs)(T.Y,{gap:4,children:[(0,r.jsx)(Y.A,{size:18,style:{marginLeft:-8}}),"New Alert"]})})]})}),(0,r.jsx)(t9,{hasSavedSearch:!!m,sourceId:t?.source,where:t?.where,whereLanguage:t?.whereLanguage,select:t?.select,defaultValues:"stage"===p?null:m?.alerts?.[parseInt(p)],onSubmit:b,onDelete:v,deleteLoading:d.isPending,onClose:s,loading:c.isPending||o.isPending},p)]})})},st=[{value:"1000",label:"1s"},{value:"2000",label:"2s"},{value:"4000",label:"4s"},{value:"10000",label:"10s"},{value:"30000",label:"30s"}],ss=[j.GL.Log,j.GL.Trace],sr=g.Ik({select:g.Yj(),source:g.Yj(),where:g.Yj(),whereLanguage:g.k5(["sql","lucene"]),orderBy:g.Yj(),filters:g.YO(g.KC([g.Ik({type:g.eu("sql_ast"),operator:g.k5(["=","<",">",">=","<=","!="]),left:g.Yj(),right:g.Yj()}),g.Ik({type:g.k5(["sql","lucene"]),condition:g.Yj()})]))});function sn(e){let t,s,a,l,i,o,c=(0,n.c)(10),{setModalOpen:d,setModelFormExpanded:m}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(S.W.Target,{children:(0,r.jsx)(w.M,{"data-testid":"source-settings-menu",variant:"subtle",size:"sm",title:"Edit Source",children:(0,r.jsx)(_.E,{size:"xs",children:(0,r.jsx)(B.A,{size:14})})})}),c[0]=t):t=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(S.W.Label,{children:"Sources"}),c[1]=s):s=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(W.A,{size:14}),c[2]=a):a=c[2],c[3]!==d?(l=(0,r.jsx)(S.W.Item,{"data-testid":"create-new-source-menu-item",leftSection:a,onClick:()=>d(!0),children:"Create New Source"}),c[3]=d,c[4]=l):l=c[4],c[5]!==m?(i=ev.VO?(0,r.jsx)(S.W.Item,{"data-testid":"edit-sources-menu-item",leftSection:(0,r.jsx)(B.A,{size:14}),onClick:()=>m(sa),children:"Edit Source"}):(0,r.jsx)(S.W.Item,{"data-testid":"edit-sources-menu-item",leftSection:(0,r.jsx)(B.A,{size:14}),component:u(),href:"/team",children:"Edit Sources"}),c[5]=m,c[6]=i):i=c[6],c[7]!==l||c[8]!==i?(o=(0,r.jsxs)(S.W,{withArrow:!0,position:"bottom-start",children:[t,(0,r.jsxs)(S.W.Dropdown,{children:[s,l,i]})]}),c[7]=l,c[8]=i,c[9]=o):o=c[9],o}function sa(e){return!e}function sl(e){let t,s,a=(0,n.c)(6),{opened:l,onClose:i,inputSource:o}=e;return a[0]!==o?(t=(0,r.jsx)(e1.Eb,{sourceId:o}),a[0]=o,a[1]=t):t=a[1],a[2]!==i||a[3]!==l||a[4]!==t?(s=(0,r.jsx)(E.a,{size:"xl",opened:l,onClose:i,title:"Edit Source",children:t}),a[2]=i,a[3]=l,a[4]=t,a[5]=s):s=a[5],s}function si(e){let t,s,a=(0,n.c)(6),{opened:l,onClose:i,onCreate:o}=e;return a[0]!==o?(t=(0,r.jsx)(e1.Eb,{isNew:!0,defaultName:"My New Source",onCreate:o}),a[0]=o,a[1]=t):t=a[1],a[2]!==i||a[3]!==l||a[4]!==t?(s=(0,r.jsx)(E.a,{size:"xl",opened:l,onClose:i,title:"Configure New Source",children:t}),a[2]=i,a[3]=l,a[4]=t,a[5]=s):s=a[5],s}function so(e){let t,s,a=(0,n.c)(4),{handleResumeLiveTail:l}=e,{themeName:i}=(0,ts.o3)(),o="clickstack"===i?"secondary":"primary";return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(H.A,{size:14}),a[0]=t):t=a[0],a[1]!==l||a[2]!==o?(s=(0,r.jsx)(C.$,{size:"compact-xs",variant:o,onClick:l,leftSection:t,children:"Resume Live Tail"}),a[1]=l,a[2]=o,a[3]=s):s=a[3],s}function sc(e){let t,s,a,l=(0,n.c)(4),{isFormStateDirty:i}=e,o=i?"primary":"secondary";return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(q.A,{size:16}),s={flexShrink:0},l[0]=t,l[1]=s):(t=l[0],s=l[1]),l[2]!==o?(a=(0,r.jsx)(C.$,{"data-testid":"search-submit-button",variant:o,type:"submit",leftSection:t,style:s,children:"Run"}),l[2]=o,l[3]=a):a=l[3],a}function sd(e){let t,s,a,l=(0,n.c)(8),{config:i,enabled:o}=e;l[0]!==o?(t={enabled:o},l[0]=o,l[1]=t):t=l[1];let{data:c,isLoading:d,error:u}=(0,e7.R)(i,t);if(!o)return null;let m=c?.[0]?.rows;return l[2]!==u||l[3]!==d||l[4]!==m?(s=d?"Scanned Rows ...":u||!m?"":`Scanned Rows: ${Number.parseInt(m)?.toLocaleString()}`,l[2]=u,l[3]=d,l[4]=m,l[5]=s):s=l[5],l[6]!==s?(a=(0,r.jsx)(_.E,{size:"xs",mb:4,children:s}),l[6]=s,l[7]=a):a=l[7],a}function su(e,t){return(0,r.jsx)(_.E,{size:"xs",c:"dimmed",children:"sql_ast"===e.type?`${e.left} ${e.operator} ${e.right}`:e.condition},t)}function sm(e){return!!(e&&e.trim().length>0)}let sh=(0,a.memo)(function(e){let t,s,l,i,o,c,d,u,m,x,g,f,y,b,v,j,S,$,z,L,I,M,R,D=(0,n.c)(58),{searchedConfig:P,opened:O,onClose:F,isUpdate:V,savedSearchId:B}=e,W=B??"";D[0]!==W?(t={id:W},D[0]=W,D[1]=t):t=D[1];let H=null!=B;D[2]!==H?(s={enabled:H},D[2]=H,D[3]=s):s=D[3];let{data:q}=(0,te.rs)(t,s);D[4]!==V||D[5]!==q?.name?(l=V?{values:{name:q?.name??""}}:{},D[4]=V,D[5]=q?.name,D[6]=l):l=D[6],D[7]===Symbol.for("react.memo_cache_sentinel")?(i={keepDirtyValues:!0,keepErrors:!0},D[7]=i):i=D[7],D[8]!==l?(o={...l,resetOptions:i},D[8]=l,D[9]=o):o=D[9];let{control:J,handleSubmit:K,formState:G,reset:Z}=(0,p.mN)(o);D[10]!==F||D[11]!==Z?(c=()=>{Z(),F()},D[10]=F,D[11]=Z,D[12]=c):c=D[12];let U=c;D[13]!==q?.tags?(d=q?.tags||[],D[13]=q?.tags,D[14]=d):d=D[14];let[Q,ee]=(0,a.useState)(d);D[15]!==q?(u=()=>{q?.tags&&ee(q.tags)},m=[q],D[15]=q,D[16]=u,D[17]=m):(u=D[16],m=D[17]),(0,a.useEffect)(u,m);let et=(0,te.V3)(),es=(0,te.CI)();D[18]!==et||D[19]!==K||D[20]!==V||D[21]!==F||D[22]!==B||D[23]!==P||D[24]!==Q||D[25]!==es?(x=e=>{e.preventDefault(),K(e=>{let{name:t}=e;if(V){if(null==B)throw Error("savedSearchId is required for update");es.mutate({id:B,name:t,select:P.select??"",where:P.where??"",whereLanguage:P.whereLanguage??"lucene",source:P.source??"",orderBy:P.orderBy??"",filters:P.filters??[],tags:Q},{onSuccess:()=>{F()}})}else et.mutate({name:t,select:P.select??"",where:P.where??"",whereLanguage:P.whereLanguage??"lucene",source:P.source??"",orderBy:P.orderBy??"",filters:P.filters??[],tags:Q},{onSuccess:e=>{h().push(`/search/${e.id}${window.location.search}`),F()}})})()},D[18]=et,D[19]=K,D[20]=V,D[21]=F,D[22]=B,D[23]=P,D[24]=Q,D[25]=es,D[26]=x):x=D[26];let er=x,{data:en}=sp(P);D[27]!==en||D[28]!==P?(g=null!=en?(0,r.jsxs)(k.Z,{withBorder:!0,children:[(0,r.jsx)(_.E,{size:"xs",mb:"xs",children:"SELECT"}),(0,r.jsx)(_.E,{mb:"sm",size:"xs",children:`${en.select}`}),(0,r.jsx)(_.E,{size:"xs",mb:"xs",children:"FROM"}),(0,r.jsxs)(_.E,{mb:"sm",size:"xs",children:[en?.from.databaseName,".",en?.from.tableName]}),(0,r.jsx)(_.E,{size:"xs",mb:"xs",children:"WHERE"}),en.where?(0,r.jsx)(_.E,{size:"xs",children:en.where}):(0,r.jsx)(_.E,{size:"xxs",fs:"italic",children:"None"}),(0,r.jsx)(_.E,{size:"xs",mb:"xs",mt:"sm",children:"ORDER BY"}),(0,r.jsx)(_.E,{size:"xs",children:en.orderBy}),P.filters&&P.filters.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.E,{size:"xs",mb:"xs",mt:"sm",children:"FILTERS"}),(0,r.jsx)(N.B,{gap:"xs",children:P.filters.map(su)})]})]}):(0,r.jsx)(_.E,{children:"Loading Chart Config..."}),D[27]=en,D[28]=P,D[29]=g):g=D[29],D[30]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)(_.E,{size:"xs",mb:"xs",children:"Name"}),D[30]=f):f=D[30],D[31]===Symbol.for("react.memo_cache_sentinel")?(y={required:!0,validate:sm},D[31]=y):y=D[31],D[32]!==J?(b=(0,r.jsxs)(A.a,{children:[f,(0,r.jsx)(eW.t4,{"data-testid":"save-search-name-input",control:J,name:"name",rules:y})]}),D[32]=J,D[33]=b):b=D[33],D[34]===Symbol.for("react.memo_cache_sentinel")?(v=(0,r.jsx)(_.E,{size:"xs",mb:"xs",children:"Tags"}),D[34]=v):v=D[34],D[35]!==Q?(j=Q.map(e=>(0,r.jsx)(C.$,{variant:"secondary",size:"xs",rightSection:(0,r.jsx)(w.M,{variant:"transparent",color:"gray",onClick:t=>{t.stopPropagation(),ee(Q.filter(t=>t!==e))},size:"xs",children:(0,r.jsx)(X.A,{size:14})}),children:e.toUpperCase()},e)),D[35]=Q,D[36]=j):j=D[36],D[37]===Symbol.for("react.memo_cache_sentinel")?(S=(0,r.jsxs)(C.$,{"data-testid":"add-tag-button",variant:"secondary",size:"xs",children:[(0,r.jsx)(Y.A,{size:14,className:"me-1"}),"Add Tag"]}),D[37]=S):S=D[37],D[38]!==Q?($=(0,r.jsx)(e5.Y,{allowCreate:!0,values:Q,onChange:ee,children:S}),D[38]=Q,D[39]=$):$=D[39],D[40]!==j||D[41]!==$?(z=(0,r.jsxs)(A.a,{mb:"sm",children:[v,(0,r.jsxs)(T.Y,{gap:"xs",align:"center",mb:"xs",children:[j,$]})]}),D[40]=j,D[41]=$,D[42]=z):z=D[42];let ea=!G.isValid,el=V?"Update":"Save";return D[43]!==ea||D[44]!==el?(L=(0,r.jsx)(C.$,{"data-testid":"save-search-submit-button",variant:"primary",type:"submit",disabled:ea,children:el}),D[43]=ea,D[44]=el,D[45]=L):L=D[45],D[46]!==g||D[47]!==b||D[48]!==z||D[49]!==L?(I=(0,r.jsxs)(N.B,{children:[g,b,z,L]}),D[46]=g,D[47]=b,D[48]=z,D[49]=L,D[50]=I):I=D[50],D[51]!==er||D[52]!==I?(M=(0,r.jsx)("form",{"data-testid":"save-search-form",onSubmit:er,children:I}),D[51]=er,D[52]=I,D[53]=M):M=D[53],D[54]!==U||D[55]!==O||D[56]!==M?(R=(0,r.jsx)(E.a,{"data-testid":"save-search-modal",opened:O,onClose:U,title:"Save Search",centered:!0,size:"lg",children:M}),D[54]=U,D[55]=O,D[56]=M,D[57]=R):R=D[57],R}),sx=(0,tr.lr)("Past 15m",!1);function sp(e,t){let s,r,a=(0,n.c)(21),{select:l,source:i,whereLanguage:o,where:c,filters:d,orderBy:u}=e;a[0]!==i?(s={id:i},a[0]=i,a[1]=s):s=a[1];let{data:m,isLoading:h}=(0,e_.Fo)(s),x=sg(i);e:{let e;if(null!=m){let e,s,n,i=l||t?.select||m.defaultTableSelectExpression||"";a[2]!==d||a[3]!==m.tableFilterExpression?(e=null!=m.tableFilterExpression?{filters:[{type:"sql",condition:m.tableFilterExpression},...d??[]]}:{},a[2]=d,a[3]=m.tableFilterExpression,a[4]=e):e=a[4],a[5]!==d?(s=null!=d?{filters:d}:{},a[5]=d,a[6]=s):s=a[6];let h=c??"",p=o??"sql",g=u||t?.orderBy||x;a[7]!==m.connection||a[8]!==m.from||a[9]!==m.id||a[10]!==m.implicitColumnExpression||a[11]!==m.timestampValueExpression||a[12]!==i||a[13]!==e||a[14]!==s||a[15]!==h||a[16]!==p||a[17]!==g?(n={data:{select:i,from:m.from,source:m.id,...e,...s,where:h,whereLanguage:p,timestampValueExpression:m.timestampValueExpression,implicitColumnExpression:m.implicitColumnExpression,connection:m.connection,displayType:j.t2.Search,orderBy:g}},a[7]=m.connection,a[8]=m.from,a[9]=m.id,a[10]=m.implicitColumnExpression,a[11]=m.timestampValueExpression,a[12]=i,a[13]=e,a[14]=s,a[15]=h,a[16]=p,a[17]=g,a[18]=n):n=a[18],r=n;break e}a[19]!==h?(e={data:null,isLoading:h},a[19]=h,a[20]=e):e=a[20],r=e}return r}function sg(e){let t,s,r,a=(0,n.c)(8);a[0]!==e?(t={id:e},a[0]=e,a[1]=t):t=a[1];let{data:l}=(0,e_.Fo)(t);a[2]!==l?(s=(0,b.VO)(l),a[2]=l,a[3]=s):s=a[3];let{data:i}=(0,ej.Z2)(s);e:{let e;if(!l){r=void 0;break e}let t=l?.timestampValueExpression??"",s=l?.displayedTimestampValueExpression,n=i?.sorting_key;a[4]!==t||a[5]!==s||a[6]!==n?(e=function(e,t,s){let r="DESC",n=(0,e_.AF)(e??"")??"",a=[n],l=t?.trim();l&&l!==n&&a.push(l);let i=a.length>1?`(${a.join(", ")}) ${r}`:`${a[0]} ${r}`;if(!s)return i;let o=[],c=(0,v.AB)(s);for(let e=0;e<c.length;e++){let t=c[e];if(t.includes("toStartOf")&&t.includes(n))o.push(t);else if(t===n||t.startsWith("toUnixTimestamp")&&t.includes(n)||t.startsWith("toDateTime")&&t.includes(n))if(0===o.length)return i;else{o.push(t);break}else t===l&&o.push(t)}return 0===o.length?i:(l&&!o.includes(l)&&o.push(l),o.length>1?`(${o.join(", ")}) ${r}`:`${o[0]} ${r}`)}(t,s,n),a[4]=t,a[5]=s,a[6]=n,a[7]=e):e=a[7],r=e}return r}let sf={source:x.tU,where:tG.s,select:tG.s,whereLanguage:(0,x.Oq)(["sql","lucene"]),filters:(0,x.os)(),orderBy:tG.s};function sy(){let e=(0,ts.Kh)(),t=window.location.pathname.split("/"),s=3===t.length?t[2]:null,[l,i]=(0,x.ab)(sf),{data:o}=(0,te.rs)({id:`${s}`},{enabled:null!=s}),{data:d}=(0,e_.oE)(),[u,m]=(0,eE.Mj)("hdx-last-selected-source-id",""),{data:g}=(0,e_.Fo)({id:l.source}),[S,w]=(0,x.ZA)("mode",(0,x.Oq)(["results","delta","pattern"]).withDefault("results")),[E,k]=(0,x.ZA)("isLive",x.cr.withDefault(!0));(0,a.useEffect)(()=>{("delta"===S||"pattern"===S)&&k(!1)},[S,k]);let[N,B]=(0,x.ZA)("denoise",x.cr.withDefault(!1)),W=(0,a.useCallback)(e=>{k(!1),B(e)},[k,B]),H=(0,a.useMemo)(()=>d&&0!==d.length?u&&d.some(e=>e.id===u)?u:d[0].id:"",[d,u]),{control:q,setValue:X,reset:Y,handleSubmit:U,getValues:Q,formState:ee,setError:et,resetField:es}=(0,p.mN)({values:{select:l.select||"",where:l.where||"",whereLanguage:l.whereLanguage??"lucene",source:l.source||H,filters:l.filters??[],orderBy:l.orderBy??""},resetOptions:{keepDirtyValues:!0,keepErrors:!0},resolver:(0,f.u)(sr)}),er=(0,p.FH)({name:"source",control:q}),en=sg(er),ea=(0,a.useMemo)(()=>{let e=o;return s&&o?.id===s||(e=void 0),er!==o?.source&&(e=void 0),{select:e?.select??g?.defaultTableSelectExpression,where:e?.where??"",whereLanguage:e?.whereLanguage??"lucene",source:e?.source,filters:e?.filters??[],orderBy:e?.orderBy||en}},[g,er,o,en,s]),{data:el}=(0,e_.oE)(),ei=el?.find(e=>e.id===er),[eo,ec]=(0,a.useState)("Live Tail"),{isReady:ed,searchedTimeRange:eu,onSearch:em,onTimeRangeSelect:eh}=(0,tr.R0)({initialDisplayValue:"Live Tail",initialTimeRange:sx,showRelativeInterval:E??!0,setDisplayedTimeInputValue:ec,updateInput:!E}),ex=(0,eE.ZC)(l);(0,a.useEffect)(()=>{JSON.stringify(ex)!==JSON.stringify(l)&&Y({select:l?.select??"",where:l?.where??"",whereLanguage:l?.whereLanguage??"lucene",source:l?.source??void 0,filters:l?.filters??[],orderBy:l?.orderBy??""})},[l,Y,ex]),(0,a.useEffect)(()=>{let{source:e,where:t,select:r,whereLanguage:n,filters:a}=l,c=!e&&!t&&!r&&!n&&!a?.length;null!=o&&o.id===s&&c?i({source:o.source,where:o.where,select:o.select,whereLanguage:o.whereLanguage,filters:o.filters??[],orderBy:o.orderBy??""}):null==s&&H&&c&&i({source:H,where:"",select:"",whereLanguage:"lucene",filters:[],orderBy:""})},[o,l,i,s,H,d]);let[ep,eg]=(0,a.useState)({});(0,a.useEffect)(()=>{if(!v.Bd||!ev.VO)return;let e=e=>{e.key===tZ.Gs&&eg({})};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]);let ef=(0,a.useCallback)(()=>{em(eo),U(({select:e,where:t,whereLanguage:s,source:r,filters:n,orderBy:a})=>{i({select:e,where:t,whereLanguage:s,source:r,filters:n,orderBy:a})})(),eg({})},[U,i,eo,em,eg]),ey=(0,O.Y)(ef,1e3),eb=(0,a.useCallback)(e=>{X("filters",e),ey()},[ey,X]),ej=(0,p.FH)({name:"filters",control:q}),eS=(0,ew.Ye)({searchQuery:ej??void 0,onFilterChange:eb}),eC=(0,p.FH)({control:q,name:"source",defaultValue:l.source??void 0}),eN=(0,a.useRef)(eC);(0,a.useEffect)(()=>{if(eC!==eN.current){eN.current=eC;let e=el?.find(e=>e.id===eC);null!=e&&(m(e.id),null==s||o?.source!==eC?(X("select",""),X("orderBy",""),eS.clearAllFilters()):(X("select",o?.select??""),X("orderBy",o?.orderBy??"")))}},[eC,X,o,s,el,eS,m]);let eA=(0,a.useCallback)(e=>{e>16&&E&&k(!1)},[E,k]),eT=(0,a.useCallback)(()=>{k(!1)},[k]),[e$,ez]=(0,a.useState)(!1),[eL,eI]=(0,a.useState)(void 0),{data:eM,isLoading:eR}=sp(l,ea),{hasQueryError:eD,queryError:eP}=(0,a.useMemo)(()=>{let e=Object.values(ep).length>0,t=e?Object.values(ep)[0]:null;return{hasQueryError:e,queryError:t}},[ep]),eF=(0,p.FH)({name:"where",control:q}),eW=(0,p.FH)({name:"whereLanguage",control:q}),eq=function(e){let t,s=(0,n.c)(2),{input:r,enabled:a}=e;e:{let e;if(!a){t=null;break e}if(s[0]!==r){for(let t of(e=[],tK))t.detect(r)&&e.push({userMessage:e=>t.userMessage(e),corrected:()=>t.correct(r)});s[0]=r,s[1]=e}else e=s[1];t=e.length>0?e:null}return t}({input:eF,enabled:eD&&"sql"===eW}),eX=eM?.from?.databaseName&&eM?.from?.tableName&&eM?.timestampValueExpression,eY=(0,te.CI)(),eK=(0,te.c_)(),eZ=(0,a.useCallback)(()=>{null==o?eI("create"):U(e=>{eY.mutate({id:o.id,...e},{onSuccess:()=>{ef()}})})()},[o,eY,ef,U]),eQ=(0,a.useCallback)(e=>{o?.id&&eY.mutate({id:o.id,name:o.name,select:l.select??"",where:l.where??"",whereLanguage:l.whereLanguage??"lucene",source:l.source??"",orderBy:l.orderBy??"",filters:l.filters??[],tags:e},{onSuccess:()=>{V.$e.show({color:"green",message:"Tags updated successfully"})},onError:()=>{V.$e.show({color:"red",message:(0,r.jsxs)(r.Fragment,{children:["An error occurred. ",(0,r.jsx)(Z.z,{})]})})}})},[o,l,eY]),[e1,e7]=(0,a.useState)(!1),e9="search",tl=(0,K.C)({queryKey:[e9]})>0,ti=(0,P.f)(),[to,tc]=(0,a.useState)(!1),[td,tu]=(0,x.ZA)("liveInterval",x.GJ.withDefault(tY.e2)),[tm,th]=(0,x.ZA)("refreshFrequency",x.GJ.withDefault(4e3)),tx=(0,a.useCallback)(e=>{let t=(0,tY.zG)(e);t&&ec(t)},[]);(0,a.useEffect)(()=>{ed&&E&&tx(td)},[tx,l.source,ed]),function(e){let t,s,r,l,i,o=(0,n.c)(22),{isLive:c,interval:d,refreshFrequency:u,onTimeRangeSelect:m,pause:h}=e,x="visible"===(0,P.f)(),[p,g]=(0,a.useState)(!1);o[0]!==d||o[1]!==m?(t=()=>{m(new Date(Date.now()-d),new Date,null)},o[0]=d,o[1]=m,o[2]=t):t=o[2];let f=t;o[3]!==x||o[4]!==h||o[5]!==f||o[6]!==p?(s=()=>{p&&x&&(h||f(),g(!1))},r=[p,x,h,f],o[3]=x,o[4]=h,o[5]=f,o[6]=p,o[7]=s,o[8]=r):(s=o[7],r=o[8]),(0,a.useEffect)(s,r);let y=(0,a.useRef)(null);o[9]!==x||o[10]!==c||o[11]!==h||o[12]!==f||o[13]!==u?(l=()=>(c?(y.current&&window.clearInterval(y.current),h||(y.current=window.setInterval(()=>{x?f():g(!0)},u))):y.current&&window.clearInterval(y.current),()=>{y.current&&window.clearInterval(y.current)}),o[9]=x,o[10]=c,o[11]=h,o[12]=f,o[13]=u,o[14]=l):l=o[14],o[15]!==x||o[16]!==c||o[17]!==m||o[18]!==h||o[19]!==f||o[20]!==u?(i=[c,x,m,h,f,u],o[15]=x,o[16]=c,o[17]=m,o[18]=h,o[19]=f,o[20]=u,o[21]=i):i=o[21],(0,a.useEffect)(l,i)}({isLive:E,interval:td,refreshFrequency:tm,onTimeRangeSelect:eh,pause:tl||!eX||!ti});let[tp,tg]=(0,a.useState)(!1);(0,a.useEffect)(()=>{tg(!1===E)},[E]);let{data:ty}=eG.Ay.useMe(),tb=(0,a.useCallback)(e=>{e&&E&&k(!1)},[E,k]),tv=(0,a.useCallback)(()=>{k(!0),tx(td),tc(!0),setTimeout(()=>tc(!1),100)},[td,tx,k]),tj=(0,a.useMemo)(()=>{if(null!=eM)return{...eM,dateRange:eu}},[eM,eu]),tS=(0,a.useMemo)(()=>(0,v.AB)(tj?.select??ea.select??""),[tj?.select,ea.select]),tw=(0,a.useCallback)(e=>{X("select",(tS.includes(e)?tS.filter(t=>t!==e):[...tS,e]).join(", ")),ef()},[tS,X,ef]),t_=(0,a.useCallback)(({where:e,whereLanguage:t,source:s})=>{let r=new URLSearchParams({whereLanguage:t||"sql",from:eu[0].getTime().toString(),to:eu[1].getTime().toString(),isLive:"false",liveInterval:td.toString()});return s&&s.id!==g?.id?(r.append("where",e||""),r.append("source",s.id)):(r.append("select",l.select||""),r.append("where",e||l.where||""),r.append("filters",JSON.stringify(l.filters??[])),r.append("source",g?.id||"")),`/search?${r.toString()}`},[td,l.filters,l.select,l.where,g?.id,eu]),tE=(0,a.useCallback)(e=>{k(!1),eg(t=>({...t,DBSqlRowTable:e}))},[k,eg]),[tC,{open:tk,close:tN}]=(0,F.j)();(0,a.useEffect)(()=>{if(ed&&eX&&!eR){let e=new URLSearchParams(window.location.search);e.has("from")||e.has("to")||em("Live Tail")}},[ed,eX,eR,em]);let{data:tA}=(0,eU.Kc)(tj),tT=(0,a.useMemo)(()=>(0,e8.C2)(tA),[tA]),t$=(0,a.useMemo)(()=>{if(null==eM)return;let e={};switch(g?.kind){case j.GL.Log:e.groupBy=g?.severityTextExpression;break;case j.GL.Trace:e.groupBy=g?.statusCodeExpression}return{...eM,select:[{aggFn:"count",aggCondition:"",valueExpression:""}],orderBy:void 0,granularity:"auto",dateRange:eu,displayType:j.t2.StackedBar,with:tT,eventTableSelect:l.select,alignDateRangeToGranularity:!E,...e}},[eM,g,tT,eu,l.select,E]),tz=(0,a.useCallback)(e=>(e.preventDefault(),ef(),!1),[ef]),tL=(0,a.useCallback)(e=>{k(!1);let t=e?.at(0);i({orderBy:t?`${t.id} ${t.desc?"DESC":"ASC"}`:ea.orderBy})},[k,ea.orderBy,i]),tI=(0,a.useMemo)(()=>{let e=tG.I.parse(l.orderBy??"");return e?[e]:[]},[l.orderBy]),tM=(0,a.useCallback)((e,t)=>{eh(e,t),k(!1)},[eh,k]),tR=(0,a.useMemo)(()=>{let e={orderBy:void 0,dateRange:eu,with:tT};return eM?{...eM,...e}:{timestampValueExpression:"",connection:"",from:{databaseName:"",tableName:""},where:"",select:"",...e}},[eM,eu,tT]),tD=(0,a.useCallback)(()=>{e7(!0)},[]),[tP,tO]=(0,a.useState)(!1),tF=(0,a.useMemo)(()=>({onPropertyAddClick:eS.setFilterValue,displayedColumns:tS,toggleColumn:tw,generateSearchUrl:t_,dbSqlRowTableConfig:tj,isChildModalOpen:tP,setChildModalOpen:tO,source:g}),[eS.setFilterValue,g,tj,tS,tw,t_,tP]),tV=(0,a.useMemo)(()=>(0,b.VO)(ei),[ei]),tB=(0,a.useMemo)(()=>(0,r.jsx)(tX.A,{source:ei,variant:"text"}),[ei]),tW=(0,a.useCallback)(e=>{k(!1),em(e)},[k,em]),tq=(0,a.useCallback)(e=>{let t=(0,tr.jC)(e);k(!0),tu(e),eh(t[0],t[1],null)},[k,tu,eh]),tJ=(0,a.useCallback)(()=>eI(void 0),[eI]),tU=(0,a.useCallback)(e=>X("whereLanguage",e,{shouldDirty:!0}),[X]),tQ=(0,a.useCallback)(()=>{ez(!1)},[ez]),t0=(0,a.useCallback)(()=>e7(!1),[e7]),t1=(0,a.useCallback)(e=>{X("source",e.id),t0()},[X,t0]);return(0,r.jsxs)($.s,{direction:"column",h:"100vh",style:{overflow:"hidden"},"data-testid":"search-page",children:[(0,r.jsx)(c(),{children:(0,r.jsxs)("title",{children:[o?`${o.name} Search`:"Search"," - ",e]})}),!ev.VO&&tC&&(0,r.jsx)(se,{id:o?.id,searchedConfig:l,open:tC,onClose:tN}),(0,r.jsx)(eH.A,{}),(0,r.jsxs)("form",{"data-testid":"search-form",onSubmit:tz,className:ek().searchForm,children:[(0,r.jsxs)($.s,{gap:"sm",px:"sm",pt:"sm",wrap:"nowrap",children:[(0,r.jsxs)(T.Y,{gap:"4px",wrap:"nowrap",style:{minWidth:150},children:[(0,r.jsx)(e2.W,{size:"xs",control:q,name:"source",onCreate:tD,allowedSourceKinds:ss,"data-testid":"source-selector",sourceSchemaPreview:tB},`${s}`),(0,r.jsx)(sn,{setModalOpen:e7,setModelFormExpanded:ez})]}),(0,r.jsx)(A.a,{style:{minWidth:100,flexGrow:1},children:(0,r.jsx)(e3.Z,{tableConnection:tV,control:q,name:"select",defaultValue:ea.select,placeholder:ea.select||"SELECT Columns",onSubmit:ef,label:"SELECT",size:"xs"})}),(0,r.jsx)(A.a,{style:{maxWidth:400,width:"20%"},children:(0,r.jsx)(e3.Z,{tableConnection:tV,control:q,name:"orderBy",defaultValue:ea.orderBy,onSubmit:ef,label:"ORDER BY",size:"xs"})}),!ev.VO&&(0,r.jsxs)(r.Fragment,{children:[s?(0,r.jsx)(C.$,{"data-testid":"update-search-button",variant:"secondary",size:"xs",onClick:()=>{eI("update")},style:{flexShrink:0},children:"Update"}):(0,r.jsx)(C.$,{"data-testid":"save-search-button",variant:"secondary",size:"xs",onClick:eZ,style:{flexShrink:0},children:"Save"}),!ev.VO&&(0,r.jsx)(C.$,{"data-testid":"alerts-button",variant:"secondary",size:"xs",onClick:tk,style:{flexShrink:0},children:"Alerts"}),!!o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e5.Y,{allowCreate:!0,values:o.tags||[],onChange:eQ,children:(0,r.jsxs)(C.$,{"data-testid":"tags-button",variant:"secondary",px:"xs",size:"xs",style:{flexShrink:0},children:[(0,r.jsx)(J.A,{size:14,className:"me-1"}),o.tags?.length||0]})}),(0,r.jsx)(eJ,{onClickDeleteSavedSearch:()=>{eK.mutate(o?.id??"",{onSuccess:()=>{h().push("/search")}})},onClickRenameSavedSearch:()=>{eI("update")}})]})]})]}),(0,r.jsx)(sl,{opened:e$,onClose:tQ,inputSource:er}),(0,r.jsx)(si,{opened:e1,onClose:t0,onCreate:t1}),(0,r.jsxs)($.s,{gap:"sm",mt:"sm",px:"sm",children:[(0,r.jsx)(e6.A,{name:"whereLanguage",control:q,sqlInput:(0,r.jsx)(A.a,{style:{width:"75%",flexGrow:1},children:(0,r.jsx)(e3.Z,{tableConnection:tV,control:q,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",onLanguageChange:tU,language:"sql",onSubmit:ef,label:"WHERE",queryHistoryType:eE.j3.SEARCH_SQL,enableHotkey:!0,allowMultiline:!0})}),luceneInput:(0,r.jsx)(tt.A,{tableConnection:(0,b.VO)(ei),control:q,name:"where",onLanguageChange:e=>X("whereLanguage",e,{shouldDirty:!0}),onSubmit:ef,language:"lucene",placeholder:"Search your events w/ Lucene ex. column:foo",queryHistoryType:eE.j3.SEARCH_LUCENE,enableHotkey:!0,"data-testid":"search-input"})}),(0,r.jsx)(e4.A,{"data-testid":"time-picker",inputValue:eo,setInputValue:ec,onSearch:tW,onRelativeSearch:tq,showLive:"results"===S,isLiveMode:E,defaultRelativeTimeMode:E&&td!==tY.e2}),E&&(0,r.jsx)(z.m,{label:"Live tail refresh interval",children:(0,r.jsx)(L.l,{size:"sm",w:80,data:st,value:String(tm),onChange:e=>th(e?parseInt(e,10):null),allowDeselect:!1,comboboxProps:{withinPortal:!0,zIndex:1e3}})}),(0,r.jsx)(sc,{isFormStateDirty:ee.isDirty})]})]}),null!=l&&null!=g&&(0,r.jsx)(sh,{opened:null!=eL,onClose:tJ,searchedConfig:l,isUpdate:"update"===eL,savedSearchId:s}),(0,r.jsx)($.s,{direction:"column",style:{overflow:"hidden",height:"100%"},className:"bg-body",children:eX?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:ek().searchPageContainer,style:{minHeight:0,height:"100%"},children:[(0,r.jsx)(eB.t,{message:"Unable to render search filters",children:(0,r.jsx)(eO,{denoiseResults:N,setDenoiseResults:W,isLive:E,analysisMode:S,setAnalysisMode:w,chartConfig:tR,sourceId:ei?.id,showDelta:!!g?.durationExpression,...eS})}),"pattern"===S&&null!=t$&&(0,r.jsxs)($.s,{direction:"column",w:"100%",gap:"0px",mih:"0",children:[(0,r.jsx)(A.a,{className:ek().searchStatsContainer,children:(0,r.jsxs)(T.Y,{justify:"space-between",style:{width:"100%"},children:[(0,r.jsx)(e0,{config:t$,queryKeyPrefix:e9}),(0,r.jsx)(sd,{config:{...eM,dateRange:eu},enabled:ed})]})}),!eD&&(0,r.jsx)(A.a,{className:ek().timeChartContainer,mih:"0",children:(0,r.jsx)(eV.S,{sourceId:l.source??void 0,showLegend:!1,config:t$,enabled:ed,showDisplaySwitcher:!1,showMVOptimizationIndicator:!1,showDateRangeIndicator:!1,queryKeyPrefix:e9,onTimeRangeSelect:tM})}),(0,r.jsx)(A.a,{flex:"1",mih:"0",children:(0,r.jsx)(tf,{source:g,config:{...eM,dateRange:eu},bodyValueExpression:g?(0,e_.N8)(g)??"":eM.implicitColumnExpression??"",totalCountConfig:t$,totalCountQueryKeyPrefix:e9})})]}),"delta"===S&&null!=g&&(0,r.jsx)(tH,{chartConfig:{...eM,dateRange:eu,with:tT},isReady:ed,source:g}),(0,r.jsxs)($.s,{direction:"column",mih:"0",children:["results"===S&&eM&&t$&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A.a,{className:ek().searchStatsContainer,children:(0,r.jsxs)(T.Y,{justify:"space-between",style:{width:"100%"},children:[(0,r.jsx)(e0,{config:t$,queryKeyPrefix:e9,enableParallelQueries:!0}),(0,r.jsxs)(T.Y,{gap:"sm",align:"center",children:[tp&&"results"===S&&!0!=N&&(0,r.jsx)(so,{handleResumeLiveTail:tv}),(0,r.jsx)(sd,{config:{...eM,dateRange:eu},enabled:ed})]})]})}),!eD&&(0,r.jsx)(A.a,{className:ek().timeChartContainer,mih:"0",children:(0,r.jsx)(eV.S,{sourceId:l.source??void 0,showLegend:!1,config:t$,enabled:ed,showDisplaySwitcher:!1,showMVOptimizationIndicator:!1,showDateRangeIndicator:!1,queryKeyPrefix:e9,onTimeRangeSelect:tM,enableParallelQueries:!0})})]}),eD&&eP?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"h-100 w-100 px-4 mt-4 align-items-center justify-content-center text-muted overflow-auto",children:[eq&&eq.length>0&&(0,r.jsxs)(A.a,{mb:"xl",children:[(0,r.jsx)(_.E,{size:"lg",children:(0,r.jsx)("b",{children:"Query Helper"})}),(0,r.jsx)(R.x,{children:eq.map(e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R.x.Col,{span:10,children:(0,r.jsx)(_.E,{children:e.userMessage("where")})}),(0,r.jsx)(R.x.Col,{span:2,children:(0,r.jsx)(C.$,{onClick:()=>X("where",e.corrected()),children:"Accept"})})]}))})]}),(0,r.jsxs)(A.a,{mt:"sm",children:[(0,r.jsx)(_.E,{my:"sm",size:"sm",children:"Error encountered for query with inputs:"}),(0,r.jsx)(I.t,{flex:"auto",p:"sm",shadow:"none",radius:"sm",style:{overflow:"hidden"},children:(0,r.jsxs)(R.x,{children:[(0,r.jsx)(R.x.Col,{span:2,children:(0,r.jsx)(_.E,{children:"SELECT"})}),(0,r.jsx)(R.x.Col,{span:10,children:(0,r.jsx)(tn.V,{data:`${eM.select}`,formatData:!1})}),(0,r.jsx)(R.x.Col,{span:2,children:(0,r.jsx)(_.E,{children:"ORDER BY"})}),(0,r.jsx)(R.x.Col,{span:10,children:(0,r.jsx)(tn.V,{data:`${eM.orderBy}`,formatData:!1})}),(0,r.jsx)(R.x.Col,{span:2,children:(0,r.jsx)(_.E,{children:"lucene"===eM.whereLanguage?"Searched For":"WHERE"})}),(0,r.jsx)(R.x.Col,{span:10,children:"lucene"===eM.whereLanguage?(0,r.jsx)(G.Ay,{indentWithTab:!1,value:eM.where,theme:"dark",basicSetup:{lineNumbers:!1,foldGutter:!1,highlightActiveLine:!1,highlightActiveLineGutter:!1},editable:!1}):(0,r.jsx)(tn.V,{data:`${eM.where}`})})]})})]}),(0,r.jsxs)(A.a,{mt:"lg",children:[(0,r.jsx)(_.E,{my:"sm",size:"sm",children:"Error Message:"}),(0,r.jsx)(D.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:eP.message})]}),eP instanceof y.p1&&(0,r.jsxs)(A.a,{mt:"lg",children:[(0,r.jsx)(_.E,{my:"sm",size:"sm",children:"Original Query:"}),(0,r.jsx)(D.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:(0,r.jsx)(tn.V,{data:eP.query,formatData:!0})})]})]})}):(0,r.jsx)(A.a,{flex:"1",mih:"0",children:eM&&l.source&&tj&&"results"===S&&(0,r.jsx)(ta.A,{context:tF,config:tj,sourceId:l.source,onSidebarOpen:eT,onExpandedRowsChange:tb,enabled:ed,isLive:E??!0,queryKeyPrefix:e9,onScroll:eA,onError:tE,denoiseResults:N,collapseAllRows:to,onSortingChange:tL,initialSortBy:tI})})]})]})}):(0,r.jsx)(I.t,{shadow:"xs",p:"xl",h:"100%",children:(0,r.jsx)(M.o,{mih:100,h:"100%",children:(0,r.jsx)(_.E,{size:"sm",children:"Please start by selecting a source and then click the play button to query data."})})})})]})}let sb=i()(async()=>sy,{ssr:!1});sb.getLayout=e9.D;let sv=sb},80925:(e,t,s)=>{"use strict";s.d(t,{S:()=>g,t:()=>h});var r=s(55729),n=s(67843),a=s(35467),l=s(67270),i=s(12482),o=s(92917),c=s(40147),d=s(78550),u=s(49672),m=s(81973);function h({traceSource:e,sessionSource:t,dateRange:s,where:r,whereLanguage:n},o){let{enabled:m=!0}=o||{},{getFieldExpression:h,isLoading:x}=(0,c.A)(e),{getFieldExpression:p,isLoading:g}=(0,c.A)(t),f=["teamId","teamName","userEmail","userName"],y="sessions",b=(0,u.fu)(),v=(0,d.Ge)();return(0,i.I)({queryKey:["sessions",e?.id,t?.id,s,r,n],queryFn:async()=>{if(!e||!t||!h||!p)return[];let i=h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId"),[o,c,d]=await Promise.all([(0,l.PV)({select:[{valueExpression:`${e.serviceNameExpression}`,alias:"serviceName"},{valueExpression:i,alias:"sessionId"},{alias:"maxTimestamp",valueExpression:`MAX(${e.timestampValueExpression})`},{alias:"minTimestamp",valueExpression:`MIN(${e.timestampValueExpression})`},{aggFn:"count",alias:"sessionCount",valueExpression:"*"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.eventAttributesExpression}.component:"user-interaction"`,valueExpression:"",alias:"interactionCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.statusCodeExpression}:error`,valueExpression:"",alias:"errorCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.spanNameExpression}:"record init"`,valueExpression:"",alias:"recordingCount"},...f.map(t=>({valueExpression:`MAX(${h(e.eventAttributesExpression??"SpanAttributes",t)})`,alias:t}))],from:e.from,dateRange:s,where:`${e.resourceAttributesExpression}.rum.sessionId:*`,whereLanguage:"lucene",...r&&{filters:[{type:n??"lucene",condition:r}]},timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e.connection,groupBy:"serviceName, sessionId"},v,e.querySettings),(0,l.PV)({select:[{valueExpression:`DISTINCT ${p(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:t.from,dateRange:s,where:`${p(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${y})`,whereLanguage:"sql",timestampValueExpression:t.timestampValueExpression,implicitColumnExpression:t.implicitColumnExpression,connection:t.connection},v,t.querySettings),(0,l.PV)({select:[{valueExpression:`DISTINCT ${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:e.from,dateRange:s,where:`(${e.spanNameExpression}='record init' OR ${e.spanNameExpression}='visibility') AND (${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${y}))`,whereLanguage:"sql",timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e?.connection},v,e.querySettings)]),u=(0,a.kg)`
        WITH _${y} AS (${o}),
        ${y} AS (
          SELECT * 
          FROM _${y}
          ${r?"":"HAVING interactionCount > 0 OR recordingCount > 0"}
          ORDER BY maxTimestamp DESC
          LIMIT 500
        )
      `,m=r&&r.length>0?(0,a.kg)`
        ${u},
        sessionIdsWithRecordings AS (${c}),
        sessionIdsWithUserActivity AS (${d})
        SELECT *
        FROM ${y}
        WHERE ${y}.sessionId IN (
          SELECT sessionIdsWithRecordings.sessionId FROM sessionIdsWithRecordings
        ) OR ${y}.sessionId IN (
          SELECT sessionIdsWithUserActivity.sessionId FROM sessionIdsWithUserActivity
        )
      `:(0,a.kg)`
        ${u}
        SELECT *
        FROM ${y}
        `;return await b.query({query:m.sql,query_params:m.params,connectionId:e?.connection}).then(e=>e.json())},staleTime:3e5,...o,enabled:!!m&&!x&&!g})}class x extends Error{}async function*p(e){let t=e.getReader();try{for(;;){let{done:e,value:s}=await t.read();if(e)return;yield s}}finally{t.releaseLock()}}function g({serviceName:e,sessionId:t,sourceId:s,startDate:a,endDate:i,limit:c=100,onEvent:h,onEnd:g,resultsKey:f,getSessionSourceFieldExpression:y},b){let v=b?.keepPreviousData??!1,j=b?.shouldAbortPendingRequest??!0,S=(0,d.Ge)(),[w,_]=(0,r.useState)({key:"",data:[]}),[E,C]=(0,r.useState)(!0),[k,N]=(0,r.useState)(!0),A=(0,r.useRef)(null),[T,$]=(0,r.useState)("idle"),z=(0,r.useRef)(void 0),{data:L}=(0,m.Fo)({id:s}),I=(0,r.useCallback)(async({pageParam:s=0,limit:r})=>{if(!L)return;let o=[],d=0,b=a.getTime().toString(),j=i.getTime().toString(),w=(r??c).toString(),E=s.toString(),k=new AbortController;A.current=k,C(!0),$("fetching"),z.current="fetching";let T=await (0,l.PV)({select:[{valueExpression:m.kJ.implicitColumnExpression,alias:"b"},{valueExpression:`simpleJSONExtractInt(${m.kJ.implicitColumnExpression}, 'type')`,alias:"t"},{valueExpression:`${y(m.kJ.eventAttributesExpression,"rr-web.chunk")}`,alias:"ck"},{valueExpression:`${y(m.kJ.eventAttributesExpression,"rr-web.total-chunks")}`,alias:"tcks"}],dateRange:[new Date(parseInt(b)),new Date(parseInt(j))],from:L.from,whereLanguage:"lucene",where:`ServiceName:"${e}" AND ${m.kJ.resourceAttributesExpression}.rum.sessionId:"${t}"`,timestampValueExpression:L.timestampValueExpression,implicitColumnExpression:m.kJ.implicitColumnExpression,connection:L.connection,orderBy:`${L.timestampValueExpression} ASC`,limit:{limit:Math.min(1e6,parseInt(w)),offset:parseInt(E)}},S,L.querySettings),I=(async()=>{let e,t=(0,u.W)(),s=await t.query({query:T.sql,query_params:T.params,format:"JSONEachRow",connectionId:L.connection});for await(let t of(e=h||(v?e=>o.push(e):e=>_(t=>(0,n.Ay)(t,t=>{t.key=f??t.key??"DEFAULT_KEY",t.data.push(e)}))),p(s.stream())))for(let s of t)try{let t=s.json();d++,e(t)}catch{}g?.(),v&&_({key:f??"DEFAULT_KEY",data:o}),(0===d||d<c)&&N(!1)})();try{await Promise.race([I,new Promise((e,t)=>{setTimeout(()=>{t(new x("Timeout"))},18e4)})])}catch(e){e instanceof x?(C(!1),$("idle"),z.current="idle",k.abort(),console.warn("Closing event source due to timeout"),g?.(new x)):console.error(e)}k.abort(),C(!1),$("idle"),z.current="idle"},[L,e,t,a,i,c,v,_,h,g,f,S,y]),M=[t,a,i,c].join("||"),R=(0,o.ZC)(M);(0,r.useEffect)(()=>{R!=M&&("fetching"!==z.current||j)&&(j&&"fetching"===z.current&&A.current?.abort(),v||_({key:"",data:[]}),N(!0),I({pageParam:0}))},[R,M,j,I,v]);let D=(0,r.useCallback)(e=>{k&&"idle"===z.current&&w.data.length>0&&I({pageParam:w.data.length,limit:e?.limit}).then(()=>{e?.cb?.()})},[I,w.data.length,k]),P=(0,r.useCallback)(()=>{A.current?.abort()},[]);return{hasNextPage:k,isFetching:E,results:w.data,resultsKey:w.key,fetchNextPage:D,abort:P}}},81408:e=>{e.exports={wrapper:"SessionSubpanelV2_wrapper__5kN48",eventList:"SessionSubpanelV2_eventList__CJCVt",eventListHeader:"SessionSubpanelV2_eventListHeader__Hbhpi",eventListContainer:"SessionSubpanelV2_eventListContainer__r2wEN",eventRow:"SessionSubpanelV2_eventRow__XFl1t",eventRowError:"SessionSubpanelV2_eventRowError__61zDU",eventRowIcon:"SessionSubpanelV2_eventRowIcon__C371Y",eventRowTitle:"SessionSubpanelV2_eventRowTitle__BCmpn",eventRowSuccess:"SessionSubpanelV2_eventRowSuccess___a9Kd",eventRowHighlighted:"SessionSubpanelV2_eventRowHighlighted__YWXks",eventRowContent:"SessionSubpanelV2_eventRowContent__Y9_5z",eventRowTimestamp:"SessionSubpanelV2_eventRowTimestamp__MPRLq",eventRowDescription:"SessionSubpanelV2_eventRowDescription__XJ9b7",player:"SessionSubpanelV2_player___Erie",playerHeader:"SessionSubpanelV2_playerHeader__qMRJo",playerHeaderUrl:"SessionSubpanelV2_playerHeaderUrl__K3MEs",playerContainer:"SessionSubpanelV2_playerContainer__m7RnT",domPlayerWrapper:"SessionSubpanelV2_domPlayerWrapper__wKZpR",domPlayerWrapperPaused:"SessionSubpanelV2_domPlayerWrapperPaused__9xhaT",playerTimestamp:"SessionSubpanelV2_playerTimestamp__ebCzv",playerPlaybar:"SessionSubpanelV2_playerPlaybar__FEw0u",playerToolbar:"SessionSubpanelV2_playerToolbar__7sL7N"}},83101:e=>{e.exports={resizeHandle:"ResizablePanel_resizeHandle__4fEVM",resizeYHandle:"ResizablePanel_resizeYHandle__1pBbm"}},85014:(e,t,s)=>{"use strict";s.d(t,{Y:()=>b});var r=s(6029),n=s(55729),a=s(37659),l=s(76013),i=s(96061),o=s(20158),c=s(53993),d=s(47268),u=s(34834),m=s(3635),h=s(25062),x=s(28200),p=s(41279),g=s(6876),f=s(65952),y=s.n(f);let b=n.memo(({values:e,onChange:t,allowCreate:s,children:f})=>{let{data:b,isLoading:v,isError:j,refetch:S}=g.Ay.useTags(),w=n.useMemo(()=>{let t=new Map;return[...e,...b?.data||[]].forEach(e=>{t.set(e.toLowerCase(),e)}),Array.from(t.values()).sort((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))},[b,e]),[_,E]=n.useState(""),C=n.useMemo(()=>w.filter(e=>e.toLowerCase().includes(_.toLowerCase())),[w,_]),k=n.useCallback(()=>{t([])},[t]),N=n.useCallback(r=>{if("Enter"===r.key&&s&&_.length>0){let s=r.currentTarget.value;e.some(e=>e.toLowerCase()===s.toLowerCase())||(t([...e,s]),E(""))}},[s,_,t,e]);return(0,r.jsxs)(a.A,{withinPortal:!0,width:240,keepMounted:!1,shadow:"xl",onOpen:()=>{S(),E("")},position:"bottom-start",children:[(0,r.jsx)(a.A.Target,{children:f||(0,r.jsx)(l.M,{variant:"secondary",size:"sm",style:{cursor:"pointer"},children:(0,r.jsx)(x.A,{size:14})})}),(0,r.jsxs)(a.A.Dropdown,{p:0,bg:"dark",children:[v&&"Loading",j&&"Error",(0,r.jsx)(i.p,{size:"xs",placeholder:s?"Search or create tag":"Search tag",variant:"filled",leftSection:(0,r.jsx)(p.A,{size:16}),autoFocus:!0,m:8,mb:0,value:_,onChange:e=>E(e.currentTarget.value),onKeyDown:N,rightSection:_&&(0,r.jsx)(o.J,{size:"xs",radius:"xl",onClick:()=>E("")})}),(0,r.jsxs)(c.F,{viewportProps:{style:{maxHeight:200}},children:[0===C.length&&(0,r.jsx)("div",{className:"pt-3 px-4 fs-8 text-center",children:s?(0,r.jsxs)(r.Fragment,{children:["Type and press ",(0,r.jsx)("span",{children:"Enter"})," to create new tag"]}):"No tags found"}),(0,r.jsx)(d.S.Group,{value:e,onChange:t,size:"xs",my:"sm",children:(0,r.jsx)(u.B,{gap:4,children:C.map(e=>(0,r.jsxs)(m.Y,{justify:"space-between",className:y().tagWrapper,children:[(0,r.jsx)(d.S,{label:e.toUpperCase(),value:e,size:"xs"}),w.length>=2&&(0,r.jsx)(h.$,{variant:"secondary",size:"compact-xs",fw:"normal",onClick:()=>{t([e])},children:"Only"})]},e))})})]}),(0,r.jsxs)("div",{className:"p-2 border-top border-dark d-flex justify-content-between align-items-center",children:[(0,r.jsxs)("div",{className:"ms-2 fs-8 ",children:[e.length||"None"," selected"]}),e.length>=1&&(0,r.jsx)(h.$,{variant:"secondary",size:"compact-xs",fw:"normal",onClick:k,children:"Clear all"})]})]})]})})},92138:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return s(41029)}])},92495:(e,t)=>{"use strict";t.AB=function(e){let t,s;return function(e){try{return new URL(e),!0}catch(e){return!1}}(e)&&"slack.com"===((s=(t=new URL(e).hostname).split(".")).length>=2?s.slice(-2).join("."):t)}},94364:(e,t,s)=>{"use strict";s.d(t,{f:()=>r});let r=e=>({isLoading:!1,error:null,enrichedFrame:null})},94937:(e,t,s)=>{"use strict";s.d(t,{A:()=>v});var r=s(6029),n=s(75155),a=s(55729),l=s(82203),i=s.n(l),o=s(80519),c=s.n(o),d=s(37659),u=s(3635),m=s(43517),h=s(63085),x=s(34834),p=s(25062),g=s(56795),f=s(28975),y=s(41279),b=s(18006);function v(e){let t,s,l,o,v,j,S,w,_,E,C,k,N,A,T,$,z,L,I=(0,n.c)(62),{displayedKey:M,name:R,nameLanguage:D,sqlExpression:P,value:O,onPropertyAddClick:F,generateSearchUrl:V}=e,B=void 0===D?"lucene":D,[W,H]=(0,a.useState)(!1);I[0]!==O?(t=(0,b.OH)(O),I[0]=O,I[1]=t):t=I[1];let q=t;if(!(F||V||q)){let e,t=M||R;return I[2]!==R||I[3]!==t||I[4]!==O?(e=(0,r.jsxs)("div",{className:"bg-highlighted px-2 py-0.5 me-1 my-1",children:[t,": ",O]},R),I[2]=R,I[3]=t,I[4]=O,I[5]=e):e=I[5],e}if(I[6]!==M||I[7]!==V||I[8]!==q||I[9]!==R||I[10]!==B||I[11]!==F||I[12]!==W||I[13]!==P||I[14]!==O){let e,t,n="sql"===B?c().format("? = ?",[c().raw(R),O]):`${R}:${"string"==typeof O?`"${O}"`:O}`;o=d.A,A="top",T=!1,v=!0,j=W,S=H,I[29]===Symbol.for("react.memo_cache_sentinel")?(e={wordBreak:"break-word"},I[29]=e):e=I[29],I[30]!==M||I[31]!==q||I[32]!==R||I[33]!==W||I[34]!==O?(t=q?(0,r.jsxs)("a",{href:encodeURI(O),target:"_blank",rel:"noopener noreferrer",className:"d-flex flex-row align-items-center bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",children:[M||R,(0,r.jsx)(g.A,{size:14,className:"ms-1"})]}):(0,r.jsxs)(u.Y,{className:"bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",wrap:"nowrap",gap:0,onClick:()=>H(!W),children:[M||R,":",(0,r.jsx)(m.E,{size:"xs",ms:4,maw:300,truncate:!0,children:O})]}),I[30]=M,I[31]=q,I[32]=R,I[33]=W,I[34]=O,I[35]=t):t=I[35],I[36]!==t||I[37]!==O?(w=(0,r.jsx)(d.A.Target,{children:(0,r.jsx)(h.m,{label:O,withArrow:!0,maw:400,multiline:!0,style:e,position:"bottom",children:t})}),I[36]=t,I[37]=O,I[38]=w):w=I[38],l=d.A.Dropdown,N=2,s=x.B,_=0,E="stretch",I[39]!==F||I[40]!==P||I[41]!==O?(C=F&&(0,r.jsx)(p.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,r.jsx)(f.A,{size:14}),onClick:()=>{F(P,O),H(!1)},children:"Add to Search"}),I[39]=F,I[40]=P,I[41]=O,I[42]=C):C=I[42],k=V&&(0,r.jsx)(i(),{href:V(n,B),children:(0,r.jsx)(p.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,r.jsx)(y.A,{size:14}),children:"Search This Value"})}),I[6]=M,I[7]=V,I[8]=q,I[9]=R,I[10]=B,I[11]=F,I[12]=W,I[13]=P,I[14]=O,I[15]=s,I[16]=l,I[17]=o,I[18]=v,I[19]=j,I[20]=S,I[21]=w,I[22]=_,I[23]=E,I[24]=C,I[25]=k,I[26]=N,I[27]=A,I[28]=T}else s=I[15],l=I[16],o=I[17],v=I[18],j=I[19],S=I[20],w=I[21],_=I[22],E=I[23],C=I[24],k=I[25],N=I[26],A=I[27],T=I[28];return I[43]!==s||I[44]!==_||I[45]!==E||I[46]!==C||I[47]!==k?($=(0,r.jsxs)(s,{gap:_,justify:E,children:[C,k]}),I[43]=s,I[44]=_,I[45]=E,I[46]=C,I[47]=k,I[48]=$):$=I[48],I[49]!==l||I[50]!==$||I[51]!==N?(z=(0,r.jsx)(l,{p:N,children:$}),I[49]=l,I[50]=$,I[51]=N,I[52]=z):z=I[52],I[53]!==o||I[54]!==v||I[55]!==j||I[56]!==S||I[57]!==w||I[58]!==z||I[59]!==A||I[60]!==T?(L=(0,r.jsxs)(o,{position:A,withinPortal:T,withArrow:v,opened:j,onChange:S,children:[w,z]}),I[53]=o,I[54]=v,I[55]=j,I[56]=S,I[57]=w,I[58]=z,I[59]=A,I[60]=T,I[61]=L):L=I[61],L}},96958:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(6029),n=s(75155),a=s(75828),l=s.n(a);function i(e){let t,s,a,i,o,c,d,u,m,h,x,p=(0,n.c)(23);p[0]!==e?({children:s,onClick:i,active:t,className:a,style:c,...o}=e,p[0]=e,p[1]=t,p[2]=s,p[3]=a,p[4]=i,p[5]=o,p[6]=c):(t=p[1],s=p[2],a=p[3],i=p[4],o=p[5],c=p[6]);let g=!t;p[7]!==t||p[8]!==a||p[9]!==g?(d=l()("text-center cursor-pointer",{"fw-bold text-white-hover":t,"text-muted-hover":g},a),p[7]=t,p[8]=a,p[9]=g,p[10]=d):d=p[10],p[11]!==s?(u=(0,r.jsx)("span",{children:s}),p[11]=s,p[12]=u):u=p[12],p[13]===Symbol.for("react.memo_cache_sentinel")?(m={height:2},p[13]=m):m=p[13];let f=t?"var(--color-text-brand)":"var(--color-border)";return p[14]!==f?(h=(0,r.jsx)("div",{className:"w-100 mt-2",style:m,children:(0,r.jsx)("div",{className:"h-100 w-100",style:{background:f}})}),p[14]=f,p[15]=h):h=p[15],p[16]!==i||p[17]!==o||p[18]!==c||p[19]!==d||p[20]!==u||p[21]!==h?(x=(0,r.jsxs)("div",{className:d,onClick:i,style:c,...o,children:[u,h]}),p[16]=i,p[17]=o,p[18]=c,p[19]=d,p[20]=u,p[21]=h,p[22]=x):x=p[22],x}function o(e){let t,s,a,o,c=(0,n.c)(14),{items:d,activeItem:u,className:m,onClick:h,"data-testid":x}=e;if(c[0]!==m?(t=l()("d-flex flex-wrap",m),c[0]=m,c[1]=t):t=c[1],c[2]!==u||c[3]!==d||c[4]!==h){let e;c[6]!==u||c[7]!==h?(e=e=>(0,r.jsx)(i,{"data-testid":`tab-${String(e.value).toLowerCase()}`,active:e.value===u,onClick:()=>h?.(e.value),children:(0,r.jsx)("span",{className:"mx-4 text-nowrap",children:e.text})},e.value),c[6]=u,c[7]=h,c[8]=e):e=c[8],s=d.map(e),c[2]=u,c[3]=d,c[4]=h,c[5]=s}else s=c[5];return c[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(i,{className:"flex-grow-1 pe-none",children:"\xa0"}),c[9]=a):a=c[9],c[10]!==x||c[11]!==t||c[12]!==s?(o=(0,r.jsxs)("div",{className:t,"data-testid":x,children:[s,a]}),c[10]=x,c[11]=t,c[12]=s,c[13]=o):o=c[13],o}}},e=>{e.O(0,[7756,883,2928,6171,5554,910,1606,1909,6747,2814,1445,2990,4607,9979,522,3943,1926,9353,4528,1470,8224,4913,1021,6514,3234,8374,3172,6593,636,8792],()=>e(e.s=92138)),_N_E=e.O()}]);