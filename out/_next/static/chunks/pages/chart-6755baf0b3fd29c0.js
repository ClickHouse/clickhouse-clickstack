(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9240],{225:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});var s=r(6029),n=r(75155),a=r(98142);let l=()=>{let e,t=(0,n.c)(2);if(a.bp){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsxs)("span",{children:["Please open an issue on"," ",(0,s.jsx)("a",{href:"https://github.com/hyperdxio/hyperdx/issues",target:"_blank",children:"GitHub"}),"."]}),t[0]=e):e=t[0],e}return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("span",{children:"Please contact support."}),t[1]=e):e=t[1],e}},2326:e=>{e.exports={wrapper:"PlaybarSlider_wrapper__WAjbf",markers:"PlaybarSlider_markers__X51XN",markerDot:"PlaybarSlider_markerDot__X23nO"}},6889:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var s=r(6029),n=r(75155),a=r(55729),l=r(71024),i=r.n(l),o=r(95669),c=r.n(o),d=r(41038),u=r(1909),m=r(66692),h=r(82641),p=r(60481),x=r(39603),g=r(43517),f=r(92789),b=r(3635),y=r(25062),v=r(46181),j=r(22599),_=r(94720),S=r(60665),w=r(67747),E=r(58333),C=r(23474),k=r(6876),N=r(43152),A=r(15670),T=r(71781),$=r(57478),R=r(16932);async function z(e){let{sourceId:t,text:r}=e;return(0,k.Q5)("ai/assistant",{method:"POST",json:{sourceId:t,text:r}}).json()}var I=r(56514),L=r(81973),M=r(387),D=r(92917);let F=(0,M.lr)("Past 1h",!1);function O({setConfig:e,onTimeRangeSelect:t,submitRef:r,aiAssistantEnabled:l}){let i,o,[c,d]=(0,a.useState)(!1),[k,N]=(0,D.Mj)("ai-assistant-alert-dismissed",!1),{control:A,setValue:I,handleSubmit:L}=(0,u.mN)({defaultValues:{text:"",source:""}}),M=((o=(0,n.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(i={mutationFn:z},o[0]=i):i=o[0],(0,R.n)(i));return((0,m.vC)("a",()=>{d(e=>!e)},{preventDefault:!0}),l||k)?l?(0,s.jsxs)(p.a,{mb:"sm",children:[(0,s.jsxs)(b.Y,{gap:"md",align:"center",mb:"sm",children:[(0,s.jsx)(y.$,{onClick:()=>d(e=>!e),size:"xs",variant:"subtle",color:"gray",children:(0,s.jsxs)(b.Y,{gap:"xs",children:[c?(0,s.jsx)(E.A,{size:14}):(0,s.jsx)(C.A,{size:14}),(0,s.jsx)(g.E,{size:"xxs",children:"AI Assistant [A]"})]})}),(0,s.jsx)(v.a,{size:"xs",children:"Experimental"})]}),(0,s.jsx)(j.S,{in:c,children:c&&(0,s.jsx)("form",{onSubmit:L(s=>{M.mutate({sourceId:s.source,text:s.text},{onSuccess(s){e({...s,where:""}),t(new Date(s.dateRange[0]),new Date(s.dateRange[1])),setTimeout(()=>{r.current&&r.current()},100),S.$e.show({color:"green",message:"Chart generated successfully",autoClose:2e3})},onError(e){S.$e.show({color:"red",title:"Error Generating Chart",message:e.message,autoClose:2e3})}})}),children:(0,s.jsxs)(b.Y,{mb:"md",children:[(0,s.jsx)($.W,{autoFocus:!0,size:"xs",control:A,name:"source","data-testid":"source-selector",allowedSourceKinds:[h.GL.Log,h.GL.Trace]}),(0,s.jsx)(p.a,{style:{flexGrow:1,minWidth:100},children:(0,s.jsx)(T.t4,{placeholder:"ex. Error counts by service over last 2 hours","data-testid":"save-search-name-input",control:A,name:"text",rules:{required:!0},size:"xs"})}),M.isPending?(0,s.jsx)(_.a,{size:"xs",type:"dots"}):(0,s.jsx)(y.$,{type:"submit",size:"xs",variant:"primary",children:"Generate"})]})})}),(0,s.jsx)(f.c,{})]}):null:(0,s.jsxs)(p.a,{mb:"sm",children:[(0,s.jsx)(x.F,{color:"dark",icon:(0,s.jsx)(w.A,{size:16}),variant:"outline",withCloseButton:!0,onClose:()=>N(!0),p:"xxs",children:(0,s.jsxs)(g.E,{size:"xs",pt:"2px",children:["New AI Assistant available, enable with configuring the"," ",(0,s.jsx)("code",{children:"ANTHROPIC_API_KEY"})," environment variable on the HyperDX server."]})}),(0,s.jsx)(f.c,{mt:"sm"})]})}function P(){let e,t,r,l,i,o,u,m=(0,n.c)(21);m[0]===Symbol.for("react.memo_cache_sentinel")?(e={initialDisplayValue:"Past 1h",initialTimeRange:F},m[0]=e):e=m[0];let{searchedTimeRange:h,displayedTimeInputValue:x,setDisplayedTimeInputValue:g,onSearch:f,onTimeRangeSelect:b}=(0,M.R0)(e),y=(0,a.useRef)(void 0),{data:v}=(0,L.oE)(),{data:j}=k.Ay.useMe();m[1]!==v?.[0]?.id?(t=(0,d.os)().withDefault({...N.WG,source:v?.[0]?.id??""}),m[1]=v?.[0]?.id,m[2]=t):t=m[2];let[_,S]=(0,d.ZA)("config",t);m[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsx)(c(),{children:(0,s.jsx)("title",{children:"Chart Explorer - HyperDX"})}),m[3]=r):r=m[3];let w=j?.aiAssistantEnabled??!1;return m[4]!==b||m[5]!==S||m[6]!==w?(l=(0,s.jsx)(O,{setConfig:S,onTimeRangeSelect:b,submitRef:y,aiAssistantEnabled:w}),m[4]=b,m[5]=S,m[6]=w,m[7]=l):l=m[7],m[8]!==S?(i=e=>{S(e)},m[8]=S,m[9]=i):i=m[9],m[10]!==_||m[11]!==x||m[12]!==f||m[13]!==b||m[14]!==h||m[15]!==g||m[16]!==i?(o=(0,s.jsx)(A.A,{"data-testid":"chart-explorer-form",chartConfig:_,setChartConfig:i,dateRange:h,setDisplayedTimeInputValue:g,displayedTimeInputValue:x,onTimeRangeSearch:f,onTimeRangeSelect:b,submitRef:y}),m[10]=_,m[11]=x,m[12]=f,m[13]=b,m[14]=h,m[15]=g,m[16]=i,m[17]=o):o=m[17],m[18]!==l||m[19]!==o?(u=(0,s.jsxs)(p.a,{"data-testid":"chart-explorer-page",p:"sm",children:[r,l,o]}),m[18]=l,m[19]=o,m[20]=u):u=m[20],u}let W=i()(async()=>P,{ssr:!1});W.getLayout=I.D;let V=W},12869:(e,t,r)=>{"use strict";r.d(t,{A8:()=>g,C5:()=>y,J_:()=>f,cv:()=>x,gK:()=>m,lT:()=>u,mo:()=>b,nq:()=>p,vX:()=>v,yN:()=>h});var s=r(43465),n=r(49730),a=r(67012),l=r(85508),i=r(71434),o=r.n(i),c=r(76089),d=r(82641);function u(e){return"1m"===e?c.Z7.OneMinute:"5m"===e?c.Z7.FiveMinute:"15m"===e?c.Z7.FifteenMinute:"30m"===e?c.Z7.ThirtyMinute:"1h"===e?c.Z7.OneHour:"6h"===e?c.Z7.SixHour:"12h"===e?c.Z7.TwelveHour:c.Z7.OneDay}function m(e){let t=new Date;return"1m"===e?[(0,s.A)(t,{minutes:15}),t]:"5m"===e?[(0,s.A)(t,{hours:1}),t]:"15m"===e?[(0,s.A)(t,{hours:4}),t]:"30m"===e?[(0,s.A)(t,{hours:8}),t]:"1h"===e?[(0,s.A)(t,{hours:16}),t]:"6h"===e?[(0,s.A)(t,{days:4}),t]:"12h"===e||"1d"===e?[(0,s.A)(t,{days:7}),t]:[t,t]}function h(e,t){let[r,i]=e;return"1m"===t&&15>(0,n.A)(i,r)?[(0,s.A)(i,{minutes:15}),i]:"5m"===t&&1>(0,a.A)(i,r)?[(0,s.A)(i,{hours:1}),i]:"15m"===t&&4>(0,a.A)(i,r)?[(0,s.A)(i,{hours:4}),i]:"30m"===t&&8>(0,a.A)(i,r)?[(0,s.A)(i,{hours:8}),i]:"1h"===t&&16>(0,a.A)(i,r)?[(0,s.A)(i,{hours:16}),i]:"6h"===t&&4>(0,l.A)(i,r)?[(0,s.A)(i,{days:4}),i]:"12h"===t&&7>(0,l.A)(i,r)||"1d"===t&&7>(0,l.A)(i,r)?[(0,s.A)(i,{days:7}),i]:e}let p={above:"At least (≥)",below:"Below (<)"},x={above:"is at least (≥)",below:"falls below (<)"},g={"1m":"1 minute","5m":"5 minute","15m":"15 minute","30m":"30 minute","1h":"1 hour","6h":"6 hour","12h":"12 hour","1d":"1 day"},f=o().pick(g,["5m","15m","30m","1h","6h","12h","1d"]),b={webhook:"Webhook"},y={threshold:1,thresholdType:d.qQ.ABOVE,interval:"5m",channel:{type:"webhook",webhookId:""}};function v(e){return!!e&&new Date>new Date(e.until)}},15670:(e,t,r)=>{"use strict";r.d(t,{A:()=>tm});var s=r(6029),n=r(75155),a=r(55729),l=r(76694),i=r.n(l),o=r(1909),c=r(69580),d=r(29766),u=r(52789),m=r(3145),h=r(82641),p=r(43517),x=r(25062),g=r(92789),f=r(3635),b=r(78253),y=r(94193),v=r(60481),j=r(87989),_=r(22623),S=r(34834),w=r(56513),E=r(76013),C=r(53061),k=r(45005),N=r(64488),A=r(78341),T=r(97767),$=r(67872),R=r(90993),z=r(28975),I=r(87104),L=r(62118),M=r(5653),D=r(46661),F=r(61411),O=r(6620),P=r(9841),W=r(45519),V=r(81077),H=r(19336),B=r(43152),q=r(26932),X=r(88339),G=r(91939),K=r(40228),J=r(64467),Z=r(58153),Y=r(98142),U=r(67272),Q=r(35467),ee=r(12482),et=r(49672),er=r(92917),es=r(43370),en=r(81973),ea=r(12869),el=r(84851),ei=r(99082),eo=r(38206);function ec(e){let t,r,a=(0,n.c)(6),{value:l,defaultValue:i,onChange:o}=e;a[0]!==o?(t=e=>{null==e?o({}):["p50","p90","p95","p99"].includes(e)?o({aggFn:"quantile",level:Number.parseFloat(e.replace("p","0."))}):o({aggFn:e})},a[0]=o,a[1]=t):t=a[1];let c=t;return a[2]!==c||a[3]!==i||a[4]!==l?(r=(0,s.jsx)(eo.l,{withScrollArea:!1,searchable:!0,value:l,defaultValue:i,onChange:c,data:B.gT,"data-testid":"agg-fn-select"}),a[2]=c,a[3]=i,a[4]=l,a[5]=r):r=a[5],r}function ed(e){let t,r,a,l,i,c,d,u,m,h=(0,n.c)(20);h[0]!==e?({aggFnName:t,quantileLevelName:l,defaultValue:r,...a}=e,h[0]=e,h[1]=t,h[2]=r,h[3]=a,h[4]=l):(t=h[1],r=h[2],a=h[3],l=h[4]),h[5]!==t||h[6]!==a?(i={...a,name:t},h[5]=t,h[6]=a,h[7]=i):i=h[7];let{field:p}=(0,o.as)(i),{onChange:x,value:g}=p;h[8]!==a||h[9]!==l?(c={...a,name:l},h[8]=a,h[9]=l,h[10]=c):c=h[10];let{field:f}=(0,o.as)(c),{onChange:b,value:y}=f;h[11]!==x||h[12]!==b?(d=e=>{"quantile"===e.aggFn&&b(e.level),x(e.aggFn)},h[11]=x,h[12]=b,h[13]=d):d=h[13];let v=d;e:{if("quantile"===g){let e;h[14]!==y?(e=Math.round(100*y),h[14]=y,h[15]=e):e=h[15],u=`p${e}`;break e}u=g}let j=u;return h[16]!==r||h[17]!==v||h[18]!==j?(m=(0,s.jsx)(ec,{value:j,defaultValue:r,onChange:v}),h[16]=r,h[17]=v,h[18]=j,h[19]=m):m=h[19],m}var eu=r(47268),em=r(10174),eh=r(7565),ep=r(20728),ex=r(59029),eg=r(9953),ef=r(69164),eb=r(93003),ey=r(66980),ev=r(45749);let ej={number:(0,s.jsx)(V.A,{size:14}),currency:(0,s.jsx)(ef.A,{size:14}),percent:(0,s.jsx)(eb.A,{size:14}),byte:(0,s.jsx)(ey.A,{size:14}),time:(0,s.jsx)(ev.A,{size:14})},e_={factor:1,output:"number",mantissa:2,thousandSeparated:!0,average:!1,decimalBytes:!1},eS=e=>{let t,r,a,l,i,c,d,u,m,h,p,x,g,f=(0,n.c)(30),{control:b}=e,y=(0,o.FH)({control:b,name:"numberFormat"})??e_;return f[0]===Symbol.for("react.memo_cache_sentinel")?(t={flex:1},r={display:"flex",flexWrap:"nowrap",alignItems:"stretch",justifyContent:"stretch",gap:10},f[0]=t,f[1]=r):(t=f[0],r=f[1]),f[2]!==y.output?(a=e=>{let{field:t}=e;return(0,s.jsx)(ep.m,{...t,label:"Output format",leftSection:y.output&&ej[y.output],style:{flex:1},data:[{value:"number",label:"Number"},{value:"currency",label:"Currency"},{value:"byte",label:"Bytes"},{value:"percent",label:"Percentage"},{value:"time",label:"Time"}]})},f[2]=y.output,f[3]=a):a=f[3],f[4]!==b||f[5]!==a?(l=(0,s.jsx)(o.xI,{control:b,name:"numberFormat.output",render:a},"numberFormat.output"),f[4]=b,f[5]=a,f[6]=l):l=f[6],f[7]!==b||f[8]!==y.output?(i="currency"===y.output&&(0,s.jsx)(o.xI,{control:b,name:"numberFormat.currencySymbol",render:ew},"numberFormat.currencySymbol"),f[7]=b,f[8]=y.output,f[9]=i):i=f[9],f[10]!==l||f[11]!==i?(c=(0,s.jsxs)("div",{style:r,children:[l,i]}),f[10]=l,f[11]=i,f[12]=c):c=f[12],f[13]===Symbol.for("react.memo_cache_sentinel")?(d={marginTop:-6},f[13]=d):d=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsx)("div",{style:{fontSize:11},children:"Example"}),f[14]=u):u=f[14],f[15]!==y?(m=(0,er.ZV)(1234,y),f[15]=y,f[16]=m):m=f[16],f[17]!==m?(h=(0,s.jsx)("div",{style:d,children:(0,s.jsxs)(_.t,{p:"xs",py:4,children:[u,m]})}),f[17]=m,f[18]=h):h=f[18],f[19]!==b||f[20]!==y.output?(p="time"!==y.output&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"fs-8 mt-2 fw-bold mb-1",children:"Decimals"}),(0,s.jsx)(o.xI,{control:b,name:"numberFormat.mantissa",render:eC},"numberFormat.mantissa")]}),f[19]=b,f[20]=y.output,f[21]=p):p=f[21],f[22]!==b||f[23]!==y.output?(x=(0,s.jsx)(S.B,{gap:"xs",children:"byte"===y.output?(0,s.jsx)(o.xI,{control:b,name:"numberFormat.decimalBytes",render:ek},"numberFormat.decimalBytes"):"time"===y.output?(0,s.jsx)(o.xI,{control:b,name:"numberFormat.factor",render:eN},"numberFormat.factor"):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.xI,{control:b,name:"numberFormat.thousandSeparated",render:eA},"numberFormat.thousandSeparated"),(0,s.jsx)(o.xI,{control:b,name:"numberFormat.average",render:eT},"numberFormat.average")]})}),f[22]=b,f[23]=y.output,f[24]=x):x=f[24],f[25]!==h||f[26]!==p||f[27]!==x||f[28]!==c?(g=(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(S.B,{style:t,children:[c,h,p,x]})}),f[25]=h,f[26]=p,f[27]=x,f[28]=c,f[29]=g):g=f[29],g};function ew(e){let{field:t}=e;return(0,s.jsx)(ex.k,{...t,w:80,label:"Symbol",placeholder:"$"})}function eE(e){return`Decimals: ${e}`}function eC(e){let{field:t}=e,{value:r,onChange:n}=t;return(0,s.jsx)(eg.A,{mb:"xl",min:0,max:10,label:eE,marks:[{value:0,label:"0"},{value:10,label:"10"}],value:r??2,onChange:n})}function ek(e){let{field:t}=e,{value:r,onChange:n,...a}=t;return(0,s.jsx)(eu.S,{...a,size:"xs",label:"Decimal base",description:"Use 1KB = 1000 bytes",checked:r,onChange:n})}function eN(e){let{field:t}=e,{value:r,onChange:n,...a}=t,l=[{value:"1",label:"Seconds"},{value:"0.001",label:"Milliseconds"},{value:"0.000001",label:"Microseconds"},{value:"0.000000001",label:"Nanoseconds"}],i=l.find(e=>parseFloat(e.value)===r)?.value??"1";return(0,s.jsx)(ep.m,{...a,size:"sm",label:"Input unit",value:i,onChange:e=>n(parseFloat(e.target.value)),data:l})}function eA(e){let{field:t}=e,{value:r,onChange:n,...a}=t;return(0,s.jsx)(eu.S,{...a,size:"xs",label:"Separate thousands",description:"For example: 1,234,567",checked:r,onChange:n})}function eT(e){let{field:t}=e,{value:r,onChange:n,...a}=t;return(0,s.jsx)(eu.S,{...a,size:"xs",label:"Large number format",description:"For example: 1.2m",checked:r,onChange:n})}function e$({numberFormat:e,alignDateRangeToGranularity:t,compareToPreviousPeriod:r,fillNulls:s}){return{numberFormat:e??e_,alignDateRangeToGranularity:null==t||t,fillNulls:s??0,compareToPreviousPeriod:r??!1}}function eR(e){let t,r,a,l,i,c,d,u,m,p,b,y,j,_,w,E=(0,n.c)(42),{settings:C,opened:k,displayType:N,onChange:A,onClose:T,previousDateRange:$}=e;E[0]!==C?(t=e$(C),E[0]=C,E[1]=t):t=E[1],E[2]!==t?(r={defaultValues:t},E[2]=t,E[3]=r):r=E[3];let{control:R,handleSubmit:z,register:I,reset:L,setValue:M}=(0,o.mN)(r);E[4]!==R?(a={control:R,name:"fillNulls"},E[4]=R,E[5]=a):a=E[5];let D=(0,o.FH)(a);E[6]!==D?(l=(0,B.xu)(D),E[6]=D,E[7]=l):l=E[7];let F=l;E[8]!==T||E[9]!==L||E[10]!==C?(i=()=>{L(e$(C)),T()},E[8]=T,E[9]=L,E[10]=C,E[11]=i):i=E[11];let O=i;E[12]!==z||E[13]!==A||E[14]!==T?(c=()=>{z(A)(),T()},E[12]=z,E[13]=A,E[14]=T,E[15]=c):c=E[15];let P=c;E[16]!==L?(d=()=>{L(e$({}))},E[16]=L,E[17]=d):d=E[17];let W=d,V=N===h.t2.Line||N===h.t2.StackedBar;return E[18]!==F||E[19]!==V||E[20]!==$||E[21]!==I||E[22]!==M?(u=V&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eu.S,{size:"xs",label:"Show Complete Intervals",...I("alignDateRangeToGranularity")}),(0,s.jsx)(v.a,{children:(0,s.jsx)(eu.S,{size:"xs",label:"Fill Missing Intervals with Zero",checked:F,onChange:e=>{M("fillNulls",!!e.currentTarget.checked&&0)}})}),(0,s.jsx)(eu.S,{size:"xs",label:"Compare to Previous Period",description:$&&(0,s.jsxs)(s.Fragment,{children:["(",(0,s.jsx)(eh.H,{value:$[0],format:"short"})," - ",(0,s.jsx)(eh.H,{value:$[1],format:"short"}),")"]}),...I("compareToPreviousPeriod")}),(0,s.jsx)(g.c,{})]}),E[18]=F,E[19]=V,E[20]=$,E[21]=I,E[22]=M,E[23]=u):u=E[23],E[24]!==R?(m=(0,s.jsx)(eS,{control:R}),E[24]=R,E[25]=m):m=E[25],E[26]===Symbol.for("react.memo_cache_sentinel")?(p=(0,s.jsx)(g.c,{}),E[26]=p):p=E[26],E[27]!==W?(b=(0,s.jsx)(x.$,{type:"submit",variant:"secondary",onClick:W,children:"Reset to Defaults"}),E[27]=W,E[28]=b):b=E[28],E[29]!==P?(y=(0,s.jsx)(x.$,{type:"submit",variant:"primary",onClick:P,children:"Apply"}),E[29]=P,E[30]=y):y=E[30],E[31]!==b||E[32]!==y?(j=(0,s.jsxs)(f.Y,{gap:"xs",mt:"xs",justify:"space-between",children:[b,y]}),E[31]=b,E[32]=y,E[33]=j):j=E[33],E[34]!==j||E[35]!==u||E[36]!==m?(_=(0,s.jsxs)(S.B,{children:[u,m,p,j]}),E[34]=j,E[35]=u,E[36]=m,E[37]=_):_=E[37],E[38]!==O||E[39]!==k||E[40]!==_?(w=(0,s.jsx)(em._,{title:"Display Settings",opened:k,onClose:O,position:"right",children:_}),E[38]=O,E[39]=k,E[40]=_,E[41]=w):w=E[41],w}var ez=r(91148),eI=r(75359),eL=r(71781),eM=r(43085),eD=r(8737),eF=r(94720),eO=r(53993),eP=r(22599),eW=r(39785),eV=r(31097),eH=r(23195),eB=r(41279),eq=r(9385),eX=r(70114),eG=r(23474);let eK={ResourceAttributes:"Resource",Attributes:"Attributes",ScopeAttributes:"Scope"},eJ={s:"Seconds",ms:"Milliseconds",us:"Microseconds",ns:"Nanoseconds",min:"Minutes",h:"Hours",d:"Days",wk:"Weeks",mo:"Months",a:"Years",By:"Bytes",KiBy:"Kibibytes",MiBy:"Mebibytes",GiBy:"Gibibytes",TiBy:"Tebibytes",kBy:"Kilobytes",MBy:"Megabytes",GBy:"Gigabytes",TBy:"Terabytes",bit:"Bits",Kibit:"Kibibits",Mibit:"Mebibits",Gibit:"Gibibits",Hz:"Hertz",kHz:"Kilohertz",MHz:"Megahertz",GHz:"Gigahertz",Cel:"Celsius",K:"Kelvin","[degF]":"Fahrenheit","%":"Percent",1:"Count","{request}":"Requests","{connection}":"Connections","{error}":"Errors","{packet}":"Packets","{thread}":"Threads","{process}":"Processes","{message}":"Messages","{operation}":"Operations","{call}":"Calls","{fault}":"Faults","{cpu}":"CPUs",m:"Meters",km:"Kilometers",g:"Grams",kg:"Kilograms",A:"Amperes",V:"Volts",W:"Watts",kW:"Kilowatts",J:"Joules",kJ:"Kilojoules"};function eZ(e){let t,r,l,i,o,c,d,u,m,g,y,v,j,_,w,E,C=(0,n.c)(47),{databaseName:k,metricType:N,metricName:A,tableSource:T,attribute:$,language:R,onAddToWhere:z,onBack:I,onAddToGroupBy:L}=e,[M,D]=(0,a.useState)(""),[F]=(0,eW.o)(M,300);C[0]!==$.category||C[1]!==$.name||C[2]!==k||C[3]!==F||C[4]!==A||C[5]!==N||C[6]!==T?(t={databaseName:k,metricType:N,metricName:A,attributeName:$.name,attributeCategory:$.category,searchTerm:F,tableSource:T},C[0]=$.category,C[1]=$.name,C[2]=k,C[3]=F,C[4]=A,C[5]=N,C[6]=T,C[7]=t):t=C[7];let{data:O,isLoading:P}=(({databaseName:e,metricType:t,metricName:r,attributeName:s,attributeCategory:n,searchTerm:a,tableSource:l,enabled:i=!0})=>{let o=l?(0,er.U6)(l,t)??"":"",c=!!(i&&e&&o&&t&&r&&s&&n&&l&&l?.kind===h.GL.Metric);return(0,ee.I)({queryKey:["metric-attribute-values",r,t,s,n,a,l],queryFn:async({signal:t})=>{if(!c)return[];let i=(0,et.W)(),d=a?(0,Q.kg)` AND ${n}[${{String:s}}] ILIKE ${{String:`%${a}%`}}`:(0,Q.kg)``,u=(0,Q.kg)`
        SELECT DISTINCT ${n}[${{String:s}}] as value
        FROM ${(0,Q.k$)({database:e,table:o})}
        WHERE MetricName = ${{String:r}}
          AND ${n}[${{String:s}}] != ''
          ${d}
        ORDER BY value
        LIMIT ${{Int32:100}}
      `,m=await i.query({query:u.sql,query_params:u.params,format:"JSON",abort_signal:t,connectionId:l.connection,clickhouse_settings:{max_execution_time:60,timeout_overflow_mode:"break"}}).then(e=>e.json());return m?.data?m.data.map(e=>e.value).filter(Boolean):[]},enabled:c,staleTime:3e5})})(t);C[8]!==$.category||C[9]!==$.name||C[10]!==R||C[11]!==z?(r=e=>{var t,r;z((t=$.category,r=$.name,"sql"===R?`${t}['${r}'] = '${e}'`:`${t}.${r}:"${e}"`))},C[8]=$.category,C[9]=$.name,C[10]=R,C[11]=z,C[12]=r):r=C[12];let W=r;C[13]!==$.category||C[14]!==$.name||C[15]!==L?(l=()=>{var e,t;L((e=$.category,t=$.name,`${e}['${t}']`))},C[13]=$.category,C[14]=$.name,C[15]=L,C[16]=l):l=C[16];let V=l;C[17]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(eV.A,{size:16}),C[17]=i):i=C[17],C[18]!==$.name?(o=(0,s.jsx)(p.E,{size:"sm",fw:500,children:$.name}),C[18]=$.name,C[19]=o):o=C[19];let H=eK[$.category];return C[20]!==H?(c=(0,s.jsx)(eM.E,{size:"xs",variant:"default",children:H}),C[20]=H,C[21]=c):c=C[21],C[22]!==o||C[23]!==c?(d=(0,s.jsxs)(f.Y,{gap:4,children:[i,o,c]}),C[22]=o,C[23]=c,C[24]=d):d=C[24],C[25]!==I||C[26]!==d?(u=(0,s.jsx)(eD.N,{onClick:I,children:d}),C[25]=I,C[26]=d,C[27]=u):u=C[27],C[28]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsx)(eH.A,{size:14}),C[28]=m):m=C[28],C[29]!==V?(g=(0,s.jsx)(x.$,{variant:"secondary",size:"xs",leftSection:m,onClick:V,children:"Group By"}),C[29]=V,C[30]=g):g=C[30],C[31]!==g||C[32]!==u?(y=(0,s.jsxs)(f.Y,{justify:"space-between",children:[u,g]}),C[31]=g,C[32]=u,C[33]=y):y=C[33],C[34]===Symbol.for("react.memo_cache_sentinel")?(v=(0,s.jsx)(eB.A,{size:14}),C[34]=v):v=C[34],C[35]===Symbol.for("react.memo_cache_sentinel")?(j=e=>D(e.currentTarget.value),C[35]=j):j=C[35],C[36]!==M?(_=(0,s.jsx)(ex.k,{size:"xs",placeholder:"Search values...",leftSection:v,value:M,onChange:j}),C[36]=M,C[37]=_):_=C[37],C[38]!==W||C[39]!==P||C[40]!==M||C[41]!==O?(w=P?(0,s.jsx)(b.s,{justify:"center",py:"md",children:(0,s.jsx)(eF.a,{size:"sm"})}):O&&O.length>0?(0,s.jsx)(eO.F.Autosize,{mah:200,children:(0,s.jsx)(S.B,{gap:4,children:O.map(e=>(0,s.jsxs)(f.Y,{justify:"space-between",py:4,px:"xs",style:{borderRadius:4,cursor:"pointer"},className:"hover-highlight",children:[(0,s.jsx)(p.E,{size:"xs",style:{wordBreak:"break-all"},children:e}),(0,s.jsx)(x.$,{variant:"secondary",size:"compact-xs",leftSection:(0,s.jsx)(eq.A,{size:12}),onClick:()=>W(e),children:"Where"})]},e))})}):(0,s.jsx)(p.E,{size:"xs",c:"dimmed",ta:"center",py:"md",children:M?"No matching values found":"No values found"}),C[38]=W,C[39]=P,C[40]=M,C[41]=O,C[42]=w):w=C[42],C[43]!==y||C[44]!==_||C[45]!==w?(E=(0,s.jsxs)(S.B,{gap:"xs",children:[y,_,w]}),C[43]=y,C[44]=_,C[45]=w,C[46]=E):E=C[46],E}function eY(e){let t,r,l,i,o,c,d,u,m=(0,n.c)(16),{attributeKeys:h,onSelectAttribute:x}=e,[g,y]=(0,a.useState)("");e:{let e;if(!g){t=h;break e}if(m[0]!==h||m[1]!==g){let t=g.toLowerCase();e=h.filter(e=>e.name.toLowerCase().includes(t)),m[0]=h,m[1]=g,m[2]=e}else e=m[2];t=e}let j=t;if(m[3]!==j){for(let e of(r={ResourceAttributes:[],Attributes:[],ScopeAttributes:[]},j))r[e.category].push(e);m[3]=j,m[4]=r}else r=m[4];let w=r;m[5]===Symbol.for("react.memo_cache_sentinel")?(l=["ResourceAttributes","Attributes","ScopeAttributes"],m[5]=l):l=m[5];let E=l;return m[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(eB.A,{size:14}),m[6]=i):i=m[6],m[7]===Symbol.for("react.memo_cache_sentinel")?(o=e=>y(e.currentTarget.value),m[7]=o):o=m[7],m[8]!==g?(c=(0,s.jsx)(ex.k,{size:"xs",placeholder:"Search attributes...",leftSection:i,value:g,onChange:o}),m[8]=g,m[9]=c):c=m[9],m[10]!==w||m[11]!==x?(d=(0,s.jsx)(eO.F.Autosize,{mah:250,children:(0,s.jsx)(S.B,{gap:"sm",children:E.map(e=>{let t=w[e];return 0===t.length?null:(0,s.jsxs)(v.a,{children:[(0,s.jsxs)(f.Y,{gap:"xs",mb:4,children:[(0,s.jsx)(p.E,{size:"xs",fw:600,c:"dimmed",children:eK[e]}),(0,s.jsx)(eM.E,{size:"xs",variant:"default",children:t.length})]}),(0,s.jsx)(b.s,{gap:6,wrap:"wrap",children:t.map(e=>(0,s.jsx)(eD.N,{onClick:()=>x(e),children:(0,s.jsx)(_.t,{py:4,px:8,withBorder:!0,style:{cursor:"pointer"},className:"hover-highlight",children:(0,s.jsxs)(f.Y,{gap:4,children:[(0,s.jsx)(p.E,{size:"xs",children:e.name}),(0,s.jsx)(eX.A,{size:12})]})})},`${e.category}:${e.name}`))})]},e)})})}),m[10]=w,m[11]=x,m[12]=d):d=m[12],m[13]!==c||m[14]!==d?(u=(0,s.jsxs)(S.B,{gap:"xs",children:[c,d]}),m[13]=c,m[14]=d,m[15]=u):u=m[15],u}function eU(e){let t,r,l,i,o,c,d,u,m,h,x,g,y,j,S=(0,n.c)(41),{databaseName:w,metricName:E,tableSource:C,metricType:k,attributeKeys:N,isLoading:T,language:$,metricMetadata:R,onAddToWhere:z,onAddToGroupBy:I}=e,[L,M]=(0,A.j)(!1),{toggle:D}=M,[F,O]=(0,a.useState)(null);S[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{O(e)},S[0]=t):t=S[0];let P=t;S[1]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{O(null)},S[1]=r):r=S[1];let W=r;if(!E)return null;S[2]===Symbol.for("react.memo_cache_sentinel")?(l={flex:1,minWidth:0},S[2]=l):l=S[2],S[3]!==R||S[4]!==E?(i=R?.description?(0,s.jsx)(p.E,{size:"xs",c:"dimmed",truncate:!0,children:R.description}):(0,s.jsx)(p.E,{size:"xs",c:"dimmed",children:E}),S[3]=R,S[4]=E,S[5]=i):i=S[5],S[6]!==R?(o=R?.unit&&(0,s.jsxs)(f.Y,{gap:4,mt:2,children:[(0,s.jsx)(p.E,{size:"xs",c:"dimmed",children:"Unit:"}),(0,s.jsx)(eM.E,{size:"xs",variant:"light",children:function(e){if(eJ[e])return eJ[e];if(e.includes("/")){let[t,r]=e.split("/"),s=eJ[t]||t,n=eJ[r]||r,a=n.endsWith("s")?n.slice(0,-1):n;return`${s}/${a}`}return e}(R.unit)})]}),S[6]=R,S[7]=o):o=S[7],S[8]!==i||S[9]!==o?(c=(0,s.jsxs)(v.a,{style:l,children:[i,o]}),S[8]=i,S[9]=o,S[10]=c):c=S[10],S[11]!==N.length?(d=N.length>0&&(0,s.jsxs)(eM.E,{size:"xs",variant:"light",children:[N.length," attributes"]}),S[11]=N.length,S[12]=d):d=S[12];let V=L?"rotate(180deg)":"rotate(0deg)";return S[13]!==V?(u=(0,s.jsx)(eG.A,{size:16,style:{transform:V,transition:"transform 200ms"}}),S[13]=V,S[14]=u):u=S[14],S[15]!==u||S[16]!==d?(m=(0,s.jsxs)(f.Y,{gap:"xs",wrap:"nowrap",children:[d,u]}),S[15]=u,S[16]=d,S[17]=m):m=S[17],S[18]!==m||S[19]!==c?(h=(0,s.jsxs)(f.Y,{justify:"space-between",wrap:"nowrap",children:[c,m]}),S[18]=m,S[19]=c,S[20]=h):h=S[20],S[21]!==h||S[22]!==D?(x=(0,s.jsx)(eD.N,{onClick:D,w:"100%",children:h}),S[21]=h,S[22]=D,S[23]=x):x=S[23],S[24]!==N||S[25]!==w||S[26]!==T||S[27]!==$||S[28]!==E||S[29]!==k||S[30]!==I||S[31]!==z||S[32]!==F||S[33]!==C?(g=(0,s.jsx)(v.a,{pt:"xs",children:T?(0,s.jsx)(b.s,{justify:"center",py:"md",children:(0,s.jsx)(eF.a,{size:"sm"})}):0===N.length?(0,s.jsx)(p.E,{size:"xs",c:"dimmed",ta:"center",py:"md",children:"No attributes found for this metric"}):F?(0,s.jsx)(eZ,{databaseName:w,metricType:k,metricName:E,tableSource:C,attribute:F,language:$,onAddToWhere:z,onBack:W,onAddToGroupBy:I}):(0,s.jsx)(eY,{attributeKeys:N,onSelectAttribute:P})}),S[24]=N,S[25]=w,S[26]=T,S[27]=$,S[28]=E,S[29]=k,S[30]=I,S[31]=z,S[32]=F,S[33]=C,S[34]=g):g=S[34],S[35]!==L||S[36]!==g?(y=(0,s.jsx)(eP.S,{in:L,children:g}),S[35]=L,S[36]=g,S[37]=y):y=S[37],S[38]!==x||S[39]!==y?(j=(0,s.jsxs)(_.t,{withBorder:!0,p:"xs",mt:"xs",children:[x,y]}),S[38]=x,S[39]=y,S[40]=j):j=S[40],j}var eQ=r(10342),e0=r(85508),e1=r(56343),e2=r(78550);let e3=({dateRange:e,metricSource:t,metricType:r})=>{let s=new Date,n=e||[(0,eQ.A)(s,1),s],a=(0,e0.A)(n[1],n[0]);if(a<1){let e=(0,e1.A)(n[0],1);n=e>s?[(0,eQ.A)(n[1],1),n[1]]:[n[0],e]}else a>3&&(n=[(0,eQ.A)(n[1],3),n[1]]);return{from:{databaseName:t.from.databaseName,tableName:t.metricTables?.[r]??""},where:"",whereLanguage:"sql",select:"",timestampValueExpression:t.timestampValueExpression??"",connection:t.connection,dateRange:n}};function e4(e){let t,r,a,l,i=(0,n.c)(24),{metricType:o,metricName:c,setMetricType:d,setMetricName:u,isLoading:m,isError:p,metricSource:x,error:g,onFocus:f,"data-testid":b}=e,{gaugeMetrics:y,histogramMetrics:v,sumMetrics:j}=function(e,t){let r,s,a,l,i,o,c,d,u,m,p,x=(0,n.c)(26);void 0!==x[0]||x[1]!==e?(r=e3({dateRange:void 0,metricSource:e,metricType:h.SX.Gauge}),x[0]=void 0,x[1]=e,x[2]=r):r=x[2],void 0!==x[3]||x[4]!==e?(s=e3({dateRange:void 0,metricSource:e,metricType:h.SX.Histogram}),x[3]=void 0,x[4]=e,x[5]=s):s=x[5],void 0!==x[6]||x[7]!==e?(a=e3({dateRange:void 0,metricSource:e,metricType:h.SX.Sum}),x[6]=void 0,x[7]=e,x[8]=a):a=x[8],x[9]!==r||x[10]!==s||x[11]!==a?(l={gaugeConfig:r,histogramConfig:s,sumConfig:a},x[9]=r,x[10]=s,x[11]=a,x[12]=l):l=x[12];let{gaugeConfig:g,histogramConfig:f,sumConfig:b}=l;x[13]===Symbol.for("react.memo_cache_sentinel")?(i=["MetricName"],x[13]=i):i=x[13],x[14]!==g?(o={chartConfig:g,keys:i,limit:3e3,disableRowLimit:!0},x[14]=g,x[15]=o):o=x[15];let{data:y}=(0,e2.lo)(o);x[16]===Symbol.for("react.memo_cache_sentinel")?(c=["MetricName"],x[16]=c):c=x[16],x[17]!==f?(d={chartConfig:f,keys:c,limit:3e3,disableRowLimit:!0},x[17]=f,x[18]=d):d=x[18];let{data:v}=(0,e2.lo)(d);x[19]===Symbol.for("react.memo_cache_sentinel")?(u=["MetricName"],x[19]=u):u=x[19],x[20]!==b?(m={chartConfig:b,keys:u,limit:3e3,disableRowLimit:!0},x[20]=b,x[21]=m):m=x[21];let{data:j}=(0,e2.lo)(m),_=y?.[0].value,S=v?.[0].value,w=j?.[0].value;return x[22]!==_||x[23]!==S||x[24]!==w?(p={gaugeMetrics:_,histogramMetrics:S,sumMetrics:w},x[22]=_,x[23]=S,x[24]=w,x[25]=p):p=x[25],p}(x);if(i[0]!==y||i[1]!==v||i[2]!==c||i[3]!==o||i[4]!==j){if(t=[...y?.map(e7)??[],...v?.map(e6)??[],...j?.map(e5)??[]],c&&!t.find(e=>e.value!==`${c}:::::::${o}`)){let e,r,s=`${c}:::::::${o}`;i[6]!==o?(e=(0,er.Zr)(o),i[6]=o,i[7]=e):e=i[7];let n=`${c} (${e})`;i[8]!==s||i[9]!==n?(r={value:s,label:n},i[8]=s,i[9]=n,i[10]=r):r=i[10],t.push(r)}i[0]=y,i[1]=v,i[2]=c,i[3]=o,i[4]=j,i[5]=t}else t=i[5];let _=t,S=c&&o?`${c}:::::::${o}`:null,w=m||p,E=m?"Loading...":p?"Unable to load metrics":"Select a metric...";return i[11]===Symbol.for("react.memo_cache_sentinel")?(r={position:"bottom-start",width:"auto",zIndex:1111},i[11]=r):r=i[11],i[12]!==u||i[13]!==d?(a=e=>{let[t,r]=e?.split(":::::::")??[];u(t??""),r&&d(r.toLowerCase())},i[12]=u,i[13]=d,i[14]=a):a=i[14],i[15]!==S||i[16]!==b||i[17]!==g||i[18]!==f||i[19]!==_||i[20]!==w||i[21]!==E||i[22]!==a?(l=(0,s.jsx)(eo.l,{disabled:w,variant:"filled",placeholder:E,data:_,limit:100,comboboxProps:r,value:S,searchable:!0,clearable:!0,onChange:a,onFocus:f,error:g,"data-testid":b}),i[15]=S,i[16]=b,i[17]=g,i[18]=f,i[19]=_,i[20]=w,i[21]=E,i[22]=a,i[23]=l):l=i[23],l}function e5(e){return{value:`${e}:::::::sum`,label:`${e} (Sum)`}}function e6(e){return{value:`${e}:::::::histogram`,label:`${e} (Histogram)`}}function e7(e){return{value:`${e}:::::::gauge`,label:`${e} (Gauge)`}}var e8=r(27166),e9=r(62801),te=r(60665),tt=r(93251),tr=r(97344);let ts="_new";function tn({chartConfig:e,opened:t,onClose:r}){let n=(0,tt.jE)(),{data:l,isLoading:i}=(0,tr.L9)(),c=(0,tr.mG)(),d=(0,tr.vY)(),{control:u,handleSubmit:m,reset:g,formState:b}=(0,o.mN)({defaultValues:{dashboardId:"",newDashboardName:""}}),y=(0,o.FH)({control:u,name:"dashboardId"})===ts;(0,a.useEffect)(()=>{t||g()},[t,g]);let j=[...l?.map(e=>({value:e.id,label:e.name}))||[],{value:ts,label:"Create New Dashboard"}],_=t=>{var r;let s=0===(r=t.tiles).length?{x:0,y:0}:{x:0,y:Math.max(...r.map(e=>e.y+e.h))},n=function(e){switch(e){case h.t2.Line:case h.t2.StackedBar:return{w:12,h:10};case h.t2.Table:case h.t2.Search:return{w:24,h:12};case h.t2.Number:return{w:6,h:6};case h.t2.Markdown:return{w:12,h:8};case h.t2.Heatmap:default:return{w:12,h:10}}}(e.displayType);return{id:Math.floor(1e8*Math.random()).toString(36),x:s.x,y:s.y,w:n.w,h:n.h,config:e}},w=m(async e=>{try{if(y){if(!e.newDashboardName.trim())return void te.$e.show({color:"red",title:"Validation Error",message:"Dashboard name is required"});let t=_({id:"",name:"",tiles:[],tags:[]}),n=await c.mutateAsync({name:e.newDashboardName.trim(),tiles:[t],tags:[]});te.$e.show({color:"green",title:"Chart saved to dashboard",message:(0,s.jsxs)(s.Fragment,{children:["View on"," ",(0,s.jsx)("a",{href:`/dashboards/${n.id}`,style:{color:"inherit",textDecoration:"underline"},children:n.name})]}),autoClose:5e3}),r()}else{if(!e.dashboardId)return void te.$e.show({color:"red",title:"Validation Error",message:"Please select a dashboard"});let t=n.getQueryData(["dashboards"]),a=t?.find(t=>t.id===e.dashboardId);if(!a)return void te.$e.show({color:"red",title:"Error",message:"Dashboard not found. Please refresh and try again."});let l=_(a);await d.mutateAsync({id:a.id,tiles:[...a.tiles,l]}),te.$e.show({color:"green",title:"Chart saved to dashboard",message:(0,s.jsxs)(s.Fragment,{children:["View on"," ",(0,s.jsx)("a",{href:`/dashboards/${a.id}`,style:{color:"inherit",textDecoration:"underline"},children:a.name})]}),autoClose:5e3}),r()}}catch(e){te.$e.show({color:"red",title:"Error saving chart",message:e instanceof Error?e.message:"Failed to save chart to dashboard"})}}),E=c.isPending||d.isPending;return(0,s.jsx)(e8.a,{opened:t,onClose:r,title:"Save to Dashboard",size:"lg",children:(0,s.jsx)("form",{onSubmit:w,children:(0,s.jsxs)(S.B,{gap:"md",children:[(0,s.jsx)(e9.Z,{withBorder:!0,padding:"sm",children:(0,s.jsxs)(S.B,{gap:"xs",children:[(0,s.jsx)(p.E,{size:"sm",fw:500,children:"Chart Preview"}),(0,s.jsxs)(f.Y,{gap:"xs",children:[(0,s.jsx)(p.E,{size:"sm",c:"dimmed",children:"Name:"}),(0,s.jsx)(p.E,{size:"sm",children:e.name||"Untitled Chart"})]}),e.displayType&&(0,s.jsxs)(f.Y,{gap:"xs",children:[(0,s.jsx)(p.E,{size:"sm",c:"dimmed",children:"Type:"}),(0,s.jsx)(p.E,{size:"sm",children:e.displayType})]})]})}),(0,s.jsxs)(v.a,{children:[(0,s.jsx)(p.E,{size:"xs",mb:"xs",children:"Dashboard *"}),(0,s.jsx)(o.xI,{name:"dashboardId",control:u,rules:{required:!0},render:({field:e})=>(0,s.jsx)(eo.l,{...e,data:j,placeholder:"Select a dashboard",searchable:!0,disabled:i||E,nothingFoundMessage:"No dashboards found"})})]}),y&&(0,s.jsxs)(v.a,{children:[(0,s.jsx)(p.E,{size:"xs",mb:"xs",children:"Dashboard Name *"}),(0,s.jsx)(o.xI,{name:"newDashboardName",control:u,rules:{required:!0},render:({field:e})=>(0,s.jsx)(ex.k,{...e,placeholder:"Enter dashboard name",disabled:E})})]}),(0,s.jsxs)(f.Y,{justify:"flex-end",mt:"md",children:[(0,s.jsx)(x.$,{variant:"subtle",onClick:r,disabled:E,children:"Cancel"}),(0,s.jsx)(x.$,{type:"submit",loading:E,children:"Save to Dashboard"})]})]})})})}var ta=r(86761),tl=r(57478);let ti=(e,t)=>`${e}${t}`;function to(e,t){let r=t.kind===h.GL.Metric;return{...e,select:!r&&Array.isArray(e.select)?e.select.map(e=>i()(e,["metricName","metricType"])):e.select,metricTables:r?e.metricTables:void 0,having:e.displayType===h.t2.Table?e.having:void 0,orderBy:e.displayType===h.t2.Table?e.orderBy:void 0}}let tc=(e,t,r)=>{if(e?.kind===h.GL.Metric&&Array.isArray(t)){let e=!1;return t.forEach((t,s)=>{t.metricType&&!t.metricName&&(r(ti(`series.${s}.`,"metricName"),{type:"manual",message:"Please select a metric name"}),e=!0)}),e}return!1},td=function(e){let t,r,l,i,c,d,u,m,y,v,j,_,S,w,E,C,k,N,A,z,I,L,M,D,F,O,P,W,V,H,q,X,G=(0,n.c)(138),{control:K,databaseName:Z,dateRange:Y,connectionId:U,index:en,namePrefix:ea,onRemoveSeries:el,onSwapSeries:ei,onSubmit:eo,setValue:ec,showGroupBy:eu,showHaving:em,tableName:eh,parentRef:ep,length:ex,tableSource:eg,errors:ef,clearErrors:eb}=e,ey=`${ea}aggFn`;G[0]!==K||G[1]!==ey?(t={control:K,name:ey},G[0]=K,G[1]=ey,G[2]=t):t=G[2];let ev=(0,o.FH)(t),ej=`${ea}aggConditionLanguage`;G[3]!==K||G[4]!==ej?(r={control:K,name:ej,defaultValue:"lucene"},G[3]=K,G[4]=ej,G[5]=r):r=G[5];let e_=(0,o.FH)(r),eS=`${ea}metricType`;G[6]!==K||G[7]!==eS?(l={control:K,name:eS},G[6]=K,G[7]=eS,G[8]=l):l=G[8];let ew=(0,o.FH)(l);G[9]!==ew||G[10]!==ea||G[11]!==ec||G[12]!==eg?.kind?(i=()=>{eg?.kind!==h.GL.Metric||ew||ec(`${ea}metricType`,h.SX.Gauge)},G[9]=ew,G[10]=ea,G[11]=ec,G[12]=eg?.kind,G[13]=i):i=G[13];let eE=eg?.kind;G[14]!==ew||G[15]!==ea||G[16]!==ec||G[17]!==eE?(c=[eE,ew,ea,ec],G[14]=ew,G[15]=ea,G[16]=ec,G[17]=eE,G[18]=c):c=G[18],(0,a.useEffect)(i,c),G[19]!==eh||G[20]!==ew||G[21]!==eg?(d=eg?.kind===h.GL.Metric?(0,er.U6)(eg,ew):eh,G[19]=eh,G[20]=ew,G[21]=eg,G[22]=d):d=G[22];let eC=d,ek=`${ea}metricName`;G[23]!==K||G[24]!==ek?(u={control:K,name:ek},G[23]=K,G[24]=ek,G[25]=u):u=G[25];let eN=(0,o.FH)(u),eA=`${ea}aggCondition`;G[26]!==K||G[27]!==eA?(m={control:K,name:eA},G[26]=K,G[27]=eA,G[28]=m):m=G[28];let eT=(0,o.FH)(m);G[29]!==K?(y={control:K,name:"groupBy"},G[29]=K,G[30]=y):y=G[30];let e$=(0,o.FH)(y),eR="sql"===e_;G[31]!==Z||G[32]!==eN||G[33]!==ew||G[34]!==eR||G[35]!==eg?(v={databaseName:Z,metricType:ew,metricName:eN,tableSource:eg,isSql:eR},G[31]=Z,G[32]=eN,G[33]=ew,G[34]=eR,G[35]=eg,G[36]=v):v=G[36];let{data:ez,isLoading:eI}=(({databaseName:e,metricType:t,metricName:r,tableSource:s,isSql:n})=>{let a=s?(0,er.U6)(s,t)??"":"",l=!!(e&&a&&t&&s&&s?.kind===h.GL.Metric);return(0,ee.I)({queryKey:["metric-attributes",t,r,n,s],queryFn:async({signal:t})=>{if(!l)return[];let i=(0,et.W)(),o=(0,Q.kg)`
        SELECT DISTINCT
          ScopeAttributes,
          ResourceAttributes,
          Attributes
        FROM ${(0,Q.k$)({database:e,table:a})}
        WHERE MetricName=${{String:r}}
        LIMIT ${{Int32:1e4}}
      `,c=await i.query({query:o.sql,query_params:o.params,format:"JSON",abort_signal:t,connectionId:s.connection}).then(e=>e.json());if(c?.data){var d=c.data;try{let e=new Set;for(let t of d)t.ScopeAttributes&&Object.entries(t.ScopeAttributes).forEach(([t,r])=>{let s=(0,er.ji)("ScopeAttributes",t,r,n);e.add(s)}),t.ResourceAttributes&&Object.entries(t.ResourceAttributes).forEach(([t,r])=>{let s=(0,er.ji)("ResourceAttributes",t,r,n);e.add(s)}),t.Attributes&&Object.entries(t.Attributes).forEach(([t,r])=>{let s=(0,er.ji)("Attributes",t,r,n);e.add(s)});return Array.from(e)}catch(e){return console.error("Error parsing metric autocomplete attributes",e),[]}}return[]},enabled:l})})(v);G[37]!==ez?(j=ez??[],G[37]=ez,G[38]=j):j=G[38],G[39]!==j?(_=(e=>{let t=["ResourceAttributes","ScopeAttributes","Attributes"],r=new Set,s=[];for(let n of e)for(let e of t){if(!n.startsWith(e))continue;let t=null,a=n.match(RegExp(`^${e}\\['([^']+)'\\]`));if(a)t=a[1];else{let r=n.match(RegExp(`^${e}\\.([^:]+):`));r&&(t=r[1])}if(t){let n=`${e}:${t}`;r.has(n)||(r.add(n),s.push({name:t,category:e}))}break}return s.sort((e,t)=>{if(e.category!==t.category){let r=["ResourceAttributes","Attributes","ScopeAttributes"];return r.indexOf(e.category)-r.indexOf(t.category)}return e.name.localeCompare(t.name)}),s})(j),G[39]=j,G[40]=_):_=G[40];let eM=_;G[41]!==Z||G[42]!==eN||G[43]!==ew||G[44]!==eg?(S={databaseName:Z,metricType:ew,metricName:eN,tableSource:eg},G[41]=Z,G[42]=eN,G[43]=ew,G[44]=eg,G[45]=S):S=G[45];let{data:eD}=(({databaseName:e,metricType:t,metricName:r,tableSource:s})=>{let n=s?(0,er.U6)(s,t)??"":"",a=!!(e&&t&&r&&s&&n&&s?.kind===h.GL.Metric);return(0,ee.I)({queryKey:["metric-metadata",e,t,r],queryFn:async({signal:t})=>{if(!a)return null;let l=(0,et.W)(),i=(0,Q.kg)`
        SELECT
          MetricUnit,
          MetricDescription
        FROM ${(0,Q.k$)({database:e,table:n})}
        WHERE MetricName = ${{String:r}}
        LIMIT 1
      `,o=await l.query({query:i.sql,query_params:i.params,format:"JSON",abort_signal:t,connectionId:s.connection}).then(e=>e.json());return o?.data?.[0]?{unit:o.data[0].MetricUnit||"",description:o.data[0].MetricDescription||""}:null},enabled:a,staleTime:3e5})})(S);G[46]!==eT||G[47]!==ea||G[48]!==eo||G[49]!==ec?(w=e=>{let t=eT||"";ec(`${ea}aggCondition`,t?`${t} AND ${e}`:e),eo()},G[46]=eT,G[47]=ea,G[48]=eo,G[49]=ec,G[50]=w):w=G[50];let eF=w;G[51]!==e$||G[52]!==eo||G[53]!==ec?(E=e=>{let t=e$||"";ec("groupBy",t?`${t}, ${e}`:e),eo()},G[51]=e$,G[52]=eo,G[53]=ec,G[54]=E):E=G[54];let eO=E,eP="none"!==ev,eW=eC??"",eV=U??"",eH=eg?.kind===h.GL.Metric?eN:void 0;G[55]!==Z||G[56]!==eW||G[57]!==eV||G[58]!==eH?(C={databaseName:Z,tableName:eW,connectionId:eV,metricName:eH},G[55]=Z,G[56]=eW,G[57]=eV,G[58]=eH,G[59]=C):C=G[59];let eB=C;G[60]===Symbol.for("react.memo_cache_sentinel")?(k=(0,s.jsx)(p.E,{size:"xxs",children:"Alias"}),N={width:150},G[60]=k,G[61]=N):(k=G[60],N=G[61]);let eq=`${ea}alias`;G[62]!==eo?(A=()=>eo(),G[62]=eo,G[63]=A):A=G[63],G[64]!==K||G[65]!==eq||G[66]!==A?(z=(0,s.jsx)("div",{style:N,children:(0,s.jsx)(eL.M7,{name:eq,control:K,placeholder:"Series alias",onChange:A,size:"xs","data-testid":"series-alias-input"})}),G[64]=K,G[65]=eq,G[66]=A,G[67]=z):z=G[67],G[68]!==en||G[69]!==ei?(I=(en??-1)>0&&(0,s.jsx)(x.$,{variant:"subtle",color:"gray",size:"xxs",onClick:()=>ei(en,en-1),title:"Move up",children:(0,s.jsx)(T.A,{size:14})}),G[68]=en,G[69]=ei,G[70]=I):I=G[70],G[71]!==en||G[72]!==ex||G[73]!==ei?(L=(en??-1)<ex-1&&(0,s.jsx)(x.$,{variant:"subtle",color:"gray",size:"xxs",onClick:()=>ei(en,en+1),title:"Move down",children:(0,s.jsx)($.A,{size:14})}),G[71]=en,G[72]=ex,G[73]=ei,G[74]=L):L=G[74],G[75]!==en||G[76]!==ex||G[77]!==el?(M=((en??-1)>0||ex>1)&&(0,s.jsxs)(x.$,{variant:"subtle",color:"gray",size:"xs",onClick:()=>el(en),children:[(0,s.jsx)(R.A,{size:14,className:"me-2"}),"Remove Series"]}),G[75]=en,G[76]=ex,G[77]=el,G[78]=M):M=G[78],G[79]!==z||G[80]!==I||G[81]!==L||G[82]!==M?(D=(0,s.jsx)(g.c,{label:(0,s.jsxs)(f.Y,{gap:"xs",children:[k,z,I,L,M]}),labelPosition:"right",mb:8,mt:"sm"}),G[79]=z,G[80]=I,G[81]=L,G[82]=M,G[83]=D):D=G[83],G[84]===Symbol.for("react.memo_cache_sentinel")?(F={minWidth:200},G[84]=F):F=G[84];let eX=`${ea}aggFn`,eG=`${ea}level`;return G[85]!==K||G[86]!==eX||G[87]!==eG?(O=(0,s.jsx)("div",{style:F,children:(0,s.jsx)(ed,{aggFnName:eX,quantileLevelName:eG,defaultValue:B.gT[0].value,control:K})}),G[85]=K,G[86]=eX,G[87]=eG,G[88]=O):O=G[88],G[89]!==eb||G[90]!==K||G[91]!==Y||G[92]!==ef?.metricName?.message||G[93]!==eN||G[94]!==ew||G[95]!==ea||G[96]!==ec||G[97]!==eg?(P=eg?.kind===h.GL.Metric&&ew&&(0,s.jsxs)("div",{style:{minWidth:220},children:[(0,s.jsx)(e4,{metricName:eN,dateRange:Y,metricType:ew,setMetricName:e=>{ec(`${ea}metricName`,e),ec(`${ea}valueExpression`,"Value")},setMetricType:e=>ec(`${ea}metricType`,e),metricSource:eg,"data-testid":"metric-name-selector",error:ef?.metricName?.message,onFocus:()=>eb(ti(ea,"metricName"))}),"gauge"===ew&&(0,s.jsx)(b.s,{justify:"end",children:(0,s.jsx)(eL.mh,{control:K,name:`${ea}isDelta`,label:"Delta",size:"xs",className:"mt-2"})})]}),G[89]=eb,G[90]=K,G[91]=Y,G[92]=ef?.metricName?.message,G[93]=eN,G[94]=ew,G[95]=ea,G[96]=ec,G[97]=eg,G[98]=P):P=G[98],G[99]!==ev||G[100]!==K||G[101]!==ea||G[102]!==eo||G[103]!==eB||G[104]!==eg?.kind?(W=eg?.kind!==h.GL.Metric&&"count"!==ev&&(0,s.jsx)("div",{style:{minWidth:220,..."none"===ev&&{flexGrow:2}},children:(0,s.jsx)(J.Z,{tableConnection:eB,control:K,name:`${ea}valueExpression`,placeholder:"SQL Column",onSubmit:eo})}),G[99]=ev,G[100]=K,G[101]=ea,G[102]=eo,G[103]=eB,G[104]=eg?.kind,G[105]=W):W=G[105],G[106]!==e_||G[107]!==ez||G[108]!==K||G[109]!==ea||G[110]!==eo||G[111]!==ep||G[112]!==ec||G[113]!==eu||G[114]!==em||G[115]!==eP||G[116]!==eB?(V=(eP||eu||em)&&(0,s.jsxs)("div",{className:"flex-grow-1 gap-2 align-items-center",style:{display:"grid",gridTemplateColumns:"auto 1fr auto 1fr"},children:[eP&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.E,{size:"sm",children:"Where"}),(0,s.jsx)("div",{style:{gridColumn:em===eu?"span 3":void 0},children:"sql"===e_?(0,s.jsx)(J.Z,{tableConnection:eB,control:K,name:`${ea}aggCondition`,placeholder:"SQL WHERE clause (ex. column = 'foo')",onLanguageChange:e=>ec(`${ea}aggConditionLanguage`,e),additionalSuggestions:ez,language:"sql",onSubmit:eo}):(0,s.jsx)(es.A,{tableConnection:eB,control:K,name:`${ea}aggCondition`,onLanguageChange:e=>ec(`${ea}aggConditionLanguage`,e),language:"lucene",placeholder:"Search your events w/ Lucene ex. column:foo",onSubmit:eo,additionalSuggestions:ez})})]}),eu&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.E,{size:"sm",style:{whiteSpace:"nowrap"},children:"Group By"}),(0,s.jsx)("div",{style:{minWidth:200,maxWidth:"100%",gridColumn:em||eP?void 0:"span 3"},children:(0,s.jsx)(J.Z,{parentRef:ep,tableConnection:eB,control:K,name:"groupBy",placeholder:"SQL Columns",disableKeywordAutocomplete:!0,onSubmit:eo})}),em&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.E,{size:"sm",style:{whiteSpace:"nowrap"},children:"Having"}),(0,s.jsx)("div",{style:{minWidth:300,maxWidth:"100%"},children:(0,s.jsx)(J.Z,{tableConnection:eB,control:K,name:"having",placeholder:"SQL HAVING clause (ex. count() > 100)",disableKeywordAutocomplete:!0,onSubmit:eo})})]})]})]}),G[106]=e_,G[107]=ez,G[108]=K,G[109]=ea,G[110]=eo,G[111]=ep,G[112]=ec,G[113]=eu,G[114]=em,G[115]=eP,G[116]=eB,G[117]=V):V=G[117],G[118]!==O||G[119]!==P||G[120]!==W||G[121]!==V?(H=(0,s.jsxs)(b.s,{gap:"sm",mt:"xs",align:"start",children:[O,P,W,V]}),G[118]=O,G[119]=P,G[120]=W,G[121]=V,G[122]=H):H=G[122],G[123]!==e_||G[124]!==eM||G[125]!==Z||G[126]!==eO||G[127]!==eF||G[128]!==eI||G[129]!==eD||G[130]!==eN||G[131]!==ew||G[132]!==eg?(q=eg?.kind===h.GL.Metric&&eN&&(0,s.jsx)(eU,{databaseName:Z,metricType:ew,metricName:eN,tableSource:eg,attributeKeys:eM,isLoading:eI,language:"sql"===e_?"sql":"lucene",metricMetadata:eD,onAddToWhere:eF,onAddToGroupBy:eO}),G[123]=e_,G[124]=eM,G[125]=Z,G[126]=eO,G[127]=eF,G[128]=eI,G[129]=eD,G[130]=eN,G[131]=ew,G[132]=eg,G[133]=q):q=G[133],G[134]!==D||G[135]!==H||G[136]!==q?(X=(0,s.jsxs)(s.Fragment,{children:[D,H,q]}),G[134]=D,G[135]=H,G[136]=q,G[137]=X):X=G[137],X},tu=d.Ay.object({alert:h.fB.optional()}).passthrough();function tm(e){var t;let r,l,d,N,T,$,R,P,W,V,H,Q,ee,et,eo,ec,ed,eu,em,eh,ep,ex,eg,ef,eb,ey,ev,ej,e_,eS,ew,eE,eC,ek,eN,eA,eT,e$,eM,eD,eF,eO,eP,eW,eV,eH,eB,eq,eX,eG,eK,eJ,eZ,eY,eU,eQ,e0,e1,e2,e3,e4,e5,e6,e7,e8,e9,te,tt,tr,ts=(0,n.c)(250),{dashboardId:ti,chartConfig:tm,displayedTimeInputValue:tp,dateRange:tx,isSaving:tg,onTimeRangeSearch:tf,setChartConfig:tb,setDisplayedTimeInputValue:ty,onSave:tv,onTimeRangeSelect:tj,onClose:t_,"data-testid":tS,submitRef:tw}=e;ts[0]!==tm.select?(r=Array.isArray(tm.select)?tm.select:[],ts[0]=tm.select,ts[1]=r):r=ts[1],ts[2]!==tm||ts[3]!==r?(l={...tm,series:r},ts[2]=tm,ts[3]=r,ts[4]=l):l=ts[4];let tE=l;ts[5]===Symbol.for("react.memo_cache_sentinel")?(d=(0,u.u)(tu),ts[5]=d):d=ts[5],ts[6]!==tE?(N={defaultValues:tE,values:tE,resolver:d},ts[6]=tE,ts[7]=N):N=ts[7];let{control:tC,setValue:tk,handleSubmit:tN,register:tA,setError:tT,clearErrors:t$,formState:tR}=(0,o.mN)(N),{errors:tz}=tR;ts[8]!==tC?(T={control:tC,name:"series"},ts[8]=tC,ts[9]=T):T=ts[9];let{fields:tI,append:tL,remove:tM,swap:tD}=(0,o.jz)(T),[tF,tO]=(0,a.useState)(!1);ts[10]!==tC?($={control:tC,name:"select"},ts[10]=tC,ts[11]=$):$=ts[11];let tP=(0,o.FH)($);ts[12]!==tC?(R={control:tC,name:"source"},ts[12]=tC,ts[13]=R):R=ts[13];let tW=(0,o.FH)(R);ts[14]!==tC?(P={control:tC,name:"whereLanguage"},ts[14]=tC,ts[15]=P):P=ts[15];let tV=(0,o.FH)(P);ts[16]!==tC?(W={control:tC,name:"alert"},ts[16]=tC,ts[17]=W):W=ts[17];let tH=(0,o.FH)(W);ts[18]!==tC?(V={control:tC,name:"seriesReturnType"},ts[18]=tC,ts[19]=V):V=ts[19];let tB=(0,o.FH)(V);ts[20]!==tC?(H={control:tC,name:"groupBy"},ts[20]=tC,ts[21]=H):H=ts[21];let tq=(0,o.FH)(H),tX=(0,o.FH)({control:tC,name:"displayType"})??h.t2.Line;ts[22]!==tC?(Q={control:tC,name:"markdown"},ts[22]=tC,ts[23]=Q):Q=ts[23];let tG=(0,o.FH)(Q);ts[24]!==tC?(ee={control:tC,name:"alert.channel.type"},ts[24]=tC,ts[25]=ee):ee=ts[25];let tK=(0,o.FH)(ee);ts[26]!==tC?(et={control:tC,name:"granularity"},ts[26]=tC,ts[27]=et):et=ts[27];let tJ=(0,o.FH)(et);ts[28]!==tW?(eo={id:tW},ts[28]=tW,ts[29]=eo):eo=ts[29];let{data:tZ}=(0,en.Fo)(eo),tY=tZ?.from.databaseName,tU=tZ?.from.tableName;switch(tX){case h.t2.Search:ec="search";break;case h.t2.Markdown:ec="markdown";break;case h.t2.Table:ec="table";break;case h.t2.Number:ec="number";break;default:ec="time"}let tQ=ec;ts[30]!==tX||ts[31]!==tk?(ed=()=>{tX!==h.t2.Line&&tk("alert",void 0)},eu=[tX,tk],ts[30]=tX,ts[31]=tk,ts[32]=ed,ts[33]=eu):(ed=ts[32],eu=ts[33]),(0,a.useEffect)(ed,eu),ts[34]===Symbol.for("react.memo_cache_sentinel")?(em=["table","time","number"],ts[34]=em):em=ts[34];let t0=em.includes(tQ),t1=tZ?.kind!==h.GL.Metric;ts[35]===Symbol.for("react.memo_cache_sentinel")?(eh=["alignDateRangeToGranularity","fillNulls","compareToPreviousPeriod","numberFormat"],ts[35]=eh):eh=ts[35],ts[36]!==tC?(ep={control:tC,name:eh},ts[36]=tC,ts[37]=ep):ep=ts[37];let[t2,t3,t4,t5]=(0,o.FH)(ep);ts[38]!==t2||ts[39]!==t4||ts[40]!==t3||ts[41]!==t5?(ex={alignDateRangeToGranularity:t2,fillNulls:t3,compareToPreviousPeriod:t4,numberFormat:t5},ts[38]=t2,ts[39]=t4,ts[40]=t3,ts[41]=t5,ts[42]=ex):ex=ts[42];let t6=ex,[t7,t8]=(0,A.j)(!1),{open:t9,close:re}=t8,[rt,rr]=(0,a.useState)(void 0),[rs,rn]=(0,a.useState)(void 0);ts[43]===Symbol.for("react.memo_cache_sentinel")?(eg=(e,t)=>{rr(e),rn(t)},ts[43]=eg):eg=ts[43];let ra=eg;t:{let e,t,r;if(!rt){ef=void 0;break t}ts[44]!==tH||ts[45]!==rt.granularity?(e=tH?(0,ea.lT)(tH.interval):rt.granularity,ts[44]=tH,ts[45]=rt.granularity,ts[46]=e):e=ts[46],ts[47]!==tH||ts[48]!==rt.dateRange?(t=tH?(0,ea.yN)(rt.dateRange,tH.interval):rt.dateRange,ts[47]=tH,ts[48]=rt.dateRange,ts[49]=t):t=ts[49],ts[50]!==rt||ts[51]!==e||ts[52]!==t?(r={...rt,granularity:e,dateRange:t},ts[50]=rt,ts[51]=e,ts[52]=t,ts[53]=r):r=ts[53],ef=r}let rl=ef,[ri,ro]=(0,a.useState)(!1);ts[54]!==tx||ts[55]!==tN||ts[56]!==tb||ts[57]!==tT||ts[58]!==tZ?(eb=()=>{tN(e=>{if(tc(tZ,e.series,tT))return;let t={...i()(e,["series"]),select:e.displayType===h.t2.Search?e.select:e.series};if(tb?.(t),null!=tZ){let e=!t.select||0===t.select.length;ra(structuredClone(to({...t,from:tZ.from,timestampValueExpression:tZ.timestampValueExpression,dateRange:tx,connection:tZ.connection,implicitColumnExpression:tZ.implicitColumnExpression,metricTables:tZ.metricTables,select:e?tZ.defaultTableSelectExpression||"":t.select},tZ)),tZ)}})()},ts[54]=tx,ts[55]=tN,ts[56]=tb,ts[57]=tT,ts[58]=tZ,ts[59]=eb):eb=ts[59];let rc=eb;ts[60]!==rc||ts[61]!==tk?(ey=e=>{tk("orderBy",(0,er.pX)(e)??""),rc()},ts[60]=rc,ts[61]=tk,ts[62]=ey):ey=ts[62];let rd=ey;ts[63]!==rt?(ev=rt?.orderBy&&"string"==typeof rt.orderBy?(0,er.t3)(rt.orderBy):void 0,ts[63]=rt,ts[64]=ev):ev=ts[64];let ru=ev;ts[65]!==rc||ts[66]!==tw?(ej=()=>{tw&&(tw.current=rc)},e_=[rc,tw],ts[65]=rc,ts[66]=tw,ts[67]=ej,ts[68]=e_):(ej=ts[67],e_=ts[68]),(0,a.useEffect)(ej,e_),ts[69]!==tX||ts[70]!==tv||ts[71]!==tT||ts[72]!==tZ?(eS=e=>{if(null!=tZ){if(tc(tZ,e.series,tT))return;tX===h.t2.Search&&"string"!=typeof e.select?e.select="":tX!==h.t2.Search&&(e.select=e.series);let t=to(i()(e,["series"]),tZ);tv?.(t)}},ts[69]=tX,ts[70]=tv,ts[71]=tT,ts[72]=tZ,ts[73]=eS):eS=ts[73];let rm=eS,rh=(0,a.useRef)(tJ),rp=(0,a.useRef)(tX);if(ts[74]!==tJ||ts[75]!==rc?(ew=()=>{tJ!==rh.current&&(rh.current=tJ,rc())},eE=[tJ,rc],ts[74]=tJ,ts[75]=rc,ts[76]=ew,ts[77]=eE):(ew=ts[76],eE=ts[77]),(0,a.useEffect)(ew,eE),ts[78]!==tX||ts[79]!==rc||ts[80]!==tP||ts[81]!==tk?(eC=()=>{if(tX!==rp.current){if(rp.current=tX,tX===h.t2.Search&&"string"!=typeof tP&&(tk("select",""),tk("series",[])),tX!==h.t2.Search&&"string"==typeof tP){let e=[{aggFn:"count",aggCondition:"",aggConditionLanguage:"lucene",valueExpression:""}];tk("where",""),tk("select",e),tk("series",e)}rc()}},ek=[tX,tP,tk,rc],ts[78]=tX,ts[79]=rc,ts[80]=tP,ts[81]=tk,ts[82]=eC,ts[83]=ek):(eC=ts[82],ek=ts[83]),(0,a.useEffect)(eC,ek),ts[84]!==tx?(eN=()=>{rr(e=>null==e?e:{...e,dateRange:tx})},eA=[tx],ts[84]=tx,ts[85]=eN,ts[86]=eA):(eN=ts[85],eA=ts[86]),(0,a.useEffect)(eN,eA),ts[87]!==rt)eT=((rt?.select?.length??0)>0||"string"==typeof rt?.select)&&rt?.from?.databaseName&&(rt?.from?.tableName||rt?.metricTables)&&rt?.timestampValueExpression,ts[87]=rt,ts[88]=eT;else eT=ts[88];let rx=eT;ts[89]!==tQ||ts[90]!==tm||ts[91]!==tx||ts[92]!==rl||ts[93]!==rt||ts[94]!==rs?.id||ts[95]!==tZ?(e$=()=>{let e=!!rt,t=rs?.id===tZ?.id,r=tm?.source===tZ?.id,s="time"===tQ?rl:rt,n=e&&t?s:tm&&r?{...tm,dateRange:tx,timestampValueExpression:tZ.timestampValueExpression,from:tZ.from,connection:tZ.connection}:void 0;if(n)return"time"===tQ?(0,B.O7)(n):"number"===tQ?(0,B._t)(n):"table"===tQ?(0,B.Z7)(n):n},ts[89]=tQ,ts[90]=tm,ts[91]=tx,ts[92]=rl,ts[93]=rt,ts[94]=rs?.id,ts[95]=tZ,ts[96]=e$):e$=ts[96],rs?.id,ts[97]!==e$?(eM=e$(),ts[97]=e$,ts[98]=eM):eM=ts[98];let rg=eM;ts[99]!==tx?(eD=(0,B.r4)(tx),ts[99]=tx,ts[100]=eD):eD=ts[100];let rf=eD;ts[101]!==tx||ts[102]!==rt||ts[103]!==rx||ts[104]!==tZ?(eF=null!=tZ&&null!=rt&&rx?{...rt,orderBy:[{ordering:"DESC",valueExpression:(0,en.AF)(tZ.timestampValueExpression)}],dateRange:tx,timestampValueExpression:tZ.timestampValueExpression,connection:tZ.connection,from:tZ.from,limit:{limit:200},select:tZ?.defaultTableSelectExpression||"",filters:"string"==typeof(t=rt.select)?[]:t.map(({aggCondition:e,aggConditionLanguage:t})=>null!=t&&null!=e?{type:t,condition:e}:null).filter(Boolean),filtersLogicalOperator:"OR",groupBy:void 0,granularity:void 0}:null,ts[101]=tx,ts[102]=rt,ts[103]=rx,ts[104]=tZ,ts[105]=eF):eF=ts[105];let rb=eF,[ry,rv]=(0,a.useState)(null);ts[106]!==rc||ts[107]!==tk?(eO=e=>{let{numberFormat:t,alignDateRangeToGranularity:r,fillNulls:s,compareToPreviousPeriod:n}=e;tk("numberFormat",t),tk("alignDateRangeToGranularity",r),tk("fillNulls",s),tk("compareToPreviousPeriod",n),rc()},ts[106]=rc,ts[107]=tk,ts[108]=eO):eO=ts[108];let rj=eO;ts[109]!==tZ?(eP=(0,m.VO)(tZ),ts[109]=tZ,ts[110]=eP):eP=ts[110];let r_=eP;ts[111]!==tC?(eW=(0,s.jsx)(o.xI,{control:tC,name:"displayType",render:th}),ts[111]=tC,ts[112]=eW):eW=ts[112],ts[113]===Symbol.for("react.memo_cache_sentinel")?(eV=(0,s.jsx)(p.E,{size:"sm",className:"text-nowrap",children:"Chart Name"}),ts[113]=eV):eV=ts[113],ts[114]!==tC?(eH=(0,s.jsxs)(b.s,{align:"center",gap:"sm",mb:"sm",children:[eV,(0,s.jsx)(eL.t4,{name:"name",control:tC,w:"100%",type:"text",placeholder:"My Chart Name","data-testid":"chart-name-input"})]}),ts[114]=tC,ts[115]=eH):eH=ts[115],ts[116]===Symbol.for("react.memo_cache_sentinel")?(eB=(0,s.jsx)(g.c,{my:"md"}),ts[116]=eB):eB=ts[116],ts[117]!==tQ||ts[118]!==tH||ts[119]!==tL||ts[120]!==rg||ts[121]!==t$||ts[122]!==tC||ts[123]!==ti||ts[124]!==tY||ts[125]!==tx||ts[126]!==tX||ts[127]!==tz||ts[128]!==tI||ts[129]!==tG||ts[130]!==rc||ts[131]!==t9||ts[132]!==ry||ts[133]!==tA||ts[134]!==tM||ts[135]!==tP||ts[136]!==tB||ts[137]!==tk||ts[138]!==tD||ts[139]!==r_||ts[140]!==tU||ts[141]!==tZ||ts[142]!==tV?(eq="markdown"===tQ?(0,s.jsxs)("div",{children:[(0,s.jsx)(y.T,{...tA("markdown"),label:"Markdown content",placeholder:"Markdown",mb:"md",styles:{input:{minHeight:200}}}),(0,s.jsx)(v.a,{p:"md",mb:"md",children:(0,s.jsx)(el.A,{config:{markdown:tG||"Preview"}})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(b.s,{mb:"md",align:"center",gap:"sm",justify:"space-between",children:[(0,s.jsxs)(f.Y,{children:[(0,s.jsx)(p.E,{pe:"md",size:"sm",children:"Data Source"}),(0,s.jsx)(tl.W,{size:"xs",control:tC,name:"source","data-testid":"source-selector",sourceSchemaPreview:(0,s.jsx)(ta.A,{source:tZ,variant:"text"})})]}),tZ&&"search"!==tQ&&(0,s.jsx)(ei.A,{source:tZ,config:rg})]}),tX!==h.t2.Search&&Array.isArray(tP)?(0,s.jsxs)(s.Fragment,{children:[tI.map((e,t)=>(0,s.jsx)(td,{control:tC,databaseName:tY??"",dateRange:tx,index:t,parentRef:ry,namePrefix:`series.${t}.`,onRemoveSeries:tM,length:tI.length,onSwapSeries:tD,onSubmit:rc,setValue:tk,connectionId:tZ?.connection,showGroupBy:1===tI.length&&tX!==h.t2.Number,showHaving:1===tI.length&&tX===h.t2.Table,tableName:tU??"",tableSource:tZ,errors:tz.series&&Array.isArray(tz.series)?tz.series[t]:void 0,clearErrors:t$},e.id)),tI.length>1&&tX!==h.t2.Number&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.c,{mt:"md",mb:"sm"}),(0,s.jsxs)("div",{className:"gap-2 align-items-center",style:{display:"grid",gridTemplateColumns:"auto minmax(0, 1fr)"},children:[(0,s.jsx)("div",{children:(0,s.jsx)(p.E,{me:"sm",size:"sm",style:{whiteSpace:"nowrap"},children:"Group By"})}),(0,s.jsx)("div",{children:(0,s.jsx)(J.Z,{tableConnection:r_,control:tC,name:"groupBy",placeholder:"SQL Columns",onSubmit:rc,disableKeywordAutocomplete:!0})}),tX===h.t2.Table&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(p.E,{me:"sm",size:"sm",style:{whiteSpace:"nowrap"},children:"Having"})}),(0,s.jsx)("div",{children:(0,s.jsx)(J.Z,{tableConnection:r_,control:tC,name:"having",placeholder:"SQL HAVING clause (ex. count() > 100)",onSubmit:rc})})]})]})]}),(0,s.jsx)(g.c,{mt:"md",mb:"sm"}),(0,s.jsxs)(b.s,{mt:4,align:"center",justify:"space-between",children:[(0,s.jsxs)(f.Y,{gap:"xs",children:[tX!==h.t2.Number&&(0,s.jsxs)(x.$,{variant:"subtle",size:"sm",color:"gray",onClick:()=>{tL({aggFn:"count",aggCondition:"",aggConditionLanguage:"lucene",valueExpression:""})},children:[(0,s.jsx)(z.A,{size:14,className:"me-2"}),"Add Series"]}),2==tI.length&&tX!==h.t2.Number&&(0,s.jsx)(j.d,{label:"As Ratio",size:"sm",color:"gray",variant:"subtle",onClick:()=>{tk("seriesReturnType","ratio"===tB?"column":"ratio"),rc()},checked:"ratio"===tB}),tX===h.t2.Line&&ti&&!Y.VO&&(0,s.jsxs)(x.$,{variant:"subtle",size:"sm",color:tH?"red":"gray",onClick:()=>tk("alert",tH?void 0:ea.C5),children:[(0,s.jsx)(I.A,{size:14,className:"me-2"}),tH?"Remove Alert":"Add Alert"]})]}),(0,s.jsx)(x.$,{onClick:t9,size:"compact-sm",variant:"secondary",children:"Display Settings"})]})]}):(0,s.jsxs)(b.s,{gap:"xs",direction:"column",children:[(0,s.jsx)(J.Z,{tableConnection:r_,control:tC,name:"select",placeholder:tZ?.defaultTableSelectExpression||"SELECT Columns",defaultValue:tZ?.defaultTableSelectExpression,onSubmit:rc,label:"SELECT"}),"sql"===tV?(0,s.jsx)(J.Z,{tableConnection:r_,control:tC,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",onLanguageChange:e=>tk("whereLanguage",e),language:"sql",onSubmit:rc}):(0,s.jsx)(es.A,{tableConnection:r_,control:tC,name:"where",onLanguageChange:e=>tk("whereLanguage",e),language:"lucene",placeholder:"Search your events w/ Lucene ex. column:foo",onSubmit:rc})]})]}),ts[117]=tQ,ts[118]=tH,ts[119]=tL,ts[120]=rg,ts[121]=t$,ts[122]=tC,ts[123]=ti,ts[124]=tY,ts[125]=tx,ts[126]=tX,ts[127]=tz,ts[128]=tI,ts[129]=tG,ts[130]=rc,ts[131]=t9,ts[132]=ry,ts[133]=tA,ts[134]=tM,ts[135]=tP,ts[136]=tB,ts[137]=tk,ts[138]=tD,ts[139]=r_,ts[140]=tU,ts[141]=tZ,ts[142]=tV,ts[143]=eq):eq=ts[143],ts[144]!==tH||ts[145]!==tK||ts[146]!==tC?(eX=tH&&(0,s.jsx)(_.t,{my:"sm",children:(0,s.jsx)(S.B,{gap:"xs",children:(0,s.jsxs)(_.t,{px:"md",py:"sm",radius:"xs",children:[(0,s.jsxs)(f.Y,{gap:"xs",justify:"space-between",children:[(0,s.jsxs)(f.Y,{gap:"xs",children:[(0,s.jsx)(p.E,{size:"sm",opacity:.7,children:"Alert when the value"}),(0,s.jsx)(c.mh,{data:(0,er.kR)(ea.cv),size:"xs",name:"alert.thresholdType",control:tC}),(0,s.jsx)(c.Q7,{min:1e-10,size:"xs",w:80,control:tC,name:"alert.threshold"}),"over",(0,s.jsx)(c.mh,{data:(0,er.kR)(ea.J_),size:"xs",name:"alert.interval",control:tC}),(0,s.jsx)(p.E,{size:"sm",opacity:.7,children:"window via"}),(0,s.jsx)(c.mh,{data:(0,er.kR)(ea.mo),size:"xs",name:"alert.channel.type",control:tC})]}),tH?.createdBy&&(0,s.jsxs)(p.E,{size:"xs",opacity:.6,children:["Created by"," ",tH.createdBy?.name||tH.createdBy?.email]})]}),(0,s.jsx)(p.E,{size:"xxs",opacity:.5,mb:4,mt:"xs",children:"Send to"}),(0,s.jsx)(q.e,{control:tC,type:tK,namePrefix:"alert."})]})})}),ts[144]=tH,ts[145]=tK,ts[146]=tC,ts[147]=eX):eX=ts[147],ts[148]!==rm||ts[149]!==tN||ts[150]!==tg||ts[151]!==tv?(eG=null!=tv&&(0,s.jsx)(x.$,{"data-testid":"chart-save-button",loading:tg,variant:"primary",onClick:tN(rm),children:"Save"}),ts[148]=rm,ts[149]=tN,ts[150]=tg,ts[151]=tv,ts[152]=eG):eG=ts[152],ts[153]!==tg||ts[154]!==t_?(eK=null!=t_&&(0,s.jsx)(x.$,{variant:"subtle",color:"dark",onClick:t_,disabled:tg,children:"Cancel"}),ts[153]=tg,ts[154]=t_,ts[155]=eK):eK=ts[155],ts[156]!==eG||ts[157]!==eK?(eJ=(0,s.jsxs)(b.s,{gap:"sm",children:[eG,eK]}),ts[156]=eG,ts[157]=eK,ts[158]=eJ):eJ=ts[158],ts[159]!==tQ||ts[160]!==tC||ts[161]!==tq||ts[162]!==rc||ts[163]!==ry||ts[164]!==r_?(eZ="table"===tQ&&(0,s.jsx)("div",{style:{width:400},children:(0,s.jsx)(J.Z,{parentRef:ry,tableConnection:r_,placeholder:"string"==typeof tq?tq:"",control:tC,name:"orderBy",disableKeywordAutocomplete:!0,onSubmit:rc,label:"ORDER BY"})}),ts[159]=tQ,ts[160]=tC,ts[161]=tq,ts[162]=rc,ts[163]=ry,ts[164]=r_,ts[165]=eZ):eZ=ts[165],ts[166]!==tQ||ts[167]!==tp||ts[168]!==tf||ts[169]!==ty?(eY="markdown"!==tQ&&null!=ty&&null!=tp&&null!=tf&&(0,s.jsx)(Z.A,{inputValue:tp,setInputValue:ty,onSearch:e=>{tf(e)},onSubmit:e=>{tf(e)}}),ts[166]=tQ,ts[167]=tp,ts[168]=tf,ts[169]=ty,ts[170]=eY):eY=ts[170],ts[171]!==tQ||ts[172]!==tC?(eU="time"===tQ&&(0,s.jsx)(U.F9,{control:tC,name:"granularity"}),ts[171]=tQ,ts[172]=tC,ts[173]=eU):eU=ts[173],ts[174]!==tQ||ts[175]!==rc?(eQ="markdown"!==tQ&&(0,s.jsx)(x.$,{"data-testid":"chart-run-query-button",variant:"primary",type:"submit",onClick:rc,leftSection:(0,s.jsx)(L.A,{size:16}),style:{flexShrink:0},children:"Run"}),ts[174]=tQ,ts[175]=rc,ts[176]=eQ):eQ=ts[176],ts[177]!==ti?(e0=!Y.VO&&!ti&&(0,s.jsxs)(w.W,{width:250,children:[(0,s.jsx)(w.W.Target,{children:(0,s.jsx)(E.M,{variant:"secondary",size:"input-sm",children:(0,s.jsx)(M.A,{size:16})})}),(0,s.jsx)(w.W.Dropdown,{children:(0,s.jsx)(w.W.Item,{leftSection:(0,s.jsx)(D.A,{size:16}),onClick:()=>ro(!0),children:"Save to Dashboard"})})]}),ts[177]=ti,ts[178]=e0):e0=ts[178],ts[179]!==eZ||ts[180]!==eY||ts[181]!==eU||ts[182]!==eQ||ts[183]!==e0?(e1=(0,s.jsxs)(b.s,{gap:"sm",mb:"sm",align:"center",justify:"end",children:[eZ,eY,eU,eQ,e0]}),ts[179]=eZ,ts[180]=eY,ts[181]=eU,ts[182]=eQ,ts[183]=e0,ts[184]=e1):e1=ts[184],ts[185]!==eJ||ts[186]!==e1?(e2=(0,s.jsxs)(b.s,{justify:"space-between",mt:"sm",children:[eJ,e1]}),ts[185]=eJ,ts[186]=e1,ts[187]=e2):e2=ts[187],ts[188]!==tQ||ts[189]!==rx?(e3=rx||"markdown"===tQ?void 0:(0,s.jsx)(_.t,{shadow:"xs",p:"xl",children:(0,s.jsx)(C.o,{mih:400,children:(0,s.jsx)(p.E,{size:"sm",children:"Please start by selecting a database, table, and timestamp column above and then click the play button to query data."})})}),ts[188]=tQ,ts[189]=rx,ts[190]=e3):e3=ts[190],ts[191]!==tQ||ts[192]!==rd||ts[193]!==rt||ts[194]!==rx||ts[195]!==ru||ts[196]!==tZ?(e4=rx&&null!=rt&&"table"===tQ&&(0,s.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,s.jsx)(G.A,{config:rt,getRowSearchLink:e=>(0,B.A7)({row:e,source:tZ,config:rt,dateRange:rt.dateRange}),onSortingChange:rd,sort:ru,showMVOptimizationIndicator:!1})}),ts[191]=tQ,ts[192]=rd,ts[193]=rt,ts[194]=rx,ts[195]=ru,ts[196]=tZ,ts[197]=e4):e4=ts[197],ts[198]!==tQ||ts[199]!==tH||ts[200]!==rl||ts[201]!==tj||ts[202]!==rx||ts[203]!==tW?(e5=rx&&null!=rl&&"time"===tQ&&(0,s.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,s.jsx)(K.S,{sourceId:tW,config:rl,onTimeRangeSelect:tj,referenceLines:tH&&(0,q.h)({threshold:tH.threshold,thresholdType:tH.thresholdType}),showMVOptimizationIndicator:!1})}),ts[198]=tQ,ts[199]=tH,ts[200]=rl,ts[201]=tj,ts[202]=rx,ts[203]=tW,ts[204]=e5):e5=ts[204],ts[205]!==tQ||ts[206]!==rt||ts[207]!==rx?(e6=rx&&null!=rt&&"number"===tQ&&(0,s.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,s.jsx)(ez.A,{config:rt,showMVOptimizationIndicator:!1})}),ts[205]=tQ,ts[206]=rt,ts[207]=rx,ts[208]=e6):e6=ts[208],ts[209]!==tQ||ts[210]!==tx||ts[211]!==rt||ts[212]!==rx||ts[213]!==tW||ts[214]!==tZ?(e7=rx&&tZ&&null!=rt&&"search"===tQ&&(0,s.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,s.jsx)(eI.A,{sourceId:tW,config:{...rt,orderBy:[{ordering:"DESC",valueExpression:(0,en.AF)(tZ.timestampValueExpression)}],dateRange:tx,timestampValueExpression:tZ.timestampValueExpression,connection:tZ.connection,from:tZ.from,limit:{limit:200},select:"string"==typeof rt.select&&rt.select?rt.select:tZ?.defaultTableSelectExpression||"",groupBy:void 0,granularity:void 0},enabled:!0,isLive:!1,queryKeyPrefix:"search"})}),ts[209]=tQ,ts[210]=tx,ts[211]=rt,ts[212]=rx,ts[213]=tW,ts[214]=tZ,ts[215]=e7):e7=ts[215],ts[216]!==rg||ts[217]!==tF||ts[218]!==rx||ts[219]!==rb||ts[220]!==t0||ts[221]!==t1||ts[222]!==tW?(e8=t0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.c,{mt:"md"}),t1&&(0,s.jsx)(k.n,{value:tF?"sample":null,onChange:e=>tO("sample"===e),children:(0,s.jsxs)(k.n.Item,{value:"sample",children:[(0,s.jsx)(k.n.Control,{icon:(0,s.jsx)(F.A,{size:16}),children:(0,s.jsx)(p.E,{size:"sm",style:{alignSelf:"center"},children:"Sample Matched Events"})}),(0,s.jsx)(k.n.Panel,{children:null!=rb&&(0,s.jsx)("div",{className:"flex-grow-1 d-flex flex-column",style:{height:400},children:(0,s.jsx)(eI.A,{sourceId:tW,config:rb,enabled:tF,isLive:!1,queryKeyPrefix:"search"})})})]})}),(0,s.jsx)(k.n,{defaultValue:"",children:(0,s.jsxs)(k.n.Item,{value:"SQL",children:[(0,s.jsx)(k.n.Control,{icon:(0,s.jsx)(O.A,{size:16}),children:(0,s.jsx)(p.E,{size:"sm",style:{alignSelf:"center"},children:"Generated SQL"})}),(0,s.jsx)(k.n.Panel,{children:rx&&null!=rg&&(0,s.jsx)(X.A,{config:rg})})]})})]}),ts[216]=rg,ts[217]=tF,ts[218]=rx,ts[219]=rb,ts[220]=t0,ts[221]=t1,ts[222]=tW,ts[223]=e8):e8=ts[223],ts[224]===Symbol.for("react.memo_cache_sentinel")?(e9=()=>ro(!1),ts[224]=e9):e9=ts[224],ts[225]!==tm||ts[226]!==ri?(te=(0,s.jsx)(tn,{chartConfig:tm,opened:ri,onClose:e9}),ts[225]=tm,ts[226]=ri,ts[227]=te):te=ts[227];let rS=ti?void 0:rf;return ts[228]!==re||ts[229]!==t6||ts[230]!==t7||ts[231]!==tX||ts[232]!==rj||ts[233]!==rS?(tt=(0,s.jsx)(eR,{opened:t7,settings:t6,previousDateRange:rS,displayType:tX,onChange:rj,onClose:re}),ts[228]=re,ts[229]=t6,ts[230]=t7,ts[231]=tX,ts[232]=rj,ts[233]=rS,ts[234]=tt):tt=ts[234],ts[235]!==tS||ts[236]!==eW||ts[237]!==eH||ts[238]!==eq||ts[239]!==eX||ts[240]!==e2||ts[241]!==e3||ts[242]!==e4||ts[243]!==e5||ts[244]!==e6||ts[245]!==e7||ts[246]!==e8||ts[247]!==te||ts[248]!==tt?(tr=(0,s.jsxs)("div",{ref:rv,"data-testid":tS,children:[eW,eH,eB,eq,eX,e2,e3,e4,e5,e6,e7,e8,te,tt]}),ts[235]=tS,ts[236]=eW,ts[237]=eH,ts[238]=eq,ts[239]=eX,ts[240]=e2,ts[241]=e3,ts[242]=e4,ts[243]=e5,ts[244]=e6,ts[245]=e7,ts[246]=e8,ts[247]=te,ts[248]=tt,ts[249]=tr):tr=ts[249],tr}function th(e){let{field:t}=e,{onChange:r,value:n}=t;return(0,s.jsx)(N.t,{value:n,onChange:r,radius:"xs",mb:"md",children:(0,s.jsxs)(N.t.List,{children:[(0,s.jsx)(N.t.Tab,{value:h.t2.Line,leftSection:(0,s.jsx)(P.A,{size:16}),children:"Line/Bar"}),(0,s.jsx)(N.t.Tab,{value:h.t2.Table,leftSection:(0,s.jsx)(W.A,{size:16}),children:"Table"}),(0,s.jsx)(N.t.Tab,{value:h.t2.Number,leftSection:(0,s.jsx)(V.A,{size:16}),children:"Number"}),(0,s.jsx)(N.t.Tab,{value:h.t2.Search,leftSection:(0,s.jsx)(F.A,{size:16}),children:"Search"}),(0,s.jsx)(N.t.Tab,{value:h.t2.Markdown,leftSection:(0,s.jsx)(H.A,{size:16}),children:"Markdown"})]})})}},18006:(e,t,r)=>{"use strict";r.d(t,{N4:()=>a,OH:()=>l,z4:()=>n});var s=r(37901);function n(e=[]){return e.map(({sqlExpression:e,alias:t})=>({valueExpression:e,alias:t||e}))}function a(e,t=[],r,n){let l=new Map,i=new Map,o=new Map,c=(0,s.bn)(n);try{for(let e of r)for(let{sqlExpression:r,luceneExpression:s,alias:n}of t){let t=n||r,a=c.includes(r.split(".")[0])?`toString(${r})`:r;i.set(t,a),s&&o.set(t,s);let d=e[t];d&&"string"==typeof d&&(l.has(t)||l.set(t,new Set),l.get(t).add(d))}}catch(e){console.error("Error extracting attributes from data",e)}return Array.from(l.entries()).flatMap(([t,r])=>[...r].map(r=>({displayedKey:t,value:r,sql:i.get(t),lucene:o.get(t),source:e})))}function l(e){try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}},20699:e=>{e.exports={timelineRow:"TimelineChart_timelineRow__qebNk",timelineRowActive:"TimelineChart_timelineRowActive__V6ZZf",labelContainer:"TimelineChart_labelContainer__6r6Eb"}},24885:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(55729);let n=function(e,t="right"){let[r,n]=(0,s.useState)(e),a=(0,s.useRef)(0),l=(0,s.useRef)(0),i="top"===t||"bottom"===t,o=i?"clientY":"clientX",c="right"===t||"top"===t?-1:1,d=(0,s.useCallback)(e=>{let t=i?window.innerHeight:window.innerWidth,r=e[o]-a.current,s=i?window.innerHeight:document.body.offsetWidth;n(Math.min(Math.max(10,l.current+r/t*100*c),(s-25)/t*100))},[i,o,c]),u=(0,s.useCallback)(()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d]),m=(0,s.useCallback)(e=>{e.preventDefault(),a.current=e[o],l.current=r,document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)},[o,r,d,u]);return(0,s.useEffect)(()=>()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d,u]),{size:r,startResize:m}}},25156:()=>{},26355:(e,t,r)=>{"use strict";r.d(t,{A:()=>L});var s=r(6029),n=r(75155),a=r(55729),l=r(75828),i=r.n(l),o=r(70921),c=r(67549),d=r(40399),u=r(91544),m=r.n(u),h=r(59513),p=r.n(h),x=r(77494),g=r.n(x),f=r(97554),b=r.n(f),y=r(64022),v=r.n(y),j=r(84450),_=r.n(j),S=r(22273),w=r(33958),E=r(88302),C=r(74805),k=r(65723),N=r.n(k);let A=(0,o.eU)({normallyExpanded:!1}),T=a.memo(a.forwardRef((e,t)=>{let r=(0,n.c)(19),{value:a}=e;if(g()(a)){let e;return r[0]!==t?(e=(0,s.jsx)("span",{ref:t,className:N().null,children:"null"}),r[0]=t,r[1]=e):e=r[1],e}if(_()(a)){let e;return r[2]!==t||r[3]!==a?(e=(0,s.jsx)("span",{ref:t,className:N().string,children:a}),r[2]=t,r[3]=a,r[4]=e):e=r[4],e}if(b()(a)){let e;return r[5]!==t||r[6]!==a?(e=(0,s.jsx)("span",{ref:t,className:N().number,children:a}),r[5]=t,r[6]=a,r[7]=e):e=r[7],e}if(p()(a)){let e,n=a?"true":"false";return r[8]!==t||r[9]!==n?(e=(0,s.jsx)("span",{ref:t,className:N().boolean,children:n}),r[8]=t,r[9]=n,r[10]=e):e=r[10],e}if(v()(a)){let e,n;return r[11]!==a?(e=Object.keys(a),r[11]=a,r[12]=e):e=r[12],r[13]!==t||r[14]!==e.length?(n=(0,s.jsxs)("span",{ref:t,className:N().object,children:["{}"," ",e.length," keys"]}),r[13]=t,r[14]=e.length,r[15]=n):n=r[15],n}if(m()(a)){let e;return r[16]!==t||r[17]!==a.length?(e=(0,s.jsxs)("span",{ref:t,className:N().array,children:["[]"," ",a.length," items"]}),r[16]=t,r[17]=a.length,r[18]=e):e=r[18],e}return null})),$=a.memo(e=>{let t,r,a,l=(0,n.c)(12),{keyName:i,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}=e,{getLineActions:h}=(0,c.md)(A);e:{let e;if(h){let e;l[0]!==h||l[1]!==u||l[2]!==i||l[3]!==o||l[4]!==m||l[5]!==d?(e=h({key:i,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}),l[0]=h,l[1]=u,l[2]=i,l[3]=o,l[4]=m,l[5]=d,l[6]=e):e=l[6],t=e;break e}l[7]===Symbol.for("react.memo_cache_sentinel")?(e=[],l[7]=e):e=l[7],t=e}let p=t;return l[8]!==p?(r=p.map(M),l[8]=p,l[9]=r):r=l[9],l[10]!==r?(a=(0,s.jsx)("div",{className:N().lineMenu,children:r}),l[10]=r,l[11]=a):a=l[11],a}),R=a.memo(({keyName:e,keyPath:t,value:r,disableMenu:n,isInParsedJson:l=!1,parsedJsonRootPath:o=[]})=>{let{normallyExpanded:d}=(0,c.md)(A),{ref:u,hovered:h}=(0,S.M)(),p=a.useMemo(()=>{if(!_()(r))return!1;try{if(r.startsWith("{")&&r.endsWith("}")||r.startsWith("[")&&r.endsWith("]"))return!!JSON.parse(r)}catch(e){return!1}},[r]),[x,g]=a.useState(d&&!p);a.useEffect(()=>{g(d&&!p)},[p,d]);let f=a.useMemo(()=>v()(r)&&Object.keys(r).length>0||m()(r)&&r.length>0||p,[p,r]),b=a.useCallback(()=>{f&&g(e=>!e)},[f]),y=a.useMemo(()=>{if(p)try{return JSON.parse(r)}catch(e){return null}return r},[p,r]),j=t.length,k=a.useMemo(()=>[...t,e],[e,t]),R=l||p,I=a.useMemo(()=>p?k:o,[p,k,o]),L=a.useRef(null),[M,D]=a.useState(!1),F=a.useCallback(()=>{D(!0)},[]),O=a.useCallback(()=>{D(!1)},[]);return a.useEffect(()=>{let e=L.current;return e?.addEventListener("selectstart",F),e?.addEventListener("mouseup",O),()=>{e?.removeEventListener("selectstart",F),e?.removeEventListener("mouseup",O)}},[O,F]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{ref:u,onClick:b,className:i()(N().line,{[N().nestedLine]:j>0,[N().expanded]:x,[N().expandable]:f}),style:{marginLeft:16*j},children:[(0,s.jsx)("div",{className:N().keyContainer,children:(0,s.jsxs)("div",{className:N().key,children:[f&&(x?(0,s.jsx)(w.A,{size:10}):(0,s.jsx)(E.A,{size:10})),e,(0,s.jsx)("div",{className:N().hoverContent,children:(0,s.jsx)(C.A,{size:14})})]})}),(0,s.jsx)("div",{className:N().valueContainer,children:p?x?(0,s.jsxs)("div",{className:N().object,children:["{}"," Parsed JSON"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T,{value:r,ref:L}),(0,s.jsx)("div",{className:N().jsonBtn,children:"Expand JSON"})]}):(0,s.jsx)(T,{value:r,ref:L})}),h&&!n&&!M&&(0,s.jsx)($,{keyName:e,keyPath:k,value:r,isInParsedJson:l,parsedJsonRootPath:o})]},e),x&&f&&(0,s.jsx)(z,{data:y,keyPath:k,disableMenu:n,isInParsedJson:R,parsedJsonRootPath:I})]})});function z(e){let t,r,l,o,c,d,u,m=(0,n.c)(22),{data:h,keyPath:p,disableMenu:x,isInParsedJson:g,parsedJsonRootPath:f}=e;m[0]!==p?(t=void 0===p?[]:p,m[0]=p,m[1]=t):t=m[1];let b=t,y=void 0!==x&&x,v=void 0!==g&&g;m[2]!==f?(r=void 0===f?[]:f,m[2]=f,m[3]=r):r=m[3];let j=r,[_,S]=a.useState(!1);m[4]!==h?(l=Object.keys(h),m[4]=h,m[5]=l):l=m[5];let w=l.length;m[6]!==h||m[7]!==_?(o=_?Object.entries(h):Object.entries(h).slice(0,50),m[6]=h,m[7]=_,m[8]=o):o=m[8];let E=o,C=b?.length||0;return m[9]!==y||m[10]!==v||m[11]!==b||m[12]!==j||m[13]!==E?(c=E.map(e=>{let[t,r]=e;return(0,s.jsx)(R,{keyName:t,value:r,keyPath:b,disableMenu:y,isInParsedJson:v,parsedJsonRootPath:j},t)}),m[9]=y,m[10]=v,m[11]=b,m[12]=j,m[13]=E,m[14]=c):c=m[14],m[15]!==_||m[16]!==C||m[17]!==w?(d=w>50&&!_&&(0,s.jsx)("div",{className:i()(N().line,N().nestedLine,N().expandable),style:{marginLeft:16*C},onClick:()=>S(!0),children:(0,s.jsx)("div",{className:N().keyContainer,children:(0,s.jsxs)("div",{className:N().jsonBtn,children:["Expand ",w-50," more properties"]})})}),m[15]=_,m[16]=C,m[17]=w,m[18]=d):d=m[18],m[19]!==d||m[20]!==c?(u=(0,s.jsxs)(s.Fragment,{children:[c,d]}),m[19]=d,m[20]=c,m[21]=u):u=m[21],u}let I=e=>{let t,r,s,l=(0,n.c)(6),{children:i,initialValues:o}=e;l[0]!==o?(t=[[A,o]],l[0]=o,l[1]=t):t=l[1],(0,d.RH)(t);let u=(0,c.Xr)(A);return l[2]!==o||l[3]!==u?(r=()=>{u(o)},s=[o,u],l[2]=o,l[3]=u,l[4]=r,l[5]=s):(r=l[4],s=l[5]),a.useEffect(r,s),i},L=e=>{let t,r,a,l,o,d,u=(0,n.c)(17),{data:m,normallyExpanded:h,tabulate:p,lineWrap:x,getLineActions:g}=e,f=void 0!==h&&h,b=void 0!==p&&p;u[0]!==m?(t=Object.keys(m),u[0]=m,u[1]=t):t=u[1];let y=0===t.length;return u[2]!==g||u[3]!==f?(r={normallyExpanded:f,getLineActions:g},u[2]=g,u[3]=f,u[4]=r):r=u[4],u[5]!==x||u[6]!==b?(a=i()(N().container,{[N().withTabulate]:b,[N().withLineWrap]:x}),u[5]=x,u[6]=b,u[7]=a):a=u[7],u[8]!==m||u[9]!==y?(l=y?(0,s.jsx)("div",{children:"Empty"}):(0,s.jsx)(z,{data:m}),u[8]=m,u[9]=y,u[10]=l):l=u[10],u[11]!==a||u[12]!==l?(o=(0,s.jsx)("div",{className:a,children:l}),u[11]=a,u[12]=l,u[13]=o):o=u[13],u[14]!==r||u[15]!==o?(d=(0,s.jsx)(c.Kq,{children:(0,s.jsx)(I,{initialValues:r,children:o})}),u[14]=r,u[15]=o,u[16]=d):d=u[16],d};function M(e){return(0,s.jsx)("button",{title:e.title,className:N().lineMenuBtn,onClick:t=>{e.onClick(),t.stopPropagation()},children:e.label},e.key)}},26674:(e,t,r)=>{"use strict";r.d(t,{S:()=>n,Y:()=>a});var s=r(55729);let n=(0,s.createContext)(0);function a(){return(0,s.useContext)(n)}},26814:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(6029),n=r(75155),a=r(1909);function l(e){let t,r=(0,n.c)(2),{field:l}=(0,a.as)(e),i="sql"===l.value?e.sqlInput:e.luceneInput;return r[0]!==i?(t=(0,s.jsx)(s.Fragment,{children:i}),r[0]=i,r[1]=t):t=r[1],t}},26837:(e,t,r)=>{"use strict";r.d(t,{W:()=>eS});var s=r(6029),n=r(55729),a=r(75155),l=r(84450),i=r.n(l),o=r(16943),c=r.n(o),d=r(82641),u=r(60481),m=r(45005),h=r(43517),p=r(78253),x=r(81973),g=r(18006),f=r(37901),b=r(65081),y=r(50374),v=r(64441),j=r(94937),_=r(75828),S=r.n(_),w=r(7913),E=r(63085),C=r(25062),k=r(94720),N=r(3635),A=r(70114),T=r(23474),$=r(54134),R=r(58333),z=r(7565),I=r(94364),L=r(72075),M=r(66773),D=r.n(M);let F=e=>{let t,r,n,l,i,o,c,d=(0,a.c)(19),{filename:u,function:m,lineno:h,colno:p,isLoading:x}=e,g=x?.8:1,f=x?"blur(1px)":"none";return d[0]!==g||d[1]!==f?(t={opacity:g,filter:f},d[0]=g,d[1]=f,d[2]=t):t=d[2],d[3]!==p||d[4]!==h?(r=(0,s.jsxs)("span",{children:[":",h,":",p]}),d[3]=p,d[4]=h,d[5]=r):r=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)("span",{children:" in "}),d[6]=n):n=d[6],d[7]!==m?(l=m&&(0,s.jsx)("span",{style:{background:"#ffffff10",padding:"0 4px",borderRadius:4},children:m}),d[7]=m,d[8]=l):l=d[8],d[9]!==u||d[10]!==t||d[11]!==r||d[12]!==l?(i=(0,s.jsxs)("div",{className:" fs-8",style:t,children:[u,r,n,l]}),d[9]=u,d[10]=t,d[11]=r,d[12]=l,d[13]=i):i=d[13],d[14]!==x?(o=x&&(0,s.jsx)(k.a,{size:"xs",color:"gray"}),d[14]=x,d[15]=o):o=d[15],d[16]!==i||d[17]!==o?(c=(0,s.jsxs)(N.Y,{gap:"xs",display:"inline-flex",children:[i,o]}),d[16]=i,d[17]=o,d[18]=c):c=d[18],c},O=e=>{let t,r,l,i,o,c,d=(0,a.c)(15),{title:u,children:m,initiallyCollapsed:h}=e,[p,x]=n.useState(h??!1);return d[0]!==p?(t=()=>x(!p),r=p?(0,s.jsx)(A.A,{size:14,className:"me-2"}):(0,s.jsx)(T.A,{size:14,className:"me-2"}),d[0]=p,d[1]=t,d[2]=r):(t=d[1],r=d[2]),d[3]!==u?(l=(0,s.jsx)("div",{className:"fs-7",children:u}),d[3]=u,d[4]=l):l=d[4],d[5]!==t||d[6]!==r||d[7]!==l?(i=(0,s.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[r,l]}),d[5]=t,d[6]=r,d[7]=l,d[8]=i):i=d[8],d[9]!==m||d[10]!==p?(o=p?null:(0,s.jsx)("div",{className:"mb-4",children:m}),d[9]=m,d[10]=p,d[11]=o):o=d[11],d[12]!==i||d[13]!==o?(c=(0,s.jsxs)("div",{className:"my-3",children:[i,o]}),d[12]=i,d[13]=o,d[14]=c):c=d[14],c},P=e=>{let t,r,n=(0,a.c)(5),{children:l,title:i}=e;return n[0]!==i?(t=i&&(0,s.jsx)("div",{className:D().panelSectionWrapperTitle,children:i}),n[0]=i,n[1]=t):t=n[1],n[2]!==l||n[3]!==t?(r=(0,s.jsxs)("div",{className:D().panelSectionWrapper,children:[t,l]}),n[2]=l,n[3]=t,n[4]=r):r=n[4],r},W=e=>{let t,r,n,l,i=(0,a.c)(8),{label:o,value:c}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={paddingRight:20,marginRight:12,borderRight:"1px solid #ffffff20"},i[0]=t):t=i[0],i[1]!==o?(r=(0,s.jsx)("div",{children:o}),i[1]=o,i[2]=r):r=i[2],i[3]!==c?(n=(0,s.jsx)("div",{className:"fs-7",children:c}),i[3]=c,i[4]=n):n=i[4],i[5]!==r||i[6]!==n?(l=(0,s.jsxs)("div",{style:t,children:[r,n]}),i[5]=r,i[6]=n,i[7]=l):l=i[7],l},V=e=>{let t,r=(0,a.c)(3),{onClick:n,isOpen:l}=e,i=l?"chevron-up":"chevron-down";return r[0]!==n||r[1]!==i?(t=(0,s.jsx)(L.L,{label:"",biIcon:i,onClick:n}),r[0]=n,r[1]=i,r[2]=t):t=r[2],t},H=[{accessorKey:"filename",cell:e=>{let t,r,l,i,o,c,d,u,m,h=(0,a.c)(31),{row:p,table:x}=e,g=x.options.meta,[f,b]=n.useState(p.index===g.firstFrameIndex);h[0]!==f?(t=()=>{b(!f)},h[0]=f,h[1]=t):t=h[1];let y=t,v=p.original,{isLoading:j,enrichedFrame:_}=(0,I.f)(v),w=_??v,C=!!w.context_line;return h[2]!==C?(r=S()("w-100 py-2 px-4 d-flex justify-content-between align-items-center",{[D().stacktraceRowInteractive]:C}),h[2]=C,h[3]=r):r=h[3],h[4]!==w.in_app?(l=!w.in_app&&(0,s.jsx)(E.m,{label:"in_app: false",position:"top",withArrow:!0,color:"gray",children:(0,s.jsx)($.A,{size:14,className:"me-2","aria-label":"in_app: false"})}),h[4]=w.in_app,h[5]=l):l=h[5],h[6]!==w||h[7]!==j?(i=w&&(0,s.jsx)(F,{colno:w.colno,filename:w.filename,lineno:w.lineno,function:w.function,isLoading:j}),h[6]=w,h[7]=j,h[8]=i):i=h[8],h[9]!==l||h[10]!==i?(o=(0,s.jsxs)("div",{children:[l,i]}),h[9]=l,h[10]=i,h[11]=o):o=h[11],h[12]!==y||h[13]!==C||h[14]!==f?(c=C&&(0,s.jsx)(V,{onClick:y,isOpen:f}),h[12]=y,h[13]=C,h[14]=f,h[15]=c):c=h[15],h[16]!==y||h[17]!==r||h[18]!==o||h[19]!==c?(d=(0,s.jsxs)("div",{className:r,onClick:y,children:[o,c]}),h[16]=y,h[17]=r,h[18]=o,h[19]=c,h[20]=d):d=h[20],h[21]!==w.context_line||h[22]!==w.lineno||h[23]!==w.post_context||h[24]!==w.pre_context||h[25]!==C||h[26]!==f?(u=f&&C&&(0,s.jsxs)("pre",{className:D().lineContext,children:[w.pre_context?.map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:D().lineContextLineNo,children:(w.lineno??0)-(w.pre_context?.length??0)+t}),e]},e+t)),w.context_line&&(0,s.jsxs)("div",{className:D().lineContextCurrentLine,children:[(0,s.jsx)("span",{className:D().lineContextLineNo,children:w.lineno}),w.context_line]}),w.post_context?.map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:D().lineContextLineNo,children:w.lineno+t+1}),e]},e+t))]}),h[21]=w.context_line,h[22]=w.lineno,h[23]=w.post_context,h[24]=w.pre_context,h[25]=C,h[26]=f,h[27]=u):u=h[27],h[28]!==d||h[29]!==u?(m=(0,s.jsxs)(s.Fragment,{children:[d,u]}),h[28]=d,h[29]=u,h[30]=m):m=h[30],m}}],B=e=>{let t,r=(0,a.c)(2),{url:n}=e;return r[0]!==n?(t=(0,s.jsx)("span",{title:n,children:n}),r[0]=n,r[1]=t):t=r[1],t},q=n.memo(e=>{let t,r=(0,a.c)(3),{status:n}=e;if(!n)return null;let l=n>=500?"text-danger bg-danger":n>=400?"text-warning bg-warning":"text-success bg-success",i=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${l}`;return r[0]!==n||r[1]!==i?(t=(0,s.jsx)("span",{className:i,children:n}),r[0]=n,r[1]=i,r[2]=t):t=r[2],t}),X=n.memo(e=>{let t,r=(0,a.c)(3),{level:n}=e;if(!n)return null;let l=n.includes("error")?"text-danger bg-danger":n.includes("warn")||n.includes("warning")?"text-warning bg-warning":"bg-muted",i=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${l}`;return r[0]!==n||r[1]!==i?(t=(0,s.jsx)("span",{className:i,children:n}),r[0]=n,r[1]=i,r[2]=t):t=r[2],t}),G=[{accessorKey:"category",header:"Category",size:180,cell:({row:e})=>(0,s.jsxs)("span",{className:"d-flex align-items-center gap-2",children:[e.original.category,"console"===e.original.category&&(0,s.jsx)(X,{level:e.original.level}),"fetch"===e.original.category||"xhr"===e.original.category?(0,s.jsx)(q,{status:e.original.data?.status_code}):null]})},{accessorKey:"message",header:"Data",size:99999,cell:({row:e})=>{if(e.original.data&&("fetch"===e.original.category||"xhr"===e.original.category)){let{method:t,url:r}=e.original.data;return(0,s.jsxs)("div",{className:"text-truncate",children:[(0,s.jsxs)("span",{children:[t," "]}),(0,s.jsx)("span",{title:r,children:(0,s.jsx)(B,{url:r})})]})}if("navigation"===e.original.category&&e.original.data){let{from:t,to:r}=e.original.data;return(0,s.jsxs)("div",{className:"text-truncate",children:[(0,s.jsx)("span",{title:t,children:(0,s.jsx)(B,{url:t})}),(0,s.jsx)("span",{children:" → "}),(0,s.jsx)("span",{title:r,children:(0,s.jsx)(B,{url:r})})]})}if("console"===e.original.category){let{message:t}=e.original;return(0,s.jsx)("pre",{className:"mb-0 text-truncate fs-8",title:t,children:t})}return e.original.message?(0,s.jsx)("div",{className:"text-truncate",children:e.original.message}):(0,s.jsx)("span",{className:"text-muted",children:"Empty"})}},{header:"Timestamp",size:220,cell:({row:e})=>(0,s.jsx)("span",{className:"text-muted",children:(0,s.jsx)(z.H,{value:1e3*e.original.timestamp,format:"withMs"})})}],K=e=>{let t,r,s,l=(0,a.c)(11),{rows:i,maxRows:o}=e,c=void 0===o?5:o,[d,u]=n.useState(!1);l[0]!==d||l[1]!==c||l[2]!==i?(t=d?i:i.slice(0,c),l[0]=d,l[1]=c,l[2]=i,l[3]=t):t=l[3];let m=t,h=i.length??0,p=h>c?h-c:null;l[4]!==d?(r=()=>{u(!d)},l[4]=d,l[5]=r):r=l[5];let x=r;return l[6]!==x||l[7]!==p||l[8]!==d||l[9]!==m?(s={visibleRows:m,hiddenRowsCount:p,handleToggleMoreRows:x,isExpanded:d},l[6]=x,l[7]=p,l[8]=d,l[9]=m,l[10]=s):s=l[10],s},J=e=>{let t,r,n,l,i,o,c,d,u,m,p,x,g,f,b=(0,a.c)(42),{logData:y,breadcrumbs:v,exceptionValues:j}=e,_=j[0];_?.stacktrace?.frames;e:{let e;if(!_?.stacktrace?.frames){let e;b[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],b[0]=e):e=b[0],t=e;break e}b[1]!==_?.stacktrace.frames?(e=_?.stacktrace.frames.slice().reverse(),b[1]=_?.stacktrace.frames,b[2]=e):e=b[2],t=e}let S=t;if(b[3]!==S){let e=S&&S.length?S.find(e=>e.in_app)??S.find(e=>!!e.function||!!e.filename)??S[0]:null;r=e?S.indexOf(e):-1,b[3]=S,b[4]=r}else r=b[4];let E=r;b[5]!==v||b[6]!==_||b[7]!==y?.timestamp?(n=()=>[..._&&v?[{category:"exception",timestamp:new Date(y?.timestamp??0).getTime()/1e3,message:`${_.type}: ${_.value} `}]:[],...v?.slice().reverse()??[]],b[5]=v,b[6]=_,b[7]=y?.timestamp,b[8]=n):n=b[8],y?.timestamp,b[9]!==n?(l=n(),b[9]=n,b[10]=l):l=b[10];let k=l,N=Math.max(5,E+1);b[11]!==S||b[12]!==N?(i={rows:S,maxRows:N},b[11]=S,b[12]=N,b[13]=i):i=b[13];let{handleToggleMoreRows:A,hiddenRowsCount:$,visibleRows:z,isExpanded:I}=K(i);b[14]!==k?(o={rows:k},b[14]=k,b[15]=o):o=b[15];let{handleToggleMoreRows:M,hiddenRowsCount:D,visibleRows:F,isExpanded:V}=K(o);return b[16]!==_?(c=_&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(h.E,{fw:"bold",component:"span",size:"sm",variant:"danger",children:[_.type,":"," "]}),(0,s.jsx)("span",{className:"text-muted",children:_.value})]}),_.mechanism&&(0,s.jsxs)("div",{className:"d-flex gap-2 flex-wrap pt-3",children:[(0,s.jsx)(W,{label:"mechanism",value:_.mechanism?.type}),(0,s.jsx)(W,{label:"handled",value:_.mechanism?.handled?(0,s.jsx)("span",{className:"text-success",children:"true"}):(0,s.jsx)("span",{className:"text-danger",children:"false"})}),_.mechanism?.data?.function?(0,s.jsx)(W,{label:"function",value:_.mechanism.data.function}):null,_.mechanism?.data?.handler?(0,s.jsx)(W,{label:"handler",value:_.mechanism.data.handler}):null,_.mechanism?.data?.target?(0,s.jsx)(W,{label:"target",value:_.mechanism.data.target}):null]})]}),b[16]=_,b[17]=c):c=b[17],b[18]!==E?(d={firstFrameIndex:E},b[18]=E,b[19]=d):d=b[19],b[20]!==z||b[21]!==d?(u=(0,s.jsx)(w.ErrorBoundary,{onError:Z,fallbackRender:Y,children:(0,s.jsx)(L.X,{hideHeader:!0,columns:H,data:z,density:"zero",tableMeta:d})}),b[20]=z,b[21]=d,b[22]=u):u=b[22],b[23]!==j[0].stacktrace?(m="string"==typeof j[0].stacktrace&&(0,s.jsx)("pre",{className:"px-4",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:j[0].stacktrace}),b[23]=j[0].stacktrace,b[24]=m):m=b[24],b[25]!==A||b[26]!==I||b[27]!==$?(p=$?(0,s.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:A,children:I?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R.A,{size:14,className:"me-2"})," Hide stack trace"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.A,{size:14,className:"me-2"}),"Show ",$," more frames"]})}):null,b[25]=A,b[26]=I,b[27]=$,b[28]=p):p=b[28],b[29]!==u||b[30]!==m||b[31]!==p||b[32]!==c?(x=(0,s.jsxs)(P,{title:c,children:[u,m,p]}),b[29]=u,b[30]=m,b[31]=p,b[32]=c,b[33]=x):x=b[33],b[34]!==V||b[35]!==D||b[36]!==F||b[37]!==M?(g=F.length>0&&(0,s.jsx)(O,{title:"Breadcrumbs",children:(0,s.jsxs)(P,{children:[(0,s.jsx)(L.X,{columns:G,data:F,emptyMessage:"No breadcrumbs found"}),D?(0,s.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:M,children:V?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R.A,{size:14,className:"me-2"})," Hide breadcrumbs"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.A,{size:14,className:"me-2"}),"Show ",D," more breadcrumbs"]})}):null]})}),b[34]=V,b[35]=D,b[36]=F,b[37]=M,b[38]=g):g=b[38],b[39]!==x||b[40]!==g?(f=(0,s.jsxs)("div",{children:[x,g]}),b[39]=x,b[40]=g,b[41]=f):f=b[41],f};function Z(e){console.error(e)}function Y(){return(0,s.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering stacktrace"})}var U=r(65234),Q=r.n(U),ee=r(21510),et=r(60665),er=r(34027),es=r(26355),en=r(78694);let ea=function(e){let t="";return e&&(t=` ${({GET:"-X GET",POST:"-X POST",PUT:"-X PUT",PATCH:"-X PATCH",DELETE:"-X DELETE"})[e.toUpperCase()]}`)," \\\n"+t},el=function(e){let t="";return e&&e.map(([e,r])=>{t+=` \\
-H "${e}: ${r.replace(/(\\|")/g,"\\$1")}"`}),t},ei=function(e){let t="";return e&&(t+=` \\
-d "${JSON.stringify(e).replace(/(\\|")/g,"\\$1")}"`),t},eo=function(e){let t="";return e&&(t+=` \\
--data-raw ${/[\0-\x1F\x7F-\x9F!]|\'/.test(e)?"$'"+e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(e){let t=e.charCodeAt(0).toString(16);for(;t.length<4;)t="0"+t;return"\\u"+t})+"'":"'"+e+"'"}`),t},ec=function(e){let t="";return e&&Object.keys(e).forEach(r=>{let s=r.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`);if(e[r])"boolean"==typeof e[r]&&e[r]?t+=`--${s} `:"string"==typeof e[r]&&(t+=`--${s} ${e[r]} `);else throw Error(`Invalid Curl option ${r}`)}),t?` \\
${t}`:t},ed=function(e,t){let r="curl ";return r+=e.url,r+=ea(e.method),r+=el(e.headers),r+="string"==typeof e.body?eo(e.body):ei(e.body),(r+=ec(t)).trim()},eu={base00:"#00000000",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#8378FF",base0E:"#ae81ff",base0F:"#cc6633"},em=(e,t)=>Object.entries(c()(t,(t,r)=>r.startsWith(e))).flatMap(([t,r])=>{let s=r;try{"string"==typeof r&&(s=JSON.parse(r))}catch(e){}let n=t.replace(e,"").replace("_","-"),a=[[n,`${s}`]];if(Array.isArray(s))a=s.map(e=>[n,`${e}`]);else if("object"==typeof s&&Object.keys(s).length>0)try{a=[[n,`${JSON.stringify(s)}`]]}catch(e){console.error(e)}return a}),eh=({body:e,theme:t,emptyMessage:r,notCollectedMessage:a})=>{let l=n.useCallback(e=>(0,s.jsx)("pre",{className:"d-inline text-break",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e}),[]),i=n.useMemo(()=>{if("string"!=typeof e)return null;try{if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))return JSON.parse(e)}catch(e){return null}},[e]);return(0,s.jsx)(s.Fragment,{children:null!=e&&""!=e?(0,s.jsx)("pre",{className:"m-0 px-4 py-3",style:{wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:i?(0,s.jsx)(es.A,{data:i,normallyExpanded:!0}):"string"==typeof e?e:(0,s.jsx)(ee.d,{hideRoot:!0,invertTheme:!1,data:e,theme:t,valueRenderer:l})}):""===e?(0,s.jsx)("div",{className:"px-4 py-3",children:r}):(0,s.jsx)("div",{className:"px-4 py-3",children:a})})};function ep(e){let t,r,n,l,i,o,c,d,u,m,h,p,x,g,f,b=(0,a.c)(41),{eventAttributes:y}=e;b[0]!==y?(t=em("http.request.header.",y),b[0]=y,b[1]=t):t=b[1];let v=t;b[2]!==y?(r=em("http.response.header.",y),b[2]=y,b[3]=r):r=b[3];let j=r,_=y["http.url"],S=y["net.peer.ip"],w=y["http.status_code"],E=y["http.method"],k=y["http.request.body"],N=y["http.response.body"];b[4]!==E||b[5]!==k||b[6]!==v||b[7]!==_?(n=ed({method:E,headers:v,url:_,body:k}),b[4]=E,b[5]=k,b[6]=v,b[7]=_,b[8]=n):n=b[8];let A=n;return _||E||w?(b[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,s.jsxs)(C.$,{size:"xs",variant:"primary",children:[(0,s.jsx)(er.A,{size:14,className:"me-2"}),"Copy Request as Curl"]}),b[9]=l):l=b[9],b[10]!==A?(i=(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)(Q(),{text:A,onCopy:ex,children:l})}),b[10]=A,b[11]=i):i=b[11],b[12]!==_?(o=_&&{label:"URL",value:_},b[12]=_,b[13]=o):o=b[13],b[14]!==E?(c=E&&{label:"Method",value:E},b[14]=E,b[15]=c):c=b[15],b[16]!==S?(d=S&&{label:"Remote Address",value:S},b[16]=S,b[17]=d):d=b[17],b[18]!==y||b[19]!==w?(u=w&&{label:"Status",value:`${w} ${y["http.status_text"]??""}`,className:w>=500?"text-danger":w>=400?"text-warning":"text-success"},b[18]=y,b[19]=w,b[20]=u):u=b[20],b[21]!==o||b[22]!==c||b[23]!==d||b[24]!==u?(m=(0,s.jsx)(en.$K,{children:(0,s.jsx)(L.X,{borderless:!0,density:"compact",columns:en.Qx,data:[o,c,d,u].filter(Boolean),hideHeader:!0})}),b[21]=o,b[22]=c,b[23]=d,b[24]=u,b[25]=m):m=b[25],b[26]!==v?(h=v.length>0&&(0,s.jsx)(en.iV,{title:`Request Headers (${v.length})`,initiallyCollapsed:!0,children:(0,s.jsx)(en.$K,{children:(0,s.jsx)(L.X,{borderless:!0,hideHeader:!0,density:"compact",columns:en.hF,data:v,emptyMessage:"No request headers collected"})})}),b[26]=v,b[27]=h):h=b[27],b[28]!==k?(p=null!=k&&(0,s.jsx)(en.iV,{title:"Request Body",children:(0,s.jsx)(en.$K,{children:(0,s.jsx)(eh,{body:k,theme:eu,emptyMessage:"Empty request",notCollectedMessage:"No request body collected"})})}),b[28]=k,b[29]=p):p=b[29],b[30]!==j?(x=j.length>0&&(0,s.jsx)(en.iV,{title:`Response Headers (${j.length})`,initiallyCollapsed:!0,children:(0,s.jsx)(en.$K,{children:(0,s.jsx)(L.X,{borderless:!0,hideHeader:!0,density:"compact",columns:en.hF,data:j,emptyMessage:"No response headers collected"})})}),b[30]=j,b[31]=x):x=b[31],b[32]!==N?(g=null!=N&&(0,s.jsx)(en.iV,{title:"Response Body",children:(0,s.jsx)(en.$K,{children:(0,s.jsx)(eh,{body:N,theme:eu,emptyMessage:"Empty response",notCollectedMessage:"No response body collected"})})}),b[32]=N,b[33]=g):g=b[33],b[34]!==m||b[35]!==h||b[36]!==p||b[37]!==x||b[38]!==g||b[39]!==i?(f=(0,s.jsxs)("div",{children:[i,m,h,p,x,g]}),b[34]=m,b[35]=h,b[36]=p,b[37]=x,b[38]=g,b[39]=i,b[40]=f):f=b[40],f):null}function ex(){et.$e.show({color:"green",message:"Curl command copied to clipboard"})}let eg=[{accessorKey:"Timestamp",header:"Timestamp",size:120,cell:({row:e})=>(0,s.jsx)("span",{className:"text-muted",title:e.original.Timestamp,children:(0,s.jsx)(z.H,{value:new Date(e.original.Timestamp).getTime(),format:"withMs"})})},{accessorKey:"Name",header:"Name",size:180,cell:({row:e})=>(0,s.jsx)("span",{className:"d-flex align-items-center gap-2",children:e.original.Name})},{accessorKey:"Attributes",header:"Attributes",size:400,cell:({row:e})=>{let t=e.original.Attributes;return t&&Object.keys(t).length>0?(0,s.jsx)(u.a,{children:(0,s.jsx)(b.z,{data:t})}):(0,s.jsx)("span",{className:"text-muted",children:"Empty"})}}],ef=e=>{let t,r,n,l,i,o=(0,a.c)(15),{spanEvents:c}=e;e:{let e;if(!c||0===c.length){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}o[1]!==c?(e=[...c.filter(eb)].sort(ey),o[1]=c,o[2]=e):e=o[2],t=e}let d=t;o[3]!==d?(r={rows:d,maxRows:5},o[3]=d,o[4]=r):r=o[4];let{handleToggleMoreRows:u,hiddenRowsCount:m,visibleRows:h,isExpanded:p}=K(r);if(!d||0===d.length){let e;return o[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:"p-3 text-muted fs-7",children:"No span events available for this trace"}),o[5]=e):e=o[5],e}return o[6]!==h?(n=(0,s.jsx)(w.ErrorBoundary,{onError:ev,fallbackRender:ej,children:(0,s.jsx)(L.X,{columns:eg,data:h,emptyMessage:"No span events found"})}),o[6]=h,o[7]=n):n=o[7],o[8]!==u||o[9]!==m||o[10]!==p?(l=m?(0,s.jsx)(C.$,{variant:"secondary",size:"xs",my:"sm",onClick:u,children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R.A,{size:14,className:"me-2"})," Hide events"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.A,{size:14,className:"me-2"}),"Show ",m," more events"]})}):null,o[8]=u,o[9]=m,o[10]=p,o[11]=l):l=o[11],o[12]!==n||o[13]!==l?(i=(0,s.jsx)("div",{children:(0,s.jsxs)(P,{children:[n,l]})}),o[12]=n,o[13]=l,o[14]=i):i=o[14],i};function eb(e){return"string"==typeof e.Timestamp&&"string"==typeof e.Name&&void 0!==e.Attributes}function ey(e,t){let r=new Date(e.Timestamp).getTime();return new Date(t.Timestamp).getTime()-r}function ev(e){console.error(e)}function ej(){return(0,s.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering span events"})}let e_={};function eS(e){let t,r,l,o,_,S,w,E,C,k,N,A,T,$,R,z,I,L,M,D,F,O,P,W,V,H,B,q,X,G,K=(0,a.c)(96),{source:Z,rowId:Y,aliasWith:U,hideHeader:Q,"data-testid":ee}=e,et=void 0!==Q&&Q;K[0]!==U||K[1]!==Y||K[2]!==Z?(t={source:Z,rowId:Y,aliasWith:U},K[0]=U,K[1]=Y,K[2]=Z,K[3]=t):t=K[3];let{data:er}=(0,f.k1)(t),{onPropertyAddClick:es,generateSearchUrl:en}=(0,n.useContext)(y.D);K[4]!==Z.highlightedRowAttributeExpressions||K[5]!==Z.kind?(r=Z.kind===d.GL.Trace||Z.kind===d.GL.Log?Z.highlightedRowAttributeExpressions??[]:[],K[4]=Z.highlightedRowAttributeExpressions,K[5]=Z.kind,K[6]=r):r=K[6];let ea=r;K[7]!==ea||K[8]!==er||K[9]!==Z?(l=er?(0,g.N4)(Z,ea,er.data||[],er.meta||[]):[],K[7]=ea,K[8]=er,K[9]=Z,K[10]=l):l=K[10];let el=l,ei=er?.meta;K[11]!==ei?(o=(0,f.bn)(ei),K[11]=ei,K[12]=o):o=K[12];let eo=o,ec=Z.eventAttributesExpression;e:{let e,t;K[13]!==er?.data?.[0]?(e=er?.data?.[0]??{},K[13]=er?.data?.[0],K[14]=e):e=K[14],K[15]!==e?(t={...e},K[15]=e,K[16]=t):t=K[16];let r=t;if(!r){_=null;break e}_=r}let ed=_;K[17]===Symbol.for("react.memo_cache_sentinel")?(S=["ServiceName","SpanName","Duration","SeverityText","StatusCode","StatusMessage","SpanKind","TraceId","SpanId","ParentSpanId","ScopeName","ScopeVersion"],K[17]=S):S=K[17];let eu=S;K[18]===Symbol.for("react.memo_cache_sentinel")?(w=(e,t)=>""!==e&&!!eu.includes(t),K[18]=w):w=K[18],K[19]!==ed?(E=c()(ed,w),K[19]=ed,K[20]=E):E=K[20];let em=E,eh=ed?.__hdx_resource_attributes??e_,ex=ed?.__hdx_event_attributes??e_;K[21]!==ec||K[22]!==ed?(C=ec&&ed?.[ec]&&Object.keys(ed[ec]).length>0?{[ec]:ed[ec]}:{},K[21]=ec,K[22]=ed,K[23]=C):C=K[23];let eg=C;K[24]!==en?(k=(e,t)=>en?.({where:e,whereLanguage:t})??"/",K[24]=en,K[25]=k):k=K[25];let eb=k,ey=ec&&eg?.[ec],ev=ey?.["http.url"]!=null;t:{let e;if(!ec){N=eg;break t}let t=eg?.[ec];K[26]!==t||K[27]!==eg||K[28]!==ec||K[29]!==ev?(e=ev&&t?{[ec]:c()(t,ew)}:eg,K[26]=t,K[27]=eg,K[28]=ec,K[29]=ev,K[30]=e):e=K[30],N=e}let ej=N,eS=ed?.__hdx_events_exception_attributes??e_,eE=eS?.["exception.stacktrace"]||eS?.["exception.parsed_stacktrace"],eC=eE??"[]";try{let e;K[31]!==eE?(e=JSON.parse(eE),K[31]=eE,K[32]=e):e=K[32],eC=e}catch(e){}let ek=eS?.["exception.type"];K[33]!==eS?(A="string"!=typeof eS?.["exception.message"]?JSON.stringify(eS?.["exception.message"]):eS?.["exception.message"],K[33]=eS,K[34]=A):A=K[34];let eN=eS?.["exception.mechanism"];K[35]!==eC||K[36]!==ek||K[37]!==A||K[38]!==eN?(T=[{stacktrace:eC,type:ek,value:A,mechanism:eN}],K[35]=eC,K[36]=ek,K[37]=A,K[38]=eN,K[39]=T):T=K[39];let eA=T;K[40]!==ed?.__hdx_events_exception_attributes?($=()=>Object.keys(ed?.__hdx_events_exception_attributes??{}).length>0,K[40]=ed?.__hdx_events_exception_attributes,K[41]=$):$=K[41],ed?.__hdx_events_exception_attributes;let eT=$();ed?.__hdx_span_events;let e$=Array.isArray(ed?.__hdx_span_events)&&ed?.__hdx_span_events.length>0;K[42]!==Z?(R=(0,x.N8)(Z),K[42]=Z,K[43]=R):R=K[43];let eR=R;K[44]!==ed?(z=i()(ed?.__hdx_body)?ed.__hdx_body:ed?.__hdx_body!==void 0?JSON.stringify(ed.__hdx_body):void 0,K[44]=ed,K[45]=z):z=K[45];let ez=z;K[46]!==ed?.__hdx_severity_text||K[47]!==ed?.__hdx_timestamp||K[48]!==et||K[49]!==el||K[50]!==ez||K[51]!==eR?(I=!et&&(0,s.jsx)(u.a,{px:"sm",pt:"md",children:(0,s.jsx)(v.A,{attributes:el,date:new Date(ed?.__hdx_timestamp??0),mainContent:ez,mainContentHeader:eR,severityText:ed?.__hdx_severity_text})}),K[46]=ed?.__hdx_severity_text,K[47]=ed?.__hdx_timestamp,K[48]=et,K[49]=el,K[50]=ez,K[51]=eR,K[52]=I):I=K[52],K[53]===Symbol.for("react.memo_cache_sentinel")?(L=["exception","spanEvents","network","resourceAttributes","eventAttributes","topLevelAttributes"],K[53]=L):L=K[53],K[54]!==ex||K[55]!==ev?(M=ev&&(0,s.jsxs)(m.n.Item,{value:"network",children:[(0,s.jsx)(m.n.Control,{children:(0,s.jsx)(h.E,{size:"sm",ps:"md",children:"HTTP Request"})}),(0,s.jsx)(m.n.Panel,{children:(0,s.jsx)(u.a,{px:"md",children:(0,s.jsx)(ep,{eventAttributes:ex})})})]}),K[54]=ex,K[55]=ev,K[56]=M):M=K[56],K[57]!==eA||K[58]!==ed?.__hdx_timestamp||K[59]!==eT?(D=eT&&(0,s.jsxs)(m.n.Item,{value:"exception",children:[(0,s.jsx)(m.n.Control,{children:(0,s.jsx)(h.E,{size:"sm",ps:"md",children:"Exception"})}),(0,s.jsx)(m.n.Panel,{children:(0,s.jsx)(u.a,{px:"md",children:(0,s.jsx)(J,{exceptionValues:eA,breadcrumbs:[],logData:{timestamp:ed?.__hdx_timestamp}})})})]}),K[57]=eA,K[58]=ed?.__hdx_timestamp,K[59]=eT,K[60]=D):D=K[60],K[61]!==ed?.__hdx_span_events||K[62]!==e$?(F=e$&&(0,s.jsxs)(m.n.Item,{value:"spanEvents",children:[(0,s.jsx)(m.n.Control,{children:(0,s.jsx)(h.E,{size:"sm",ps:"md",children:"Span Events"})}),(0,s.jsx)(m.n.Panel,{children:(0,s.jsx)(u.a,{px:"md",children:(0,s.jsx)(ef,{spanEvents:ed?.__hdx_span_events})})})]}),K[61]=ed?.__hdx_span_events,K[62]=e$,K[63]=F):F=K[63],K[64]!==eo||K[65]!==em?(O=Object.keys(em).length>0&&(0,s.jsxs)(m.n.Item,{value:"topLevelAttributes",children:[(0,s.jsx)(m.n.Control,{children:(0,s.jsx)(h.E,{size:"sm",ps:"md",children:"Top Level Attributes"})}),(0,s.jsx)(m.n.Panel,{children:(0,s.jsx)(u.a,{px:"md",children:(0,s.jsx)(b.z,{data:em,jsonColumns:eo})})})]}),K[64]=eo,K[65]=em,K[66]=O):O=K[66];let eI="log"===Z.kind?"Log":"Span";return K[67]!==eI?(P=(0,s.jsx)(m.n.Control,{children:(0,s.jsxs)(h.E,{size:"sm",ps:"md",children:[eI," Attributes"]})}),K[67]=eI,K[68]=P):P=K[68],K[69]!==ej||K[70]!==eo?(W=(0,s.jsx)(m.n.Panel,{children:(0,s.jsx)(u.a,{px:"md",children:(0,s.jsx)(b.z,{data:ej,jsonColumns:eo})})}),K[69]=ej,K[70]=eo,K[71]=W):W=K[71],K[72]!==P||K[73]!==W?(V=(0,s.jsxs)(m.n.Item,{value:"eventAttributes",children:[P,W]}),K[72]=P,K[73]=W,K[74]=V):V=K[74],K[75]===Symbol.for("react.memo_cache_sentinel")?(H=(0,s.jsx)(m.n.Control,{children:(0,s.jsx)(h.E,{size:"sm",ps:"md",children:"Resource Attributes"})}),K[75]=H):H=K[75],K[76]!==eh?(B=Object.entries(eh),K[76]=eh,K[77]=B):B=K[77],K[78]!==eb||K[79]!==en||K[80]!==eo||K[81]!==es||K[82]!==Z.resourceAttributesExpression||K[83]!==B?(q=(0,s.jsxs)(m.n.Item,{value:"resourceAttributes",children:[H,(0,s.jsx)(m.n.Panel,{children:(0,s.jsx)(p.s,{wrap:"wrap",gap:"2px",mx:"md",mb:"lg",children:B.map(e=>{let[t,r]=e;return(0,n.createElement)(j.A,{...es?{onPropertyAddClick:es,sqlExpression:Z.resourceAttributesExpression&&eo?.includes(Z.resourceAttributesExpression)?`toString(${Z.resourceAttributesExpression}.${t})`:`${Z.resourceAttributesExpression}['${t}']`}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:en?eb:void 0,displayedKey:t,name:`${Z.resourceAttributesExpression}.${t}`,value:r,key:t})})})})]}),K[78]=eb,K[79]=en,K[80]=eo,K[81]=es,K[82]=Z.resourceAttributesExpression,K[83]=B,K[84]=q):q=K[84],K[85]!==M||K[86]!==D||K[87]!==F||K[88]!==O||K[89]!==V||K[90]!==q?(X=(0,s.jsxs)(m.n,{mt:"sm",defaultValue:L,multiple:!0,variant:"noPadding",children:[M,D,F,O,V,q]}),K[85]=M,K[86]=D,K[87]=F,K[88]=O,K[89]=V,K[90]=q,K[91]=X):X=K[91],K[92]!==ee||K[93]!==I||K[94]!==X?(G=(0,s.jsxs)("div",{className:"flex-grow-1 overflow-auto","data-testid":ee,children:[I,X]}),K[92]=ee,K[93]=I,K[94]=X,K[95]=G):G=K[95],G}function ew(e,t){return!t.startsWith("http.")}},26932:(e,t,r)=>{"use strict";r.d(t,{e:()=>b,h:()=>y});var s=r(6029),n=r(75155),a=r(1909),l=r(69580),i=r(88140),o=r(93463),c=r(35555),d=r(82641),u=r(25062),m=r(3635),h=r(27166),p=r(78341),x=r(6876),g=r(58541);let f=e=>{let t,r,i,o,c,f,b,y,j,_,S,w=(0,n.c)(31);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=[d.x.Slack,d.x.Generic,d.x.IncidentIO],w[0]=t):t=w[0];let{data:E,refetch:C}=x.Ay.useWebhooks(t),[k,N]=(0,p.j)(!1),{open:A,close:T}=N,$=Array.isArray(E?.data)&&E.data.length>0;if(w[1]!==E?.data){let e,t=E?.data.map(v)||[];w[3]===Symbol.for("react.memo_cache_sentinel")?(e={value:"",label:"Select a Webhook",disabled:!0},w[3]=e):e=w[3],r=[e,...t],w[1]=E?.data,w[2]=r}else r=w[2];let R=r;w[4]!==e.control||w[5]!==e.name?(i={control:e.control,name:e.name},w[4]=e.control,w[5]=e.name,w[6]=i):i=w[6];let{field:z}=(0,a.as)(i);w[7]!==T||w[8]!==z||w[9]!==C?(o=async e=>{await C(),e&&(z.onChange(e),z.onBlur()),T()},w[7]=T,w[8]=z,w[9]=C,w[10]=o):o=w[10];let I=o;w[11]===Symbol.for("react.memo_cache_sentinel")?(c={withinPortal:!1},w[11]=c):c=w[11];let L=$?"Select a Webhook":"No Webhooks available";return w[12]!==R||w[13]!==e||w[14]!==L?(f=(0,s.jsx)(l.l6,{comboboxProps:c,required:!0,size:"xs",flex:1,placeholder:L,data:R,name:e.name,control:e.control,...e}),w[12]=R,w[13]=e,w[14]=L,w[15]=f):f=w[15],w[16]!==A?(b=(0,s.jsx)(u.$,{size:"xs",variant:"subtle",color:"gray",onClick:A,children:"Add New Incoming Webhook"}),w[16]=A,w[17]=b):b=w[17],w[18]!==f||w[19]!==b?(y=(0,s.jsxs)(m.Y,{gap:"md",justify:"space-between",children:[f,b]}),w[18]=f,w[19]=b,w[20]=y):y=w[20],w[21]!==T||w[22]!==I?(j=(0,s.jsx)(g.g,{onClose:T,onSuccess:I}),w[21]=T,w[22]=I,w[23]=j):j=w[23],w[24]!==T||w[25]!==k||w[26]!==j?(_=(0,s.jsx)(h.a,{opened:k,onClose:T,title:"Add New Webhook",centered:!0,zIndex:9999,size:"lg",children:j}),w[24]=T,w[25]=k,w[26]=j,w[27]=_):_=w[27],w[28]!==_||w[29]!==y?(S=(0,s.jsxs)("div",{children:[y,_]}),w[28]=_,w[29]=y,w[30]=S):S=w[30],S},b=e=>{let t=(0,n.c)(3),{control:r,type:a,namePrefix:l}=e;if("webhook"===a){let e,n=`${void 0===l?"":l}channel.webhookId`;return t[0]!==r||t[1]!==n?(e=(0,s.jsx)(f,{control:r,name:n}),t[0]=r,t[1]=n,t[2]=e):e=t[2],e}return null},y=({thresholdType:e,threshold:t})=>null!=t&&"below"===e?(0,s.jsx)(i.T,{y1:0,y2:t,ifOverflow:"extendDomain",fill:"red",strokeWidth:0,fillOpacity:.05}):null!=t&&"above"===e?(0,s.jsx)(i.T,{y1:t,ifOverflow:"extendDomain",fill:"red",strokeWidth:0,fillOpacity:.05}):null!=t?(0,s.jsx)(o.e,{y:t,label:(0,s.jsx)(c.J,{value:"Alert Threshold",fill:"white",fontSize:11,opacity:.7}),stroke:"red",strokeDasharray:"3 3"}):null;function v(e){return{value:e._id,label:e.name}}},28450:(e,t,r)=>{"use strict";r.d(t,{FB:()=>j,Qg:()=>y,xD:()=>_});var s=r(6029),n=r(75155);r(55729);var a=r(82203),l=r.n(a),i=r(43465),o=r(67270),c=r(30039),d=r(43517),u=r(3635),m=r(43085),h=r(12482),p=r(49672),x=r(78550),g=r(81973),f=r(9897),b=r(7565);let y=(e,t)=>{let r,s,a,l=(0,n.c)(22),{dateRange:i,extraSelects:c,limit:d,logSource:u,order:m,where:f,whereLanguage:b}=e,y=(0,p.fu)(),v=(0,x.Ge)();return l[0]!==i||l[1]!==c||l[2]!==d||l[3]!==u.id||l[4]!==m||l[5]!==f||l[6]!==b?(r=["v2LogBatch",u.id,c,i,f,b,d,m],l[0]=i,l[1]=c,l[2]=d,l[3]=u.id,l[4]=m,l[5]=f,l[6]=b,l[7]=r):r=l[7],l[8]!==y||l[9]!==i||l[10]!==c||l[11]!==d||l[12]!==u||l[13]!==v||l[14]!==m||l[15]!==f||l[16]!==b?(s=async()=>{let e=await (0,o.PV)({select:[{valueExpression:(0,g.xg)(u),alias:"timestamp"},{valueExpression:`${u.serviceNameExpression}`,alias:"_service"},...c&&Array.isArray(c)?c:[]],from:u.from,dateRange:i,timestampValueExpression:u.timestampValueExpression,implicitColumnExpression:u.implicitColumnExpression,where:f,whereLanguage:b,connection:u.connection,limit:{limit:d??50,offset:0},orderBy:`${u.timestampValueExpression} ${m}`},v,u.querySettings);return await y.query({query:e.sql,query_params:e.params,connectionId:u.connection}).then(S)},l[8]=y,l[9]=i,l[10]=c,l[11]=d,l[12]=u,l[13]=v,l[14]=m,l[15]=f,l[16]=b,l[17]=s):s=l[17],l[18]!==t||l[19]!==r||l[20]!==s?(a={queryKey:r,queryFn:s,staleTime:3e5,...t},l[18]=t,l[19]=r,l[20]=s,l[21]=a):a=l[21],(0,h.I)(a)},v=e=>t=>{let r="#";try{r=`/search?q=${encodeURIComponent(`${e.resourceAttributesExpression}.k8s.pod.name:"${t["k8s.pod.name"]}"`)}&source=${e.id}&from=${new Date(t.timestamp).getTime()-9e5}&to=${new Date(t.timestamp).getTime()+1}`}catch(e){}return(0,s.jsxs)(c.K.Item,{children:[(0,s.jsx)(l(),{href:r,children:(0,s.jsx)(d.E,{size:"xs",fz:11,title:t.timestamp,c:"green",td:"underline",fw:"bold",children:(0,s.jsx)(b.H,{value:t.timestamp})})}),(0,s.jsxs)(u.Y,{gap:"xs",my:4,children:[(0,s.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:t["object.reason"]}),t["object.type"]&&(0,s.jsx)(m.E,{variant:"light",size:"xs",fw:"normal",color:"Normal"===t["object.type"]?"green":"yellow",children:t["object.type"]})]}),(0,s.jsx)(d.E,{size:"xs",children:t["object.note"]||t["object.message"]})]},t.id)},j=e=>{let t,r,a,l,o,m,h,p,x,g,f,j,_,S,C,k,N,A,T,$,R=(0,n.c)(82),{q:z,logSource:I,anchorEvent:L,dateRange:M}=e;R[0]!==M?.[0]?(t=M?.[0]??(0,i.A)(new Date,{days:1}),R[0]=M?.[0],R[1]=t):t=R[1];let D=t;R[2]!==M?.[1]?(r=M?.[1]??new Date,R[2]=M?.[1],R[3]=r):r=R[3];let F=r;R[4]!==F||R[5]!==D?(a=[D,F],R[4]=F,R[5]=D,R[6]=a):a=R[6];let O=`${I.eventAttributesExpression}.k8s.resource.name:"events" ${z}`;R[7]===Symbol.for("react.memo_cache_sentinel")?(l={valueExpression:"generateUUIDv4()",alias:"id"},R[7]=l):l=R[7];let P=`JSONExtractString(${I.eventAttributesExpression}['object'], 'metadata', 'creationTimestamp')`;R[8]!==P?(o={valueExpression:P,alias:"object.metadata.creationTimestamp"},R[8]=P,R[9]=o):o=R[9];let W=`JSONExtractString(${I.eventAttributesExpression}['object'], 'reason')`;R[10]!==W?(m={valueExpression:W,alias:"object.reason"},R[10]=W,R[11]=m):m=R[11];let V=`JSONExtractString(${I.eventAttributesExpression}['object'], 'note')`;R[12]!==V?(h={valueExpression:V,alias:"object.note"},R[12]=V,R[13]=h):h=R[13];let H=`JSONExtractString(${I.eventAttributesExpression}['object'], 'type')`;R[14]!==H?(p={valueExpression:H,alias:"object.type"},R[14]=H,R[15]=p):p=R[15];let B=`JSONExtractString(${I.eventAttributesExpression}['object'], 'message')`;R[16]!==B?(x={valueExpression:B,alias:"object.message"},R[16]=B,R[17]=x):x=R[17];let q=`JSONExtractString(${I.eventAttributesExpression}['object'], 'regarding', 'name')`;R[18]!==q?(g={valueExpression:q,alias:"k8s.pod.name"},R[18]=q,R[19]=g):g=R[19];let X=`JSONExtractString(${I.eventAttributesExpression}['object'], 'regarding', 'uid')`;R[20]!==X?(f={valueExpression:X,alias:"k8s.pod.uid"},R[20]=X,R[21]=f):f=R[21];let G=`JSONExtractString(${I.eventAttributesExpression}['object'], 'type')`;R[22]!==G?(j={valueExpression:G,alias:"type"},R[22]=G,R[23]=j):j=R[23];let K=`JSONExtractString(${I.eventAttributesExpression}['object'], 'type')`;R[24]!==K?(_={valueExpression:K,alias:"severity_text"},R[24]=K,R[25]=_):_=R[25];let J=`JSONExtractString(${I.eventAttributesExpression}['object'], 'note')`;R[26]!==J?(S={valueExpression:J,alias:"body"},R[26]=J,R[27]=S):S=R[27],R[28]!==h||R[29]!==p||R[30]!==x||R[31]!==g||R[32]!==f||R[33]!==j||R[34]!==_||R[35]!==S||R[36]!==o||R[37]!==m?(C=[l,o,m,h,p,x,g,f,j,_,S],R[28]=h,R[29]=p,R[30]=x,R[31]=g,R[32]=f,R[33]=j,R[34]=_,R[35]=S,R[36]=o,R[37]=m,R[38]=C):C=R[38],R[39]!==I||R[40]!==C||R[41]!==a||R[42]!==O?(k={dateRange:a,limit:50,logSource:I,order:"desc",where:O,whereLanguage:"lucene",extraSelects:C},R[39]=I,R[40]=C,R[41]=a,R[42]=O,R[43]=k):k=R[43];let{data:Z,isLoading:Y}=y(k);R[44]!==Z?.data?(N=Z?.data||[],R[44]=Z?.data,R[45]=N):N=R[45],R[46]!==N?(A=N.sort(w),R[46]=N,R[47]=A):A=R[47];let U=A;R[48]!==U||R[49]!==L?(T=L?U.filter(e=>new Date(e.timestamp)<new Date(L.timestamp)):[],R[48]=U,R[49]=L,R[50]=T):T=R[50];let Q=T;R[51]!==U||R[52]!==L?($=L?U.filter(e=>new Date(e.timestamp)>new Date(L.timestamp)):[],R[51]=U,R[52]=L,R[53]=$):$=R[53];let ee=$;if(Y){let e;return R[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(d.E,{color:"muted",ta:"center",children:"Loading..."}),R[54]=e):e=R[54],e}if(0===U.length){let e;return R[55]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(d.E,{color:"muted",ta:"center",children:"No events"}),R[55]=e):e=R[55],e}if(L){let e,t,r,n,a,l,i;return R[56]!==I||R[57]!==ee?(e=ee.map(v(I)),R[56]=I,R[57]=ee,R[58]=e):e=R[58],R[59]!==L.timestamp?(t=(0,s.jsx)(b.H,{value:L.timestamp}),R[59]=L.timestamp,R[60]=t):t=R[60],R[61]!==L.timestamp||R[62]!==t?(r=(0,s.jsx)(d.E,{size:"xs",fz:11,title:L.timestamp,children:t}),R[61]=L.timestamp,R[62]=t,R[63]=r):r=R[63],R[64]!==L.label?(n=(0,s.jsx)(u.Y,{gap:"xs",my:4,children:(0,s.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:L.label})}),R[64]=L.label,R[65]=n):n=R[65],R[66]!==L.timestamp||R[67]!==r||R[68]!==n?(a=(0,s.jsxs)(c.K.Item,{ref:E,children:[r,n]},L.timestamp),R[66]=L.timestamp,R[67]=r,R[68]=n,R[69]=a):a=R[69],R[70]!==I||R[71]!==Q?(l=Q.map(v(I)),R[70]=I,R[71]=Q,R[72]=l):l=R[72],R[73]!==e||R[74]!==a||R[75]!==l?(i=(0,s.jsxs)(c.K,{bulletSize:12,lineWidth:1,children:[e,a,l]}),R[73]=e,R[74]=a,R[75]=l,R[76]=i):i=R[76],i}{let e,t;return R[77]!==U||R[78]!==I?(e=U.map(v(I)),R[77]=U,R[78]=I,R[79]=e):e=R[79],R[80]!==e?(t=(0,s.jsx)(c.K,{bulletSize:12,lineWidth:1,children:e}),R[80]=e,R[81]=t):t=R[81],t}},_=e=>{let t=(0,n.c)(6),{status:r}=e;switch(r){case f.h.Pending:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(m.E,{variant:"light",color:"yellow",fw:"normal",tt:"none",size:"md",children:"Pending"}),t[0]=e):e=t[0],e}case f.h.Running:{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(m.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Running"}),t[1]=e):e=t[1],e}case f.h.Succeeded:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(m.E,{variant:"light",color:"indigo",fw:"normal",tt:"none",size:"md",children:"Succeeded"}),t[2]=e):e=t[2],e}case f.h.Failed:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(m.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Failed"}),t[3]=e):e=t[3],e}case f.h.Unknown:{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[4]=e):e=t[4],e}default:{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[5]=e):e=t[5],e}}};function S(e){return e.json()}function w(e,t){return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()}function E(e){null!==e&&e.scrollIntoView({block:"nearest"})}},31451:(e,t,r)=>{"use strict";r.d(t,{Q$:()=>f,nt:()=>y,vN:()=>g,xj:()=>x});var s=r(75155),n=r(36722),a=r.n(n),l=r(76089),i=r(12482),o=r(43152),c=r(46061),d=r(91021),u=r(81973);async function m(){let e=await window.loadPyodide();await e.loadPackage("micropip");let t=e.pyimport("micropip"),r=new URL("/jsonpickle-4.1.1-py3-none-any.whl",window.location.origin);await t.install(r.href);let s=new URL("/drain3-0.9.11-py3-none-any.whl",window.location.origin);return await t.install(s.href),e}class h{constructor(e){this.pyodide=e,this.id=Math.random().toString(36).substring(2,15),this.minerVariableName=`m_${this.id}`}async init(){await this.pyodide.runPythonAsync(`
import js
import json
from drain3 import TemplateMiner
from drain3.template_miner_config import TemplateMinerConfig

${this.minerVariableName} = TemplateMiner(None, TemplateMinerConfig())
    `)}async minePatterns(e){let t=`temp_logs_${this.id}`,r=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${r} = []
      for log in ${t}:
        ${r}.append(${this.minerVariableName}.add_log_message(log))
      json.dumps(${r})
    `))}async matchLogs(e){let t=`temp_logs_${this.id}`,r=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${r} = []
      for log in ${t}:
        match = ${this.minerVariableName}.match(log)
        ${r}.append(match.cluster_id if match else None)
      json.dumps(${r})
    `))}}async function p(e,t){let r=new h(t);return await r.init(),{miner:r,patterns:await r.minePatterns(e)}}let x="__hdx_pattern_field",g="__hdx_timestamp",f="__hdx_severity_text";function b(e){return a()(e[x])}function y(e){let t,r,n,a,h,y=(0,s.c)(21),{config:_,samples:S,bodyValueExpression:w,severityTextExpression:E,totalCount:C,enabled:k}=e,N=void 0===k||k;y[0]!==w||y[1]!==_||y[2]!==N||y[3]!==S||y[4]!==E?(t={config:_,samples:S,bodyValueExpression:w,severityTextExpression:E,enabled:N},y[0]=w,y[1]=_,y[2]=N,y[3]=S,y[4]=E,y[5]=t):t=y[5];let{data:A,isLoading:T,patternQueryConfig:$}=function(e){var t;let r,n,a,l,o,h,y,v,j,_,S,w,E,C,k,N=(0,s.c)(33),{config:A,samples:T,bodyValueExpression:$,severityTextExpression:R,enabled:z}=e,I=void 0===z||z,L=`${$} as ${x}`;N[0]!==A.timestampValueExpression?(r=(0,u.AF)(A.timestampValueExpression),N[0]=A.timestampValueExpression,N[1]=r):r=N[1];let M=`${r} as ${g}`;N[2]!==R?(n=R?[`${R} as ${f}`]:[],N[2]=R,N[3]=n):n=N[3],N[4]!==L||N[5]!==M||N[6]!==n?(a=[L,M,...n],N[4]=L,N[5]=M,N[6]=n,N[7]=a):a=N[7];let D=a.join(",");N[8]===Symbol.for("react.memo_cache_sentinel")?(l=[{ordering:"DESC",valueExpression:"rand()"}],N[8]=l):l=N[8],N[9]!==T?(o={limit:T},N[9]=T,N[10]=o):o=N[10],N[11]!==A||N[12]!==D||N[13]!==o?(h={...A,select:D,orderBy:l,limit:o},N[11]=A,N[12]=D,N[13]=o,N[14]=h):h=N[14];let F=(0,c.YB)(h),O=null!=F&&I;N[15]!==O?(y={enabled:O},N[15]=O,N[16]=y):y=N[16];let{data:P,isLoading:W}=(0,d.HD)(F??A,y);N[17]!==I?(v={enabled:I},N[17]=I,N[18]=v):v=N[18];let{data:V,isLoading:H}=(t=v,(k=(0,s.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(E=["pyodide"],k[0]=E):E=k[0],k[1]!==t.enabled?(C={queryKey:E,queryFn:m,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1,enabled:t.enabled},k[1]=t.enabled,k[2]=C):C=k[2],(0,i.I)(C));N[19]!==A?(j=["patterns",A],N[19]=A,N[20]=j):j=N[20],N[21]!==F||N[22]!==V||N[23]!==P?(_=()=>{if(null==F)throw Error("Unexpected configWithPrimaryAndPartitionKey is null");return p(P?.data.map(b)??[],V).then(e=>{let t=[],r=e.patterns;for(let e=0;e<r.length;e++){let s=r[e],n=P?.data[e];t.push({...n,__hdx_patternId:s.cluster_id,__hdx_pattern:s.template_mined})}return{...P,data:t,additionalKeysLength:F.additionalKeysLength,miner:e.miner}})},N[21]=F,N[22]=V,N[23]=P,N[24]=_):_=N[24];let B=null!=P&&null!=V&&I;N[25]!==j||N[26]!==_||N[27]!==B?(S={queryKey:j,queryFn:_,refetchOnWindowFocus:!1,enabled:B},N[25]=j,N[26]=_,N[27]=B,N[28]=S):S=N[28];let q=(0,i.I)(S),X=q.isLoading||W||H;return N[29]!==F||N[30]!==q||N[31]!==X?(w={...q,isLoading:X,patternQueryConfig:F},N[29]=F,N[30]=q,N[31]=X,N[32]=w):w=N[32],w}(t);(0,c.qs)(A?.meta,A?.additionalKeysLength);let R=A?.data.length,z=C&&R?C/R:1;y[6]!==_.dateRange?(r=(0,l.tA)(_.dateRange,24),n=(0,o.Ht)(_.dateRange[0],_.dateRange[1],r),y[6]=_.dateRange,y[7]=r,y[8]=n):(r=y[7],n=y[8]);let I=n;if(y[9]!==_.dateRange||y[10]!==r||y[11]!==A?.data||y[12]!==z||y[13]!==I){let e=A?.data.reduce(j,{});a={},Object.entries(e??{}).forEach(e=>{let[t,s]=e,n=I.reduce(v,{}),l=s.reduce((e,t)=>{let s=t[g],n=(0,o.W6)(new Date(s),r).getTime();return e[n]=(e[n]||0)+1,e},n),i=Math.max(Math.round(s.length*z),1);a[t]={id:t,pattern:s[s.length-1].__hdx_pattern,count:i,countStr:`~${i}`,severityText:s[s.length-1].__hdx_severity_text,samples:s,__hdx_pattern_trend:{data:Object.entries(l).map(e=>{let[t,r]=e;return{bucket:Number.parseInt(t)/1e3,count:Math.round(r*z)}}),granularity:r,dateRange:_.dateRange}}}),y[9]=_.dateRange,y[10]=r,y[11]=A?.data,y[12]=z,y[13]=I,y[14]=a}else a=y[14];let L=a,M=A?.miner;return y[15]!==L||y[16]!==T||y[17]!==$||y[18]!==R||y[19]!==M?(h={data:L,isLoading:T,miner:M,sampledRowCount:R,patternQueryConfig:$},y[15]=L,y[16]=T,y[17]=$,y[18]=R,y[19]=M,y[20]=h):h=y[20],h}function v(e,t){return e[t.getTime()]=0,e}function j(e,t){let r=`${t.__hdx_patternId}`;return e[r]=e[r]||[],e[r].push(t),e}},32833:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/chart",function(){return r(6889)}])},34955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={default:function(){return c},noSSR:function(){return o}};for(var n in s)Object.defineProperty(t,n,{enumerable:!0,get:s[n]});let a=r(14761);r(6029),r(55729);let l=a._(r(70628));function i(e){return{default:e?.default||e}}function o(e,t){return delete t.webpack,delete t.modules,e(t)}function c(e,t){let r=l.default,s={loading:({error:e,isLoading:t,pastDelay:r})=>null};e instanceof Promise?s.loader=()=>e:"function"==typeof e?s.loader=e:"object"==typeof e&&(s={...s,...e});let n=(s={...s,...t}).loader;return(s.loadableGenerated&&(s={...s,...s.loadableGenerated},delete s.loadableGenerated),"boolean"!=typeof s.ssr||s.ssr)?r({...s,loader:()=>null!=n?n().then(i):Promise.resolve(i(()=>null))}):(delete s.webpack,delete s.modules,o(r,s))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},37901:(e,t,r)=>{"use strict";r.d(t,{$_:()=>h,bn:()=>x,dD:()=>g,k1:()=>p});var s,n=r(6029),a=r(75155),l=r(46375),i=r(82641),o=r(60481),c=r(91021),d=r(81973),u=r(18006),m=r(65081),h=((s={}).TIMESTAMP="__hdx_timestamp",s.BODY="__hdx_body",s.TRACE_ID="__hdx_trace_id",s.SPAN_ID="__hdx_span_id",s.SEVERITY_TEXT="__hdx_severity_text",s.SERVICE_NAME="__hdx_service_name",s.RESOURCE_ATTRIBUTES="__hdx_resource_attributes",s.EVENT_ATTRIBUTES="__hdx_event_attributes",s.EVENTS_EXCEPTION_ATTRIBUTES="__hdx_events_exception_attributes",s.SPAN_EVENTS="__hdx_span_events",s);function p(e){let t,r,s,n,o,m,h,p,x,g,f,b=(0,a.c)(62),{source:y,rowId:v,aliasWith:j}=e;b[0]!==y?(t=(0,d.N8)(y),b[0]=y,b[1]=t):t=b[1];let _=t,S=y.traceIdExpression,w=y.spanIdExpression,E=y.severityTextExpression||y.statusCodeExpression;if(b[2]!==_||b[3]!==w||b[4]!==S||b[5]!==E||b[6]!==y){let e,t,a,l,o,m,h,p,x,g,f,v=y.kind===i.GL.Trace||y.kind===i.GL.Log?(0,u.z4)(y.highlightedRowAttributeExpressions):[];n=c.HD,r=y.connection,b[10]===Symbol.for("react.memo_cache_sentinel")?(e={valueExpression:"*"},b[10]=e):e=b[10],b[11]!==y?(t=(0,d.xg)(y),b[11]=y,b[12]=t):t=b[12],b[13]!==t?(a={valueExpression:t,alias:"__hdx_timestamp"},b[13]=t,b[14]=a):a=b[14],b[15]!==_?(l=_?[{valueExpression:_,alias:"__hdx_body"}]:[],b[15]=_,b[16]=l):l=b[16],b[17]!==S?(o=S?[{valueExpression:S,alias:"__hdx_trace_id"}]:[],b[17]=S,b[18]=o):o=b[18],b[19]!==w?(m=w?[{valueExpression:w,alias:"__hdx_span_id"}]:[],b[19]=w,b[20]=m):m=b[20],b[21]!==E?(h=E?[{valueExpression:E,alias:"__hdx_severity_text"}]:[],b[21]=E,b[22]=h):h=b[22],b[23]!==y.serviceNameExpression?(p=y.serviceNameExpression?[{valueExpression:y.serviceNameExpression,alias:"__hdx_service_name"}]:[],b[23]=y.serviceNameExpression,b[24]=p):p=b[24],b[25]!==y.resourceAttributesExpression?(x=y.resourceAttributesExpression?[{valueExpression:y.resourceAttributesExpression,alias:"__hdx_resource_attributes"}]:[],b[25]=y.resourceAttributesExpression,b[26]=x):x=b[26],b[27]!==y.eventAttributesExpression?(g=y.eventAttributesExpression?[{valueExpression:y.eventAttributesExpression,alias:"__hdx_event_attributes"}]:[],b[27]=y.eventAttributesExpression,b[28]=g):g=b[28],b[29]!==y.kind||b[30]!==y.spanEventsValueExpression?(f=y.kind===i.GL.Trace&&y.spanEventsValueExpression?[{valueExpression:`${y.spanEventsValueExpression}.Attributes[indexOf(${y.spanEventsValueExpression}.Name, 'exception')]`,alias:"__hdx_events_exception_attributes"},{valueExpression:y.spanEventsValueExpression,alias:"__hdx_span_events"}]:[],b[29]=y.kind,b[30]=y.spanEventsValueExpression,b[31]=f):f=b[31],s=[e,a,...l,...o,...m,...h,...p,...x,...g,...f,...v],b[2]=_,b[3]=w,b[4]=S,b[5]=E,b[6]=y,b[7]=r,b[8]=s,b[9]=n}else r=b[7],s=b[8],n=b[9];let C=v??"0=1";b[32]===Symbol.for("react.memo_cache_sentinel")?(o={limit:1},b[32]=o):o=b[32],b[33]!==j?(m=j&&j.length>0?{with:j}:{},b[33]=j,b[34]=m):m=b[34],b[35]!==y.from||b[36]!==r||b[37]!==s||b[38]!==C||b[39]!==m?(h={connection:r,select:s,where:C,from:y.from,limit:o,...m},b[35]=y.from,b[36]=r,b[37]=s,b[38]=C,b[39]=m,b[40]=h):h=b[40],b[41]!==j||b[42]!==v||b[43]!==y?(p=["row_side_panel",v,j,y],b[41]=j,b[42]=v,b[43]=y,b[44]=p):p=b[44];let k=null!=v;b[45]!==k||b[46]!==p?(x={queryKey:p,enabled:k},b[45]=k,b[46]=p,b[47]=x):x=b[47];let N=n(h,x);e:{let e,t,r;if(!N.data?.data?.[0]){g=N.data;break e}let s=N.data.data[0];if(b[48]!==s){if(e={...s},s.__hdx_resource_attributes){let t,r=s.__hdx_resource_attributes;b[50]!==r?(t=(0,l.flatten)(r),b[50]=r,b[51]=t):t=b[51],e.__hdx_resource_attributes=t}if(s.__hdx_event_attributes){let t,r=s.__hdx_event_attributes;b[52]!==r?(t=(0,l.flatten)(r),b[52]=r,b[53]=t):t=b[53],e.__hdx_event_attributes=t}b[48]=s,b[49]=e}else e=b[49];b[54]!==e?(t=[e],b[54]=e,b[55]=t):t=b[55],b[56]!==N.data||b[57]!==t?(r={...N.data,data:t},b[56]=N.data,b[57]=t,b[58]=r):r=b[58],g=r}let A=g;return b[59]!==A||b[60]!==N?(f={...N,data:A},b[59]=A,b[60]=N,b[61]=f):f=b[61],f}function x(e){return e?.filter(e=>"JSON"===e.type||e.type.startsWith("JSON(")).map(e=>e.name)??[]}function g(e){let t,r,s,l,i,c=(0,a.c)(16),{source:d,rowId:u,aliasWith:h,"data-testid":g}=e;c[0]!==h||c[1]!==u||c[2]!==d?(t={source:d,rowId:u,aliasWith:h},c[0]=h,c[1]=u,c[2]=d,c[3]=t):t=c[3];let{data:f}=p(t);e:{let e,t;c[4]!==f?.data?.[0]?(e=f?.data?.[0]??{},c[4]=f?.data?.[0],c[5]=e):e=c[5],c[6]!==e?(t={...e},c[6]=e,c[7]=t):t=c[7];let s=t;if(!s){r=null;break e}r=s}let b=r,y=f?.meta;c[8]!==y?(s=x(y),c[8]=y,c[9]=s):s=c[9];let v=s;return c[10]!==b||c[11]!==v?(l=(0,n.jsx)(o.a,{mx:"md",my:"sm",children:(0,n.jsx)(m.z,{data:b,jsonColumns:v})}),c[10]=b,c[11]=v,c[12]=l):l=c[12],c[13]!==g||c[14]!==l?(i=(0,n.jsx)("div",{className:"flex-grow-1 overflow-auto","data-testid":g,children:l}),c[13]=g,c[14]=l,c[15]=i):i=c[15],i}},40147:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(75155),n=r(80519),a=r.n(n),l=r(3145),i=r(78550);function o(e){let t,r=(0,s.c)(6);r[0]!==e?(t=(0,l.VO)(e),r[0]=e,r[1]=t):t=r[1];let{data:n,isLoading:o}=(0,i.n$)(t);if(e&&!o){let e;return r[2]!==n?(e={isLoading:!1,getFieldExpression:(e,t,r)=>n?.includes(e)?a().format(`${void 0===r?"toString":r}(??.??)`,[e,t]):a().format("??[?]",[e,t])},r[2]=n,r[3]=e):e=r[3],e}{let e;return r[4]!==o?(e={isLoading:o,getFieldExpression:void 0},r[4]=o,r[5]=e):e=r[5],e}}},43370:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var s=r(6029),n=r(75155),a=r(55729),l=r(1909),i=r(66692),o=r(54167),c=r(3635),d=r(21604),u=r(1885),m=r(37659),h=r(94193),p=r(8737),x=r(92917),g=r(52154);function f(e){let t,r,l,i,o,c,d,f,v,j,_,S,w,E,C,k,N,A,T,$,R,z,I,L,M=(0,n.c)(86),{inputRef:D,value:F,onChange:O,placeholder:P,autocompleteOptions:W,size:V,aboveSuggestions:H,belowSuggestions:B,showSuggestionsOnEmpty:q,suggestionsHeader:X,zIndex:G,onLanguageChange:K,language:J,showHotkey:Z,onSubmit:Y,queryHistoryType:U,"data-testid":Q}=e,ee=void 0===P?"Search your events for anything...":P,et=void 0===V?"sm":V,er=void 0===X?"Properties":X,es=void 0===G?999:G,[en,ea]=(0,a.useState)(!1),[el,ei]=(0,a.useState)(!1);M[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{ea(e),ei(e)},M[0]=t):t=M[0];let eo=t,[ec,ed]=(0,a.useState)("auto"),[eu,em]=(0,a.useState)(720),[eh,ep]=(0,a.useState)(-1),[ex,eg]=(0,a.useState)(-1),[ef,eb]=(0,x.mk)(U);e:{let e;if(!U||!ef){let e;M[1]===Symbol.for("react.memo_cache_sentinel")?(e=[],M[1]=e):e=M[1],r=e;break e}M[2]!==ef?(e=ef.map(y),M[2]=ef,M[3]=e):e=M[3],r=e}let ey=r,ev=null!=F&&0===F.length&&ey.length>0&&U;M[4]!==W?(l=new u.A(W??[],{keys:["value"],threshold:0,ignoreLocation:!0}),M[4]=W,M[5]=l):l=M[5];let ej=l,e_=(0,x.d7)(F??"",200);if(M[6]!==W||M[7]!==e_||M[8]!==ej||M[9]!==q){t:{let e=e_.split(" "),t=e[e.length-1];if(0===t.length&&q){let e;M[11]!==W?(e=W??[],M[11]=W,M[12]=e):e=M[12],i=e;break t}i=ej.search(t).map(b)}M[6]=W,M[7]=e_,M[8]=ej,M[9]=q,M[10]=i}else i=M[10];let eS=i;M[13]!==O||M[14]!==Y||M[15]!==eb?(o=e=>{eg(-1),O(e),eb(e),ei(!1),Y?.()},M[13]=O,M[14]=Y,M[15]=eb,M[16]=o):o=M[16];let ew=o;M[17]!==D||M[18]!==O||M[19]!==F?(c=e=>{ep(-1),O(null==F?e:F.split(" ").slice(0,-1).join(" ")+`${F.split(" ").length>1?" ":""}${e}`),D.current?.focus()},M[17]=D,M[18]=O,M[19]=F,M[20]=c):c=M[20];let eE=c,eC=(0,a.useRef)(null);M[21]!==D?(d=()=>{eC.current&&ed(eC.current.clientWidth),D.current&&em(D.current.clientWidth)},M[21]=D,M[22]=d):d=M[22],M[23]!==D||M[24]!==J||M[25]!==K?(f=[J,K,D],M[23]=D,M[24]=J,M[25]=K,M[26]=f):f=M[26],(0,a.useLayoutEffect)(d,f);let ek=eu>300?eu:720;return M[27]!==ek||M[28]!==es?(v={dropdown:{maxWidth:ek,width:"100%",zIndex:es}},M[27]=ek,M[28]=es,M[29]=v):v=M[29],M[30]===Symbol.for("react.memo_cache_sentinel")?(j={flexGrow:1,resize:"none"},M[30]=j):j=M[30],M[31]!==O?(_=e=>O(e.target.value),M[31]=O,M[32]=_):_=M[32],M[33]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{ep(-1),eg(-1),eo(!0)},w=()=>{ep(-1),eg(-1),eo(!1)},M[33]=S,M[34]=w):(S=M[33],w=M[34]),M[35]!==eE||M[36]!==Y||M[37]!==U||M[38]!==eh||M[39]!==eb||M[40]!==eS||M[41]!==F?(E=e=>{"Escape"===e.key&&e.target instanceof HTMLTextAreaElement&&(e.preventDefault(),ei(!1),e.target.blur()),"Tab"===e.key&&e.target instanceof HTMLTextAreaElement&&eS.length>0&&eh<eS.length&&eh>=0&&(e.preventDefault(),eE(eS[eh].value)),"Enter"===e.key&&e.target instanceof HTMLTextAreaElement&&(eS.length>0&&eh<eS.length&&eh>=0?(e.preventDefault(),eE(eS[eh].value)):e.shiftKey||(e.preventDefault(),U&&F&&eb(F),Y?.())),"ArrowDown"===e.key&&e.target instanceof HTMLTextAreaElement&&eS.length>0&&ep(Math.min(eh+1,eS.length-1,9)),"ArrowUp"===e.key&&e.target instanceof HTMLTextAreaElement&&eS.length>0&&ep(Math.max(eh-1,0))},M[35]=eE,M[36]=Y,M[37]=U,M[38]=eh,M[39]=eb,M[40]=eS,M[41]=F,M[42]=E):E=M[42],M[43]!==en||M[44]!==J||M[45]!==K||M[46]!==Z?(C=null!=J&&null!=K?(0,s.jsx)("div",{ref:eC,children:(0,s.jsx)(g.A,{showHotkey:Z&&en,language:J,onLanguageChange:K})}):void 0,M[43]=en,M[44]=J,M[45]=K,M[46]=Z,M[47]=C):C=M[47],M[48]!==Q||M[49]!==D||M[50]!==ee||M[51]!==ec||M[52]!==et||M[53]!==_||M[54]!==E||M[55]!==C||M[56]!==F?(k=(0,s.jsx)(m.A.Target,{children:(0,s.jsx)(h.T,{ref:D,placeholder:ee,className:"fs-8",value:F,size:et,autosize:!0,minRows:1,maxRows:4,style:j,"data-testid":Q,onChange:_,onFocus:S,onBlur:w,onKeyDown:E,rightSectionWidth:ec,rightSection:C})}),M[48]=Q,M[49]=D,M[50]=ee,M[51]=ec,M[52]=et,M[53]=_,M[54]=E,M[55]=C,M[56]=F,M[57]=k):k=M[57],M[58]!==H?(N=null!=H&&(0,s.jsx)("div",{className:"d-flex p-2 flex-wrap px-3",children:H}),M[58]=H,M[59]=N):N=M[59],M[60]!==eE||M[61]!==eh||M[62]!==eS||M[63]!==er?(A=eS.length>0&&(0,s.jsxs)("div",{className:"border-top border-dark fs-8 py-2",children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between px-3 mb-2",children:[(0,s.jsx)("div",{className:"me-2 text-light",children:er}),eS.length>10&&(0,s.jsxs)("div",{className:"text-muted",children:["(Showing Top ",10,")"]})]}),eS.slice(0,10).map((e,t)=>{let{value:r,label:n}=e;return(0,s.jsx)("div",{className:`py-2 px-3 ${eh===t?"bg-muted":""}`,role:"button",onMouseOver:()=>{ep(t)},onClick:()=>{eE(r)},children:(0,s.jsx)("span",{className:"me-1",children:n})},r)})]}),M[60]=eE,M[61]=eh,M[62]=eS,M[63]=er,M[64]=A):A=M[64],M[65]!==A?(T=(0,s.jsx)("div",{children:A}),M[65]=A,M[66]=T):T=M[66],M[67]!==B?($=null!=B&&(0,s.jsx)("div",{className:"border-top px-3 pt-2 pb-1 fs-8 d-flex align-items-center text-muted flex-wrap",children:B}),M[67]=B,M[68]=$):$=M[68],M[69]!==ew||M[70]!==ey||M[71]!==ex||M[72]!==ev?(R=ev&&(0,s.jsxs)("div",{className:"border-top border-dark fs-8 py-2",children:[(0,s.jsx)("div",{className:"text-muted fs-8 fw-bold me-1 px-3",children:"Search History:"}),ey.map((e,t)=>{let{value:r,label:n}=e;return(0,s.jsx)(p.N,{className:`d-block w-100 text-start text-muted fw-normal px-3 py-2 fs-8 ${ex===t?"bg-muted":""}`,onMouseOver:()=>eg(t),onClick:()=>ew(r),children:(0,s.jsx)("span",{className:"me-1 text-truncate",children:n})},r)})]}),M[69]=ew,M[70]=ey,M[71]=ex,M[72]=ev,M[73]=R):R=M[73],M[74]!==R?(z=(0,s.jsx)("div",{children:R}),M[74]=R,M[75]=z):z=M[75],M[76]!==N||M[77]!==T||M[78]!==$||M[79]!==z?(I=(0,s.jsxs)(m.A.Dropdown,{className:"p-0",children:[N,T,$,z]}),M[76]=N,M[77]=T,M[78]=$,M[79]=z,M[80]=I):I=M[80],M[81]!==el||M[82]!==v||M[83]!==k||M[84]!==I?(L=(0,s.jsxs)(m.A,{opened:el,onChange:ei,position:"bottom-start",offset:8,width:"target",withinPortal:!0,closeOnClickOutside:!0,closeOnEscape:!0,styles:v,children:[k,I]}),M[81]=el,M[82]=v,M[83]=k,M[84]=I,M[85]=L):L=M[85],L}function b(e){return e.item}function y(e){return{value:e,label:e}}var v=r(78550);let j=Date.now();function _(e){let{databaseName:t,tableName:r,connectionId:s}=e;return{connection:s,from:{databaseName:t,tableName:r},timestampValueExpression:"",select:"",where:"",dateRange:[new Date(j-432e5),new Date(j)]}}function S(e){return{value:e,label:e}}function w(e){return null!==e.jsType}class E{formatFieldValue(e){return e.path.join(".")}formatFieldLabel(e){return`${e.path.join(".")} (${e.jsType})`}formatKeyValPair(e,t){return`${e}:"${t}"`}}let C=new E;function k(e){let t,r,u,m,h,p,g,b,y,j,E,k,N,A,T,$,R,z,I,L,M,D,F,O,P,W,V,H,B,q,X,G,K,J,Z,Y,U,Q=(0,n.c)(78);Q[0]!==e?({tableConnection:E,tableConnections:k,placeholder:y,size:j,zIndex:N,language:m,onLanguageChange:h,enableHotkey:u,onSubmit:p,additionalSuggestions:t,queryHistoryType:b,"data-testid":r,...g}=e,Q[0]=e,Q[1]=t,Q[2]=r,Q[3]=u,Q[4]=m,Q[5]=h,Q[6]=p,Q[7]=g,Q[8]=b,Q[9]=y,Q[10]=j,Q[11]=E,Q[12]=k,Q[13]=N):(t=Q[1],r=Q[2],u=Q[3],m=Q[4],h=Q[5],p=Q[6],g=Q[7],b=Q[8],y=Q[9],j=Q[10],E=Q[11],k=Q[12],N=Q[13]);let ee=void 0===y?"Search your events for anything...":y,et=void 0===j?"sm":j,{field:er}=(0,l.as)(g),{onChange:es,value:en}=er,ea=(0,v.Ge)(),el=(0,a.useRef)(null),[ei,eo]=(0,a.useState)(""),ec=E||k;Q[14]!==t||Q[15]!==ec?(A={tableConnection:ec,additionalSuggestions:t},Q[14]=t,Q[15]=ec,Q[16]=A):A=Q[16];let ed=function(e,t,r){let s,l,i,o,c,d,u,m,h,p,g,f,b,y,j=(0,n.c)(39),{tableConnection:E,additionalSuggestions:C}=r;j[0]!==E?(s=E?Array.isArray(E)?E:[E]:[],j[0]=E,j[1]=s):s=j[1];let{data:k}=(0,v.Sh)(s);if(j[2]!==C||j[3]!==k||j[4]!==e){let t=(k??[]).filter(w);l=new Map,i=[...t.map(t=>{let r={value:e.formatFieldValue(t),label:e.formatFieldLabel(t)};return l.set(r.value,t),r}),...C?.map(S)??[]],j[2]=C,j[3]=k,j[4]=e,j[5]=l,j[6]=i}else l=j[5],i=j[6];let N=i;j[7]!==l||j[8]!==N?(o={fieldCompleteOptions:N,fieldCompleteMap:l},j[7]=l,j[8]=N,j[9]=o):o=j[9];let{fieldCompleteOptions:A,fieldCompleteMap:T}=o,[$,R]=(0,a.useState)(null);j[10]!==T||j[11]!==t?(c=()=>{let e=T.get(t);e&&R(e)},d=[T,t],j[10]=T,j[11]=t,j[12]=c,j[13]=d):(c=j[12],d=j[13]),(0,a.useEffect)(c,d),j[14]!==e||j[15]!==$||j[16]!==t?(u=()=>{$&&(t.startsWith(e.formatFieldValue($))||R(null))},m=[$,R,t,e],j[14]=e,j[15]=$,j[16]=t,j[17]=u,j[18]=m):(u=j[17],m=j[18]),(0,a.useEffect)(u,m);let z=Array.isArray(E)?E.length>0?E[0]:void 0:E;j[19]!==z?(h=z??{tableName:"",databaseName:"",connectionId:""},j[19]=z,j[20]=h):h=j[20];let{data:I}=(0,v.n$)(h);j[21]!==I||j[22]!==$?(p=$&&I?[(0,x.uc)($.path,I)]:[],j[21]=I,j[22]=$,j[23]=p):p=j[23];let L=p;j[24]!==E?(g=(0,x.$r)(E).map(_),j[24]=E,j[25]=g):g=j[25];let M=g;j[26]!==M||j[27]!==L?(f={chartConfigs:M,keys:L},j[26]=M,j[27]=L,j[28]=f):f=j[28];let{data:D}=(0,v.nT)(f);e:{let t;if(!D||!$){b=A;break e}if(j[29]!==e||j[30]!==$||j[31]!==D){let r;j[33]!==e||j[34]!==$?(r=t=>t.value.flatMap(t=>{if("string"==typeof t){let r=e.formatKeyValPair(e.formatFieldValue($),t);return[{value:r,label:r}]}if("object"!=typeof t)return[];{let r=[];for(let[s,n]of Object.entries(t)){if("string"!=typeof s||"string"!=typeof n)return console.error("unknown type for autocomplete object ",t),[];let a=structuredClone($);a.path.push(s);let l=e.formatKeyValPair(e.formatFieldValue(a),n);r.push({value:l,label:l})}return r}}),j[33]=e,j[34]=$,j[35]=r):r=j[35],t=D.flatMap(r),j[29]=e,j[30]=$,j[31]=D,j[32]=t}else t=j[32];b=t}let F=b;return j[36]!==A||j[37]!==F?(y=(0,v.Ii)([A,F]),j[36]=A,j[37]=F,j[38]=y):y=j[38],y}(C,null!=en?`${en}`:"",A);Q[17]!==ea||Q[18]!==E||Q[19]!==en?(T=()=>{E&&(0,o.oU)({query:en,tableConnection:E,metadata:ea}).then(e=>{eo(e)})},$=[en,E,ea],Q[17]=ea,Q[18]=E,Q[19]=en,Q[20]=T,Q[21]=$):(T=Q[20],$=Q[21]),(0,a.useEffect)(T,$),Q[22]!==u?(R=()=>{u&&el.current?.focus()},Q[22]=u,Q[23]=R):R=Q[23],Q[24]===Symbol.for("react.memo_cache_sentinel")?(z={preventDefault:!0},Q[24]=z):z=Q[24],Q[25]!==u?(I=[u],Q[25]=u,Q[26]=I):I=Q[26],(0,i.vC)("/",R,z,I),Q[27]===Symbol.for("react.memo_cache_sentinel")?(L=(0,s.jsx)("div",{className:"text-muted fs-8 fw-bold me-1",children:"Searching for:"}),Q[27]=L):L=Q[27];let eu=""===ei?"Matching all events, enter a query to search.":ei;return Q[28]!==eu?(M=(0,s.jsxs)(s.Fragment,{children:[L,(0,s.jsx)("div",{className:"text-muted fs-8",children:eu})]}),Q[28]=eu,Q[29]=M):M=Q[29],Q[30]===Symbol.for("react.memo_cache_sentinel")?(D=(0,s.jsx)("div",{className:"me-2 mb-2 text-light",children:"Examples:"}),Q[30]=D):D=Q[30],Q[31]===Symbol.for("react.memo_cache_sentinel")?(F=(0,s.jsx)("span",{className:"me-1",children:"Full Text:"}),Q[31]=F):F=Q[31],Q[32]!==es||Q[33]!==en?(O=(0,s.jsxs)("div",{className:"mb-2 me-2",children:[F,(0,s.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{es(en+(en.length>0?" ":"")+"my log")},children:"my log"})]}),Q[32]=es,Q[33]=en,Q[34]=O):O=Q[34],Q[35]===Symbol.for("react.memo_cache_sentinel")?(P=(0,s.jsx)("span",{className:"me-1",children:"Substring:"}),Q[35]=P):P=Q[35],Q[36]!==es||Q[37]!==en?(W=(0,s.jsxs)("div",{className:"mb-2 me-2",children:[P,(0,s.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{es(en+(en.length>0?" ":"")+"*err*")},children:"*err*"})]}),Q[36]=es,Q[37]=en,Q[38]=W):W=Q[38],Q[39]===Symbol.for("react.memo_cache_sentinel")?(V=(0,s.jsx)("span",{className:"me-1",children:"Exact:"}),Q[39]=V):V=Q[39],Q[40]!==es||Q[41]!==en?(H=(0,s.jsxs)("div",{className:"mb-2 me-2",children:[V,(0,s.jsxs)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{es(en+(en.length>0?" ":"")+'level:"info"')},children:["level:",'"',"info",'"']})]}),Q[40]=es,Q[41]=en,Q[42]=H):H=Q[42],Q[43]===Symbol.for("react.memo_cache_sentinel")?(B=(0,s.jsx)("span",{className:"me-1",children:"Not:"}),Q[43]=B):B=Q[43],Q[44]!==es||Q[45]!==en?(q=(0,s.jsxs)("div",{className:"mb-2 me-2",children:[B,(0,s.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{es(en+(en.length>0?" ":"")+"-level:info")},children:"-level:info"})]}),Q[44]=es,Q[45]=en,Q[46]=q):q=Q[46],Q[47]===Symbol.for("react.memo_cache_sentinel")?(X=(0,s.jsx)("span",{className:"me-1",children:"Existence:"}),Q[47]=X):X=Q[47],Q[48]!==es||Q[49]!==en?(G=(0,s.jsxs)("div",{className:"mb-2 me-2",children:[X,(0,s.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{es(en+(en.length>0?" ":"")+"service:*")},children:"service:*"})]}),Q[48]=es,Q[49]=en,Q[50]=G):G=Q[50],Q[51]===Symbol.for("react.memo_cache_sentinel")?(K=(0,s.jsx)("span",{className:"me-1",children:"Boolean:"}),Q[51]=K):K=Q[51],Q[52]!==es||Q[53]!==en?(J=(0,s.jsxs)("div",{className:"mb-2 me-2",children:[K,(0,s.jsx)("code",{className:"text-muted bg-highlighted p-1 rounded border border-dark",role:"button",onClick:()=>{es(en+(en.length>0?" ":"")+'("foo" OR "bar")')},children:"(foo OR bar)"})]}),Q[52]=es,Q[53]=en,Q[54]=J):J=Q[54],Q[55]===Symbol.for("react.memo_cache_sentinel")?(Z=(0,s.jsx)("a",{className:"text-muted mb-2",target:"_blank",href:"https://clickhouse.com/docs/use-cases/observability/clickstack/search",rel:"noreferrer",children:(0,s.jsxs)(c.Y,{gap:5,children:[(0,s.jsx)(d.A,{size:14}),(0,s.jsx)("span",{children:"Docs"})]})}),Q[55]=Z):Z=Q[55],Q[56]!==O||Q[57]!==W||Q[58]!==H||Q[59]!==q||Q[60]!==G||Q[61]!==J?(Y=(0,s.jsxs)(s.Fragment,{children:[D,O,W,H,q,G,J,Z]}),Q[56]=O,Q[57]=W,Q[58]=H,Q[59]=q,Q[60]=G,Q[61]=J,Q[62]=Y):Y=Q[62],Q[63]!==ed||Q[64]!==r||Q[65]!==u||Q[66]!==m||Q[67]!==es||Q[68]!==h||Q[69]!==p||Q[70]!==ee||Q[71]!==b||Q[72]!==et||Q[73]!==M||Q[74]!==Y||Q[75]!==en||Q[76]!==N?(U=(0,s.jsx)(f,{inputRef:el,value:en,onChange:es,placeholder:ee,autocompleteOptions:ed,size:et,zIndex:N,language:m,showHotkey:u,onLanguageChange:h,onSubmit:p,queryHistoryType:b,"data-testid":r,aboveSuggestions:M,belowSuggestions:Y}),Q[63]=ed,Q[64]=r,Q[65]=u,Q[66]=m,Q[67]=es,Q[68]=h,Q[69]=p,Q[70]=ee,Q[71]=b,Q[72]=et,Q[73]=M,Q[74]=Y,Q[75]=en,Q[76]=N,Q[77]=U):U=Q[77],U}},46061:(e,t,r)=>{"use strict";r.d(t,{rD:()=>eV,Ho:()=>eO,qs:()=>eW,YB:()=>eP});var s=r(6029),n=r(75155),a=r(55729),l=r(75828),i=r.n(l),o=r(92799),c=r(84450),d=r.n(c),u=r(90310),m=r.n(u),h=r(67264),p=r.n(h),x=r(66692),g=r(2893),f=r(47122),b=r(2055),y=r(31292),v=r(40684),j=r(92205),_=r(35467),S=r(76089),w=r(27166),E=r(78253),C=r(60481),k=r(3635),N=r(8737),A=r(63085),T=r(43517),$=r(24589),R=r(94502),z=r(73454),I=r(6620),L=r(38314),M=r(24602),D=r(40387),F=r(95316),O=r(12482),P=r(39696),W=r(79220),V=r(21440),H=r(6876),B=r(61410),q=r(91021),X=r(55024),G=r(78550),K=r(78744),J=r(31451),Z=r(70727),Y=r(39785),U=r(81973),Q=r(68593),ee=r(7565),et=r(57820),er=r(92917),es=r(37659),en=r(78341),ea=r(45172),el=r(9385),ei=r(96413),eo=r(50374),ec=r(90515),ed=r(74620),eu=r.n(ed);let em=e=>{let t,r,a,l,o,c=(0,n.c)(19),{onClick:d,className:u,title:m,tabIndex:h,children:p,variant:x,isActive:g,iconSize:f}=e,b=void 0===h?-1:h,y=void 0===x?"default":x,v=void 0!==g&&g,j=void 0===f?14:f;c[0]!==d?(t=e=>{e.stopPropagation(),e.preventDefault(),d(e)},c[0]=d,c[1]=t):t=c[1];let _=t;c[2]!==u||c[3]!==v||c[4]!==y?(r="copy"===y?i()(eu().iconActionButton,{[eu().copied]:v}):u,c[2]=u,c[3]=v,c[4]=y,c[5]=r):r=c[5];let S=r,w=!m;return c[6]!==p||c[7]!==j||c[8]!==v?(a=v?(0,s.jsx)(ec.A,{size:j}):p,c[6]=p,c[7]=j,c[8]=v,c[9]=a):a=c[9],c[10]!==S||c[11]!==_||c[12]!==a||c[13]!==b?(l=(0,s.jsx)(N.N,{onClick:_,component:"div",className:S,tabIndex:b,role:"button",children:a}),c[10]=S,c[11]=_,c[12]=a,c[13]=b,c[14]=l):l=c[14],c[15]!==w||c[16]!==l||c[17]!==m?(o=(0,s.jsx)(A.m,{label:m,position:"top",withArrow:!0,disabled:w,openDelay:300,closeDelay:100,fz:"xs",children:l}),c[15]=w,c[16]=l,c[17]=m,c[18]=o):o=c[18],o},eh=({children:e,cellValue:t,tableContainerRef:r,wrapLinesEnabled:n,columnName:l,isChart:o=!1})=>{let[c,{close:d,open:u}]=(0,en.j)(!1),[m,h]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1),g=(0,a.useRef)(void 0),f=(0,a.useRef)(void 0);(0,a.useEffect)(()=>()=>{g.current&&clearTimeout(g.current),f.current&&clearTimeout(f.current)},[]);let{onPropertyAddClick:b}=(0,a.useContext)(eo.D),y=l&&b&&null!=t,v=()=>{p||(g.current&&clearTimeout(g.current),u())},j=()=>{g.current=setTimeout(()=>{d()},100)},_=()=>{d(),x(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{x(!1)},1e3)},S=async()=>{try{let e="string"==typeof t?t:String(t??"");await navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)}catch(e){console.error("Failed to copy to clipboard:",e)}},w=y?3:1;return o?(0,s.jsx)("div",{className:i()(eu().fieldText,{[eu().chart]:o}),style:{display:"flex",alignItems:"center"},children:e}):(0,s.jsx)("div",{className:i()(eu().fieldText,{[eu().truncated]:!n&&!o,[eu().wrapped]:n,[eu().chart]:o}),children:(0,s.jsxs)(es.A,{width:20*w+4*(w-1),position:"top-start",offset:5,opened:c,portalProps:{target:r??void 0},closeOnClickOutside:!1,clickOutsideEvents:[],children:[(0,s.jsx)(es.A.Target,{children:(0,s.jsx)("span",{onMouseEnter:v,onMouseLeave:j,onClick:_,tabIndex:-1,"aria-hidden":"true",style:{cursor:"pointer"},children:e})}),(0,s.jsx)(es.A.Dropdown,{style:{pointerEvents:"auto"},onMouseEnter:v,onMouseLeave:j,className:eu().fieldTextPopover,children:(0,s.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,s.jsx)(em,{onClick:S,variant:"copy",isActive:m,title:m?"Copied!":"Copy field value",children:(0,s.jsx)(ea.A,{size:14})}),y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(em,{onClick:()=>{y&&(b(l,"string"==typeof t?t:String(t??""),"include"),_())},variant:"copy",title:"Toggle filter for this value",children:(0,s.jsx)(el.A,{size:14})}),(0,s.jsx)(em,{onClick:()=>{y&&(b(l,"string"==typeof t?t:String(t??""),"exclude"),_())},variant:"copy",title:"Exclude this value",children:(0,s.jsx)(ei.A,{size:14})})]})]})})]})})};var ep=r(56795);let ex=({row:e,getRowWhere:t,sourceId:r,isWrapped:n,onToggleWrap:l})=>{let[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),u=async()=>{try{let{[Z.ZO.ID]:t,...r}=e,s=Object.entries(r).reduce((e,[t,r])=>{if("string"==typeof r&&r.startsWith("{")||r.startsWith("["))try{e[t]=JSON.parse(r)}catch{e[t]=r}else e[t]=r;return e},{}),n=JSON.stringify(s,null,2);await navigator.clipboard.writeText(n),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy row data to clipboard:",e)}},m=async()=>{try{let s=t(e),n=new URL(window.location.href);n.searchParams.set("rowWhere",s.where),r&&n.searchParams.set("rowSource",r),await navigator.clipboard.writeText(n.toString()),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error("Failed to copy URL to clipboard:",e)}};return(0,s.jsxs)("div",{className:eu().rowButtons,children:[!n&&(0,s.jsx)(em,{onClick:l,variant:"copy",title:"Wrap All Lines",children:(0,s.jsx)(M.A,{size:16})}),(0,s.jsx)(em,{onClick:u,variant:"copy",isActive:i,title:i?"Copied entire row as JSON!":"Copy entire row as JSON",children:(0,s.jsx)(ea.A,{size:16})}),(0,s.jsx)(em,{onClick:m,variant:"copy",isActive:c,title:c?"Copied shareable link!":"Copy shareable link to this specific row",children:(0,s.jsx)(ep.A,{size:16})})]})};var eg=r(48423),ef=r(22623),eb=r(59029),ey=r(74011),ev=r(97767),ej=r(67872);let e_=({searchQuery:e,onSearchChange:t,matchIndices:r,currentMatchIndex:n,onPreviousMatch:l,onNextMatch:i,isVisible:o,onVisibilityChange:c,containerRef:d})=>{let[u,m]=(0,a.useState)(!1),h=(0,a.useRef)(null),p=o??u,x=(0,a.useCallback)(()=>{void 0!==o?c?.(!1):m(!1),t("")},[o,t,c]),g=(0,a.useCallback)(()=>{void 0!==o?c?.(!0):m(!0),setTimeout(()=>{h.current?.focus(),h.current?.select()},0)},[o,c]),f=(0,a.useCallback)(e=>{if((e.metaKey||e.ctrlKey)&&"f"===e.key){if(d&&!(0,er.dS)(d))return;e.preventDefault(),g()}"Escape"===e.key&&p&&x()},[p,x,g]);(0,a.useEffect)(()=>(window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}),[f]);let b=(0,a.useCallback)(e=>{"Enter"===e.key&&r.length>0&&(e.shiftKey?l():i(),e.preventDefault())},[r.length,l,i]);return p?(0,s.jsx)(ef.t,{p:"xs",withBorder:!0,shadow:"md",pos:"absolute",top:8,right:8,style:{zIndex:2},miw:400,maw:500,role:"search","aria-label":"Table search",children:(0,s.jsxs)(k.Y,{gap:"xs",align:"center",wrap:"nowrap",children:[(0,s.jsx)(eb.k,{ref:h,placeholder:"Find in table...",value:e,onChange:e=>t(e.target.value),onKeyDown:b,size:"xs",style:{flex:1,minWidth:0},"aria-label":"Search table contents","aria-describedby":r.length>0?"search-match-count":void 0,rightSection:e?(0,s.jsx)(N.N,{onClick:()=>t(""),display:"flex",style:{alignItems:"center"},title:"Clear search","aria-label":"Clear search",children:(0,s.jsx)(ey.A,{size:14})}):null}),r.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(T.E,{id:"search-match-count",size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},"aria-live":"polite",children:[n+1," of ",r.length]}),(0,s.jsxs)(k.Y,{gap:4,children:[(0,s.jsx)(N.N,{onClick:l,display:"flex",style:{alignItems:"center"},title:"Previous match (Shift+Enter)","aria-label":"Previous match",children:(0,s.jsx)(ev.A,{size:16})}),(0,s.jsx)(N.N,{onClick:i,display:"flex",style:{alignItems:"center"},title:"Next match (Enter)","aria-label":"Next match",children:(0,s.jsx)(ej.A,{size:16})})]})]}):e?(0,s.jsx)(T.E,{size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},role:"status","aria-live":"polite",children:"No matches"}):null,(0,s.jsx)(N.N,{onClick:x,display:"flex",style:{alignItems:"center"},title:"Close search (Esc)","aria-label":"Close search",children:(0,s.jsx)(ey.A,{size:16})})]})}):null},eS=e=>{let t,r,a,l=(0,n.c)(17),{searchQuery:i,matchIndices:o,currentMatchIndex:c,dedupedRows:d,tableRows:u,getRowId:m,onMatchClick:h}=e;if(!i||0===o.length||0===u.length)return null;if(l[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",zIndex:1},l[0]=t):t=l[0],l[1]!==c||l[2]!==d||l[3]!==m||l[4]!==o||l[5]!==h||l[6]!==u){let e;l[8]!==c||l[9]!==d||l[10]!==m||l[11]!==o.length||l[12]!==h||l[13]!==u?(e=(e,t)=>{let r=d[e];if(!r)return null;let n=u.findIndex(e=>m(e.original)===m(r));if(-1===n)return null;let a=n/u.length*100,l=100/u.length,i=t===c;return(0,s.jsx)(C.a,{pos:"absolute",top:`${a}%`,right:0,w:"100%",h:`${l}%`,bg:i?"var(--mantine-color-orange-5)":"var(--mantine-color-yellow-5)",style:{cursor:"pointer",pointerEvents:"auto",minHeight:1,maxHeight:4},onClick:()=>h(t),title:`Match ${t+1} of ${o.length}`},`match-indicator-${e}`)},l[8]=c,l[9]=d,l[10]=m,l[11]=o.length,l[12]=h,l[13]=u,l[14]=e):e=l[14],r=o.map(e),l[1]=c,l[2]=d,l[3]=m,l[4]=o,l[5]=h,l[6]=u,l[7]=r}else r=l[7];return l[15]!==r?(a=(0,s.jsx)(C.a,{pos:"absolute",right:0,top:0,bottom:0,w:8,style:t,children:r}),l[15]=r,l[16]=a):a=l[16],a};var ew=r(88339),eE=r(17421),eC=r(41038),ek=r(81055),eN=r(70114);let eA=(0,a.memo)(e=>{let t,r,a,l,o,c=(0,n.c)(17),{columnsLength:d,children:u,virtualKey:m,source:h,rowId:p,measureElement:x,virtualIndex:g}=e,f=(()=>{let e,t=(0,n.c)(3),[,r]=(0,eC.ZA)("rowWhere"),[,s]=(0,eC.ZA)("rowSource");return t[0]!==r||t[1]!==s?(e=(e,t)=>{r(e),s(t??null)},t[0]=r,t[1]=s,t[2]=e):e=t[2],e})(),b=`expanded-row-${p}`,y=`${m}-expanded`;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=i()("mx-2 mb-2 rounded",eu().expandedRowContent),c[0]=t):t=c[0],c[1]!==f||c[2]!==p||c[3]!==h?.id?(r=f&&(0,s.jsx)("button",{type:"button",className:i()("position-absolute top-0 end-0 mt-1 me-1 p-1 border-0 bg-transparent text-muted rounded",eu().expandButton),onClick:()=>f(p,h?.id),title:"Open in sidebar","aria-label":"Open in sidebar",style:{zIndex:1,fontSize:"12px",lineHeight:1},children:(0,s.jsx)(ek.A,{size:14})}),c[1]=f,c[2]=p,c[3]=h?.id,c[4]=r):r=c[4],c[5]!==u||c[6]!==r?(a=(0,s.jsx)("div",{className:t,children:(0,s.jsx)("div",{className:"position-relative",children:(0,s.jsxs)("div",{className:"px-3 pt-2 position-relative",children:[r,u]})})}),c[5]=u,c[6]=r,c[7]=a):a=c[7],c[8]!==d||c[9]!==a?(l=(0,s.jsx)("td",{colSpan:d,className:"p-0 border-0",children:a}),c[8]=d,c[9]=a,c[10]=l):l=c[10],c[11]!==x||c[12]!==b||c[13]!==y||c[14]!==l||c[15]!==g?(o=(0,s.jsx)("tr",{"data-testid":b,className:eu().expandedRow,"data-index":g,ref:x,children:l},y),c[11]=x,c[12]=b,c[13]=y,c[14]=l,c[15]=g,c[16]=o):o=c[16],o}),eT=(0,a.memo)(e=>{let t,r,a,l,o,c,d=(0,n.c)(16),{rowId:u,isExpanded:m,highlightedLineId:h,toggleRowExpansion:p}=e,x=h===u,g=h!==u;d[0]!==m||d[1]!==x||d[2]!==g?(t=i()(eu().expandButton,{[eu().expanded]:m,"text-brand":x,"text-muted":g}),d[0]=m,d[1]=x,d[2]=g,d[3]=t):t=d[3],d[4]!==u||d[5]!==p?(r=e=>{e.stopPropagation(),p(u)},d[4]=u,d[5]=p,d[6]=r):r=d[6];let f=`${m?"Collapse":"Expand"} log details`;return d[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(eN.A,{size:16}),d[7]=a):a=d[7],d[8]!==m||d[9]!==t||d[10]!==r||d[11]!==f?(l=(0,s.jsx)("button",{type:"button",className:t,onClick:r,"aria-expanded":m,"aria-label":f,children:a}),d[8]=m,d[9]=t,d[10]=r,d[11]=f,d[12]=l):l=d[12],d[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)("span",{className:eu().expandButtonSeparator}),d[13]=o):o=d[13],d[14]!==l?(c=(0,s.jsxs)("span",{className:"d-flex align-items-center justify-content-center",children:[l,o]}),d[14]=l,d[15]=c):c=d[15],c});eT.displayName="ExpandButton";var e$=r(61629);let eR="NULL",ez={duration:e=>e.duration>=0?e.duration:eR,default:(e,t)=>e[t]},eI=e=>e[Z.ZO.ID];function eL(e,t){return(ez[e]??ez.default)(t,e)}let eM=()=>null,eD=e=>{let t,r,a,l,i,o,c,d,u,m,h=(0,n.c)(17),{data:p,dateRange:x,color:_}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={position:"relative",width:"100%",height:"100%"},r={position:"absolute",left:0,right:0,bottom:0,top:0},h[0]=t,h[1]=r):(t=h[0],r=h[1]),h[2]===Symbol.for("react.memo_cache_sentinel")?(a={top:4,left:0,right:4,bottom:0},h[2]=a):a=h[2];let S=x[0].getTime()/1e3,w=x[1].getTime()/1e3;h[3]!==S||h[4]!==w?(l=[S,w],h[3]=S,h[4]=w,h[5]=l):l=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(i={fontSize:12,fontFamily:"IBM Plex Mono, monospace"},h[6]=i):i=h[6],h[7]!==l?(o=(0,s.jsx)(g.W,{dataKey:"bucket",domain:l,interval:"preserveStartEnd",scale:"time",type:"number",tickFormatter:eH,minTickGap:50,tick:i}),h[7]=l,h[8]=o):o=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsx)(f.h,{width:40,minTickGap:25,tickFormatter:eB,tick:{fontSize:12,fontFamily:"IBM Plex Mono, monospace"}}),h[9]=c):c=h[9];let E=_||er.lm[0];return h[10]!==E?(d=(0,s.jsx)(b.y,{isAnimationActive:!1,dataKey:"count",stackId:"a",fill:E,maxBarSize:24}),h[10]=E,h[11]=d):d=h[11],h[12]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsx)(y.m,{content:(0,s.jsx)(eM,{})}),h[12]=u):u=h[12],h[13]!==p||h[14]!==d||h[15]!==o?(m=(0,s.jsx)("div",{style:t,children:(0,s.jsx)("div",{style:r,children:(0,s.jsx)(v.u,{width:"100%",height:"100%",minWidth:0,children:(0,s.jsxs)(j.E,{width:500,height:300,data:p,syncId:"hdx",syncMethod:"value",margin:a,children:[o,c,d,u]})})})}),h[13]=p,h[14]=d,h[15]=o,h[16]=m):m=h[16],m},eF=e=>{let t,r,a,l,i=(0,n.c)(12),{opened:o,onClose:c,config:d}=e;i[0]!==d?(t=["SqlModal",d],i[0]=d,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(r={queryKey:t,placeholderData:eq,enabled:o},i[2]=o,i[3]=t,i[4]=r):r=i[4];let{data:u,isLoading:m}=(0,q.zu)(d,r);return i[5]!==m||i[6]!==u?(a=u?(0,s.jsx)(ew.V,{data:u,enableCopy:!0}):m?(0,s.jsxs)("div",{className:"text-center my-2",children:[(0,s.jsx)("div",{className:"d-inline-block me-2",children:(0,s.jsx)(R.A,{size:14,className:"spin-animate"})}),"Loading SQL..."]}):(0,s.jsx)("div",{className:"text-center my-2",children:"No SQL available"}),i[5]=m,i[6]=u,i[7]=a):a=i[7],i[8]!==c||i[9]!==o||i[10]!==a?(l=(0,s.jsx)(w.a,{opened:o,onClose:c,title:"Generated SQL",size:"auto",children:a}),i[8]=c,i[9]=o,i[10]=a,i[11]=l):l=i[11],l},eO=(0,a.memo)(({tableId:e,displayedColumns:t,fetchNextPage:r,hasNextPage:l,highlightedLineId:c,isLive:u,isLoading:h,rows:p,generateRowId:g,onInstructionsClick:f,onRowDetailsClick:b,onScroll:y,onSettingsClick:v,onShowPatternsClick:j,wrapLines:S=!1,columnNameMap:w,showServiceColumn:O=!0,dedupRows:H,isError:B,error:G,columnTypeMap:K,dateRange:J,loadingDate:U,config:es,onChildModalOpen:en,renderRowDetails:ea,source:el,onExpandedRowsChange:ei,collapseAllRows:eo,enableSorting:ec=!1,onSortingChange:ed,sortOrder:em,showExpandButton:ep=!0,getRowWhere:ef,variant:eb="default"})=>{let ey=(0,a.useMemo)(()=>{let e=new Set;return(H?p.filter(t=>{let r=g(t);return!e.has(r.where)&&(e.add(r.where),!0)}):p).map(e=>{let t=g(e);return{...e,[Z.ZO.ID]:t.where,[Z.ZO.ALIAS_WITH]:t.aliasWith}})},[p,H,g]),ev=(0,a.useCallback)(e=>{b?.(e)},[b]),{userPreferences:{isUTC:ej}}=(0,et.HW)(),[eC,ek]=(0,er.Mj)(`${e}-column-sizes`,{}),[eN,ez]=(0,a.useState)(null),eM=(0,a.useCallback)(e=>(e&&ez(e),()=>{ez(null)}),[]),{data:eO}=(0,q.Kc)(es),eP=(0,er.ZC)(u);(0,a.useEffect)(()=>{u&&!1===eP&&null!=eN&&(eN.scrollTop=0)},[u,eP,eN]);let eW=(0,a.useMemo)(()=>(function(e){let t={},r=Math.min(e.length,100);for(let s=0;s<r;s++){let r=e[s];Object.keys(r).forEach(e=>{let s=r[e];(s?.length||0)>0&&512>(s?.length||0)&&d()(s)&&null!=(0,er.lO)(s)&&(t[e]=(t[e]??0)+1)})}let s=0,n="";for(let[e,r]of Object.entries(t))r>s&&(s=r,n=e);if(s>0)return n})(ey),[ey]),{csvData:eV,maxRows:eH,isLimited:eB}=(0,X.u)(ey,t.map(e=>({dataKey:e,displayName:w?.[e]??e}))),{expandedRows:eq,toggleRowExpansion:eX,collapseAllRows:eG}=(e=>{let t,r,s,l,i=(0,n.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(t={},i[0]=t):t=i[0];let[o,c]=(0,a.useState)(t);i[1]!==e?(r=t=>{c(r=>{let s={...r,[t]:!r[t]},n=Object.values(s).some(Boolean);return e?.(n),s})},i[1]=e,i[2]=r):r=i[2];let d=r;i[3]!==e?(s=()=>{c({}),e?.(!1)},i[3]=e,i[4]=s):s=i[4];let u=s;return i[5]!==u||i[6]!==o||i[7]!==d?(l={expandedRows:o,toggleRowExpansion:d,collapseAllRows:u},i[5]=u,i[6]=o,i[7]=d,i[8]=l):l=i[8],l})(ei);(0,a.useEffect)(()=>{eo&&eG()},[eo,eG]);let eK=function({rows:e,searchableColumns:t,debounceMs:r=300,onVisibilityChange:s}){let[n,l]=(0,a.useState)(""),[i]=(0,Y.o)(n,r),[o,c]=(0,a.useState)(0),[d,u]=(0,a.useState)([]),[m,h]=(0,a.useState)(!1),p=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(!i.trim()){u([]),c(0);return}let r=i.toLowerCase(),s=[];e.forEach((e,n)=>{t.map(t=>{let r=e[t];return null!=r?String(r).toLowerCase():""}).join(" ").includes(r)&&s.push(n)});let n=d.length;u(s),0===n&&s.length>0?(c(0),p.current=!0):s.length>0&&o>=s.length&&(c(s.length-1),p.current=!0)},[i,e,t]),(0,a.useEffect)(()=>{s?.(m)},[m,s]);let x=(0,a.useCallback)(e=>{l(e),e||(u([]),c(0),p.current=!1)},[]),g=(0,a.useCallback)(()=>{p.current=!0,c(e=>e>0?e-1:d.length-1)},[d.length]),f=(0,a.useCallback)(()=>{p.current=!0,c(e=>e<d.length-1?e+1:0)},[d.length]),b=(0,a.useCallback)(e=>{p.current=!0,c(e)},[]),y=(0,a.useCallback)(()=>{l(""),u([]),c(0),p.current=!1,h(!1)},[]),v=(0,a.useCallback)(()=>{p.current=!1},[]);return{searchQuery:i,inputValue:n,setInputValue:l,matchIndices:d,currentMatchIndex:o,isSearchVisible:m,setIsSearchVisible:h,shouldScrollToMatch:p.current,clearShouldScrollToMatch:v,handlePreviousMatch:g,handleNextMatch:f,handleMatchClick:b,handleSearchChange:x,resetSearch:y}}({rows:ey,searchableColumns:t,debounceMs:300}),eJ=(0,a.useMemo)(()=>[...ep?[{id:"expand-btn",accessorKey:Z.ZO.ID,header:()=>"",cell:e=>{let t=e.getValue(),r=eq[t]??!1;return(0,s.jsx)(eT,{rowId:t,isExpanded:r,highlightedLineId:c,toggleRowExpansion:eX})},size:32,enableResizing:!1,enableSorting:!1,meta:{className:"text-center"}}]:[],...t.map((e,r)=>{let n=K.get(e)?._type,a=n===_.A2.Date,l=e===eW;return{meta:{column:e,jsColumnType:n},id:eO?.[e]?`"${e}"`:e,enableSorting:n!==_.A2.Dynamic,accessorFn:m()(eL)(e),header:`${w?.[e]??e}${a?ej?" (UTC)":" (Local)":""}`,cell:t=>{let r=t.getValue();if("__hdx_pattern_trend"===e)return(0,s.jsx)("div",{style:{height:50,width:"100%"},children:(0,s.jsx)(eD,{data:r.data,dateRange:r.dateRange,color:(0,er.aw)(t.row.original.severityText)})});if(a){let e=new Date(r);return(0,s.jsx)("span",{className:"text-muted",children:(0,s.jsx)(ee.H,{value:e,format:"withMs"})})}let n="string"==typeof r?r:`${r}`;if(e===eW)return(0,s.jsx)(e$.A,{level:n});let l=n.length>500?`${n.slice(0,500)}...`:n,o=!!eK.searchQuery&&eK.matchIndices.length>0&&eK.matchIndices[eK.currentMatchIndex]===t.row.index,c=eK.searchQuery?((e,t,r={})=>{if(!t.trim())return e;let n=r.isCurrentMatch?r.currentMatchBackgroundColor||"var(--mantine-color-orange-5)":r.backgroundColor||"var(--mantine-color-yellow-3)",a=e.toLowerCase(),l=t.toLowerCase(),i=[],o=0,c=a.indexOf(l);for(;-1!==c;)c>o&&i.push(e.slice(o,c)),i.push((0,s.jsx)("mark",{style:{backgroundColor:n,color:r.textColor||"var(--color-text-inverted)",padding:0},children:e.slice(c,c+t.length)},`${c}-${o}`)),o=c+t.length,c=a.indexOf(l,o);return o<e.length&&i.push(e.slice(o)),i.length>0?(0,s.jsx)(s.Fragment,{children:i}):e})(l,eK.searchQuery,{isCurrentMatch:o}):l;return(0,s.jsx)("span",{className:i()({"text-muted":r===eR}),children:c})},size:r===t.length-1?Q.k:eC[e]??(a?170:l?115:160)}})],[ej,c,t,eC,w,K,eW,eq,eX,ep,eO,eK.searchQuery,eK.matchIndices,eK.currentMatchIndex]),eZ=(0,a.useCallback)(e=>{if(e){let{scrollHeight:t,scrollTop:s,clientHeight:n}=e;t-s-n<500&&!h&&l&&r?.({cancelRefetch:!1})}},[r,h,l]);(0,a.useEffect)(()=>{eZ(eN)},[eZ,eN]);let eY=(0,a.useMemo)(()=>{let t={data:ey,columns:eJ,getCoreRowModel:(0,P.HT)(),enableSorting:ec,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(em??[]);ed?.(t??null)}else ed?.(e??null)},state:{sorting:em??[]},enableColumnResizing:!0,columnResizeMode:"onChange"};return e?{...t,state:{columnSizing:eC},onColumnSizingChange:e=>{let t=e instanceof Function?e():e;ek({...eC,...t})}}:t},[eJ,ey,e,em,ec,ed,eC,ek]),eU=(0,W.N4)(eY),{rows:eQ}=eU.getRowModel(),e0=(0,V.Te)({count:eQ.length,getScrollElement:(0,a.useCallback)(()=>eN,[eN]),estimateSize:(0,a.useCallback)(()=>23,[]),overscan:30,paddingEnd:20}),e1=e0.getVirtualItems(),e2=e0.getTotalSize(),[e3,e4]=(0,a.useMemo)(()=>e1.length>0?[Math.max(0,e1[0].start-e0.options.scrollMargin),Math.max(0,e2-e1[e1.length-1].end)]:[0,0],[e1,e0.options.scrollMargin,e2]),[e5,e6]=(0,a.useState)(!1),[e7,e8]=(0,er.Mj)(`${e}-wrap-lines`,S??!1),[e9,te]=(0,a.useState)(!1),tt=e=>{te(e),en?.(e)};(0,a.useEffect)(()=>{if(eK.shouldScrollToMatch)if(eK.matchIndices.length>0&&e0&&eK.currentMatchIndex<eK.matchIndices.length&&eK.searchQuery.trim()){let e=ey[eK.matchIndices[eK.currentMatchIndex]];if(e){let t=eQ.findIndex(t=>eI(t.original)===eI(e));-1!==t?requestAnimationFrame(()=>{e0.scrollToIndex(t,{align:"center"}),eK.clearShouldScrollToMatch()}):eK.clearShouldScrollToMatch()}else eK.clearShouldScrollToMatch()}else eK.clearShouldScrollToMatch()},[eK.shouldScrollToMatch,eK.currentMatchIndex,eK.matchIndices,eK.searchQuery,eK.clearShouldScrollToMatch,e0,eQ,ey]),(0,a.useEffect)(()=>{if(e5||!c||null==e0)return;let e=ey.findIndex(e=>eI(e)===c);-1==e&&c?ey.length<1e3&&!h&&l&&r?.({cancelRefetch:!1}):(e6(!0),null==e0.getVirtualItems().find(t=>t.index===e)&&e0.scrollToIndex(e,{align:"center"}))},[ey,c,r,e0,e5,h,l]);let tr=(0,a.useCallback)(e=>{if(null==c)return;let t=ey.findIndex(e=>eI(e)===c)+e;t<0||t>=ey.length||ev(ey[t])},[c,ev,ey]);return(0,x.vC)(["ArrowRight","ArrowDown","j"],e=>{e.preventDefault(),tr(1)}),(0,x.vC)(["ArrowLeft","ArrowUp","k"],e=>{e.preventDefault(),tr(-1)}),(0,s.jsx)(E.s,{direction:"column",h:"100%",children:(0,s.jsxs)(C.a,{pos:"relative",style:{flex:1,minHeight:0},children:[(0,s.jsx)(e_,{searchQuery:eK.inputValue,onSearchChange:eK.handleSearchChange,matchIndices:eK.matchIndices,currentMatchIndex:eK.currentMatchIndex,onPreviousMatch:eK.handlePreviousMatch,onNextMatch:eK.handleNextMatch,isVisible:eK.isSearchVisible,onVisibilityChange:eK.setIsSearchVisible,containerRef:eN}),(0,s.jsxs)("div",{"data-testid":"search-results-table",className:i()("overflow-auto h-100 fs-8",eu().tableWrapper,{[eu().muted]:"muted"===eb}),onScroll:e=>{if(eZ(e.target),null!=e.target){let{scrollTop:t}=e.target;y?.(t)}},ref:eM,children:[es&&(0,s.jsx)(eF,{opened:e9,onClose:()=>tt(!1),config:es}),(0,s.jsxs)("table",{className:i()("w-100",eu().table),id:e,children:[(0,s.jsx)("thead",{className:eu().tableHead,children:t.length>0&&eU.getHeaderGroups().map(t=>(0,s.jsx)("tr",{children:t.headers.map((r,n)=>{let a=n===t.headers.length-1;return(0,s.jsx)(eg.A,{header:r,isLast:a,lastItemButtons:(0,s.jsxs)(k.Y,{gap:8,mr:8,children:[e&&Object.keys(eC).length>0&&(0,s.jsx)(N.N,{onClick:()=>ek({}),title:"Reset Column Widths",children:(0,s.jsx)(A.m,{label:"Reset Column Widths",children:(0,s.jsx)(z.A,{size:16})})}),es&&(0,s.jsx)(N.N,{onClick:()=>tt(!0),title:"Show Generated SQL",tabIndex:0,children:(0,s.jsx)(A.m,{label:"Show Generated SQL",children:(0,s.jsx)(I.A,{size:16})})}),(0,s.jsx)(N.N,{onClick:()=>e8(e=>!e),title:`${e7?"Disable":"Enable"}  Wrap Lines`,children:(0,s.jsx)(A.m,{label:`${e7?"Disable":"Enable"} Wrap Lines`,children:e7?(0,s.jsx)(L.A,{size:16}):(0,s.jsx)(M.A,{size:16})})}),(0,s.jsx)(eE.P,{data:eV,filename:`hyperdx_search_results_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}`,className:"fs-6",children:(0,s.jsx)(A.m,{label:`Download Table as CSV (max ${eH.toLocaleString()} rows)${eB?" - data truncated":""}`,children:(0,s.jsx)(D.A,{size:16})})}),null!=v&&(0,s.jsx)(N.N,{onClick:()=>v(),title:"Settings",children:(0,s.jsx)(A.m,{label:"Settings",children:(0,s.jsx)(F.A,{size:16})})})]})},r.id)})},t.id))}),(0,s.jsxs)("tbody",{children:[e3>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:99999,style:{height:`${e3}px`}})}),e1.map(e=>{let t=eQ[e.index],r=eI(t.original),n=eq[r]??!1;return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsxs)("tr",{"data-testid":`table-row-${r}`,className:i()(eu().tableRow,{[eu().tableRow__selected]:c&&c===r}),"data-index":e.index,ref:e0.measureElement,children:[ep&&(0,s.jsx)("td",{className:"align-top overflow-hidden",style:{width:"40px"},children:(0,W.Kv)(t.getVisibleCells()[0].column.columnDef.cell,t.getVisibleCells()[0].getContext())}),(0,s.jsx)("td",{className:"align-top overflow-hidden p-0",colSpan:eJ.length-!!ep,children:(0,s.jsxs)("button",{type:"button",className:i()(eu().rowContentButton,{[eu().isWrapped]:e7,[eu().isTruncated]:!e7}),onClick:e=>{ev(t.original)},"aria-label":"View details for log entry",children:[t.getVisibleCells().slice(+!!ep).map(e=>{let t=e.column.columnDef.meta?.className,r=e.column.getSize(),n=e.getValue();return(0,s.jsx)("div",{className:i()("flex-shrink-0 overflow-hidden position-relative",t),style:{width:r===Q.k?"auto":`${r}px`,flex:r===Q.k?"1":"none"},children:(0,s.jsx)("div",{className:eu().fieldTextContainer,children:(0,s.jsx)(eh,{cellValue:n,wrapLinesEnabled:e7,tableContainerRef:eN,columnName:e.column.columnDef.meta?.column,isChart:e.column.columnDef.meta?.column==="__hdx_pattern_trend",children:(0,W.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)}),ef&&(0,s.jsx)(ex,{row:t.original,getRowWhere:ef,sourceId:el?.id,isWrapped:e7,onToggleWrap:()=>e8(!e7)})]})})]}),ep&&n&&(0,s.jsx)(eA,{columnsLength:eJ.length,virtualKey:e.key.toString(),source:el,rowId:r,measureElement:e0.measureElement,virtualIndex:e.index,children:ea?.({id:r,aliasWith:t.original[Z.ZO.ALIAS_WITH],...t.original})})]},e.key)}),(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:800,children:(0,s.jsx)("div",{className:"rounded fs-7 bg-muted text-center d-flex align-items-center justify-content-center mt-3",children:h?(0,s.jsxs)("div",{className:"my-3",children:[(0,s.jsx)("div",{className:"d-inline-block",children:(0,s.jsx)(R.A,{size:14,className:"spin-animate"})})," ",null!=U&&(0,s.jsxs)(s.Fragment,{children:["Searched ",(0,s.jsx)(ee.H,{value:U}),"."," "]}),"Loading results",J?.[0]!=null&&J?.[1]!=null?(0,s.jsxs)(s.Fragment,{children:[" ","across"," ",(0,o.A)(J?.[1],J?.[0])," ","(",(0,s.jsx)(ee.H,{value:J?.[0],format:"withYear"})," ","to"," ",(0,s.jsx)(ee.H,{value:J?.[1],format:"withYear"}),")"]}):null,"..."]}):!1==l&&!1==h&&ey.length>0?(0,s.jsx)("div",{className:"my-3",children:"End of Results"}):B?(0,s.jsxs)("div",{className:"my-3",children:[(0,s.jsx)(T.E,{ta:"center",size:"sm",children:"Error loading results, please check your query or try again."}),(0,s.jsxs)(C.a,{p:"sm",children:[(0,s.jsx)(C.a,{mt:"sm",children:(0,s.jsx)($.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:G?.message})}),G instanceof _.p1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,s.jsx)(E.s,{w:"100%",ta:"initial",align:"center",justify:"center",children:(0,s.jsx)(ew.V,{data:G?.query})})]})]})]}):!1==l&&!1==h&&0===ey.length?(0,s.jsxs)("div",{className:"my-3","data-testid":"db-row-table-no-results",children:["No results found.",(0,s.jsx)(T.E,{mt:"sm",children:"Try checking the query explainer in the search bar if there are any search syntax issues."}),J?.[0]!=null&&J?.[1]!=null?(0,s.jsxs)(T.E,{mt:"sm",children:["Searched Time Range:"," ",(0,o.A)(J?.[1],J?.[0])," ","(",(0,s.jsx)(ee.H,{value:J?.[0],format:"withYear"})," ","to"," ",(0,s.jsx)(ee.H,{value:J?.[1],format:"withYear"}),")"]}):null]}):(0,s.jsx)("div",{})})})}),e4>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:99999,style:{height:`${e4}px`}})})]})]})]}),(0,s.jsx)(eS,{searchQuery:eK.searchQuery,matchIndices:eK.matchIndices,currentMatchIndex:eK.currentMatchIndex,dedupedRows:ey,tableRows:eQ,getRowId:eI,onMatchClick:eK.handleMatchClick})]})})});function eP(e){let t,r,s=(0,n.c)(12);s[0]!==e.connection||s[1]!==e.from.databaseName||s[2]!==e.from.tableName?(t={databaseName:e.from.databaseName,tableName:e.from.tableName,connectionId:e.connection},s[0]=e.connection,s[1]=e.from.databaseName,s[2]=e.from.tableName,s[3]=t):t=s[3];let{data:a}=(0,G.Z2)(t),l=a?.primary_key,i=a?.partition_key;e:{let t,n;if(null==l||null==i){r=void 0;break e}s[4]!==e.select||s[5]!==i||s[6]!==l?(t=function(e,t,r){let s=new Set([...(0,_.bZ)(r),...(0,_.bZ)(t)]);if("string"==typeof e){let t=new Set((0,S.AB)(e)),r=[...s].filter(e=>!t.has(e));return{select:[...t,...r].join(","),additionalKeysLength:r.length}}{let t=[...s].map(e=>({valueExpression:e}));return{select:[...e,...t],additionalKeysLength:t.length}}}(e.select,l,i),s[4]=e.select,s[5]=i,s[6]=l,s[7]=t):t=s[7];let{select:a,additionalKeysLength:o}=t;s[8]!==o||s[9]!==e||s[10]!==a?(n={...e,select:a,additionalKeysLength:o},s[8]=o,s[9]=e,s[10]=a,s[11]=n):n=s[11],r=n}return r}function eW(e,t){if(null==e||null==t)return new Map;let r=e.slice(0,e.length-t);return new Map(r?.map(e=>[e.name,{...e,_type:(0,_.rj)(e.type)}]))}let eV=(0,a.memo)(function({config:e,sourceId:t,onError:r,onRowDetailsClick:n,highlightedLineId:l,enabled:i=!0,isLive:o=!1,queryKeyPrefix:c,onScroll:d,denoiseResults:u=!1,onChildModalOpen:m,onExpandedRowsChange:h,collapseAllRows:x,showExpandButton:g=!0,renderRowDetails:f,onSortingChange:b,initialSortBy:y,variant:v="default"}){var j;let{data:S}=H.Ay.useMe(),[w,E]=(0,a.useState)(y?.[0]??null),k=(0,a.useMemo)(()=>w?[w]:[],[w]),N=(0,a.useCallback)(e=>{b?.(e),E(e?.[0]??null)},[E,b]),A=(0,er.ZC)(t);(0,a.useEffect)(()=>{A&&A!==t&&N(null)},[t]);let $=(0,er.ZC)(y);(0,a.useEffect)(()=>{let e=y?.[0]??null,t=$?.[0]??null;JSON.stringify(e)!==JSON.stringify(t)&&E(e)},[y,$]);let R=(0,a.useMemo)(()=>{let t={...(0,B.Nz)(S?.team),...e};return k.length&&(t.orderBy=k.map(e=>({valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}))),t},[S,e,k]),z=eP(R),{data:I,fetchNextPage:L,hasNextPage:M,isFetching:D,isError:F,error:P}=(0,K.A)(z??e,{enabled:i&&null!=z&&("string"==typeof(j=e.select)?j.split(",").filter(e=>e.trim().length>0).length:j.length)>0,isLive:o,queryKeyPrefix:c}),W=(0,a.useMemo)(()=>eW(I?.meta,z?.additionalKeysLength),[I,z]),V=(0,a.useMemo)(()=>Array.from(W.keys()),[W]),q=(0,a.useMemo)(()=>V.filter(e=>{let t=W.get(e)?._type;return(0,_.Zo)(t)}),[V,W]),X=(0,a.useMemo)(()=>(I?.data??[]).map(e=>{let t={...e};return q.forEach(r=>{W.get(r)?._type===_.A2.JSON?t[r]=JSON.stringify(e[r]).replace(/\//g,"\\/"):t[r]=JSON.stringify(e[r])}),t}),[I,q,W]),G=(0,a.useMemo)(()=>(0,_.D7)(I?.chSql??{sql:"",params:{}}),[I]),Y=(0,Z.Ay)({meta:I?.meta,aliasMap:G}),Q=(0,a.useCallback)(e=>n?.(Y(e)),[n,Y]);(0,a.useEffect)(()=>{F&&r&&P&&r(P)},[F,r,P]);let{data:ee}=(0,U.Fo)({id:t}),et=V[V.length-1],es=(0,J.nt)({config:e,samples:1e4,bodyValueExpression:et??"",severityTextExpression:ee?.severityTextExpression??"",totalCount:void 0,enabled:u}),en=(0,O.I)({queryKey:["noisy-patterns",e],queryFn:async()=>Object.values(es.data).filter(e=>e.count/(es.sampledRowCount??1)>.1),enabled:u&&null!=es.data&&Object.values(es.data).length>0&&null!=es.miner}),ea=(0,a.useMemo)(()=>en.data?.map(e=>e.id)??[],[en.data]),el=(0,O.I)({queryKey:["denoised-rows",e,u,...u?[X]:[],ea,et],queryFn:async()=>{if(!u)return[];if(0===ea.length)return X;let e=await es.miner?.matchLogs(X.map(e=>e[et]));return X.filter((t,r)=>{let s=e?.[r];return!ea.includes(`${s}`)})},placeholderData:(t,r)=>{if(r?.queryKey?.[0]==="denoised-rows"&&r?.queryKey?.[1]===e)return t},gcTime:o?p()("30s"):p()("5m"),enabled:u&&en.isSuccess&&X.length>0&&null!=es.miner}),ei=u?D||el.isFetching||en.isFetching||es.isLoading:D,eo=I?.window?.direction==="ASC"?I?.window?.endTime:I?.window?.startTime;return(0,s.jsxs)(s.Fragment,{children:[u&&(0,s.jsxs)(C.a,{mb:"xxs",px:"sm",children:[(0,s.jsx)(T.E,{fw:"bold",fz:"xs",mb:"xxs",children:"Removed Noisy Event Patterns"}),(0,s.jsxs)(C.a,{mah:100,style:{overflow:"auto"},children:[en.data?.map(e=>(0,s.jsx)(T.E,{fz:"xs",children:e.pattern},e.id)),0===ea.length&&(0,s.jsx)(T.E,{fz:"xs",children:"No noisy patterns found"})]})]}),(0,s.jsx)(eO,{isLive:o,wrapLines:!1,displayedColumns:V,highlightedLineId:l,rows:u?el?.data??[]:X,renderRowDetails:f,isLoading:ei,fetchNextPage:L,hasNextPage:M,onRowDetailsClick:Q,onScroll:d,generateRowId:Y,isError:F,error:P??void 0,columnTypeMap:W,dateRange:e.dateRange,loadingDate:eo,config:R,onChildModalOpen:m,source:ee,onExpandedRowsChange:h,collapseAllRows:x,showExpandButton:g,enableSorting:!0,onSortingChange:N,sortOrder:k,getRowWhere:Y,variant:v})]})});function eH(){return""}function eB(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function eq(e){return e??""}},50374:(e,t,r)=>{"use strict";r.d(t,{D:()=>e0,A:()=>e3});var s,n,a=r(6029),l=r(75155),i=r(55729),o=r(86508),c=r(84450),d=r.n(c),u=r(41038),m=r(7913),h=r(66692),p=r(82641),x=r(60481),g=r(78253),f=r(10174),b=r(34834),y=r(64441),v=r(24885);function j(e){let t,r,s,n=(0,l.c)(13),{hasLogSource:a}=e,[o,c]=(0,u.ZA)("traceWhere"),[d,m]=(0,u.ZA)("logWhere"),h=!!o||!!(a&&d),[p,x]=(0,i.useState)(h);n[0]!==m||n[1]!==c?(t=e=>{c(e.traceWhere||null),m(e.logWhere||null)},n[0]=m,n[1]=c,n[2]=t):t=n[2];let g=t;n[3]!==m||n[4]!==c?(r=()=>{c(null),m(null)},n[3]=m,n[4]=c,n[5]=r):r=n[5];let f=r;return n[6]!==f||n[7]!==h||n[8]!==p||n[9]!==d||n[10]!==g||n[11]!==o?(s={traceWhere:o,logWhere:d,isFilterActive:h,isFilterExpanded:p,setIsFilterExpanded:x,onSubmit:g,clear:f},n[6]=f,n[7]=h,n[8]=p,n[9]=d,n[10]=g,n[11]=o,n[12]=s):s=n[12],s}var _=r(78694),S=r(81973),w=r(96958),E=r(18006),C=r(26674),k=r(3635),N=r(43517),A=r(43085),T=r(98287);function $(e){let t,r,s,n,i=(0,l.c)(9),{traceId:o,dateRange:c,traceTableSourceId:d}=e;i[0]!==d?(t={id:d},i[0]=d,i[1]=t):t=i[1];let{data:u}=(0,S.Fo)(t);return i[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsxs)(k.Y,{gap:0,children:[(0,a.jsx)(N.E,{size:"sm",ps:"sm",children:"Service Map"}),(0,a.jsx)(A.E,{size:"xs",ms:"xs",color:"gray",autoContrast:!0,radius:"sm",children:"Beta"})]}),i[2]=r):r=i[2],i[3]!==c||i[4]!==o||i[5]!==u?(s=u?(0,a.jsx)(T.A,{traceTableSource:u,traceId:o,dateRange:c,isSingleTrace:!0}):null,i[3]=c,i[4]=o,i[5]=u,i[6]=s):s=i[6],i[7]!==s?(n=(0,a.jsxs)(b.B,{w:"100%",children:[r,s]}),i[7]=s,i[8]=n):n=i[8],n}var R=r(76539),z=r(43465),I=r(66631),L=r(76089),M=r(90124),D=r(62801),F=r(44595),O=r(53993),P=r(43152),W=r(40228),V=r(28450);let H=e=>{let t,r,s,n,c,d,u,m,h,p,x,g,f,b,y,v,j,_,S,w,E,C,N,A,T,$=(0,l.c)(73),{fieldPrefix:R,metricSource:O,timestamp:V,title:H,where:B}=e,[q,X]=(0,i.useState)("30m"),[G,K]=(0,i.useState)("sm");if($[0]!==q||$[1]!==V){let e={"30m":{minutes:15},"1h":{minutes:30},"1d":{hours:12}}[q];t=(0,z.A)(new Date(V),e),r=(0,I.A)([(0,o.A)(new Date(V),e),new Date]),$[0]=q,$[1]=V,$[2]=t,$[3]=r}else t=$[2],r=$[3];$[4]!==t||$[5]!==r?(s=[t,r],$[4]=t,$[5]=r,$[6]=s):s=$[6];let J=s;e:{switch(G){case"sm":{let e;$[7]===Symbol.for("react.memo_cache_sentinel")?(e={cols:3,height:200},$[7]=e):e=$[7],n=e;break e}case"md":{let e;$[8]===Symbol.for("react.memo_cache_sentinel")?(e={cols:2,height:250},$[8]=e):e=$[8],n=e;break e}case"lg":{let e;$[9]===Symbol.for("react.memo_cache_sentinel")?(e={cols:1,height:320},$[9]=e):e=$[9],n=e;break e}}n=void 0}let{cols:Z,height:Y}=n;$[10]!==J?(c=(0,L.tA)(J),$[10]=J,$[11]=c):c=$[11];let U=c,Q=`infra-subpanel-${R}`;$[12]!==H?(d=(0,a.jsx)("h4",{className:"fs-6 m-0",children:H}),$[12]=H,$[13]=d):d=$[13],$[14]===Symbol.for("react.memo_cache_sentinel")?(u=[{label:"30m",value:"30m"},{label:"1h",value:"1h"},{label:"1d",value:"1d"}],$[14]=u):u=$[14],$[15]===Symbol.for("react.memo_cache_sentinel")?(m=e=>X(e),$[15]=m):m=$[15],$[16]!==q?(h=(0,a.jsx)(M.I,{size:"xs",data:u,value:q,onChange:m}),$[16]=q,$[17]=h):h=$[17],$[18]!==h||$[19]!==d?(p=(0,a.jsxs)(k.Y,{align:"center",children:[d,h]}),$[18]=h,$[19]=d,$[20]=p):p=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(x=[{label:"SM",value:"sm"},{label:"MD",value:"md"},{label:"LG",value:"lg"}],$[21]=x):x=$[21],$[22]===Symbol.for("react.memo_cache_sentinel")?(g=e=>K(e),$[22]=g):g=$[22],$[23]!==G?(f=(0,a.jsx)(k.Y,{align:"center",children:(0,a.jsx)(M.I,{size:"xs",data:x,value:G,onChange:g})}),$[23]=G,$[24]=f):f=$[24],$[25]!==p||$[26]!==f?(b=(0,a.jsxs)(k.Y,{justify:"space-between",align:"center",children:[p,f]}),$[25]=p,$[26]=f,$[27]=b):b=$[27],$[28]!==J||$[29]!==R||$[30]!==U||$[31]!==O||$[32]!==B?(y=(0,P.ik)({dateRange:J,granularity:U,seriesReturnType:"column",series:[{type:"time",where:B,groupBy:[],aggFn:"avg",field:`${R}cpu.utilization - Gauge`,table:"metrics",numberFormat:P.p2}]},{metric:O}),$[28]=J,$[29]=R,$[30]=U,$[31]=O,$[32]=B,$[33]=y):y=$[33];let ee=V/1e3;$[34]!==y||$[35]!==ee?(v=(0,a.jsx)(W.S,{title:"CPU Usage (%)",config:y,showDisplaySwitcher:!1,logReferenceTimestamp:ee}),$[34]=y,$[35]=ee,$[36]=v):v=$[36],$[37]!==Y||$[38]!==v?(j=(0,a.jsx)(D.Z,{"data-testid":"cpu-usage-card",children:(0,a.jsx)(D.Z.Section,{py:8,px:8,h:Y,children:v})}),$[37]=Y,$[38]=v,$[39]=j):j=$[39],$[40]!==J||$[41]!==R||$[42]!==U||$[43]!==O||$[44]!==B?(_=(0,P.ik)({dateRange:J,granularity:U,seriesReturnType:"column",series:[{type:"time",where:B,groupBy:[],aggFn:"avg",field:`${R}memory.usage - Gauge`,table:"metrics",numberFormat:P.JD}]},{metric:O}),$[40]=J,$[41]=R,$[42]=U,$[43]=O,$[44]=B,$[45]=_):_=$[45];let et=V/1e3;$[46]!==_||$[47]!==et?(S=(0,a.jsx)(W.S,{title:"Memory Used",config:_,showDisplaySwitcher:!1,logReferenceTimestamp:et}),$[46]=_,$[47]=et,$[48]=S):S=$[48],$[49]!==Y||$[50]!==S?(w=(0,a.jsx)(D.Z,{"data-testid":"memory-usage-card",children:(0,a.jsx)(D.Z.Section,{py:8,px:8,h:Y,children:S})}),$[49]=Y,$[50]=S,$[51]=w):w=$[51],$[52]!==J||$[53]!==R||$[54]!==U||$[55]!==O||$[56]!==B?(E=(0,P.ik)({dateRange:J,granularity:U,seriesReturnType:"column",series:[{type:"time",where:B,groupBy:[],aggFn:"avg",field:`${R}filesystem.available - Gauge`,table:"metrics",numberFormat:P.nH}]},{metric:O}),$[52]=J,$[53]=R,$[54]=U,$[55]=O,$[56]=B,$[57]=E):E=$[57];let er=V/1e3;return $[58]!==E||$[59]!==er?(C=(0,a.jsx)(W.S,{title:"Disk Available",config:E,showDisplaySwitcher:!1,logReferenceTimestamp:er}),$[58]=E,$[59]=er,$[60]=C):C=$[60],$[61]!==Y||$[62]!==C?(N=(0,a.jsx)(D.Z,{"data-testid":"disk-usage-card",children:(0,a.jsx)(D.Z.Section,{py:8,px:8,h:Y,children:C})}),$[61]=Y,$[62]=C,$[63]=N):N=$[63],$[64]!==Z||$[65]!==j||$[66]!==w||$[67]!==N?(A=(0,a.jsxs)(F.r,{mt:"md",cols:Z,children:[j,w,N]}),$[64]=Z,$[65]=j,$[66]=w,$[67]=N,$[68]=A):A=$[68],$[69]!==b||$[70]!==A||$[71]!==Q?(T=(0,a.jsxs)("div",{"data-testid":Q,children:[b,A]}),$[69]=b,$[70]=A,$[71]=Q,$[72]=T):T=$[72],T},B=({rowData:e,rowId:t,source:r})=>{let{data:s}=(0,S.Fo)({id:r.metricSourceId}),n=e?.__hdx_resource_attributes["k8s.pod.uid"],l=e?.__hdx_resource_attributes["k8s.node.name"],i=new Date(e?.__hdx_timestamp).getTime();return(0,a.jsxs)(b.B,{my:"md",gap:40,children:[n&&(0,a.jsxs)("div",{children:[s&&(0,a.jsx)(H,{title:"Pod",where:`${s.resourceAttributesExpression}.k8s.pod.uid:"${n}"`,fieldPrefix:"k8s.pod.",timestamp:i,metricSource:s}),r&&(0,a.jsxs)(D.Z,{p:"md",mt:"xl",children:[(0,a.jsx)(D.Z.Section,{p:"md",py:"xs",children:"Pod Timeline"}),(0,a.jsx)(D.Z.Section,{children:(0,a.jsx)(O.F,{viewportProps:{style:{maxHeight:280}},children:(0,a.jsx)(x.a,{p:"md",py:"sm",children:(0,a.jsx)(V.FB,{logSource:r,q:`\`k8s.pod.uid\`:"${n}"`,dateRange:[(0,z.A)(new Date(i),{days:1}),(0,o.A)(new Date(i),{days:1})],anchorEvent:{label:(0,a.jsx)("div",{className:"text-brand",children:"This Event"}),timestamp:new Date(i).toISOString()}})})})})]})]}),l&&s&&(0,a.jsx)(H,{metricSource:s,title:"Node",where:`${s.resourceAttributesExpression}.k8s.node.name:"${l}"`,fieldPrefix:"k8s.node.",timestamp:i})]})};var q=r(37901),X=r(26837),G=r(82203),K=r.n(G),J=r(94720),Z=r(40147),Y=r(57030),U=r(71434),Q=r.n(U),ee=r(1909),et=r(14262),er=r.n(et),es=r(3145),en=r(53061),ea=r(47268),el=r(23935),ei=r(24589),eo=r(92789),ec=r(70114),ed=r(23474),eu=r(54134),em=r(225),eh=r(78744),ep=r(70727),ex=r(43370),eg=r(75828),ef=r.n(eg),eb=r(63085),ey=r(21440),ev=r(7565),ej=r(92917),e_=r(83101),eS=r.n(e_),ew=r(20699),eE=r.n(ew);let eC=(0,i.memo)(function(e){let t,r,s,n,i,o,c,d,u,m,h,p,x,g,f=(0,l.c)(30),{marker:b,eventStart:y,eventEnd:v,height:j}=e,_=(0,ev.a)(),S=v-y,w=b.timestamp-y,E=S>0?w/S*100:0;f[0]!==b.attributes?(t=Object.entries(b.attributes),f[0]=b.attributes,f[1]=t):t=f[1];let C=t;f[2]!==_||f[3]!==b.timestamp?(r=_(new Date(b.timestamp),{format:"withMs"}),f[2]=_,f[3]=b.timestamp,f[4]=r):r=f[4],f[5]!==r?(s=(0,a.jsx)(N.E,{size:"xxs",c:"dimmed",mb:"xxs",children:r}),f[5]=r,f[6]=s):s=f[6],f[7]!==b.name?(n=(0,a.jsx)(N.E,{size:"xs",children:b.name}),f[7]=b.name,f[8]=n):n=f[8],f[9]!==C?(i=C.length>0&&(0,a.jsxs)("div",{style:{fontSize:10,marginTop:4},children:[C.slice(0,5).map(ez),C.length>5&&(0,a.jsxs)("div",{style:{fontStyle:"italic"},children:["...and ",C.length-5," more"]})]}),f[9]=C,f[10]=i):i=f[10],f[11]!==s||f[12]!==n||f[13]!==i?(o=(0,a.jsxs)("div",{children:[s,n,i]}),f[11]=s,f[12]=n,f[13]=i,f[14]=o):o=f[14];let k=o;f[15]===Symbol.for("react.memo_cache_sentinel")?(c={transition:"fade"},d={fontSize:11,maxWidth:350,wordBreak:"break-word"},f[15]=c,f[16]=d):(c=f[15],d=f[16]),f[17]!==E?(u=E.toFixed(6),f[17]=E,f[18]=u):u=f[18];let A=`${u}%`;return f[19]!==A?(m={position:"absolute",left:A,top:"50%",transform:"translate(-50%, -50%)",width:8,height:8,cursor:"pointer",zIndex:10,pointerEvents:"auto"},f[19]=A,f[20]=m):m=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsx)("div",{style:{width:8,height:8,backgroundColor:"var(--color-bg-success)",transform:"rotate(45deg)",border:"1px solid #333",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}}),f[21]=h):h=f[21],f[22]!==j?(p=(0,a.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:1,height:j,backgroundColor:"var(--color-bg-success)",opacity:.4,zIndex:-1}}),f[22]=j,f[23]=p):p=f[23],f[24]!==m||f[25]!==p?(x=(0,a.jsxs)("div",{style:m,onMouseEnter:eI,onClick:eL,children:[h,p]}),f[24]=m,f[25]=p,f[26]=x):x=f[26],f[27]!==x||f[28]!==k?(g=(0,a.jsx)(eb.m,{label:k,color:"var(--color-bg-surface)",withArrow:!0,multiline:!0,transitionProps:c,style:d,children:x}),f[27]=x,f[28]=k,f[29]=g):g=f[29],g}),ek=(0,i.memo)(function(e){let t,r,s,n,i,o,c=(0,l.c)(25),{events:d,maxVal:u,height:m,eventStyles:h,onEventHover:p,scale:x,offset:g}=e,f=p??eM;c[0]!==m?(t={width:0,flexGrow:1,height:m,position:"relative"},c[0]=m,c[1]=t):t=c[1];let b=-1*g*x;c[2]!==b?(r=b.toFixed(6),c[2]=b,c[3]=r):r=c[3];let y=`${r}%`;if(c[4]!==y?(s=(0,a.jsx)("div",{style:{marginRight:y}}),c[4]=y,c[5]=s):s=c[5],c[6]!==d?(n=d??[],c[6]=d,c[7]=n):n=c[7],c[8]!==h||c[9]!==m||c[10]!==u||c[11]!==f||c[12]!==x||c[13]!==n){let e;c[15]!==h||c[16]!==m||c[17]!==u||c[18]!==f||c[19]!==x?(e=(e,t,r)=>{let s=(e.minWidthPerc??0)/100,n=r[t-1],l=n?.start!=null?n?.start+u*s:0,i=Math.max(n?.end??0,l),o=x*Math.max((e.end-e.start)/u,s)*100,c=x*((e.start-i)/u*100);return(0,a.jsx)(eb.m,{label:e.tooltip,color:"gray",withArrow:!0,multiline:!0,transitionProps:{transition:"fade-right"},style:{fontSize:11,maxWidth:300,wordBreak:"break-word"},children:(0,a.jsxs)("div",{onMouseEnter:()=>f(e.id),className:"d-flex align-items-center h-100 cursor-pointer text-truncate hover-opacity",style:{userSelect:"none",backgroundColor:e.color,minWidth:`${o.toFixed(6)}%`,width:`${o.toFixed(6)}%`,marginLeft:`${c.toFixed(6)}%`,position:"relative",..."function"==typeof h?h(e):h},children:[(0,a.jsx)("div",{style:{margin:"auto"},className:"px-2",children:e.body}),e.markers?.map((t,r)=>(0,a.jsx)(eC,{marker:t,eventStart:e.start,eventEnd:e.end,height:m},`${e.id}-marker-${r}`))]})},e.id)},c[15]=h,c[16]=m,c[17]=u,c[18]=f,c[19]=x,c[20]=e):e=c[20],i=n.map(e),c[8]=h,c[9]=m,c[10]=u,c[11]=f,c[12]=x,c[13]=n,c[14]=i}else i=c[14];return c[21]!==t||c[22]!==s||c[23]!==i?(o=(0,a.jsxs)("div",{className:"d-flex overflow-hidden",style:t,children:[s,i]}),c[21]=t,c[22]=s,c[23]=i,c[24]=o):o=c[24],o});function eN(e){return e<1e3?`${Math.round(e)}ms`:e%1e3==0?`${Math.floor(e/1e3)}s`:`${(e/1e3).toFixed(3)}s`}function eA(e){let t,r,s,n,i,o,c,d,u,m,h,p=(0,l.c)(19),{maxVal:x,labelWidth:g,height:f,scale:b,offset:y}=e,v=(h=m=Math.pow(10,Math.floor(Math.log10(u=x/b/10))),u>=2*m&&(h=2*m),u>=5*m&&(h=5*m),h),j=Math.floor(x/v),_=v/x*100*b;if(p[0]!==f||p[1]!==v||p[2]!==j||p[3]!==_){t=[];for(let e=0;e<j;e++)t.push((0,a.jsx)("div",{style:{height:f,width:1,marginRight:-1,marginLeft:0===e?0:`${_.toFixed(6)}%`,background:"var(--color-border-muted)"},children:(0,a.jsx)("div",{className:"ms-2 fs-8.5",children:eN(e*v)})},e));p[0]=f,p[1]=v,p[2]=j,p[3]=_,p[4]=t}else t=p[4];p[5]===Symbol.for("react.memo_cache_sentinel")?(r={position:"sticky",top:0,height:24,paddingTop:4,zIndex:200,pointerEvents:"none",background:"var(--color-bg-body)"},s=ef()("d-flex align-items-center"),p[5]=r,p[6]=s):(r=p[5],s=p[6]),p[7]!==g?(n=(0,a.jsx)("div",{style:{width:g,minWidth:g}}),p[7]=g,p[8]=n):n=p[8];let S=-1*y*b;p[9]!==S?(i=S.toFixed(6),p[9]=S,p[10]=i):i=p[10];let w=`${i}%`;return p[11]!==w?(o=(0,a.jsx)("div",{style:{marginRight:w}}),p[11]=w,p[12]=o):o=p[12],p[13]!==o||p[14]!==t?(c=(0,a.jsxs)("div",{className:"d-flex w-100 overflow-hidden",children:[o,t]}),p[13]=o,p[14]=t,p[15]=c):c=p[15],p[16]!==n||p[17]!==c?(d=(0,a.jsx)("div",{style:r,children:(0,a.jsxs)("div",{className:`${s}`,children:[n,c]})}),p[16]=n,p[17]=c,p[18]=d):d=p[18],d}function eT(e){let t,r,s,n,i,o,c,d,u,m=(0,l.c)(24),{xPerc:h,overlay:p,labelWidth:x,color:g,height:f}=e,b=Math.min(Math.max(100*h,-1),100);m[0]!==b?(t=b.toFixed(6),m[0]=b,m[1]=t):t=m[1];let y=`${t}%`,v=h<=0?"none":"block";return m[2]!==v?(r={position:"sticky",top:0,height:0,zIndex:250,pointerEvents:"none",display:v},m[2]=v,m[3]=r):r=m[3],m[4]!==x?(s=(0,a.jsx)("div",{style:{width:x,minWidth:x}}),m[4]=x,m[5]=s):s=m[5],m[6]!==y?(n={marginLeft:y},m[6]=y,m[7]=n):n=m[7],m[8]!==p||m[9]!==h?(i=null!=p&&(0,a.jsx)("div",{style:{height:0,marginLeft:h<.5?12:-150,top:12,position:"relative"},children:(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"p-2 rounded border",style:{background:"var(--color-bg-surface)"},children:p})})}),m[8]=p,m[9]=h,m[10]=i):i=m[10],m[11]!==g||m[12]!==f?(o=(0,a.jsx)("div",{style:{height:f,width:1,background:g}}),m[11]=g,m[12]=f,m[13]=o):o=m[13],m[14]!==n||m[15]!==i||m[16]!==o?(c=(0,a.jsx)("div",{className:"w-100 overflow-hidden",children:(0,a.jsxs)("div",{style:n,children:[i,o]})}),m[14]=n,m[15]=i,m[16]=o,m[17]=c):c=m[17],m[18]!==s||m[19]!==c?(d=(0,a.jsxs)("div",{className:"d-flex",children:[s,c]}),m[18]=s,m[19]=c,m[20]=d):d=m[20],m[21]!==d||m[22]!==r?(u=(0,a.jsx)("div",{style:r,children:d}),m[21]=d,m[22]=r,m[23]=u):u=m[23],u}function e$(e){let t,r,s,n=(0,l.c)(11),{containerRef:o,maxVal:c,labelWidth:d,height:u,scale:m,offset:h,xPerc:p,setXPerc:x}=e,[g,f]=(0,i.useState)(!1);n[0]!==o||n[1]!==d||n[2]!==x?(t=()=>{let e=t=>{if(null!=o.current){let r=o.current,s=r.getBoundingClientRect(),n=(t.clientX-s.left-d)/(r.clientWidth-d);null!=e&&x(n)}},t=()=>f(!0),r=()=>f(!1),s=o.current;return s?.addEventListener("mousemove",e),s?.addEventListener("mouseleave",r),s?.addEventListener("mouseenter",t),()=>{s?.removeEventListener("mousemove",e),s?.removeEventListener("mouseleave",r),s?.removeEventListener("mouseenter",t)}},r=[o,d,x],n[0]=o,n[1]=d,n[2]=x,n[3]=t,n[4]=r):(t=n[3],r=n[4]),(0,i.useEffect)(t,r);let b=(h/100+Math.max(p,0)/m)*c;return n[5]!==b||n[6]!==u||n[7]!==d||n[8]!==g||n[9]!==p?(s=g?(0,a.jsx)(eT,{xPerc:Math.max(p,0),overlay:eN(Math.max(b,0)),height:u,labelWidth:d,color:"var(--color-bg-neutral)"}):null,n[5]=b,n[6]=u,n[7]=d,n[8]=g,n[9]=p,n[10]=s):s=n[10],s}function eR({rows:e,cursors:t,rowHeight:r,onMouseMove:s,onEventClick:n,labelWidth:l,className:o,style:c,onClick:d,scale:u=1,setScale:m=()=>{},initialScrollRowIndex:h,scaleWithScroll:p=!1}){let[x,g]=(0,i.useState)(0),f=(0,ej.ZC)(u),b=l/window.innerWidth*100,{size:y,startResize:j}=(0,v.A)(b,"left"),_=y/100*window.innerWidth,S=(0,i.useRef)(null),w=(e,t)=>{if(null!=S.current&&null!=t){let r=S.current,s=r.getBoundingClientRect(),n=e.clientX-s.left;e.clientY,s.top,t(Math.max((x/100+(n-_)/(r.clientWidth-_)/u)*A))}},E=(0,i.useMemo)(()=>({onDrag:e=>{g(t=>Math.min(Math.max(t-e.movementX*(.125/u),0),100-100/u))}}),[u,g]);(0,ej.i3)(S,E);let[C,k]=(0,i.useState)(0),N=e=>{p&&(e.preventDefault(),m(t=>Math.max(t-.001*e.deltaY,1)))};(0,i.useEffect)(()=>{null!=f&&f!=u&&g(e=>{let t=Math.max(Math.min(C,1),0);return Math.min(Math.max(e+100*t/f-100*t/u,0),100-100/u)})},[u,f,C]),(0,i.useEffect)(()=>{let e=S.current;if(null!=e)return e.addEventListener("wheel",N,{passive:!1}),()=>{e.removeEventListener("wheel",N)}});let A=(0,i.useMemo)(()=>{let t=0;for(let r of e??[])for(let e of r.events)t=Math.max(t,e.end);return 1.1*t},[e]),T=(0,ey.Te)({count:e?.length??0,getScrollElement:()=>S.current,estimateSize:()=>r,overscan:5}),$=T.getVirtualItems(),[R,z]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{null!=h&&!R&&h>=0&&(z(!0),T.scrollToIndex(h,{align:"center"}))},[h,R,T]),(0,a.jsxs)("div",{style:{position:"relative",...c},className:o,ref:S,onClick:e=>{w(e,d)},onMouseMove:e=>{w(e,s)},children:[(t??[]).map(e=>{let t=(e.start/A-x/100)*u;return(0,a.jsx)(eT,{xPerc:t,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,color:e.color},e.id)}),(0,a.jsx)(e$,{containerRef:S,maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,scale:u,offset:x,xPerc:C,setXPerc:k}),(0,a.jsx)(eA,{maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,scale:u,offset:x}),(0,a.jsx)("div",{style:{height:`${T.getTotalSize()+32}px`,width:"100%",position:"relative"},children:(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${$?.[0]?.start??0}px)`},children:T.getVirtualItems().map(t=>{let s=e?.[t.index];return(0,a.jsxs)("div",{onClick:()=>n?.(s),"data-index":t.index,ref:T.measureElement,className:`${ef()("d-flex align-items-center overflow-hidden",s.className,eE().timelineRow,s.isActive&&eE().timelineRowActive)}`,style:{...s.style},children:[(0,a.jsxs)("div",{className:eE().labelContainer,style:{width:_,minWidth:_},children:[s.label,(0,a.jsx)("div",{className:eS().resizeHandle,onMouseDown:j,style:{backgroundColor:"var(--color-bg-neutral)"}})]}),(0,a.jsx)(ek,{events:s.events,height:r,maxVal:A,eventStyles:e=>({borderRadius:2,fontSize:.5*r,backgroundColor:e.isError?"var(--color-bg-danger)":"var(--color-bg-inverted)",color:"var(--color-text-inverted)"}),scale:u,offset:x})]},t.index)})})})]})}function ez(e){let[t,r]=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{style:{color:"var(--color-text-primary)"},children:[t,":"]})," ",String(r).length>50?String(r).substring(0,50)+"...":String(r)]},t)}function eI(e){return e.stopPropagation()}function eL(e){return e.stopPropagation()}function eM(){}var eD=r(59017),eF=r(66773),eO=r.n(eF);function eP(e){let t,r,s=(0,l.c)(6),{config:n,dateRangeStartInclusive:a,dateRange:i,enabled:o}=e;s[0]!==n||s[1]!==i||s[2]!==a?(t={...n,dateRange:i,dateRangeStartInclusive:a},s[0]=n,s[1]=i,s[2]=a,s[3]=t):t=s[3];let c=t;return s[4]!==o?(r={enabled:o},s[4]=o,s[5]=r):r=s[5],(0,eh.A)(c,r)}function eW(e){let t,r,s,n,a,i,o,c,d=(0,l.c)(32),{tableSource:u,focusDate:m,dateRange:h,traceId:x,enabled:g,hiddenRowExpression:f}=e;d[0]!==f||d[1]!==u||d[2]!==x?(t=function(e,t,r){let s={Body:e?.kind===p.GL.Trace?(0,S.pM)(e)??"":e?.kind===p.GL.Log?(0,S.N8)(e)??"":"",Timestamp:(0,S.xg)(e),Duration:e.durationExpression?(0,S.kg)(e):"",TraceId:e.traceIdExpression??"",SpanId:e.spanIdExpression??"",ParentSpanId:e.parentSpanIdExpression??"",StatusCode:e.statusCodeExpression??"",ServiceName:e.serviceNameExpression??"",SeverityText:e.severityTextExpression??"",SpanAttributes:e.eventAttributesExpression??"",SpanEvents:e.spanEventsValueExpression??""};if(e.highlightedTraceAttributeExpressions)for(let t of e.highlightedTraceAttributeExpressions)t.alias&&(s[t.alias]=t.sqlExpression);let n=[{valueExpression:s.Body,alias:"Body"},{valueExpression:s.Timestamp,alias:"Timestamp"},{valueExpression:s.SpanId,alias:"SpanId"},...s.ServiceName?[{valueExpression:s.ServiceName,alias:"ServiceName"}]:[],...r?[{valueExpression:r,valueExpressionLanguage:"lucene",alias:"__hdx_hidden"}]:[]];return(e.kind===p.GL.Trace||e.kind===p.GL.Log)&&n.push(...(0,E.z4)(e.highlightedTraceAttributeExpressions)),r&&(s.__hdx_hidden=r),e.kind===p.GL.Trace?n.push({valueExpression:s.Duration,alias:"Duration"},{valueExpression:s.ParentSpanId,alias:"ParentSpanId"},...s.StatusCode?[{valueExpression:s.StatusCode,alias:"StatusCode"}]:[],...s.SpanAttributes?[{valueExpression:s.SpanAttributes,alias:"SpanAttributes"}]:[],...s.SpanEvents?[{valueExpression:s.SpanEvents,alias:"SpanEvents"}]:[]):e.kind===p.GL.Log&&n.push(...s.SeverityText?[{valueExpression:s.SeverityText,alias:"SeverityText"}]:[]),{config:{select:n,from:e.from,timestampValueExpression:e.timestampValueExpression,where:`${s.TraceId} = '${t}'`,limit:{limit:5e4},connection:e.connection},alias:s,type:e.kind}}(u,x,f),d[0]=f,d[1]=u,d[2]=x,d[3]=t):t=d[3];let{config:b,alias:y,type:v}=t;d[4]!==h[0]||d[5]!==m?(r=[h[0],m],d[4]=h[0],d[5]=m,d[6]=r):r=d[6],d[7]!==b||d[8]!==g||d[9]!==r?(s={config:b,dateRangeStartInclusive:!0,dateRange:r,enabled:g},d[7]=b,d[8]=g,d[9]=r,d[10]=s):s=d[10];let{data:j,isFetching:_,error:w}=eP(s);d[11]!==h[1]||d[12]!==m?(n=[m,h[1]],d[11]=h[1],d[12]=m,d[13]=n):n=d[13],d[14]!==b||d[15]!==g||d[16]!==n?(a={config:b,dateRangeStartInclusive:!1,dateRange:n,enabled:g},d[14]=b,d[15]=g,d[16]=n,d[17]=a):a=d[17];let{data:C,isFetching:k,error:N}=eP(a),A=_||k,T=j?.meta??C?.meta,$=w||N;d[18]!==y||d[19]!==T?(i={meta:T,aliasMap:y},d[18]=y,d[19]=T,d[20]=i):i=d[20];let R=(0,ep.Ay)(i);e:{let e;if(!T||0===T.length){let e;d[21]===Symbol.for("react.memo_cache_sentinel")?(e=[],d[21]=e):e=d[21],o=e;break e}d[22]!==C?.data||d[23]!==j?.data||d[24]!==R||d[25]!==v?(e=[...j?.data??[],...C?.data??[]].map(e=>{let t=R((0,U.omit)(e,["SpanAttributes","SpanEvents","__hdx_hidden"]));return{...e,SpanId:e?.SpanId,__hdx_hidden:e?.__hdx_hidden,type:v,id:t.where,aliasWith:[]}}),d[22]=C?.data,d[23]=j?.data,d[24]=R,d[25]=v,d[26]=e):e=d[26],o=e}let z=o;return d[27]!==$||d[28]!==A||d[29]!==T||d[30]!==z?(c={rows:z,meta:T,isFetching:A,error:$},d[27]=$,d[28]=A,d[29]=T,d[30]=z,d[31]=c):c=d[31],c}function eV({traceTableSource:e,logTableSource:t,traceId:r,dateRange:s,focusDate:n,onClick:l,highlightedRowWhere:o,initialRowHighlightHint:c}){let{size:d,startResize:u}=(0,v.A)(30,"bottom"),m=(0,ev.a)(),{traceWhere:h,logWhere:g,clear:f,isFilterActive:b,isFilterExpanded:y,setIsFilterExpanded:_,onSubmit:S}=j({hasLogSource:!!t}),{control:w,handleSubmit:C,setValue:A}=(0,ee.mN)({defaultValues:{traceWhere:h??"",logWhere:g??""}}),T=(0,i.useCallback)(()=>{A("traceWhere",""),A("logWhere",""),f()},[f,A]),{rows:$,isFetching:R,meta:z,error:I}=eW({tableSource:e,focusDate:n,dateRange:s,traceId:r,hiddenRowExpression:h?`NOT (${h})`:void 0,enabled:!0}),{rows:L,isFetching:M,meta:D,error:F}=eW({tableSource:t||e,focusDate:n,dateRange:t?s:[s[1],s[0]],traceId:r,hiddenRowExpression:g?`NOT (${g})`:void 0,enabled:!!t}),O=R||M,P=I||F,W=(0,i.useMemo)(()=>[...$,...L],[$,L]);W.sort((e,t)=>{let r=er().fromString(e.Timestamp),s=er().fromString(t.Timestamp),n=r.getTimeT()-s.getTimeT();return 0===n?r.getNano()-s.getNano():n});let V=(0,i.useMemo)(()=>{let r=$?.filter(e=>!e.__hdx_hidden),s=(0,E.N4)(e,e.highlightedTraceAttributeExpressions,r,z);if(t&&L&&D){let e=L?.filter(e=>!e.__hdx_hidden);s.push(...(0,E.N4)(t,t.highlightedTraceAttributeExpressions,e,D))}return s.sort((e,t)=>e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value))},[e,$,z,t,L,D]);(0,i.useEffect)(()=>{if(c&&l&&null==o){let e=W.findIndex(e=>e.Timestamp===c.timestamp&&e.SpanId===c.spanId&&e.Body===c.body);-1!==e&&l?.({id:W[e].id,type:W[e].type??"",aliasWith:W[e].aliasWith})}},[c,W,l,o]);let H=(0,i.useMemo)(()=>new Set($?.filter(e=>Q().isString(e.SpanId)&&e.SpanId.length>0).map(e=>e.SpanId)??[]),[$]),B=[],q=new Map,X=new Map;for(let e of W??[]){let{type:t,SpanId:r,ParentSpanId:s}=e;if(!r)continue;let n=t===p.GL.Log?`${r}-log`:r,a=t===p.GL.Log?r:s||"",l={...e,children:[]};if(t===p.GL.Trace){if(!X.has(n)){X.set(n,e.id);let t=`placeholder-${n}`,r=q.get(t);r&&(l.children=r.children||[],q.delete(t))}q.set(e.id,l)}if(t!==p.GL.Trace||a&&H.has(a)){let e=X.get(a),t=e?q.get(e):void 0;if(!t){let e=`placeholder-${a}`;(t=q.get(e))||(t={children:[]},q.set(e,t))}t.children.push(l)}else B.push(l)}let[G,K]=(0,i.useState)(new Set),[J,Z]=(0,i.useState)(!0),Y=(0,i.useCallback)(e=>{K(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[K]),U=(e,t,r=0)=>{e.__hdx_hidden||t.push({level:r,...e}),G.has(e.id)||e?.children?.forEach(e=>U(e,t,r+1))},et=[];B.length>0&&B.forEach(e=>U(e,et));let eh=et.length,ep=et.filter(e=>"Error"===e.StatusCode||e.SeverityText?.toLowerCase()==="error").length,eg=`${eh} span${1!==eh?"s":""}`,ef=`${ep} error${1!==ep?"s":""}`,eb=W?.reduce((e,t)=>Math.min(e,new Date(t.Timestamp).getTime()),Number.MAX_SAFE_INTEGER)??0,ey=eb===Number.MAX_SAFE_INTEGER?0:eb,e_=et.map((e,t)=>{let r=1e3*(e.Duration||0),s=new Date(e.Timestamp).getTime(),n=s-ey,i=n+r,{Body:c,ServiceName:d,id:u,type:h,aliasWith:x}=e,g=`${c}`;try{g="string"==typeof c?c:JSON.stringify(c)}catch(e){console.warn("DBTraceWaterfallChart: Couldn't JSON stringify Body",e)}let f=e.SpanAttributes||{},y=f["http.url"]||f["http.method"],v=f["http.url"],j=y&&v?`${g} ${v}`:g,_=J&&e.SpanEvents?e.SpanEvents.map(e=>({timestamp:new Date(e.Timestamp).getTime()-ey,name:e.Name,attributes:e.Attributes||{}})):[],S="Error"==e.StatusCode||"error"===e.SeverityText,w=e.StatusCode||e.SeverityText,E="warn"===e.SeverityText,C=o===u;return{id:u,type:h,aliasWith:x,label:(0,a.jsx)("div",{className:`${function(e){let{isError:t,isWarn:r}=e;return t?"text-danger":r?"text-warning":""}({isError:S,isWarn:E})} ${C&&eO().traceTimelineLabelHighlighted} text-truncate cursor-pointer ps-2 ${eO().traceTimelineLabel}`,role:"button",onClick:()=>{l?.({id:u,type:h??"",aliasWith:x})},children:(0,a.jsxs)("div",{className:"d-flex align-items-center",style:{height:24},children:[Array.from({length:e.level}).map((e,t)=>(0,a.jsx)("div",{style:{borderLeft:"1px solid var(--color-border)",marginLeft:7,width:8,minWidth:8,maxWidth:8,flexGrow:1,flexShrink:0,height:"100%"}},t)),(0,a.jsxs)(en.o,{style:{opacity:+(e.children.length>0)},onClick:()=>{Y(u)},children:[G.has(u)?(0,a.jsx)(ec.A,{size:16,className:"me-1 text-muted-hover"}):(0,a.jsx)(ed.A,{size:16,className:"me-1 text-muted-hover"})," "]}),!b&&(0,a.jsx)(N.E,{span:!0,size:"xxs",me:"xs",pt:"2px",children:e.children.length>0?`(${e.children.length})`:""}),(0,a.jsxs)(k.Y,{gap:0,wrap:"nowrap",children:[h===p.GL.Log?(0,a.jsx)(eu.A,{size:14,className:"align-middle me-2","aria-label":"Correlated Log Line"}):null,(0,a.jsxs)(N.E,{size:"xxs",truncate:"end",span:!0,title:`${d}${y&&v?` | ${j}`:""}`,role:"button",children:[d?`${d} | `:"",j]})]})]})}),style:{marginTop:32*(0===t)},isActive:C,events:[{id:u,type:h,aliasWith:x,start:n,end:i,tooltip:`${j} ${r>=0?`took ${r.toFixed(4)}ms`:""} ${w?`| Status: ${w}`:""}${!isNaN(s)?` | Started at ${m(new Date(s),{format:"withMs"})}`:""}`,color:function(e){let{isError:t,isWarn:r,isHighlighted:s}=e;return t?s?(0,ej.sS)():(0,ej.cM)():r?s?(0,ej.qS)():(0,ej.AD)():s?"#A9AFB7":"#6A7077"}({isError:S,isWarn:E,isHighlighted:C}),body:(0,a.jsx)("span",{children:j}),minWidthPerc:1,isError:S,markers:_}]}}),ew=et.findIndex(e=>e.id===o),eE=d/100*window.innerHeight;return(0,a.jsxs)(a.Fragment,{children:[y&&(0,a.jsx)("form",{onSubmit:C(S),children:(0,a.jsxs)(x.a,{style:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",gap:"12px"},children:[(0,a.jsx)(N.E,{size:"xs",children:"Spans filter"}),(0,a.jsx)(ex.A,{tableConnection:(0,es.VO)(e),placeholder:'Search trace spans w/ Lucene ex. StatusCode:"Error"',language:"lucene",name:"traceWhere",control:w,size:"xs",onSubmit:C(S),"data-testid":"trace-search-input"}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.E,{size:"xs",children:"Logs filter"}),(0,a.jsx)(ex.A,{tableConnection:(0,es.VO)(t),placeholder:'Search trace logs w/ Lucene ex. SeverityText:"error"',language:"lucene",name:"logWhere",control:w,size:"xs",onSubmit:C(S),"data-testid":"log-search-input"})]})]})}),(0,a.jsxs)(k.Y,{my:"xs",justify:"space-between",children:[(0,a.jsxs)(k.Y,{gap:"md",children:[(0,a.jsxs)(N.E,{size:"xs",children:[eg,","," ",(0,a.jsx)("span",{className:ep?"text-danger":"",children:ef})]}),(0,a.jsx)(ea.S,{size:"xs",label:"Show span events",checked:J,onChange:()=>Z(!J)})]}),(0,a.jsxs)("span",{children:[(0,a.jsxs)(el.M,{underline:"always",onClick:()=>_(e=>!e),size:"xs",children:[y?"Hide Filters":"Show Filters"," ",b&&"(active)"]}),b&&(0,a.jsx)(el.M,{underline:"always",onClick:T,size:"xs",ms:"xs",children:"Clear Filters"})]})]}),!O&&!P&&(0,a.jsx)(eD.V,{attributes:V}),(0,a.jsx)("div",{style:{position:"relative",overflow:"hidden",maxHeight:`${eE}px`},children:O?(0,a.jsx)("div",{className:"my-3",children:"Loading Traces..."}):P?(0,a.jsxs)(x.a,{mt:"lg",children:[(0,a.jsx)(N.E,{my:"sm",size:"sm",children:"An error occurred while fetching trace data:"}),(0,a.jsx)(ei.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:P.message})]}):null==W?(0,a.jsxs)("div",{children:["An unknown error occurred. ",(0,a.jsx)(em.z,{})]}):0===et.length?(0,a.jsx)("div",{className:"my-3",children:"No matching spans or logs found"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eR,{style:{overflowY:"auto",maxHeight:`${eE}px`},scale:1,setScale:()=>{},rowHeight:22,labelWidth:300,onClick:e=>{},onEventClick:e=>{l?.({id:e.id,type:e.type??"",aliasWith:e.aliasWith??[]})},cursors:[],rows:e_,initialScrollRowIndex:ew})})}),(0,a.jsx)(eo.c,{mt:"md",className:eS().resizeYHandle,onMouseDown:u,style:{position:"relative",bottom:0}})]})}let eH=e=>{let t,r,s,n=(0,l.c)(13),{traceSourceId:i,rumSessionId:o,dateRange:c,focusDate:d,serviceName:u,setSubDrawerOpen:m}=e;n[0]!==i?(t={id:i},n[0]=i,n[1]=t):t=n[1];let{data:h}=(0,S.Fo)(t),p=h?.sessionSourceId;n[2]!==p?(r={id:p},n[2]=p,n[3]=r):r=n[3];let{data:x,isLoading:g}=(0,S.Fo)(r);if(!h||!x&&g){let e;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(J.a,{}),n[4]=e):e=n[4],e}return n[5]!==c||n[6]!==d||n[7]!==o||n[8]!==u||n[9]!==x||n[10]!==m||n[11]!==h?(s=(0,a.jsx)(a.Fragment,{children:x?o&&h?(0,a.jsx)(Y.A,{start:c[0],end:c[1],traceSource:h,session:{serviceName:u},sessionSource:x,rumSessionId:o,setDrawerOpen:m,initialTs:d.getTime()}):(0,a.jsx)("span",{className:"p-3 text-muted",children:"Session ID not found."}):(0,a.jsxs)("div",{className:"m-2 fs-8 p-4",children:["No correlated session source found.",(0,a.jsx)("br",{}),"Go to ",(0,a.jsx)(K(),{href:"/team#sources",children:"Team Settings"})," and update the"," ",(0,a.jsx)("strong",{children:h?.name})," source to include the correlated session source."]})}),n[5]=c,n[6]=d,n[7]=o,n[8]=u,n[9]=x,n[10]=m,n[11]=h,n[12]=s):s=n[12],s};function eB(e){return null===e.parentSpanId&&e.rumSessionId}function eq(e){return e.rumSessionId}var eX=r(25062),eG=r(22623),eK=r(6892),eJ=r(57478),eZ=r(64467),eY=((s=eY||{}).Overview="overview",s.Parsed="parsed",s);function eU(e){let t,r,s,n,o,c,d,m,h,x,f,y,v,j,_,E,C,A,T,$,R,z,I,L=(0,l.c)(74),{childSourceId:M,traceId:D,dateRange:F,focusDate:O,parentSourceId:P,initialRowHighlightHint:W,"data-testid":V}=e;L[0]!==M?(t={defaultValues:{source:M}},L[0]=M,L[1]=t):t=L[1];let{control:H}=(0,ee.mN)(t);L[2]!==H?(r={control:H,name:"source"},L[2]=H,L[3]=r):r=L[3];let B=(0,ee.FH)(r);L[4]!==B?(s={id:B},L[4]=B,L[5]=s):s=L[5];let{data:G,isLoading:K}=(0,S.Fo)(s);L[6]!==P?(n={id:P},L[6]=P,L[7]=n):n=L[7];let{data:J,isLoading:Z}=(0,S.Fo)(n),Y=J?.kind===p.GL.Log?J:G?.kind===p.GL.Log?G:null,U=J?.kind===p.GL.Trace?J:G?.kind===p.GL.Trace?G:null;G?.kind===p.GL.Trace||(J?.kind,p.GL.Trace);let{mutate:Q}=(0,S.sr)();L[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,u.os)(),L[8]=o):o=L[8];let[et,er]=(0,u.ZA)("eventRowWhere",o),ea=J?.traceIdExpression??"";L[9]!==ea?(c={defaultValues:{traceIdExpression:ea}},L[9]=ea,L[10]=c):c=L[10];let{control:el,handleSubmit:ei,setValue:ec}=(0,ee.mN)(c);L[11]!==J||L[12]!==ec?(d=()=>{J?.traceIdExpression&&ec("traceIdExpression",J.traceIdExpression)},L[11]=J,L[12]=ec,L[13]=d):d=L[13];let ed=J?.traceIdExpression;L[14]!==ed||L[15]!==ec?(m=[ed,ec],L[14]=ed,L[15]=ec,L[16]=m):m=L[16],(0,i.useEffect)(d,m);let[eu,em]=(0,i.useState)(!1);L[17]!==er?(h=()=>()=>{er(null)},L[17]=er,L[18]=h):h=L[18],L[19]!==er||L[20]!==D?(x=[D,er],L[19]=er,L[20]=D,L[21]=x):x=L[21],(0,i.useEffect)(h,x);let[eh,ep]=(0,i.useState)("overview"),ex=J?.traceIdExpression,eg=D||"No trace id found for event";L[22]!==ex||L[23]!==eg?(f=(0,a.jsxs)(N.E,{size:"xs",me:"xs",children:[ex,":"," ",eg]}),L[22]=ex,L[23]=eg,L[24]=f):f=L[24],L[25]!==D?(y=null!=D&&(0,a.jsx)(eX.$,{variant:"subtle",size:"xs",onClick:()=>em(eQ),children:(0,a.jsx)(eK.A,{size:14})}),L[25]=D,L[26]=y):y=L[26],L[27]!==f||L[28]!==y?(v=(0,a.jsxs)(g.s,{align:"center",children:[f,y]}),L[27]=f,L[28]=y,L[29]=v):v=L[29];let ef=J?.kind===p.GL.Log?"Trace Source":"Correlated Log Source";return L[30]!==ef?(j=(0,a.jsx)(N.E,{size:"sm",children:ef}),L[30]=ef,L[31]=j):j=L[31],L[32]!==H?(_=(0,a.jsx)(eJ.W,{control:H,name:"source",size:"xs"}),L[32]=H,L[33]=_):_=L[33],L[34]!==j||L[35]!==_?(E=(0,a.jsxs)(k.Y,{gap:"sm",children:[j,_]}),L[34]=j,L[35]=_,L[36]=E):E=L[36],L[37]!==v||L[38]!==E?(C=(0,a.jsxs)(g.s,{align:"center",justify:"space-between",mb:"sm",children:[v,E]}),L[37]=v,L[38]=E,L[39]=C):C=L[39],L[40]!==J||L[41]!==P||L[42]!==eu||L[43]!==D||L[44]!==el||L[45]!==ei||L[46]!==Q?(A=(eu||!D)&&null!=P&&(0,a.jsxs)(b.B,{gap:"xs",children:[(0,a.jsx)(N.E,{size:"xs",children:"Trace ID Expression"}),(0,a.jsxs)(g.s,{children:[(0,a.jsx)(eZ.Z,{tableConnection:(0,es.VO)(J),name:"traceIdExpression",placeholder:"Log Trace ID Column (ex. trace_id)",control:el,size:"xs"}),(0,a.jsx)(eX.$,{ms:"sm",variant:"primary",onClick:ei(e=>{let{traceIdExpression:t}=e;null!=J&&Q({source:{...J,traceIdExpression:t}})}),size:"xs",children:"Save"}),(0,a.jsx)(eX.$,{ms:"sm",variant:"secondary",onClick:()=>em(!1),size:"xs",children:"Cancel"})]})]}),L[40]=J,L[41]=P,L[42]=eu,L[43]=D,L[44]=el,L[45]=ei,L[46]=Q,L[47]=A):A=L[47],L[48]===Symbol.for("react.memo_cache_sentinel")?(T=(0,a.jsx)(eo.c,{my:"sm"}),L[48]=T):T=L[48],L[49]!==F||L[50]!==et?.id||L[51]!==O||L[52]!==W||L[53]!==Y||L[54]!==er||L[55]!==D||L[56]!==U?($=U?.kind===p.GL.Trace&&D&&(0,a.jsx)(eV,{traceTableSource:U,logTableSource:Y,traceId:D,dateRange:F,focusDate:O,highlightedRowWhere:et?.id,onClick:er,initialRowHighlightHint:W}),L[49]=F,L[50]=et?.id,L[51]=O,L[52]=W,L[53]=Y,L[54]=er,L[55]=D,L[56]=U,L[57]=$):$=L[57],L[58]!==eh||L[59]!==et||L[60]!==Y||L[61]!==U?(R=null!=U&&null!=et&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.E,{size:"sm",my:"sm",children:"Event Details"}),(0,a.jsx)(w.A,{className:"fs-8 mt-2",items:[{text:"Overview",value:"overview"},{text:"Column Values",value:"parsed"}],activeItem:eh,onClick:e=>ep(e)}),"overview"===eh&&(0,a.jsx)(X.W,{source:et?.type===p.GL.Log&&Y?Y:U,rowId:et?.id,aliasWith:et?.aliasWith}),"parsed"===eh&&(0,a.jsx)(q.dD,{source:et?.type===p.GL.Log&&Y?Y:U,rowId:et?.id,aliasWith:et?.aliasWith})]}),L[58]=eh,L[59]=et,L[60]=Y,L[61]=U,L[62]=R):R=L[62],L[63]!==et||L[64]!==D||L[65]!==U?(z=null!=U&&!et&&D&&(0,a.jsx)(eG.t,{shadow:"xs",p:"xl",mt:"md",children:(0,a.jsx)(en.o,{mih:100,children:(0,a.jsx)(N.E,{size:"sm",children:"Please select a span above to view details."})})}),L[63]=et,L[64]=D,L[65]=U,L[66]=z):z=L[66],L[67]!==V||L[68]!==C||L[69]!==A||L[70]!==$||L[71]!==R||L[72]!==z?(I=(0,a.jsxs)("div",{"data-testid":V,children:[C,A,T,$,R,z]}),L[67]=V,L[68]=C,L[69]=A,L[70]=$,L[71]=R,L[72]=z,L[73]=I):I=L[73],I}function eQ(e){return!e}let e0=(0,i.createContext)({});var e1=((n=e1||{}).Overview="overview",n.Parsed="parsed",n.Debug="debug",n.Trace="trace",n.ServiceMap="serviceMap",n.Context="context",n.Replay="replay",n.Infrastructure="infrastructure",n);let e2=({rowId:e,aliasWith:t,source:r,isNestedPanel:s=!1,setSubDrawerOpen:n,onClose:c,breadcrumbPath:h=[],onBreadcrumbClick:f})=>{let b,{data:v,isLoading:j,isSuccess:C}=(0,q.k1)({source:r,rowId:e,aliasWith:t}),{dbSqlRowTableConfig:k}=(0,i.useContext)(e0),N=(0,i.useCallback)(e=>{let t=h.length;if(t>e)c(),f?.(e);else{if(t===e)return;f?.(e)}},[h.length,f,c]),A=(0,i.useMemo)(()=>!!r.resourceAttributesExpression||!!r.eventAttributesExpression,[r.eventAttributesExpression,r.resourceAttributesExpression]),T="trace"===r.kind?"trace":A?"overview":"parsed",[z,I]=(0,u.ZA)("sidePanelTab",(0,u.Oq)(Object.values(e1)).withDefault(T)),[L,M]=(0,i.useState)(T),D=s?M:I,F=s?L:z,O=v?.data?.[0],P=O?.__hdx_timestamp;b=new Date("number"==typeof P?1e3*P:P);let W=(0,S.N8)(r),V=d()(O?.__hdx_body)?O.__hdx_body:O?.__hdx_body!==void 0?JSON.stringify(O.__hdx_body):void 0,H=O?.__hdx_severity_text,G=(0,i.useMemo)(()=>{let e=[];return(r.kind===p.GL.Trace||r.kind===p.GL.Log)&&r.highlightedRowAttributeExpressions&&e.push(...r.highlightedRowAttributeExpressions),r.serviceNameExpression&&e.push({sqlExpression:r.serviceNameExpression}),v?(0,E.N4)(r,e,v.data||[],v.meta||[]):[]},[r,v]),K=(0,i.useMemo)(()=>[(0,o.A)(b,{minutes:-60}),(0,o.A)(b,{minutes:60})],[b]),J=(0,i.useMemo)(()=>[(0,o.A)(b,{hours:-4}),(0,o.A)(b,{hours:4})],[b]),Y=O?.__hdx_trace_id,U="log"===r.kind?r.traceSourceId:"trace"===r.kind?r.logSourceId:void 0,Q="trace"===r.kind?r.id:r.traceSourceId,ee=Y&&Q,{rumSessionId:et,rumServiceName:er}=(e=>{let t,r,s,n,a=(0,l.c)(42),{sourceId:i,traceId:o,dateRange:c,enabled:d}=e;a[0]!==i?(t={id:i},a[0]=i,a[1]=t):t=a[1];let{data:u}=(0,S.Fo)(t),{getFieldExpression:m}=(0,Z.A)(u);e:{let e,t,s,n,l,i,c,d,h;if(!u||!o||!m){r=void 0;break e}let p=`${u.timestampValueExpression}`;a[2]!==p?(e={valueExpression:p,alias:"Timestamp"},a[2]=p,a[3]=e):e=a[3];let x=u.resourceAttributesExpression??"ResourceAttributes";a[4]!==m||a[5]!==x?(t=m(x,"rum.sessionId"),a[4]=m,a[5]=x,a[6]=t):t=a[6];let g=`${t}`;a[7]!==g?(s={valueExpression:g,alias:"rumSessionId"},a[7]=g,a[8]=s):s=a[8];let f=u.resourceAttributesExpression??"ResourceAttributes";a[9]!==m||a[10]!==f?(n=m(f,"service.name"),a[9]=m,a[10]=f,a[11]=n):n=a[11];let b=`${n}`;a[12]!==b?(l={valueExpression:b,alias:"serviceName"},a[12]=b,a[13]=l):l=a[13];let y=`${u.parentSpanIdExpression}`;a[14]!==y?(i={valueExpression:y,alias:"parentSpanId"},a[14]=y,a[15]=i):i=a[15],a[16]!==l||a[17]!==i||a[18]!==e||a[19]!==s?(c=[e,s,l,i],a[16]=l,a[17]=i,a[18]=e,a[19]=s,a[20]=c):c=a[20],a[21]===Symbol.for("react.memo_cache_sentinel")?(d={limit:1e4},a[21]=d):d=a[21];let v=`${u.traceIdExpression} = '${o}'`;a[22]!==u.connection||a[23]!==u.from||a[24]!==u.timestampValueExpression||a[25]!==c||a[26]!==v?(h={select:c,from:u.from,timestampValueExpression:u.timestampValueExpression,limit:d,connection:u.connection,where:v,whereLanguage:"sql"},a[22]=u.connection,a[23]=u.from,a[24]=u.timestampValueExpression,a[25]=c,a[26]=v,a[27]=h):h=a[27],r=h}let h=r,p=void 0!==d&&d&&!!u&&!!h;a[28]!==h||a[29]!==c||a[30]!==p?(s={config:h,dateRangeStartInclusive:!0,dateRange:c,enabled:p},a[28]=h,a[29]=c,a[30]=p,a[31]=s):s=a[31];let{data:x}=eP(s);t:{let e,t,r;a[32]!==x?.data?(e=x?.data||[],a[32]=x?.data,a[33]=e):e=a[33];let s=e;a[34]!==s?(t=s.find(eB),a[34]=s,a[35]=t):t=a[35];let l=t;if(!l){let e;a[36]!==s?(e=s.find(eq),a[36]=s,a[37]=e):e=a[37],l=e}if(l){let e;a[38]!==l.rumSessionId||a[39]!==l.serviceName?(e={rumServiceName:l.serviceName,rumSessionId:l.rumSessionId},a[38]=l.rumSessionId,a[39]=l.serviceName,a[40]=e):e=a[40],n=e;break t}a[41]===Symbol.for("react.memo_cache_sentinel")?(r={rumServiceName:void 0,rumSessionId:void 0},a[41]=r):r=a[41],n=r}return n})({sourceId:Q,traceId:Y,dateRange:K,enabled:null!=e}),es=(0,i.useMemo)(()=>{try{if(!r?.resourceAttributesExpression||!O)return!1;let e=O.__hdx_resource_attributes;return e?.["k8s.pod.uid"]!=null||e?.["k8s.node.name"]!=null}catch(e){return console.error(e),!1}},[r,O]),en=(0,i.useMemo)(()=>{if(O)return{timestamp:O.__hdx_timestamp,spanId:O.__hdx_span_id,body:O.__hdx_body}},[O]);return j?(0,a.jsx)("div",{className:eO().loadingState,children:"Loading..."}):C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.a,{p:"sm",children:(0,a.jsx)(y.A,{date:b,attributes:G,mainContent:V,mainContentHeader:W,severityText:H,breadcrumbPath:h,onBreadcrumbClick:N})}),(0,a.jsx)(w.A,{"data-testid":"side-panel-tabs",className:"fs-8 mt-2",items:[...A?[{text:"Overview",value:"overview"}]:[],{text:"Column Values",value:"parsed"},{text:"Trace",value:"trace"},...ee?[{text:"Service Map",value:"serviceMap"}]:[],{text:"Surrounding Context",value:"context"},...null!=et?[{text:"Session Replay",value:"replay"}]:[],...es?[{text:"Infrastructure",value:"infrastructure"}]:[]],activeItem:F,onClick:e=>D(e)}),"overview"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(X.W,{"data-testid":"side-panel-tab-overview",source:r,rowId:e,aliasWith:t,hideHeader:!0})}),"trace"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,a.jsx)(eU,{"data-testid":"side-panel-tab-trace",parentSourceId:r.id,childSourceId:U,traceId:Y,dateRange:K,focusDate:b,initialRowHighlightHint:en})})}),"serviceMap"===F&&ee&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(g.s,{p:"sm",flex:1,children:(0,a.jsx)($,{traceId:Y,traceTableSourceId:Q,dateRange:K})})}),"parsed"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(q.dD,{"data-testid":"side-panel-tab-parsed",source:r,rowId:e,aliasWith:t})}),"context"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(R.A,{"data-testid":"side-panel-tab-context",source:r,dbSqlRowTableConfig:k,rowData:O,rowId:e,breadcrumbPath:h,onBreadcrumbClick:N})}),"replay"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)("div",{className:"overflow-hidden flex-grow-1",children:(0,a.jsx)(eH,{"data-testid":"side-panel-tab-replay",dateRange:J,focusDate:b,setSubDrawerOpen:n,traceSourceId:Q,serviceName:er,rumSessionId:et})})}),"infrastructure"===F&&(0,a.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,a.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,a.jsx)(B,{"data-testid":"side-panel-tab-infrastructure",source:r,rowData:O,rowId:e})})}),(0,a.jsx)(_.ir,{})]}):(0,a.jsx)("div",{className:eO().loadingState,children:"Error loading row data"})};function e3(e){let t,r,s,n,o,c,d,p,g,b,y,_,S,w=(0,l.c)(39),{onClose:E,rowId:k,aliasWith:N,source:A,isNestedPanel:T,breadcrumbPath:$,onBreadcrumbClick:R}=e;w[0]!==$?(t=void 0===$?[]:$,w[0]=$,w[1]=t):t=w[1];let z=t,I=(0,C.Y)()+10,{size:L,startResize:M}=(0,v.A)(80),[D,F]=(0,i.useState)(!1);(0,i.useContext)(e0),w[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,u.Oq)(Object.values(e1)),w[2]=r):r=w[2];let[,O]=(0,u.ZA)("tab",r);w[3]===Symbol.for("react.memo_cache_sentinel")?(s={},w[3]=s):s=w[3];let{clear:P}=j(s);w[4]!==P||w[5]!==T||w[6]!==E||w[7]!==O?(n=()=>{T||O(null),P(),E()},w[4]=P,w[5]=T,w[6]=E,w[7]=O,w[8]=n):n=w[8];let W=n;w[9]===Symbol.for("react.memo_cache_sentinel")?(o=["esc"],w[9]=o):o=w[9];let V=!1===D;w[10]!==V?(c={enabled:V},w[10]=V,w[11]=c):c=w[11],(0,h.vC)(o,W,c);let H=null!=k,B=!T;w[12]!==W||w[13]!==D?(d=()=>{D||W()},w[12]=W,w[13]=D,w[14]=d):d=w[14];let q=`${L}vw`;return w[15]===Symbol.for("react.memo_cache_sentinel")?(p={body:{padding:"0",height:"100vh"}},w[15]=p):p=w[15],w[16]!==M?(g=(0,a.jsx)(x.a,{className:eO().panelDragBar,onMouseDown:M}),w[16]=M,w[17]=g):g=w[17],w[18]!==W||w[19]!==N||w[20]!==z||w[21]!==T||w[22]!==R||w[23]!==k||w[24]!==A?(b=(0,a.jsx)(m.ErrorBoundary,{fallbackRender:e4,children:(0,a.jsx)(e2,{source:A,rowId:k,aliasWith:N,onClose:W,isNestedPanel:T,breadcrumbPath:z,setSubDrawerOpen:F,onBreadcrumbClick:R})}),w[18]=W,w[19]=N,w[20]=z,w[21]=T,w[22]=R,w[23]=k,w[24]=A,w[25]=b):b=w[25],w[26]!==g||w[27]!==b?(y=(0,a.jsxs)("div",{className:eO().panel,"data-testid":"row-side-panel",children:[g,b]}),w[26]=g,w[27]=b,w[28]=y):y=w[28],w[29]!==I||w[30]!==y?(_=(0,a.jsx)(C.S.Provider,{value:I,children:y}),w[29]=I,w[30]=y,w[31]=_):_=w[31],w[32]!==I||w[33]!==B||w[34]!==d||w[35]!==q||w[36]!==_||w[37]!==H?(S=(0,a.jsx)(f._,{opened:H,withCloseButton:!1,withOverlay:B,onClose:d,position:"right",size:q,styles:p,zIndex:I,children:_}),w[32]=I,w[33]=B,w[34]=d,w[35]=q,w[36]=_,w[37]=H,w[38]=S):S=w[38],S}function e4(e){return(0,a.jsxs)(b.B,{children:[(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),(0,a.jsx)("div",{className:"px-2 py-1 m-2 fs-7 font-monospace bg-body p-4",children:e?.error?.message})]})}},52154:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(6029),n=r(75155),a=r(43517),l=r(78253);function i(e){let t,r,i,o,c,d,u,m=(0,n.c)(17),{language:h,onLanguageChange:p,showHotkey:x}=e;m[0]!==x?(t=x&&(0,s.jsx)(a.E,{size:"xxs",bg:"var(--color-bg-neutral)",c:"white",px:4,py:0,mr:4,lh:1.4,children:"/"}),m[0]=x,m[1]=t):t=m[1];let g="sql"===h?"var(--color-text-brand)":"gray";m[2]!==p?(r=()=>p("sql"),m[2]=p,m[3]=r):r=m[3],m[4]!==g||m[5]!==r?(i=(0,s.jsx)(a.E,{c:g,onClick:r,size:"xs",role:"button",children:"SQL"}),m[4]=g,m[5]=r,m[6]=i):i=m[6],m[7]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(a.E,{size:"xs",children:"|"}),m[7]=o):o=m[7];let f="lucene"===h?"var(--color-text-brand)":"gray";return m[8]!==p?(c=()=>p("lucene"),m[8]=p,m[9]=c):c=m[9],m[10]!==f||m[11]!==c?(d=(0,s.jsx)(a.E,{size:"xs",role:"button",fw:500,c:f,onClick:c,children:"Lucene"}),m[10]=f,m[11]=c,m[12]=d):d=m[12],m[13]!==t||m[14]!==i||m[15]!==d?(u=(0,s.jsxs)(l.s,{wrap:"nowrap",gap:"xxxs",px:"sm",children:[t,i,o,d]}),m[13]=t,m[14]=i,m[15]=d,m[16]=u):u=m[16],u}},54167:(e,t,r)=>{"use strict";var s=r(37823);r(60302),r(55754),r(67505),s.N,s.M,s.P,t.oU=s.Q,s.O,s.L},57030:(e,t,r)=>{"use strict";r.d(t,{A:()=>eC});var s=r(6029),n=r(75155),a=r(55729),l=r(75828),i=r.n(l),o=r(47687),c=r.n(o),d=r(41038),u=r(1909),m=r(3145),h=r(95991),p=r(90124),x=r(63085),g=r(76013),f=r(3635),b=r(25062),y=r(92789),v=r(79621),j=r(10822),_=r(62118),S=r(97684),w=r(39614),E=r(81244),C=r(12853),k=r(50374),N=r(64467),A=r(40147),T=r(66692),$=r(86823),R=r(97039),z=r(61441),I=r(10708),L=r(56795),M=r(61411),D=r(81055),F=r(90515),O=r(45172),P=r(94502),W=r(80925),V=r(92917),H=r(81408),B=r.n(H);function q(e){return Math.max(e.getCurrentTime(),0)}let X=(0,a.memo)(({url:e})=>{let t,r;try{t=new URL(e)}catch{}try{let e=new URLSearchParams(t?.search??"");for(let[t,s]of(r=[],e.entries()))r.push({key:t,value:s})}catch{}return(0,s.jsxs)(R.j,{shadow:"md",position:"bottom-start",children:[(0,s.jsx)(R.j.Target,{children:(0,s.jsx)("div",{className:B().playerHeaderUrl,children:e||"Session Player"})}),e&&(0,s.jsx)(R.j.Dropdown,{children:(0,s.jsxs)("table",{className:"table fs-8 mb-0",children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(I.A,{size:14})}),(0,s.jsx)("td",{children:t?.host})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(L.A,{size:14})}),(0,s.jsx)("td",{children:t?.pathname})]}),r&&r.length>0&&r.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:e.key})}),(0,s.jsx)("td",{children:e.value})]},e.key))]})})]})});function G({config:{dateRange:e,serviceName:t,sessionId:r,sourceId:n},focus:l,setPlayerTime:o,playerState:d,setPlayerState:u,playerSpeed:m,skipInactive:h,setPlayerStartTimestamp:p,setPlayerEndTimestamp:x,setPlayerFullWidth:b,playerFullWidth:y,resizeKey:v,getSessionSourceFieldExpression:j}){let _=(0,V.uy)(),S=(0,a.useRef)(null),w=(0,a.useRef)(null),E=(0,a.useRef)(null),C=(0,a.useRef)([]),k=(0,a.useRef)(0),[N,A]=(0,a.useState)(0),R=(0,a.useRef)(c()(A,100,{leading:!0,trailing:!0})),[I,L]=(0,a.useState)(!1),[H,G]=(0,a.useState)(!1),K="",{isFetching:J,abort:Z}=(0,W.S)({serviceName:t,sessionId:r,sourceId:n,startDate:e?.[0]??new Date,endDate:e?.[1]??new Date,limit:1e6,onEvent:e=>{try{let{b:t,ck:r,tcks:s}=e;if(K+=t,!r||r===s){let e=JSON.parse(K);null!=E.current?E.current.addEvent(e):(null!=p&&0===C.current.length&&p(e.timestamp),C.current.push(e)),R.current(e.timestamp),k.current=e.timestamp,K=""}}catch(e){_&&console.error(e),K=""}C.current.length>5&&L(!0)},onEnd:()=>{L(!0),G(!0),null!=x&&(null!=E.current?x(k.current??0):C.current.length>0&&x(C.current[C.current.length-1].timestamp??0))},getSessionSourceFieldExpression:j},{keepPreviousData:!0,shouldAbortPendingRequest:!0}),[Y,U]=(0,a.useState)(""),Q=(0,a.useCallback)(()=>{if(null!=E.current)try{E.current.play(q(E.current))}catch(e){console.error(e)}},[E]),ee=(0,a.useCallback)(e=>{if(null!=E.current)try{E.current.pause(e)}catch(e){console.error(e)}},[E]);(0,T.vC)(["space"],()=>{"playing"===d?u("paused"):"paused"===d&&u("playing")});let et=(0,a.useRef)(o);(0,a.useEffect)(()=>{et.current=o},[o]);let er=(0,a.useRef)(0),es=(0,a.useCallback)(()=>{null!=E.current&&E.current.service.state.matches("playing")&&et.current(Math.round(E.current.getMetaData().startTime+q(E.current))),er.current=requestAnimationFrame(es)},[]);(0,a.useEffect)(()=>(er.current=requestAnimationFrame(es),()=>{cancelAnimationFrame(er.current)}),[es]),(0,a.useEffect)(()=>{null!=E.current&&("playing"===d?Q():"paused"===d&&ee())},[d,Q,ee]),(0,a.useEffect)(()=>{null!=E.current&&("playing"===d?(ee(),E.current?.setConfig({speed:m,skipInactive:h}),Q()):"paused"===d&&E.current?.setConfig({speed:m,skipInactive:h}))},[d,m,h,ee,Q]);let en=(0,a.useCallback)(()=>{null!=S.current&&null!=w.current&&(w.current.style.transform="scale(0.0001)",window.requestAnimationFrame(()=>{if(null==S.current||null==w.current)return;let e=S.current.getBoundingClientRect(),t=E?.current?.iframe?.offsetWidth??1280,r=E?.current?.iframe?.offsetHeight??720,s=e.width/t,n=e.height/r;w.current.style.transform=`scale(${Math.min(s,n)})`}))},[S,w]);(0,a.useEffect)(()=>(window.addEventListener("resize",en),()=>window.removeEventListener("resize",en)),[en]),(0,a.useEffect)(()=>{en()},[v,en]);let[ea,el]=(0,a.useState)(!1);(0,a.useEffect)(()=>{C.current.length<2||null==w.current||null!=E.current||(E.current=new $.B(C.current,{root:w.current,mouseTail:!0,pauseAnimation:!1,showWarning:_,skipInactive:!0}),el(!0),_&&(window.__hdx_replayer=E.current),E.current.enableInteract(),E.current.on("event-cast",e=>{try{(e?.type===3&&e?.data?.source===4||4===e.type)&&setTimeout(()=>{en()},0),e?.type===4&&U(e.data.href)}catch(e){_&&console.error(e)}}),"playing"===d&&E.current.getMetaData().endTime>(l?.ts??0)&&(null!=l&&ee(l.ts-E.current.getMetaData().startTime),Q()),setTimeout(()=>{en()},0))},[en,l,ee,I,d,Q,_]),(0,a.useEffect)(()=>{I&&ea&&!(N<(l?.ts?l.ts+1e3:1/0))&&l?.setBy!=="player"&&null!=E.current&&(ee(l?.ts==null?0:l?.ts-E.current.getMetaData().startTime),en(),"playing"===d&&Q())},[l,ee,u,d,Q,I,ea,en,N]),(0,a.useEffect)(()=>()=>{null!=E.current&&(E.current?.destroy(),E.current=null),Z()},[Z]);let ei=!1===I&&J,eo=!1===H&&(E.current?.getMetaData()?.endTime??0)<(l?.ts??0);return(0,a.useEffect)(()=>{null!=E.current&&null!=l&&E.current.getMetaData().endTime>l.ts&&"playing"===d&&E.current?.service?.state?.matches("paused")&&(ee(l.ts-E.current.getMetaData().startTime),Q())},[N,l,d,ee,Q]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:B().playerHeader,children:[(0,s.jsx)(g.M,{onClick:()=>b(!y),size:"sm",color:"gray",children:y?(0,s.jsx)(M.A,{size:14}):(0,s.jsx)(D.A,{size:14})}),(0,s.jsx)(z.i,{value:Y,children:({copied:e,copy:t})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(X,{url:Y}),(0,s.jsx)(g.M,{onClick:t,title:"Copy URL",variant:"secondary",size:"sm",children:e?(0,s.jsx)(F.A,{size:14}):(0,s.jsx)(O.A,{size:14})})]})})]}),(0,s.jsxs)("div",{className:B().playerContainer,children:[ei||eo?(0,s.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[(0,s.jsx)(P.A,{className:"spin-animate",size:14}),eo?"Buffering to time...":"Loading replay..."]}):H&&null==E.current?(0,s.jsx)("div",{className:"text-center",children:"No replay available for this session, most likely due to this session starting and ending in a background tab."}):null,(0,s.jsx)("div",{ref:S,className:i()(B().domPlayerWrapper,"overflow-hidden",{"d-none":ei||eo,started:(E.current?.getCurrentTime()??0)>0,[B().domPlayerWrapperPaused]:"paused"===d}),children:(0,s.jsx)("div",{className:"player rr-block",ref:w})})]})]})}var K=r(831),J=r.n(K),Z=r(4308),Y=r(91021),U=r(29766);let Q=U.Ay.object({body:U.Ay.string().nullish(),component:U.Ay.string().nullish(),durationInMs:U.Ay.number(),"error.message":U.Ay.string().nullish(),"http.method":U.Ay.string().nullish(),"http.status_code":U.Ay.string().nullish(),"http.url":U.Ay.string().nullish(),id:U.Ay.string(),"location.href":U.Ay.string().nullish(),"otel.library.name":U.Ay.string(),parent_span_id:U.Ay.string(),severity_text:U.Ay.string(),span_id:U.Ay.string(),span_name:U.Ay.string(),timestamp:U.Ay.string(),trace_id:U.Ay.string(),type:U.Ay.string().nullish()});var ee=r(9953),et=r(7565),er=r(2326),es=r.n(er);let en=e=>{let t,r,l,i,o,c,d,u=(0,n.c)(28),{min:m,max:h,value:p,markers:g,playerState:f,onChange:b,setPlayerState:y}=e,v=(0,et.a)();u[0]!==v||u[1]!==m?(t=e=>{let t=Math.max(e-m,0),r=Math.floor(t/1e3/60),s=Math.floor(t/1e3%60),n=`${r}:${s<10?"0":""}${s}`,a=v(e,{format:"short"});return`${n} at ${a}`},u[0]=v,u[1]=m,u[2]=t):t=u[2];let j=t;u[3]!==g||u[4]!==h||u[5]!==m||u[6]!==b?(r=g?.map(e=>(0,s.jsx)(x.m,{color:e.isError?"red":"gray",label:(0,V.EJ)(e?.description??"",240,"...",/\n/),position:"top",withArrow:!0,children:(0,s.jsx)("div",{className:es().markerDot,style:{backgroundColor:e.isSuccess?"var(--color-text-success)":e.isError?"var(--color-text-danger)":"var(--color-text-muted)",left:`${(e.ts-m)/(h-m)*100}%`},onClick:()=>b(e.ts)})},e.id)),u[3]=g,u[4]=h,u[5]=m,u[6]=b,u[7]=r):r=u[7];let _=r,[S,w]=a.useState(f);u[8]!==f||u[9]!==y?(l=()=>{w(f),y("paused")},u[8]=f,u[9]=y,u[10]=l):l=u[10];let E=l;u[11]!==S||u[12]!==y?(i=()=>{y(S)},u[11]=S,u[12]=y,u[13]=i):i=u[13];let C=i;u[14]!==_?(o=(0,s.jsx)("div",{className:es().markers,children:_}),u[14]=_,u[15]=o):o=u[15];let k="playing"===f?"green":"gray",N=p||m;return u[16]!==E||u[17]!==C||u[18]!==h||u[19]!==m||u[20]!==b||u[21]!==k||u[22]!==N||u[23]!==j?(c=(0,s.jsx)(ee.A,{color:k,size:"sm",min:m,max:h,value:N,step:1e3,label:j,onChange:b,onMouseDown:E,onMouseUp:C}),u[16]=E,u[17]=C,u[18]=h,u[19]=m,u[20]=b,u[21]=k,u[22]=N,u[23]=j,u[24]=c):c=u[24],u[25]!==o||u[26]!==c?(d=(0,s.jsxs)("div",{className:es().wrapper,children:[o,c]}),u[25]=o,u[26]=c,u[27]=d):d=u[27],d};function ea(e){let{timestamp:t,durationInMs:r}=e,s=new Date(t).getTime(),n=new Date(s).getTime()+r;return{...e,startOffset:s,endOffset:n}}function el(e){return e.data}function ei(e){return e.success}function eo(e){return Q.safeParse(e)}var ec=r(43370),ed=r(34834),eu=r(67214),em=r(53993),eh=r(91104),ep=r(54396),ex=r(56906),eg=r(69986),ef=r(98632),eb=r(34027),ey=r(21440),ev=r(70727);let ej={navigation:(0,s.jsx)(ep.A,{size:14}),chat:(0,s.jsx)(ex.A,{size:14}),network:(0,s.jsx)(eg.A,{size:14}),custom:(0,s.jsx)(ef.A,{size:14})},e_=a.forwardRef((e,t)=>{let r,a,l,o,c,d,u,m,h,p,x=(0,n.c)(30),{dataIndex:g,event:f,isHighlighted:b,onClick:y,onTimeClick:v}=e;return x[0]!==f.isError||x[1]!==f.isSuccess||x[2]!==b?(r=i()(B().eventRow,{[B().eventRowError]:f.isError,[B().eventRowSuccess]:f.isSuccess,[B().eventRowHighlighted]:b}),x[0]=f.isError,x[1]=f.isSuccess,x[2]=b,x[3]=r):r=x[3],x[4]!==f.eventSource?(a=ej[f.eventSource]||(0,s.jsx)(eb.A,{size:14}),x[4]=f.eventSource,x[5]=a):a=x[5],x[6]!==a?(l=(0,s.jsx)("div",{className:B().eventRowIcon,children:a}),x[6]=a,x[7]=l):l=x[7],x[8]!==f.duration?(o=f.duration>0&&(0,s.jsxs)("span",{children:[f.duration,"ms"]}),x[8]=f.duration,x[9]=o):o=x[9],x[10]!==f.title||x[11]!==o?(c=(0,s.jsxs)("div",{className:B().eventRowTitle,children:[f.title," ",o]}),x[10]=f.title,x[11]=o,x[12]=c):c=x[12],x[13]!==f.description?(d=(0,s.jsx)("div",{className:B().eventRowDescription,title:f.description,children:f.description}),x[13]=f.description,x[14]=d):d=x[14],x[15]!==y||x[16]!==c||x[17]!==d?(u=(0,s.jsxs)("div",{className:B().eventRowContent,onClick:y,children:[c,d]}),x[15]=y,x[16]=c,x[17]=d,x[18]=u):u=x[18],x[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsx)(_.A,{size:12,className:"me-1"}),x[19]=m):m=x[19],x[20]!==f.formattedTimestamp||x[21]!==v?(h=(0,s.jsxs)("div",{className:B().eventRowTimestamp,onClick:v,children:[m,f.formattedTimestamp]}),x[20]=f.formattedTimestamp,x[21]=v,x[22]=h):h=x[22],x[23]!==g||x[24]!==t||x[25]!==r||x[26]!==l||x[27]!==u||x[28]!==h?(p=(0,s.jsxs)("div",{"data-index":g,ref:t,className:r,children:[l,u,h]}),x[23]=g,x[24]=t,x[25]=r,x[26]=l,x[27]=u,x[28]=h,x[29]=p):p=x[29],p}),eS=({queriedConfig:e,aliasMap:t,onClick:r,onTimeClick:n,focus:l,minTs:i,showRelativeTime:o,eventsFollowPlayerPosition:c})=>{let{data:d,isLoading:u}=(0,Y.HD)(e,{placeholderData:e=>e,queryKey:["SessionEventList",e]}),m=(0,et.a)(),h=a.useMemo(()=>d?.data?.map(e=>Q.safeParse(e)).filter(e=>e.success).map(e=>e.data)??[],[d?.data]),p=(0,ev.Ay)({meta:d?.meta,aliasMap:t}),x=a.useMemo(()=>h.map(e=>{let{timestamp:t,durationInMs:r}=e,s=new Date(t).getTime(),n=new Date(s).getTime()+r,a=e["http.url"]??"",l=Number(e["http.status_code"]??""),c=e["http.method"]??"",d=(0,V.Up)(a),u=""!=c&&null!=c&&null!=a&&""!=a,h=e["error.message"],p=e.body??"",x=e.component,g=e.span_name,f=e["location.href"]??"",b=e["otel.library.name"],y=(0,V.Up)(f),v="custom-action"===b,j="routeChange"===g||"documentLoad"===g,_=e.severity_text?.toLowerCase()==="error"||"error"===x||l>499;return{id:e.id,row:e,isError:_,isSuccess:!_&&l<400&&l>99,eventSource:j?"navigation":u?"network":v?"custom":"intercom.onShow"===g?"chat":"log",title:j?"Navigated":"console.error"===g?"console.error":"console.log"===g?"console.log":"console.warn"===g?"console.warn":a.length>0?`${l} ${c}`:"intercom.onShow"===g?"Intercom Chat Opened":v||"console"===x?g:"console.error",description:j?y:null!=h&&h.length>0?h:"console"===x?p??"":a.length>0?d:"",timestamp:new Date(s),formattedTimestamp:o?(0,V.ax)(s-i):m(s,{format:"time"}),duration:n-s}})??[],[h,o,i,m]),g=a.useRef(null),f=(0,ey.Te)({count:x.length,getScrollElement:()=>g.current,estimateSize:()=>36}),b=(0,eh.D)(x.findIndex(e=>e.timestamp.getTime()>=(l?.ts??0)),500);return(a.useEffect(()=>{f&&b>=0&&c&&f.scrollToIndex(b,{align:"center"})},[b,c,f]),u)?(0,s.jsxs)(ed.B,{p:"sm",gap:"xs",children:[(0,s.jsx)(eu.E,{height:36}),(0,s.jsx)(eu.E,{height:36}),(0,s.jsx)(eu.E,{height:36})]}):(0,s.jsx)(em.F,{h:"100%",scrollbarSize:4,viewportRef:g,children:(0,s.jsx)("div",{className:B().eventListContainer,children:(0,s.jsx)("div",{style:{height:`${f.getTotalSize()}px`,width:"100%",position:"relative"},children:f.getVirtualItems().map(e=>{let t=x[e.index];return(0,s.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},children:(0,s.jsx)(e_,{event:t,dataIndex:e.index,isHighlighted:b===e.index,ref:f.measureElement,onClick:()=>r(p(t.row)),onTimeClick:()=>n(t.timestamp.getTime())})},e.key)})})})})},ew=(0,a.memo)(function(e){let t,r,a,l,i,o=(0,n.c)(18),{playerState:c,setPlayerState:d,setFocus:u,playbackRange:m,focus:h,queriedConfig:p}=e,x=m[0].getTime(),g=m[1].getTime(),f=1e3*Math.ceil(m[1].getTime()/1e3),b=1e3*Math.floor(m[0].getTime()/1e3);o[0]!==p?(t={placeholderData:Z.rX,queryKey:["PlayBar",p]},o[0]=p,o[1]=t):t=o[1];let{data:y}=(0,Y.HD)(p,t);y?.data,o[2]!==y?.data?(r=y?.data?.map(eo).filter(ei).map(el)??[],o[2]=y?.data,o[3]=r):r=o[3];let v=r;o[4]!==v||o[5]!==g||o[6]!==x?(a=J()(v.map(ea).filter(e=>{let{startOffset:t}=e;return t>=x&&t<=g}).map(e=>{let t=e.span_name,r=e["location.href"]??"",s=(0,V.Up)(r),n=e["error.message"]??"",a=e["http.url"]??"",l=Number(e["http.status_code"]??""),i=e["http.method"]??"",o=(0,V.Up)(a),c=e.severity_text?.toLowerCase()==="error"||"error"===e.component||"console"===e.component||l>=399;return{id:e.id,ts:e.startOffset,percentage:Math.round((e.startOffset-x)/(g-x)*100),description:"routeChange"===t||"documentLoad"===t?`Navigated to ${s}`:a.length>0?`${l} ${i}${a.length>0?` ${o}`:""}`:null!=n&&n.length>0?n:"intercom.onShow"===t?"Intercom Chat Opened":e.body??"",isError:c,isSuccess:!c&&l<400&&l>99}})??[],"percentage"),o[4]=v,o[5]=g,o[6]=x,o[7]=a):a=o[7];let j=a,_=h?.ts;return o[8]!==u?(l=e=>{u({ts:e,setBy:"slider"})},o[8]=u,o[9]=l):l=o[9],o[10]!==j||o[11]!==f||o[12]!==b||o[13]!==c||o[14]!==d||o[15]!==_||o[16]!==l?(i=(0,s.jsx)(en,{markers:j,min:b,max:f,value:_,onChange:l,setPlayerState:d,playerState:c}),o[10]=j,o[11]=f,o[12]=b,o[13]=c,o[14]=d,o[15]=_,o[16]=l,o[17]=i):i=o[17],i});function eE(e,t){let{valueExpression:r,alias:s}=t;return e[s]=r,e}function eC(e){let t,r,l,o,T,$,R,z,I,L,M,D,F,O,P,W,H,q,X,K,J,Z,Y,U,Q,ee,er,es,en,ea,el,ei,eo,ed,eu,em,eh,ep,ex,eg,ef,eb,ey,ev,ej,e_,eC,eN,eA,eT,e$,eR,ez,eI,eL,eM,eD,eF,eO,eP,eW,eV,eH,eB,eq,eX,eG,eK=(0,n.c)(192),{traceSource:eJ,sessionSource:eZ,session:eY,setDrawerOpen:eU,rumSessionId:eQ,start:e0,end:e1,initialTs:e2,whereLanguage:e3}=e,e4=void 0===e3?"lucene":e3,[e5,e6]=(0,a.useState)(void 0);eK[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],eK[0]=t):t=eK[0];let[e7,e8]=(0,a.useState)(t);eK[1]===Symbol.for("react.memo_cache_sentinel")?(r=d.GJ.withOptions({history:"replace"}),eK[1]=r):r=eK[1];let[e9,te]=(0,d.ZA)("ts",r),tt=(0,V.ZC)(e9);eK[2]!==e2?(l=null!=e2?{ts:e2,setBy:"parent"}:void 0,eK[2]=e2,eK[3]=l):l=eK[3];let[tr,ts]=(0,a.useState)(l);eK[4]!==tt||eK[5]!==e9?(o=()=>{null==tt&&null!=e9&&ts({ts:e9,setBy:"url"})},T=[tt,e9],eK[4]=tt,eK[5]=e9,eK[6]=o,eK[7]=T):(o=eK[6],T=eK[7]),(0,a.useEffect)(o,T),eK[8]!==te?($=c()(async e=>{te(e)},1e3),eK[8]=te,eK[9]=$):$=eK[9];let tn=(0,a.useRef)($).current;eK[10]!==te?(R=()=>()=>{te(null)},z=[te],eK[10]=te,eK[11]=R,eK[12]=z):(R=eK[11],z=eK[12]),(0,a.useEffect)(R,z),eK[13]!==te?(I=e=>{"player"===e.setBy?tn(e.ts):te(e.ts),ts(e)},eK[13]=te,eK[14]=I):I=eK[14];let ta=I,[tl,ti]=(0,a.useState)("paused"),[to,tc]=(0,a.useState)(void 0);eK[15]===Symbol.for("react.memo_cache_sentinel")?(L={history:"push"},eK[15]=L):L=eK[15];let[td,tu]=(0,d.ZA)("session_q",L);eK[16]!==to||eK[17]!==td?(M=()=>{null!=td&&null==to&&tc(td)},D=[td,to],eK[16]=to,eK[17]=td,eK[18]=M,eK[19]=D):(M=eK[18],D=eK[19]),(0,a.useEffect)(M,D);let tm=td??"";eK[20]!==tu?(F=()=>()=>{tu(null,{history:"replace"})},O=[tu],eK[20]=tu,eK[21]=F,eK[22]=O):(F=eK[21],O=eK[22]),(0,a.useEffect)(F,O);let[th,tp]=(0,a.useState)("highlighted"),[tx,tg]=(0,V.Mj)("hdx-session-subpanel-show-relative-time",!1),[tf,tb]=(0,V.Mj)("hdx-session-subpanel-player-speed",1),[ty,tv]=(0,V.Mj)("hdx-session-subpanel-skip-inactive",!0),[tj,t_]=(0,V.Mj)("hdx-session-subpanel-events-follow-player-position",!0),[tS,tw]=(0,a.useState)(e0.getTime()+144e5),[tE,tC]=(0,a.useState)(e1.getTime()-144e5);eK[23]!==tS?(P=new Date(tS),eK[23]=tS,eK[24]=P):P=eK[24],eK[25]!==tE?(W=new Date(tE),eK[25]=tE,eK[26]=W):W=eK[26],eK[27]!==P||eK[28]!==W?(H=[P,W],eK[27]=P,eK[28]=W,eK[29]=H):H=eK[29];let tk=H,{getFieldExpression:tN}=(0,A.A)(eZ);eK[30]!==e1||eK[31]!==eQ||eK[32]!==tm||eK[33]!==e0||eK[34]!==th||eK[35]!==eJ||eK[36]!==e4?(q={traceSource:eJ,rumSessionId:eQ,where:tm,whereLanguage:e4,start:e0,end:e1,tab:th},eK[30]=e1,eK[31]=eQ,eK[32]=tm,eK[33]=e0,eK[34]=th,eK[35]=eJ,eK[36]=e4,eK[37]=q):q=eK[37];let{eventsConfig:tA,aliasMap:tT}=function(e){let t,r,s,a,l,i,o=(0,n.c)(96),{traceSource:c,rumSessionId:d,where:u,whereLanguage:m,start:h,end:p,tab:x}=e,{getFieldExpression:g}=(0,A.A)(c);e:{let e,r,s,n,a,l,i,d,u,m,h,p,x,f,b,y,v,j,_,S,w,E,C,k,N;if(!g){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}let A=c.eventAttributesExpression??"SpanAttributes";o[1]!==g||o[2]!==A?(e=g(A,"message"),o[1]=g,o[2]=A,o[3]=e):e=o[3];let T=`${e}`;o[4]!==T?(r={valueExpression:T,alias:"body"},o[4]=T,o[5]=r):r=o[5];let $=c.eventAttributesExpression??"SpanAttributes";o[6]!==g||o[7]!==$?(s=g($,"component"),o[6]=g,o[7]=$,o[8]=s):s=o[8];let R=`${s}`;o[9]!==R?(n={valueExpression:R,alias:"component"},o[9]=R,o[10]=n):n=o[10];let z=`toFloat64OrZero(toString(${c.durationExpression})) * pow(10, 3) / pow(10, toInt8OrZero(toString(${c.durationPrecision})))`;o[11]!==z?(a={valueExpression:z,alias:"durationInMs"},o[11]=z,o[12]=a):a=o[12];let I=c.eventAttributesExpression??"SpanAttributes";o[13]!==g||o[14]!==I?(l=g(I,"error.message"),o[13]=g,o[14]=I,o[15]=l):l=o[15];let L=`${l}`;o[16]!==L?(i={valueExpression:L,alias:"error.message"},o[16]=L,o[17]=i):i=o[17];let M=c.eventAttributesExpression??"SpanAttributes";o[18]!==g||o[19]!==M?(d=g(M,"http.method"),o[18]=g,o[19]=M,o[20]=d):d=o[20];let D=`${d}`;o[21]!==D?(u={valueExpression:D,alias:"http.method"},o[21]=D,o[22]=u):u=o[22];let F=c.eventAttributesExpression??"SpanAttributes";o[23]!==g||o[24]!==F?(m=g(F,"http.status_code"),o[23]=g,o[24]=F,o[25]=m):m=o[25];let O=`${m}`;o[26]!==O?(h={valueExpression:O,alias:"http.status_code"},o[26]=O,o[27]=h):h=o[27];let P=c.eventAttributesExpression??"SpanAttributes";o[28]!==g||o[29]!==P?(p=g(P,"http.url"),o[28]=g,o[29]=P,o[30]=p):p=o[30];let W=`${p}`;o[31]!==W?(x={valueExpression:W,alias:"http.url"},o[31]=W,o[32]=x):x=o[32];let V=`toString(cityHash64(${c.traceIdExpression}, ${c.parentSpanIdExpression}, ${c.spanIdExpression}))`;o[33]!==V?(f={valueExpression:V,alias:"id"},o[33]=V,o[34]=f):f=o[34];let H=c.eventAttributesExpression??"SpanAttributes";o[35]!==g||o[36]!==H?(b=g(H,"location.href"),o[35]=g,o[36]=H,o[37]=b):b=o[37];let B=`${b}`;o[38]!==B?(y={valueExpression:B,alias:"location.href"},o[38]=B,o[39]=y):y=o[39],o[40]===Symbol.for("react.memo_cache_sentinel")?(v={valueExpression:"ScopeName",alias:"otel.library.name"},o[40]=v):v=o[40];let q=`${c.parentSpanIdExpression}`;o[41]!==q?(j={valueExpression:q,alias:"parent_span_id"},o[41]=q,o[42]=j):j=o[42];let X=`${c.statusCodeExpression}`;o[43]!==X?(_={valueExpression:X,alias:"severity_text"},o[43]=X,o[44]=_):_=o[44];let G=`${c.spanIdExpression}`;o[45]!==G?(S={valueExpression:G,alias:"span_id"},o[45]=G,o[46]=S):S=o[46];let K=`${c.spanNameExpression}`;o[47]!==K?(w={valueExpression:K,alias:"span_name"},o[47]=K,o[48]=w):w=o[48];let J=`${c.timestampValueExpression}`;o[49]!==J?(E={valueExpression:J,alias:"timestamp"},o[49]=J,o[50]=E):E=o[50];let Z=`${c.traceIdExpression}`;o[51]!==Z?(C={valueExpression:Z,alias:"trace_id"},o[51]=Z,o[52]=C):C=o[52],o[53]===Symbol.for("react.memo_cache_sentinel")?(k={valueExpression:"CAST('span', 'String')",alias:"type"},o[53]=k):k=o[53],o[54]!==a||o[55]!==i||o[56]!==u||o[57]!==h||o[58]!==x||o[59]!==f||o[60]!==y||o[61]!==j||o[62]!==_||o[63]!==S||o[64]!==w||o[65]!==E||o[66]!==C||o[67]!==r||o[68]!==n?(N=[r,n,a,i,u,h,x,f,y,v,j,_,S,w,E,C,k],o[54]=a,o[55]=i,o[56]=u,o[57]=h,o[58]=x,o[59]=f,o[60]=y,o[61]=j,o[62]=_,o[63]=S,o[64]=w,o[65]=E,o[66]=C,o[67]=r,o[68]=n,o[69]=N):N=o[69],t=N}let f=t,b=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:>299 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[70]!==b?(r={type:"lucene",condition:b},o[70]=b,o[71]=r):r=o[71];let y=r;t:{let e;if(!g){s=void 0;break t}let t=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:* 
      OR ${c.eventAttributesExpression}.component:"console" 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[72]!==t?(e={type:"lucene",condition:t},o[72]=t,o[73]=e):e=o[73],s=e}let v=s;r:{let e,t,r,s;if(!g||!f||!v){a=void 0;break r}o[74]!==p||o[75]!==h?(e=[h,p],o[74]=p,o[75]=h,o[76]=e):e=o[76];let n=`${c.timestampValueExpression} ASC`;o[77]===Symbol.for("react.memo_cache_sentinel")?(t={limit:4e3,offset:0},o[77]=t):t=o[77];let l="highlighted"===x?y:v;o[78]!==l?(r=[l],o[78]=l,o[79]=r):r=o[79],o[80]!==f||o[81]!==r||o[82]!==e||o[83]!==n||o[84]!==c.connection||o[85]!==c.from||o[86]!==c.implicitColumnExpression||o[87]!==c.timestampValueExpression||o[88]!==u||o[89]!==m?(s={select:f,from:c.from,dateRange:e,whereLanguage:m,where:u,timestampValueExpression:c.timestampValueExpression,implicitColumnExpression:c.implicitColumnExpression,connection:c.connection,orderBy:n,limit:t,filters:r},o[80]=f,o[81]=r,o[82]=e,o[83]=n,o[84]=c.connection,o[85]=c.from,o[86]=c.implicitColumnExpression,o[87]=c.timestampValueExpression,o[88]=u,o[89]=m,o[90]=s):s=o[90],a=s}let j=a;s:{let e;if(!g){l=void 0;break s}o[91]!==f?(e=f.reduce(eE,{}),o[91]=f,o[92]=e):e=o[92],l=e}let _=l;return o[93]!==_||o[94]!==j?(i={eventsConfig:j,aliasMap:_},o[93]=_,o[94]=j,o[95]=i):i=o[95],i}(q),[t$,tR]=(0,a.useState)(!1);eK[38]!==tf||eK[39]!==tb?(X=()=>{1==tf?tb(2):2==tf?tb(4):4==tf?tb(8):8==tf&&tb(1)},eK[38]=tf,eK[39]=tb,eK[40]=X):X=eK[40];let tz=X,tI=tk[0].getTime(),tL=tk[1].getTime();eK[41]===Symbol.for("react.memo_cache_sentinel")?(K=()=>{ti(ek)},eK[41]=K):K=eK[41];let tM=K;eK[42]!==tr?.ts||eK[43]!==tI||eK[44]!==ta?(J=()=>{ta({ts:Math.max((tr?.ts??tI)-15e3,tI),setBy:"skip-backward"})},eK[42]=tr?.ts,eK[43]=tI,eK[44]=ta,eK[45]=J):J=eK[45],tr?.ts;let tD=J;eK[46]!==tr?.ts||eK[47]!==tL||eK[48]!==tI||eK[49]!==ta?(Z=()=>{ta({ts:Math.min((tr?.ts??tI)+15e3,tL),setBy:"skip-forward"})},eK[46]=tr?.ts,eK[47]=tL,eK[48]=tI,eK[49]=ta,eK[50]=Z):Z=eK[50],tr?.ts;let tF=Z;eK[51]!==tm?(Y={values:{where:tm}},eK[51]=tm,eK[52]=Y):Y=eK[52];let{control:tO,handleSubmit:tP}=(0,u.mN)(Y);eK[53]!==tu?(U=e=>{tu(e.where)},eK[53]=tu,eK[54]=U):U=eK[54];let tW=U;eK[55]!==eU?(Q=e=>{eU(!0),e6(e.where),e8(e.aliasWith)},eK[55]=eU,eK[56]=Q):Q=eK[56];let tV=Q;eK[57]!==ta?(ee=e=>{ta({ts:e,setBy:"timeline"})},eK[57]=ta,eK[58]=ee):ee=eK[58];let tH=ee;eK[59]!==tr?.setBy||eK[60]!==tr?.ts||eK[61]!==ta?(er=e=>{(tr?.setBy!=="player"||tr?.ts!==e)&&ta({ts:e,setBy:"player"})},eK[59]=tr?.setBy,eK[60]=tr?.ts,eK[61]=ta,eK[62]=er):er=eK[62];let tB=er;eK[63]!==e7||eK[64]!==e5||eK[65]!==eU||eK[66]!==eJ?(es=null!=e5&&eJ&&(0,s.jsx)(h.Z,{children:(0,s.jsx)(k.A,{source:eJ,rowId:e5,aliasWith:e7,onClose:()=>{eU(!1),e6(void 0)}})}),eK[63]=e7,eK[64]=e5,eK[65]=eU,eK[66]=eJ,eK[67]=es):es=eK[67],eK[68]!==t$?(en=i()(B().eventList,{"d-none":t$}),eK[68]=t$,eK[69]=en):en=eK[69],eK[70]===Symbol.for("react.memo_cache_sentinel")?(ea={zIndex:100,width:"100%"},eK[70]=ea):ea=eK[70],eK[71]!==tP||eK[72]!==tW?(el=tP(tW),eK[71]=tP,eK[72]=tW,eK[73]=el):el=eK[73],eK[74]!==tO||eK[75]!==tP||eK[76]!==tW||eK[77]!==eJ||eK[78]!==e4?(ei="sql"===e4?(0,s.jsx)(N.Z,{tableConnection:(0,m.VO)(eJ),control:tO,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",language:"sql",size:"xs",enableHotkey:!0,onSubmit:tP(tW)}):(0,s.jsx)(ec.A,{tableConnection:(0,m.VO)(eJ),control:tO,name:"where",language:"lucene",size:"xs",placeholder:"Search your events w/ Lucene ex. column:foo",enableHotkey:!0,onSubmit:tP(tW)}),eK[74]=tO,eK[75]=tP,eK[76]=tW,eK[77]=eJ,eK[78]=e4,eK[79]=ei):ei=eK[79],eK[80]!==el||eK[81]!==ei?(eo=(0,s.jsx)("form",{style:ea,onSubmit:el,children:ei}),eK[80]=el,eK[81]=ei,eK[82]=eo):eo=eK[82],eK[83]===Symbol.for("react.memo_cache_sentinel")?(ed=[{value:"highlighted",label:"Highlighted"},{value:"events",label:"All Events"}],eK[83]=ed):ed=eK[83],eK[84]===Symbol.for("react.memo_cache_sentinel")?(eu=e=>tp(e),eK[84]=eu):eu=eK[84],eK[85]!==th?(em=(0,s.jsx)(p.I,{flex:1,size:"xs",data:ed,value:th,onChange:eu}),eK[85]=th,eK[86]=em):em=eK[86];let tq=tj?"filled":"subtle";eK[87]!==tj||eK[88]!==t_?(eh=()=>t_(!tj),eK[87]=tj,eK[88]=t_,eK[89]=eh):eh=eK[89],eK[90]===Symbol.for("react.memo_cache_sentinel")?(ep=(0,s.jsx)(v.A,{size:18}),eK[90]=ep):ep=eK[90],eK[91]!==tq||eK[92]!==eh?(ex=(0,s.jsx)(x.m,{label:"Sync with player position",color:"gray",children:(0,s.jsx)(g.M,{size:"md",color:"gray",variant:tq,onClick:eh,children:ep})}),eK[91]=tq,eK[92]=eh,eK[93]=ex):ex=eK[93],eK[94]!==em||eK[95]!==ex?(eg=(0,s.jsxs)(f.Y,{gap:6,children:[em,ex]}),eK[94]=em,eK[95]=ex,eK[96]=eg):eg=eK[96],eK[97]!==eo||eK[98]!==eg?(ef=(0,s.jsxs)("div",{className:B().eventListHeader,children:[eo,eg]}),eK[97]=eo,eK[98]=eg,eK[99]=ef):ef=eK[99],eK[100]!==tT||eK[101]!==tA||eK[102]!==tj||eK[103]!==tr||eK[104]!==tI||eK[105]!==tV||eK[106]!==tH||eK[107]!==tx?(eb=tA&&tT&&(0,s.jsx)(eS,{eventsFollowPlayerPosition:tj,aliasMap:tT,queriedConfig:tA,onClick:tV,focus:tr,onTimeClick:tH,minTs:tI,showRelativeTime:tx}),eK[100]=tT,eK[101]=tA,eK[102]=tj,eK[103]=tr,eK[104]=tI,eK[105]=tV,eK[106]=tH,eK[107]=tx,eK[108]=eb):eb=eK[108],eK[109]!==en||eK[110]!==ef||eK[111]!==eb?(ey=(0,s.jsxs)("div",{className:en,children:[ef,eb]}),eK[109]=en,eK[110]=ef,eK[111]=eb,eK[112]=ey):ey=eK[112],eK[113]!==e1||eK[114]!==tr||eK[115]!==tN||eK[116]!==t$||eK[117]!==tf||eK[118]!==tl||eK[119]!==eQ||eK[120]!==eY||eK[121]!==eZ||eK[122]!==tB||eK[123]!==ty||eK[124]!==e0?(ev=tN&&(0,s.jsx)(G,{playerState:tl,setPlayerState:ti,focus:tr,setPlayerTime:tB,config:{serviceName:eY.serviceName,sourceId:eZ.id,sessionId:eQ,dateRange:[e0,e1]},playerSpeed:tf,skipInactive:ty,setPlayerStartTimestamp:tw,setPlayerEndTimestamp:tC,setPlayerFullWidth:tR,playerFullWidth:t$,resizeKey:`${t$}`,getSessionSourceFieldExpression:tN}),eK[113]=e1,eK[114]=tr,eK[115]=tN,eK[116]=t$,eK[117]=tf,eK[118]=tl,eK[119]=eQ,eK[120]=eY,eK[121]=eZ,eK[122]=tB,eK[123]=ty,eK[124]=e0,eK[125]=ev):ev=eK[125],eK[126]!==tA||eK[127]!==tr||eK[128]!==tk||eK[129]!==tl||eK[130]!==ta?(ej=tA&&(0,s.jsx)(ew,{playerState:tl,setPlayerState:ti,focus:tr,setFocus:ta,playbackRange:tk,queriedConfig:tA}),eK[126]=tA,eK[127]=tr,eK[128]=tk,eK[129]=tl,eK[130]=ta,eK[131]=ej):ej=eK[131],eK[132]!==ej?(e_=(0,s.jsx)("div",{className:B().playerPlaybar,children:ej}),eK[132]=ej,eK[133]=e_):e_=eK[133],eK[134]!==tg||eK[135]!==tx?(eC=()=>tg(!tx),eK[134]=tg,eK[135]=tx,eK[136]=eC):eC=eK[136],eK[137]!==tr?.ts||eK[138]!==tL||eK[139]!==tI||eK[140]!==tx?(eN=tx?(0,s.jsxs)(s.Fragment,{children:[(0,V.ax)((tr?.ts??0)-tI),(0,s.jsxs)("span",{className:"fw-normal ms-2",children:[" / ",(0,V.ax)(tL-tI)]})]}):(0,s.jsx)(et.H,{value:tr?.ts||tI,format:"time"}),eK[137]=tr?.ts,eK[138]=tL,eK[139]=tI,eK[140]=tx,eK[141]=eN):eN=eK[141],eK[142]!==eC||eK[143]!==eN?(eA=(0,s.jsx)("div",{className:B().playerTimestamp,children:(0,s.jsx)(x.m,{label:"Toggle relative time",color:"gray",children:(0,s.jsx)(b.$,{variant:"subtle",color:"gray",onClick:eC,size:"compact-xs",children:eN})})}),eK[142]=eC,eK[143]=eN,eK[144]=eA):eA=eK[144];let tX=(tr?.ts||0)<=tI;eK[145]===Symbol.for("react.memo_cache_sentinel")?(eT=(0,s.jsx)(j.A,{size:18}),eK[145]=eT):eT=eK[145],eK[146]!==tD||eK[147]!==tX?(e$=(0,s.jsx)(x.m,{label:"Go 15 seconds back",color:"gray",children:(0,s.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tD,disabled:tX,children:eT})}),eK[146]=tD,eK[147]=tX,eK[148]=e$):e$=eK[148];let tG="playing"===tl?"Pause":"Play";eK[149]!==tl?(eR=(0,s.jsx)(g.M,{variant:"secondary",size:"lg",radius:"xl",onClick:tM,children:"paused"===tl?(0,s.jsx)(_.A,{size:20}):(0,s.jsx)(S.A,{size:20})}),eK[149]=tl,eK[150]=eR):eR=eK[150],eK[151]!==tG||eK[152]!==eR?(ez=(0,s.jsx)(x.m,{label:tG,color:"gray",children:eR}),eK[151]=tG,eK[152]=eR,eK[153]=ez):ez=eK[153];let tK=(tr?.ts||0)>=tL;return eK[154]===Symbol.for("react.memo_cache_sentinel")?(eI=(0,s.jsx)(w.A,{size:18}),eK[154]=eI):eI=eK[154],eK[155]!==tF||eK[156]!==tK?(eL=(0,s.jsx)(x.m,{label:"Skip 15 seconds",color:"gray",children:(0,s.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tF,disabled:tK,children:eI})}),eK[155]=tF,eK[156]=tK,eK[157]=eL):eL=eK[157],eK[158]!==e$||eK[159]!==ez||eK[160]!==eL?(eM=(0,s.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[e$,ez,eL]}),eK[158]=e$,eK[159]=ez,eK[160]=eL,eK[161]=eM):eM=eK[161],eK[162]!==ty?(eD=ty?(0,s.jsx)(E.A,{size:18,className:"pe-1"}):(0,s.jsx)(C.A,{size:18,className:"pe-1"}),eK[162]=ty,eK[163]=eD):eD=eK[163],eK[164]!==tv||eK[165]!==ty?(eF=()=>tv(!ty),eK[164]=tv,eK[165]=ty,eK[166]=eF):eF=eK[166],eK[167]===Symbol.for("react.memo_cache_sentinel")?(eO=(0,s.jsx)(y.c,{orientation:"vertical",ml:"sm"}),eK[167]=eO):eO=eK[167],eK[168]!==eD||eK[169]!==eF?(eP=(0,s.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eD,onClick:eF,children:["Skip Idle",eO]}),eK[168]=eD,eK[169]=eF,eK[170]=eP):eP=eK[170],eK[171]!==tf?(eW=(0,s.jsxs)("span",{className:"fw-bold pe-1",children:[tf,"x"]}),eK[171]=tf,eK[172]=eW):eW=eK[172],eK[173]===Symbol.for("react.memo_cache_sentinel")?(eV=(0,s.jsx)(y.c,{orientation:"vertical",ml:"sm"}),eK[173]=eV):eV=eK[173],eK[174]!==tz||eK[175]!==eW?(eH=(0,s.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eW,onClick:tz,children:["Speed",eV]}),eK[174]=tz,eK[175]=eW,eK[176]=eH):eH=eK[176],eK[177]!==eP||eK[178]!==eH?(eB=(0,s.jsxs)(f.Y,{align:"center",justify:"flex-end",gap:"xs",children:[eP,eH]}),eK[177]=eP,eK[178]=eH,eK[179]=eB):eB=eK[179],eK[180]!==eA||eK[181]!==eM||eK[182]!==eB?(eq=(0,s.jsxs)("div",{className:B().playerToolbar,children:[eA,eM,eB]}),eK[180]=eA,eK[181]=eM,eK[182]=eB,eK[183]=eq):eq=eK[183],eK[184]!==ev||eK[185]!==e_||eK[186]!==eq?(eX=(0,s.jsxs)("div",{className:B().player,children:[ev,e_,eq]}),eK[184]=ev,eK[185]=e_,eK[186]=eq,eK[187]=eX):eX=eK[187],eK[188]!==es||eK[189]!==ey||eK[190]!==eX?(eG=(0,s.jsxs)("div",{className:B().wrapper,children:[es,ey,eX]}),eK[188]=es,eK[189]=ey,eK[190]=eX,eK[191]=eG):eG=eK[191],eG}function ek(e){return"playing"===e?"paused":"playing"}},58541:(e,t,r)=>{"use strict";r.d(t,{g:()=>C});var s=r(6029),n=r(55729),a=r(11335),l=r(1909),i=r(59589),o=r(29135),c=r(82641),d=r(92495),u=r(34834),m=r(43517),h=r(18341),p=r(3635),x=r(59029),g=r(39603),f=r(25062),b=r(60665),y=r(32963),v=r(95352),j=r(6876),_=r(92917);let S=["{{title}}","{{body}}","{{link}}","{{state}}","{{startTime}}","{{endTime}}","{{eventId}}"],w=S.join(" | "),E=()=>e=>""===e.state.doc.toString().trim()?[]:(0,i.cp)()(e);function C({webhook:e,onClose:t,onSuccess:r}){let C=j.Ay.useSaveWebhook(),k=j.Ay.useUpdateWebhook(),N=j.Ay.useTestWebhook(),A=null!=e,T=(0,l.mN)({defaultValues:{service:e?.service||c.x.Slack,name:e?.name||"",url:e?.url||"",description:e?.description||"",body:e?.body||"",headers:e?.headers?JSON.stringify(e.headers,null,2):""}});(0,n.useEffect)(()=>{e&&T.reset({service:e.service,name:e.name,url:e.url,description:e.description,body:e.body,headers:e.headers?JSON.stringify(e.headers,null,2):""},{})},[e,T]);let $=async e=>{let t,{service:r,url:s,body:n,headers:l}=e;if(l&&l.trim())try{t=JSON.parse(l)}catch(t){let e=t instanceof Error?t.message:"Invalid JSON format";b.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let i=n;n||(r===c.x.Generic?i=`{"text": "${w}"}`:r===c.x.IncidentIO&&(i=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));try{await N.mutateAsync({service:r,url:s,body:i,headers:t}),b.$e.show({color:"green",message:"Test webhook sent successfully"})}catch(t){console.error(t);let e="Failed to send test webhook. Please check your webhook configuration.";if(t instanceof a.H)try{let r=await t.response.json();r.message&&(e=r.message)}catch(e){console.error("Failed to parse error response:",e)}b.$e.show({message:e,color:"red",autoClose:5e3})}},R=async s=>{let{service:n,name:l,url:i,description:o,body:d,headers:u}=s;try{let s;if(u&&u.trim())try{s=JSON.parse(u)}catch(t){let e=t instanceof Error?t.message:"Invalid JSON format";b.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let a=d;d||(n===c.x.Generic?a=`{"text": "${w}"}`:n===c.x.IncidentIO&&(a=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));let m={service:n,name:l,url:i,description:o||"",body:a,headers:s},h=A?await k.mutateAsync({id:e._id,...m}):await C.mutateAsync(m);b.$e.show({color:"green",message:`Webhook ${A?"updated":"created"} successfully`}),r(h.data?._id),t()}catch(t){console.error(t);let e="Something went wrong. Please contact HyperDX team.";if(t instanceof a.H)try{let r=await t.response.json();if(r.error?.issues&&Array.isArray(r.error.issues)){let t=r.error.issues.map(e=>{let t=e.path.join(".");return`${t}: ${e.message}`}).join(", ");e=`Validation error: ${t}`}else e=r.message?r.message:JSON.stringify(r)}catch(e){console.error("Failed to parse error response:",e)}b.$e.show({message:e,color:"red",autoClose:5e3})}},z=(0,l.FH)({control:T.control,name:"service"});return(0,s.jsx)("form",{onSubmit:T.handleSubmit(R),children:(0,s.jsxs)(u.B,{mt:"sm",children:[(0,s.jsx)(m.E,{children:A?"Edit Webhook":"Create Webhook"}),(0,s.jsx)(h.s.Group,{label:"Service Type",required:!0,value:z,onChange:e=>T.setValue("service",e),children:(0,s.jsxs)(p.Y,{mt:"xs",children:[(0,s.jsx)(h.s,{value:c.x.Slack,label:"Slack"}),(0,s.jsx)(h.s,{value:c.x.IncidentIO,label:"incident.io"}),(0,s.jsx)(h.s,{value:c.x.Generic,label:"Generic"})]})}),(0,s.jsx)(x.k,{label:"Webhook Name",placeholder:"Post to #dev-alerts",required:!0,error:T.formState.errors.name?.message,...T.register("name",{required:!0})}),(0,s.jsx)(x.k,{label:"Webhook URL",placeholder:z===c.x.Slack?"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX":z===c.x.IncidentIO?"https://api.incident.io/v2/alert_events/http/ZZZZZZZZ?token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX":"https://example.com/webhook",type:"url",required:!0,error:T.formState.errors.url?.message,...T.register("url",{required:!0,validate:(e,t)=>t.service===c.x.Slack?(0,d.AB)(e)||"URL must be valid and have a slack.com domain":(0,_.AY)(e)||"URL must be valid"})}),(0,s.jsx)(x.k,{label:"Webhook Description (optional)",placeholder:"To be used for dev alerts",error:T.formState.errors.description?.message,...T.register("description")}),z===c.x.Generic&&[(0,s.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Headers (optional)"},"1"),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(l.xI,{name:"headers",control:T.control,render:({field:e})=>(0,s.jsx)(v.Ay,{height:"100px",extensions:[(0,i.Pq)(),(0,o.bu)(E()),(0,v.qf)(`{
	"Authorization": "Bearer token",
	"X-Custom-Header": "value"
}`)],theme:"dark",value:e.value,onChange:t=>e.onChange(t)})})},"2"),(0,s.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Body (optional)"},"3"),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(l.xI,{name:"body",control:T.control,render:({field:e})=>(0,s.jsx)(v.Ay,{height:"100px",extensions:[(0,i.Pq)(),(0,o.bu)(E()),(0,v.qf)(`{
	"text": "${w}"
}`)],theme:"dark",value:e.value,onChange:t=>e.onChange(t)})})},"4"),(0,s.jsxs)(g.F,{icon:(0,s.jsx)(y.A,{size:16}),className:"mb-4",color:"gray",children:[(0,s.jsx)("span",{children:"Currently the body supports the following message template variables:"}),(0,s.jsx)("br",{}),(0,s.jsx)("span",{children:S.map((e,t)=>(0,s.jsxs)("span",{children:[(0,s.jsx)("code",{children:e}),t<S.length-1&&", "]},t))})]},"5")],(0,s.jsxs)(p.Y,{justify:"space-between",children:[(0,s.jsxs)(p.Y,{children:[(0,s.jsx)(f.$,{variant:"primary",type:"submit",loading:C.isPending||k.isPending,children:A?"Update Webhook":"Add Webhook"}),(0,s.jsx)(f.$,{variant:"secondary",onClick:T.handleSubmit($),loading:N.isPending,type:"button",children:"Test Webhook"})]}),(0,s.jsx)(f.$,{variant:"secondary",onClick:t,type:"reset",children:"Cancel"})]})]})})}},59017:(e,t,r)=>{"use strict";r.d(t,{V:()=>d});var s=r(6029),n=r(75155),a=r(55729),l=r(23935),i=r(78253),o=r(50374),c=r(94937);function d(e){let t,r,d,m,h,p=(0,n.c)(21),{attributes:x}=e;p[0]!==x?(t=void 0===x?[]:x,p[0]=x,p[1]=t):t=p[1];let g=t,[f,b]=(0,a.useState)(!1),{onPropertyAddClick:y,generateSearchUrl:v,source:j}=(0,a.useContext)(o.D);p[2]!==g||p[3]!==f?(r=g.sort(u).slice(0,f?g.length:12),p[2]=g,p[3]=f,p[4]=r):r=p[4];let _=r,S=g.length-_.length;if(p[5]!==j?.id||p[6]!==v||p[7]!==y||p[8]!==_){let e;p[10]!==j?.id||p[11]!==v||p[12]!==y?(e=e=>{let{displayedKey:t,value:r,sql:n,lucene:a,source:l}=e;return(0,s.jsx)(c.A,{displayedKey:t,name:a||n,nameLanguage:a?"lucene":"sql",value:r,...y&&j?.id===l.id?{onPropertyAddClick:y,sqlExpression:n}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:v?(e,t)=>v({where:e||"",whereLanguage:t??"lucene",source:l}):void 0},`${t}-${r}-${l.id}`)},p[10]=j?.id,p[11]=v,p[12]=y,p[13]=e):e=p[13],d=_.map(e),p[5]=j?.id,p[6]=v,p[7]=y,p[8]=_,p[9]=d}else d=p[9];return p[14]!==g.length||p[15]!==S||p[16]!==f?(m=g.length>12&&(0,s.jsx)(l.M,{size:"xs",onClick:()=>b(!f),children:f?"Show Less":`Show ${S} More...`}),p[14]=g.length,p[15]=S,p[16]=f,p[17]=m):m=p[17],p[18]!==d||p[19]!==m?(h=(0,s.jsxs)(i.s,{wrap:"wrap",gap:"2px",mb:"md",align:"baseline",children:[d,m]}),p[18]=d,p[19]=m,p[20]=h):h=p[20],h}function u(e,t){return e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value)}},61629:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(6029),n=r(75155),a=r(43517),l=r(92917);function i(e){let t,r,i,o=(0,n.c)(7);o[0]!==e?({level:t,...r}=e,o[0]=e,o[1]=t,o[2]=r):(t=o[1],r=o[2]);let c=(0,l.lO)(t),d="error"===c?"red":"warn"===c?"var(--color-chart-warning)":"gray";return o[3]!==t||o[4]!==r||o[5]!==d?(i=(0,s.jsx)(a.E,{component:"span",size:"xs",c:d,...r,children:t}),o[3]=t,o[4]=r,o[5]=d,o[6]=i):i=o[6],i}},64441:(e,t,r)=>{"use strict";r.d(t,{A:()=>w});var s=r(6029),n=r(75155),a=r(55729),l=r(63085),i=r(8737),o=r(43517),c=r(60481),d=r(20294),u=r(78253),m=r(22623),h=r(25062),p=r(15216),x=r(16232),g=r(7565),f=r(57820),b=r(92917),y=r(59017),v=r(50374),j=r(61629);let _=e=>"getTime"in e&&!isNaN(e.getTime());function S(e){let t,r,a,u=(0,n.c)(9),{breadcrumbPath:m,onNavigateToLevel:h}=e;u[0]!==h?(t=e=>{h?.(e)},u[0]=h,u[1]=t):t=u[1];let p=t;e:{let e;if(0===m.length){let e;u[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],u[2]=e):e=u[2],r=e;break e}if(u[3]!==m||u[4]!==p){let t;e=[],m.forEach((t,r)=>{let n,a=t.rowData?(n=(t.rowData.__hdx_body||"").trim()).length>200?`${n.substring(0,197)}...`:n:"";e.push((0,s.jsx)(l.m,{label:a,disabled:!a,position:"bottom",withArrow:!0,children:(0,s.jsx)(i.N,{onClick:()=>p(r),style:{textDecoration:"none"},children:(0,s.jsx)(o.E,{size:"sm",c:"blue",style:{cursor:"pointer"},children:0===r?"Original Event":t.label})})},`crumb-${r}`))}),u[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(o.E,{size:"sm",children:"Selected Event"},"current"),u[6]=t):t=u[6],e.push(t),u[3]=m,u[4]=p,u[5]=e}else e=u[5];r=e}let x=r;return 0===m.length?null:(u[7]!==x?(a=(0,s.jsx)(c.a,{mb:"sm",pb:"sm",className:"border-bottom border-dark",children:(0,s.jsx)(d.B,{separator:"›",separatorMargin:"xs",children:x})}),u[7]=x,u[8]=a):a=u[8],a)}function w(e){let t,r,l,i,d,w,C,k,N,A,T,$,R,z=(0,n.c)(41),{attributes:I,mainContent:L,mainContentHeader:M,date:D,severityText:F,breadcrumbPath:O,onBreadcrumbClick:P}=e;z[0]!==I?(t=void 0===I?[]:I,z[0]=I,z[1]=t):t=z[1];let W=t,V=void 0===L?"":L;z[2]!==O?(r=void 0===O?[]:O,z[2]=O,z[3]=r):r=z[3];let H=r,[B,q]=a.useState(!1),{generateSearchUrl:X}=(0,a.useContext)(v.D),G=V.length>2e3;z[4]!==B||z[5]!==V?(l=B?V:V?.slice(0,2e3),z[4]=B,z[5]=V,z[6]=l):l=z[6];let K=l,[J,Z]=(0,a.useState)(null),[Y,U]=(0,a.useState)(0);z[7]!==J?(i=()=>{if(!J)return;let e=()=>{U(J.offsetHeight)};e();let t=new ResizeObserver(e);return t.observe(J),()=>{t.disconnect()}},d=[J],z[7]=J,z[8]=i,z[9]=d):(i=z[8],d=z[9]),(0,a.useEffect)(i,d);let{userPreferences:Q,setUserPreference:ee}=(0,f.HW)(),{expandSidebarHeader:et}=Q;return z[10]!==H||z[11]!==P?(w=(0,s.jsx)(S,{breadcrumbPath:H,onNavigateToLevel:P}),z[10]=H,z[11]=P,z[12]=w):w=z[12],z[13]!==F?(C=F&&(0,s.jsx)(j.A,{level:F}),z[13]=F,z[14]=C):C=z[14],z[15]!==D||z[16]!==F?(k=F&&_(D)&&(0,s.jsx)(o.E,{size:"xs",mx:"xs",children:"\xb7"}),z[15]=D,z[16]=F,z[17]=k):k=z[17],z[18]!==D?(N=_(D)&&(0,s.jsxs)(o.E,{size:"xs",children:[(0,s.jsx)(g.H,{value:D})," \xb7"," ",(0,b.Jk)(D)," ago"]}),z[18]=D,z[19]=N):N=z[19],z[20]!==C||z[21]!==k||z[22]!==N?(A=(0,s.jsxs)(u.s,{children:[C,k,N]}),z[20]=C,z[21]=k,z[22]=N,z[23]=A):A=z[23],z[24]!==B||z[25]!==et||z[26]!==Y||z[27]!==G||z[28]!==V||z[29]!==K||z[30]!==M||z[31]!==ee||z[32]!==Q?(T=V?(0,s.jsxs)(m.t,{p:"xs",mt:"sm",style:{maxHeight:et?void 0:120,overflow:"auto",overflowWrap:"break-word"},ref:Z,children:[(0,s.jsxs)(u.s,{justify:"space-between",mb:"xs",children:[(0,s.jsx)(o.E,{size:"xs",children:M}),Y>=120&&(0,s.jsx)(h.$,{size:"compact-xs",variant:"subtle",onClick:()=>ee({...Q,expandSidebarHeader:!et}),children:et?(0,s.jsx)(p.A,{size:14}):(0,s.jsx)(x.A,{size:14})})]}),K,G&&(0,s.jsx)(h.$,{size:"compact-xs",variant:"subtle",color:"gray",onClick:()=>{q(E)},children:B?"Collapse":"Expand"})]}):(0,s.jsx)(m.t,{p:"xs",mt:"sm",children:(0,s.jsx)(o.E,{size:"xs",mb:"xs",children:"[Empty]"})}),z[24]=B,z[25]=et,z[26]=Y,z[27]=G,z[28]=V,z[29]=K,z[30]=M,z[31]=ee,z[32]=Q,z[33]=T):T=z[33],z[34]!==W?($=(0,s.jsx)(c.a,{mt:"xs",children:(0,s.jsx)(y.V,{attributes:W})}),z[34]=W,z[35]=$):$=z[35],z[36]!==A||z[37]!==T||z[38]!==$||z[39]!==w?(R=(0,s.jsxs)(s.Fragment,{children:[w,A,T,$]}),z[36]=A,z[37]=T,z[38]=$,z[39]=w,z[40]=R):R=z[40],R}function E(e){return!e}},64467:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var s=r(6029),n=r(75155),a=r(55729),l=r(1909),i=r(66692),o=r(95516),c=r(15215),d=r(36417),u=r(22623),m=r(43517),h=r(63085),p=r(78253),x=r(67747),g=r(95352),f=r(78550),b=r(92917),y=r(52154);let v="150px",j={lineNumbers:!1,foldGutter:!1,highlightActiveLine:!1,highlightActiveLineGutter:!1};function _({tableConnection:e,tableConnections:t,filterField:r,onChange:n,placeholder:l,onLanguageChange:_,language:S,onSubmit:w,error:E,value:C,size:k,label:N,disableKeywordAutocomplete:A,enableHotkey:T,tooltipText:$,additionalSuggestions:R=[],queryHistoryType:z,parentRef:I,allowMultiline:L=!1}){let{colorScheme:M}=(0,d.C)(),{data:D}=(0,f.Sh)((e?[e]:t)??[]),F=(0,a.useMemo)(()=>r?D?.filter(r):D,[D,r]),[O,P]=(0,b.mk)(z),W=(0,a.useCallback)((e,t,r,s)=>{e.dispatch({changes:{from:t,to:r,insert:s}}),(0,o.N)(e),P(s),w&&w()},[w,P]),V=(0,a.useMemo)(()=>()=>({from:0,options:O.map(e=>({label:e,section:"Search History",type:"keyword",apply:(t,r,s,n)=>{W(t,s,n,e)}}))}),[O,W]),[H,B]=(0,a.useState)(!1),q=(0,a.useRef)(null),X=(0,a.useRef)(new g.xx),G=(0,a.useCallback)(e=>{let t=e.state.doc.toString(),r=[...F?.map(e=>e.path.length>1?`${e.path[0]}['${e.path[1]}']`:e.path[0])??[],...R],s=(0,c.ll)({dialect:c.fy.define({keywords:r.join(" ")+(A?"":" AND OR NOT IN LIKE ILIKE BETWEEN ASC DESC intDiv intDivOrZero isNaN moduloOrZero abs empty notEmpty length arrayConcat has hasAll hasAny indexOf arrayCount countEqual arrayUnion arrayIntersect arrayMap arrayFilter arraySort flatten arrayCompact arrayMin arrayMax arraySum arrayAvg if multiIf floor ceiling truncate round timestamp toTimeZone toYear toMonth toWeek toDayOfYear toDayOfMonth toDayOfWeek toUnixTimestamp toTime lower upper substring trim dictGet dictGetOrDefault dictGetOrNull")})}),n=(0,o.yU)({compareCompletions:(e,t)=>0,override:[V]});e.dispatch({effects:X.current.reconfigure(t.length>0?s:n)})},[F,R,V,A]);(0,a.useEffect)(()=>{null!=q.current&&null!=q.current.view&&G(q.current.view)},[G]),(0,i.vC)("/",()=>{T&&q.current?.view?.focus()},{preventDefault:!0},[T]);let K=(0,a.useMemo)(()=>null==I?[]:[(0,g.vX)({parent:I,tooltipSpace:e=>{let t=e.dom.getBoundingClientRect(),r=I.getBoundingClientRect();return{...t,right:t.right??0,left:r.left??t.left,top:r.top??t.top,bottom:r.bottom??t.bottom}}})],[I]),J=(0,a.useMemo)(()=>[...K,g.Lz.baseTheme({"&.cm-editor.cm-focused":{outline:"0px solid transparent"},"&.cm-editor":{background:"transparent !important"},".cm-editor-multiline &.cm-editor":{maxHeight:v},"& .cm-tooltip-autocomplete":{whiteSpace:"nowrap",wordWrap:"break-word",maxWidth:"100%",backgroundColor:"var(--color-bg-field) !important",border:"1px solid var(--color-border) !important",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",padding:"4px"},"& .cm-tooltip-autocomplete > ul":{fontFamily:"inherit",maxHeight:"300px"},"& .cm-tooltip-autocomplete > ul > li":{padding:"4px 8px",borderRadius:"4px",cursor:"pointer",color:"var(--color-text)"},"& .cm-tooltip-autocomplete > ul > li[aria-selected]":{backgroundColor:"var(--color-bg-field-highlighted) !important",color:"var(--color-text-muted) !important"},"& .cm-tooltip-autocomplete .cm-completionLabel":{color:"var(--color-text)"},"& .cm-tooltip-autocomplete .cm-completionDetail":{color:"var(--color-text-muted)",fontStyle:"normal",marginLeft:"8px"},"& .cm-tooltip-autocomplete .cm-completionInfo":{backgroundColor:"var(--color-bg-field)",border:"1px solid var(--color-border)",borderRadius:"4px",padding:"8px",color:"var(--color-text)"},"& .cm-completionIcon":{width:"16px",marginRight:"6px",opacity:.7},"& .cm-scroller":{overflowX:"hidden"},".cm-editor-multiline & .cm-scroller":{maxHeight:v,overflowY:"auto"}}),...L?[g.Lz.lineWrapping]:[],X.current.of((0,c.ll)({upperCaseKeywords:!0})),g.Nb.highest(g.w4.of([{key:"Enter",run:e=>null!=w&&(z&&q?.current?.view&&P(q?.current?.view.state.doc.toString()),w(),!0)},...L?[{key:"Shift-Enter",run:()=>!1}]:[]])),g.w4.of([{key:"Tab",run:o.$w}])],[L,w,z,P,K]),Z=(0,a.useCallback)(()=>{q?.current?.view&&(0,o.rB)(q.current.view)},[]);return(0,s.jsxs)(u.t,{flex:"auto",shadow:"none",style:{backgroundColor:"var(--color-bg-field)",border:`1px solid ${E?"var(--color-bg-danger)":"var(--color-border)"}`,display:"flex",alignItems:"center",minHeight:"xs"===k?30:36},ps:"4px",children:[null!=N&&(0,s.jsx)(m.E,{mx:"4px",size:"xs",fw:"bold",style:{whiteSpace:"nowrap"},component:"div",children:(0,s.jsx)(h.m,{label:$,disabled:!$,children:(0,s.jsxs)(p.s,{align:"center",gap:2,children:[N,$&&(0,s.jsx)(x.A,{size:20})]})})}),(0,s.jsx)("div",{style:{minWidth:10,width:"100%"},className:L?"cm-editor-multiline":"",children:(0,s.jsx)(g.Ay,{indentWithTab:!1,ref:q,value:C,onChange:n,theme:"dark"===M?"dark":"light",onFocus:(0,a.useCallback)(()=>{B(!0)},[B]),onBlur:(0,a.useCallback)(()=>{B(!1)},[B]),extensions:J,onCreateEditor:G,basicSetup:j,placeholder:l,onClick:Z})}),null!=_&&null!=S&&(0,s.jsx)(y.A,{showHotkey:T&&H,language:S,onLanguageChange:_})]})}let S=(0,a.memo)(function(e){let t,r,a,i,o,c,d=(0,n.c)(15);d[0]!==e?({placeholder:a,filterField:r,additionalSuggestions:t,queryHistoryType:o,...i}=e,d[0]=e,d[1]=t,d[2]=r,d[3]=a,d[4]=i,d[5]=o):(t=d[1],r=d[2],a=d[3],i=d[4],o=d[5]);let{field:u,fieldState:m}=(0,l.as)(i),h=u.value||i.defaultValue,p="";"string"==typeof h?p=h:void 0!==h&&console.error("SQLInlineEditor: value is not a string",h);let x=m.error?.message;return d[6]!==t||d[7]!==u.onChange||d[8]!==r||d[9]!==a||d[10]!==i||d[11]!==o||d[12]!==p||d[13]!==x?(c=(0,s.jsx)(_,{filterField:r,onChange:u.onChange,placeholder:a,value:p,error:x,additionalSuggestions:t,queryHistoryType:o,...i}),d[6]=t,d[7]=u.onChange,d[8]=r,d[9]=a,d[10]=i,d[11]=o,d[12]=p,d[13]=x,d[14]=c):c=d[14],c})},65081:(e,t,r)=>{"use strict";r.d(t,{z:()=>D});var s=r(6029),n=r(75155),a=r(55729),l=r(81278),i=r.n(l),o=r(67549),c=r(83595),d=r(60449),u=r.n(d),m=r(8737),h=r(56513),p=r(3635),x=r(96061),g=r(25062),f=r(60481),b=r(22623),y=r(43517),v=r(39785),j=r(60665),_=r(24602),S=r(95316),w=r(90515),E=r(9385),C=r(41279),k=r(9841),N=r(6723),A=r(23195),T=r(45172),$=r(26355),R=r(92917),z=r(50374);function I(e,t){let r=e.slice(t.length);if(0===r.length)return null;let s=t[t.length-1],n=r.map(e=>`'${e}'`).join(", ");return`JSONExtractString(${s}, ${n})`}let L=(0,c.tG)("hdx_json_viewer_options",{normallyExpanded:!0,lineWrap:!0,tabulate:!0});function M(){let e,t,r,a,l,i,c,d,u,x,g,f,b,y=(0,n.c)(30),[v,j]=(0,o.fp)(L);return y[0]!==v||y[1]!==j?(e=()=>j({...v,lineWrap:!v.lineWrap}),y[0]=v,y[1]=j,y[2]=e):e=y[2],y[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(_.A,{size:14}),y[3]=t):t=y[3],y[4]!==e?(r=(0,s.jsx)(m.N,{color:"gray",onClick:e,children:t}),y[4]=e,y[5]=r):r=y[5],y[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(h.W.Target,{children:(0,s.jsx)(m.N,{children:(0,s.jsx)(S.A,{size:14})})}),y[6]=a):a=y[6],y[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,s.jsx)(h.W.Label,{lh:1,py:6,children:"Properties view options"}),y[7]=l):l=y[7],y[8]!==v||y[9]!==j?(i=()=>j({...v,normallyExpanded:!v.normallyExpanded}),y[8]=v,y[9]=j,y[10]=i):i=y[10],y[11]!==v.normallyExpanded?(c=v.normallyExpanded?(0,s.jsx)(w.A,{size:14,className:"ps-2"}):null,y[11]=v.normallyExpanded,y[12]=c):c=y[12],y[13]!==i||y[14]!==c?(d=(0,s.jsx)(h.W.Item,{onClick:i,lh:"1",py:8,rightSection:c,children:"Expand all properties"}),y[13]=i,y[14]=c,y[15]=d):d=y[15],y[16]!==v.tabulate?(u=v.tabulate?(0,s.jsx)(w.A,{size:14,className:"ps-2"}):null,y[16]=v.tabulate,y[17]=u):u=y[17],y[18]!==v||y[19]!==j?(x=()=>j({...v,tabulate:!v.tabulate}),y[18]=v,y[19]=j,y[20]=x):x=y[20],y[21]!==u||y[22]!==x?(g=(0,s.jsx)(h.W.Item,{lh:"1",py:8,rightSection:u,onClick:x,children:"Tabulate"}),y[21]=u,y[22]=x,y[23]=g):g=y[23],y[24]!==g||y[25]!==d?(f=(0,s.jsxs)(h.W,{width:240,withinPortal:!1,children:[a,(0,s.jsxs)(h.W.Dropdown,{children:[l,d,g]})]}),y[24]=g,y[25]=d,y[26]=f):f=y[26],y[27]!==f||y[28]!==r?(b=(0,s.jsxs)(p.Y,{children:[r,f]}),y[27]=f,y[28]=r,y[29]=b):b=y[29],b}function D(e){let t,r,l,c,d,m,h,_,S,w,D,O,P=(0,n.c)(30),{data:W,jsonColumns:V}=e;P[0]!==V?(t=void 0===V?[]:V,P[0]=V,P[1]=t):t=P[1];let H=t,{onPropertyAddClick:B,generateSearchUrl:q,generateChartUrl:X,displayedColumns:G,toggleColumn:K}=(0,a.useContext)(z.D),[J,Z]=(0,a.useState)(""),[Y]=(0,v.o)(J,100);e:{let e;if(!W){r=null;break e}P[2]!==W||P[3]!==Y?(e=function e(t,r){if("object"!=typeof t||null===t||""===r)return t;let s={};for(let[n,a]of Object.entries(t))if(null!==a&&((n.toLowerCase().includes(r.toLowerCase())||"string"==typeof a&&a.toLowerCase().includes(r.toLowerCase()))&&(s[n]=a),"object"==typeof a)){let t=e(a,r);Object.keys(t).length>0&&(s[n]=t)}return s}(Object.fromEntries(Object.entries(W).filter(F)),Y),P[2]=W,P[3]=Y,P[4]=e):e=P[4],r=e}let U=r;P[5]!==G||P[6]!==X||P[7]!==q||P[8]!==H||P[9]!==B||P[10]!==U||P[11]!==K?(l=e=>{let{keyPath:t,value:r,isInParsedJson:n,parsedJsonRootPath:a}=e,l=[],o=(0,R.uc)(t,H),c=t.length>0&&H?.includes(t[0]);if(null!=B&&"string"==typeof r&&r&&"Timestamp"!=o&&"TimestampTime"!=o&&l.push({key:"add-to-search",label:(0,s.jsxs)(p.Y,{gap:2,children:[(0,s.jsx)(E.A,{size:14}),"Add to Filters"]}),title:"Add to Filters",onClick:()=>{let e;if(n&&a){let r=I(t,a);e=r||(c?`toString(${o})`:o)}else e=c?`toString(${o})`:o;B(e,r),j.$e.show({color:"green",message:`Added "${o} = ${r}" to filters`})}}),q&&"object"!=typeof r&&l.push({key:"search",label:(0,s.jsxs)(p.Y,{gap:2,children:[(0,s.jsx)(C.A,{size:14}),"Search"]}),title:"Search for this value only",onClick:()=>{let e=o;if(n&&a){let r=I(t,a);r&&(e=r)}let s=`${e} = ${"string"==typeof r?`'${r}'`:r}`;("Timestamp"==e||"TimestampTime"==e)&&(s=`${e} = parseDateTime64BestEffort('${r}', 9)`),i().push(q({where:s,whereLanguage:"sql"}))}}),X&&"number"==typeof r&&l.push({key:"chart",label:(0,s.jsx)(k.A,{size:14}),title:"Chart",onClick:()=>{let e=o;if(n&&a){let r=I(t,a);r&&(e=r)}i().push(X({aggFn:"avg",field:e,groupBy:[]}))}}),K&&"object"!=typeof r){let e=o;if(n&&a){let r=I(t,a);r&&(e=r)}let r=G?.includes(e);l.push({key:"toggle-column",label:r?(0,s.jsxs)(p.Y,{gap:2,children:[(0,s.jsx)(N.A,{size:14}),"Column"]}):(0,s.jsxs)(p.Y,{gap:2,children:[(0,s.jsx)(A.A,{size:14}),"Column"]}),title:r?`Remove ${o} column from results table`:`Add ${o} column to results table`,onClick:()=>{K(e),j.$e.show({color:"green",message:`Column "${o}" ${r?"removed from":"added to"} results table`})}})}return"object"==typeof r?l.push({key:"copy-object",label:"Copy Object",onClick:()=>{let e;e=n&&a?r:0===t.length?U:u()(U,t),window.navigator.clipboard.writeText(JSON.stringify(e,null,2)),j.$e.show({color:"green",message:"Copied object to clipboard"})}}):l.push({key:"copy-value",label:(0,s.jsxs)(p.Y,{gap:2,children:[(0,s.jsx)(T.A,{size:14}),"Copy Value"]}),onClick:()=>{window.navigator.clipboard.writeText("string"==typeof r?r:JSON.stringify(r,null,2)),j.$e.show({color:"green",message:"Value copied to clipboard"})}}),l},P[5]=G,P[6]=X,P[7]=q,P[8]=H,P[9]=B,P[10]=U,P[11]=K,P[12]=l):l=P[12];let Q=l,ee=(0,o.md)(L);return P[13]===Symbol.for("react.memo_cache_sentinel")?(c=e=>Z(e.currentTarget.value),d=(0,s.jsx)(C.A,{size:16}),P[13]=c,P[14]=d):(c=P[13],d=P[14]),P[15]!==J?(m=(0,s.jsx)(x.p,{size:"xs",w:"100%",maw:"400px",placeholder:"Search properties by key or value",value:J,onChange:c,leftSection:d}),h=J&&(0,s.jsx)(g.$,{variant:"secondary",size:"xs",onClick:()=>Z(""),children:"Clear"}),P[15]=J,P[16]=m,P[17]=h):(m=P[16],h=P[17]),P[18]===Symbol.for("react.memo_cache_sentinel")?(S=(0,s.jsx)("div",{className:"flex-grow-1"}),_=(0,s.jsx)(M,{}),P[18]=_,P[19]=S):(_=P[18],S=P[19]),P[20]!==m||P[21]!==h?(w=(0,s.jsx)(f.a,{py:"xs",children:(0,s.jsxs)(p.Y,{gap:"xs",children:[m,h,S,_]})}),P[20]=m,P[21]=h,P[22]=w):w=P[22],P[23]!==Q||P[24]!==ee||P[25]!==U?(D=(0,s.jsx)(b.t,{bg:"transparent",mt:"sm",children:null!=U?(0,s.jsx)($.A,{data:U,getLineActions:Q,...ee}):(0,s.jsx)(y.E,{children:"No data"})}),P[23]=Q,P[24]=ee,P[25]=U,P[26]=D):D=P[26],P[27]!==w||P[28]!==D?(O=(0,s.jsxs)("div",{className:"flex-grow-1 overflow-auto",children:[w,D]}),P[27]=w,P[28]=D,P[29]=O):O=P[29],O}function F(e){return!e[0].startsWith("__hdx_")}},65723:e=>{e.exports={container:"HyperJson_container__GNwuL",withTabulate:"HyperJson_withTabulate__MzU_L",key:"HyperJson_key__AQ6QF",withLineWrap:"HyperJson_withLineWrap__gfDDi",valueContainer:"HyperJson_valueContainer__Ui_5y",string:"HyperJson_string__vkc96",treeNode:"HyperJson_treeNode__bDzsg",line:"HyperJson_line__n3Ltu",lineMenu:"HyperJson_lineMenu__Sg84e",expanded:"HyperJson_expanded__gHv9Z",object:"HyperJson_object__ChLzl",array:"HyperJson_array__rJBNC",expandable:"HyperJson_expandable__futZ8",lineMenuBtn:"HyperJson_lineMenuBtn__QKgME",clickable:"HyperJson_clickable__UNRbd",value:"HyperJson_value__aSXTw",hoverable:"HyperJson_hoverable__oWIY9",hoverContent:"HyperJson_hoverContent__2Ir2x",jsonBtn:"HyperJson_jsonBtn__T1ObP",keyContainer:"HyperJson_keyContainer___KqED",number:"HyperJson_number__VFmbX",boolean:"HyperJson_boolean__KkQsQ",expandMoreProps:"HyperJson_expandMoreProps__uHkwZ"}},66773:e=>{e.exports={panel:"LogSidePanel_panel__JgveL",panelDragBar:"LogSidePanel_panelDragBar__sFi62",panelHeader:"LogSidePanel_panelHeader__Fl4jA",panelDetails:"LogSidePanel_panelDetails__wGBLr",panelContent:"LogSidePanel_panelContent__Olcws",severityChip:"LogSidePanel_severityChip__hIK7I",loadingState:"LogSidePanel_loadingState__b5y0C",panelSectionWrapper:"LogSidePanel_panelSectionWrapper__gOBKh",panelSectionWrapperTitle:"LogSidePanel_panelSectionWrapperTitle__eBMsG",kbdShortcuts:"LogSidePanel_kbdShortcuts__ogLDt",kbd:"LogSidePanel_kbd__gmxFq",kbdDivider:"LogSidePanel_kbdDivider____Gi4",lineContext:"LogSidePanel_lineContext__rCVjx",lineContextCurrentLine:"LogSidePanel_lineContextCurrentLine__K3t4J",lineContextLineNo:"LogSidePanel_lineContextLineNo__LuYmr",emptyMessage:"LogSidePanel_emptyMessage__6fbwp",traceTimelineLabel:"LogSidePanel_traceTimelineLabel___WCaD",traceTimelineLabelHighlighted:"LogSidePanel_traceTimelineLabelHighlighted__elopt",stacktraceRowInteractive:"LogSidePanel_stacktraceRowInteractive__i18zL"}},67272:(e,t,r)=>{"use strict";r.d(t,{F9:()=>d});var s=r(6029),n=r(75155),a=r(55729),l=r(1909),i=r(76089),o=r(38206);function c(e){let t,r,a,l=(0,n.c)(7),{value:c,onChange:d,disabled:u}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{value:"auto",label:"Auto Granularity"},{value:i.Z7.ThirtySecond,label:"30 Seconds Granularity"},{value:i.Z7.OneMinute,label:"1 Minute Granularity"},{value:i.Z7.FiveMinute,label:"5 Minutes Granularity"},{value:i.Z7.TenMinute,label:"10 Minutes Granularity"},{value:i.Z7.FifteenMinute,label:"15 Minutes Granularity"},{value:i.Z7.ThirtyMinute,label:"30 Minutes Granularity"},{value:i.Z7.OneHour,label:"1 Hour Granularity"},{value:i.Z7.TwelveHour,label:"12 Hours Granularity"},{value:i.Z7.OneDay,label:"1 Day Granularity"},{value:i.Z7.SevenDay,label:"7 Day Granularity"}],l[0]=t):t=l[0],l[1]!==d?(r=e=>d(e??void 0),l[1]=d,l[2]=r):r=l[2],l[3]!==u||l[4]!==r||l[5]!==c?(a=(0,s.jsx)(o.l,{disabled:u,"data-testid":"granularity-picker",data:t,onChange:r,value:c}),l[3]=u,l[4]=r,l[5]=c,l[6]=a):a=l[6],a}let d=(0,a.memo)(function(e){let t,r=(0,n.c)(3),{field:a}=(0,l.as)(e);return r[0]!==a.onChange||r[1]!==a.value?(t=(0,s.jsx)(c,{value:a.value,onChange:a.onChange}),r[0]=a.onChange,r[1]=a.value,r[2]=t):t=r[2],t})},70628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return m}});let s=r(14761)._(r(55729)),n=r(93522),a=[],l=[],i=!1;function o(e){let t=e(),r={loading:!0,loaded:null,error:null};return r.promise=t.then(e=>(r.loading=!1,r.loaded=e,e)).catch(e=>{throw r.loading=!1,r.error=e,e}),r}class c{constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}}function d(e){return function(e,t){let r=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),a=null;function o(){if(!a){let t=new c(e,r);a={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return a.promise()}if(!i){let e=r.webpack&&1?r.webpack():r.modules;e&&l.push(t=>{for(let r of e)if(t.includes(r))return o()})}function d(e,t){let l;o(),(l=s.default.useContext(n.LoadableContext))&&Array.isArray(r.modules)&&r.modules.forEach(e=>{l(e)});let i=s.default.useSyncExternalStore(a.subscribe,a.getCurrentValue,a.getCurrentValue);return s.default.useImperativeHandle(t,()=>({retry:a.retry}),[]),s.default.useMemo(()=>{var t;return i.loading||i.error?s.default.createElement(r.loading,{isLoading:i.loading,pastDelay:i.pastDelay,timedOut:i.timedOut,error:i.error,retry:a.retry}):i.loaded?s.default.createElement((t=i.loaded)&&t.default?t.default:t,e):null},[e,i])}return d.preload=()=>o(),d.displayName="LoadableComponent",s.default.forwardRef(d)}(o,e)}function u(e,t){let r=[];for(;e.length;){let s=e.pop();r.push(s(t))}return Promise.all(r).then(()=>{if(e.length)return u(e,t)})}d.preloadAll=()=>new Promise((e,t)=>{u(a).then(e,t)}),d.preloadReady=(e=[])=>new Promise(t=>{let r=()=>(i=!0,t());u(l,e).then(r,r)}),window.__NEXT_PRELOADREADY=d.preloadReady;let m=d},70727:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u,C2:()=>d,ZO:()=>c});var s=r(55729),n=r(6033),a=r.n(n),l=r(80519),i=r.n(l),o=r(35467);let c={ID:"__hyperdx_id",ALIAS_WITH:"__hyperdx_alias_with"};function d(e){return e?Object.entries(e).filter(([,e])=>null!=e&&""!==e.trim()).map(([e,t])=>({name:e,sql:{sql:t,params:{}},isSubquery:!1})):[]}function u({meta:e,aliasMap:t}){let r=(0,s.useMemo)(()=>new Map(e?.map(e=>{let r=null!=t?t[e.name]??e.name:e.name;return[e.name,{...e,valueExpr:r,jsType:(0,o.rj)(e.type)}]})),[e,t]),n=(0,s.useMemo)(()=>d(t),[t]);return(0,s.useCallback)(e=>{let{[c.ID]:t,[c.ALIAS_WITH]:s,...l}=e;return{where:Object.entries(l).map(([e,t])=>{let s=r.get(e),n=s?.type,l=s?.jsType,c=s?.valueExpr;if(null==n)throw Error(`Column type not found for ${e}, ${JSON.stringify(r)}`);if(null==c)throw Error(`valueExpr not found for ${e}, ${JSON.stringify(r)}`);switch(l){case o.A2.Date:return i().format("?=parseDateTime64BestEffort(?, 9)",[i().raw(c),t]);case o.A2.Array:case o.A2.Map:return i().format("?=JSONExtract(?, ?)",[i().raw(c),t,n]);case o.A2.Tuple:return i().format("toJSONString(?)=?",[i().raw(c),t]);case o.A2.JSON:return i().format("lower(hex(MD5(toString(?))))=?",[i().raw(c),a()(t).toString()]);case o.A2.Dynamic:if(null==t||"null"===t)return i().format("isNull(??)",[c]);return(t.length>1e3||e.length>1e3)&&console.warn("Search value/object key too large."),i().format("toJSONString(?) = coalesce(toJSONString(JSONExtract(?, 'Dynamic')), toJSONString(?))",[i().raw(c),t,t]);default:if(null==t)return i().format("isNull(?)",[i().raw(c)]);if(t.length>512)return i().format("lower(hex(MD5(leftUTF8(?, 1000))))=?",[i().raw(c),a()(t.substring(0,1e3)).toString()]);return i().format("?=?",[i().raw(c),t])}}).join(" AND "),aliasWith:n}},[r,n])}},71024:(e,t,r)=>{e.exports=r(34955)},71781:(e,t,r)=>{"use strict";r.d(t,{M7:()=>d,aJ:()=>m,mh:()=>h,t4:()=>u});var s=r(6029),n=r(75155);r(55729);var a=r(1909),l=r(59029),i=r(96061),o=r(45544),c=r(47268);function d(e){let t,r,i,o,c,d,u=(0,n.c)(12);return u[0]!==e?({name:r,control:t,rules:o,...i}=e,u[0]=e,u[1]=t,u[2]=r,u[3]=i,u[4]=o):(t=u[1],r=u[2],i=u[3],o=u[4]),u[5]!==i?(c=e=>{let{field:t,fieldState:r}=e,{error:n}=r;return(0,s.jsx)(l.k,{...i,...t,error:n?.message})},u[5]=i,u[6]=c):c=u[6],u[7]!==t||u[8]!==r||u[9]!==o||u[10]!==c?(d=(0,s.jsx)(a.xI,{name:r,control:t,rules:o,render:c}),u[7]=t,u[8]=r,u[9]=o,u[10]=c,u[11]=d):d=u[11],d}function u(e){let t,r,l,o,c,d,u=(0,n.c)(12);return u[0]!==e?({name:r,control:t,rules:o,...l}=e,u[0]=e,u[1]=t,u[2]=r,u[3]=l,u[4]=o):(t=u[1],r=u[2],l=u[3],o=u[4]),u[5]!==l?(c=e=>{let{field:t,fieldState:r}=e,{error:n}=r;return(0,s.jsx)(i.p,{...l,...t,error:n?.message})},u[5]=l,u[6]=c):c=u[6],u[7]!==t||u[8]!==r||u[9]!==o||u[10]!==c?(d=(0,s.jsx)(a.xI,{name:r,control:t,rules:o,render:c}),u[7]=t,u[8]=r,u[9]=o,u[10]=c,u[11]=d):d=u[11],d}function m(e){let t,r,l,i,c,d,u=(0,n.c)(12);return u[0]!==e?({name:r,control:t,rules:i,...l}=e,u[0]=e,u[1]=t,u[2]=r,u[3]=l,u[4]=i):(t=u[1],r=u[2],l=u[3],i=u[4]),u[5]!==l?(c=e=>{let{field:t,fieldState:r}=e,{error:n}=r;return(0,s.jsx)(o.y,{...l,...t,error:n?.message})},u[5]=l,u[6]=c):c=u[6],u[7]!==t||u[8]!==r||u[9]!==i||u[10]!==c?(d=(0,s.jsx)(a.xI,{name:r,control:t,rules:i,render:c}),u[7]=t,u[8]=r,u[9]=i,u[10]=c,u[11]=d):d=u[11],d}function h(e){let t,r,l,i,o,d,u=(0,n.c)(12);return u[0]!==e?({name:r,control:t,rules:i,...l}=e,u[0]=e,u[1]=t,u[2]=r,u[3]=l,u[4]=i):(t=u[1],r=u[2],l=u[3],i=u[4]),u[5]!==l?(o=e=>{let{field:t,fieldState:r}=e,{value:n,...a}=t,{error:i}=r;return(0,s.jsx)(c.S,{...l,...a,checked:n,error:i?.message})},u[5]=l,u[6]=o):o=u[6],u[7]!==t||u[8]!==r||u[9]!==i||u[10]!==o?(d=(0,s.jsx)(a.xI,{name:r,control:t,rules:i,render:o}),u[7]=t,u[8]=r,u[9]=i,u[10]=o,u[11]=d):d=u[11],d}},72075:(e,t,r)=>{"use strict";r.d(t,{L:()=>x,X:()=>p});var s=r(6029),n=r(75155);r(55729);var a=r(75828),l=r.n(a),i=r(58333),o=r(23474),c=r(79220),d=r(39696),u=r(68593),m=r(34011),h=r.n(m);let p=({data:e=[],columns:t,emptyMessage:r,hideHeader:n,borderless:a,density:i="normal",interactive:o,tableMeta:m})=>{let p=(0,c.N4)({data:e,columns:t,meta:m,getCoreRowModel:(0,d.HT)()});return e.length?(0,s.jsx)("div",{className:l()(h().tableWrapper,{[h().tableBorderless]:a,[h().tableDensityZero]:"zero"===i,[h().tableDensityCompact]:"compact"===i,[h().tableDensityComfortable]:"comfortable"===i,[h().tableInteractive]:o}),children:(0,s.jsxs)("table",{children:[!n&&(0,s.jsx)("thead",{children:p.getHeaderGroups().map(e=>(0,s.jsx)("tr",{children:e.headers.map(e=>(0,s.jsx)("th",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)("tbody",{children:p.getRowModel().rows.map(e=>(0,s.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,s.jsx)("td",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}):(0,s.jsx)("div",{className:h().emptyMessage,children:r})},x=e=>{let t,r,a,l,c=(0,n.c)(12),{onClick:d,title:u,label:m,biIcon:p}=e;return c[0]!==m?(t=m&&(0,s.jsx)("span",{children:m}),c[0]=m,c[1]=t):t=c[1],c[2]!==p?(r="chevron-up"===p&&(0,s.jsx)(i.A,{size:14}),c[2]=p,c[3]=r):r=c[3],c[4]!==p?(a="chevron-down"===p&&(0,s.jsx)(o.A,{size:14}),c[4]=p,c[5]=a):a=c[5],c[6]!==d||c[7]!==t||c[8]!==r||c[9]!==a||c[10]!==u?(l=(0,s.jsxs)("button",{className:h().tableCellButton,title:u,onClick:d,children:[t,r,a]}),c[6]=d,c[7]=t,c[8]=r,c[9]=a,c[10]=u,c[11]=l):l=c[11],l}},74620:e=>{e.exports={tableWrapper:"LogTable_tableWrapper__1X2n1",muted:"LogTable_muted__aIZSq",table:"LogTable_table__l63_F",tableHead:"LogTable_tableHead__sTgaD",tableRow:"LogTable_tableRow__7BXPl",tableRow__selected:"LogTable_tableRow__selected__DoaNL",rowButtons:"LogTable_rowButtons__XTh2c",rowContentButton:"LogTable_rowContentButton__fjkQI",expandButton:"LogTable_expandButton__nKsH0",expandedRowContent:"LogTable_expandedRowContent__Ps6mn",expanded:"LogTable_expanded___w9XA",expandButtonSeparator:"LogTable_expandButtonSeparator__lYPgm",isWrapped:"LogTable_isWrapped__ksgah",isTruncated:"LogTable_isTruncated__jXz22",iconActionButton:"LogTable_iconActionButton__hO7Fo",copied:"LogTable_copied__wZME1",fieldTextContainer:"LogTable_fieldTextContainer__4Dj7Q",fieldText:"LogTable_fieldText__zVjaq",chart:"LogTable_chart__8kFaD",truncated:"LogTable_truncated__Hv6oN",wrapped:"LogTable_wrapped__Dz8eR",fieldTextPopover:"LogTable_fieldTextPopover__dygEB"}},75359:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var s,n=r(6029),a=r(75155),l=r(55729),i=r(41038),o=r(81973),c=r(96958),d=r(92917),u=r(76539),m=r(37901),h=r(26837),p=r(50374),x=r(46061);function g(e){let t,r,s,c,d,m,h,g,f,y=(0,a.c)(47),{sourceId:v,config:j,onError:_,onScroll:S,context:w,onExpandedRowsChange:E,denoiseResults:C,collapseAllRows:k,isLive:N,enabled:A,isNestedPanel:T,breadcrumbPath:$,onSidebarOpen:R,onSortingChange:z,initialSortBy:I,variant:L}=e;y[0]!==v?(t={id:v},y[0]=v,y[1]=t):t=y[1];let{data:M}=(0,o.Fo)(t),[D,F]=(0,i.ZA)("rowWhere"),[O,P]=(0,i.ZA)("rowSource");y[2]===Symbol.for("react.memo_cache_sentinel")?(r=[],y[2]=r):r=y[2];let[W,V]=(0,l.useState)(r),{setContextRowId:H,setContextRowSource:B}=(0,u.g)();y[3]!==R||y[4]!==F||y[5]!==P||y[6]!==v?(s=e=>{F(e.where),V(e.aliasWith),P(v),R?.(e.where)},y[3]=R,y[4]=F,y[5]=P,y[6]=v,y[7]=s):s=y[7];let q=s;y[8]!==T||y[9]!==H||y[10]!==B||y[11]!==F||y[12]!==P?(c=()=>{F(null),P(null),T||(H(null),B(null))},y[8]=T,y[9]=H,y[10]=B,y[11]=F,y[12]=P,y[13]=c):c=y[13];let X=c;y[14]!==M?(d=e=>M?(0,n.jsx)(b,{source:M,rowId:e.id,aliasWith:e.aliasWith}):(0,n.jsx)("div",{className:"p-3 text-muted",children:"Loading..."}),y[14]=M,y[15]=d):d=y[15];let G=d;y[16]!==w?(m=w??{},y[16]=w,y[17]=m):m=y[17],y[18]!==W||y[19]!==$||y[20]!==T||y[21]!==X||y[22]!==D||y[23]!==O||y[24]!==M||y[25]!==v?(h=M&&(O===v||!O)&&(0,n.jsx)(p.A,{source:M,rowId:D??void 0,aliasWith:W,isNestedPanel:T,breadcrumbPath:$,onClose:X}),y[18]=W,y[19]=$,y[20]=T,y[21]=X,y[22]=D,y[23]=O,y[24]=M,y[25]=v,y[26]=h):h=y[26];let K=D??void 0,J=N??!0;return y[27]!==k||y[28]!==j||y[29]!==C||y[30]!==A||y[31]!==I||y[32]!==_||y[33]!==E||y[34]!==q||y[35]!==S||y[36]!==z||y[37]!==G||y[38]!==v||y[39]!==K||y[40]!==J||y[41]!==L?(g=(0,n.jsx)(x.rD,{config:j,sourceId:v,onRowDetailsClick:q,highlightedLineId:K,enabled:A,isLive:J,queryKeyPrefix:"dbSqlRowTable",onSortingChange:z,denoiseResults:C,initialSortBy:I,renderRowDetails:G,onScroll:S,onError:_,onExpandedRowsChange:E,collapseAllRows:k,variant:L}),y[27]=k,y[28]=j,y[29]=C,y[30]=A,y[31]=I,y[32]=_,y[33]=E,y[34]=q,y[35]=S,y[36]=z,y[37]=G,y[38]=v,y[39]=K,y[40]=J,y[41]=L,y[42]=g):g=y[42],y[43]!==g||y[44]!==m||y[45]!==h?(f=(0,n.jsxs)(p.D.Provider,{value:m,children:[h,g]}),y[43]=g,y[44]=m,y[45]=h,y[46]=f):f=y[46],f}var f=((s=f||{}).Overview="overview",s.ColumnValues="columnValues",s);function b(e){let t,r,s,l,i,o,u=(0,a.c)(20),{source:p,rowId:x,aliasWith:g}=e,[f,b]=(0,d.Mj)("hdx-expanded-row-default-tab","columnValues");return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{text:"Overview",value:"overview"},{text:"Column Values",value:"columnValues"}],u[0]=t):t=u[0],u[1]!==f||u[2]!==b?(r=(0,n.jsx)("div",{className:"px-3 pt-2 position-relative",children:(0,n.jsx)(c.A,{className:"fs-8",items:t,activeItem:f,onClick:b})}),u[1]=f,u[2]=b,u[3]=r):r=u[3],u[4]!==f||u[5]!==g||u[6]!==x||u[7]!==p?(s="overview"===f&&(0,n.jsx)("div",{className:"inline-overview-panel",children:(0,n.jsx)(h.W,{source:p,rowId:x,aliasWith:g})}),u[4]=f,u[5]=g,u[6]=x,u[7]=p,u[8]=s):s=u[8],u[9]!==f||u[10]!==g||u[11]!==x||u[12]!==p?(l="columnValues"===f&&(0,n.jsx)(m.dD,{source:p,rowId:x,aliasWith:g}),u[9]=f,u[10]=g,u[11]=x,u[12]=p,u[13]=l):l=u[13],u[14]!==s||u[15]!==l?(i=(0,n.jsxs)("div",{children:[s,l]}),u[14]=s,u[15]=l,u[16]=i):i=u[16],u[17]!==r||u[18]!==i?(o=(0,n.jsxs)("div",{className:"position-relative",children:[r,i]}),u[17]=r,u[18]=i,u[19]=o):o=u[19],o}},76539:(e,t,r)=>{"use strict";r.d(t,{A:()=>k,g:()=>C});var s,n=r(6029),a=r(75155),l=r(55729),i=r(67264),o=r.n(i),c=r(41038),d=r(1909),u=r(3145),m=r(78253),h=r(3635),p=r(90124),x=r(43085),g=r(39785),f=r(64467),b=r(26814),y=r(43370),v=r(81973),j=r(92917),_=r(37901),S=r(50374),w=r(46061),E=((s=E||{}).All="all",s.Custom="custom",s.Host="host",s.Node="k8s.node.name",s.Pod="k8s.pod.name",s.Service="service",s);function C(e){let t,r,s,n=(0,a.c)(11),i=(0,c.ZA)("contextRowId",c.tU),o=(0,c.ZA)("contextRowSource",c.tU);n[0]!==i||n[1]!==o?(t={contextRowId:i,contextRowSource:o},n[0]=i,n[1]=o,n[2]=t):t=n[2];let d=t,u=(0,l.useState)(null),m=(0,l.useState)(null);n[3]!==u||n[4]!==m?(r={contextRowId:u,contextRowSource:m},n[3]=u,n[4]=m,n[5]=r):r=n[5];let h=r,p=e?h:d;return n[6]!==p.contextRowId[0]||n[7]!==p.contextRowId[1]||n[8]!==p.contextRowSource[0]||n[9]!==p.contextRowSource[1]?(s={contextRowId:p.contextRowId[0],contextRowSource:p.contextRowSource[0],setContextRowId:p.contextRowId[1],setContextRowSource:p.contextRowSource[1]},n[6]=p.contextRowId[0],n[7]=p.contextRowId[1],n[8]=p.contextRowSource[0],n[9]=p.contextRowSource[1],n[10]=s):s=n[10],s}function k(e){let t,r,s,i,c,E,k,N,A,T,$,R,z,I,L,M,D,F,O,P,W,V,H,B,q,X,G,K=(0,a.c)(97),{source:J,dbSqlRowTableConfig:Z,rowData:Y,rowId:U,breadcrumbPath:Q,onBreadcrumbClick:ee}=e;K[0]!==Q?(t=void 0===Q?[]:Q,K[0]=Q,K[1]=t):t=K[1];let et=t,er=Y[_.$_.TIMESTAMP];K[2]!==Z?(r=Z??{},K[2]=Z,K[3]=r):r=K[3];let{whereLanguage:es}=r,en=void 0===es?"lucene":es;K[4]===Symbol.for("react.memo_cache_sentinel")?(s=o()("30s"),K[4]=s):s=K[4];let[ea,el]=(0,l.useState)(s),[ei,eo]=(0,l.useState)("all"),ec=en??"lucene";K[5]!==ec?(i={defaultValues:{where:"",whereLanguage:ec}},K[5]=ec,K[6]=i):i=K[6];let{control:ed}=(0,d.mN)(i);K[7]!==ed?(c={control:ed,name:"where"},K[7]=ed,K[8]=c):c=K[8];let eu=(0,d.FH)(c),[em]=(0,g.o)(eu,1e3),{contextRowId:eh,contextRowSource:ep,setContextRowId:ex,setContextRowSource:eg}=C(et.length>0),ef=ep||"";K[9]!==ef?(E={id:ef},K[9]=ef,K[10]=E):E=K[10];let{data:eb}=(0,v.Fo)(E);K[11]===Symbol.for("react.memo_cache_sentinel")?(k=[],K[11]=k):k=K[11];let[ey,ev]=(0,l.useState)(k);K[12]!==ex||K[13]!==eg?(N=()=>{ex(null),eg(null)},K[12]=ex,K[13]=eg,K[14]=N):N=K[14];let ej=N,{setChildModalOpen:e_}=(0,l.useContext)(S.D);K[15]!==ex||K[16]!==eg||K[17]!==J.id?(A=e=>{ex(e.where),ev(e.aliasWith),eg(J.id)},K[15]=ex,K[16]=eg,K[17]=J.id,K[18]=A):A=K[18];let eS=A;K[19]!==er?(T=new Date(er),K[19]=er,K[20]=T):T=K[20];let ew=T,eE=ew.getTime()-ea/2;K[21]!==eE?($=new Date(eE),K[21]=eE,K[22]=$):$=K[22];let eC=ew.getTime()+ea/2;K[23]!==eC?(R=new Date(eC),K[23]=eC,K[24]=R):R=K[24],K[25]!==$||K[26]!==R?(z=[$,R],K[25]=$,K[26]=R,K[27]=z):z=K[27];let ek=z;K[28]!==Y.ResourceAttributes?(I=Y.ResourceAttributes??{},K[28]=Y.ResourceAttributes,K[29]=I):I=K[29];let{"k8s.node.name":eN,"k8s.pod.name":eA,"host.name":eT,"service.name":e$}=I;K[30]===Symbol.for("react.memo_cache_sentinel")?(L={field:"",value:""},K[30]=L):L=K[30];let eR=em||"";K[31]!==eR?(M={field:"",value:eR},K[31]=eR,K[32]=M):M=K[32],K[33]!==e$?(D={field:"service.name",value:e$},K[33]=e$,K[34]=D):D=K[34],K[35]!==eT?(F={field:"host.name",value:eT},K[35]=eT,K[36]=F):F=K[36],K[37]!==eA?(O={field:"k8s.pod.name",value:eA},K[37]=eA,K[38]=O):O=K[38],K[39]!==eN?(P={field:"k8s.node.name",value:eN},K[39]=eN,K[40]=P):P=K[40],K[41]!==M||K[42]!==D||K[43]!==F||K[44]!==O||K[45]!==P?(W={all:L,custom:M,service:D,host:F,"k8s.pod.name":O,"k8s.node.name":P},K[41]=M,K[42]=D,K[43]=F,K[44]=O,K[45]=P,K[46]=W):W=K[46];let ez=W;K[47]!==ez||K[48]!==en?(V=e=>{let t="sql"===en,r=ez[e];return"all"===e?r.value:"custom"===e?r.value.trim():(0,j.ji)("ResourceAttributes",r.field,r.value,t)},K[47]=ez,K[48]=en,K[49]=V):V=K[49];let eI=V;K[50]!==eT||K[51]!==eN||K[52]!==eA||K[53]!==e$?(H=function(){return[{label:"All",value:"all"},...e$?[{label:"Service",value:"service"}]:[],...eT?[{label:"Host",value:"host"}]:[],...eA?[{label:"Pod",value:"k8s.pod.name"}]:[],...eN?[{label:"Node",value:"k8s.node.name"}]:[],{label:"Custom",value:"custom"}]},K[50]=eT,K[51]=eN,K[52]=eA,K[53]=e$,K[54]=H):H=K[54];let eL=H;e:{let e,t,r;K[55]!==ei||K[56]!==eI?(e=eI(ei),K[55]=ei,K[56]=eI,K[57]=e):e=K[57];let s=e;if(!Z){let e,t,r=J.defaultTableSelectExpression||"";K[58]===Symbol.for("react.memo_cache_sentinel")?(e={limit:200},K[58]=e):e=K[58];let n=`${J.timestampValueExpression} DESC`;K[59]!==ek||K[60]!==en||K[61]!==J.connection||K[62]!==J.from||K[63]!==J.timestampValueExpression||K[64]!==r||K[65]!==n||K[66]!==s?(t={connection:J.connection,from:J.from,timestampValueExpression:J.timestampValueExpression,select:r,limit:e,orderBy:n,where:s,whereLanguage:en,dateRange:ek},K[59]=ek,K[60]=en,K[61]=J.connection,K[62]=J.from,K[63]=J.timestampValueExpression,K[64]=r,K[65]=n,K[66]=s,K[67]=t):t=K[67],B=t;break e}K[68]===Symbol.for("react.memo_cache_sentinel")?(t=[],K[68]=t):t=K[68],K[69]!==Z||K[70]!==ek||K[71]!==en||K[72]!==s?(r={...Z,where:s,whereLanguage:en,dateRange:ek,filters:t},K[69]=Z,K[70]=ek,K[71]=en,K[72]=s,K[73]=r):r=K[73],B=r}let eM=B;return K[74]!==ez||K[75]!==eM||K[76]!==ei||K[77]!==ed||K[78]!==eL||K[79]!==eS||K[80]!==en||K[81]!==ea||K[82]!==U||K[83]!==e_||K[84]!==J?(q=eM&&(0,n.jsxs)(m.s,{direction:"column",mih:"0px",style:{flexGrow:1},children:[(0,n.jsxs)(h.Y,{justify:"space-between",p:"sm",children:[(0,n.jsx)(p.I,{size:"xs",data:eL(),value:ei,onChange:e=>eo(e)}),"custom"===ei&&(0,n.jsx)(b.A,{name:"whereLanguage",control:ed,sqlInput:"lucene"===en?null:(0,n.jsx)(f.Z,{tableConnection:(0,u.VO)(J),control:ed,name:"where",placeholder:"SQL WHERE clause (ex. column = 'foo')",language:"sql",enableHotkey:!0,size:"sm"}),luceneInput:"sql"===en?null:(0,n.jsx)(y.A,{tableConnection:(0,u.VO)(J),control:ed,name:"where",language:"lucene",placeholder:"Lucene where clause (ex. column:value)",enableHotkey:!0,size:"sm"})}),(0,n.jsx)(p.I,{size:"xs",data:[{label:"100ms",value:o()("100ms").toString()},{label:"500ms",value:o()("500ms").toString()},{label:"1s",value:o()("1s").toString()},{label:"5s",value:o()("5s").toString()},{label:"30s",value:o()("30s").toString()},{label:"1m",value:o()("1m").toString()},{label:"5m",value:o()("5m").toString()},{label:"15m",value:o()("15m").toString()}],value:ea.toString(),onChange:e=>el(Number(e))})]}),(0,n.jsx)(h.Y,{p:"sm",children:(0,n.jsxs)("div",{children:["all"!==ei&&(0,n.jsxs)(x.E,{size:"md",variant:"default",children:[ei,":",ez[ei].value]}),(0,n.jsxs)(x.E,{size:"md",variant:"default",children:["Time range: \xb1",o()(ea/2)]})]})}),(0,n.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,n.jsx)(w.rD,{sourceId:J.id,highlightedLineId:U,showExpandButton:!1,isLive:!1,config:eM,queryKeyPrefix:"context",onRowDetailsClick:eS,onChildModalOpen:e_})})]}),K[74]=ez,K[75]=eM,K[76]=ei,K[77]=ed,K[78]=eL,K[79]=eS,K[80]=en,K[81]=ea,K[82]=U,K[83]=e_,K[84]=J,K[85]=q):q=K[85],K[86]!==et||K[87]!==ey||K[88]!==eh||K[89]!==eb||K[90]!==ej||K[91]!==ee||K[92]!==Y?(X=eh&&eb&&(0,n.jsx)(S.A,{source:eb,rowId:eh,aliasWith:ey,onClose:ej,isNestedPanel:!0,breadcrumbPath:[...et,{label:"Surrounding Context",rowData:Y}],onBreadcrumbClick:ee}),K[86]=et,K[87]=ey,K[88]=eh,K[89]=eb,K[90]=ej,K[91]=ee,K[92]=Y,K[93]=X):X=K[93],K[94]!==q||K[95]!==X?(G=(0,n.jsxs)(n.Fragment,{children:[q,X]}),K[94]=q,K[95]=X,K[96]=G):G=K[96],G}},78694:(e,t,r)=>{"use strict";r.d(t,{iV:()=>g,ir:()=>v,$K:()=>f,hF:()=>b,Qx:()=>y});var s=r(6029),n=r(75155),a=r(55729);r(82203);var l=r(75828),i=(r(63085),r(8468)),o=r(20158),c=r(70114),d=r(23474);r(38067),r(26355);r(94720),r(3635);var u=r(72075),m=r(68593);r(7565),r(94364);var h=r(92917),p=r(66773),x=r.n(p);let g=e=>{let t,r,l,i,o,u,m=(0,n.c)(15),{title:h,children:p,initiallyCollapsed:x}=e,[g,f]=a.useState(x??!1);return m[0]!==g?(t=()=>f(!g),r=g?(0,s.jsx)(c.A,{size:14,className:"me-2"}):(0,s.jsx)(d.A,{size:14,className:"me-2"}),m[0]=g,m[1]=t,m[2]=r):(t=m[1],r=m[2]),m[3]!==h?(l=(0,s.jsx)("div",{className:"fs-7",children:h}),m[3]=h,m[4]=l):l=m[4],m[5]!==t||m[6]!==r||m[7]!==l?(i=(0,s.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[r,l]}),m[5]=t,m[6]=r,m[7]=l,m[8]=i):i=m[8],m[9]!==p||m[10]!==g?(o=g?null:(0,s.jsx)("div",{className:"mb-4",children:p}),m[9]=p,m[10]=g,m[11]=o):o=m[11],m[12]!==i||m[13]!==o?(u=(0,s.jsxs)("div",{className:"my-3",children:[i,o]}),m[12]=i,m[13]=o,m[14]=u):u=m[14],u},f=e=>{let t,r,a=(0,n.c)(5),{children:l,title:i}=e;return a[0]!==i?(t=i&&(0,s.jsx)("div",{className:x().panelSectionWrapperTitle,children:i}),a[0]=i,a[1]=t):t=a[1],a[2]!==l||a[3]!==t?(r=(0,s.jsxs)("div",{className:x().panelSectionWrapper,children:[t,l]}),a[2]=l,a[3]=t,a[4]=r):r=a[4],r};m.k;let b=[{accessorKey:"0",header:"Header",size:260,cell:({row:e})=>(0,s.jsx)("div",{className:"text-truncate",title:e.original[0],children:e.original[0]})},{size:m.k,accessorKey:"1",header:"Value"}],y=[{accessorKey:"label",header:"Label",size:260,cell:({row:e})=>(0,s.jsx)("span",{children:e.original.label})},{size:m.k,accessorKey:"value",header:"Value",cell:({row:e})=>(0,s.jsx)("span",{className:e.original.className,children:e.original.value})}],v=()=>{let e,t,r,a,l,c=(0,n.c)(7),[d,u]=(0,h.Mj)("kbd-shortcuts-dismissed",!1);c[0]!==u?(e=()=>{u(!0)},c[0]=u,c[1]=e):e=c[1];let m=e;return d?null:(c[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(i.u,{className:"me-1",children:"←"}),r=(0,s.jsx)(i.u,{children:"→"}),c[2]=t,c[3]=r):(t=c[2],r=c[3]),c[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,s.jsxs)("div",{children:["Use ",t,r," arrow keys or ",(0,s.jsx)(i.u,{className:"me-1",children:"k"}),(0,s.jsx)(i.u,{children:"j"})," to move through events"]}),(0,s.jsx)("div",{className:x().kbdDivider}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.u,{children:"ESC"})," to close"]})]}),c[4]=a):a=c[4],c[5]!==m?(l=(0,s.jsx)("div",{className:x().kbdShortcuts,children:(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center ",children:[a,(0,s.jsx)(o.J,{"aria-label":"Hide",onClick:m})]})}),c[5]=m,c[6]=l):l=c[6],l)}},80925:(e,t,r)=>{"use strict";r.d(t,{S:()=>g,t:()=>h});var s=r(55729),n=r(67843),a=r(35467),l=r(67270),i=r(12482),o=r(92917),c=r(40147),d=r(78550),u=r(49672),m=r(81973);function h({traceSource:e,sessionSource:t,dateRange:r,where:s,whereLanguage:n},o){let{enabled:m=!0}=o||{},{getFieldExpression:h,isLoading:p}=(0,c.A)(e),{getFieldExpression:x,isLoading:g}=(0,c.A)(t),f=["teamId","teamName","userEmail","userName"],b="sessions",y=(0,u.fu)(),v=(0,d.Ge)();return(0,i.I)({queryKey:["sessions",e?.id,t?.id,r,s,n],queryFn:async()=>{if(!e||!t||!h||!x)return[];let i=h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId"),[o,c,d]=await Promise.all([(0,l.PV)({select:[{valueExpression:`${e.serviceNameExpression}`,alias:"serviceName"},{valueExpression:i,alias:"sessionId"},{alias:"maxTimestamp",valueExpression:`MAX(${e.timestampValueExpression})`},{alias:"minTimestamp",valueExpression:`MIN(${e.timestampValueExpression})`},{aggFn:"count",alias:"sessionCount",valueExpression:"*"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.eventAttributesExpression}.component:"user-interaction"`,valueExpression:"",alias:"interactionCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.statusCodeExpression}:error`,valueExpression:"",alias:"errorCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.spanNameExpression}:"record init"`,valueExpression:"",alias:"recordingCount"},...f.map(t=>({valueExpression:`MAX(${h(e.eventAttributesExpression??"SpanAttributes",t)})`,alias:t}))],from:e.from,dateRange:r,where:`${e.resourceAttributesExpression}.rum.sessionId:*`,whereLanguage:"lucene",...s&&{filters:[{type:n??"lucene",condition:s}]},timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e.connection,groupBy:"serviceName, sessionId"},v,e.querySettings),(0,l.PV)({select:[{valueExpression:`DISTINCT ${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:t.from,dateRange:r,where:`${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b})`,whereLanguage:"sql",timestampValueExpression:t.timestampValueExpression,implicitColumnExpression:t.implicitColumnExpression,connection:t.connection},v,t.querySettings),(0,l.PV)({select:[{valueExpression:`DISTINCT ${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:e.from,dateRange:r,where:`(${e.spanNameExpression}='record init' OR ${e.spanNameExpression}='visibility') AND (${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b}))`,whereLanguage:"sql",timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e?.connection},v,e.querySettings)]),u=(0,a.kg)`
        WITH _${b} AS (${o}),
        ${b} AS (
          SELECT * 
          FROM _${b}
          ${s?"":"HAVING interactionCount > 0 OR recordingCount > 0"}
          ORDER BY maxTimestamp DESC
          LIMIT 500
        )
      `,m=s&&s.length>0?(0,a.kg)`
        ${u},
        sessionIdsWithRecordings AS (${c}),
        sessionIdsWithUserActivity AS (${d})
        SELECT *
        FROM ${b}
        WHERE ${b}.sessionId IN (
          SELECT sessionIdsWithRecordings.sessionId FROM sessionIdsWithRecordings
        ) OR ${b}.sessionId IN (
          SELECT sessionIdsWithUserActivity.sessionId FROM sessionIdsWithUserActivity
        )
      `:(0,a.kg)`
        ${u}
        SELECT *
        FROM ${b}
        `;return await y.query({query:m.sql,query_params:m.params,connectionId:e?.connection}).then(e=>e.json())},staleTime:3e5,...o,enabled:!!m&&!p&&!g})}class p extends Error{}async function*x(e){let t=e.getReader();try{for(;;){let{done:e,value:r}=await t.read();if(e)return;yield r}}finally{t.releaseLock()}}function g({serviceName:e,sessionId:t,sourceId:r,startDate:a,endDate:i,limit:c=100,onEvent:h,onEnd:g,resultsKey:f,getSessionSourceFieldExpression:b},y){let v=y?.keepPreviousData??!1,j=y?.shouldAbortPendingRequest??!0,_=(0,d.Ge)(),[S,w]=(0,s.useState)({key:"",data:[]}),[E,C]=(0,s.useState)(!0),[k,N]=(0,s.useState)(!0),A=(0,s.useRef)(null),[T,$]=(0,s.useState)("idle"),R=(0,s.useRef)(void 0),{data:z}=(0,m.Fo)({id:r}),I=(0,s.useCallback)(async({pageParam:r=0,limit:s})=>{if(!z)return;let o=[],d=0,y=a.getTime().toString(),j=i.getTime().toString(),S=(s??c).toString(),E=r.toString(),k=new AbortController;A.current=k,C(!0),$("fetching"),R.current="fetching";let T=await (0,l.PV)({select:[{valueExpression:m.kJ.implicitColumnExpression,alias:"b"},{valueExpression:`simpleJSONExtractInt(${m.kJ.implicitColumnExpression}, 'type')`,alias:"t"},{valueExpression:`${b(m.kJ.eventAttributesExpression,"rr-web.chunk")}`,alias:"ck"},{valueExpression:`${b(m.kJ.eventAttributesExpression,"rr-web.total-chunks")}`,alias:"tcks"}],dateRange:[new Date(parseInt(y)),new Date(parseInt(j))],from:z.from,whereLanguage:"lucene",where:`ServiceName:"${e}" AND ${m.kJ.resourceAttributesExpression}.rum.sessionId:"${t}"`,timestampValueExpression:z.timestampValueExpression,implicitColumnExpression:m.kJ.implicitColumnExpression,connection:z.connection,orderBy:`${z.timestampValueExpression} ASC`,limit:{limit:Math.min(1e6,parseInt(S)),offset:parseInt(E)}},_,z.querySettings),I=(async()=>{let e,t=(0,u.W)(),r=await t.query({query:T.sql,query_params:T.params,format:"JSONEachRow",connectionId:z.connection});for await(let t of(e=h||(v?e=>o.push(e):e=>w(t=>(0,n.Ay)(t,t=>{t.key=f??t.key??"DEFAULT_KEY",t.data.push(e)}))),x(r.stream())))for(let r of t)try{let t=r.json();d++,e(t)}catch{}g?.(),v&&w({key:f??"DEFAULT_KEY",data:o}),(0===d||d<c)&&N(!1)})();try{await Promise.race([I,new Promise((e,t)=>{setTimeout(()=>{t(new p("Timeout"))},18e4)})])}catch(e){e instanceof p?(C(!1),$("idle"),R.current="idle",k.abort(),console.warn("Closing event source due to timeout"),g?.(new p)):console.error(e)}k.abort(),C(!1),$("idle"),R.current="idle"},[z,e,t,a,i,c,v,w,h,g,f,_,b]),L=[t,a,i,c].join("||"),M=(0,o.ZC)(L);(0,s.useEffect)(()=>{M!=L&&("fetching"!==R.current||j)&&(j&&"fetching"===R.current&&A.current?.abort(),v||w({key:"",data:[]}),N(!0),I({pageParam:0}))},[M,L,j,I,v]);let D=(0,s.useCallback)(e=>{k&&"idle"===R.current&&S.data.length>0&&I({pageParam:S.data.length,limit:e?.limit}).then(()=>{e?.cb?.()})},[I,S.data.length,k]),F=(0,s.useCallback)(()=>{A.current?.abort()},[]);return{hasNextPage:k,isFetching:E,results:S.data,resultsKey:S.key,fetchNextPage:D,abort:F}}},81408:e=>{e.exports={wrapper:"SessionSubpanelV2_wrapper__5kN48",eventList:"SessionSubpanelV2_eventList__CJCVt",eventListHeader:"SessionSubpanelV2_eventListHeader__Hbhpi",eventListContainer:"SessionSubpanelV2_eventListContainer__r2wEN",eventRow:"SessionSubpanelV2_eventRow__XFl1t",eventRowError:"SessionSubpanelV2_eventRowError__61zDU",eventRowIcon:"SessionSubpanelV2_eventRowIcon__C371Y",eventRowTitle:"SessionSubpanelV2_eventRowTitle__BCmpn",eventRowSuccess:"SessionSubpanelV2_eventRowSuccess___a9Kd",eventRowHighlighted:"SessionSubpanelV2_eventRowHighlighted__YWXks",eventRowContent:"SessionSubpanelV2_eventRowContent__Y9_5z",eventRowTimestamp:"SessionSubpanelV2_eventRowTimestamp__MPRLq",eventRowDescription:"SessionSubpanelV2_eventRowDescription__XJ9b7",player:"SessionSubpanelV2_player___Erie",playerHeader:"SessionSubpanelV2_playerHeader__qMRJo",playerHeaderUrl:"SessionSubpanelV2_playerHeaderUrl__K3MEs",playerContainer:"SessionSubpanelV2_playerContainer__m7RnT",domPlayerWrapper:"SessionSubpanelV2_domPlayerWrapper__wKZpR",domPlayerWrapperPaused:"SessionSubpanelV2_domPlayerWrapperPaused__9xhaT",playerTimestamp:"SessionSubpanelV2_playerTimestamp__ebCzv",playerPlaybar:"SessionSubpanelV2_playerPlaybar__FEw0u",playerToolbar:"SessionSubpanelV2_playerToolbar__7sL7N"}},83101:e=>{e.exports={resizeHandle:"ResizablePanel_resizeHandle__4fEVM",resizeYHandle:"ResizablePanel_resizeYHandle__1pBbm"}},84851:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(6029),n=r(55729),a=r(42604),l=r(15628);let i=(0,n.memo)(({config:{markdown:e},title:t,toolbarItems:r})=>(0,s.jsx)(l.A,{title:t,toolbarItems:r,disableReactiveContainer:!0,children:(0,s.jsx)("div",{className:"hdx-markdown",children:(0,s.jsx)(a.oz,{children:e??""})})}))},86761:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var s=r(6029),n=r(75155),a=r(55729),l=r(82641),i=r(43517),o=r(63085),c=r(22623),d=r(27166),u=r(64488),m=r(6620),h=r(94502),p=r(78550),x=r(88339);let g=e=>{let t,r,a,l=(0,n.c)(11),{onClick:c,isEnabled:d,tableCount:u,iconStyles:h,variant:p}=e,x=void 0===p?"icon":p,g=d?u>1?"Show Table Schemas":"Show Table Schema":"Select a table to view its schema";return l[0]!==d||l[1]!==c?(t=()=>d&&c(),l[0]=d,l[1]=c,l[2]=t):t=l[2],l[3]!==h||l[4]!==d||l[5]!==x?(r="text"===x?(0,s.jsx)(i.E,{fw:500,size:"xs",className:"text-sucess-hover",style:{cursor:d?"pointer":"default",...h},children:"Schema"}):(0,s.jsx)(m.A,{size:16}),l[3]=h,l[4]=d,l[5]=x,l[6]=r):r=l[6],l[7]!==t||l[8]!==r||l[9]!==g?(a=(0,s.jsx)(o.m,{label:g,color:"dark",position:"right",onClick:t,children:r}),l[7]=t,l[8]=r,l[9]=g,l[10]=a):a=l[10],a},f=e=>{let t,r,a,l=(0,n.c)(8),{databaseName:i,tableName:o,connectionId:d}=e;l[0]!==d||l[1]!==i||l[2]!==o?(t={databaseName:i,tableName:o,connectionId:d},l[0]=d,l[1]=i,l[2]=o,l[3]=t):t=l[3];let{data:u,isLoading:m}=(0,p.Z2)(t);return l[4]===Symbol.for("react.memo_cache_sentinel")?(r={overflow:"hidden"},l[4]=r):r=l[4],l[5]!==u?.create_table_query||l[6]!==m?(a=(0,s.jsx)(c.t,{flex:"auto",shadow:"none",radius:"sm",p:"xs",style:r,children:m?(0,s.jsx)("div",{className:"d-inline-block",children:(0,s.jsx)(h.A,{className:"spin-animate"})}):(0,s.jsx)(x.V,{data:u?.create_table_query??"Schema is not available",enableCopy:!!u?.create_table_query,copyButtonSize:"xs"})}),l[5]=u?.create_table_query,l[6]=m,l[7]=a):a=l[7],a},b={[l.SX.Sum]:"Sum",[l.SX.Gauge]:"Gauge",[l.SX.Histogram]:"Histogram",[l.SX.Summary]:"Summary",[l.SX.ExponentialHistogram]:"Exponential Histogram"},y=e=>{let t,r,i,o,c,m=(0,n.c)(34),{source:h,iconStyles:p,variant:x}=e,f=void 0===x?"icon":x,[y,S]=(0,a.useState)(!1),w=h?.kind==="metric";if(m[0]!==w||m[1]!==h){let e,r;if(t=[],h&&w){let e,r,s;m[3]===Symbol.for("react.memo_cache_sentinel")?(e=Object.values(l.SX),m[3]=e):e=m[3],m[4]!==h?(r=e.map(e=>({metricType:e,tableName:h.metricTables?.[e]})).filter(v),m[4]=h,m[5]=r):r=m[5],m[6]!==h||m[7]!==r?(s=r.map(e=>{let{metricType:t,tableName:r}=e;return{databaseName:h.from.databaseName,tableName:r,connectionId:h.connection,title:b[t]}}),m[6]=h,m[7]=r,m[8]=s):s=m[8],t.push(...s)}else if(h&&h.from.tableName){let e,r=h.name??h.from.tableName;m[9]!==h.connection||m[10]!==h.from.databaseName||m[11]!==h.from.tableName||m[12]!==r?(e={databaseName:h.from.databaseName,tableName:h.from.tableName,connectionId:h.connection,title:r},m[9]=h.connection,m[10]=h.from.databaseName,m[11]=h.from.tableName,m[12]=r,m[13]=e):e=m[13],t.push(e)}m[14]!==h?.materializedViews?(e=h?.materializedViews??[],m[14]=h?.materializedViews,m[15]=e):e=m[15];let s=e;if(m[16]!==s||m[17]!==h){let e;m[19]!==h?(e=e=>{let{tableName:t,databaseName:r}=e;return{databaseName:r,tableName:t,connectionId:h.connection,title:`${t} (MV)`}},m[19]=h,m[20]=e):e=m[20],r=s.map(e),m[16]=s,m[17]=h,m[18]=r}else r=m[18];t.push(...r),m[0]=w,m[1]=h,m[2]=t}else t=m[2];let E=!!h&&t.length>0;return m[21]===Symbol.for("react.memo_cache_sentinel")?(r=()=>S(!0),m[21]=r):r=m[21],m[22]!==p||m[23]!==E||m[24]!==t.length||m[25]!==f?(i=(0,s.jsx)(g,{isEnabled:E,onClick:r,iconStyles:p,tableCount:t.length,variant:f}),m[22]=p,m[23]=E,m[24]=t.length,m[25]=f,m[26]=i):i=m[26],m[27]!==E||m[28]!==y||m[29]!==t?(o=E&&(0,s.jsx)(d.a,{opened:y,onClose:()=>S(!1),size:"auto",title:t.length>1?"Table Schemas":"Table Schema",children:(0,s.jsxs)(u.t,{defaultValue:`${t[0]?.databaseName}.${t[0]?.tableName}.${t[0]?.title}`,children:[(0,s.jsx)(u.t.List,{children:t.map(j)}),t.map(_)]})}),m[27]=E,m[28]=y,m[29]=t,m[30]=o):o=m[30],m[31]!==i||m[32]!==o?(c=(0,s.jsxs)(s.Fragment,{children:[i,o]}),m[31]=i,m[32]=o,m[33]=c):c=m[33],c};function v(e){let{tableName:t}=e;return!!t}function j(e){return(0,s.jsx)(u.t.Tab,{value:`${e.databaseName}.${e.tableName}.${e.title}`,children:e.title},`${e.databaseName}.${e.tableName}.${e.title}`)}function _(e){return(0,s.jsx)(u.t.Panel,{value:`${e.databaseName}.${e.tableName}.${e.title}`,pt:"sm",children:(0,s.jsx)(f,{...e})},`${e.databaseName}.${e.tableName}.${e.title}`)}},91148:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var s=r(6029),n=r(75155),a=r(35467),l=r(43517),i=r(60481),o=r(24589),c=r(78253),d=r(43152),u=r(91021),m=r(57389),h=r(81973),p=r(92917),x=r(15628),g=r(99082),f=r(88339);function b(e){let t,r,b,v,j,_,S,w,E=(0,n.c)(36),{config:C,enabled:k,queryKeyPrefix:N,title:A,toolbarPrefix:T,toolbarSuffix:$,showMVOptimizationIndicator:R}=e,z=void 0===k||k,I=void 0===R||R;E[0]!==C?(t=(0,d._t)(C),E[0]=C,E[1]=t):t=E[1];let L=t,{data:M}=(0,m.d)(L);E[2]!==L||E[3]!==N?(r=[N,L],E[2]=L,E[3]=N,E[4]=r):r=E[4],E[5]!==z||E[6]!==r?(b={placeholderData:y,queryKey:r,enabled:z},E[5]=z,E[6]=r,E[7]=b):b=E[7];let{data:D,isLoading:F,isError:O,error:P}=(0,u.HD)(L,b);E[8]!==C.numberFormat||E[9]!==D?.data?.[0]?(v=(0,p.ZV)(Object.values(D?.data?.[0]??{})?.[0]??NaN,C.numberFormat),E[8]=C.numberFormat,E[9]=D?.data?.[0],E[10]=v):v=E[10];let W=v;E[11]!==C.source?(j={id:C.source},E[11]=C.source,E[12]=j):j=E[12];let{data:V}=(0,h.Fo)(j);if(E[13]!==M||E[14]!==L||E[15]!==I||E[16]!==V||E[17]!==T||E[18]!==$){let e;if(_=[],T&&T.length>0&&_.push(...T),V&&I){let e;E[20]!==L||E[21]!==V?(e=(0,s.jsx)(g.A,{config:L,source:V,variant:"icon"},"db-number-chart-mv-indicator"),E[20]=L,E[21]=V,E[22]=e):e=E[22],_.push(e)}E[23]!==M||E[24]!==L.dateRange?(e=(0,d.m9)({mvOptimizationData:M,originalDateRange:L.dateRange}),E[23]=M,E[24]=L.dateRange,E[25]=e):e=E[25];let t=e;t&&_.push(t),$&&$.length>0&&_.push(...$),E[13]=M,E[14]=L,E[15]=I,E[16]=V,E[17]=T,E[18]=$,E[19]=_}else _=E[19];let H=_;return E[26]!==D||E[27]!==P||E[28]!==O||E[29]!==F||E[30]!==W?(S=F&&!D?(0,s.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):O?(0,s.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted",children:[(0,s.jsx)(l.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,s.jsxs)(i.a,{mt:"sm",children:[(0,s.jsx)(l.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,s.jsx)(o.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:P.message}),P instanceof a.p1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,s.jsx)(f.V,{data:P?.query})]})]})]}):D?.data.length===0?(0,s.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,s.jsx)(c.s,{align:"center",justify:"center",h:"100%",style:{flexGrow:1},children:(0,s.jsx)(l.E,{size:"4rem",children:W??"N/A"})}),E[26]=D,E[27]=P,E[28]=O,E[29]=F,E[30]=W,E[31]=S):S=E[31],E[32]!==S||E[33]!==A||E[34]!==H?(w=(0,s.jsx)(x.A,{title:A,toolbarItems:H,children:S}),E[32]=S,E[33]=A,E[34]=H,E[35]=w):w=E[35],w}function y(e){return e}},91939:(e,t,r)=>{"use strict";r.d(t,{A:()=>z});var s=r(6029),n=r(75155),a=r(55729),l=r(35467),i=r(43517),o=r(60481),c=r(24589),d=r(43152),u=r(82203),m=r.n(u),h=r(75828),p=r.n(h),x=r(8737),g=r(24602),f=r(40387),b=r(79220),y=r(39696),v=r(21440),j=r(17421),_=r(48423),S=r(55024),w=r(68593),E=r(92917);let C=({data:e,groupColumnName:t,columns:r,getRowSearchLink:n,tableBottom:l,sorting:i,onSortingChange:o,variant:c="default"})=>{let d=(0,a.useRef)(null),u=d.current?.clientWidth,h=r.filter(e=>!1!==e.visible).length+1,C=Math.min(100-r.filter(e=>!1!==e.visible).map(({columnWidthPercent:e})=>Math.max(null!=u?100/u*100:0,e??1/h*100)).reduce((e,t)=>e+t,0),75),k=[...null!=t?[{accessorKey:"group",header:t,size:null!=u?Math.max(C/100*u,100):200}]:[],...r.filter(e=>!1!==e.visible).map(({id:e,dataKey:t,displayName:r,numberFormat:a,columnWidthPercent:l},i)=>({id:e,accessorKey:t,header:r,accessorFn:e=>e[t],cell:({getValue:e,row:t})=>{let r=e(),l=r??null;if(a&&(l=(0,E.ZV)(r,a)),null==n)return l;let i=n(t.original);return i?(0,s.jsx)(m(),{href:i,className:p()("align-top overflow-hidden py-1 pe-3",{"text-break":L,"text-truncate":!L}),style:{display:"block",color:"inherit",textDecoration:"none"},children:l}):(0,s.jsx)("div",{className:p()("align-top overflow-hidden py-1 pe-3",{"text-break":L,"text-truncate":!L}),children:l})},size:i===h-2?w.k:null!=u&&null!=l?Math.max(l/100*u,100):null!=u?u/h:200,enableResizing:i!==h-2}))],N=(0,b.N4)({data:e,columns:k,getCoreRowModel:(0,y.HT)(),enableColumnResizing:!0,columnResizeMode:"onChange",enableSorting:!0,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(i);o?.(t??null)}else o?.(e??null)},state:{sorting:i}}),{rows:A}=N.getRowModel(),T=(0,v.Te)({count:A.length,getScrollElement:()=>d.current,estimateSize:(0,a.useCallback)(()=>58,[]),overscan:10,paddingEnd:20}),$=T.getVirtualItems(),R=T.getTotalSize(),[z,I]=(0,a.useMemo)(()=>$.length>0?[Math.max(0,$[0].start-T.options.scrollMargin),Math.max(0,R-$[$.length-1].end)]:[0,0],[$,T.options.scrollMargin,R]),[L,M]=(0,a.useState)(!1),{csvData:D}=(0,S.u)(e,r.map(e=>({dataKey:e.dataKey,displayName:e.displayName})),{groupColumnName:t});return(0,s.jsxs)("div",{className:"overflow-auto h-100 fs-8",ref:d,children:[(0,s.jsxs)("table",{className:"w-100",style:{tableLayout:"fixed",borderCollapse:"collapse",fontFamily:"var(--font-ibm-plex-mono)"},children:[(0,s.jsx)("thead",{style:{position:"sticky",top:0,background:"muted"===c?"var(--color-bg-muted)":"var(--color-bg-body)"},children:N.getHeaderGroups().map(e=>(0,s.jsx)("tr",{children:e.headers.map((t,r)=>(0,s.jsx)(_.A,{header:t,isLast:r===e.headers.length-1,lastItemButtons:(0,s.jsx)(s.Fragment,{children:r===e.headers.length-1&&(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)(x.N,{onClick:()=>M(e=>!e),children:(0,s.jsx)(g.A,{size:14})}),(0,s.jsx)(j.P,{data:D,filename:"HyperDX_table_results",className:"fs-8 ms-2",title:"Download table as CSV",children:(0,s.jsx)(f.A,{size:14})})]})})},t.id))},e.id))}),(0,s.jsxs)("tbody",{children:[z>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:99999,style:{height:`${z}px`}})}),$.map(e=>{let t=A[e.index];return(0,s.jsx)("tr",{className:"bg-muted-hover","data-index":e.index,ref:T.measureElement,children:t.getVisibleCells().map(e=>(0,s.jsx)("td",{title:`${e.getValue()}`,children:(0,b.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.key)}),I>0&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:99999,style:{height:`${I}px`}})})]})]}),l]})};var k=r(57389),N=r(78744),A=r(81973),T=r(15628),$=r(99082),R=r(88339);function z(e){let t,r,u,m,h,p,x,g,f,b,y,v=(0,n.c)(56),{config:j,getRowSearchLink:_,enabled:S,queryKeyPrefix:w,onSortingChange:z,sort:D,hiddenColumns:F,title:O,toolbarPrefix:P,toolbarSuffix:W,showMVOptimizationIndicator:V,variant:H}=e,B=void 0===S||S;v[0]!==F?(t=void 0===F?[]:F,v[0]=F,v[1]=t):t=v[1];let q=t,X=void 0===V||V;v[2]===Symbol.for("react.memo_cache_sentinel")?(r=[],v[2]=r):r=v[2];let[G,K]=(0,a.useState)(r);v[3]!==j.source?(u={id:j.source},v[3]=j.source,v[4]=u):u=v[4];let{data:J}=(0,A.Fo)(u),Z=D||G;v[5]!==z?(m=e=>{K(e),z&&z(e)},v[5]=z,v[6]=m):m=v[6];let Y=m;if(v[7]!==j||v[8]!==Z){if(h=(0,d.Z7)(j),Z.length){let e;v[10]!==Z?(e=Z.map(M),v[10]=Z,v[11]=e):e=v[11],h.orderBy=e}v[7]=j,v[8]=Z,v[9]=h}else h=v[9];let U=h,{data:Q}=(0,k.d)(U);v[12]!==B||v[13]!==w?(p={enabled:B,queryKeyPrefix:w},v[12]=B,v[13]=w,v[14]=p):p=v[14];let{data:ee,fetchNextPage:et,hasNextPage:er,isLoading:es,isError:en,error:ea}=(0,N.A)(U,p),{observerRef:el}=(0,E.BL)(et);e:{let e;if("string"==typeof j.select){let e;v[15]===Symbol.for("react.memo_cache_sentinel")?(e=[],v[15]=e):e=v[15],x=e;break e}v[16]!==j.select?(e=j.select.reduce(L,[]),v[16]=j.select,v[17]=e):e=v[17],x=e}let ei=x;t:{let e,t;v[18]!==ee?.data?(e=ee?.data??[],v[18]=ee?.data,v[19]=e):e=v[19];let r=e;if(0===r.length){let e;v[20]===Symbol.for("react.memo_cache_sentinel")?(e=[],v[20]=e):e=v[20],g=e;break t}if(v[21]!==ei||v[22]!==j.numberFormat||v[23]!==q||v[24]!==U.groupBy||v[25]!==r[0]){let e=[];U.groupBy&&"string"==typeof U.groupBy&&(e=U.groupBy.split(",").map(I)),t=Object.keys(r?.[0]).filter(e=>!q.includes(e)).map(t=>({id:ei.includes(t)?`"${t}"`:t,dataKey:t,displayName:t,numberFormat:e.includes(t)?void 0:j.numberFormat})),v[21]=ei,v[22]=j.numberFormat,v[23]=q,v[24]=U.groupBy,v[25]=r[0],v[26]=t}else t=v[26];g=t}let eo=g;if(v[27]!==Q||v[28]!==U||v[29]!==X||v[30]!==J||v[31]!==P||v[32]!==W){let e;if(f=[],P&&P.length>0&&f.push(...P),J&&X){let e;v[34]!==U||v[35]!==J?(e=(0,s.jsx)($.A,{config:U,source:J,variant:"icon"},"db-table-chart-mv-indicator"),v[34]=U,v[35]=J,v[36]=e):e=v[36],f.push(e)}v[37]!==Q||v[38]!==U.dateRange?(e=(0,d.m9)({mvOptimizationData:Q,originalDateRange:U.dateRange}),v[37]=Q,v[38]=U.dateRange,v[39]=e):e=v[39];let t=e;t&&f.push(t),W&&W.length>0&&f.push(...W),v[27]=Q,v[28]=U,v[29]=X,v[30]=J,v[31]=P,v[32]=W,v[33]=f}else f=v[33];let ec=f;return v[40]!==eo||v[41]!==ee||v[42]!==Z||v[43]!==ea||v[44]!==el||v[45]!==_||v[46]!==Y||v[47]!==er||v[48]!==en||v[49]!==es||v[50]!==H?(b=es&&!ee?(0,s.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):en&&ea?(0,s.jsxs)("div",{className:"h-100 w-100 align-items-center justify-content-center text-muted overflow-scroll",children:[(0,s.jsx)(i.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,s.jsxs)(o.a,{mt:"sm",children:[(0,s.jsx)(i.E,{my:"sm",size:"sm",ta:"center",children:"Error Message:"}),(0,s.jsx)(c.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:ea.message}),ea instanceof l.p1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,s.jsx)(R.V,{data:ea?.query})]})]})]}):ee?.data.length===0?(0,s.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,s.jsx)(C,{data:ee?.data??[],columns:eo,getRowSearchLink:_,sorting:Z,onSortingChange:Y,variant:H,tableBottom:er&&(0,s.jsx)(i.E,{ref:el,ta:"center",children:"Loading..."})}),v[40]=eo,v[41]=ee,v[42]=Z,v[43]=ea,v[44]=el,v[45]=_,v[46]=Y,v[47]=er,v[48]=en,v[49]=es,v[50]=H,v[51]=b):b=v[51],v[52]!==b||v[53]!==O||v[54]!==ec?(y=(0,s.jsx)(T.A,{title:O,toolbarItems:ec,children:b}),v[52]=b,v[53]=O,v[54]=ec,v[55]=y):y=v[55],y}function I(e){return e.trim()}function L(e,t){return t.alias&&e.push(t.alias),e}function M(e){return{valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}}},92495:(e,t)=>{"use strict";t.AB=function(e){let t,r;return function(e){try{return new URL(e),!0}catch(e){return!1}}(e)&&"slack.com"===((r=(t=new URL(e).hostname).split(".")).length>=2?r.slice(-2).join("."):t)}},93522:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return s}});let s=r(14761)._(r(55729)).default.createContext(null)},94364:(e,t,r)=>{"use strict";r.d(t,{f:()=>s});let s=e=>({isLoading:!1,error:null,enrichedFrame:null})},94937:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var s=r(6029),n=r(75155),a=r(55729),l=r(82203),i=r.n(l),o=r(80519),c=r.n(o),d=r(37659),u=r(3635),m=r(43517),h=r(63085),p=r(34834),x=r(25062),g=r(56795),f=r(28975),b=r(41279),y=r(18006);function v(e){let t,r,l,o,v,j,_,S,w,E,C,k,N,A,T,$,R,z,I=(0,n.c)(62),{displayedKey:L,name:M,nameLanguage:D,sqlExpression:F,value:O,onPropertyAddClick:P,generateSearchUrl:W}=e,V=void 0===D?"lucene":D,[H,B]=(0,a.useState)(!1);I[0]!==O?(t=(0,y.OH)(O),I[0]=O,I[1]=t):t=I[1];let q=t;if(!(P||W||q)){let e,t=L||M;return I[2]!==M||I[3]!==t||I[4]!==O?(e=(0,s.jsxs)("div",{className:"bg-highlighted px-2 py-0.5 me-1 my-1",children:[t,": ",O]},M),I[2]=M,I[3]=t,I[4]=O,I[5]=e):e=I[5],e}if(I[6]!==L||I[7]!==W||I[8]!==q||I[9]!==M||I[10]!==V||I[11]!==P||I[12]!==H||I[13]!==F||I[14]!==O){let e,t,n="sql"===V?c().format("? = ?",[c().raw(M),O]):`${M}:${"string"==typeof O?`"${O}"`:O}`;o=d.A,A="top",T=!1,v=!0,j=H,_=B,I[29]===Symbol.for("react.memo_cache_sentinel")?(e={wordBreak:"break-word"},I[29]=e):e=I[29],I[30]!==L||I[31]!==q||I[32]!==M||I[33]!==H||I[34]!==O?(t=q?(0,s.jsxs)("a",{href:encodeURI(O),target:"_blank",rel:"noopener noreferrer",className:"d-flex flex-row align-items-center bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",children:[L||M,(0,s.jsx)(g.A,{size:14,className:"ms-1"})]}):(0,s.jsxs)(u.Y,{className:"bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",wrap:"nowrap",gap:0,onClick:()=>B(!H),children:[L||M,":",(0,s.jsx)(m.E,{size:"xs",ms:4,maw:300,truncate:!0,children:O})]}),I[30]=L,I[31]=q,I[32]=M,I[33]=H,I[34]=O,I[35]=t):t=I[35],I[36]!==t||I[37]!==O?(S=(0,s.jsx)(d.A.Target,{children:(0,s.jsx)(h.m,{label:O,withArrow:!0,maw:400,multiline:!0,style:e,position:"bottom",children:t})}),I[36]=t,I[37]=O,I[38]=S):S=I[38],l=d.A.Dropdown,N=2,r=p.B,w=0,E="stretch",I[39]!==P||I[40]!==F||I[41]!==O?(C=P&&(0,s.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,s.jsx)(f.A,{size:14}),onClick:()=>{P(F,O),B(!1)},children:"Add to Search"}),I[39]=P,I[40]=F,I[41]=O,I[42]=C):C=I[42],k=W&&(0,s.jsx)(i(),{href:W(n,V),children:(0,s.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,s.jsx)(b.A,{size:14}),children:"Search This Value"})}),I[6]=L,I[7]=W,I[8]=q,I[9]=M,I[10]=V,I[11]=P,I[12]=H,I[13]=F,I[14]=O,I[15]=r,I[16]=l,I[17]=o,I[18]=v,I[19]=j,I[20]=_,I[21]=S,I[22]=w,I[23]=E,I[24]=C,I[25]=k,I[26]=N,I[27]=A,I[28]=T}else r=I[15],l=I[16],o=I[17],v=I[18],j=I[19],_=I[20],S=I[21],w=I[22],E=I[23],C=I[24],k=I[25],N=I[26],A=I[27],T=I[28];return I[43]!==r||I[44]!==w||I[45]!==E||I[46]!==C||I[47]!==k?($=(0,s.jsxs)(r,{gap:w,justify:E,children:[C,k]}),I[43]=r,I[44]=w,I[45]=E,I[46]=C,I[47]=k,I[48]=$):$=I[48],I[49]!==l||I[50]!==$||I[51]!==N?(R=(0,s.jsx)(l,{p:N,children:$}),I[49]=l,I[50]=$,I[51]=N,I[52]=R):R=I[52],I[53]!==o||I[54]!==v||I[55]!==j||I[56]!==_||I[57]!==S||I[58]!==R||I[59]!==A||I[60]!==T?(z=(0,s.jsxs)(o,{position:A,withinPortal:T,withArrow:v,opened:j,onChange:_,children:[S,R]}),I[53]=o,I[54]=v,I[55]=j,I[56]=_,I[57]=S,I[58]=R,I[59]=A,I[60]=T,I[61]=z):z=I[61],z}},96958:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(6029),n=r(75155),a=r(75828),l=r.n(a);function i(e){let t,r,a,i,o,c,d,u,m,h,p,x=(0,n.c)(23);x[0]!==e?({children:r,onClick:i,active:t,className:a,style:c,...o}=e,x[0]=e,x[1]=t,x[2]=r,x[3]=a,x[4]=i,x[5]=o,x[6]=c):(t=x[1],r=x[2],a=x[3],i=x[4],o=x[5],c=x[6]);let g=!t;x[7]!==t||x[8]!==a||x[9]!==g?(d=l()("text-center cursor-pointer",{"fw-bold text-white-hover":t,"text-muted-hover":g},a),x[7]=t,x[8]=a,x[9]=g,x[10]=d):d=x[10],x[11]!==r?(u=(0,s.jsx)("span",{children:r}),x[11]=r,x[12]=u):u=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(m={height:2},x[13]=m):m=x[13];let f=t?"var(--color-text-brand)":"var(--color-border)";return x[14]!==f?(h=(0,s.jsx)("div",{className:"w-100 mt-2",style:m,children:(0,s.jsx)("div",{className:"h-100 w-100",style:{background:f}})}),x[14]=f,x[15]=h):h=x[15],x[16]!==i||x[17]!==o||x[18]!==c||x[19]!==d||x[20]!==u||x[21]!==h?(p=(0,s.jsxs)("div",{className:d,onClick:i,style:c,...o,children:[u,h]}),x[16]=i,x[17]=o,x[18]=c,x[19]=d,x[20]=u,x[21]=h,x[22]=p):p=x[22],p}function o(e){let t,r,a,o,c=(0,n.c)(14),{items:d,activeItem:u,className:m,onClick:h,"data-testid":p}=e;if(c[0]!==m?(t=l()("d-flex flex-wrap",m),c[0]=m,c[1]=t):t=c[1],c[2]!==u||c[3]!==d||c[4]!==h){let e;c[6]!==u||c[7]!==h?(e=e=>(0,s.jsx)(i,{"data-testid":`tab-${String(e.value).toLowerCase()}`,active:e.value===u,onClick:()=>h?.(e.value),children:(0,s.jsx)("span",{className:"mx-4 text-nowrap",children:e.text})},e.value),c[6]=u,c[7]=h,c[8]=e):e=c[8],r=d.map(e),c[2]=u,c[3]=d,c[4]=h,c[5]=r}else r=c[5];return c[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(i,{className:"flex-grow-1 pe-none",children:"\xa0"}),c[9]=a):a=c[9],c[10]!==p||c[11]!==t||c[12]!==r?(o=(0,s.jsxs)("div",{className:t,"data-testid":p,children:[r,a]}),c[10]=p,c[11]=t,c[12]=r,c[13]=o):o=c[13],o}}},e=>{e.O(0,[7756,883,2928,6171,5554,910,1606,1909,3999,1626,1445,2990,4607,9979,522,3943,1926,9353,1470,1274,1021,6514,3234,8374,6593,636,8792],()=>e(e.s=32833)),_N_E=e.O()}]);