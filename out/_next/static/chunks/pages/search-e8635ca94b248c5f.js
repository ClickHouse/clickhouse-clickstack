(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{225:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var n=s(6029),a=s(75155),r=s(98142);let l=()=>{let e,t=(0,a.c)(2);if(r.bp){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsxs)("span",{children:["Please open an issue on"," ",(0,n.jsx)("a",{href:"https://github.com/hyperdxio/hyperdx/issues",target:"_blank",children:"GitHub"}),"."]}),t[0]=e):e=t[0],e}return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("span",{children:"Please contact support."}),t[1]=e):e=t[1],e}},1639:(e,t,s)=>{"use strict";s.d(t,{A:()=>I});var n=s(6029),a=s(75155),r=s(55729),l=s(71024),i=s.n(l),o=s(92884),c=s(36006),d=s.n(c),u=s(35467),m=s(76089),h=s(43517),p=s(60481),x=s(25062),g=s(3635),f=s(27166),y=s(24589),b=s(92789),v=s(78341),j=s(88849),_=s(16232),S=s(43152),w=s(91021),E=s(7565),C=s(92917),k=s(15628),N=s(88339);let A=["rgba(253, 231, 37, 1.0)","rgba(181, 222, 43, 0.92)","rgba(110, 206, 88, 0.9)","rgba(53, 183, 121, 0.8)","rgba(31, 158, 137, 0.8)","rgba(38, 130, 142, 0.7)","rgba(49, 104, 142, 0.7)","rgba(62, 73, 137, 0.7)","hsla(259, 35%, 25%, 0.7)"].reverse(),T={stroke:"rgba(102,102,102,1)",font:"12px IBM Plex Mono, monospace",grid:{show:!0,stroke:"rgba(52,58,64)",dash:[3,3],width:1},border:{show:!0,stroke:"rgba(102,102,102,1)",width:1}},$={width:1500,height:600,mode:2,ms:1,legend:{show:!1},scales:{x:{time:!0}},axes:[{...T},{...T}],series:[{},{label:"Latency",paths:function(e){let{disp:t}=e;return(e,s,n,a)=>(o.default.orient(e,s,(n,a,r,l,i,o,c,d,u,m,h,p,x,g,f)=>{let[y,b,v]=e.data[s],j=y.length,_=t.fill.values(e,s),S=t.fill.lookup??[...new Set(_)],w=S.map(e=>new Path2D),E=j-b.lastIndexOf(b[0]),C=b[1]-b[0],k=o(y[E]-y[0],l,m,d)-o(0,l,m,d),N=c(C,i,h,u)-c(0,i,h,u),A=b.slice(0,E).map(e=>Math.round(c(e,i,h,u)-N/2)),T=Array.from({length:j/E},(e,t)=>Math.round(o(y[t*E],l,m,d)-k/2));for(let e=0;e<j;e++)if(v[e]>0&&y[e]>=(l.min??-1/0)&&y[e]<=(l.max??1/0)&&b[e]>=(i.min??-1/0)&&b[e]<=(i.max??1/0)){let t=T[~~(e/E)],s=A[e%E];g(w[_[e]],t,s,k,N)}e.ctx.save(),e.ctx.rect(e.bbox.left,e.bbox.top,e.bbox.width,e.bbox.height),e.ctx.clip(),w.forEach((t,s)=>{e.ctx.fillStyle=S[s],e.ctx.fill(t)}),e.ctx.restore()}),null)}({disp:{fill:{lookup:A,values:(e,t)=>{let s=e.data[t][2],n=1/0,a=-1/0;for(let e=0;e<s.length;e++)s[e]>0&&(n=Math.min(n,s[e]),a=Math.max(a,s[e]));let r=e=>Math.log(e)/Math.log(20),l=r(a)-r(n),i=A.length,o=Array(s.length);for(let e=0;e<s.length;e++)o[e]=0===s[e]?-1:Math.max(Math.min(i-1,Math.floor(Math.max(i*(r(s[e])-r(n)),1e-32)/l)),0);return o}}}}),facets:[{scale:"x",auto:!0,sorted:1},{scale:"y",auto:!0}]}]};function z(e){let t,s,r,l,i,o,c=(0,a.c)(18),{config:d,enabled:b,onFilter:j,title:E,toolbarPrefix:C,toolbarSuffix:A}=e,T=void 0===b||b,$=d.dateRange,z=(0,m.tA)($,245),I=d.select[0].valueExpression,M=d.select[0].countExpression??"count()";c[0]!==I?(t=(0,S.eY)(I),c[0]=I,c[1]=t):t=c[1];let R=t;c[2]!==d||c[3]!==R||c[4]!==I?(s=R?{...d,where:"",orderBy:void 0,granularity:void 0,select:[{aggFn:"min",aggCondition:"value_calc >= 0",aggConditionLanguage:"sql",valueExpression:"value_calc",alias:"min"},{aggFn:"max",valueExpression:"value_calc",alias:"max"}],with:[{name:"min_max_calc",chartConfig:{...d,select:[{valueExpression:I,alias:"value_calc"}],orderBy:void 0}}],timestampValueExpression:"__hdx_time_bucket",from:{databaseName:"",tableName:"min_max_calc"}}:{...d,orderBy:void 0,granularity:void 0,select:[{aggFn:"min",valueExpression:I,aggCondition:`${I} >= 0`,aggConditionLanguage:"sql",alias:"min"},{aggFn:"max",valueExpression:I,aggCondition:"",alias:"max"}]},c[2]=d,c[3]=R,c[4]=I,c[5]=s):s=c[5];let D=s;c[6]!==D?(r=["heatmap",D],c[6]=D,c[7]=r):r=c[7],c[8]!==T||c[9]!==r?(l={queryKey:r,enabled:T},c[8]=T,c[9]=r,c[10]=l):l=c[10];let{data:P,isLoading:O,error:F}=(0,w.HD)(D,l),[V,B]=(0,v.j)(),W=Number.parseInt(P?.data?.[0]?.min??"0",10),H=Number.parseInt(P?.data?.[0]?.max??"0",10),q=R?{...d,where:"",select:[{valueExpression:"sum(value_count)",alias:"count"}],groupBy:[{valueExpression:`widthBucket(value_calc, ${W}, ${H}, 80)`,alias:"x_bucket"}],with:[{name:"bucket_calc",chartConfig:{...d,select:[{valueExpression:I,alias:"value_calc"},{valueExpression:M,alias:"value_count"}],granularity:z,orderBy:void 0}}],timestampValueExpression:"__hdx_time_bucket",from:{databaseName:"",tableName:"bucket_calc"},orderBy:[{valueExpression:"x_bucket",ordering:"ASC"}],granularity:z}:{...d,select:[{valueExpression:M,alias:"count"}],groupBy:[{valueExpression:`widthBucket(${I}, ${W}, ${H}, 80)`,alias:"x_bucket"}],orderBy:[{valueExpression:"x_bucket",ordering:"ASC"}],granularity:z},{data:X,isLoading:Y,error:J}=(0,w.HD)(q,{queryKey:["heatmap_bucket",q],enabled:!!P&&null!=q}),K=(0,S.Ht)($[0],$[1],z),G=(0,u.zo)(X?.meta??[]),Z=[],U=[],Q=[];if(null!=X&&null!=G){let e=0;for(let t=0;t<K.length;t++){let s=K[t].getTime();for(let t=0;t<=81;t++){let n=X?.data?.[e];null!=n&&new Date(n[G.name]).getTime()==s&&n.x_bucket==t?(Z.push(new Date(n[G.name]).getTime()),U.push(W+n.x_bucket*((H-W)/80)),Q.push(Number.parseInt(n.count,10)),e++):(Z.push(s),U.push(W+(H-W)/80*t),Q.push(0))}}}c[11]!==C||c[12]!==A?(i=[],C&&C.length>0&&i.push(...C),A&&A.length>0&&i.push(...A),c[11]=C,c[12]=A,c[13]=i):i=c[13];let ee=i,et=J||F,es=Y||O?(0,n.jsx)(h.E,{size:"sm",ta:"center",p:"xl",children:"Loading..."}):et?(0,n.jsxs)(p.a,{p:"xl",ta:"center",h:"100%",children:[(0,n.jsx)(h.E,{size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,n.jsx)(x.$,{className:"mx-auto",variant:"subtle",color:"red",onClick:()=>B.open(),children:(0,n.jsxs)(g.Y,{gap:"xxs",children:[(0,n.jsx)(_.A,{size:16}),"See Error Details"]})}),(0,n.jsx)(f.a,{opened:V,onClose:()=>B.close(),title:"Error Details",children:(0,n.jsxs)(g.Y,{align:"start",children:[(0,n.jsx)(h.E,{size:"sm",ta:"center",children:"Error Message:"}),(0,n.jsx)(y.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:et.message}),et instanceof u.p1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,n.jsx)(N.V,{data:et?.query,enableCopy:!0})]})]})})]}):Z.length<2||K?.length<2?(0,n.jsx)(h.E,{size:"sm",ta:"center",p:"xl",children:"Not enough data points to render heatmap. Try expanding your search criteria."}):(0,n.jsx)(L,{data:[Z,U,Q],numberFormat:d.numberFormat,onFilter:j},JSON.stringify(d));return c[14]!==es||c[15]!==E||c[16]!==ee?(o=(0,n.jsx)(k.A,{title:E,toolbarItems:ee,disableReactiveContainer:!0,children:es}),c[14]=es,c[15]=E,c[16]=ee,c[17]=o):o=c[17],o}let I=i()(()=>Promise.resolve(z),{ssr:!1});function L(e){let t,s,l,i,o,c,u,m,p,x,g,f,y,v,_,S,w,k,N=(0,a.c)(41),{data:A,numberFormat:T,onFilter:z}=e,[I,L]=(0,r.useState)(void 0),[R,D]=(0,r.useState)(void 0),{ref:P,width:O,height:F}=(0,j.L)();N[0]!==T?(t=e=>T?(0,C.ZV)(e,{...T,average:!0,mantissa:0,unit:void 0}):new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e),N[0]=T,N[1]=t):t=N[1];let V=t;N[2]!==V?(s=null!=$&&null!=$.axes?{axes:[$.axes[0],{...$.axes[1],values:(e,t)=>t.map(V)}]}:{},N[2]=V,N[3]=s):s=N[3],N[4]===Symbol.for("react.memo_cache_sentinel")?(l={setScale:!1,x:!0,y:!0,dist:5},N[4]=l):l=N[4],N[5]===Symbol.for("react.memo_cache_sentinel")?(i={drag:l,show:!0,focus:{prox:100}},N[5]=i):i=N[5],N[6]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{let{xVal:t,yVal:s,countVal:n,closestDistance:a,closestIndex:r,xCoord:l,yCoord:i,xSize:o,ySize:c}=e;D({xVal:t,yVal:s,countVal:n,closestDistance:a,closestIndex:r,xCoord:l,yCoord:i,xSize:o,ySize:c})},N[6]=o):o=N[6],N[7]!==V?(c=function({proximity:e,yFormatter:t,xFormatter:s,onPointHighlight:n}){let a=-1;return{hooks:{setCursor:t=>{let{top:s,left:r}=t.cursor;if(null==s||null==r)return;let[l,i,o]=t.data[1],c=0,d=1/0;for(let e=0;e<l.length;e++){let n=Math.sqrt((t.valToPos(l[e],"x")-r)**2+(t.valToPos(i[e],"y")-s)**2);n<d&&o[e]>0&&(c=e,d=n)}let u=l.length-i.lastIndexOf(i[0]),m=i[1]-i[0],h=l[u]-l[0],p=Math.abs(t.valToPos(h,"x")-t.valToPos(0,"x")),x=Math.abs(t.valToPos(m,"y")-t.valToPos(0,"y")),g=t.valToPos(l[c],"x"),f=t.valToPos(i[c],"y"),y=o[c],b=l[c],v=i[c],{offsetLeft:j,offsetTop:_}=t.over;d<e&&c!==a&&(a=c,n({xVal:b,yVal:v,countVal:y,closestDistance:d,closestIndex:c,xCoord:g+j,yCoord:f+_,xSize:p,ySize:x}))}}}}({proximity:20,yFormatter:V,xFormatter:M,onPointHighlight:o}),N[7]=V,N[8]=c):c=N[8],N[9]===Symbol.for("react.memo_cache_sentinel")?(u={hooks:{setSelect:e=>{let{offsetLeft:t,offsetTop:s}=e.over,n=e.posToVal(e.select.left,"x"),a=e.posToVal(e.select.left+e.select.width,"x"),r=e.posToVal(e.select.top,"y"),l=e.posToVal(e.select.top+e.select.height,"y");setTimeout(()=>{L({top:e.select.top+s,left:e.select.left+t,width:e.select.width,height:e.select.height,xMin:n,xMax:a,yMin:l,yMax:r})},20)}}},N[9]=u):u=N[9],N[10]!==c?(m=[c,u],N[10]=c,N[11]=m):m=N[11],N[12]!==F||N[13]!==s||N[14]!==m||N[15]!==O?(p={...$,...s,width:O,height:F,cursor:i,plugins:m},N[12]=F,N[13]=s,N[14]=m,N[15]=O,N[16]=p):p=N[16];let B=p;return N[17]===Symbol.for("react.memo_cache_sentinel")?(x={width:"100%",height:"100%",position:"relative"},N[17]=x):x=N[17],N[18]!==I?(g=()=>{null!=I&&L(void 0)},N[18]=I,N[19]=g):g=N[19],N[20]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{D(void 0)},N[20]=f):f=N[20],N[21]===Symbol.for("react.memo_cache_sentinel")?(y=[],N[21]=y):y=N[21],N[22]!==A?(v=[y,A],N[22]=A,N[23]=v):v=N[23],N[24]!==B||N[25]!==v?(_=(0,n.jsx)(d(),{options:B,data:v,resetScales:!0}),N[24]=B,N[25]=v,N[26]=_):_=N[26],N[27]!==R||N[28]!==V||N[29]!==O?(S=null!=R&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{position:"absolute",top:R.yCoord,left:R.xCoord,width:R.xSize,height:R.ySize,pointerEvents:"none",background:"rgba(255, 255, 255, 0.8)"}}),(0,n.jsxs)("div",{className:"px-2 py-1 fs-8",style:{position:"absolute",top:R.yCoord+5,...R.xCoord>2*O/3?{right:O-R.xCoord+10}:{left:R.xCoord+10},backdropFilter:"blur(8px)",backgroundColor:"rgba(#1A1D23 0.75)",border:"1px solid #5F6776",borderRadius:2,pointerEvents:"none"},children:[(0,n.jsx)(h.E,{size:"10px",pt:"4px",children:"Click & Drag to Select Data"}),(0,n.jsx)(b.c,{my:"xs"}),(0,n.jsx)("div",{children:(0,n.jsx)(E.H,{value:R.xVal})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Y Value:"})," ",V(R.yVal)]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:"Count Value:"})," ",new Intl.NumberFormat("en-US",{notation:"standard",compactDisplay:"short"}).format(R.countVal)]})]})]}),N[27]=R,N[28]=V,N[29]=O,N[30]=S):S=N[30],N[31]!==F||N[32]!==z||N[33]!==I?(w=null!=I&&null!=z&&(0,n.jsx)("div",{className:"px-2 py-1 fs-8",style:{backdropFilter:"blur(4px)",backgroundColor:"rgba(#1A1D23 0.4)",border:"1px solid #5F6776",borderRadius:2,position:"absolute",bottom:F-I?.top+4,left:I?.left},onClick:e=>{e.stopPropagation(),z?.(I.xMin/1e3,I.xMax/1e3,I.yMin,I.yMax)},role:"button",children:"Filter by Selection"}),N[31]=F,N[32]=z,N[33]=I,N[34]=w):w=N[34],N[35]!==P||N[36]!==g||N[37]!==_||N[38]!==S||N[39]!==w?(k=(0,n.jsxs)("div",{ref:P,style:x,onClick:g,onMouseLeave:f,children:[_,S,w]}),N[35]=P,N[36]=g,N[37]=_,N[38]=S,N[39]=w,N[40]=k):k=N[40],k}function M(e){return`${new Date(e).toLocaleString()}`}},2326:e=>{e.exports={wrapper:"PlaybarSlider_wrapper__WAjbf",markers:"PlaybarSlider_markers__X51XN",markerDot:"PlaybarSlider_markerDot__X23nO"}},12869:(e,t,s)=>{"use strict";s.d(t,{A8:()=>g,C5:()=>b,J_:()=>f,cv:()=>x,gK:()=>m,lT:()=>u,mo:()=>y,nq:()=>p,vX:()=>v,yN:()=>h});var n=s(43465),a=s(49730),r=s(67012),l=s(85508),i=s(71434),o=s.n(i),c=s(76089),d=s(82641);function u(e){return"1m"===e?c.Z7.OneMinute:"5m"===e?c.Z7.FiveMinute:"15m"===e?c.Z7.FifteenMinute:"30m"===e?c.Z7.ThirtyMinute:"1h"===e?c.Z7.OneHour:"6h"===e?c.Z7.SixHour:"12h"===e?c.Z7.TwelveHour:c.Z7.OneDay}function m(e){let t=new Date;return"1m"===e?[(0,n.A)(t,{minutes:15}),t]:"5m"===e?[(0,n.A)(t,{hours:1}),t]:"15m"===e?[(0,n.A)(t,{hours:4}),t]:"30m"===e?[(0,n.A)(t,{hours:8}),t]:"1h"===e?[(0,n.A)(t,{hours:16}),t]:"6h"===e?[(0,n.A)(t,{days:4}),t]:"12h"===e||"1d"===e?[(0,n.A)(t,{days:7}),t]:[t,t]}function h(e,t){let[s,i]=e;return"1m"===t&&15>(0,a.A)(i,s)?[(0,n.A)(i,{minutes:15}),i]:"5m"===t&&1>(0,r.A)(i,s)?[(0,n.A)(i,{hours:1}),i]:"15m"===t&&4>(0,r.A)(i,s)?[(0,n.A)(i,{hours:4}),i]:"30m"===t&&8>(0,r.A)(i,s)?[(0,n.A)(i,{hours:8}),i]:"1h"===t&&16>(0,r.A)(i,s)?[(0,n.A)(i,{hours:16}),i]:"6h"===t&&4>(0,l.A)(i,s)?[(0,n.A)(i,{days:4}),i]:"12h"===t&&7>(0,l.A)(i,s)||"1d"===t&&7>(0,l.A)(i,s)?[(0,n.A)(i,{days:7}),i]:e}let p={above:"At least (≥)",below:"Below (<)"},x={above:"is at least (≥)",below:"falls below (<)"},g={"1m":"1 minute","5m":"5 minute","15m":"15 minute","30m":"30 minute","1h":"1 hour","6h":"6 hour","12h":"12 hour","1d":"1 day"},f=o().pick(g,["5m","15m","30m","1h","6h","12h","1d"]),y={webhook:"Webhook"},b={threshold:1,thresholdType:d.qQ.ABOVE,interval:"5m",channel:{type:"webhook",webhookId:""}};function v(e){return!!e&&new Date>new Date(e.until)}},17273:(e,t,s)=>{"use strict";s.d(t,{A:()=>x,S:()=>p});var n=s(6029),a=s(1909),r=s(60481),l=s(78253),i=s(8468),o=s(74860),c=s(24196),d=s(46466),u=s(36011),m=s.n(u);let h="hdx-search-where-language";function p(){try{let e=window.localStorage.getItem(h);if("sql"===e||"lucene"===e)return e}catch{}return null}function x({tableConnection:e,tableConnections:t,control:s,name:u,onSubmit:p,onLanguageChange:x,enableHotkey:g,size:f="sm",showLabel:y=!0,label:b="WHERE",allowMultiline:v=!0,sqlQueryHistoryType:j,luceneQueryHistoryType:_,sqlPlaceholder:S="SQL WHERE clause (ex. column = 'foo')",lucenePlaceholder:w="Search your events w/ Lucene ex. column:foo",width:E="100%",maxWidth:C="100%",minWidth:k,"data-testid":N,additionalSuggestions:A,languageName:T=`${u}Language`}){let{field:$}=(0,a.as)({control:s,name:T}),z=$.value??"lucene",I="sql"===z,L=e?{tableConnection:e}:{tableConnections:t},M="xs"===f?m().sizeXs:m().sizeSm;return(0,n.jsxs)(r.a,{className:m().root,style:{width:E,maxWidth:C,minWidth:k},children:[(0,n.jsx)(l.s,{align:"center",className:`${m().languageSwitch} ${M}`,"data-testid":"where-language-switch",onMouseDown:e=>e.preventDefault(),children:(0,n.jsx)(o.A,{language:z,onLanguageChange:e=>{try{window.localStorage.setItem(h,e)}catch{}$.onChange(e),x?.(e)}})}),(0,n.jsxs)(r.a,{className:`${m().inputWrapper} ${M}`,children:[I?(0,n.jsx)(d.Z,{...L,control:s,name:u,placeholder:S,onSubmit:p,label:y?b:void 0,queryHistoryType:j,enableHotkey:g,allowMultiline:v,size:f,additionalSuggestions:A}):(0,n.jsx)(c.A,{...L,control:s,name:u,onSubmit:p,placeholder:w,queryHistoryType:_,enableHotkey:g,size:f,"data-testid":N,additionalSuggestions:A}),g&&(0,n.jsx)(r.a,{className:m().shortcutHint,title:"Press / or s to focus search","aria-hidden":!0,children:(0,n.jsx)(i.u,{size:"xs",children:"/"})})]})]})}},17513:(e,t,s)=>{"use strict";s.d(t,{WD:()=>m,dG:()=>u,w7:()=>h,cm:()=>p});var n=s(6029);s(55729);var a=s(82641),r=s(51058),l=s(56795),i=s(75155);function o(e){let t,s,a,r,l=(0,i.c)(6),{style:o,width:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("title",{children:"Incident.io"}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)("g",{clipPath:"url(#clip0_1361_12546)",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.7336 139.642V163C20.7585 156.323 0 131.711 0 102.372C0 85.4557 7.15792 72.0354 18.1053 58.8703C27.1831 47.9534 49.5985 19.0426 56.6543 3.08954C58.3673 -0.783473 62.7348 -0.633805 64.6182 1.44721C70.6432 8.10421 78.0694 22.6432 80.4983 39.135C80.9932 42.4953 81.1969 45.2388 81.3587 47.4184C81.706 52.0954 81.8604 54.1748 84.2854 54.1748C88.0955 54.1748 90.588 48.3977 91.1358 42.4345C91.4869 38.6136 95.2774 37.3346 97.8914 38.6136C110.463 44.7644 123.292 74.0426 126.393 88.4102C127.366 92.9158 128 97.5719 128 102.372C128 131.646 107.335 156.214 79.4537 162.955V139.642H48.7336ZM64.0002 130.333C73.8316 130.333 81.8016 122.789 81.8016 113.483C81.8016 98.6407 70.8577 88.0345 65.4048 84.8105C65.0364 84.5928 64.8523 84.4839 64.3512 84.4974C63.9843 84.5073 63.4429 84.7369 63.181 84.9935C62.8232 85.3441 62.7283 85.743 62.5387 86.5409C61.5721 90.6065 58.5292 93.5054 55.327 96.556C50.9141 100.76 46.1988 105.252 46.1988 113.483C46.1988 122.789 54.1688 130.333 64.0002 130.333Z",fill:"currentColor"})}),l[1]=s):s=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_1361_12546",children:(0,n.jsx)("rect",{width:"128",height:"163",fill:"white"})})}),l[2]=a):a=l[2],l[3]!==o||l[4]!==c?(r=(0,n.jsxs)("svg",{width:c,height:c,viewBox:"0 0 128 163",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid",style:o,children:[t,s,a]}),l[3]=o,l[4]=c,l[5]=r):r=l[5],r}let c={[a.x.Slack]:{name:"Slack",icon:(0,n.jsx)(r.A,{size:16}),order:1},[a.x.IncidentIO]:{name:"incident.io",icon:(0,n.jsx)(o,{width:16}),order:4},[a.x.Generic]:{name:"Generic",icon:(0,n.jsx)(l.A,{size:16}),order:5}},d={[a.x.Generic]:(0,n.jsx)(l.A,{size:16}),[a.x.Slack]:(0,n.jsx)(r.A,{size:16}),[a.x.IncidentIO]:(0,n.jsx)(o,{width:16})},u=e=>{if(e)return c[e]},m=e=>e&&d[e]||d[a.x.Generic],h=e=>{let t=u(e);return t?.name||e||"Unknown"},p=e=>Object.entries(e.reduce((e,t)=>{let s=t.service;return e[s]||(e[s]=[]),e[s].push(t),e},{})).sort(([e],[t])=>(c[e]?.order||999)-(c[t]?.order||999))},17978:(e,t,s)=>{"use strict";s.d(t,{I:()=>r,s:()=>a});var n=s(41038);let a=(0,n.Cp)({parse:e=>e.replace(/%0A/g,"\n"),serialize:e=>e.replace(/\n/g,"%0A")}),r=(0,n.Cp)({parse:e=>{if(!e)return null;let t=e.split(" "),s=t.pop();return{id:t.join(" "),desc:"DESC"===s}},serialize:e=>e?`${e.id} ${e.desc?"DESC":"ASC"}`:""})},18006:(e,t,s)=>{"use strict";s.d(t,{N4:()=>r,OH:()=>l,z4:()=>a});var n=s(37901);function a(e=[]){return e.map(({sqlExpression:e,alias:t})=>({valueExpression:e,alias:t||e}))}function r(e,t=[],s,a){let l=new Map,i=new Map,o=new Map,c=(0,n.bn)(a);try{for(let e of s)for(let{sqlExpression:s,luceneExpression:n,alias:a}of t){let t=a||s,r=c.includes(s.split(".")[0])?`toString(${s})`:s;i.set(t,r),n&&o.set(t,n);let d=e[t];d&&"string"==typeof d&&(l.has(t)||l.set(t,new Set),l.get(t).add(d))}}catch(e){console.error("Error extracting attributes from data",e)}return Array.from(l.entries()).flatMap(([t,s])=>[...s].map(s=>({displayedKey:t,value:s,sql:i.get(t),lucene:o.get(t),source:e})))}function l(e){try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}},20699:e=>{e.exports={timelineRow:"TimelineChart_timelineRow__qebNk",timelineRowActive:"TimelineChart_timelineRowActive__V6ZZf",labelContainer:"TimelineChart_labelContainer__6r6Eb"}},24196:(e,t,s)=>{"use strict";s.d(t,{A:()=>$});var n=s(6029),a=s(75155),r=s(55729),l=s(1909),i=s(66692),o=s(54167),c=s(3635),d=s(21604),u=s(78550),m=s(92917);let h=Date.now();function p(e){let{databaseName:t,tableName:s,connectionId:n}=e;return{connection:n,from:{databaseName:t,tableName:s},timestampValueExpression:"",select:"",where:"",dateRange:[new Date(h-432e5),new Date(h)]}}function x(e){return{value:e,label:e}}function g(e){return null!==e.jsType}var f=s(75828),y=s.n(f),b=s(1885),v=s(37659),j=s(94193),_=s(8737),S=s(74860),w=s(45862),E=s.n(w);function C({inputRef:e,value:t,onChange:s,placeholder:a="Search your events for anything...",autocompleteOptions:l,size:i="sm",aboveSuggestions:o,belowSuggestions:c,showSuggestionsOnEmpty:d,suggestionsHeader:u="Properties",zIndex:h=999,onLanguageChange:p,language:x,onSubmit:g,queryHistoryType:f,"data-testid":w}){let[C,k]=(0,r.useState)(!1),[N,A]=(0,r.useState)(!1),T=(0,r.useCallback)(e=>{k(e),A(e)},[k]),[$,z]=(0,r.useState)("auto"),[I,L]=(0,r.useState)(720),[M,R]=(0,r.useState)(-1),[D,P]=(0,r.useState)(-1),[O,F]=(0,m.mk)(f),V=(0,r.useMemo)(()=>f&&O?O.map(e=>({value:e,label:e})):[],[O,f]),B=null!=t&&0===t.length&&V.length>0&&f,W=(0,r.useMemo)(()=>new b.A(l??[],{keys:["value"],threshold:0,ignoreLocation:!0}),[l]),H=(0,m.d7)(t??"",200),q=(0,r.useMemo)(()=>{let e=H.split(" "),t=e[e.length-1];return 0===t.length&&d?l??[]:W.search(t).map(e=>e.item)},[H,W,l,d]),X=n=>{R(-1),s(null==t?n:t.split(" ").slice(0,-1).join(" ")+`${t.split(" ").length>1?" ":""}${n}`),e.current?.focus()},Y=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{Y.current&&z(Y.current.clientWidth),e.current&&L(e.current.clientWidth)},[x,p,e]);let J="xs"===i?32:"lg"===i?44:38;return(0,n.jsx)("div",{className:E().root,style:{"--autocomplete-base-height":`${J}px`},"data-expanded":C?"true":void 0,children:(0,n.jsxs)(v.A,{opened:N,onChange:A,position:"bottom-start",offset:8,width:"target",withinPortal:!0,closeOnClickOutside:!0,closeOnEscape:!0,styles:{dropdown:{maxWidth:I>300?I:720,width:"100%",zIndex:h}},children:[(0,n.jsx)(v.A.Target,{children:(0,n.jsx)(j.T,{ref:e,placeholder:a,className:y()(E().textarea,!C&&E().collapseFade,C&&E().focused),value:t,size:i,autosize:!0,minRows:1,maxRows:C?4:1,"data-testid":w,onChange:e=>s(e.target.value),onFocus:()=>{R(-1),P(-1),T(!0)},onBlur:()=>{R(-1),P(-1),T(!1)},onKeyDown:e=>{"Escape"===e.key&&e.target instanceof HTMLTextAreaElement&&(e.preventDefault(),A(!1),e.target.blur()),"Tab"===e.key&&e.target instanceof HTMLTextAreaElement&&q.length>0&&M<q.length&&M>=0&&(e.preventDefault(),X(q[M].value)),"Enter"===e.key&&e.target instanceof HTMLTextAreaElement&&(q.length>0&&M<q.length&&M>=0?(e.preventDefault(),X(q[M].value)):e.shiftKey||(e.preventDefault(),f&&t&&F(t),g?.())),"ArrowDown"===e.key&&e.target instanceof HTMLTextAreaElement&&q.length>0&&R(Math.min(M+1,q.length-1,9)),"ArrowUp"===e.key&&e.target instanceof HTMLTextAreaElement&&q.length>0&&R(Math.max(M-1,0))},rightSectionWidth:$,rightSection:null!=x&&null!=p?(0,n.jsx)("div",{ref:Y,children:(0,n.jsx)(S.A,{language:x,onLanguageChange:p})}):void 0})}),(0,n.jsxs)(v.A.Dropdown,{className:E().dropdown,children:[null!=o&&(0,n.jsx)("div",{className:E().aboveSuggestions,children:o}),(0,n.jsx)("div",{children:q.length>0&&(0,n.jsxs)("div",{className:E().suggestionsSection,children:[(0,n.jsxs)("div",{className:E().suggestionsHeaderRow,children:[(0,n.jsx)("div",{className:E().suggestionsHeader,children:u}),q.length>10&&(0,n.jsxs)("div",{className:E().suggestionsLimit,children:["(Showing Top ",10,")"]})]}),q.slice(0,10).map(({value:e,label:t},s)=>(0,n.jsx)("div",{className:y()(E().suggestionItem,M===s&&E().selected),role:"button",onMouseOver:()=>{R(s)},onClick:()=>{X(e)},children:(0,n.jsx)("span",{className:E().suggestionLabel,children:t})},e))]})}),null!=c&&(0,n.jsx)("div",{className:E().belowSuggestions,children:c}),(0,n.jsx)("div",{children:B&&(0,n.jsxs)("div",{className:E().historySection,children:[(0,n.jsx)("div",{className:E().historyTitle,children:"Search History:"}),V.map(({value:e,label:t},a)=>(0,n.jsx)(_.N,{className:y()(E().historyItem,D===a&&E().selected),onMouseOver:()=>P(a),onClick:()=>{P(-1),s(e),F(e),A(!1),g?.()},children:(0,n.jsx)("span",{className:E().historyItemLabel,children:t})},e))]})})]})]})})}var k=s(67398),N=s.n(k);class A{formatFieldValue(e){return e.path.join(".")}formatFieldLabel(e){return`${e.path.join(".")} (${e.jsType})`}formatKeyValPair(e,t){return`${e}:"${t}"`}}let T=new A;function $(e){let t,s,h,f,y,b,v,j,_,S,w,E,k,A,$,z,I,L,M,R,D,P,O,F,V,B,W,H,q,X,Y,J,K,G,Z,U,Q,ee,et=(0,a.c)(78);et[0]!==e?({tableConnection:w,tableConnections:E,placeholder:_,size:S,zIndex:k,language:f,onLanguageChange:y,enableHotkey:h,onSubmit:b,additionalSuggestions:t,queryHistoryType:j,"data-testid":s,...v}=e,et[0]=e,et[1]=t,et[2]=s,et[3]=h,et[4]=f,et[5]=y,et[6]=b,et[7]=v,et[8]=j,et[9]=_,et[10]=S,et[11]=w,et[12]=E,et[13]=k):(t=et[1],s=et[2],h=et[3],f=et[4],y=et[5],b=et[6],v=et[7],j=et[8],_=et[9],S=et[10],w=et[11],E=et[12],k=et[13]);let es=void 0===_?"Search your events for anything...":_,en=void 0===S?"sm":S,{field:ea}=(0,l.as)(v),{onChange:er,value:el}=ea,ei=(0,u.Ge)(),eo=(0,r.useRef)(null),[ec,ed]=(0,r.useState)(""),eu=w||E;et[14]!==t||et[15]!==eu?(A={tableConnection:eu,additionalSuggestions:t},et[14]=t,et[15]=eu,et[16]=A):A=et[16];let em=function(e,t,s){let n,l,i,o,c,d,h,f,y,b,v,j,_,S,w=(0,a.c)(39),{tableConnection:E,additionalSuggestions:C}=s;w[0]!==E?(n=E?Array.isArray(E)?E:[E]:[],w[0]=E,w[1]=n):n=w[1];let{data:k}=(0,u.Sh)(n);if(w[2]!==C||w[3]!==k||w[4]!==e){let t=(k??[]).filter(g);l=new Map,i=[...t.map(t=>{let s={value:e.formatFieldValue(t),label:e.formatFieldLabel(t)};return l.set(s.value,t),s}),...C?.map(x)??[]],w[2]=C,w[3]=k,w[4]=e,w[5]=l,w[6]=i}else l=w[5],i=w[6];let N=i;w[7]!==l||w[8]!==N?(o={fieldCompleteOptions:N,fieldCompleteMap:l},w[7]=l,w[8]=N,w[9]=o):o=w[9];let{fieldCompleteOptions:A,fieldCompleteMap:T}=o,[$,z]=(0,r.useState)(null);w[10]!==T||w[11]!==t?(c=()=>{let e=T.get(t);e&&z(e)},d=[T,t],w[10]=T,w[11]=t,w[12]=c,w[13]=d):(c=w[12],d=w[13]),(0,r.useEffect)(c,d),w[14]!==e||w[15]!==$||w[16]!==t?(h=()=>{$&&(t.startsWith(e.formatFieldValue($))||z(null))},f=[$,z,t,e],w[14]=e,w[15]=$,w[16]=t,w[17]=h,w[18]=f):(h=w[17],f=w[18]),(0,r.useEffect)(h,f);let I=Array.isArray(E)?E.length>0?E[0]:void 0:E;w[19]!==I?(y=I??{tableName:"",databaseName:"",connectionId:""},w[19]=I,w[20]=y):y=w[20];let{data:L}=(0,u.n$)(y);w[21]!==L||w[22]!==$?(b=$&&L?[(0,m.uc)($.path,L)]:[],w[21]=L,w[22]=$,w[23]=b):b=w[23];let M=b;w[24]!==E?(v=(0,m.$r)(E).map(p),w[24]=E,w[25]=v):v=w[25];let R=v;w[26]!==R||w[27]!==M?(j={chartConfigs:R,keys:M},w[26]=R,w[27]=M,w[28]=j):j=w[28];let{data:D}=(0,u.nT)(j);e:{let t;if(!D||!$){_=A;break e}if(w[29]!==e||w[30]!==$||w[31]!==D){let s;w[33]!==e||w[34]!==$?(s=t=>t.value.flatMap(t=>{if("string"==typeof t){let s=e.formatKeyValPair(e.formatFieldValue($),t);return[{value:s,label:s}]}if("object"!=typeof t)return[];{let s=[];for(let[n,a]of Object.entries(t)){if("string"!=typeof n||"string"!=typeof a)return console.error("unknown type for autocomplete object ",t),[];let r=structuredClone($);r.path.push(n);let l=e.formatKeyValPair(e.formatFieldValue(r),a);s.push({value:l,label:l})}return s}}),w[33]=e,w[34]=$,w[35]=s):s=w[35],t=D.flatMap(s),w[29]=e,w[30]=$,w[31]=D,w[32]=t}else t=w[32];_=t}let P=_;return w[36]!==A||w[37]!==P?(S=(0,u.Ii)([A,P]),w[36]=A,w[37]=P,w[38]=S):S=w[38],S}(T,null!=el?`${el}`:"",A);et[17]!==ei||et[18]!==w||et[19]!==el?($=()=>{w&&(0,o.oU)({query:el,tableConnection:w,metadata:ei}).then(e=>{ed(e)})},z=[el,w,ei],et[17]=ei,et[18]=w,et[19]=el,et[20]=$,et[21]=z):($=et[20],z=et[21]),(0,r.useEffect)($,z),et[22]===Symbol.for("react.memo_cache_sentinel")?(I=["/","s"],et[22]=I):I=et[22],et[23]!==h?(L=()=>{h&&eo.current?.focus()},et[23]=h,et[24]=L):L=et[24],et[25]===Symbol.for("react.memo_cache_sentinel")?(M={preventDefault:!0,enableOnFormTags:!1,enableOnContentEditable:!1},et[25]=M):M=et[25],et[26]!==h?(R=[h],et[26]=h,et[27]=R):R=et[27],(0,i.vC)(I,L,M,R),et[28]===Symbol.for("react.memo_cache_sentinel")?(D=(0,n.jsx)("div",{className:N().searchingHeader,children:"Searching for:"}),et[28]=D):D=et[28];let eh=""===ec?"Matching all events, enter a query to search.":ec;return et[29]!==eh?(P=(0,n.jsxs)(n.Fragment,{children:[D,(0,n.jsx)("div",{className:N().searchingDescription,children:eh})]}),et[29]=eh,et[30]=P):P=et[30],et[31]===Symbol.for("react.memo_cache_sentinel")?(O=(0,n.jsx)("div",{className:N().examplesLabel,children:"Examples:"}),et[31]=O):O=et[31],et[32]===Symbol.for("react.memo_cache_sentinel")?(F=(0,n.jsx)("span",{className:N().exampleLabel,children:"Full Text:"}),et[32]=F):F=et[32],et[33]!==er||et[34]!==el?(V=(0,n.jsxs)("div",{className:N().exampleRow,children:[F,(0,n.jsx)("code",{className:N().exampleCode,role:"button",onClick:()=>{er(el+(el.length>0?" ":"")+"my log")},children:"my log"})]}),et[33]=er,et[34]=el,et[35]=V):V=et[35],et[36]===Symbol.for("react.memo_cache_sentinel")?(B=(0,n.jsx)("span",{className:N().exampleLabel,children:"Substring:"}),et[36]=B):B=et[36],et[37]!==er||et[38]!==el?(W=(0,n.jsxs)("div",{className:N().exampleRow,children:[B,(0,n.jsx)("code",{className:N().exampleCode,role:"button",onClick:()=>{er(el+(el.length>0?" ":"")+"*err*")},children:"*err*"})]}),et[37]=er,et[38]=el,et[39]=W):W=et[39],et[40]===Symbol.for("react.memo_cache_sentinel")?(H=(0,n.jsx)("span",{className:N().exampleLabel,children:"Exact:"}),et[40]=H):H=et[40],et[41]!==er||et[42]!==el?(q=(0,n.jsxs)("div",{className:N().exampleRow,children:[H,(0,n.jsxs)("code",{className:N().exampleCode,role:"button",onClick:()=>{er(el+(el.length>0?" ":"")+'level:"info"')},children:["level:",'"',"info",'"']})]}),et[41]=er,et[42]=el,et[43]=q):q=et[43],et[44]===Symbol.for("react.memo_cache_sentinel")?(X=(0,n.jsx)("span",{className:N().exampleLabel,children:"Not:"}),et[44]=X):X=et[44],et[45]!==er||et[46]!==el?(Y=(0,n.jsxs)("div",{className:N().exampleRow,children:[X,(0,n.jsx)("code",{className:N().exampleCode,role:"button",onClick:()=>{er(el+(el.length>0?" ":"")+"-level:info")},children:"-level:info"})]}),et[45]=er,et[46]=el,et[47]=Y):Y=et[47],et[48]===Symbol.for("react.memo_cache_sentinel")?(J=(0,n.jsx)("span",{className:N().exampleLabel,children:"Existence:"}),et[48]=J):J=et[48],et[49]!==er||et[50]!==el?(K=(0,n.jsxs)("div",{className:N().exampleRow,children:[J,(0,n.jsx)("code",{className:N().exampleCode,role:"button",onClick:()=>{er(el+(el.length>0?" ":"")+"service:*")},children:"service:*"})]}),et[49]=er,et[50]=el,et[51]=K):K=et[51],et[52]===Symbol.for("react.memo_cache_sentinel")?(G=(0,n.jsx)("span",{className:N().exampleLabel,children:"Boolean:"}),et[52]=G):G=et[52],et[53]!==er||et[54]!==el?(Z=(0,n.jsxs)("div",{className:N().exampleRow,children:[G,(0,n.jsx)("code",{className:N().exampleCode,role:"button",onClick:()=>{er(el+(el.length>0?" ":"")+'("foo" OR "bar")')},children:"(foo OR bar)"})]}),et[53]=er,et[54]=el,et[55]=Z):Z=et[55],et[56]===Symbol.for("react.memo_cache_sentinel")?(U=(0,n.jsx)("a",{className:N().docsLink,target:"_blank",href:"https://clickhouse.com/docs/use-cases/observability/clickstack/search",rel:"noreferrer",children:(0,n.jsxs)(c.Y,{gap:5,children:[(0,n.jsx)(d.A,{size:14}),(0,n.jsx)("span",{children:"Docs"})]})}),et[56]=U):U=et[56],et[57]!==V||et[58]!==W||et[59]!==q||et[60]!==Y||et[61]!==K||et[62]!==Z?(Q=(0,n.jsxs)(n.Fragment,{children:[O,V,W,q,Y,K,Z,U]}),et[57]=V,et[58]=W,et[59]=q,et[60]=Y,et[61]=K,et[62]=Z,et[63]=Q):Q=et[63],et[64]!==em||et[65]!==s||et[66]!==f||et[67]!==er||et[68]!==y||et[69]!==b||et[70]!==es||et[71]!==j||et[72]!==en||et[73]!==P||et[74]!==Q||et[75]!==el||et[76]!==k?(ee=(0,n.jsx)(C,{inputRef:eo,value:el,onChange:er,placeholder:es,autocompleteOptions:em,size:en,zIndex:k,language:f,onLanguageChange:y,onSubmit:b,queryHistoryType:j,"data-testid":s,aboveSuggestions:P,belowSuggestions:Q}),et[64]=em,et[65]=s,et[66]=f,et[67]=er,et[68]=y,et[69]=b,et[70]=es,et[71]=j,et[72]=en,et[73]=P,et[74]=Q,et[75]=el,et[76]=k,et[77]=ee):ee=et[77],ee}},24885:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(55729);let a=function(e,t="right"){let[s,a]=(0,n.useState)(e),r=(0,n.useRef)(0),l=(0,n.useRef)(0),i="top"===t||"bottom"===t,o=i?"clientY":"clientX",c="right"===t||"top"===t?-1:1,d=(0,n.useCallback)(e=>{let t=i?window.innerHeight:window.innerWidth,s=e[o]-r.current,n=i?window.innerHeight:document.body.offsetWidth;a(Math.min(Math.max(10,l.current+s/t*100*c),(n-25)/t*100))},[i,o,c]),u=(0,n.useCallback)(()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d]),m=(0,n.useCallback)(e=>{e.preventDefault(),r.current=e[o],l.current=s,document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)},[o,s,d,u]);return(0,n.useEffect)(()=>()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u)},[d,u]),{size:s,startResize:m}}},25156:()=>{},26355:(e,t,s)=>{"use strict";s.d(t,{A:()=>M});var n=s(6029),a=s(75155),r=s(55729),l=s(75828),i=s.n(l),o=s(70921),c=s(67549),d=s(40399),u=s(91544),m=s.n(u),h=s(59513),p=s.n(h),x=s(77494),g=s.n(x),f=s(97554),y=s.n(f),b=s(64022),v=s.n(b),j=s(84450),_=s.n(j),S=s(22273),w=s(33958),E=s(88302),C=s(74805),k=s(65723),N=s.n(k);let A=(0,o.eU)({normallyExpanded:!1}),T=r.memo(r.forwardRef((e,t)=>{let s=(0,a.c)(19),{value:r}=e;if(g()(r)){let e;return s[0]!==t?(e=(0,n.jsx)("span",{ref:t,className:N().null,children:"null"}),s[0]=t,s[1]=e):e=s[1],e}if(_()(r)){let e;return s[2]!==t||s[3]!==r?(e=(0,n.jsx)("span",{ref:t,className:N().string,children:r}),s[2]=t,s[3]=r,s[4]=e):e=s[4],e}if(y()(r)){let e;return s[5]!==t||s[6]!==r?(e=(0,n.jsx)("span",{ref:t,className:N().number,children:r}),s[5]=t,s[6]=r,s[7]=e):e=s[7],e}if(p()(r)){let e,a=r?"true":"false";return s[8]!==t||s[9]!==a?(e=(0,n.jsx)("span",{ref:t,className:N().boolean,children:a}),s[8]=t,s[9]=a,s[10]=e):e=s[10],e}if(v()(r)){let e,a;return s[11]!==r?(e=Object.keys(r),s[11]=r,s[12]=e):e=s[12],s[13]!==t||s[14]!==e.length?(a=(0,n.jsxs)("span",{ref:t,className:N().object,children:["{}"," ",e.length," keys"]}),s[13]=t,s[14]=e.length,s[15]=a):a=s[15],a}if(m()(r)){let e;return s[16]!==t||s[17]!==r.length?(e=(0,n.jsxs)("span",{ref:t,className:N().array,children:["[]"," ",r.length," items"]}),s[16]=t,s[17]=r.length,s[18]=e):e=s[18],e}return null})),$=r.memo(e=>{let t,s,r,l=(0,a.c)(12),{keyName:i,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}=e,{getLineActions:h}=(0,c.md)(A);e:{let e;if(h){let e;l[0]!==h||l[1]!==u||l[2]!==i||l[3]!==o||l[4]!==m||l[5]!==d?(e=h({key:i,keyPath:o,value:d,isInParsedJson:u,parsedJsonRootPath:m}),l[0]=h,l[1]=u,l[2]=i,l[3]=o,l[4]=m,l[5]=d,l[6]=e):e=l[6],t=e;break e}l[7]===Symbol.for("react.memo_cache_sentinel")?(e=[],l[7]=e):e=l[7],t=e}let p=t;return l[8]!==p?(s=p.map(R),l[8]=p,l[9]=s):s=l[9],l[10]!==s?(r=(0,n.jsx)("div",{className:N().lineMenu,children:s}),l[10]=s,l[11]=r):r=l[11],r}),z=r.memo(({keyName:e,keyPath:t,value:s,disableMenu:a,isInParsedJson:l=!1,parsedJsonRootPath:o=[]})=>{let{normallyExpanded:d}=(0,c.md)(A),{ref:u,hovered:h}=(0,S.M)(),p=r.useMemo(()=>{if(!_()(s))return!1;try{if(s.startsWith("{")&&s.endsWith("}")||s.startsWith("[")&&s.endsWith("]"))return!!JSON.parse(s)}catch(e){return!1}},[s]),[x,g]=r.useState(d&&!p);r.useEffect(()=>{g(d&&!p)},[p,d]);let f=r.useMemo(()=>v()(s)&&Object.keys(s).length>0||m()(s)&&s.length>0||p,[p,s]),y=r.useCallback(()=>{f&&g(e=>!e)},[f]),b=r.useMemo(()=>{if(p)try{return JSON.parse(s)}catch(e){return null}return s},[p,s]),j=t.length,k=r.useMemo(()=>[...t,e],[e,t]),z=l||p,L=r.useMemo(()=>p?k:o,[p,k,o]),M=r.useRef(null),[R,D]=r.useState(!1),P=r.useCallback(()=>{D(!0)},[]),O=r.useCallback(()=>{D(!1)},[]);return r.useEffect(()=>{let e=M.current;return e?.addEventListener("selectstart",P),e?.addEventListener("mouseup",O),()=>{e?.removeEventListener("selectstart",P),e?.removeEventListener("mouseup",O)}},[O,P]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{ref:u,onClick:y,className:i()(N().line,{[N().nestedLine]:j>0,[N().expanded]:x,[N().expandable]:f}),style:{marginLeft:16*j},children:[(0,n.jsx)("div",{className:N().keyContainer,children:(0,n.jsxs)("div",{className:N().key,children:[f&&(x?(0,n.jsx)(w.A,{size:10}):(0,n.jsx)(E.A,{size:10})),e,(0,n.jsx)("div",{className:N().hoverContent,children:(0,n.jsx)(C.A,{size:14})})]})}),(0,n.jsx)("div",{className:N().valueContainer,children:p?x?(0,n.jsxs)("div",{className:N().object,children:["{}"," Parsed JSON"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T,{value:s,ref:M}),(0,n.jsx)("div",{className:N().jsonBtn,children:"Expand JSON"})]}):(0,n.jsx)(T,{value:s,ref:M})}),h&&!a&&!R&&(0,n.jsx)($,{keyName:e,keyPath:k,value:s,isInParsedJson:l,parsedJsonRootPath:o})]},e),x&&f&&(0,n.jsx)(I,{data:b,keyPath:k,disableMenu:a,isInParsedJson:z,parsedJsonRootPath:L})]})});function I(e){let t,s,l,o,c,d,u,m=(0,a.c)(22),{data:h,keyPath:p,disableMenu:x,isInParsedJson:g,parsedJsonRootPath:f}=e;m[0]!==p?(t=void 0===p?[]:p,m[0]=p,m[1]=t):t=m[1];let y=t,b=void 0!==x&&x,v=void 0!==g&&g;m[2]!==f?(s=void 0===f?[]:f,m[2]=f,m[3]=s):s=m[3];let j=s,[_,S]=r.useState(!1);m[4]!==h?(l=Object.keys(h),m[4]=h,m[5]=l):l=m[5];let w=l.length;m[6]!==h||m[7]!==_?(o=_?Object.entries(h):Object.entries(h).slice(0,50),m[6]=h,m[7]=_,m[8]=o):o=m[8];let E=o,C=y?.length||0;return m[9]!==b||m[10]!==v||m[11]!==y||m[12]!==j||m[13]!==E?(c=E.map(e=>{let[t,s]=e;return(0,n.jsx)(z,{keyName:t,value:s,keyPath:y,disableMenu:b,isInParsedJson:v,parsedJsonRootPath:j},t)}),m[9]=b,m[10]=v,m[11]=y,m[12]=j,m[13]=E,m[14]=c):c=m[14],m[15]!==_||m[16]!==C||m[17]!==w?(d=w>50&&!_&&(0,n.jsx)("div",{className:i()(N().line,N().nestedLine,N().expandable),style:{marginLeft:16*C},onClick:()=>S(!0),children:(0,n.jsx)("div",{className:N().keyContainer,children:(0,n.jsxs)("div",{className:N().jsonBtn,children:["Expand ",w-50," more properties"]})})}),m[15]=_,m[16]=C,m[17]=w,m[18]=d):d=m[18],m[19]!==d||m[20]!==c?(u=(0,n.jsxs)(n.Fragment,{children:[c,d]}),m[19]=d,m[20]=c,m[21]=u):u=m[21],u}let L=e=>{let t,s,n,l=(0,a.c)(6),{children:i,initialValues:o}=e;l[0]!==o?(t=[[A,o]],l[0]=o,l[1]=t):t=l[1],(0,d.RH)(t);let u=(0,c.Xr)(A);return l[2]!==o||l[3]!==u?(s=()=>{u(o)},n=[o,u],l[2]=o,l[3]=u,l[4]=s,l[5]=n):(s=l[4],n=l[5]),r.useEffect(s,n),i},M=e=>{let t,s,r,l,o,d,u=(0,a.c)(17),{data:m,normallyExpanded:h,tabulate:p,lineWrap:x,getLineActions:g}=e,f=void 0!==h&&h,y=void 0!==p&&p;u[0]!==m?(t=Object.keys(m),u[0]=m,u[1]=t):t=u[1];let b=0===t.length;return u[2]!==g||u[3]!==f?(s={normallyExpanded:f,getLineActions:g},u[2]=g,u[3]=f,u[4]=s):s=u[4],u[5]!==x||u[6]!==y?(r=i()(N().container,{[N().withTabulate]:y,[N().withLineWrap]:x}),u[5]=x,u[6]=y,u[7]=r):r=u[7],u[8]!==m||u[9]!==b?(l=b?(0,n.jsx)("div",{children:"Empty"}):(0,n.jsx)(I,{data:m}),u[8]=m,u[9]=b,u[10]=l):l=u[10],u[11]!==r||u[12]!==l?(o=(0,n.jsx)("div",{className:r,children:l}),u[11]=r,u[12]=l,u[13]=o):o=u[13],u[14]!==s||u[15]!==o?(d=(0,n.jsx)(c.Kq,{children:(0,n.jsx)(L,{initialValues:s,children:o})}),u[14]=s,u[15]=o,u[16]=d):d=u[16],d};function R(e){return(0,n.jsx)("button",{title:e.title,className:N().lineMenuBtn,onClick:t=>{e.onClick(),t.stopPropagation()},children:e.label},e.key)}},26674:(e,t,s)=>{"use strict";s.d(t,{S:()=>a,Y:()=>r});var n=s(55729);let a=(0,n.createContext)(0);function r(){return(0,n.useContext)(a)}},26837:(e,t,s)=>{"use strict";s.d(t,{W:()=>eS});var n=s(6029),a=s(55729),r=s(75155),l=s(84450),i=s.n(l),o=s(16943),c=s.n(o),d=s(82641),u=s(60481),m=s(45005),h=s(43517),p=s(78253),x=s(81973),g=s(18006),f=s(37901),y=s(65081),b=s(50374),v=s(64441),j=s(94937),_=s(75828),S=s.n(_),w=s(7913),E=s(63085),C=s(25062),k=s(94720),N=s(3635),A=s(70114),T=s(23474),$=s(54134),z=s(58333),I=s(7565),L=s(94364),M=s(72075),R=s(66773),D=s.n(R);let P=e=>{let t,s,a,l,i,o,c,d=(0,r.c)(19),{filename:u,function:m,lineno:h,colno:p,isLoading:x}=e,g=x?.8:1,f=x?"blur(1px)":"none";return d[0]!==g||d[1]!==f?(t={opacity:g,filter:f},d[0]=g,d[1]=f,d[2]=t):t=d[2],d[3]!==p||d[4]!==h?(s=(0,n.jsxs)("span",{children:[":",h,":",p]}),d[3]=p,d[4]=h,d[5]=s):s=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("span",{children:" in "}),d[6]=a):a=d[6],d[7]!==m?(l=m&&(0,n.jsx)("span",{style:{background:"#ffffff10",padding:"0 4px",borderRadius:4},children:m}),d[7]=m,d[8]=l):l=d[8],d[9]!==u||d[10]!==t||d[11]!==s||d[12]!==l?(i=(0,n.jsxs)("div",{className:" fs-8",style:t,children:[u,s,a,l]}),d[9]=u,d[10]=t,d[11]=s,d[12]=l,d[13]=i):i=d[13],d[14]!==x?(o=x&&(0,n.jsx)(k.a,{size:"xs",color:"gray"}),d[14]=x,d[15]=o):o=d[15],d[16]!==i||d[17]!==o?(c=(0,n.jsxs)(N.Y,{gap:"xs",display:"inline-flex",children:[i,o]}),d[16]=i,d[17]=o,d[18]=c):c=d[18],c},O=e=>{let t,s,l,i,o,c,d=(0,r.c)(15),{title:u,children:m,initiallyCollapsed:h}=e,[p,x]=a.useState(h??!1);return d[0]!==p?(t=()=>x(!p),s=p?(0,n.jsx)(A.A,{size:14,className:"me-2"}):(0,n.jsx)(T.A,{size:14,className:"me-2"}),d[0]=p,d[1]=t,d[2]=s):(t=d[1],s=d[2]),d[3]!==u?(l=(0,n.jsx)("div",{className:"fs-7",children:u}),d[3]=u,d[4]=l):l=d[4],d[5]!==t||d[6]!==s||d[7]!==l?(i=(0,n.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,l]}),d[5]=t,d[6]=s,d[7]=l,d[8]=i):i=d[8],d[9]!==m||d[10]!==p?(o=p?null:(0,n.jsx)("div",{className:"mb-4",children:m}),d[9]=m,d[10]=p,d[11]=o):o=d[11],d[12]!==i||d[13]!==o?(c=(0,n.jsxs)("div",{className:"my-3",children:[i,o]}),d[12]=i,d[13]=o,d[14]=c):c=d[14],c},F=e=>{let t,s,a=(0,r.c)(5),{children:l,title:i}=e;return a[0]!==i?(t=i&&(0,n.jsx)("div",{className:D().panelSectionWrapperTitle,children:i}),a[0]=i,a[1]=t):t=a[1],a[2]!==l||a[3]!==t?(s=(0,n.jsxs)("div",{className:D().panelSectionWrapper,children:[t,l]}),a[2]=l,a[3]=t,a[4]=s):s=a[4],s},V=e=>{let t,s,a,l,i=(0,r.c)(8),{label:o,value:c}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={paddingRight:20,marginRight:12,borderRight:"1px solid #ffffff20"},i[0]=t):t=i[0],i[1]!==o?(s=(0,n.jsx)("div",{children:o}),i[1]=o,i[2]=s):s=i[2],i[3]!==c?(a=(0,n.jsx)("div",{className:"fs-7",children:c}),i[3]=c,i[4]=a):a=i[4],i[5]!==s||i[6]!==a?(l=(0,n.jsxs)("div",{style:t,children:[s,a]}),i[5]=s,i[6]=a,i[7]=l):l=i[7],l},B=e=>{let t,s=(0,r.c)(3),{onClick:a,isOpen:l}=e,i=l?"chevron-up":"chevron-down";return s[0]!==a||s[1]!==i?(t=(0,n.jsx)(M.L,{label:"",biIcon:i,onClick:a}),s[0]=a,s[1]=i,s[2]=t):t=s[2],t},W=[{accessorKey:"filename",cell:e=>{let t,s,l,i,o,c,d,u,m,h=(0,r.c)(31),{row:p,table:x}=e,g=x.options.meta,[f,y]=a.useState(p.index===g.firstFrameIndex);h[0]!==f?(t=()=>{y(!f)},h[0]=f,h[1]=t):t=h[1];let b=t,v=p.original,{isLoading:j,enrichedFrame:_}=(0,L.f)(v),w=_??v,C=!!w.context_line;return h[2]!==C?(s=S()("w-100 py-2 px-4 d-flex justify-content-between align-items-center",{[D().stacktraceRowInteractive]:C}),h[2]=C,h[3]=s):s=h[3],h[4]!==w.in_app?(l=!w.in_app&&(0,n.jsx)(E.m,{label:"in_app: false",position:"top",withArrow:!0,color:"gray",children:(0,n.jsx)($.A,{size:14,className:"me-2","aria-label":"in_app: false"})}),h[4]=w.in_app,h[5]=l):l=h[5],h[6]!==w||h[7]!==j?(i=w&&(0,n.jsx)(P,{colno:w.colno,filename:w.filename,lineno:w.lineno,function:w.function,isLoading:j}),h[6]=w,h[7]=j,h[8]=i):i=h[8],h[9]!==l||h[10]!==i?(o=(0,n.jsxs)("div",{children:[l,i]}),h[9]=l,h[10]=i,h[11]=o):o=h[11],h[12]!==b||h[13]!==C||h[14]!==f?(c=C&&(0,n.jsx)(B,{onClick:b,isOpen:f}),h[12]=b,h[13]=C,h[14]=f,h[15]=c):c=h[15],h[16]!==b||h[17]!==s||h[18]!==o||h[19]!==c?(d=(0,n.jsxs)("div",{className:s,onClick:b,children:[o,c]}),h[16]=b,h[17]=s,h[18]=o,h[19]=c,h[20]=d):d=h[20],h[21]!==w.context_line||h[22]!==w.lineno||h[23]!==w.post_context||h[24]!==w.pre_context||h[25]!==C||h[26]!==f?(u=f&&C&&(0,n.jsxs)("pre",{className:D().lineContext,children:[w.pre_context?.map((e,t)=>(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:D().lineContextLineNo,children:(w.lineno??0)-(w.pre_context?.length??0)+t}),e]},e+t)),w.context_line&&(0,n.jsxs)("div",{className:D().lineContextCurrentLine,children:[(0,n.jsx)("span",{className:D().lineContextLineNo,children:w.lineno}),w.context_line]}),w.post_context?.map((e,t)=>(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:D().lineContextLineNo,children:w.lineno+t+1}),e]},e+t))]}),h[21]=w.context_line,h[22]=w.lineno,h[23]=w.post_context,h[24]=w.pre_context,h[25]=C,h[26]=f,h[27]=u):u=h[27],h[28]!==d||h[29]!==u?(m=(0,n.jsxs)(n.Fragment,{children:[d,u]}),h[28]=d,h[29]=u,h[30]=m):m=h[30],m}}],H=e=>{let t,s=(0,r.c)(2),{url:a}=e;return s[0]!==a?(t=(0,n.jsx)("span",{title:a,children:a}),s[0]=a,s[1]=t):t=s[1],t},q=a.memo(e=>{let t,s=(0,r.c)(3),{status:a}=e;if(!a)return null;let l=a>=500?"text-danger bg-danger":a>=400?"text-warning bg-warning":"text-success bg-success",i=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${l}`;return s[0]!==a||s[1]!==i?(t=(0,n.jsx)("span",{className:i,children:a}),s[0]=a,s[1]=i,s[2]=t):t=s[2],t}),X=a.memo(e=>{let t,s=(0,r.c)(3),{level:a}=e;if(!a)return null;let l=a.includes("error")?"text-danger bg-danger":a.includes("warn")||a.includes("warning")?"text-warning bg-warning":"bg-muted",i=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${l}`;return s[0]!==a||s[1]!==i?(t=(0,n.jsx)("span",{className:i,children:a}),s[0]=a,s[1]=i,s[2]=t):t=s[2],t}),Y=[{accessorKey:"category",header:"Category",size:180,cell:({row:e})=>(0,n.jsxs)("span",{className:"d-flex align-items-center gap-2",children:[e.original.category,"console"===e.original.category&&(0,n.jsx)(X,{level:e.original.level}),"fetch"===e.original.category||"xhr"===e.original.category?(0,n.jsx)(q,{status:e.original.data?.status_code}):null]})},{accessorKey:"message",header:"Data",size:99999,cell:({row:e})=>{if(e.original.data&&("fetch"===e.original.category||"xhr"===e.original.category)){let{method:t,url:s}=e.original.data;return(0,n.jsxs)("div",{className:"text-truncate",children:[(0,n.jsxs)("span",{children:[t," "]}),(0,n.jsx)("span",{title:s,children:(0,n.jsx)(H,{url:s})})]})}if("navigation"===e.original.category&&e.original.data){let{from:t,to:s}=e.original.data;return(0,n.jsxs)("div",{className:"text-truncate",children:[(0,n.jsx)("span",{title:t,children:(0,n.jsx)(H,{url:t})}),(0,n.jsx)("span",{children:" → "}),(0,n.jsx)("span",{title:s,children:(0,n.jsx)(H,{url:s})})]})}if("console"===e.original.category){let{message:t}=e.original;return(0,n.jsx)("pre",{className:"mb-0 text-truncate fs-8",title:t,children:t})}return e.original.message?(0,n.jsx)("div",{className:"text-truncate",children:e.original.message}):(0,n.jsx)("span",{className:"text-muted",children:"Empty"})}},{header:"Timestamp",size:220,cell:({row:e})=>(0,n.jsx)("span",{className:"text-muted",children:(0,n.jsx)(I.H,{value:1e3*e.original.timestamp,format:"withMs"})})}],J=e=>{let t,s,n,l=(0,r.c)(11),{rows:i,maxRows:o}=e,c=void 0===o?5:o,[d,u]=a.useState(!1);l[0]!==d||l[1]!==c||l[2]!==i?(t=d?i:i.slice(0,c),l[0]=d,l[1]=c,l[2]=i,l[3]=t):t=l[3];let m=t,h=i.length??0,p=h>c?h-c:null;l[4]!==d?(s=()=>{u(!d)},l[4]=d,l[5]=s):s=l[5];let x=s;return l[6]!==x||l[7]!==p||l[8]!==d||l[9]!==m?(n={visibleRows:m,hiddenRowsCount:p,handleToggleMoreRows:x,isExpanded:d},l[6]=x,l[7]=p,l[8]=d,l[9]=m,l[10]=n):n=l[10],n},K=e=>{let t,s,a,l,i,o,c,d,u,m,p,x,g,f,y=(0,r.c)(42),{logData:b,breadcrumbs:v,exceptionValues:j}=e,_=j[0];_?.stacktrace?.frames;e:{let e;if(!_?.stacktrace?.frames){let e;y[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],y[0]=e):e=y[0],t=e;break e}y[1]!==_?.stacktrace.frames?(e=_?.stacktrace.frames.slice().reverse(),y[1]=_?.stacktrace.frames,y[2]=e):e=y[2],t=e}let S=t;if(y[3]!==S){let e=S&&S.length?S.find(e=>e.in_app)??S.find(e=>!!e.function||!!e.filename)??S[0]:null;s=e?S.indexOf(e):-1,y[3]=S,y[4]=s}else s=y[4];let E=s;y[5]!==v||y[6]!==_||y[7]!==b?.timestamp?(a=()=>[..._&&v?[{category:"exception",timestamp:new Date(b?.timestamp??0).getTime()/1e3,message:`${_.type}: ${_.value} `}]:[],...v?.slice().reverse()??[]],y[5]=v,y[6]=_,y[7]=b?.timestamp,y[8]=a):a=y[8],b?.timestamp,y[9]!==a?(l=a(),y[9]=a,y[10]=l):l=y[10];let k=l,N=Math.max(5,E+1);y[11]!==S||y[12]!==N?(i={rows:S,maxRows:N},y[11]=S,y[12]=N,y[13]=i):i=y[13];let{handleToggleMoreRows:A,hiddenRowsCount:$,visibleRows:I,isExpanded:L}=J(i);y[14]!==k?(o={rows:k},y[14]=k,y[15]=o):o=y[15];let{handleToggleMoreRows:R,hiddenRowsCount:D,visibleRows:P,isExpanded:B}=J(o);return y[16]!==_?(c=_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(h.E,{fw:"bold",component:"span",size:"sm",variant:"danger",children:[_.type,":"," "]}),(0,n.jsx)("span",{className:"text-muted",children:_.value})]}),_.mechanism&&(0,n.jsxs)("div",{className:"d-flex gap-2 flex-wrap pt-3",children:[(0,n.jsx)(V,{label:"mechanism",value:_.mechanism?.type}),(0,n.jsx)(V,{label:"handled",value:_.mechanism?.handled?(0,n.jsx)("span",{className:"text-success",children:"true"}):(0,n.jsx)("span",{className:"text-danger",children:"false"})}),_.mechanism?.data?.function?(0,n.jsx)(V,{label:"function",value:_.mechanism.data.function}):null,_.mechanism?.data?.handler?(0,n.jsx)(V,{label:"handler",value:_.mechanism.data.handler}):null,_.mechanism?.data?.target?(0,n.jsx)(V,{label:"target",value:_.mechanism.data.target}):null]})]}),y[16]=_,y[17]=c):c=y[17],y[18]!==E?(d={firstFrameIndex:E},y[18]=E,y[19]=d):d=y[19],y[20]!==I||y[21]!==d?(u=(0,n.jsx)(w.ErrorBoundary,{onError:G,fallbackRender:Z,children:(0,n.jsx)(M.X,{hideHeader:!0,columns:W,data:I,density:"zero",tableMeta:d})}),y[20]=I,y[21]=d,y[22]=u):u=y[22],y[23]!==j[0].stacktrace?(m="string"==typeof j[0].stacktrace&&(0,n.jsx)("pre",{className:"px-4",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:j[0].stacktrace}),y[23]=j[0].stacktrace,y[24]=m):m=y[24],y[25]!==A||y[26]!==L||y[27]!==$?(p=$?(0,n.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:A,children:L?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.A,{size:14,className:"me-2"})," Hide stack trace"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T.A,{size:14,className:"me-2"}),"Show ",$," more frames"]})}):null,y[25]=A,y[26]=L,y[27]=$,y[28]=p):p=y[28],y[29]!==u||y[30]!==m||y[31]!==p||y[32]!==c?(x=(0,n.jsxs)(F,{title:c,children:[u,m,p]}),y[29]=u,y[30]=m,y[31]=p,y[32]=c,y[33]=x):x=y[33],y[34]!==B||y[35]!==D||y[36]!==P||y[37]!==R?(g=P.length>0&&(0,n.jsx)(O,{title:"Breadcrumbs",children:(0,n.jsxs)(F,{children:[(0,n.jsx)(M.X,{columns:Y,data:P,emptyMessage:"No breadcrumbs found"}),D?(0,n.jsx)(C.$,{variant:"secondary",size:"xs",m:"xs",onClick:R,children:B?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.A,{size:14,className:"me-2"})," Hide breadcrumbs"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T.A,{size:14,className:"me-2"}),"Show ",D," more breadcrumbs"]})}):null]})}),y[34]=B,y[35]=D,y[36]=P,y[37]=R,y[38]=g):g=y[38],y[39]!==x||y[40]!==g?(f=(0,n.jsxs)("div",{children:[x,g]}),y[39]=x,y[40]=g,y[41]=f):f=y[41],f};function G(e){console.error(e)}function Z(){return(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering stacktrace"})}var U=s(65234),Q=s.n(U),ee=s(21510),et=s(60665),es=s(34027),en=s(26355),ea=s(78694);let er=function(e){let t="";return e&&(t=` ${({GET:"-X GET",POST:"-X POST",PUT:"-X PUT",PATCH:"-X PATCH",DELETE:"-X DELETE"})[e.toUpperCase()]}`)," \\\n"+t},el=function(e){let t="";return e&&e.map(([e,s])=>{t+=` \\
-H "${e}: ${s.replace(/(\\|")/g,"\\$1")}"`}),t},ei=function(e){let t="";return e&&(t+=` \\
-d "${JSON.stringify(e).replace(/(\\|")/g,"\\$1")}"`),t},eo=function(e){let t="";return e&&(t+=` \\
--data-raw ${/[\0-\x1F\x7F-\x9F!]|\'/.test(e)?"$'"+e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(e){let t=e.charCodeAt(0).toString(16);for(;t.length<4;)t="0"+t;return"\\u"+t})+"'":"'"+e+"'"}`),t},ec=function(e){let t="";return e&&Object.keys(e).forEach(s=>{let n=s.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`);if(e[s])"boolean"==typeof e[s]&&e[s]?t+=`--${n} `:"string"==typeof e[s]&&(t+=`--${n} ${e[s]} `);else throw Error(`Invalid Curl option ${s}`)}),t?` \\
${t}`:t},ed=function(e,t){let s="curl ";return s+=e.url,s+=er(e.method),s+=el(e.headers),s+="string"==typeof e.body?eo(e.body):ei(e.body),(s+=ec(t)).trim()},eu={base00:"#00000000",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#8378FF",base0E:"#ae81ff",base0F:"#cc6633"},em=(e,t)=>Object.entries(c()(t,(t,s)=>s.startsWith(e))).flatMap(([t,s])=>{let n=s;try{"string"==typeof s&&(n=JSON.parse(s))}catch(e){}let a=t.replace(e,"").replace("_","-"),r=[[a,`${n}`]];if(Array.isArray(n))r=n.map(e=>[a,`${e}`]);else if("object"==typeof n&&Object.keys(n).length>0)try{r=[[a,`${JSON.stringify(n)}`]]}catch(e){console.error(e)}return r}),eh=({body:e,theme:t,emptyMessage:s,notCollectedMessage:r})=>{let l=a.useCallback(e=>(0,n.jsx)("pre",{className:"d-inline text-break",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e}),[]),i=a.useMemo(()=>{if("string"!=typeof e)return null;try{if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))return JSON.parse(e)}catch(e){return null}},[e]);return(0,n.jsx)(n.Fragment,{children:null!=e&&""!=e?(0,n.jsx)("pre",{className:"m-0 px-4 py-3",style:{wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:i?(0,n.jsx)(en.A,{data:i,normallyExpanded:!0}):"string"==typeof e?e:(0,n.jsx)(ee.d,{hideRoot:!0,invertTheme:!1,data:e,theme:t,valueRenderer:l})}):""===e?(0,n.jsx)("div",{className:"px-4 py-3",children:s}):(0,n.jsx)("div",{className:"px-4 py-3",children:r})})};function ep(e){let t,s,a,l,i,o,c,d,u,m,h,p,x,g,f,y=(0,r.c)(41),{eventAttributes:b}=e;y[0]!==b?(t=em("http.request.header.",b),y[0]=b,y[1]=t):t=y[1];let v=t;y[2]!==b?(s=em("http.response.header.",b),y[2]=b,y[3]=s):s=y[3];let j=s,_=b["http.url"],S=b["net.peer.ip"],w=b["http.status_code"],E=b["http.method"],k=b["http.request.body"],N=b["http.response.body"];y[4]!==E||y[5]!==k||y[6]!==v||y[7]!==_?(a=ed({method:E,headers:v,url:_,body:k}),y[4]=E,y[5]=k,y[6]=v,y[7]=_,y[8]=a):a=y[8];let A=a;return _||E||w?(y[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsxs)(C.$,{size:"xs",variant:"primary",children:[(0,n.jsx)(es.A,{size:14,className:"me-2"}),"Copy Request as Curl"]}),y[9]=l):l=y[9],y[10]!==A?(i=(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(Q(),{text:A,onCopy:ex,children:l})}),y[10]=A,y[11]=i):i=y[11],y[12]!==_?(o=_&&{label:"URL",value:_},y[12]=_,y[13]=o):o=y[13],y[14]!==E?(c=E&&{label:"Method",value:E},y[14]=E,y[15]=c):c=y[15],y[16]!==S?(d=S&&{label:"Remote Address",value:S},y[16]=S,y[17]=d):d=y[17],y[18]!==b||y[19]!==w?(u=w&&{label:"Status",value:`${w} ${b["http.status_text"]??""}`,className:w>=500?"text-danger":w>=400?"text-warning":"text-success"},y[18]=b,y[19]=w,y[20]=u):u=y[20],y[21]!==o||y[22]!==c||y[23]!==d||y[24]!==u?(m=(0,n.jsx)(ea.$K,{children:(0,n.jsx)(M.X,{borderless:!0,density:"compact",columns:ea.Qx,data:[o,c,d,u].filter(Boolean),hideHeader:!0})}),y[21]=o,y[22]=c,y[23]=d,y[24]=u,y[25]=m):m=y[25],y[26]!==v?(h=v.length>0&&(0,n.jsx)(ea.iV,{title:`Request Headers (${v.length})`,initiallyCollapsed:!0,children:(0,n.jsx)(ea.$K,{children:(0,n.jsx)(M.X,{borderless:!0,hideHeader:!0,density:"compact",columns:ea.hF,data:v,emptyMessage:"No request headers collected"})})}),y[26]=v,y[27]=h):h=y[27],y[28]!==k?(p=null!=k&&(0,n.jsx)(ea.iV,{title:"Request Body",children:(0,n.jsx)(ea.$K,{children:(0,n.jsx)(eh,{body:k,theme:eu,emptyMessage:"Empty request",notCollectedMessage:"No request body collected"})})}),y[28]=k,y[29]=p):p=y[29],y[30]!==j?(x=j.length>0&&(0,n.jsx)(ea.iV,{title:`Response Headers (${j.length})`,initiallyCollapsed:!0,children:(0,n.jsx)(ea.$K,{children:(0,n.jsx)(M.X,{borderless:!0,hideHeader:!0,density:"compact",columns:ea.hF,data:j,emptyMessage:"No response headers collected"})})}),y[30]=j,y[31]=x):x=y[31],y[32]!==N?(g=null!=N&&(0,n.jsx)(ea.iV,{title:"Response Body",children:(0,n.jsx)(ea.$K,{children:(0,n.jsx)(eh,{body:N,theme:eu,emptyMessage:"Empty response",notCollectedMessage:"No response body collected"})})}),y[32]=N,y[33]=g):g=y[33],y[34]!==m||y[35]!==h||y[36]!==p||y[37]!==x||y[38]!==g||y[39]!==i?(f=(0,n.jsxs)("div",{children:[i,m,h,p,x,g]}),y[34]=m,y[35]=h,y[36]=p,y[37]=x,y[38]=g,y[39]=i,y[40]=f):f=y[40],f):null}function ex(){et.$e.show({color:"green",message:"Curl command copied to clipboard"})}let eg=[{accessorKey:"Timestamp",header:"Timestamp",size:120,cell:({row:e})=>(0,n.jsx)("span",{className:"text-muted",title:e.original.Timestamp,children:(0,n.jsx)(I.H,{value:new Date(e.original.Timestamp).getTime(),format:"withMs"})})},{accessorKey:"Name",header:"Name",size:180,cell:({row:e})=>(0,n.jsx)("span",{className:"d-flex align-items-center gap-2",children:e.original.Name})},{accessorKey:"Attributes",header:"Attributes",size:400,cell:({row:e})=>{let t=e.original.Attributes;return t&&Object.keys(t).length>0?(0,n.jsx)(u.a,{children:(0,n.jsx)(y.z,{data:t})}):(0,n.jsx)("span",{className:"text-muted",children:"Empty"})}}],ef=e=>{let t,s,a,l,i,o=(0,r.c)(15),{spanEvents:c}=e;e:{let e;if(!c||0===c.length){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}o[1]!==c?(e=[...c.filter(ey)].sort(eb),o[1]=c,o[2]=e):e=o[2],t=e}let d=t;o[3]!==d?(s={rows:d,maxRows:5},o[3]=d,o[4]=s):s=o[4];let{handleToggleMoreRows:u,hiddenRowsCount:m,visibleRows:h,isExpanded:p}=J(s);if(!d||0===d.length){let e;return o[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"p-3 text-muted fs-7",children:"No span events available for this trace"}),o[5]=e):e=o[5],e}return o[6]!==h?(a=(0,n.jsx)(w.ErrorBoundary,{onError:ev,fallbackRender:ej,children:(0,n.jsx)(M.X,{columns:eg,data:h,emptyMessage:"No span events found"})}),o[6]=h,o[7]=a):a=o[7],o[8]!==u||o[9]!==m||o[10]!==p?(l=m?(0,n.jsx)(C.$,{variant:"secondary",size:"xs",my:"sm",onClick:u,children:p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.A,{size:14,className:"me-2"})," Hide events"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T.A,{size:14,className:"me-2"}),"Show ",m," more events"]})}):null,o[8]=u,o[9]=m,o[10]=p,o[11]=l):l=o[11],o[12]!==a||o[13]!==l?(i=(0,n.jsx)("div",{children:(0,n.jsxs)(F,{children:[a,l]})}),o[12]=a,o[13]=l,o[14]=i):i=o[14],i};function ey(e){return"string"==typeof e.Timestamp&&"string"==typeof e.Name&&void 0!==e.Attributes}function eb(e,t){let s=new Date(e.Timestamp).getTime();return new Date(t.Timestamp).getTime()-s}function ev(e){console.error(e)}function ej(){return(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering span events"})}let e_={};function eS(e){let t,s,l,o,_,S,w,E,C,k,N,A,T,$,z,I,L,M,R,D,P,O,F,V,B,W,H,q,X,Y,J=(0,r.c)(96),{source:G,rowId:Z,aliasWith:U,hideHeader:Q,"data-testid":ee}=e,et=void 0!==Q&&Q;J[0]!==U||J[1]!==Z||J[2]!==G?(t={source:G,rowId:Z,aliasWith:U},J[0]=U,J[1]=Z,J[2]=G,J[3]=t):t=J[3];let{data:es}=(0,f.k1)(t),{onPropertyAddClick:en,generateSearchUrl:ea}=(0,a.useContext)(b.D);J[4]!==G.highlightedRowAttributeExpressions||J[5]!==G.kind?(s=G.kind===d.GL.Trace||G.kind===d.GL.Log?G.highlightedRowAttributeExpressions??[]:[],J[4]=G.highlightedRowAttributeExpressions,J[5]=G.kind,J[6]=s):s=J[6];let er=s;J[7]!==er||J[8]!==es||J[9]!==G?(l=es?(0,g.N4)(G,er,es.data||[],es.meta||[]):[],J[7]=er,J[8]=es,J[9]=G,J[10]=l):l=J[10];let el=l,ei=es?.meta;J[11]!==ei?(o=(0,f.bn)(ei),J[11]=ei,J[12]=o):o=J[12];let eo=o,ec=G.eventAttributesExpression;e:{let e,t;J[13]!==es?.data?.[0]?(e=es?.data?.[0]??{},J[13]=es?.data?.[0],J[14]=e):e=J[14],J[15]!==e?(t={...e},J[15]=e,J[16]=t):t=J[16];let s=t;if(!s){_=null;break e}_=s}let ed=_;J[17]===Symbol.for("react.memo_cache_sentinel")?(S=["ServiceName","SpanName","Duration","SeverityText","StatusCode","StatusMessage","SpanKind","TraceId","SpanId","ParentSpanId","ScopeName","ScopeVersion"],J[17]=S):S=J[17];let eu=S;J[18]===Symbol.for("react.memo_cache_sentinel")?(w=(e,t)=>""!==e&&!!eu.includes(t),J[18]=w):w=J[18],J[19]!==ed?(E=c()(ed,w),J[19]=ed,J[20]=E):E=J[20];let em=E,eh=ed?.__hdx_resource_attributes??e_,ex=ed?.__hdx_event_attributes??e_;J[21]!==ec||J[22]!==ed?(C=ec&&ed?.[ec]&&Object.keys(ed[ec]).length>0?{[ec]:ed[ec]}:{},J[21]=ec,J[22]=ed,J[23]=C):C=J[23];let eg=C;J[24]!==ea?(k=(e,t)=>ea?.({where:e,whereLanguage:t})??"/",J[24]=ea,J[25]=k):k=J[25];let ey=k,eb=ec&&eg?.[ec],ev=eb?.["http.url"]!=null;t:{let e;if(!ec){N=eg;break t}let t=eg?.[ec];J[26]!==t||J[27]!==eg||J[28]!==ec||J[29]!==ev?(e=ev&&t?{[ec]:c()(t,ew)}:eg,J[26]=t,J[27]=eg,J[28]=ec,J[29]=ev,J[30]=e):e=J[30],N=e}let ej=N,eS=ed?.__hdx_events_exception_attributes??e_,eE=eS?.["exception.stacktrace"]||eS?.["exception.parsed_stacktrace"],eC=eE??"[]";try{let e;J[31]!==eE?(e=JSON.parse(eE),J[31]=eE,J[32]=e):e=J[32],eC=e}catch(e){}let ek=eS?.["exception.type"];J[33]!==eS?(A="string"!=typeof eS?.["exception.message"]?JSON.stringify(eS?.["exception.message"]):eS?.["exception.message"],J[33]=eS,J[34]=A):A=J[34];let eN=eS?.["exception.mechanism"];J[35]!==eC||J[36]!==ek||J[37]!==A||J[38]!==eN?(T=[{stacktrace:eC,type:ek,value:A,mechanism:eN}],J[35]=eC,J[36]=ek,J[37]=A,J[38]=eN,J[39]=T):T=J[39];let eA=T;J[40]!==ed?.__hdx_events_exception_attributes?($=()=>Object.keys(ed?.__hdx_events_exception_attributes??{}).length>0,J[40]=ed?.__hdx_events_exception_attributes,J[41]=$):$=J[41],ed?.__hdx_events_exception_attributes;let eT=$();ed?.__hdx_span_events;let e$=Array.isArray(ed?.__hdx_span_events)&&ed?.__hdx_span_events.length>0;J[42]!==G?(z=(0,x.N8)(G),J[42]=G,J[43]=z):z=J[43];let ez=z;J[44]!==ed?(I=i()(ed?.__hdx_body)?ed.__hdx_body:ed?.__hdx_body!==void 0?JSON.stringify(ed.__hdx_body):void 0,J[44]=ed,J[45]=I):I=J[45];let eI=I;J[46]!==ed?.__hdx_severity_text||J[47]!==ed?.__hdx_timestamp||J[48]!==et||J[49]!==el||J[50]!==eI||J[51]!==ez?(L=!et&&(0,n.jsx)(u.a,{px:"sm",pt:"md",children:(0,n.jsx)(v.A,{attributes:el,date:new Date(ed?.__hdx_timestamp??0),mainContent:eI,mainContentHeader:ez,severityText:ed?.__hdx_severity_text})}),J[46]=ed?.__hdx_severity_text,J[47]=ed?.__hdx_timestamp,J[48]=et,J[49]=el,J[50]=eI,J[51]=ez,J[52]=L):L=J[52],J[53]===Symbol.for("react.memo_cache_sentinel")?(M=["exception","spanEvents","network","resourceAttributes","eventAttributes","topLevelAttributes"],J[53]=M):M=J[53],J[54]!==ex||J[55]!==ev?(R=ev&&(0,n.jsxs)(m.n.Item,{value:"network",children:[(0,n.jsx)(m.n.Control,{children:(0,n.jsx)(h.E,{size:"sm",ps:"md",children:"HTTP Request"})}),(0,n.jsx)(m.n.Panel,{children:(0,n.jsx)(u.a,{px:"md",children:(0,n.jsx)(ep,{eventAttributes:ex})})})]}),J[54]=ex,J[55]=ev,J[56]=R):R=J[56],J[57]!==eA||J[58]!==ed?.__hdx_timestamp||J[59]!==eT?(D=eT&&(0,n.jsxs)(m.n.Item,{value:"exception",children:[(0,n.jsx)(m.n.Control,{children:(0,n.jsx)(h.E,{size:"sm",ps:"md",children:"Exception"})}),(0,n.jsx)(m.n.Panel,{children:(0,n.jsx)(u.a,{px:"md",children:(0,n.jsx)(K,{exceptionValues:eA,breadcrumbs:[],logData:{timestamp:ed?.__hdx_timestamp}})})})]}),J[57]=eA,J[58]=ed?.__hdx_timestamp,J[59]=eT,J[60]=D):D=J[60],J[61]!==ed?.__hdx_span_events||J[62]!==e$?(P=e$&&(0,n.jsxs)(m.n.Item,{value:"spanEvents",children:[(0,n.jsx)(m.n.Control,{children:(0,n.jsx)(h.E,{size:"sm",ps:"md",children:"Span Events"})}),(0,n.jsx)(m.n.Panel,{children:(0,n.jsx)(u.a,{px:"md",children:(0,n.jsx)(ef,{spanEvents:ed?.__hdx_span_events})})})]}),J[61]=ed?.__hdx_span_events,J[62]=e$,J[63]=P):P=J[63],J[64]!==eo||J[65]!==em?(O=Object.keys(em).length>0&&(0,n.jsxs)(m.n.Item,{value:"topLevelAttributes",children:[(0,n.jsx)(m.n.Control,{children:(0,n.jsx)(h.E,{size:"sm",ps:"md",children:"Top Level Attributes"})}),(0,n.jsx)(m.n.Panel,{children:(0,n.jsx)(u.a,{px:"md",children:(0,n.jsx)(y.z,{data:em,jsonColumns:eo})})})]}),J[64]=eo,J[65]=em,J[66]=O):O=J[66];let eL="log"===G.kind?"Log":"Span";return J[67]!==eL?(F=(0,n.jsx)(m.n.Control,{children:(0,n.jsxs)(h.E,{size:"sm",ps:"md",children:[eL," Attributes"]})}),J[67]=eL,J[68]=F):F=J[68],J[69]!==ej||J[70]!==eo?(V=(0,n.jsx)(m.n.Panel,{children:(0,n.jsx)(u.a,{px:"md",children:(0,n.jsx)(y.z,{data:ej,jsonColumns:eo})})}),J[69]=ej,J[70]=eo,J[71]=V):V=J[71],J[72]!==F||J[73]!==V?(B=(0,n.jsxs)(m.n.Item,{value:"eventAttributes",children:[F,V]}),J[72]=F,J[73]=V,J[74]=B):B=J[74],J[75]===Symbol.for("react.memo_cache_sentinel")?(W=(0,n.jsx)(m.n.Control,{children:(0,n.jsx)(h.E,{size:"sm",ps:"md",children:"Resource Attributes"})}),J[75]=W):W=J[75],J[76]!==eh?(H=Object.entries(eh),J[76]=eh,J[77]=H):H=J[77],J[78]!==ey||J[79]!==ea||J[80]!==eo||J[81]!==en||J[82]!==G.resourceAttributesExpression||J[83]!==H?(q=(0,n.jsxs)(m.n.Item,{value:"resourceAttributes",children:[W,(0,n.jsx)(m.n.Panel,{children:(0,n.jsx)(p.s,{wrap:"wrap",gap:"2px",mx:"md",mb:"lg",children:H.map(e=>{let[t,s]=e;return(0,a.createElement)(j.A,{...en?{onPropertyAddClick:en,sqlExpression:G.resourceAttributesExpression&&eo?.includes(G.resourceAttributesExpression)?`toString(${G.resourceAttributesExpression}.${t})`:`${G.resourceAttributesExpression}['${t}']`}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:ea?ey:void 0,displayedKey:t,name:`${G.resourceAttributesExpression}.${t}`,value:s,key:t})})})})]}),J[78]=ey,J[79]=ea,J[80]=eo,J[81]=en,J[82]=G.resourceAttributesExpression,J[83]=H,J[84]=q):q=J[84],J[85]!==R||J[86]!==D||J[87]!==P||J[88]!==O||J[89]!==B||J[90]!==q?(X=(0,n.jsxs)(m.n,{mt:"sm",defaultValue:M,multiple:!0,variant:"noPadding",children:[R,D,P,O,B,q]}),J[85]=R,J[86]=D,J[87]=P,J[88]=O,J[89]=B,J[90]=q,J[91]=X):X=J[91],J[92]!==ee||J[93]!==L||J[94]!==X?(Y=(0,n.jsxs)("div",{className:"flex-grow-1 overflow-auto","data-testid":ee,children:[L,X]}),J[92]=ee,J[93]=L,J[94]=X,J[95]=Y):Y=J[95],Y}function ew(e,t){return!t.startsWith("http.")}},26932:(e,t,s)=>{"use strict";s.d(t,{e:()=>y,h:()=>b});var n=s(6029),a=s(75155),r=s(1909),l=s(69580),i=s(88140),o=s(93463),c=s(35555),d=s(82641),u=s(25062),m=s(3635),h=s(27166),p=s(78341),x=s(6876),g=s(58541);let f=e=>{let t,s,i,o,c,f,y,b,j,_,S,w=(0,a.c)(31);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=[d.x.Slack,d.x.Generic,d.x.IncidentIO],w[0]=t):t=w[0];let{data:E,refetch:C}=x.Ay.useWebhooks(t),[k,N]=(0,p.j)(!1),{open:A,close:T}=N,$=Array.isArray(E?.data)&&E.data.length>0;if(w[1]!==E?.data){let e,t=E?.data.map(v)||[];w[3]===Symbol.for("react.memo_cache_sentinel")?(e={value:"",label:"Select a Webhook",disabled:!0},w[3]=e):e=w[3],s=[e,...t],w[1]=E?.data,w[2]=s}else s=w[2];let z=s;w[4]!==e.control||w[5]!==e.name?(i={control:e.control,name:e.name},w[4]=e.control,w[5]=e.name,w[6]=i):i=w[6];let{field:I}=(0,r.as)(i);w[7]!==T||w[8]!==I||w[9]!==C?(o=async e=>{await C(),e&&(I.onChange(e),I.onBlur()),T()},w[7]=T,w[8]=I,w[9]=C,w[10]=o):o=w[10];let L=o;w[11]===Symbol.for("react.memo_cache_sentinel")?(c={withinPortal:!1},w[11]=c):c=w[11];let M=$?"Select a Webhook":"No Webhooks available";return w[12]!==z||w[13]!==e||w[14]!==M?(f=(0,n.jsx)(l.l6,{"data-testid":"select-webhook",comboboxProps:c,required:!0,size:"xs",flex:1,placeholder:M,data:z,name:e.name,control:e.control,...e}),w[12]=z,w[13]=e,w[14]=M,w[15]=f):f=w[15],w[16]!==A?(y=(0,n.jsx)(u.$,{"data-testid":"add-new-webhook-button",size:"xs",variant:"subtle",color:"gray",onClick:A,children:"Add New Incoming Webhook"}),w[16]=A,w[17]=y):y=w[17],w[18]!==f||w[19]!==y?(b=(0,n.jsxs)(m.Y,{gap:"md",justify:"space-between",children:[f,y]}),w[18]=f,w[19]=y,w[20]=b):b=w[20],w[21]!==T||w[22]!==L?(j=(0,n.jsx)(g.g,{onClose:T,onSuccess:L}),w[21]=T,w[22]=L,w[23]=j):j=w[23],w[24]!==T||w[25]!==k||w[26]!==j?(_=(0,n.jsx)(h.a,{"data-testid":"alert-modal",opened:k,onClose:T,title:"Add New Webhook",centered:!0,zIndex:9999,size:"lg",children:j}),w[24]=T,w[25]=k,w[26]=j,w[27]=_):_=w[27],w[28]!==_||w[29]!==b?(S=(0,n.jsxs)("div",{children:[b,_]}),w[28]=_,w[29]=b,w[30]=S):S=w[30],S},y=e=>{let t=(0,a.c)(3),{control:s,type:r,namePrefix:l}=e;if("webhook"===r){let e,a=`${void 0===l?"":l}channel.webhookId`;return t[0]!==s||t[1]!==a?(e=(0,n.jsx)(f,{control:s,name:a}),t[0]=s,t[1]=a,t[2]=e):e=t[2],e}return null},b=({thresholdType:e,threshold:t})=>null!=t&&"below"===e?(0,n.jsx)(i.T,{y1:0,y2:t,ifOverflow:"extendDomain",fill:"red",strokeWidth:0,fillOpacity:.05}):null!=t&&"above"===e?(0,n.jsx)(i.T,{y1:t,ifOverflow:"extendDomain",fill:"red",strokeWidth:0,fillOpacity:.05}):null!=t?(0,n.jsx)(o.e,{y:t,label:(0,n.jsx)(c.J,{value:"Alert Threshold",fill:"white",fontSize:11,opacity:.7}),stroke:"red",strokeDasharray:"3 3"}):null;function v(e){return{value:e._id,label:e.name}}},28450:(e,t,s)=>{"use strict";s.d(t,{FB:()=>j,Qg:()=>b,xD:()=>_});var n=s(6029),a=s(75155);s(55729);var r=s(82203),l=s.n(r),i=s(43465),o=s(67270),c=s(30039),d=s(43517),u=s(3635),m=s(43085),h=s(12482),p=s(49672),x=s(78550),g=s(81973),f=s(9897),y=s(7565);let b=(e,t)=>{let s,n,r,l=(0,a.c)(22),{dateRange:i,extraSelects:c,limit:d,logSource:u,order:m,where:f,whereLanguage:y}=e,b=(0,p.fu)(),v=(0,x.Ge)();return l[0]!==i||l[1]!==c||l[2]!==d||l[3]!==u.id||l[4]!==m||l[5]!==f||l[6]!==y?(s=["v2LogBatch",u.id,c,i,f,y,d,m],l[0]=i,l[1]=c,l[2]=d,l[3]=u.id,l[4]=m,l[5]=f,l[6]=y,l[7]=s):s=l[7],l[8]!==b||l[9]!==i||l[10]!==c||l[11]!==d||l[12]!==u||l[13]!==v||l[14]!==m||l[15]!==f||l[16]!==y?(n=async()=>{let e=await (0,o.PV)({select:[{valueExpression:(0,g.xg)(u),alias:"timestamp"},{valueExpression:`${u.serviceNameExpression}`,alias:"_service"},...c&&Array.isArray(c)?c:[]],from:u.from,dateRange:i,timestampValueExpression:u.timestampValueExpression,implicitColumnExpression:u.implicitColumnExpression,where:f,whereLanguage:y,connection:u.connection,limit:{limit:d??50,offset:0},orderBy:`${u.timestampValueExpression} ${m}`},v,u.querySettings);return await b.query({query:e.sql,query_params:e.params,connectionId:u.connection}).then(S)},l[8]=b,l[9]=i,l[10]=c,l[11]=d,l[12]=u,l[13]=v,l[14]=m,l[15]=f,l[16]=y,l[17]=n):n=l[17],l[18]!==t||l[19]!==s||l[20]!==n?(r={queryKey:s,queryFn:n,staleTime:3e5,...t},l[18]=t,l[19]=s,l[20]=n,l[21]=r):r=l[21],(0,h.I)(r)},v=e=>t=>{let s="#";try{s=`/search?q=${encodeURIComponent(`${e.resourceAttributesExpression}.k8s.pod.name:"${t["k8s.pod.name"]}"`)}&source=${e.id}&from=${new Date(t.timestamp).getTime()-9e5}&to=${new Date(t.timestamp).getTime()+1}`}catch(e){}return(0,n.jsxs)(c.K.Item,{children:[(0,n.jsx)(l(),{href:s,children:(0,n.jsx)(d.E,{size:"xs",fz:11,title:t.timestamp,c:"green",td:"underline",fw:"bold",children:(0,n.jsx)(y.H,{value:t.timestamp})})}),(0,n.jsxs)(u.Y,{gap:"xs",my:4,children:[(0,n.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:t["object.reason"]}),t["object.type"]&&(0,n.jsx)(m.E,{variant:"light",size:"xs",fw:"normal",color:"Normal"===t["object.type"]?"green":"yellow",children:t["object.type"]})]}),(0,n.jsx)(d.E,{size:"xs",children:t["object.note"]||t["object.message"]})]},t.id)},j=e=>{let t,s,r,l,o,m,h,p,x,g,f,j,_,S,C,k,N,A,T,$,z=(0,a.c)(82),{q:I,logSource:L,anchorEvent:M,dateRange:R}=e;z[0]!==R?.[0]?(t=R?.[0]??(0,i.A)(new Date,{days:1}),z[0]=R?.[0],z[1]=t):t=z[1];let D=t;z[2]!==R?.[1]?(s=R?.[1]??new Date,z[2]=R?.[1],z[3]=s):s=z[3];let P=s;z[4]!==P||z[5]!==D?(r=[D,P],z[4]=P,z[5]=D,z[6]=r):r=z[6];let O=`${L.eventAttributesExpression}.k8s.resource.name:"events" ${I}`;z[7]===Symbol.for("react.memo_cache_sentinel")?(l={valueExpression:"generateUUIDv4()",alias:"id"},z[7]=l):l=z[7];let F=`JSONExtractString(${L.eventAttributesExpression}['object'], 'metadata', 'creationTimestamp')`;z[8]!==F?(o={valueExpression:F,alias:"object.metadata.creationTimestamp"},z[8]=F,z[9]=o):o=z[9];let V=`JSONExtractString(${L.eventAttributesExpression}['object'], 'reason')`;z[10]!==V?(m={valueExpression:V,alias:"object.reason"},z[10]=V,z[11]=m):m=z[11];let B=`JSONExtractString(${L.eventAttributesExpression}['object'], 'note')`;z[12]!==B?(h={valueExpression:B,alias:"object.note"},z[12]=B,z[13]=h):h=z[13];let W=`JSONExtractString(${L.eventAttributesExpression}['object'], 'type')`;z[14]!==W?(p={valueExpression:W,alias:"object.type"},z[14]=W,z[15]=p):p=z[15];let H=`JSONExtractString(${L.eventAttributesExpression}['object'], 'message')`;z[16]!==H?(x={valueExpression:H,alias:"object.message"},z[16]=H,z[17]=x):x=z[17];let q=`JSONExtractString(${L.eventAttributesExpression}['object'], 'regarding', 'name')`;z[18]!==q?(g={valueExpression:q,alias:"k8s.pod.name"},z[18]=q,z[19]=g):g=z[19];let X=`JSONExtractString(${L.eventAttributesExpression}['object'], 'regarding', 'uid')`;z[20]!==X?(f={valueExpression:X,alias:"k8s.pod.uid"},z[20]=X,z[21]=f):f=z[21];let Y=`JSONExtractString(${L.eventAttributesExpression}['object'], 'type')`;z[22]!==Y?(j={valueExpression:Y,alias:"type"},z[22]=Y,z[23]=j):j=z[23];let J=`JSONExtractString(${L.eventAttributesExpression}['object'], 'type')`;z[24]!==J?(_={valueExpression:J,alias:"severity_text"},z[24]=J,z[25]=_):_=z[25];let K=`JSONExtractString(${L.eventAttributesExpression}['object'], 'note')`;z[26]!==K?(S={valueExpression:K,alias:"body"},z[26]=K,z[27]=S):S=z[27],z[28]!==h||z[29]!==p||z[30]!==x||z[31]!==g||z[32]!==f||z[33]!==j||z[34]!==_||z[35]!==S||z[36]!==o||z[37]!==m?(C=[l,o,m,h,p,x,g,f,j,_,S],z[28]=h,z[29]=p,z[30]=x,z[31]=g,z[32]=f,z[33]=j,z[34]=_,z[35]=S,z[36]=o,z[37]=m,z[38]=C):C=z[38],z[39]!==L||z[40]!==C||z[41]!==r||z[42]!==O?(k={dateRange:r,limit:50,logSource:L,order:"desc",where:O,whereLanguage:"lucene",extraSelects:C},z[39]=L,z[40]=C,z[41]=r,z[42]=O,z[43]=k):k=z[43];let{data:G,isLoading:Z}=b(k);z[44]!==G?.data?(N=G?.data||[],z[44]=G?.data,z[45]=N):N=z[45],z[46]!==N?(A=N.sort(w),z[46]=N,z[47]=A):A=z[47];let U=A;z[48]!==U||z[49]!==M?(T=M?U.filter(e=>new Date(e.timestamp)<new Date(M.timestamp)):[],z[48]=U,z[49]=M,z[50]=T):T=z[50];let Q=T;z[51]!==U||z[52]!==M?($=M?U.filter(e=>new Date(e.timestamp)>new Date(M.timestamp)):[],z[51]=U,z[52]=M,z[53]=$):$=z[53];let ee=$;if(Z){let e;return z[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(d.E,{color:"muted",ta:"center",children:"Loading..."}),z[54]=e):e=z[54],e}if(0===U.length){let e;return z[55]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(d.E,{color:"muted",ta:"center",children:"No events"}),z[55]=e):e=z[55],e}if(M){let e,t,s,a,r,l,i;return z[56]!==L||z[57]!==ee?(e=ee.map(v(L)),z[56]=L,z[57]=ee,z[58]=e):e=z[58],z[59]!==M.timestamp?(t=(0,n.jsx)(y.H,{value:M.timestamp}),z[59]=M.timestamp,z[60]=t):t=z[60],z[61]!==M.timestamp||z[62]!==t?(s=(0,n.jsx)(d.E,{size:"xs",fz:11,title:M.timestamp,children:t}),z[61]=M.timestamp,z[62]=t,z[63]=s):s=z[63],z[64]!==M.label?(a=(0,n.jsx)(u.Y,{gap:"xs",my:4,children:(0,n.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:M.label})}),z[64]=M.label,z[65]=a):a=z[65],z[66]!==M.timestamp||z[67]!==s||z[68]!==a?(r=(0,n.jsxs)(c.K.Item,{ref:E,children:[s,a]},M.timestamp),z[66]=M.timestamp,z[67]=s,z[68]=a,z[69]=r):r=z[69],z[70]!==L||z[71]!==Q?(l=Q.map(v(L)),z[70]=L,z[71]=Q,z[72]=l):l=z[72],z[73]!==e||z[74]!==r||z[75]!==l?(i=(0,n.jsxs)(c.K,{bulletSize:12,lineWidth:1,children:[e,r,l]}),z[73]=e,z[74]=r,z[75]=l,z[76]=i):i=z[76],i}{let e,t;return z[77]!==U||z[78]!==L?(e=U.map(v(L)),z[77]=U,z[78]=L,z[79]=e):e=z[79],z[80]!==e?(t=(0,n.jsx)(c.K,{bulletSize:12,lineWidth:1,children:e}),z[80]=e,z[81]=t):t=z[81],t}},_=e=>{let t=(0,a.c)(6),{status:s}=e;switch(s){case f.h.Pending:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(m.E,{variant:"light",color:"yellow",fw:"normal",tt:"none",size:"md",children:"Pending"}),t[0]=e):e=t[0],e}case f.h.Running:{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(m.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Running"}),t[1]=e):e=t[1],e}case f.h.Succeeded:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(m.E,{variant:"light",color:"indigo",fw:"normal",tt:"none",size:"md",children:"Succeeded"}),t[2]=e):e=t[2],e}case f.h.Failed:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(m.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Failed"}),t[3]=e):e=t[3],e}case f.h.Unknown:{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[4]=e):e=t[4],e}default:{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(m.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[5]=e):e=t[5],e}}};function S(e){return e.json()}function w(e,t){return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()}function E(e){null!==e&&e.scrollIntoView({block:"nearest"})}},28959:(e,t,s)=>{"use strict";s.d(t,{RW:()=>m,Ye:()=>u,ae:()=>i,hd:()=>o,mA:()=>d});var n=s(75155),a=s(55729),r=s(67843),l=s(92917);let i="isRootSpan",o=(e,{stringifyKeys:t=!1}={})=>Object.entries(e).filter(([e,t])=>t.included.size>0||t.excluded.size>0||null!=t.range).flatMap(([e,s])=>{let n=[],a=t?`toString(${e})`:e;return s.included.size>0&&n.push({type:"sql",condition:`${a} IN (${Array.from(s.included).map(e=>"string"==typeof e?`'${e}'`:e).join(", ")})`}),s.excluded.size>0&&n.push({type:"sql",condition:`${a} NOT IN (${Array.from(s.excluded).map(e=>"string"==typeof e?`'${e}'`:e).join(", ")})`}),null!=s.range&&n.push({type:"sql",condition:`${a} BETWEEN ${s.range.min} AND ${s.range.max}`}),n}),c=e=>{let t=e.trim();return["true","false"].includes(t.toLowerCase())?"true"===t.toLowerCase():t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):t},d=e=>{let t=new Map;for(let s of e)if("sql"===s.type){if(s.condition.includes(" BETWEEN ")){let e=s.condition.match(/^(.+?)\s+BETWEEN\s+(.+?)\s+AND\s+(.+?)$/i);if(e){let[,s,n,a]=e,r=s.trim(),l=parseFloat(n.trim()),i=parseFloat(a.trim());t.has(r)?t.get(r).range={min:l,max:i}:t.set(r,{included:new Set,excluded:new Set,range:{min:l,max:i}});continue}}for(let e of function(e){let t=[],s=[],n="",a=!1;for(let t=0;t<e.length;t++){let r=e[t];if("'"===r&&(0===t||"\\"!==e[t-1])){a=!a,n+=r;continue}if(!a&&" AND "===e.slice(t,t+5).toUpperCase()){n.trim()&&s.push(n.trim()),n="",t+=4;continue}n+=r}for(let e of(n.trim()&&s.push(n.trim()),s)){if(e.toUpperCase().includes(" OR ")||e.includes("=")||e.includes("<")||e.includes(">"))continue;let s=e.includes("NOT IN");if(e.includes(" IN ")||e.includes(" NOT IN ")){let[n,a]=e.split(s?" NOT IN ":" IN ");if(n&&a){let e=n.trim(),r=a.trim(),l=function(e){let t=[],s="",n=!1;for(let a=0;a<e.length;a++){let r=e[a];if("'"===r&&(0===a||"\\"!==e[a-1])){n=!n,s+=r;continue}if(!n&&","===r){s.trim()&&t.push(c(s)),s="";continue}s+=r}return s.trim()&&t.push(c(s)),t}(r.startsWith("(")&&r.endsWith(")")?r.slice(1,-1):r);t.push({key:e,values:l,isExclude:s})}}}return t}(s.condition)){t.has(e.key)||t.set(e.key,{included:new Set,excluded:new Set});let s=t.get(e.key);e.values.forEach(t=>{e.isExclude?s.excluded.add(t):s.included.add(t)})}}return{filters:Object.fromEntries(t)}},u=({searchQuery:e=[],onFilterChange:t})=>{let s=a.useMemo(()=>{try{return d(e)}catch(e){return console.error(e),{filters:{}}}},[e]),[n,l]=a.useState({});a.useEffect(()=>{((e,t)=>{let s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(let n of s){if(!t[n]||e[n].included.size!==t[n].included.size)return!1;for(let s of e[n].included)if(!t[n].included.has(s))return!1;if(e[n].excluded.size!==t[n].excluded.size)return!1;for(let s of e[n].excluded)if(!t[n].excluded.has(s))return!1;if(e[n].range?.min!==t[n].range?.min||e[n].range?.max!==t[n].range?.max)return!1}return!0})(n,s.filters)||l(s.filters)},[s.filters]);let i=a.useCallback(e=>{t(o(e))},[t]),c=a.useCallback((e,t,s)=>{l(n=>{let a=(0,r.Ay)(n,n=>{if(n[e]||(n[e]={included:new Set,excluded:new Set}),"only"===s){n[e]={included:new Set([t]),excluded:new Set};return}if("exclude"===s){n[e].included.delete(t),n[e].excluded.has(t)?n[e].excluded.delete(t):n[e].excluded.add(t);return}n[e].excluded.delete(t),n[e].included.has(t)?n[e].included.delete(t):n[e].included.add(t)});return i(a),a})},[i]),u=a.useCallback((e,t)=>{l(s=>{let n=(0,r.Ay)(s,s=>{s[e]||(s[e]={included:new Set,excluded:new Set}),s[e].range=t});return i(n),n})},[i]),m=a.useCallback(e=>{l(t=>{let s=(0,r.Ay)(t,t=>{delete t[e]});return i(s),s})},[i]),h=a.useCallback(()=>{l(()=>({})),i({})},[i]);return{filters:n,setFilters:l,setFilterValue:c,setFilterRange:u,clearFilter:m,clearAllFilters:h}};function m(e){let t,s,a,i,o,c,d=(0,n.c)(18),{pinnedFilters:u,setPinnedFilters:m,pinnedFields:h,setPinnedFields:p}=function(e){let t,s,a,i,o,c,d,u=(0,n.c)(19);u[0]===Symbol.for("react.memo_cache_sentinel")?(t={},u[0]=t):t=u[0];let[m,h]=(0,l.Mj)("hdx-pinned-search-filters",t);u[1]===Symbol.for("react.memo_cache_sentinel")?(s={},u[1]=s):s=u[1];let[p,x]=(0,l.Mj)("hdx-pinned-fields",s);u[2]!==m||u[3]!==e?(a=e&&m[e]?m[e]:{},u[2]=m,u[3]=e,u[4]=a):a=u[4];let g=a;u[5]!==p||u[6]!==e?(i=e&&p[e]?p[e]:[],u[5]=p,u[6]=e,u[7]=i):i=u[7];let f=i;u[8]!==h||u[9]!==e?(o=t=>{e&&h(s=>(0,r.Ay)(s,s=>{s[e]=t instanceof Function?t(s[e]??{}):t}))},u[8]=h,u[9]=e,u[10]=o):o=u[10];let y=o;u[11]!==x||u[12]!==e?(c=t=>{e&&x(s=>(0,r.Ay)(s,s=>{s[e]=t instanceof Function?t(s[e]??[]):t}))},u[11]=x,u[12]=e,u[13]=c):c=u[13];let b=c;return u[14]!==f||u[15]!==g||u[16]!==b||u[17]!==y?(d={pinnedFilters:g,setPinnedFilters:y,pinnedFields:f,setPinnedFields:b},u[14]=f,u[15]=g,u[16]=b,u[17]=y,u[18]=d):d=u[18],d}(e);d[0]!==p||d[1]!==m?(t=(e,t)=>{m(s=>(0,r.Ay)(s,s=>{s[e]||(s[e]=[]);let n=s[e].findIndex(e=>e===t);return n>=0?s[e].splice(n,1):s[e].push(t),s})),p(t=>t.includes(e)?t:[...t,e])},d[0]=p,d[1]=m,d[2]=t):t=d[2];let x=t;d[3]!==p?(s=e=>{p(t=>{let s=t.findIndex(t=>t===e);return s>=0?t.filter((e,t)=>t!==s):[...t,e]})},d[3]=p,d[4]=s):s=d[4];let g=s;d[5]!==u?(a=(e,t)=>u[e]&&u[e].some(e=>e===t),d[5]=u,d[6]=a):a=d[6];let f=a;d[7]!==h?(i=e=>h.includes(e),d[7]=h,d[8]=i):i=d[8];let y=i;d[9]!==h?(o=()=>h,d[9]=h,d[10]=o):o=d[10];let b=o;return d[11]!==b||d[12]!==y||d[13]!==f||d[14]!==u||d[15]!==g||d[16]!==x?(c={toggleFilterPin:x,toggleFieldPin:g,isFilterPinned:f,isFieldPinned:y,getPinnedFields:b,pinnedFilters:u},d[11]=b,d[12]=y,d[13]=f,d[14]=u,d[15]=g,d[16]=x,d[17]=c):c=d[17],c}},31451:(e,t,s)=>{"use strict";s.d(t,{Q$:()=>f,nt:()=>v,vN:()=>g,xj:()=>x});var n=s(75155),a=s(36722),r=s.n(a),l=s(76089),i=s(12482),o=s(43152),c=s(46061),d=s(91021),u=s(81973);async function m(){let e=await window.loadPyodide();await e.loadPackage("micropip");let t=e.pyimport("micropip"),s=new URL("/jsonpickle-4.1.1-py3-none-any.whl",window.location.origin);await t.install(s.href);let n=new URL("/drain3-0.9.11-py3-none-any.whl",window.location.origin);return await t.install(n.href),e}class h{constructor(e){this.pyodide=e,this.id=Math.random().toString(36).substring(2,15),this.minerVariableName=`m_${this.id}`}async init(){await this.pyodide.runPythonAsync(`
import js
import json
from drain3 import TemplateMiner
from drain3.template_miner_config import TemplateMinerConfig

${this.minerVariableName} = TemplateMiner(None, TemplateMinerConfig())
    `)}async minePatterns(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        ${s}.append(${this.minerVariableName}.add_log_message(log))
      json.dumps(${s})
    `))}async matchLogs(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        match = ${this.minerVariableName}.match(log)
        ${s}.append(match.cluster_id if match else None)
      json.dumps(${s})
    `))}}async function p(e,t){let s=new h(t);return await s.init(),{miner:s,patterns:await s.minePatterns(e)}}let x="__hdx_pattern_field",g="__hdx_timestamp",f="__hdx_severity_text",y="__hdx_status_code";function b(e){return r()(e[x])}function v(e){let t,s,a,r,h,v=(0,n.c)(22),{config:S,samples:w,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:k,totalCount:N,enabled:A}=e,T=void 0===A||A;v[0]!==E||v[1]!==S||v[2]!==T||v[3]!==w||v[4]!==C||v[5]!==k?(t={config:S,samples:w,bodyValueExpression:E,severityTextExpression:C,statusCodeExpression:k,enabled:T},v[0]=E,v[1]=S,v[2]=T,v[3]=w,v[4]=C,v[5]=k,v[6]=t):t=v[6];let{data:$,isLoading:z,patternQueryConfig:I}=function(e){var t;let s,a,r,l,o,h,v,j,_,S,w,E,C,k,N,A,T=(0,n.c)(36),{config:$,samples:z,bodyValueExpression:I,severityTextExpression:L,statusCodeExpression:M,enabled:R}=e,D=void 0===R||R,P=`${I} as ${x}`;T[0]!==$.timestampValueExpression?(s=(0,u.AF)($.timestampValueExpression),T[0]=$.timestampValueExpression,T[1]=s):s=T[1];let O=`${s} as ${g}`;T[2]!==L?(a=L?[`${L} as ${f}`]:[],T[2]=L,T[3]=a):a=T[3],T[4]!==M?(r=M?[`${M} as ${y}`]:[],T[4]=M,T[5]=r):r=T[5],T[6]!==P||T[7]!==O||T[8]!==a||T[9]!==r?(l=[P,O,...a,...r],T[6]=P,T[7]=O,T[8]=a,T[9]=r,T[10]=l):l=T[10];let F=l.join(",");T[11]===Symbol.for("react.memo_cache_sentinel")?(o=[{ordering:"DESC",valueExpression:"rand()"}],T[11]=o):o=T[11],T[12]!==z?(h={limit:z},T[12]=z,T[13]=h):h=T[13],T[14]!==$||T[15]!==h||T[16]!==F?(v={...$,select:F,orderBy:o,limit:h},T[14]=$,T[15]=h,T[16]=F,T[17]=v):v=T[17];let V=(0,c.YB)(v),B=null!=V&&D;T[18]!==B?(j={enabled:B},T[18]=B,T[19]=j):j=T[19];let{data:W,isLoading:H}=(0,d.HD)(V??$,j);T[20]!==D?(_={enabled:D},T[20]=D,T[21]=_):_=T[21];let{data:q,isLoading:X}=(t=_,(A=(0,n.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(k=["pyodide"],A[0]=k):k=A[0],A[1]!==t.enabled?(N={queryKey:k,queryFn:m,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1,enabled:t.enabled},A[1]=t.enabled,A[2]=N):N=A[2],(0,i.I)(N));T[22]!==$?(S=["patterns",$],T[22]=$,T[23]=S):S=T[23],T[24]!==V||T[25]!==q||T[26]!==W?(w=()=>{if(null==V)throw Error("Unexpected configWithPrimaryAndPartitionKey is null");return p(W?.data.map(b)??[],q).then(e=>{let t=[],s=e.patterns;for(let e=0;e<s.length;e++){let n=s[e],a=W?.data[e];t.push({...a,__hdx_patternId:n.cluster_id,__hdx_pattern:n.template_mined})}return{...W,data:t,additionalKeysLength:V.additionalKeysLength,miner:e.miner}})},T[24]=V,T[25]=q,T[26]=W,T[27]=w):w=T[27];let Y=null!=W&&null!=q&&D;T[28]!==S||T[29]!==w||T[30]!==Y?(E={queryKey:S,queryFn:w,refetchOnWindowFocus:!1,enabled:Y},T[28]=S,T[29]=w,T[30]=Y,T[31]=E):E=T[31];let J=(0,i.I)(E),K=J.isLoading||H||X;return T[32]!==V||T[33]!==J||T[34]!==K?(C={...J,isLoading:K,patternQueryConfig:V},T[32]=V,T[33]=J,T[34]=K,T[35]=C):C=T[35],C}(t),L=$?.data.length,M=N&&L?N/L:1;v[7]!==S.dateRange?(s=(0,l.tA)(S.dateRange,24),a=(0,o.Ht)(S.dateRange[0],S.dateRange[1],s),v[7]=S.dateRange,v[8]=s,v[9]=a):(s=v[8],a=v[9]);let R=a;if(v[10]!==S.dateRange||v[11]!==s||v[12]!==$?.data||v[13]!==M||v[14]!==R){let e=$?.data.reduce(_,{});r={},Object.entries(e??{}).forEach(e=>{let[t,n]=e,a=R.reduce(j,{}),l=n.reduce((e,t)=>{let n=t[g],a=(0,o.W6)(new Date(n),s).getTime();return e[a]=(e[a]||0)+1,e},a),i=Math.max(Math.round(n.length*M),1),c=n.at(-1);r[t]={id:t,pattern:c?.__hdx_pattern,count:i,countStr:`~${i}`,severityText:c?.[f],statusCode:c?.[y],samples:n,__hdx_pattern_trend:{data:Object.entries(l).map(e=>{let[t,s]=e;return{bucket:Number.parseInt(t)/1e3,count:Math.round(s*M)}}),granularity:s,dateRange:S.dateRange}}}),v[10]=S.dateRange,v[11]=s,v[12]=$?.data,v[13]=M,v[14]=R,v[15]=r}else r=v[15];let D=r,P=$?.miner;return v[16]!==D||v[17]!==z||v[18]!==I||v[19]!==L||v[20]!==P?(h={data:D,isLoading:z,miner:P,sampledRowCount:L,patternQueryConfig:I},v[16]=D,v[17]=z,v[18]=I,v[19]=L,v[20]=P,v[21]=h):h=v[21],h}function j(e,t){return e[t.getTime()]=0,e}function _(e,t){let s=`${t.__hdx_patternId}`;return e[s]=e[s]||[],e[s].push(t),e}},35729:(e,t,s)=>{"use strict";s.d(t,{B:()=>d,y:()=>u});var n=s(6029),a=s(55729),r=s(66692),l=s(60481),i=s(3635),o=s(43517),c=s(20158);let d=a.memo(({header:e,onClose:t,closeEsc:s=!0})=>((0,r.vC)(["esc"],()=>t?.(),{enabled:s}),(0,n.jsx)(l.a,{px:"md",py:"xs",className:"border-bottom border-dark",children:(0,n.jsxs)(i.Y,{justify:"space-between",align:"center",children:[(0,n.jsx)(o.E,{size:"md",children:e}),(0,n.jsx)(c.J,{onClick:t,"aria-label":"Close modal",variant:"subtle",size:"md"})]})}))),u=a.memo(({children:e})=>(0,n.jsx)(l.a,{className:"w-100 overflow-auto",px:"sm",py:"md",children:e}))},36011:e=>{e.exports={root:"SearchWhereInput_root__IzMOd",inputWrapper:"SearchWhereInput_inputWrapper__7mdT7",sizeXs:"SearchWhereInput_sizeXs__MfgMj",sizeSm:"SearchWhereInput_sizeSm__B7Xwd",languageSwitch:"SearchWhereInput_languageSwitch__dZQ28",shortcutHint:"SearchWhereInput_shortcutHint__NwHbY"}},37901:(e,t,s)=>{"use strict";s.d(t,{$_:()=>h,bn:()=>x,dD:()=>g,k1:()=>p});var n,a=s(6029),r=s(75155),l=s(46375),i=s(82641),o=s(60481),c=s(91021),d=s(81973),u=s(18006),m=s(65081),h=((n={}).TIMESTAMP="__hdx_timestamp",n.BODY="__hdx_body",n.TRACE_ID="__hdx_trace_id",n.SPAN_ID="__hdx_span_id",n.SEVERITY_TEXT="__hdx_severity_text",n.SERVICE_NAME="__hdx_service_name",n.RESOURCE_ATTRIBUTES="__hdx_resource_attributes",n.EVENT_ATTRIBUTES="__hdx_event_attributes",n.EVENTS_EXCEPTION_ATTRIBUTES="__hdx_events_exception_attributes",n.SPAN_EVENTS="__hdx_span_events",n);function p(e){let t,s,n,a,o,m,h,p,x,g,f,y=(0,r.c)(62),{source:b,rowId:v,aliasWith:j}=e;y[0]!==b?(t=(0,d.N8)(b),y[0]=b,y[1]=t):t=y[1];let _=t,S=b.traceIdExpression,w=b.spanIdExpression,E=b.severityTextExpression||b.statusCodeExpression;if(y[2]!==_||y[3]!==w||y[4]!==S||y[5]!==E||y[6]!==b){let e,t,r,l,o,m,h,p,x,g,f,v=b.kind===i.GL.Trace||b.kind===i.GL.Log?(0,u.z4)(b.highlightedRowAttributeExpressions):[];a=c.HD,s=b.connection,y[10]===Symbol.for("react.memo_cache_sentinel")?(e={valueExpression:"*"},y[10]=e):e=y[10],y[11]!==b?(t=(0,d.xg)(b),y[11]=b,y[12]=t):t=y[12],y[13]!==t?(r={valueExpression:t,alias:"__hdx_timestamp"},y[13]=t,y[14]=r):r=y[14],y[15]!==_?(l=_?[{valueExpression:_,alias:"__hdx_body"}]:[],y[15]=_,y[16]=l):l=y[16],y[17]!==S?(o=S?[{valueExpression:S,alias:"__hdx_trace_id"}]:[],y[17]=S,y[18]=o):o=y[18],y[19]!==w?(m=w?[{valueExpression:w,alias:"__hdx_span_id"}]:[],y[19]=w,y[20]=m):m=y[20],y[21]!==E?(h=E?[{valueExpression:E,alias:"__hdx_severity_text"}]:[],y[21]=E,y[22]=h):h=y[22],y[23]!==b.serviceNameExpression?(p=b.serviceNameExpression?[{valueExpression:b.serviceNameExpression,alias:"__hdx_service_name"}]:[],y[23]=b.serviceNameExpression,y[24]=p):p=y[24],y[25]!==b.resourceAttributesExpression?(x=b.resourceAttributesExpression?[{valueExpression:b.resourceAttributesExpression,alias:"__hdx_resource_attributes"}]:[],y[25]=b.resourceAttributesExpression,y[26]=x):x=y[26],y[27]!==b.eventAttributesExpression?(g=b.eventAttributesExpression?[{valueExpression:b.eventAttributesExpression,alias:"__hdx_event_attributes"}]:[],y[27]=b.eventAttributesExpression,y[28]=g):g=y[28],y[29]!==b.kind||y[30]!==b.spanEventsValueExpression?(f=b.kind===i.GL.Trace&&b.spanEventsValueExpression?[{valueExpression:`${b.spanEventsValueExpression}.Attributes[indexOf(${b.spanEventsValueExpression}.Name, 'exception')]`,alias:"__hdx_events_exception_attributes"},{valueExpression:b.spanEventsValueExpression,alias:"__hdx_span_events"}]:[],y[29]=b.kind,y[30]=b.spanEventsValueExpression,y[31]=f):f=y[31],n=[e,r,...l,...o,...m,...h,...p,...x,...g,...f,...v],y[2]=_,y[3]=w,y[4]=S,y[5]=E,y[6]=b,y[7]=s,y[8]=n,y[9]=a}else s=y[7],n=y[8],a=y[9];let C=v??"0=1";y[32]===Symbol.for("react.memo_cache_sentinel")?(o={limit:1},y[32]=o):o=y[32],y[33]!==j?(m=j&&j.length>0?{with:j}:{},y[33]=j,y[34]=m):m=y[34],y[35]!==b.from||y[36]!==s||y[37]!==n||y[38]!==C||y[39]!==m?(h={connection:s,select:n,where:C,from:b.from,limit:o,...m},y[35]=b.from,y[36]=s,y[37]=n,y[38]=C,y[39]=m,y[40]=h):h=y[40],y[41]!==j||y[42]!==v||y[43]!==b?(p=["row_side_panel",v,j,b],y[41]=j,y[42]=v,y[43]=b,y[44]=p):p=y[44];let k=null!=v;y[45]!==k||y[46]!==p?(x={queryKey:p,enabled:k},y[45]=k,y[46]=p,y[47]=x):x=y[47];let N=a(h,x);e:{let e,t,s;if(!N.data?.data?.[0]){g=N.data;break e}let n=N.data.data[0];if(y[48]!==n){if(e={...n},n.__hdx_resource_attributes){let t,s=n.__hdx_resource_attributes;y[50]!==s?(t=(0,l.flatten)(s),y[50]=s,y[51]=t):t=y[51],e.__hdx_resource_attributes=t}if(n.__hdx_event_attributes){let t,s=n.__hdx_event_attributes;y[52]!==s?(t=(0,l.flatten)(s),y[52]=s,y[53]=t):t=y[53],e.__hdx_event_attributes=t}y[48]=n,y[49]=e}else e=y[49];y[54]!==e?(t=[e],y[54]=e,y[55]=t):t=y[55],y[56]!==N.data||y[57]!==t?(s={...N.data,data:t},y[56]=N.data,y[57]=t,y[58]=s):s=y[58],g=s}let A=g;return y[59]!==A||y[60]!==N?(f={...N,data:A},y[59]=A,y[60]=N,y[61]=f):f=y[61],f}function x(e){return e?.filter(e=>"JSON"===e.type||e.type.startsWith("JSON(")).map(e=>e.name)??[]}function g(e){let t,s,n,l,i,c=(0,r.c)(16),{source:d,rowId:u,aliasWith:h,"data-testid":g}=e;c[0]!==h||c[1]!==u||c[2]!==d?(t={source:d,rowId:u,aliasWith:h},c[0]=h,c[1]=u,c[2]=d,c[3]=t):t=c[3];let{data:f}=p(t);e:{let e,t;c[4]!==f?.data?.[0]?(e=f?.data?.[0]??{},c[4]=f?.data?.[0],c[5]=e):e=c[5],c[6]!==e?(t={...e},c[6]=e,c[7]=t):t=c[7];let n=t;if(!n){s=null;break e}s=n}let y=s,b=f?.meta;c[8]!==b?(n=x(b),c[8]=b,c[9]=n):n=c[9];let v=n;return c[10]!==y||c[11]!==v?(l=(0,a.jsx)(o.a,{mx:"md",my:"sm",children:(0,a.jsx)(m.z,{data:y,jsonColumns:v})}),c[10]=y,c[11]=v,c[12]=l):l=c[12],c[13]!==g||c[14]!==l?(i=(0,a.jsx)("div",{className:"flex-grow-1 overflow-auto","data-testid":g,children:l}),c[13]=g,c[14]=l,c[15]=i):i=c[15],i}},40147:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(75155),a=s(80519),r=s.n(a),l=s(3145),i=s(78550);function o(e){let t,s=(0,n.c)(6);s[0]!==e?(t=(0,l.VO)(e),s[0]=e,s[1]=t):t=s[1];let{data:a,isLoading:o}=(0,i.n$)(t);if(e&&!o){let e;return s[2]!==a?(e={isLoading:!1,getFieldExpression:(e,t,s)=>a?.includes(e)?r().format(`${void 0===s?"toString":s}(??.??)`,[e,t]):r().format("??[?]",[e,t])},s[2]=a,s[3]=e):e=s[3],e}{let e;return s[4]!==o?(e={isLoading:o,getFieldExpression:void 0},s[4]=o,s[5]=e):e=s[5],e}}},41029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});let n=s(80842).Ay},45862:e=>{e.exports={root:"AutocompleteInput_root__4aZ0r",textarea:"AutocompleteInput_textarea__90yii",focused:"AutocompleteInput_focused__puBi_",collapseFade:"AutocompleteInput_collapseFade__GOMDH",aboveSuggestions:"AutocompleteInput_aboveSuggestions__aaRAR",suggestionsSection:"AutocompleteInput_suggestionsSection__tpfoD",suggestionsHeaderRow:"AutocompleteInput_suggestionsHeaderRow___m20z",suggestionsHeader:"AutocompleteInput_suggestionsHeader__8ivOI",suggestionsLimit:"AutocompleteInput_suggestionsLimit__jvv5c",suggestionItem:"AutocompleteInput_suggestionItem__cgp5x",selected:"AutocompleteInput_selected__1YH4P",suggestionLabel:"AutocompleteInput_suggestionLabel__ygOCA",belowSuggestions:"AutocompleteInput_belowSuggestions__X0P0_",historySection:"AutocompleteInput_historySection__ZcsPH",historyTitle:"AutocompleteInput_historyTitle__s_n4W",historyItem:"AutocompleteInput_historyItem__txvhH",historyItemLabel:"AutocompleteInput_historyItemLabel__PZTlb",dropdown:"AutocompleteInput_dropdown__CzHbR"}},46061:(e,t,s)=>{"use strict";s.d(t,{rD:()=>eV,Ho:()=>eO,YB:()=>eF});var n=s(6029),a=s(75155),r=s(55729),l=s(75828),i=s.n(l),o=s(92799),c=s(84450),d=s.n(c),u=s(90310),m=s.n(u),h=s(67264),p=s.n(h),x=s(66692),g=s(2893),f=s(47122),y=s(14693),b=s(31292),v=s(40684),j=s(92205),_=s(35467),S=s(76089),w=s(27166),E=s(78253),C=s(60481),k=s(3635),N=s(8737),A=s(63085),T=s(43517),$=s(24589),z=s(94502),I=s(73454),L=s(6620),M=s(38314),R=s(24602),D=s(40387),P=s(95316),O=s(12482),F=s(39696),V=s(79220),B=s(21440),W=s(6876),H=s(61410),q=s(91021),X=s(55024),Y=s(78550),J=s(78744),K=s(31451),G=s(70727),Z=s(39785),U=s(81973),Q=s(68593),ee=s(7565),et=s(57820),es=s(92917),en=s(37659),ea=s(78341),er=s(45172),el=s(9385),ei=s(96413),eo=s(50374),ec=s(90515),ed=s(74620),eu=s.n(ed);let em=e=>{let t,s,r,l,o,c=(0,a.c)(19),{onClick:d,className:u,title:m,tabIndex:h,children:p,variant:x,isActive:g,iconSize:f}=e,y=void 0===h?-1:h,b=void 0===x?"default":x,v=void 0!==g&&g,j=void 0===f?14:f;c[0]!==d?(t=e=>{e.stopPropagation(),e.preventDefault(),d(e)},c[0]=d,c[1]=t):t=c[1];let _=t;c[2]!==u||c[3]!==v||c[4]!==b?(s="copy"===b?i()(eu().iconActionButton,{[eu().copied]:v}):u,c[2]=u,c[3]=v,c[4]=b,c[5]=s):s=c[5];let S=s,w=!m;return c[6]!==p||c[7]!==j||c[8]!==v?(r=v?(0,n.jsx)(ec.A,{size:j}):p,c[6]=p,c[7]=j,c[8]=v,c[9]=r):r=c[9],c[10]!==S||c[11]!==_||c[12]!==r||c[13]!==y?(l=(0,n.jsx)(N.N,{onClick:_,component:"div",className:S,tabIndex:y,role:"button",children:r}),c[10]=S,c[11]=_,c[12]=r,c[13]=y,c[14]=l):l=c[14],c[15]!==w||c[16]!==l||c[17]!==m?(o=(0,n.jsx)(A.m,{label:m,position:"top",withArrow:!0,disabled:w,openDelay:300,closeDelay:100,fz:"xs",children:l}),c[15]=w,c[16]=l,c[17]=m,c[18]=o):o=c[18],o},eh=({children:e,cellValue:t,tableContainerRef:s,wrapLinesEnabled:a,columnName:l,isChart:o=!1})=>{let[c,{close:d,open:u}]=(0,ea.j)(!1),[m,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)(!1),g=(0,r.useRef)(void 0),f=(0,r.useRef)(void 0);(0,r.useEffect)(()=>()=>{g.current&&clearTimeout(g.current),f.current&&clearTimeout(f.current)},[]);let{onPropertyAddClick:y}=(0,r.useContext)(eo.D),b=l&&y&&null!=t,v=()=>{p||(g.current&&clearTimeout(g.current),u())},j=()=>{g.current=setTimeout(()=>{d()},100)},_=()=>{d(),x(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{x(!1)},1e3)},S=async()=>{try{let e="string"==typeof t?t:String(t??"");await navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)}catch(e){console.error("Failed to copy to clipboard:",e)}},w=b?3:1;return o?(0,n.jsx)("div",{className:i()(eu().fieldText,{[eu().chart]:o}),style:{display:"flex",alignItems:"center"},children:e}):(0,n.jsx)("div",{className:i()(eu().fieldText,{[eu().truncated]:!a&&!o,[eu().wrapped]:a,[eu().chart]:o}),children:(0,n.jsxs)(en.A,{width:20*w+4*(w-1),position:"top-start",offset:5,opened:c,portalProps:{target:s??void 0},closeOnClickOutside:!1,clickOutsideEvents:[],children:[(0,n.jsx)(en.A.Target,{children:(0,n.jsx)("span",{onMouseEnter:v,onMouseLeave:j,onClick:_,tabIndex:-1,"aria-hidden":"true",style:{cursor:"pointer"},children:e})}),(0,n.jsx)(en.A.Dropdown,{style:{pointerEvents:"auto"},onMouseEnter:v,onMouseLeave:j,className:eu().fieldTextPopover,children:(0,n.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,n.jsx)(em,{onClick:S,variant:"copy",isActive:m,title:m?"Copied!":"Copy field value",children:(0,n.jsx)(er.A,{size:14})}),b&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(em,{onClick:()=>{b&&(y(l,"string"==typeof t?t:String(t??""),"include"),_())},variant:"copy",title:"Toggle filter for this value",children:(0,n.jsx)(el.A,{size:14})}),(0,n.jsx)(em,{onClick:()=>{b&&(y(l,"string"==typeof t?t:String(t??""),"exclude"),_())},variant:"copy",title:"Exclude this value",children:(0,n.jsx)(ei.A,{size:14})})]})]})})]})})};var ep=s(56795);let ex=({row:e,getRowWhere:t,sourceId:s,isWrapped:a,onToggleWrap:l})=>{let[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),u=async()=>{try{let{[G.ZO.ID]:t,...s}=e,n=Object.entries(s).reduce((e,[t,s])=>{if("string"==typeof s&&s.startsWith("{")||s.startsWith("["))try{e[t]=JSON.parse(s)}catch{e[t]=s}else e[t]=s;return e},{}),a=JSON.stringify(n,null,2);await navigator.clipboard.writeText(a),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy row data to clipboard:",e)}},m=async()=>{try{let n=t(e),a=new URL(window.location.href);a.searchParams.set("rowWhere",n.where),s&&a.searchParams.set("rowSource",s),await navigator.clipboard.writeText(a.toString()),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error("Failed to copy URL to clipboard:",e)}};return(0,n.jsxs)("div",{className:eu().rowButtons,children:[!a&&(0,n.jsx)(em,{onClick:l,variant:"copy",title:"Wrap All Lines",children:(0,n.jsx)(R.A,{size:16})}),(0,n.jsx)(em,{onClick:u,variant:"copy",isActive:i,title:i?"Copied entire row as JSON!":"Copy entire row as JSON",children:(0,n.jsx)(er.A,{size:16})}),(0,n.jsx)(em,{onClick:m,variant:"copy",isActive:c,title:c?"Copied shareable link!":"Copy shareable link to this specific row",children:(0,n.jsx)(ep.A,{size:16})})]})};var eg=s(48423),ef=s(22623),ey=s(59029),eb=s(74011),ev=s(97767),ej=s(67872);let e_=({searchQuery:e,onSearchChange:t,matchIndices:s,currentMatchIndex:a,onPreviousMatch:l,onNextMatch:i,isVisible:o,onVisibilityChange:c,containerRef:d})=>{let[u,m]=(0,r.useState)(!1),h=(0,r.useRef)(null),p=o??u,x=(0,r.useCallback)(()=>{void 0!==o?c?.(!1):m(!1),t("")},[o,t,c]),g=(0,r.useCallback)(()=>{void 0!==o?c?.(!0):m(!0),setTimeout(()=>{h.current?.focus(),h.current?.select()},0)},[o,c]),f=(0,r.useCallback)(e=>{if((e.metaKey||e.ctrlKey)&&"f"===e.key){if(d&&!(0,es.dS)(d))return;e.preventDefault(),g()}"Escape"===e.key&&p&&x()},[p,x,g]);(0,r.useEffect)(()=>(window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}),[f]);let y=(0,r.useCallback)(e=>{"Enter"===e.key&&s.length>0&&(e.shiftKey?l():i(),e.preventDefault())},[s.length,l,i]);return p?(0,n.jsx)(ef.t,{p:"xs",withBorder:!0,shadow:"md",pos:"absolute",top:8,right:8,style:{zIndex:2},miw:400,maw:500,role:"search","aria-label":"Table search",children:(0,n.jsxs)(k.Y,{gap:"xs",align:"center",wrap:"nowrap",children:[(0,n.jsx)(ey.k,{ref:h,placeholder:"Find in table...",value:e,onChange:e=>t(e.target.value),onKeyDown:y,size:"xs",style:{flex:1,minWidth:0},"aria-label":"Search table contents","aria-describedby":s.length>0?"search-match-count":void 0,rightSection:e?(0,n.jsx)(N.N,{onClick:()=>t(""),display:"flex",style:{alignItems:"center"},title:"Clear search","aria-label":"Clear search",children:(0,n.jsx)(eb.A,{size:14})}):null}),s.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(T.E,{id:"search-match-count",size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},"aria-live":"polite",children:[a+1," of ",s.length]}),(0,n.jsxs)(k.Y,{gap:4,children:[(0,n.jsx)(N.N,{onClick:l,display:"flex",style:{alignItems:"center"},title:"Previous match (Shift+Enter)","aria-label":"Previous match",children:(0,n.jsx)(ev.A,{size:16})}),(0,n.jsx)(N.N,{onClick:i,display:"flex",style:{alignItems:"center"},title:"Next match (Enter)","aria-label":"Next match",children:(0,n.jsx)(ej.A,{size:16})})]})]}):e?(0,n.jsx)(T.E,{size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},role:"status","aria-live":"polite",children:"No matches"}):null,(0,n.jsx)(N.N,{onClick:x,display:"flex",style:{alignItems:"center"},title:"Close search (Esc)","aria-label":"Close search",children:(0,n.jsx)(eb.A,{size:16})})]})}):null},eS=e=>{let t,s,r,l=(0,a.c)(17),{searchQuery:i,matchIndices:o,currentMatchIndex:c,dedupedRows:d,tableRows:u,getRowId:m,onMatchClick:h}=e;if(!i||0===o.length||0===u.length)return null;if(l[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",zIndex:1},l[0]=t):t=l[0],l[1]!==c||l[2]!==d||l[3]!==m||l[4]!==o||l[5]!==h||l[6]!==u){let e;l[8]!==c||l[9]!==d||l[10]!==m||l[11]!==o.length||l[12]!==h||l[13]!==u?(e=(e,t)=>{let s=d[e];if(!s)return null;let a=u.findIndex(e=>m(e.original)===m(s));if(-1===a)return null;let r=a/u.length*100,l=100/u.length,i=t===c;return(0,n.jsx)(C.a,{pos:"absolute",top:`${r}%`,right:0,w:"100%",h:`${l}%`,bg:i?"var(--mantine-color-orange-5)":"var(--mantine-color-yellow-5)",style:{cursor:"pointer",pointerEvents:"auto",minHeight:1,maxHeight:4},onClick:()=>h(t),title:`Match ${t+1} of ${o.length}`},`match-indicator-${e}`)},l[8]=c,l[9]=d,l[10]=m,l[11]=o.length,l[12]=h,l[13]=u,l[14]=e):e=l[14],s=o.map(e),l[1]=c,l[2]=d,l[3]=m,l[4]=o,l[5]=h,l[6]=u,l[7]=s}else s=l[7];return l[15]!==s?(r=(0,n.jsx)(C.a,{pos:"absolute",right:0,top:0,bottom:0,w:8,style:t,children:s}),l[15]=s,l[16]=r):r=l[16],r};var ew=s(88339),eE=s(17421),eC=s(41038),ek=s(81055),eN=s(70114);let eA=(0,r.memo)(e=>{let t,s,r,l,o,c=(0,a.c)(17),{columnsLength:d,children:u,virtualKey:m,source:h,rowId:p,measureElement:x,virtualIndex:g}=e,f=(()=>{let e,t=(0,a.c)(3),[,s]=(0,eC.ZA)("rowWhere"),[,n]=(0,eC.ZA)("rowSource");return t[0]!==s||t[1]!==n?(e=(e,t)=>{s(e),n(t??null)},t[0]=s,t[1]=n,t[2]=e):e=t[2],e})(),y=`expanded-row-${p}`,b=`${m}-expanded`;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=i()("mx-2 mb-2 rounded",eu().expandedRowContent),c[0]=t):t=c[0],c[1]!==f||c[2]!==p||c[3]!==h?.id?(s=f&&(0,n.jsx)("button",{type:"button",className:i()("position-absolute top-0 end-0 mt-1 me-1 p-1 border-0 bg-transparent text-muted rounded",eu().expandButton),onClick:()=>f(p,h?.id),title:"Open in sidebar","aria-label":"Open in sidebar",style:{zIndex:1,fontSize:"12px",lineHeight:1},children:(0,n.jsx)(ek.A,{size:14})}),c[1]=f,c[2]=p,c[3]=h?.id,c[4]=s):s=c[4],c[5]!==u||c[6]!==s?(r=(0,n.jsx)("div",{className:t,children:(0,n.jsx)("div",{className:"position-relative",children:(0,n.jsxs)("div",{className:"px-3 pt-2 position-relative",children:[s,u]})})}),c[5]=u,c[6]=s,c[7]=r):r=c[7],c[8]!==d||c[9]!==r?(l=(0,n.jsx)("td",{colSpan:d,className:"p-0 border-0",children:r}),c[8]=d,c[9]=r,c[10]=l):l=c[10],c[11]!==x||c[12]!==y||c[13]!==b||c[14]!==l||c[15]!==g?(o=(0,n.jsx)("tr",{"data-testid":y,className:eu().expandedRow,"data-index":g,ref:x,children:l},b),c[11]=x,c[12]=y,c[13]=b,c[14]=l,c[15]=g,c[16]=o):o=c[16],o}),eT=(0,r.memo)(e=>{let t,s,r,l,o,c,d=(0,a.c)(16),{rowId:u,isExpanded:m,highlightedLineId:h,toggleRowExpansion:p}=e,x=h===u,g=h!==u;d[0]!==m||d[1]!==x||d[2]!==g?(t=i()(eu().expandButton,{[eu().expanded]:m,"text-brand":x,"text-muted":g}),d[0]=m,d[1]=x,d[2]=g,d[3]=t):t=d[3],d[4]!==u||d[5]!==p?(s=e=>{e.stopPropagation(),p(u)},d[4]=u,d[5]=p,d[6]=s):s=d[6];let f=`${m?"Collapse":"Expand"} log details`;return d[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(eN.A,{size:16}),d[7]=r):r=d[7],d[8]!==m||d[9]!==t||d[10]!==s||d[11]!==f?(l=(0,n.jsx)("button",{type:"button",className:t,onClick:s,"aria-expanded":m,"aria-label":f,children:r}),d[8]=m,d[9]=t,d[10]=s,d[11]=f,d[12]=l):l=d[12],d[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)("span",{className:eu().expandButtonSeparator}),d[13]=o):o=d[13],d[14]!==l?(c=(0,n.jsxs)("span",{className:"d-flex align-items-center justify-content-center",children:[l,o]}),d[14]=l,d[15]=c):c=d[15],c});eT.displayName="ExpandButton";var e$=s(61629);let ez="NULL",eI={duration:e=>e.duration>=0?e.duration:ez,severityText:e=>e.severityText??e.statusCode,default:(e,t)=>e[t]},eL=e=>e[G.ZO.ID];function eM(e,t){return(eI[e]??eI.default)(t,e)}let eR=()=>null,eD=e=>{let t,s,r,l,i,o,c,d,u,m,h=(0,a.c)(17),{data:p,dateRange:x,color:_}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={position:"relative",width:"100%",height:"100%"},s={position:"absolute",left:0,right:0,bottom:0,top:0},h[0]=t,h[1]=s):(t=h[0],s=h[1]),h[2]===Symbol.for("react.memo_cache_sentinel")?(r={top:4,left:0,right:4,bottom:0},h[2]=r):r=h[2];let S=x[0].getTime()/1e3,w=x[1].getTime()/1e3;h[3]!==S||h[4]!==w?(l=[S,w],h[3]=S,h[4]=w,h[5]=l):l=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(i={fontSize:12,fontFamily:"IBM Plex Mono, monospace"},h[6]=i):i=h[6],h[7]!==l?(o=(0,n.jsx)(g.W,{dataKey:"bucket",domain:l,interval:"preserveStartEnd",scale:"time",type:"number",tickFormatter:eB,minTickGap:50,tick:i}),h[7]=l,h[8]=o):o=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(f.h,{width:40,minTickGap:25,tickFormatter:eW,tick:{fontSize:12,fontFamily:"IBM Plex Mono, monospace"}}),h[9]=c):c=h[9];let E=_||es.lm[0];return h[10]!==E?(d=(0,n.jsx)(y.y,{isAnimationActive:!1,dataKey:"count",stackId:"a",fill:E,maxBarSize:24}),h[10]=E,h[11]=d):d=h[11],h[12]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)(b.m,{content:(0,n.jsx)(eR,{})}),h[12]=u):u=h[12],h[13]!==p||h[14]!==d||h[15]!==o?(m=(0,n.jsx)("div",{style:t,children:(0,n.jsx)("div",{style:s,children:(0,n.jsx)(v.u,{width:"100%",height:"100%",minWidth:0,children:(0,n.jsxs)(j.E,{width:500,height:300,data:p,syncId:"hdx",syncMethod:"value",margin:r,children:[o,c,d,u]})})})}),h[13]=p,h[14]=d,h[15]=o,h[16]=m):m=h[16],m},eP=e=>{let t,s,r,l,i=(0,a.c)(12),{opened:o,onClose:c,config:d}=e;i[0]!==d?(t=["SqlModal",d],i[0]=d,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(s={queryKey:t,placeholderData:eH,enabled:o},i[2]=o,i[3]=t,i[4]=s):s=i[4];let{data:u,isLoading:m}=(0,q.zu)(d,s);return i[5]!==m||i[6]!==u?(r=u?(0,n.jsx)(ew.V,{data:u,enableCopy:!0}):m?(0,n.jsxs)("div",{className:"text-center my-2",children:[(0,n.jsx)("div",{className:"d-inline-block me-2",children:(0,n.jsx)(z.A,{size:14,className:"spin-animate"})}),"Loading SQL..."]}):(0,n.jsx)("div",{className:"text-center my-2",children:"No SQL available"}),i[5]=m,i[6]=u,i[7]=r):r=i[7],i[8]!==c||i[9]!==o||i[10]!==r?(l=(0,n.jsx)(w.a,{opened:o,onClose:c,title:"Generated SQL",size:"auto",children:r}),i[8]=c,i[9]=o,i[10]=r,i[11]=l):l=i[11],l},eO=(0,r.memo)(({tableId:e,displayedColumns:t,fetchNextPage:s,hasNextPage:l,highlightedLineId:c,isLive:u,isLoading:h,rows:p,generateRowId:g,onInstructionsClick:f,onRowDetailsClick:y,onScroll:b,onSettingsClick:v,onShowPatternsClick:j,wrapLines:S=!1,columnNameMap:w,showServiceColumn:O=!0,dedupRows:W,isError:H,error:Y,columnTypeMap:J,dateRange:K,loadingDate:U,config:en,onChildModalOpen:ea,renderRowDetails:er,source:el,onExpandedRowsChange:ei,collapseAllRows:eo,enableSorting:ec=!1,onSortingChange:ed,sortOrder:em,showExpandButton:ep=!0,getRowWhere:ef,variant:ey="default"})=>{let eb=(0,r.useMemo)(()=>{let e=new Set;return(W?p.filter(t=>{let s=g(t);return!e.has(s.where)&&(e.add(s.where),!0)}):p).map(e=>{let t=g(e);return{...e,[G.ZO.ID]:t.where,[G.ZO.ALIAS_WITH]:t.aliasWith}})},[p,W,g]),ev=(0,r.useCallback)(e=>{y?.(e)},[y]),{userPreferences:{isUTC:ej}}=(0,et.HW)(),[eC,ek]=(0,es.Mj)(`${e}-column-sizes`,{}),[eN,eI]=(0,r.useState)(null),eR=(0,r.useCallback)(e=>(e&&eI(e),()=>{eI(null)}),[]),{data:eO}=(0,q.Kc)(en),eF=(0,es.ZC)(u);(0,r.useEffect)(()=>{u&&!1===eF&&null!=eN&&(eN.scrollTop=0)},[u,eF,eN]);let eV=(0,r.useMemo)(()=>(function(e){let t={},s=Math.min(e.length,100);for(let n=0;n<s;n++){let s=e[n];Object.keys(s).forEach(e=>{let n=s[e];(n?.length||0)>0&&512>(n?.length||0)&&d()(n)&&null!=(0,es.lO)(n)&&(t[e]=(t[e]??0)+1)})}let n=0,a="";for(let[e,s]of Object.entries(t))s>n&&(n=s,a=e);if(n>0)return a})(eb),[eb]),{csvData:eB,maxRows:eW,isLimited:eH}=(0,X.u)(eb,t.map(e=>({dataKey:e,displayName:w?.[e]??e}))),{expandedRows:eq,toggleRowExpansion:eX,collapseAllRows:eY}=(e=>{let t,s,n,l,i=(0,a.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(t={},i[0]=t):t=i[0];let[o,c]=(0,r.useState)(t);i[1]!==e?(s=t=>{c(s=>{let n={...s,[t]:!s[t]},a=Object.values(n).some(Boolean);return e?.(a),n})},i[1]=e,i[2]=s):s=i[2];let d=s;i[3]!==e?(n=()=>{c({}),e?.(!1)},i[3]=e,i[4]=n):n=i[4];let u=n;return i[5]!==u||i[6]!==o||i[7]!==d?(l={expandedRows:o,toggleRowExpansion:d,collapseAllRows:u},i[5]=u,i[6]=o,i[7]=d,i[8]=l):l=i[8],l})(ei);(0,r.useEffect)(()=>{eo&&eY()},[eo,eY]);let eJ=function({rows:e,searchableColumns:t,debounceMs:s=300,onVisibilityChange:n}){let[a,l]=(0,r.useState)(""),[i]=(0,Z.o)(a,s),[o,c]=(0,r.useState)(0),[d,u]=(0,r.useState)([]),[m,h]=(0,r.useState)(!1),p=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(!i.trim()){u([]),c(0);return}let s=i.toLowerCase(),n=[];e.forEach((e,a)=>{t.map(t=>{let s=e[t];return null!=s?String(s).toLowerCase():""}).join(" ").includes(s)&&n.push(a)});let a=d.length;u(n),0===a&&n.length>0?(c(0),p.current=!0):n.length>0&&o>=n.length&&(c(n.length-1),p.current=!0)},[i,e,t]),(0,r.useEffect)(()=>{n?.(m)},[m,n]);let x=(0,r.useCallback)(e=>{l(e),e||(u([]),c(0),p.current=!1)},[]),g=(0,r.useCallback)(()=>{p.current=!0,c(e=>e>0?e-1:d.length-1)},[d.length]),f=(0,r.useCallback)(()=>{p.current=!0,c(e=>e<d.length-1?e+1:0)},[d.length]),y=(0,r.useCallback)(e=>{p.current=!0,c(e)},[]),b=(0,r.useCallback)(()=>{l(""),u([]),c(0),p.current=!1,h(!1)},[]),v=(0,r.useCallback)(()=>{p.current=!1},[]);return{searchQuery:i,inputValue:a,setInputValue:l,matchIndices:d,currentMatchIndex:o,isSearchVisible:m,setIsSearchVisible:h,shouldScrollToMatch:p.current,clearShouldScrollToMatch:v,handlePreviousMatch:g,handleNextMatch:f,handleMatchClick:y,handleSearchChange:x,resetSearch:b}}({rows:eb,searchableColumns:t,debounceMs:300}),eK=(0,r.useMemo)(()=>[...ep?[{id:"expand-btn",accessorKey:G.ZO.ID,header:()=>"",cell:e=>{let t=e.getValue(),s=eq[t]??!1;return(0,n.jsx)(eT,{rowId:t,isExpanded:s,highlightedLineId:c,toggleRowExpansion:eX})},size:32,enableResizing:!1,enableSorting:!1,meta:{className:"text-center"}}]:[],...t.map((e,s)=>{let a=J.get(e)?._type,r=a===_.A2.Date,l=e===eV;return{meta:{column:e,jsColumnType:a},id:eO?.[e]?`"${e}"`:e,enableSorting:a!==_.A2.Dynamic,accessorFn:m()(eM)(e),header:`${w?.[e]??e}${r?ej?" (UTC)":" (Local)":""}`,cell:t=>{let s=t.getValue();if("__hdx_pattern_trend"===e)return(0,n.jsx)("div",{style:{height:50,width:"100%"},children:(0,n.jsx)(eD,{data:s.data,dateRange:s.dateRange,color:(0,es.aw)(t.row.original.severityText??t.row.original.statusCode)})});if(r){let e=new Date(s);return(0,n.jsx)("span",{className:"text-muted",children:(0,n.jsx)(ee.H,{value:e,format:"withMs"})})}let a="string"==typeof s?s:`${s}`;if(e===eV)return(0,n.jsx)(e$.A,{level:a});let l=a.length>500?`${a.slice(0,500)}...`:a,o=!!eJ.searchQuery&&eJ.matchIndices.length>0&&eJ.matchIndices[eJ.currentMatchIndex]===t.row.index,c=eJ.searchQuery?((e,t,s={})=>{if(!t.trim())return e;let a=s.isCurrentMatch?s.currentMatchBackgroundColor||"var(--mantine-color-orange-5)":s.backgroundColor||"var(--mantine-color-yellow-3)",r=e.toLowerCase(),l=t.toLowerCase(),i=[],o=0,c=r.indexOf(l);for(;-1!==c;)c>o&&i.push(e.slice(o,c)),i.push((0,n.jsx)("mark",{style:{backgroundColor:a,color:s.textColor||"var(--color-text-inverted)",padding:0},children:e.slice(c,c+t.length)},`${c}-${o}`)),o=c+t.length,c=r.indexOf(l,o);return o<e.length&&i.push(e.slice(o)),i.length>0?(0,n.jsx)(n.Fragment,{children:i}):e})(l,eJ.searchQuery,{isCurrentMatch:o}):l;return(0,n.jsx)("span",{className:i()({"text-muted":s===ez}),children:c})},size:s===t.length-1?Q.k:eC[e]??(r?170:l?115:160)}})],[ej,c,t,eC,w,J,eV,eq,eX,ep,eO,eJ.searchQuery,eJ.matchIndices,eJ.currentMatchIndex]),eG=(0,r.useCallback)(e=>{if(e){let{scrollHeight:t,scrollTop:n,clientHeight:a}=e;t-n-a<500&&!h&&l&&s?.({cancelRefetch:!1})}},[s,h,l]);(0,r.useEffect)(()=>{eG(eN)},[eG,eN]);let eZ=(0,r.useMemo)(()=>{let t={data:eb,columns:eK,getCoreRowModel:(0,F.HT)(),enableSorting:ec,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(em??[]);ed?.(t??null)}else ed?.(e??null)},state:{sorting:em??[]},enableColumnResizing:!0,columnResizeMode:"onChange"};return e?{...t,state:{columnSizing:eC},onColumnSizingChange:e=>{let t=e instanceof Function?e():e;ek({...eC,...t})}}:t},[eK,eb,e,em,ec,ed,eC,ek]),eU=(0,V.N4)(eZ),{rows:eQ}=eU.getRowModel(),e0=(0,B.Te)({count:eQ.length,getScrollElement:(0,r.useCallback)(()=>eN,[eN]),estimateSize:(0,r.useCallback)(()=>23,[]),overscan:30,paddingEnd:20}),e1=e0.getVirtualItems(),e2=e0.getTotalSize(),[e3,e5]=(0,r.useMemo)(()=>e1.length>0?[Math.max(0,e1[0].start-e0.options.scrollMargin),Math.max(0,e2-e1[e1.length-1].end)]:[0,0],[e1,e0.options.scrollMargin,e2]),[e4,e6]=(0,r.useState)(!1),[e7,e8]=(0,es.Mj)(`${e}-wrap-lines`,S??!1),[e9,te]=(0,r.useState)(!1),tt=e=>{te(e),ea?.(e)};(0,r.useEffect)(()=>{if(eJ.shouldScrollToMatch)if(eJ.matchIndices.length>0&&e0&&eJ.currentMatchIndex<eJ.matchIndices.length&&eJ.searchQuery.trim()){let e=eb[eJ.matchIndices[eJ.currentMatchIndex]];if(e){let t=eQ.findIndex(t=>eL(t.original)===eL(e));-1!==t?requestAnimationFrame(()=>{e0.scrollToIndex(t,{align:"center"}),eJ.clearShouldScrollToMatch()}):eJ.clearShouldScrollToMatch()}else eJ.clearShouldScrollToMatch()}else eJ.clearShouldScrollToMatch()},[eJ.shouldScrollToMatch,eJ.currentMatchIndex,eJ.matchIndices,eJ.searchQuery,eJ.clearShouldScrollToMatch,e0,eQ,eb]),(0,r.useEffect)(()=>{if(e4||!c||null==e0)return;let e=eb.findIndex(e=>eL(e)===c);-1==e&&c?eb.length<1e3&&!h&&l&&s?.({cancelRefetch:!1}):(e6(!0),null==e0.getVirtualItems().find(t=>t.index===e)&&e0.scrollToIndex(e,{align:"center"}))},[eb,c,s,e0,e4,h,l]);let ts=(0,r.useCallback)(e=>{if(null==c)return;let t=eb.findIndex(e=>eL(e)===c)+e;t<0||t>=eb.length||ev(eb[t])},[c,ev,eb]);return(0,x.vC)(["ArrowRight","ArrowDown","j"],e=>{e.preventDefault(),ts(1)}),(0,x.vC)(["ArrowLeft","ArrowUp","k"],e=>{e.preventDefault(),ts(-1)}),(0,n.jsx)(E.s,{direction:"column",h:"100%",children:(0,n.jsxs)(C.a,{pos:"relative",style:{flex:1,minHeight:0},children:[(0,n.jsx)(e_,{searchQuery:eJ.inputValue,onSearchChange:eJ.handleSearchChange,matchIndices:eJ.matchIndices,currentMatchIndex:eJ.currentMatchIndex,onPreviousMatch:eJ.handlePreviousMatch,onNextMatch:eJ.handleNextMatch,isVisible:eJ.isSearchVisible,onVisibilityChange:eJ.setIsSearchVisible,containerRef:eN}),(0,n.jsxs)("div",{"data-testid":"search-results-table",className:i()("overflow-auto h-100 fs-8",eu().tableWrapper,{[eu().muted]:"muted"===ey}),onScroll:e=>{if(eG(e.target),null!=e.target){let{scrollTop:t}=e.target;b?.(t)}},ref:eR,children:[en&&(0,n.jsx)(eP,{opened:e9,onClose:()=>tt(!1),config:en}),(0,n.jsxs)("table",{className:i()("w-100",eu().table),id:e,children:[(0,n.jsx)("thead",{className:eu().tableHead,children:t.length>0&&eU.getHeaderGroups().map(t=>(0,n.jsx)("tr",{children:t.headers.map((s,a)=>{let r=a===t.headers.length-1;return(0,n.jsx)(eg.A,{header:s,isLast:r,lastItemButtons:(0,n.jsxs)(k.Y,{gap:8,mr:8,children:[e&&Object.keys(eC).length>0&&(0,n.jsx)(N.N,{onClick:()=>ek({}),title:"Reset Column Widths",children:(0,n.jsx)(A.m,{label:"Reset Column Widths",children:(0,n.jsx)(I.A,{size:16})})}),en&&(0,n.jsx)(N.N,{onClick:()=>tt(!0),title:"Show Generated SQL",tabIndex:0,children:(0,n.jsx)(A.m,{label:"Show Generated SQL",children:(0,n.jsx)(L.A,{size:16})})}),(0,n.jsx)(N.N,{onClick:()=>e8(e=>!e),title:`${e7?"Disable":"Enable"}  Wrap Lines`,children:(0,n.jsx)(A.m,{label:`${e7?"Disable":"Enable"} Wrap Lines`,children:e7?(0,n.jsx)(M.A,{size:16}):(0,n.jsx)(R.A,{size:16})})}),(0,n.jsx)(eE.P,{data:eB,filename:`hyperdx_search_results_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}`,className:"fs-6",children:(0,n.jsx)(A.m,{label:`Download Table as CSV (max ${eW.toLocaleString()} rows)${eH?" - data truncated":""}`,children:(0,n.jsx)(D.A,{size:16})})}),null!=v&&(0,n.jsx)(N.N,{onClick:()=>v(),title:"Settings",children:(0,n.jsx)(A.m,{label:"Settings",children:(0,n.jsx)(P.A,{size:16})})})]})},s.id)})},t.id))}),(0,n.jsxs)("tbody",{children:[e3>0&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:99999,style:{height:`${e3}px`}})}),e1.map(e=>{let t=eQ[e.index],s=eL(t.original),a=eq[s]??!1;return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsxs)("tr",{"data-testid":`table-row-${s}`,className:i()(eu().tableRow,{[eu().tableRow__selected]:c&&c===s}),"data-index":e.index,ref:e0.measureElement,children:[ep&&(0,n.jsx)("td",{className:"align-top overflow-hidden",style:{width:"40px"},children:(0,V.Kv)(t.getVisibleCells()[0].column.columnDef.cell,t.getVisibleCells()[0].getContext())}),(0,n.jsx)("td",{className:"align-top overflow-hidden p-0",colSpan:eK.length-!!ep,children:(0,n.jsxs)("button",{type:"button",className:i()(eu().rowContentButton,{[eu().isWrapped]:e7,[eu().isTruncated]:!e7}),onClick:e=>{ev(t.original)},"aria-label":"View details for log entry",children:[t.getVisibleCells().slice(+!!ep).map(e=>{let t=e.column.columnDef.meta?.className,s=e.column.getSize(),a=e.getValue();return(0,n.jsx)("div",{className:i()("flex-shrink-0 overflow-hidden position-relative",t),style:{width:s===Q.k?"auto":`${s}px`,flex:s===Q.k?"1":"none"},children:(0,n.jsx)("div",{className:eu().fieldTextContainer,children:(0,n.jsx)(eh,{cellValue:a,wrapLinesEnabled:e7,tableContainerRef:eN,columnName:e.column.columnDef.meta?.column,isChart:e.column.columnDef.meta?.column==="__hdx_pattern_trend",children:(0,V.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)}),ef&&(0,n.jsx)(ex,{row:t.original,getRowWhere:ef,sourceId:el?.id,isWrapped:e7,onToggleWrap:()=>e8(!e7)})]})})]}),ep&&a&&(0,n.jsx)(eA,{columnsLength:eK.length,virtualKey:e.key.toString(),source:el,rowId:s,measureElement:e0.measureElement,virtualIndex:e.index,children:er?.({id:s,aliasWith:t.original[G.ZO.ALIAS_WITH],...t.original})})]},e.key)}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:800,children:(0,n.jsx)("div",{className:"rounded fs-7 bg-muted text-center d-flex align-items-center justify-content-center mt-3",children:h?(0,n.jsxs)("div",{className:"my-3",children:[(0,n.jsx)("div",{className:"d-inline-block",children:(0,n.jsx)(z.A,{size:14,className:"spin-animate"})})," ",null!=U&&(0,n.jsxs)(n.Fragment,{children:["Searched ",(0,n.jsx)(ee.H,{value:U}),"."," "]}),"Loading results",K?.[0]!=null&&K?.[1]!=null?(0,n.jsxs)(n.Fragment,{children:[" ","across"," ",(0,o.A)(K?.[1],K?.[0])," ","(",(0,n.jsx)(ee.H,{value:K?.[0],format:"withYear"})," ","to"," ",(0,n.jsx)(ee.H,{value:K?.[1],format:"withYear"}),")"]}):null,"..."]}):!1==l&&!1==h&&eb.length>0?(0,n.jsx)("div",{className:"my-3",children:"End of Results"}):H?(0,n.jsxs)("div",{className:"my-3",children:[(0,n.jsx)(T.E,{ta:"center",size:"sm",children:"Error loading results, please check your query or try again."}),(0,n.jsxs)(C.a,{p:"sm",children:[(0,n.jsx)(C.a,{mt:"sm",children:(0,n.jsx)($.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:Y?.message})}),Y instanceof _.p1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,n.jsx)(E.s,{w:"100%",ta:"initial",align:"center",justify:"center",children:(0,n.jsx)(ew.V,{data:Y?.query})})]})]})]}):!1==l&&!1==h&&0===eb.length?(0,n.jsxs)("div",{className:"my-3","data-testid":"db-row-table-no-results",children:["No results found.",(0,n.jsx)(T.E,{mt:"sm",children:"Try checking the query explainer in the search bar if there are any search syntax issues."}),K?.[0]!=null&&K?.[1]!=null?(0,n.jsxs)(T.E,{mt:"sm",children:["Searched Time Range:"," ",(0,o.A)(K?.[1],K?.[0])," ","(",(0,n.jsx)(ee.H,{value:K?.[0],format:"withYear"})," ","to"," ",(0,n.jsx)(ee.H,{value:K?.[1],format:"withYear"}),")"]}):null]}):(0,n.jsx)("div",{})})})}),e5>0&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:99999,style:{height:`${e5}px`}})})]})]})]}),(0,n.jsx)(eS,{searchQuery:eJ.searchQuery,matchIndices:eJ.matchIndices,currentMatchIndex:eJ.currentMatchIndex,dedupedRows:eb,tableRows:eQ,getRowId:eL,onMatchClick:eJ.handleMatchClick})]})})});function eF(e){let t,s,n=(0,a.c)(12);n[0]!==e.connection||n[1]!==e.from.databaseName||n[2]!==e.from.tableName?(t={databaseName:e.from.databaseName,tableName:e.from.tableName,connectionId:e.connection},n[0]=e.connection,n[1]=e.from.databaseName,n[2]=e.from.tableName,n[3]=t):t=n[3];let{data:r}=(0,Y.Z2)(t),l=r?.primary_key,i=r?.partition_key;e:{let t,a;if(null==l||null==i){s=void 0;break e}n[4]!==e.select||n[5]!==i||n[6]!==l?(t=function(e,t,s){let n=new Set([...(0,_.bZ)(s),...(0,_.bZ)(t)]);if("string"==typeof e){let t=new Set((0,S.AB)(e)),s=[...n].filter(e=>!t.has(e));return{select:[...t,...s].join(","),additionalKeysLength:s.length}}{let t=[...n].map(e=>({valueExpression:e}));return{select:[...e,...t],additionalKeysLength:t.length}}}(e.select,l,i),n[4]=e.select,n[5]=i,n[6]=l,n[7]=t):t=n[7];let{select:r,additionalKeysLength:o}=t;n[8]!==o||n[9]!==e||n[10]!==r?(a={...e,select:r,additionalKeysLength:o},n[8]=o,n[9]=e,n[10]=r,n[11]=a):a=n[11],s=a}return s}let eV=(0,r.memo)(function({config:e,sourceId:t,onError:s,onRowDetailsClick:a,highlightedLineId:l,enabled:i=!0,isLive:o=!1,queryKeyPrefix:c,onScroll:d,denoiseResults:u=!1,onChildModalOpen:m,onExpandedRowsChange:h,collapseAllRows:x,showExpandButton:g=!0,renderRowDetails:f,onSortingChange:y,initialSortBy:b,variant:v="default"}){var j;let{data:S}=W.Ay.useMe(),[w,E]=(0,r.useState)(b?.[0]??null),k=(0,r.useMemo)(()=>w?[w]:[],[w]),N=(0,r.useCallback)(e=>{y?.(e),E(e?.[0]??null)},[E,y]),A=(0,es.ZC)(t);(0,r.useEffect)(()=>{A&&A!==t&&N(null)},[t]);let $=(0,es.ZC)(b);(0,r.useEffect)(()=>{let e=b?.[0]??null,t=$?.[0]??null;JSON.stringify(e)!==JSON.stringify(t)&&E(e)},[b,$]);let z=(0,r.useMemo)(()=>{let t={...(0,H.Nz)(S?.team),...e};return k.length&&(t.orderBy=k.map(e=>({valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}))),t},[S,e,k]),I=eF(z),{data:L,fetchNextPage:M,hasNextPage:R,isFetching:D,isError:P,error:F}=(0,J.A)(I??e,{enabled:i&&null!=I&&("string"==typeof(j=e.select)?j.split(",").filter(e=>e.trim().length>0).length:j.length)>0,isLive:o,queryKeyPrefix:c}),V=(0,r.useMemo)(()=>(function(e,t){if(null==e||null==t)return new Map;let s=e.slice(0,e.length-t);return new Map(s?.map(e=>[e.name,{...e,_type:(0,_.rj)(e.type)}]))})(L?.meta,I?.additionalKeysLength),[L,I]),B=(0,r.useMemo)(()=>Array.from(V.keys()),[V]),q=(0,r.useMemo)(()=>B.filter(e=>{let t=V.get(e)?._type;return(0,_.Zo)(t)}),[B,V]),X=(0,r.useMemo)(()=>(L?.data??[]).map(e=>{let t={...e};return q.forEach(s=>{V.get(s)?._type===_.A2.JSON?t[s]=JSON.stringify(e[s]).replace(/\//g,"\\/"):t[s]=JSON.stringify(e[s])}),t}),[L,q,V]),Y=(0,r.useMemo)(()=>(0,_.D7)(L?.chSql??{sql:"",params:{}}),[L]),Z=(0,G.Ay)({meta:L?.meta,aliasMap:Y}),Q=(0,r.useCallback)(e=>a?.(Z(e)),[a,Z]);(0,r.useEffect)(()=>{P&&s&&F&&s(F)},[P,s,F]);let{data:ee}=(0,U.Fo)({id:t}),et=B[B.length-1],en=(0,K.nt)({config:e,samples:1e4,bodyValueExpression:et??"",severityTextExpression:ee?.severityTextExpression??"",totalCount:void 0,enabled:u}),ea=(0,O.I)({queryKey:["noisy-patterns",e],queryFn:async()=>Object.values(en.data).filter(e=>e.count/(en.sampledRowCount??1)>.1),enabled:u&&null!=en.data&&Object.values(en.data).length>0&&null!=en.miner}),er=(0,r.useMemo)(()=>ea.data?.map(e=>e.id)??[],[ea.data]),el=(0,O.I)({queryKey:["denoised-rows",e,u,...u?[X]:[],er,et],queryFn:async()=>{if(!u)return[];if(0===er.length)return X;let e=await en.miner?.matchLogs(X.map(e=>e[et]));return X.filter((t,s)=>{let n=e?.[s];return!er.includes(`${n}`)})},placeholderData:(t,s)=>{if(s?.queryKey?.[0]==="denoised-rows"&&s?.queryKey?.[1]===e)return t},gcTime:o?p()("30s"):p()("5m"),enabled:u&&ea.isSuccess&&X.length>0&&null!=en.miner}),ei=u?D||el.isFetching||ea.isFetching||en.isLoading:D,eo=L?.window?.direction==="ASC"?L?.window?.endTime:L?.window?.startTime;return(0,n.jsxs)(n.Fragment,{children:[u&&(0,n.jsxs)(C.a,{mb:"xxs",px:"sm",children:[(0,n.jsx)(T.E,{fw:"bold",fz:"xs",mb:"xxs",children:"Removed Noisy Event Patterns"}),(0,n.jsxs)(C.a,{mah:100,style:{overflow:"auto"},children:[ea.data?.map(e=>(0,n.jsx)(T.E,{fz:"xs",children:e.pattern},e.id)),0===er.length&&(0,n.jsx)(T.E,{fz:"xs",children:"No noisy patterns found"})]})]}),(0,n.jsx)(eO,{isLive:o,wrapLines:!1,displayedColumns:B,highlightedLineId:l,rows:u?el?.data??[]:X,renderRowDetails:f,isLoading:ei,fetchNextPage:M,hasNextPage:R,onRowDetailsClick:Q,onScroll:d,generateRowId:Z,isError:P,error:F??void 0,columnTypeMap:V,dateRange:e.dateRange,loadingDate:eo,config:z,onChildModalOpen:m,source:ee,onExpandedRowsChange:h,collapseAllRows:x,showExpandButton:g,enableSorting:!0,onSortingChange:N,sortOrder:k,getRowWhere:Z,variant:v})]})});function eB(){return""}function eW(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function eH(e){return e??""}},50374:(e,t,s)=>{"use strict";s.d(t,{D:()=>e0,A:()=>e3});var n,a,r=s(6029),l=s(75155),i=s(55729),o=s(86508),c=s(84450),d=s.n(c),u=s(41038),m=s(7913),h=s(66692),p=s(82641),x=s(60481),g=s(78253),f=s(10174),y=s(34834),b=s(64441),v=s(24885);function j(e){let t,s,n,a=(0,l.c)(13),{hasLogSource:r}=e,[o,c]=(0,u.ZA)("traceWhere"),[d,m]=(0,u.ZA)("logWhere"),h=!!o||!!(r&&d),[p,x]=(0,i.useState)(h);a[0]!==m||a[1]!==c?(t=e=>{c(e.traceWhere||null),m(e.logWhere||null)},a[0]=m,a[1]=c,a[2]=t):t=a[2];let g=t;a[3]!==m||a[4]!==c?(s=()=>{c(null),m(null)},a[3]=m,a[4]=c,a[5]=s):s=a[5];let f=s;return a[6]!==f||a[7]!==h||a[8]!==p||a[9]!==d||a[10]!==g||a[11]!==o?(n={traceWhere:o,logWhere:d,isFilterActive:h,isFilterExpanded:p,setIsFilterExpanded:x,onSubmit:g,clear:f},a[6]=f,a[7]=h,a[8]=p,a[9]=d,a[10]=g,a[11]=o,a[12]=n):n=a[12],n}var _=s(78694),S=s(81973),w=s(96958),E=s(18006),C=s(26674),k=s(3635),N=s(43517),A=s(43085),T=s(98287);function $(e){let t,s,n,a,i=(0,l.c)(9),{traceId:o,dateRange:c,traceTableSourceId:d}=e;i[0]!==d?(t={id:d},i[0]=d,i[1]=t):t=i[1];let{data:u}=(0,S.Fo)(t);return i[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsxs)(k.Y,{gap:0,children:[(0,r.jsx)(N.E,{size:"sm",ps:"sm",children:"Service Map"}),(0,r.jsx)(A.E,{size:"xs",ms:"xs",color:"gray",autoContrast:!0,radius:"sm",children:"Beta"})]}),i[2]=s):s=i[2],i[3]!==c||i[4]!==o||i[5]!==u?(n=u?(0,r.jsx)(T.A,{traceTableSource:u,traceId:o,dateRange:c,isSingleTrace:!0}):null,i[3]=c,i[4]=o,i[5]=u,i[6]=n):n=i[6],i[7]!==n?(a=(0,r.jsxs)(y.B,{w:"100%",children:[s,n]}),i[7]=n,i[8]=a):a=i[8],a}var z=s(76539),I=s(43465),L=s(66631),M=s(76089),R=s(90124),D=s(62801),P=s(44595),O=s(53993),F=s(43152),V=s(40228),B=s(28450);let W=e=>{let t,s,n,a,c,d,u,m,h,p,x,g,f,y,b,v,j,_,S,w,E,C,N,A,T,$=(0,l.c)(73),{fieldPrefix:z,metricSource:O,timestamp:B,title:W,where:H}=e,[q,X]=(0,i.useState)("30m"),[Y,J]=(0,i.useState)("sm");if($[0]!==q||$[1]!==B){let e={"30m":{minutes:15},"1h":{minutes:30},"1d":{hours:12}}[q];t=(0,I.A)(new Date(B),e),s=(0,L.A)([(0,o.A)(new Date(B),e),new Date]),$[0]=q,$[1]=B,$[2]=t,$[3]=s}else t=$[2],s=$[3];$[4]!==t||$[5]!==s?(n=[t,s],$[4]=t,$[5]=s,$[6]=n):n=$[6];let K=n;e:{switch(Y){case"sm":{let e;$[7]===Symbol.for("react.memo_cache_sentinel")?(e={cols:3,height:200},$[7]=e):e=$[7],a=e;break e}case"md":{let e;$[8]===Symbol.for("react.memo_cache_sentinel")?(e={cols:2,height:250},$[8]=e):e=$[8],a=e;break e}case"lg":{let e;$[9]===Symbol.for("react.memo_cache_sentinel")?(e={cols:1,height:320},$[9]=e):e=$[9],a=e;break e}}a=void 0}let{cols:G,height:Z}=a;$[10]!==K?(c=(0,M.tA)(K),$[10]=K,$[11]=c):c=$[11];let U=c,Q=`infra-subpanel-${z}`;$[12]!==W?(d=(0,r.jsx)("h4",{className:"fs-6 m-0",children:W}),$[12]=W,$[13]=d):d=$[13],$[14]===Symbol.for("react.memo_cache_sentinel")?(u=[{label:"30m",value:"30m"},{label:"1h",value:"1h"},{label:"1d",value:"1d"}],$[14]=u):u=$[14],$[15]===Symbol.for("react.memo_cache_sentinel")?(m=e=>X(e),$[15]=m):m=$[15],$[16]!==q?(h=(0,r.jsx)(R.I,{size:"xs",data:u,value:q,onChange:m}),$[16]=q,$[17]=h):h=$[17],$[18]!==h||$[19]!==d?(p=(0,r.jsxs)(k.Y,{align:"center",children:[d,h]}),$[18]=h,$[19]=d,$[20]=p):p=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(x=[{label:"SM",value:"sm"},{label:"MD",value:"md"},{label:"LG",value:"lg"}],$[21]=x):x=$[21],$[22]===Symbol.for("react.memo_cache_sentinel")?(g=e=>J(e),$[22]=g):g=$[22],$[23]!==Y?(f=(0,r.jsx)(k.Y,{align:"center",children:(0,r.jsx)(R.I,{size:"xs",data:x,value:Y,onChange:g})}),$[23]=Y,$[24]=f):f=$[24],$[25]!==p||$[26]!==f?(y=(0,r.jsxs)(k.Y,{justify:"space-between",align:"center",children:[p,f]}),$[25]=p,$[26]=f,$[27]=y):y=$[27],$[28]!==K||$[29]!==z||$[30]!==U||$[31]!==O||$[32]!==H?(b=(0,F.ik)({dateRange:K,granularity:U,seriesReturnType:"column",series:[{type:"time",where:H,groupBy:[],aggFn:"avg",field:`${z}cpu.utilization - Gauge`,table:"metrics",numberFormat:F.p2}]},{metric:O}),$[28]=K,$[29]=z,$[30]=U,$[31]=O,$[32]=H,$[33]=b):b=$[33];let ee=B/1e3;$[34]!==b||$[35]!==ee?(v=(0,r.jsx)(V.S,{title:"CPU Usage (%)",config:b,showDisplaySwitcher:!1,logReferenceTimestamp:ee}),$[34]=b,$[35]=ee,$[36]=v):v=$[36],$[37]!==Z||$[38]!==v?(j=(0,r.jsx)(D.Z,{"data-testid":"cpu-usage-card",children:(0,r.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:v})}),$[37]=Z,$[38]=v,$[39]=j):j=$[39],$[40]!==K||$[41]!==z||$[42]!==U||$[43]!==O||$[44]!==H?(_=(0,F.ik)({dateRange:K,granularity:U,seriesReturnType:"column",series:[{type:"time",where:H,groupBy:[],aggFn:"avg",field:`${z}memory.usage - Gauge`,table:"metrics",numberFormat:F.JD}]},{metric:O}),$[40]=K,$[41]=z,$[42]=U,$[43]=O,$[44]=H,$[45]=_):_=$[45];let et=B/1e3;$[46]!==_||$[47]!==et?(S=(0,r.jsx)(V.S,{title:"Memory Used",config:_,showDisplaySwitcher:!1,logReferenceTimestamp:et}),$[46]=_,$[47]=et,$[48]=S):S=$[48],$[49]!==Z||$[50]!==S?(w=(0,r.jsx)(D.Z,{"data-testid":"memory-usage-card",children:(0,r.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:S})}),$[49]=Z,$[50]=S,$[51]=w):w=$[51],$[52]!==K||$[53]!==z||$[54]!==U||$[55]!==O||$[56]!==H?(E=(0,F.ik)({dateRange:K,granularity:U,seriesReturnType:"column",series:[{type:"time",where:H,groupBy:[],aggFn:"avg",field:`${z}filesystem.available - Gauge`,table:"metrics",numberFormat:F.nH}]},{metric:O}),$[52]=K,$[53]=z,$[54]=U,$[55]=O,$[56]=H,$[57]=E):E=$[57];let es=B/1e3;return $[58]!==E||$[59]!==es?(C=(0,r.jsx)(V.S,{title:"Disk Available",config:E,showDisplaySwitcher:!1,logReferenceTimestamp:es}),$[58]=E,$[59]=es,$[60]=C):C=$[60],$[61]!==Z||$[62]!==C?(N=(0,r.jsx)(D.Z,{"data-testid":"disk-usage-card",children:(0,r.jsx)(D.Z.Section,{py:8,px:8,h:Z,children:C})}),$[61]=Z,$[62]=C,$[63]=N):N=$[63],$[64]!==G||$[65]!==j||$[66]!==w||$[67]!==N?(A=(0,r.jsxs)(P.r,{mt:"md",cols:G,children:[j,w,N]}),$[64]=G,$[65]=j,$[66]=w,$[67]=N,$[68]=A):A=$[68],$[69]!==y||$[70]!==A||$[71]!==Q?(T=(0,r.jsxs)("div",{"data-testid":Q,children:[y,A]}),$[69]=y,$[70]=A,$[71]=Q,$[72]=T):T=$[72],T},H=({rowData:e,rowId:t,source:s})=>{let{data:n}=(0,S.Fo)({id:s.metricSourceId}),a=e?.__hdx_resource_attributes["k8s.pod.uid"],l=e?.__hdx_resource_attributes["k8s.node.name"],i=new Date(e?.__hdx_timestamp).getTime();return(0,r.jsxs)(y.B,{my:"md",gap:40,children:[a&&(0,r.jsxs)("div",{children:[n&&(0,r.jsx)(W,{title:"Pod",where:`${n.resourceAttributesExpression}.k8s.pod.uid:"${a}"`,fieldPrefix:"k8s.pod.",timestamp:i,metricSource:n}),s&&(0,r.jsxs)(D.Z,{p:"md",mt:"xl",children:[(0,r.jsx)(D.Z.Section,{p:"md",py:"xs",children:"Pod Timeline"}),(0,r.jsx)(D.Z.Section,{children:(0,r.jsx)(O.F,{viewportProps:{style:{maxHeight:280}},children:(0,r.jsx)(x.a,{p:"md",py:"sm",children:(0,r.jsx)(B.FB,{logSource:s,q:`\`k8s.pod.uid\`:"${a}"`,dateRange:[(0,I.A)(new Date(i),{days:1}),(0,o.A)(new Date(i),{days:1})],anchorEvent:{label:(0,r.jsx)("div",{className:"text-brand",children:"This Event"}),timestamp:new Date(i).toISOString()}})})})})]})]}),l&&n&&(0,r.jsx)(W,{metricSource:n,title:"Node",where:`${n.resourceAttributesExpression}.k8s.node.name:"${l}"`,fieldPrefix:"k8s.node.",timestamp:i})]})};var q=s(37901),X=s(26837),Y=s(82203),J=s.n(Y),K=s(94720),G=s(40147),Z=s(57030),U=s(71434),Q=s.n(U),ee=s(1909),et=s(14262),es=s.n(et),en=s(3145),ea=s(53061),er=s(47268),el=s(23935),ei=s(24589),eo=s(92789),ec=s(70114),ed=s(23474),eu=s(54134),em=s(225),eh=s(24196),ep=s(78744),ex=s(70727),eg=s(75828),ef=s.n(eg),ey=s(63085),eb=s(21440),ev=s(7565),ej=s(92917),e_=s(83101),eS=s.n(e_),ew=s(20699),eE=s.n(ew);let eC=(0,i.memo)(function(e){let t,s,n,a,i,o,c,d,u,m,h,p,x,g,f=(0,l.c)(30),{marker:y,eventStart:b,eventEnd:v,height:j}=e,_=(0,ev.a)(),S=v-b,w=y.timestamp-b,E=S>0?w/S*100:0;f[0]!==y.attributes?(t=Object.entries(y.attributes),f[0]=y.attributes,f[1]=t):t=f[1];let C=t;f[2]!==_||f[3]!==y.timestamp?(s=_(new Date(y.timestamp),{format:"withMs"}),f[2]=_,f[3]=y.timestamp,f[4]=s):s=f[4],f[5]!==s?(n=(0,r.jsx)(N.E,{size:"xxs",c:"dimmed",mb:"xxs",children:s}),f[5]=s,f[6]=n):n=f[6],f[7]!==y.name?(a=(0,r.jsx)(N.E,{size:"xs",children:y.name}),f[7]=y.name,f[8]=a):a=f[8],f[9]!==C?(i=C.length>0&&(0,r.jsxs)("div",{style:{fontSize:10,marginTop:4},children:[C.slice(0,5).map(eI),C.length>5&&(0,r.jsxs)("div",{style:{fontStyle:"italic"},children:["...and ",C.length-5," more"]})]}),f[9]=C,f[10]=i):i=f[10],f[11]!==n||f[12]!==a||f[13]!==i?(o=(0,r.jsxs)("div",{children:[n,a,i]}),f[11]=n,f[12]=a,f[13]=i,f[14]=o):o=f[14];let k=o;f[15]===Symbol.for("react.memo_cache_sentinel")?(c={transition:"fade"},d={fontSize:11,maxWidth:350,wordBreak:"break-word"},f[15]=c,f[16]=d):(c=f[15],d=f[16]),f[17]!==E?(u=E.toFixed(6),f[17]=E,f[18]=u):u=f[18];let A=`${u}%`;return f[19]!==A?(m={position:"absolute",left:A,top:"50%",transform:"translate(-50%, -50%)",width:8,height:8,cursor:"pointer",zIndex:10,pointerEvents:"auto"},f[19]=A,f[20]=m):m=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)("div",{style:{width:8,height:8,backgroundColor:"var(--color-bg-success)",transform:"rotate(45deg)",border:"1px solid #333",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}}),f[21]=h):h=f[21],f[22]!==j?(p=(0,r.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:1,height:j,backgroundColor:"var(--color-bg-success)",opacity:.4,zIndex:-1}}),f[22]=j,f[23]=p):p=f[23],f[24]!==m||f[25]!==p?(x=(0,r.jsxs)("div",{style:m,onMouseEnter:eL,onClick:eM,children:[h,p]}),f[24]=m,f[25]=p,f[26]=x):x=f[26],f[27]!==x||f[28]!==k?(g=(0,r.jsx)(ey.m,{label:k,color:"var(--color-bg-surface)",withArrow:!0,multiline:!0,transitionProps:c,style:d,children:x}),f[27]=x,f[28]=k,f[29]=g):g=f[29],g}),ek=(0,i.memo)(function(e){let t,s,n,a,i,o,c=(0,l.c)(25),{events:d,maxVal:u,height:m,eventStyles:h,onEventHover:p,scale:x,offset:g}=e,f=p??eR;c[0]!==m?(t={width:0,flexGrow:1,height:m,position:"relative"},c[0]=m,c[1]=t):t=c[1];let y=-1*g*x;c[2]!==y?(s=y.toFixed(6),c[2]=y,c[3]=s):s=c[3];let b=`${s}%`;if(c[4]!==b?(n=(0,r.jsx)("div",{style:{marginRight:b}}),c[4]=b,c[5]=n):n=c[5],c[6]!==d?(a=d??[],c[6]=d,c[7]=a):a=c[7],c[8]!==h||c[9]!==m||c[10]!==u||c[11]!==f||c[12]!==x||c[13]!==a){let e;c[15]!==h||c[16]!==m||c[17]!==u||c[18]!==f||c[19]!==x?(e=(e,t,s)=>{let n=(e.minWidthPerc??0)/100,a=s[t-1],l=a?.start!=null?a?.start+u*n:0,i=Math.max(a?.end??0,l),o=x*Math.max((e.end-e.start)/u,n)*100,c=x*((e.start-i)/u*100);return(0,r.jsx)(ey.m,{label:e.tooltip,color:"gray",withArrow:!0,multiline:!0,transitionProps:{transition:"fade-right"},style:{fontSize:11,maxWidth:300,wordBreak:"break-word"},children:(0,r.jsxs)("div",{onMouseEnter:()=>f(e.id),className:"d-flex align-items-center h-100 cursor-pointer text-truncate hover-opacity",style:{userSelect:"none",backgroundColor:e.color,minWidth:`${o.toFixed(6)}%`,width:`${o.toFixed(6)}%`,marginLeft:`${c.toFixed(6)}%`,position:"relative",..."function"==typeof h?h(e):h},children:[(0,r.jsx)("div",{style:{margin:"auto"},className:"px-2",children:e.body}),e.markers?.map((t,s)=>(0,r.jsx)(eC,{marker:t,eventStart:e.start,eventEnd:e.end,height:m},`${e.id}-marker-${s}`))]})},e.id)},c[15]=h,c[16]=m,c[17]=u,c[18]=f,c[19]=x,c[20]=e):e=c[20],i=a.map(e),c[8]=h,c[9]=m,c[10]=u,c[11]=f,c[12]=x,c[13]=a,c[14]=i}else i=c[14];return c[21]!==t||c[22]!==n||c[23]!==i?(o=(0,r.jsxs)("div",{className:"d-flex overflow-hidden",style:t,children:[n,i]}),c[21]=t,c[22]=n,c[23]=i,c[24]=o):o=c[24],o});function eN(e){return e<1e3?`${Math.round(e)}ms`:e%1e3==0?`${Math.floor(e/1e3)}s`:`${(e/1e3).toFixed(3)}s`}function eA(e){let t,s,n,a,i,o,c,d,u,m,h,p=(0,l.c)(19),{maxVal:x,labelWidth:g,height:f,scale:y,offset:b}=e,v=(h=m=Math.pow(10,Math.floor(Math.log10(u=x/y/10))),u>=2*m&&(h=2*m),u>=5*m&&(h=5*m),h),j=Math.floor(x/v),_=v/x*100*y;if(p[0]!==f||p[1]!==v||p[2]!==j||p[3]!==_){t=[];for(let e=0;e<j;e++)t.push((0,r.jsx)("div",{style:{height:f,width:1,marginRight:-1,marginLeft:0===e?0:`${_.toFixed(6)}%`,background:"var(--color-border-muted)"},children:(0,r.jsx)("div",{className:"ms-2 fs-8.5",children:eN(e*v)})},e));p[0]=f,p[1]=v,p[2]=j,p[3]=_,p[4]=t}else t=p[4];p[5]===Symbol.for("react.memo_cache_sentinel")?(s={position:"sticky",top:0,height:24,paddingTop:4,zIndex:200,pointerEvents:"none",background:"var(--color-bg-body)"},n=ef()("d-flex align-items-center"),p[5]=s,p[6]=n):(s=p[5],n=p[6]),p[7]!==g?(a=(0,r.jsx)("div",{style:{width:g,minWidth:g}}),p[7]=g,p[8]=a):a=p[8];let S=-1*b*y;p[9]!==S?(i=S.toFixed(6),p[9]=S,p[10]=i):i=p[10];let w=`${i}%`;return p[11]!==w?(o=(0,r.jsx)("div",{style:{marginRight:w}}),p[11]=w,p[12]=o):o=p[12],p[13]!==o||p[14]!==t?(c=(0,r.jsxs)("div",{className:"d-flex w-100 overflow-hidden",children:[o,t]}),p[13]=o,p[14]=t,p[15]=c):c=p[15],p[16]!==a||p[17]!==c?(d=(0,r.jsx)("div",{style:s,children:(0,r.jsxs)("div",{className:`${n}`,children:[a,c]})}),p[16]=a,p[17]=c,p[18]=d):d=p[18],d}function eT(e){let t,s,n,a,i,o,c,d,u,m=(0,l.c)(24),{xPerc:h,overlay:p,labelWidth:x,color:g,height:f}=e,y=Math.min(Math.max(100*h,-1),100);m[0]!==y?(t=y.toFixed(6),m[0]=y,m[1]=t):t=m[1];let b=`${t}%`,v=h<=0?"none":"block";return m[2]!==v?(s={position:"sticky",top:0,height:0,zIndex:250,pointerEvents:"none",display:v},m[2]=v,m[3]=s):s=m[3],m[4]!==x?(n=(0,r.jsx)("div",{style:{width:x,minWidth:x}}),m[4]=x,m[5]=n):n=m[5],m[6]!==b?(a={marginLeft:b},m[6]=b,m[7]=a):a=m[7],m[8]!==p||m[9]!==h?(i=null!=p&&(0,r.jsx)("div",{style:{height:0,marginLeft:h<.5?12:-150,top:12,position:"relative"},children:(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"p-2 rounded border",style:{background:"var(--color-bg-surface)"},children:p})})}),m[8]=p,m[9]=h,m[10]=i):i=m[10],m[11]!==g||m[12]!==f?(o=(0,r.jsx)("div",{style:{height:f,width:1,background:g}}),m[11]=g,m[12]=f,m[13]=o):o=m[13],m[14]!==a||m[15]!==i||m[16]!==o?(c=(0,r.jsx)("div",{className:"w-100 overflow-hidden",children:(0,r.jsxs)("div",{style:a,children:[i,o]})}),m[14]=a,m[15]=i,m[16]=o,m[17]=c):c=m[17],m[18]!==n||m[19]!==c?(d=(0,r.jsxs)("div",{className:"d-flex",children:[n,c]}),m[18]=n,m[19]=c,m[20]=d):d=m[20],m[21]!==d||m[22]!==s?(u=(0,r.jsx)("div",{style:s,children:d}),m[21]=d,m[22]=s,m[23]=u):u=m[23],u}function e$(e){let t,s,n,a=(0,l.c)(11),{containerRef:o,maxVal:c,labelWidth:d,height:u,scale:m,offset:h,xPerc:p,setXPerc:x}=e,[g,f]=(0,i.useState)(!1);a[0]!==o||a[1]!==d||a[2]!==x?(t=()=>{let e=t=>{if(null!=o.current){let s=o.current,n=s.getBoundingClientRect(),a=(t.clientX-n.left-d)/(s.clientWidth-d);null!=e&&x(a)}},t=()=>f(!0),s=()=>f(!1),n=o.current;return n?.addEventListener("mousemove",e),n?.addEventListener("mouseleave",s),n?.addEventListener("mouseenter",t),()=>{n?.removeEventListener("mousemove",e),n?.removeEventListener("mouseleave",s),n?.removeEventListener("mouseenter",t)}},s=[o,d,x],a[0]=o,a[1]=d,a[2]=x,a[3]=t,a[4]=s):(t=a[3],s=a[4]),(0,i.useEffect)(t,s);let y=(h/100+Math.max(p,0)/m)*c;return a[5]!==y||a[6]!==u||a[7]!==d||a[8]!==g||a[9]!==p?(n=g?(0,r.jsx)(eT,{xPerc:Math.max(p,0),overlay:eN(Math.max(y,0)),height:u,labelWidth:d,color:"var(--color-bg-neutral)"}):null,a[5]=y,a[6]=u,a[7]=d,a[8]=g,a[9]=p,a[10]=n):n=a[10],n}function ez({rows:e,cursors:t,rowHeight:s,onMouseMove:n,onEventClick:a,labelWidth:l,className:o,style:c,onClick:d,scale:u=1,setScale:m=()=>{},initialScrollRowIndex:h,scaleWithScroll:p=!1}){let[x,g]=(0,i.useState)(0),f=(0,ej.ZC)(u),y=l/window.innerWidth*100,{size:b,startResize:j}=(0,v.A)(y,"left"),_=b/100*window.innerWidth,S=(0,i.useRef)(null),w=(e,t)=>{if(null!=S.current&&null!=t){let s=S.current,n=s.getBoundingClientRect(),a=e.clientX-n.left;e.clientY,n.top,t(Math.max((x/100+(a-_)/(s.clientWidth-_)/u)*A))}},E=(0,i.useMemo)(()=>({onDrag:e=>{g(t=>Math.min(Math.max(t-e.movementX*(.125/u),0),100-100/u))}}),[u,g]);(0,ej.i3)(S,E);let[C,k]=(0,i.useState)(0),N=e=>{p&&(e.preventDefault(),m(t=>Math.max(t-.001*e.deltaY,1)))};(0,i.useEffect)(()=>{null!=f&&f!=u&&g(e=>{let t=Math.max(Math.min(C,1),0);return Math.min(Math.max(e+100*t/f-100*t/u,0),100-100/u)})},[u,f,C]),(0,i.useEffect)(()=>{let e=S.current;if(null!=e)return e.addEventListener("wheel",N,{passive:!1}),()=>{e.removeEventListener("wheel",N)}});let A=(0,i.useMemo)(()=>{let t=0;for(let s of e??[])for(let e of s.events)t=Math.max(t,e.end);return 1.1*t},[e]),T=(0,eb.Te)({count:e?.length??0,getScrollElement:()=>S.current,estimateSize:()=>s,overscan:5}),$=T.getVirtualItems(),[z,I]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{null!=h&&!z&&h>=0&&(I(!0),T.scrollToIndex(h,{align:"center"}))},[h,z,T]),(0,r.jsxs)("div",{style:{position:"relative",...c},className:o,ref:S,onClick:e=>{w(e,d)},onMouseMove:e=>{w(e,n)},children:[(t??[]).map(e=>{let t=(e.start/A-x/100)*u;return(0,r.jsx)(eT,{xPerc:t,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,color:e.color},e.id)}),(0,r.jsx)(e$,{containerRef:S,maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,scale:u,offset:x,xPerc:C,setXPerc:k}),(0,r.jsx)(eA,{maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,scale:u,offset:x}),(0,r.jsx)("div",{style:{height:`${T.getTotalSize()+32}px`,width:"100%",position:"relative"},children:(0,r.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${$?.[0]?.start??0}px)`},children:T.getVirtualItems().map(t=>{let n=e?.[t.index];return(0,r.jsxs)("div",{onClick:()=>a?.(n),"data-index":t.index,ref:T.measureElement,className:`${ef()("d-flex align-items-center overflow-hidden",n.className,eE().timelineRow,n.isActive&&eE().timelineRowActive)}`,style:{...n.style},children:[(0,r.jsxs)("div",{className:eE().labelContainer,style:{width:_,minWidth:_},children:[n.label,(0,r.jsx)("div",{className:eS().resizeHandle,onMouseDown:j,style:{backgroundColor:"var(--color-bg-neutral)"}})]}),(0,r.jsx)(ek,{events:n.events,height:s,maxVal:A,eventStyles:e=>({borderRadius:2,fontSize:.5*s,backgroundColor:e.isError?"var(--color-bg-danger)":"var(--color-bg-inverted)",color:"var(--color-text-inverted)"}),scale:u,offset:x})]},t.index)})})})]})}function eI(e){let[t,s]=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{style:{color:"var(--color-text-primary)"},children:[t,":"]})," ",String(s).length>50?String(s).substring(0,50)+"...":String(s)]},t)}function eL(e){return e.stopPropagation()}function eM(e){return e.stopPropagation()}function eR(){}var eD=s(59017),eP=s(66773),eO=s.n(eP);function eF(e){let t,s,n=(0,l.c)(6),{config:a,dateRangeStartInclusive:r,dateRange:i,enabled:o}=e;n[0]!==a||n[1]!==i||n[2]!==r?(t={...a,dateRange:i,dateRangeStartInclusive:r},n[0]=a,n[1]=i,n[2]=r,n[3]=t):t=n[3];let c=t;return n[4]!==o?(s={enabled:o},n[4]=o,n[5]=s):s=n[5],(0,ep.A)(c,s)}function eV(e){let t,s,n,a,r,i,o,c,d=(0,l.c)(32),{tableSource:u,focusDate:m,dateRange:h,traceId:x,enabled:g,hiddenRowExpression:f}=e;d[0]!==f||d[1]!==u||d[2]!==x?(t=function(e,t,s){let n={Body:e?.kind===p.GL.Trace?(0,S.pM)(e)??"":e?.kind===p.GL.Log?(0,S.N8)(e)??"":"",Timestamp:(0,S.xg)(e),Duration:e.durationExpression?(0,S.kg)(e):"",TraceId:e.traceIdExpression??"",SpanId:e.spanIdExpression??"",ParentSpanId:e.parentSpanIdExpression??"",StatusCode:e.statusCodeExpression??"",ServiceName:e.serviceNameExpression??"",SeverityText:e.severityTextExpression??"",SpanAttributes:e.eventAttributesExpression??"",SpanEvents:e.spanEventsValueExpression??""};if(e.highlightedTraceAttributeExpressions)for(let t of e.highlightedTraceAttributeExpressions)t.alias&&(n[t.alias]=t.sqlExpression);let a=[{valueExpression:n.Body,alias:"Body"},{valueExpression:n.Timestamp,alias:"Timestamp"},{valueExpression:n.SpanId,alias:"SpanId"},...n.ServiceName?[{valueExpression:n.ServiceName,alias:"ServiceName"}]:[],...s?[{valueExpression:s,valueExpressionLanguage:"lucene",alias:"__hdx_hidden"}]:[]];return(e.kind===p.GL.Trace||e.kind===p.GL.Log)&&a.push(...(0,E.z4)(e.highlightedTraceAttributeExpressions)),s&&(n.__hdx_hidden=s),e.kind===p.GL.Trace?a.push({valueExpression:n.Duration,alias:"Duration"},{valueExpression:n.ParentSpanId,alias:"ParentSpanId"},...n.StatusCode?[{valueExpression:n.StatusCode,alias:"StatusCode"}]:[],...n.SpanAttributes?[{valueExpression:n.SpanAttributes,alias:"SpanAttributes"}]:[],...n.SpanEvents?[{valueExpression:n.SpanEvents,alias:"SpanEvents"}]:[]):e.kind===p.GL.Log&&a.push(...n.SeverityText?[{valueExpression:n.SeverityText,alias:"SeverityText"}]:[]),{config:{select:a,from:e.from,timestampValueExpression:e.timestampValueExpression,where:`${n.TraceId} = '${t}'`,limit:{limit:5e4},connection:e.connection},alias:n,type:e.kind}}(u,x,f),d[0]=f,d[1]=u,d[2]=x,d[3]=t):t=d[3];let{config:y,alias:b,type:v}=t;d[4]!==h[0]||d[5]!==m?(s=[h[0],m],d[4]=h[0],d[5]=m,d[6]=s):s=d[6],d[7]!==y||d[8]!==g||d[9]!==s?(n={config:y,dateRangeStartInclusive:!0,dateRange:s,enabled:g},d[7]=y,d[8]=g,d[9]=s,d[10]=n):n=d[10];let{data:j,isFetching:_,error:w}=eF(n);d[11]!==h[1]||d[12]!==m?(a=[m,h[1]],d[11]=h[1],d[12]=m,d[13]=a):a=d[13],d[14]!==y||d[15]!==g||d[16]!==a?(r={config:y,dateRangeStartInclusive:!1,dateRange:a,enabled:g},d[14]=y,d[15]=g,d[16]=a,d[17]=r):r=d[17];let{data:C,isFetching:k,error:N}=eF(r),A=_||k,T=j?.meta??C?.meta,$=w||N;d[18]!==b||d[19]!==T?(i={meta:T,aliasMap:b},d[18]=b,d[19]=T,d[20]=i):i=d[20];let z=(0,ex.Ay)(i);e:{let e;if(!T||0===T.length){let e;d[21]===Symbol.for("react.memo_cache_sentinel")?(e=[],d[21]=e):e=d[21],o=e;break e}d[22]!==C?.data||d[23]!==j?.data||d[24]!==z||d[25]!==v?(e=[...j?.data??[],...C?.data??[]].map(e=>{let t=z((0,U.omit)(e,["SpanAttributes","SpanEvents","__hdx_hidden"]));return{...e,SpanId:e?.SpanId,__hdx_hidden:e?.__hdx_hidden,type:v,id:t.where,aliasWith:[]}}),d[22]=C?.data,d[23]=j?.data,d[24]=z,d[25]=v,d[26]=e):e=d[26],o=e}let I=o;return d[27]!==$||d[28]!==A||d[29]!==T||d[30]!==I?(c={rows:I,meta:T,isFetching:A,error:$},d[27]=$,d[28]=A,d[29]=T,d[30]=I,d[31]=c):c=d[31],c}function eB({traceTableSource:e,logTableSource:t,traceId:s,dateRange:n,focusDate:a,onClick:l,highlightedRowWhere:o,initialRowHighlightHint:c}){let{size:d,startResize:u}=(0,v.A)(30,"bottom"),m=(0,ev.a)(),{traceWhere:h,logWhere:g,clear:f,isFilterActive:y,isFilterExpanded:b,setIsFilterExpanded:_,onSubmit:S}=j({hasLogSource:!!t}),{control:w,handleSubmit:C,setValue:A}=(0,ee.mN)({defaultValues:{traceWhere:h??"",logWhere:g??""}}),T=(0,i.useCallback)(()=>{A("traceWhere",""),A("logWhere",""),f()},[f,A]),{rows:$,isFetching:z,meta:I,error:L}=eV({tableSource:e,focusDate:a,dateRange:n,traceId:s,hiddenRowExpression:h?`NOT (${h})`:void 0,enabled:!0}),{rows:M,isFetching:R,meta:D,error:P}=eV({tableSource:t||e,focusDate:a,dateRange:t?n:[n[1],n[0]],traceId:s,hiddenRowExpression:g?`NOT (${g})`:void 0,enabled:!!t}),O=z||R,F=L||P,V=(0,i.useMemo)(()=>[...$,...M],[$,M]);V.sort((e,t)=>{let s=es().fromString(e.Timestamp),n=es().fromString(t.Timestamp),a=s.getTimeT()-n.getTimeT();return 0===a?s.getNano()-n.getNano():a});let B=(0,i.useMemo)(()=>{let s=$?.filter(e=>!e.__hdx_hidden),n=(0,E.N4)(e,e.highlightedTraceAttributeExpressions,s,I);if(t&&M&&D){let e=M?.filter(e=>!e.__hdx_hidden);n.push(...(0,E.N4)(t,t.highlightedTraceAttributeExpressions,e,D))}return n.sort((e,t)=>e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value))},[e,$,I,t,M,D]);(0,i.useEffect)(()=>{if(c&&l&&null==o){let e=V.findIndex(e=>e.Timestamp===c.timestamp&&e.SpanId===c.spanId&&e.Body===c.body);-1!==e&&l?.({id:V[e].id,type:V[e].type??"",aliasWith:V[e].aliasWith})}},[c,V,l,o]);let W=(0,i.useMemo)(()=>new Set($?.filter(e=>Q().isString(e.SpanId)&&e.SpanId.length>0).map(e=>e.SpanId)??[]),[$]),H=[],q=new Map,X=new Map;for(let e of V??[]){let{type:t,SpanId:s,ParentSpanId:n}=e;if(!s)continue;let a=t===p.GL.Log?`${s}-log`:s,r=t===p.GL.Log?s:n||"",l={...e,children:[]};if(t===p.GL.Trace){if(!X.has(a)){X.set(a,e.id);let t=`placeholder-${a}`,s=q.get(t);s&&(l.children=s.children||[],q.delete(t))}q.set(e.id,l)}if(t!==p.GL.Trace||r&&W.has(r)){let e=X.get(r),t=e?q.get(e):void 0;if(!t){let e=`placeholder-${r}`;(t=q.get(e))||(t={children:[]},q.set(e,t))}t.children.push(l)}else H.push(l)}let[Y,J]=(0,i.useState)(new Set),[K,G]=(0,i.useState)(!0),Z=(0,i.useCallback)(e=>{J(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[J]),U=(e,t,s=0)=>{e.__hdx_hidden||t.push({level:s,...e}),Y.has(e.id)||e?.children?.forEach(e=>U(e,t,s+1))},et=[];H.length>0&&H.forEach(e=>U(e,et));let ep=et.length,ex=et.filter(e=>"Error"===e.StatusCode||e.SeverityText?.toLowerCase()==="error").length,eg=`${ep} span${1!==ep?"s":""}`,ef=`${ex} error${1!==ex?"s":""}`,ey=V?.reduce((e,t)=>Math.min(e,new Date(t.Timestamp).getTime()),Number.MAX_SAFE_INTEGER)??0,eb=ey===Number.MAX_SAFE_INTEGER?0:ey,e_=et.map((e,t)=>{let s=1e3*(e.Duration||0),n=new Date(e.Timestamp).getTime(),a=n-eb,i=a+s,{Body:c,ServiceName:d,id:u,type:h,aliasWith:x}=e,g=`${c}`;try{g="string"==typeof c?c:JSON.stringify(c)}catch(e){console.warn("DBTraceWaterfallChart: Couldn't JSON stringify Body",e)}let f=e.SpanAttributes||{},b=f["http.url"]||f["http.method"],v=f["http.url"],j=b&&v?`${g} ${v}`:g,_=K&&e.SpanEvents?e.SpanEvents.map(e=>({timestamp:new Date(e.Timestamp).getTime()-eb,name:e.Name,attributes:e.Attributes||{}})):[],S="Error"==e.StatusCode||"error"===e.SeverityText,w=e.StatusCode||e.SeverityText,E="warn"===e.SeverityText,C=o===u;return{id:u,type:h,aliasWith:x,label:(0,r.jsx)("div",{className:`${function(e){let{isError:t,isWarn:s}=e;return t?"text-danger":s?"text-warning":""}({isError:S,isWarn:E})} ${C&&eO().traceTimelineLabelHighlighted} text-truncate cursor-pointer ps-2 ${eO().traceTimelineLabel}`,role:"button",onClick:()=>{l?.({id:u,type:h??"",aliasWith:x})},children:(0,r.jsxs)("div",{className:"d-flex align-items-center",style:{height:24},children:[Array.from({length:e.level}).map((e,t)=>(0,r.jsx)("div",{style:{borderLeft:"1px solid var(--color-border)",marginLeft:7,width:8,minWidth:8,maxWidth:8,flexGrow:1,flexShrink:0,height:"100%"}},t)),(0,r.jsxs)(ea.o,{style:{opacity:+(e.children.length>0)},onClick:()=>{Z(u)},children:[Y.has(u)?(0,r.jsx)(ec.A,{size:16,className:"me-1 text-muted-hover"}):(0,r.jsx)(ed.A,{size:16,className:"me-1 text-muted-hover"})," "]}),!y&&(0,r.jsx)(N.E,{span:!0,size:"xxs",me:"xs",pt:"2px",children:e.children.length>0?`(${e.children.length})`:""}),(0,r.jsxs)(k.Y,{gap:0,wrap:"nowrap",children:[h===p.GL.Log?(0,r.jsx)(eu.A,{size:14,className:"align-middle me-2","aria-label":"Correlated Log Line"}):null,(0,r.jsxs)(N.E,{size:"xxs",truncate:"end",span:!0,title:`${d}${b&&v?` | ${j}`:""}`,role:"button",children:[d?`${d} | `:"",j]})]})]})}),style:{marginTop:32*(0===t)},isActive:C,events:[{id:u,type:h,aliasWith:x,start:a,end:i,tooltip:`${j} ${s>=0?`took ${s.toFixed(4)}ms`:""} ${w?`| Status: ${w}`:""}${!isNaN(n)?` | Started at ${m(new Date(n),{format:"withMs"})}`:""}`,color:function(e){let{isError:t,isWarn:s,isHighlighted:n}=e;return t?n?(0,ej.sS)():(0,ej.cM)():s?n?(0,ej.qS)():(0,ej.AD)():n?"#A9AFB7":"#6A7077"}({isError:S,isWarn:E,isHighlighted:C}),body:(0,r.jsx)("span",{children:j}),minWidthPerc:1,isError:S,markers:_}]}}),ew=et.findIndex(e=>e.id===o),eE=d/100*window.innerHeight;return(0,r.jsxs)(r.Fragment,{children:[b&&(0,r.jsx)("form",{onSubmit:C(S),children:(0,r.jsxs)(x.a,{style:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",gap:"12px"},children:[(0,r.jsx)(N.E,{size:"xs",children:"Spans filter"}),(0,r.jsx)(eh.A,{tableConnection:(0,en.VO)(e),placeholder:'Search trace spans w/ Lucene ex. StatusCode:"Error"',language:"lucene",name:"traceWhere",control:w,size:"xs",onSubmit:C(S),"data-testid":"trace-search-input"}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.E,{size:"xs",children:"Logs filter"}),(0,r.jsx)(eh.A,{tableConnection:(0,en.VO)(t),placeholder:'Search trace logs w/ Lucene ex. SeverityText:"error"',language:"lucene",name:"logWhere",control:w,size:"xs",onSubmit:C(S),"data-testid":"log-search-input"})]})]})}),(0,r.jsxs)(k.Y,{my:"xs",justify:"space-between",children:[(0,r.jsxs)(k.Y,{gap:"md",children:[(0,r.jsxs)(N.E,{size:"xs",children:[eg,","," ",(0,r.jsx)("span",{className:ex?"text-danger":"",children:ef})]}),(0,r.jsx)(er.S,{size:"xs",label:"Show span events",checked:K,onChange:()=>G(!K)})]}),(0,r.jsxs)("span",{children:[(0,r.jsxs)(el.M,{underline:"always",onClick:()=>_(e=>!e),size:"xs",children:[b?"Hide Filters":"Show Filters"," ",y&&"(active)"]}),y&&(0,r.jsx)(el.M,{underline:"always",onClick:T,size:"xs",ms:"xs",children:"Clear Filters"})]})]}),!O&&!F&&(0,r.jsx)(eD.V,{attributes:B}),(0,r.jsx)("div",{style:{position:"relative",overflow:"hidden",maxHeight:`${eE}px`},children:O?(0,r.jsx)("div",{className:"my-3",children:"Loading Traces..."}):F?(0,r.jsxs)(x.a,{mt:"lg",children:[(0,r.jsx)(N.E,{my:"sm",size:"sm",children:"An error occurred while fetching trace data:"}),(0,r.jsx)(ei.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:F.message})]}):null==V?(0,r.jsxs)("div",{children:["An unknown error occurred. ",(0,r.jsx)(em.z,{})]}):0===et.length?(0,r.jsx)("div",{className:"my-3",children:"No matching spans or logs found"}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(ez,{style:{overflowY:"auto",maxHeight:`${eE}px`},scale:1,setScale:()=>{},rowHeight:22,labelWidth:300,onClick:e=>{},onEventClick:e=>{l?.({id:e.id,type:e.type??"",aliasWith:e.aliasWith??[]})},cursors:[],rows:e_,initialScrollRowIndex:ew})})}),(0,r.jsx)(eo.c,{mt:"md",className:eS().resizeYHandle,onMouseDown:u,style:{position:"relative",bottom:0}})]})}let eW=e=>{let t,s,n,a=(0,l.c)(13),{traceSourceId:i,rumSessionId:o,dateRange:c,focusDate:d,serviceName:u,setSubDrawerOpen:m}=e;a[0]!==i?(t={id:i},a[0]=i,a[1]=t):t=a[1];let{data:h}=(0,S.Fo)(t),p=h?.sessionSourceId;a[2]!==p?(s={id:p},a[2]=p,a[3]=s):s=a[3];let{data:x,isLoading:g}=(0,S.Fo)(s);if(!h||!x&&g){let e;return a[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(K.a,{}),a[4]=e):e=a[4],e}return a[5]!==c||a[6]!==d||a[7]!==o||a[8]!==u||a[9]!==x||a[10]!==m||a[11]!==h?(n=(0,r.jsx)(r.Fragment,{children:x?o&&h?(0,r.jsx)(Z.A,{start:c[0],end:c[1],traceSource:h,session:{serviceName:u},sessionSource:x,rumSessionId:o,setDrawerOpen:m,initialTs:d.getTime()}):(0,r.jsx)("span",{className:"p-3 text-muted",children:"Session ID not found."}):(0,r.jsxs)("div",{className:"m-2 fs-8 p-4",children:["No correlated session source found.",(0,r.jsx)("br",{}),"Go to ",(0,r.jsx)(J(),{href:"/team#sources",children:"Team Settings"})," and update the"," ",(0,r.jsx)("strong",{children:h?.name})," source to include the correlated session source."]})}),a[5]=c,a[6]=d,a[7]=o,a[8]=u,a[9]=x,a[10]=m,a[11]=h,a[12]=n):n=a[12],n};function eH(e){return null===e.parentSpanId&&e.rumSessionId}function eq(e){return e.rumSessionId}var eX=s(25062),eY=s(22623),eJ=s(6892),eK=s(46466),eG=s(57478),eZ=((n=eZ||{}).Overview="overview",n.Parsed="parsed",n);function eU(e){let t,s,n,a,o,c,d,m,h,x,f,b,v,j,_,E,C,A,T,$,z,I,L,M=(0,l.c)(74),{childSourceId:R,traceId:D,dateRange:P,focusDate:O,parentSourceId:F,initialRowHighlightHint:V,"data-testid":B}=e;M[0]!==R?(t={defaultValues:{source:R}},M[0]=R,M[1]=t):t=M[1];let{control:W}=(0,ee.mN)(t);M[2]!==W?(s={control:W,name:"source"},M[2]=W,M[3]=s):s=M[3];let H=(0,ee.FH)(s);M[4]!==H?(n={id:H},M[4]=H,M[5]=n):n=M[5];let{data:Y,isLoading:J}=(0,S.Fo)(n);M[6]!==F?(a={id:F},M[6]=F,M[7]=a):a=M[7];let{data:K,isLoading:G}=(0,S.Fo)(a),Z=K?.kind===p.GL.Log?K:Y?.kind===p.GL.Log?Y:null,U=K?.kind===p.GL.Trace?K:Y?.kind===p.GL.Trace?Y:null;Y?.kind===p.GL.Trace||(K?.kind,p.GL.Trace);let{mutate:Q}=(0,S.sr)();M[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,u.os)(),M[8]=o):o=M[8];let[et,es]=(0,u.ZA)("eventRowWhere",o),er=K?.traceIdExpression??"";M[9]!==er?(c={defaultValues:{traceIdExpression:er}},M[9]=er,M[10]=c):c=M[10];let{control:el,handleSubmit:ei,setValue:ec}=(0,ee.mN)(c);M[11]!==K||M[12]!==ec?(d=()=>{K?.traceIdExpression&&ec("traceIdExpression",K.traceIdExpression)},M[11]=K,M[12]=ec,M[13]=d):d=M[13];let ed=K?.traceIdExpression;M[14]!==ed||M[15]!==ec?(m=[ed,ec],M[14]=ed,M[15]=ec,M[16]=m):m=M[16],(0,i.useEffect)(d,m);let[eu,em]=(0,i.useState)(!1);M[17]!==es?(h=()=>()=>{es(null)},M[17]=es,M[18]=h):h=M[18],M[19]!==es||M[20]!==D?(x=[D,es],M[19]=es,M[20]=D,M[21]=x):x=M[21],(0,i.useEffect)(h,x);let[eh,ep]=(0,i.useState)("overview"),ex=K?.traceIdExpression,eg=D||"No trace id found for event";M[22]!==ex||M[23]!==eg?(f=(0,r.jsxs)(N.E,{size:"xs",me:"xs",children:[ex,":"," ",eg]}),M[22]=ex,M[23]=eg,M[24]=f):f=M[24],M[25]!==D?(b=null!=D&&(0,r.jsx)(eX.$,{variant:"subtle",size:"xs",onClick:()=>em(eQ),children:(0,r.jsx)(eJ.A,{size:14})}),M[25]=D,M[26]=b):b=M[26],M[27]!==f||M[28]!==b?(v=(0,r.jsxs)(g.s,{align:"center",children:[f,b]}),M[27]=f,M[28]=b,M[29]=v):v=M[29];let ef=K?.kind===p.GL.Log?"Trace Source":"Correlated Log Source";return M[30]!==ef?(j=(0,r.jsx)(N.E,{size:"sm",children:ef}),M[30]=ef,M[31]=j):j=M[31],M[32]!==W?(_=(0,r.jsx)(eG.W,{control:W,name:"source",size:"xs"}),M[32]=W,M[33]=_):_=M[33],M[34]!==j||M[35]!==_?(E=(0,r.jsxs)(k.Y,{gap:"sm",children:[j,_]}),M[34]=j,M[35]=_,M[36]=E):E=M[36],M[37]!==v||M[38]!==E?(C=(0,r.jsxs)(g.s,{align:"center",justify:"space-between",mb:"sm",children:[v,E]}),M[37]=v,M[38]=E,M[39]=C):C=M[39],M[40]!==K||M[41]!==F||M[42]!==eu||M[43]!==D||M[44]!==el||M[45]!==ei||M[46]!==Q?(A=(eu||!D)&&null!=F&&(0,r.jsxs)(y.B,{gap:"xs",children:[(0,r.jsx)(N.E,{size:"xs",children:"Trace ID Expression"}),(0,r.jsxs)(g.s,{align:"center",children:[(0,r.jsx)(eK.Z,{tableConnection:(0,en.VO)(K),name:"traceIdExpression",placeholder:"Log Trace ID Column (ex. trace_id)",control:el,size:"xs",parentRef:"u">typeof document?document.body:null}),(0,r.jsx)(eX.$,{ms:"sm",variant:"primary",onClick:ei(e=>{let{traceIdExpression:t}=e;null!=K&&Q({source:{...K,traceIdExpression:t}})}),size:"xs",children:"Save"}),(0,r.jsx)(eX.$,{ms:"sm",variant:"secondary",onClick:()=>em(!1),size:"xs",children:"Cancel"})]})]}),M[40]=K,M[41]=F,M[42]=eu,M[43]=D,M[44]=el,M[45]=ei,M[46]=Q,M[47]=A):A=M[47],M[48]===Symbol.for("react.memo_cache_sentinel")?(T=(0,r.jsx)(eo.c,{my:"sm"}),M[48]=T):T=M[48],M[49]!==P||M[50]!==et?.id||M[51]!==O||M[52]!==V||M[53]!==Z||M[54]!==es||M[55]!==D||M[56]!==U?($=U?.kind===p.GL.Trace&&D&&(0,r.jsx)(eB,{traceTableSource:U,logTableSource:Z,traceId:D,dateRange:P,focusDate:O,highlightedRowWhere:et?.id,onClick:es,initialRowHighlightHint:V}),M[49]=P,M[50]=et?.id,M[51]=O,M[52]=V,M[53]=Z,M[54]=es,M[55]=D,M[56]=U,M[57]=$):$=M[57],M[58]!==eh||M[59]!==et||M[60]!==Z||M[61]!==U?(z=null!=U&&null!=et&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.E,{size:"sm",my:"sm",children:"Event Details"}),(0,r.jsx)(w.A,{className:"fs-8 mt-2",items:[{text:"Overview",value:"overview"},{text:"Column Values",value:"parsed"}],activeItem:eh,onClick:e=>ep(e)}),"overview"===eh&&(0,r.jsx)(X.W,{source:et?.type===p.GL.Log&&Z?Z:U,rowId:et?.id,aliasWith:et?.aliasWith}),"parsed"===eh&&(0,r.jsx)(q.dD,{source:et?.type===p.GL.Log&&Z?Z:U,rowId:et?.id,aliasWith:et?.aliasWith})]}),M[58]=eh,M[59]=et,M[60]=Z,M[61]=U,M[62]=z):z=M[62],M[63]!==et||M[64]!==D||M[65]!==U?(I=null!=U&&!et&&D&&(0,r.jsx)(eY.t,{shadow:"xs",p:"xl",mt:"md",children:(0,r.jsx)(ea.o,{mih:100,children:(0,r.jsx)(N.E,{size:"sm",children:"Please select a span above to view details."})})}),M[63]=et,M[64]=D,M[65]=U,M[66]=I):I=M[66],M[67]!==B||M[68]!==C||M[69]!==A||M[70]!==$||M[71]!==z||M[72]!==I?(L=(0,r.jsxs)("div",{"data-testid":B,children:[C,A,T,$,z,I]}),M[67]=B,M[68]=C,M[69]=A,M[70]=$,M[71]=z,M[72]=I,M[73]=L):L=M[73],L}function eQ(e){return!e}let e0=(0,i.createContext)({});var e1=((a=e1||{}).Overview="overview",a.Parsed="parsed",a.Debug="debug",a.Trace="trace",a.ServiceMap="serviceMap",a.Context="context",a.Replay="replay",a.Infrastructure="infrastructure",a);let e2=({rowId:e,aliasWith:t,source:s,isNestedPanel:n=!1,setSubDrawerOpen:a,onClose:c,breadcrumbPath:h=[],onBreadcrumbClick:f})=>{let y,{data:v,isLoading:j,isSuccess:C}=(0,q.k1)({source:s,rowId:e,aliasWith:t}),{dbSqlRowTableConfig:k}=(0,i.useContext)(e0),N=(0,i.useCallback)(e=>{let t=h.length;if(t>e)c(),f?.(e);else{if(t===e)return;f?.(e)}},[h.length,f,c]),A=(0,i.useMemo)(()=>!!s.resourceAttributesExpression||!!s.eventAttributesExpression,[s.eventAttributesExpression,s.resourceAttributesExpression]),T="trace"===s.kind?"trace":A?"overview":"parsed",[I,L]=(0,u.ZA)("sidePanelTab",(0,u.Oq)(Object.values(e1)).withDefault(T)),[M,R]=(0,i.useState)(T),D=n?R:L,P=n?M:I,O=v?.data?.[0],F=O?.__hdx_timestamp;y=new Date("number"==typeof F?1e3*F:F);let V=(0,S.N8)(s),B=d()(O?.__hdx_body)?O.__hdx_body:O?.__hdx_body!==void 0?JSON.stringify(O.__hdx_body):void 0,W=O?.__hdx_severity_text,Y=(0,i.useMemo)(()=>{let e=[];return(s.kind===p.GL.Trace||s.kind===p.GL.Log)&&s.highlightedRowAttributeExpressions&&e.push(...s.highlightedRowAttributeExpressions),s.serviceNameExpression&&e.push({sqlExpression:s.serviceNameExpression}),v?(0,E.N4)(s,e,v.data||[],v.meta||[]):[]},[s,v]),J=(0,i.useMemo)(()=>[(0,o.A)(y,{minutes:-60}),(0,o.A)(y,{minutes:60})],[y]),K=(0,i.useMemo)(()=>[(0,o.A)(y,{hours:-4}),(0,o.A)(y,{hours:4})],[y]),Z=O?.__hdx_trace_id,U="log"===s.kind?s.traceSourceId:"trace"===s.kind?s.logSourceId:void 0,Q="trace"===s.kind?s.id:s.traceSourceId,ee=Z&&Q,{rumSessionId:et,rumServiceName:es}=(e=>{let t,s,n,a,r=(0,l.c)(42),{sourceId:i,traceId:o,dateRange:c,enabled:d}=e;r[0]!==i?(t={id:i},r[0]=i,r[1]=t):t=r[1];let{data:u}=(0,S.Fo)(t),{getFieldExpression:m}=(0,G.A)(u);e:{let e,t,n,a,l,i,c,d,h;if(!u||!o||!m){s=void 0;break e}let p=`${u.timestampValueExpression}`;r[2]!==p?(e={valueExpression:p,alias:"Timestamp"},r[2]=p,r[3]=e):e=r[3];let x=u.resourceAttributesExpression??"ResourceAttributes";r[4]!==m||r[5]!==x?(t=m(x,"rum.sessionId"),r[4]=m,r[5]=x,r[6]=t):t=r[6];let g=`${t}`;r[7]!==g?(n={valueExpression:g,alias:"rumSessionId"},r[7]=g,r[8]=n):n=r[8];let f=u.resourceAttributesExpression??"ResourceAttributes";r[9]!==m||r[10]!==f?(a=m(f,"service.name"),r[9]=m,r[10]=f,r[11]=a):a=r[11];let y=`${a}`;r[12]!==y?(l={valueExpression:y,alias:"serviceName"},r[12]=y,r[13]=l):l=r[13];let b=`${u.parentSpanIdExpression}`;r[14]!==b?(i={valueExpression:b,alias:"parentSpanId"},r[14]=b,r[15]=i):i=r[15],r[16]!==l||r[17]!==i||r[18]!==e||r[19]!==n?(c=[e,n,l,i],r[16]=l,r[17]=i,r[18]=e,r[19]=n,r[20]=c):c=r[20],r[21]===Symbol.for("react.memo_cache_sentinel")?(d={limit:1e4},r[21]=d):d=r[21];let v=`${u.traceIdExpression} = '${o}'`;r[22]!==u.connection||r[23]!==u.from||r[24]!==u.timestampValueExpression||r[25]!==c||r[26]!==v?(h={select:c,from:u.from,timestampValueExpression:u.timestampValueExpression,limit:d,connection:u.connection,where:v,whereLanguage:"sql"},r[22]=u.connection,r[23]=u.from,r[24]=u.timestampValueExpression,r[25]=c,r[26]=v,r[27]=h):h=r[27],s=h}let h=s,p=void 0!==d&&d&&!!u&&!!h;r[28]!==h||r[29]!==c||r[30]!==p?(n={config:h,dateRangeStartInclusive:!0,dateRange:c,enabled:p},r[28]=h,r[29]=c,r[30]=p,r[31]=n):n=r[31];let{data:x}=eF(n);t:{let e,t,s;r[32]!==x?.data?(e=x?.data||[],r[32]=x?.data,r[33]=e):e=r[33];let n=e;r[34]!==n?(t=n.find(eH),r[34]=n,r[35]=t):t=r[35];let l=t;if(!l){let e;r[36]!==n?(e=n.find(eq),r[36]=n,r[37]=e):e=r[37],l=e}if(l){let e;r[38]!==l.rumSessionId||r[39]!==l.serviceName?(e={rumServiceName:l.serviceName,rumSessionId:l.rumSessionId},r[38]=l.rumSessionId,r[39]=l.serviceName,r[40]=e):e=r[40],a=e;break t}r[41]===Symbol.for("react.memo_cache_sentinel")?(s={rumServiceName:void 0,rumSessionId:void 0},r[41]=s):s=r[41],a=s}return a})({sourceId:Q,traceId:Z,dateRange:J,enabled:null!=e}),en=(0,i.useMemo)(()=>{try{if(!s?.resourceAttributesExpression||!O)return!1;let e=O.__hdx_resource_attributes;return e?.["k8s.pod.uid"]!=null||e?.["k8s.node.name"]!=null}catch(e){return console.error(e),!1}},[s,O]),ea=(0,i.useMemo)(()=>{if(O)return{timestamp:O.__hdx_timestamp,spanId:O.__hdx_span_id,body:O.__hdx_body}},[O]);return j?(0,r.jsx)("div",{className:eO().loadingState,children:"Loading..."}):C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.a,{p:"sm",children:(0,r.jsx)(b.A,{date:y,attributes:Y,mainContent:B,mainContentHeader:V,severityText:W,breadcrumbPath:h,onBreadcrumbClick:N})}),(0,r.jsx)(w.A,{"data-testid":"side-panel-tabs",className:"fs-8 mt-2",items:[...A?[{text:"Overview",value:"overview"}]:[],{text:"Column Values",value:"parsed"},{text:"Trace",value:"trace"},...ee?[{text:"Service Map",value:"serviceMap"}]:[],{text:"Surrounding Context",value:"context"},...null!=et?[{text:"Session Replay",value:"replay"}]:[],...en?[{text:"Infrastructure",value:"infrastructure"}]:[]],activeItem:P,onClick:e=>D(e)}),"overview"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(X.W,{"data-testid":"side-panel-tab-overview",source:s,rowId:e,aliasWith:t,hideHeader:!0})}),"trace"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,r.jsx)(eU,{"data-testid":"side-panel-tab-trace",parentSourceId:s.id,childSourceId:U,traceId:Z,dateRange:J,focusDate:y,initialRowHighlightHint:ea})})}),"serviceMap"===P&&ee&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(g.s,{p:"sm",flex:1,children:(0,r.jsx)($,{traceId:Z,traceTableSourceId:Q,dateRange:J})})}),"parsed"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(q.dD,{"data-testid":"side-panel-tab-parsed",source:s,rowId:e,aliasWith:t})}),"context"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(z.A,{"data-testid":"side-panel-tab-context",source:s,dbSqlRowTableConfig:k,rowData:O,rowId:e,breadcrumbPath:h,onBreadcrumbClick:N})}),"replay"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)("div",{className:"overflow-hidden flex-grow-1",children:(0,r.jsx)(eW,{"data-testid":"side-panel-tab-replay",dateRange:K,focusDate:y,setSubDrawerOpen:a,traceSourceId:Q,serviceName:es,rumSessionId:et})})}),"infrastructure"===P&&(0,r.jsx)(m.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,r.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,r.jsx)(H,{"data-testid":"side-panel-tab-infrastructure",source:s,rowData:O,rowId:e})})}),(0,r.jsx)(_.ir,{})]}):(0,r.jsx)("div",{className:eO().loadingState,children:"Error loading row data"})};function e3(e){let t,s,n,a,o,c,d,p,g,y,b,_,S,w=(0,l.c)(39),{onClose:E,rowId:k,aliasWith:N,source:A,isNestedPanel:T,breadcrumbPath:$,onBreadcrumbClick:z}=e;w[0]!==$?(t=void 0===$?[]:$,w[0]=$,w[1]=t):t=w[1];let I=t,L=(0,C.Y)()+10,{size:M,startResize:R}=(0,v.A)(80),[D,P]=(0,i.useState)(!1);(0,i.useContext)(e0),w[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,u.Oq)(Object.values(e1)),w[2]=s):s=w[2];let[,O]=(0,u.ZA)("tab",s);w[3]===Symbol.for("react.memo_cache_sentinel")?(n={},w[3]=n):n=w[3];let{clear:F}=j(n);w[4]!==F||w[5]!==T||w[6]!==E||w[7]!==O?(a=()=>{T||O(null),F(),E()},w[4]=F,w[5]=T,w[6]=E,w[7]=O,w[8]=a):a=w[8];let V=a;w[9]===Symbol.for("react.memo_cache_sentinel")?(o=["esc"],w[9]=o):o=w[9];let B=!1===D;w[10]!==B?(c={enabled:B},w[10]=B,w[11]=c):c=w[11],(0,h.vC)(o,V,c);let W=null!=k,H=!T;w[12]!==V||w[13]!==D?(d=()=>{D||V()},w[12]=V,w[13]=D,w[14]=d):d=w[14];let q=`${M}vw`;return w[15]===Symbol.for("react.memo_cache_sentinel")?(p={body:{padding:"0",height:"100vh"}},w[15]=p):p=w[15],w[16]!==R?(g=(0,r.jsx)(x.a,{className:eO().panelDragBar,onMouseDown:R}),w[16]=R,w[17]=g):g=w[17],w[18]!==V||w[19]!==N||w[20]!==I||w[21]!==T||w[22]!==z||w[23]!==k||w[24]!==A?(y=(0,r.jsx)(m.ErrorBoundary,{fallbackRender:e5,children:(0,r.jsx)(e2,{source:A,rowId:k,aliasWith:N,onClose:V,isNestedPanel:T,breadcrumbPath:I,setSubDrawerOpen:P,onBreadcrumbClick:z})}),w[18]=V,w[19]=N,w[20]=I,w[21]=T,w[22]=z,w[23]=k,w[24]=A,w[25]=y):y=w[25],w[26]!==g||w[27]!==y?(b=(0,r.jsxs)("div",{className:eO().panel,"data-testid":"row-side-panel",children:[g,y]}),w[26]=g,w[27]=y,w[28]=b):b=w[28],w[29]!==L||w[30]!==b?(_=(0,r.jsx)(C.S.Provider,{value:L,children:b}),w[29]=L,w[30]=b,w[31]=_):_=w[31],w[32]!==L||w[33]!==H||w[34]!==d||w[35]!==q||w[36]!==_||w[37]!==W?(S=(0,r.jsx)(f._,{opened:W,withCloseButton:!1,withOverlay:H,onClose:d,position:"right",size:q,styles:p,zIndex:L,children:_}),w[32]=L,w[33]=H,w[34]=d,w[35]=q,w[36]=_,w[37]=W,w[38]=S):S=w[38],S}function e5(e){return(0,r.jsxs)(y.B,{children:[(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),(0,r.jsx)("div",{className:"px-2 py-1 m-2 fs-7 font-monospace bg-body p-4",children:e?.error?.message})]})}},54167:(e,t,s)=>{"use strict";var n=s(31832);s(5062),s(75131),s(17769),n.N,n.M,n.P,t.oU=n.Q,n.O,n.L},57030:(e,t,s)=>{"use strict";s.d(t,{A:()=>eE});var n=s(6029),a=s(75155),r=s(55729),l=s(75828),i=s.n(l),o=s(47687),c=s.n(o),d=s(41038),u=s(1909),m=s(3145),h=s(95991),p=s(90124),x=s(63085),g=s(76013),f=s(3635),y=s(25062),b=s(92789),v=s(79621),j=s(10822),_=s(62118),S=s(97684),w=s(39614),E=s(81244),C=s(12853),k=s(50374),N=s(17273),A=s(40147),T=s(66692),$=s(86823),z=s(97039),I=s(61441),L=s(10708),M=s(56795),R=s(61411),D=s(81055),P=s(90515),O=s(45172),F=s(94502),V=s(80925),B=s(92917),W=s(81408),H=s.n(W);function q(e){return Math.max(e.getCurrentTime(),0)}let X=(0,r.memo)(({url:e})=>{let t,s;try{t=new URL(e)}catch{}try{let e=new URLSearchParams(t?.search??"");for(let[t,n]of(s=[],e.entries()))s.push({key:t,value:n})}catch{}return(0,n.jsxs)(z.j,{shadow:"md",position:"bottom-start",children:[(0,n.jsx)(z.j.Target,{children:(0,n.jsx)("div",{className:H().playerHeaderUrl,children:e||"Session Player"})}),e&&(0,n.jsx)(z.j.Dropdown,{children:(0,n.jsxs)("table",{className:"table fs-8 mb-0",children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(L.A,{size:14})}),(0,n.jsx)("td",{children:t?.host})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(M.A,{size:14})}),(0,n.jsx)("td",{children:t?.pathname})]}),s&&s.length>0&&s.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("strong",{children:e.key})}),(0,n.jsx)("td",{children:e.value})]},e.key))]})})]})});function Y({config:{dateRange:e,serviceName:t,sessionId:s,sourceId:a},focus:l,setPlayerTime:o,playerState:d,setPlayerState:u,playerSpeed:m,skipInactive:h,setPlayerStartTimestamp:p,setPlayerEndTimestamp:x,setPlayerFullWidth:y,playerFullWidth:b,resizeKey:v,getSessionSourceFieldExpression:j}){let _=(0,B.uy)(),S=(0,r.useRef)(null),w=(0,r.useRef)(null),E=(0,r.useRef)(null),C=(0,r.useRef)([]),k=(0,r.useRef)(0),[N,A]=(0,r.useState)(0),z=(0,r.useRef)(c()(A,100,{leading:!0,trailing:!0})),[L,M]=(0,r.useState)(!1),[W,Y]=(0,r.useState)(!1),J="",{isFetching:K,abort:G}=(0,V.S)({serviceName:t,sessionId:s,sourceId:a,startDate:e?.[0]??new Date,endDate:e?.[1]??new Date,limit:1e6,onEvent:e=>{try{let{b:t,ck:s,tcks:n}=e;if(J+=t,!s||s===n){let e=JSON.parse(J);null!=E.current?E.current.addEvent(e):(null!=p&&0===C.current.length&&p(e.timestamp),C.current.push(e)),z.current(e.timestamp),k.current=e.timestamp,J=""}}catch(e){_&&console.error(e),J=""}C.current.length>5&&M(!0)},onEnd:()=>{M(!0),Y(!0),null!=x&&(null!=E.current?x(k.current??0):C.current.length>0&&x(C.current[C.current.length-1].timestamp??0))},getSessionSourceFieldExpression:j},{keepPreviousData:!0,shouldAbortPendingRequest:!0}),[Z,U]=(0,r.useState)(""),Q=(0,r.useCallback)(()=>{if(null!=E.current)try{E.current.play(q(E.current))}catch(e){console.error(e)}},[E]),ee=(0,r.useCallback)(e=>{if(null!=E.current)try{E.current.pause(e)}catch(e){console.error(e)}},[E]);(0,T.vC)(["space"],()=>{"playing"===d?u("paused"):"paused"===d&&u("playing")});let et=(0,r.useRef)(o);(0,r.useEffect)(()=>{et.current=o},[o]);let es=(0,r.useRef)(0),en=(0,r.useCallback)(()=>{null!=E.current&&E.current.service.state.matches("playing")&&et.current(Math.round(E.current.getMetaData().startTime+q(E.current))),es.current=requestAnimationFrame(en)},[]);(0,r.useEffect)(()=>(es.current=requestAnimationFrame(en),()=>{cancelAnimationFrame(es.current)}),[en]),(0,r.useEffect)(()=>{null!=E.current&&("playing"===d?Q():"paused"===d&&ee())},[d,Q,ee]),(0,r.useEffect)(()=>{null!=E.current&&("playing"===d?(ee(),E.current?.setConfig({speed:m,skipInactive:h}),Q()):"paused"===d&&E.current?.setConfig({speed:m,skipInactive:h}))},[d,m,h,ee,Q]);let ea=(0,r.useCallback)(()=>{null!=S.current&&null!=w.current&&(w.current.style.transform="scale(0.0001)",window.requestAnimationFrame(()=>{if(null==S.current||null==w.current)return;let e=S.current.getBoundingClientRect(),t=E?.current?.iframe?.offsetWidth??1280,s=E?.current?.iframe?.offsetHeight??720,n=e.width/t,a=e.height/s;w.current.style.transform=`scale(${Math.min(n,a)})`}))},[S,w]);(0,r.useEffect)(()=>(window.addEventListener("resize",ea),()=>window.removeEventListener("resize",ea)),[ea]),(0,r.useEffect)(()=>{ea()},[v,ea]);let[er,el]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C.current.length<2||null==w.current||null!=E.current||(E.current=new $.B(C.current,{root:w.current,mouseTail:!0,pauseAnimation:!1,showWarning:_,skipInactive:!0}),el(!0),_&&(window.__hdx_replayer=E.current),E.current.enableInteract(),E.current.on("event-cast",e=>{try{(e?.type===3&&e?.data?.source===4||4===e.type)&&setTimeout(()=>{ea()},0),e?.type===4&&U(e.data.href)}catch(e){_&&console.error(e)}}),"playing"===d&&E.current.getMetaData().endTime>(l?.ts??0)&&(null!=l&&ee(l.ts-E.current.getMetaData().startTime),Q()),setTimeout(()=>{ea()},0))},[ea,l,ee,L,d,Q,_]),(0,r.useEffect)(()=>{L&&er&&!(N<(l?.ts?l.ts+1e3:1/0))&&l?.setBy!=="player"&&null!=E.current&&(ee(l?.ts==null?0:l?.ts-E.current.getMetaData().startTime),ea(),"playing"===d&&Q())},[l,ee,u,d,Q,L,er,ea,N]),(0,r.useEffect)(()=>()=>{null!=E.current&&(E.current?.destroy(),E.current=null),G()},[G]);let ei=!1===L&&K,eo=!1===W&&(E.current?.getMetaData()?.endTime??0)<(l?.ts??0);return(0,r.useEffect)(()=>{null!=E.current&&null!=l&&E.current.getMetaData().endTime>l.ts&&"playing"===d&&E.current?.service?.state?.matches("paused")&&(ee(l.ts-E.current.getMetaData().startTime),Q())},[N,l,d,ee,Q]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:H().playerHeader,children:[(0,n.jsx)(g.M,{onClick:()=>y(!b),size:"sm",color:"gray",children:b?(0,n.jsx)(R.A,{size:14}):(0,n.jsx)(D.A,{size:14})}),(0,n.jsx)(I.i,{value:Z,children:({copied:e,copy:t})=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X,{url:Z}),(0,n.jsx)(g.M,{onClick:t,title:"Copy URL",variant:"secondary",size:"sm",children:e?(0,n.jsx)(P.A,{size:14}):(0,n.jsx)(O.A,{size:14})})]})})]}),(0,n.jsxs)("div",{className:H().playerContainer,children:[ei||eo?(0,n.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[(0,n.jsx)(F.A,{className:"spin-animate",size:14}),eo?"Buffering to time...":"Loading replay..."]}):W&&null==E.current?(0,n.jsx)("div",{className:"text-center",children:"No replay available for this session, most likely due to this session starting and ending in a background tab."}):null,(0,n.jsx)("div",{ref:S,className:i()(H().domPlayerWrapper,"overflow-hidden",{"d-none":ei||eo,started:(E.current?.getCurrentTime()??0)>0,[H().domPlayerWrapperPaused]:"paused"===d}),children:(0,n.jsx)("div",{className:"player rr-block",ref:w})})]})]})}var J=s(831),K=s.n(J),G=s(4308),Z=s(91021),U=s(29766);let Q=U.Ay.object({body:U.Ay.string().nullish(),component:U.Ay.string().nullish(),durationInMs:U.Ay.number(),"error.message":U.Ay.string().nullish(),"http.method":U.Ay.string().nullish(),"http.status_code":U.Ay.string().nullish(),"http.url":U.Ay.string().nullish(),id:U.Ay.string(),"location.href":U.Ay.string().nullish(),"otel.library.name":U.Ay.string(),parent_span_id:U.Ay.string(),severity_text:U.Ay.string(),span_id:U.Ay.string(),span_name:U.Ay.string(),timestamp:U.Ay.string(),trace_id:U.Ay.string(),type:U.Ay.string().nullish()});var ee=s(9953),et=s(7565),es=s(2326),en=s.n(es);let ea=e=>{let t,s,l,i,o,c,d,u=(0,a.c)(28),{min:m,max:h,value:p,markers:g,playerState:f,onChange:y,setPlayerState:b}=e,v=(0,et.a)();u[0]!==v||u[1]!==m?(t=e=>{let t=Math.max(e-m,0),s=Math.floor(t/1e3/60),n=Math.floor(t/1e3%60),a=`${s}:${n<10?"0":""}${n}`,r=v(e,{format:"short"});return`${a} at ${r}`},u[0]=v,u[1]=m,u[2]=t):t=u[2];let j=t;u[3]!==g||u[4]!==h||u[5]!==m||u[6]!==y?(s=g?.map(e=>(0,n.jsx)(x.m,{color:e.isError?"red":"gray",label:(0,B.EJ)(e?.description??"",240,"...",/\n/),position:"top",withArrow:!0,children:(0,n.jsx)("div",{className:en().markerDot,style:{backgroundColor:e.isSuccess?"var(--color-text-success)":e.isError?"var(--color-text-danger)":"var(--color-text-muted)",left:`${(e.ts-m)/(h-m)*100}%`},onClick:()=>y(e.ts)})},e.id)),u[3]=g,u[4]=h,u[5]=m,u[6]=y,u[7]=s):s=u[7];let _=s,[S,w]=r.useState(f);u[8]!==f||u[9]!==b?(l=()=>{w(f),b("paused")},u[8]=f,u[9]=b,u[10]=l):l=u[10];let E=l;u[11]!==S||u[12]!==b?(i=()=>{b(S)},u[11]=S,u[12]=b,u[13]=i):i=u[13];let C=i;u[14]!==_?(o=(0,n.jsx)("div",{className:en().markers,children:_}),u[14]=_,u[15]=o):o=u[15];let k="playing"===f?"green":"gray",N=p||m;return u[16]!==E||u[17]!==C||u[18]!==h||u[19]!==m||u[20]!==y||u[21]!==k||u[22]!==N||u[23]!==j?(c=(0,n.jsx)(ee.A,{color:k,size:"sm",min:m,max:h,value:N,step:1e3,label:j,onChange:y,onMouseDown:E,onMouseUp:C}),u[16]=E,u[17]=C,u[18]=h,u[19]=m,u[20]=y,u[21]=k,u[22]=N,u[23]=j,u[24]=c):c=u[24],u[25]!==o||u[26]!==c?(d=(0,n.jsxs)("div",{className:en().wrapper,children:[o,c]}),u[25]=o,u[26]=c,u[27]=d):d=u[27],d};function er(e){let{timestamp:t,durationInMs:s}=e,n=new Date(t).getTime(),a=new Date(n).getTime()+s;return{...e,startOffset:n,endOffset:a}}function el(e){return e.data}function ei(e){return e.success}function eo(e){return Q.safeParse(e)}var ec=s(34834),ed=s(67214),eu=s(53993),em=s(91104),eh=s(54396),ep=s(56906),ex=s(69986),eg=s(98632),ef=s(34027),ey=s(21440),eb=s(70727);let ev={navigation:(0,n.jsx)(eh.A,{size:14}),chat:(0,n.jsx)(ep.A,{size:14}),network:(0,n.jsx)(ex.A,{size:14}),custom:(0,n.jsx)(eg.A,{size:14})},ej=r.forwardRef((e,t)=>{let s,r,l,o,c,d,u,m,h,p,x=(0,a.c)(30),{dataIndex:g,event:f,isHighlighted:y,onClick:b,onTimeClick:v}=e;return x[0]!==f.isError||x[1]!==f.isSuccess||x[2]!==y?(s=i()(H().eventRow,{[H().eventRowError]:f.isError,[H().eventRowSuccess]:f.isSuccess,[H().eventRowHighlighted]:y}),x[0]=f.isError,x[1]=f.isSuccess,x[2]=y,x[3]=s):s=x[3],x[4]!==f.eventSource?(r=ev[f.eventSource]||(0,n.jsx)(ef.A,{size:14}),x[4]=f.eventSource,x[5]=r):r=x[5],x[6]!==r?(l=(0,n.jsx)("div",{className:H().eventRowIcon,children:r}),x[6]=r,x[7]=l):l=x[7],x[8]!==f.duration?(o=f.duration>0&&(0,n.jsxs)("span",{children:[f.duration,"ms"]}),x[8]=f.duration,x[9]=o):o=x[9],x[10]!==f.title||x[11]!==o?(c=(0,n.jsxs)("div",{className:H().eventRowTitle,children:[f.title," ",o]}),x[10]=f.title,x[11]=o,x[12]=c):c=x[12],x[13]!==f.description?(d=(0,n.jsx)("div",{className:H().eventRowDescription,title:f.description,children:f.description}),x[13]=f.description,x[14]=d):d=x[14],x[15]!==b||x[16]!==c||x[17]!==d?(u=(0,n.jsxs)("div",{className:H().eventRowContent,onClick:b,children:[c,d]}),x[15]=b,x[16]=c,x[17]=d,x[18]=u):u=x[18],x[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)(_.A,{size:12,className:"me-1"}),x[19]=m):m=x[19],x[20]!==f.formattedTimestamp||x[21]!==v?(h=(0,n.jsxs)("div",{className:H().eventRowTimestamp,onClick:v,children:[m,f.formattedTimestamp]}),x[20]=f.formattedTimestamp,x[21]=v,x[22]=h):h=x[22],x[23]!==g||x[24]!==t||x[25]!==s||x[26]!==l||x[27]!==u||x[28]!==h?(p=(0,n.jsxs)("div",{"data-index":g,ref:t,className:s,children:[l,u,h]}),x[23]=g,x[24]=t,x[25]=s,x[26]=l,x[27]=u,x[28]=h,x[29]=p):p=x[29],p}),e_=({queriedConfig:e,aliasMap:t,onClick:s,onTimeClick:a,focus:l,minTs:i,showRelativeTime:o,eventsFollowPlayerPosition:c})=>{let{data:d,isLoading:u}=(0,Z.HD)(e,{placeholderData:e=>e,queryKey:["SessionEventList",e]}),m=(0,et.a)(),h=r.useMemo(()=>d?.data?.map(e=>Q.safeParse(e)).filter(e=>e.success).map(e=>e.data)??[],[d?.data]),p=(0,eb.Ay)({meta:d?.meta,aliasMap:t}),x=r.useMemo(()=>h.map(e=>{let{timestamp:t,durationInMs:s}=e,n=new Date(t).getTime(),a=new Date(n).getTime()+s,r=e["http.url"]??"",l=Number(e["http.status_code"]??""),c=e["http.method"]??"",d=(0,B.Up)(r),u=""!=c&&null!=c&&null!=r&&""!=r,h=e["error.message"],p=e.body??"",x=e.component,g=e.span_name,f=e["location.href"]??"",y=e["otel.library.name"],b=(0,B.Up)(f),v="custom-action"===y,j="routeChange"===g||"documentLoad"===g,_=e.severity_text?.toLowerCase()==="error"||"error"===x||l>499;return{id:e.id,row:e,isError:_,isSuccess:!_&&l<400&&l>99,eventSource:j?"navigation":u?"network":v?"custom":"intercom.onShow"===g?"chat":"log",title:j?"Navigated":"console.error"===g?"console.error":"console.log"===g?"console.log":"console.warn"===g?"console.warn":r.length>0?`${l} ${c}`:"intercom.onShow"===g?"Intercom Chat Opened":v||"console"===x?g:"console.error",description:j?b:null!=h&&h.length>0?h:"console"===x?p??"":r.length>0?d:"",timestamp:new Date(n),formattedTimestamp:o?(0,B.ax)(n-i):m(n,{format:"time"}),duration:a-n}})??[],[h,o,i,m]),g=r.useRef(null),f=(0,ey.Te)({count:x.length,getScrollElement:()=>g.current,estimateSize:()=>36}),y=(0,em.D)(x.findIndex(e=>e.timestamp.getTime()>=(l?.ts??0)),500);return(r.useEffect(()=>{f&&y>=0&&c&&f.scrollToIndex(y,{align:"center"})},[y,c,f]),u)?(0,n.jsxs)(ec.B,{p:"sm",gap:"xs",children:[(0,n.jsx)(ed.E,{height:36}),(0,n.jsx)(ed.E,{height:36}),(0,n.jsx)(ed.E,{height:36})]}):(0,n.jsx)(eu.F,{h:"100%",scrollbarSize:4,viewportRef:g,children:(0,n.jsx)("div",{className:H().eventListContainer,children:(0,n.jsx)("div",{style:{height:`${f.getTotalSize()}px`,width:"100%",position:"relative"},children:f.getVirtualItems().map(e=>{let t=x[e.index];return(0,n.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},children:(0,n.jsx)(ej,{event:t,dataIndex:e.index,isHighlighted:y===e.index,ref:f.measureElement,onClick:()=>s(p(t.row)),onTimeClick:()=>a(t.timestamp.getTime())})},e.key)})})})})},eS=(0,r.memo)(function(e){let t,s,r,l,i,o=(0,a.c)(18),{playerState:c,setPlayerState:d,setFocus:u,playbackRange:m,focus:h,queriedConfig:p}=e,x=m[0].getTime(),g=m[1].getTime(),f=1e3*Math.ceil(m[1].getTime()/1e3),y=1e3*Math.floor(m[0].getTime()/1e3);o[0]!==p?(t={placeholderData:G.rX,queryKey:["PlayBar",p]},o[0]=p,o[1]=t):t=o[1];let{data:b}=(0,Z.HD)(p,t);b?.data,o[2]!==b?.data?(s=b?.data?.map(eo).filter(ei).map(el)??[],o[2]=b?.data,o[3]=s):s=o[3];let v=s;o[4]!==v||o[5]!==g||o[6]!==x?(r=K()(v.map(er).filter(e=>{let{startOffset:t}=e;return t>=x&&t<=g}).map(e=>{let t=e.span_name,s=e["location.href"]??"",n=(0,B.Up)(s),a=e["error.message"]??"",r=e["http.url"]??"",l=Number(e["http.status_code"]??""),i=e["http.method"]??"",o=(0,B.Up)(r),c=e.severity_text?.toLowerCase()==="error"||"error"===e.component||"console"===e.component||l>=399;return{id:e.id,ts:e.startOffset,percentage:Math.round((e.startOffset-x)/(g-x)*100),description:"routeChange"===t||"documentLoad"===t?`Navigated to ${n}`:r.length>0?`${l} ${i}${r.length>0?` ${o}`:""}`:null!=a&&a.length>0?a:"intercom.onShow"===t?"Intercom Chat Opened":e.body??"",isError:c,isSuccess:!c&&l<400&&l>99}})??[],"percentage"),o[4]=v,o[5]=g,o[6]=x,o[7]=r):r=o[7];let j=r,_=h?.ts;return o[8]!==u?(l=e=>{u({ts:e,setBy:"slider"})},o[8]=u,o[9]=l):l=o[9],o[10]!==j||o[11]!==f||o[12]!==y||o[13]!==c||o[14]!==d||o[15]!==_||o[16]!==l?(i=(0,n.jsx)(ea,{markers:j,min:y,max:f,value:_,onChange:l,setPlayerState:d,playerState:c}),o[10]=j,o[11]=f,o[12]=y,o[13]=c,o[14]=d,o[15]=_,o[16]=l,o[17]=i):i=o[17],i});function ew(e,t){let{valueExpression:s,alias:n}=t;return e[n]=s,e}function eE(e){let t,s,l,o,T,$,z,I,L,M,R,D,P,O,F,V,W,q,X,J,K,G,Z,U,Q,ee,es,en,ea,er,el,ei,eo,ec,ed,eu,em,eh,ep,ex,eg,ef,ey,eb,ev,ej,eE,ek,eN,eA,eT,e$,ez,eI,eL,eM,eR,eD,eP,eO,eF,eV,eB,eW,eH,eq,eX,eY,eJ,eK=(0,a.c)(197),{traceSource:eG,sessionSource:eZ,session:eU,setDrawerOpen:eQ,rumSessionId:e0,start:e1,end:e2,initialTs:e3,whereLanguage:e5,onLanguageChange:e4}=e,e6=void 0===e5?"lucene":e5,[e7,e8]=(0,r.useState)(void 0);eK[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],eK[0]=t):t=eK[0];let[e9,te]=(0,r.useState)(t);eK[1]===Symbol.for("react.memo_cache_sentinel")?(s=d.GJ.withOptions({history:"replace"}),eK[1]=s):s=eK[1];let[tt,ts]=(0,d.ZA)("ts",s),tn=(0,B.ZC)(tt);eK[2]!==e3?(l=null!=e3?{ts:e3,setBy:"parent"}:void 0,eK[2]=e3,eK[3]=l):l=eK[3];let[ta,tr]=(0,r.useState)(l);eK[4]!==tn||eK[5]!==tt?(o=()=>{null==tn&&null!=tt&&tr({ts:tt,setBy:"url"})},T=[tn,tt],eK[4]=tn,eK[5]=tt,eK[6]=o,eK[7]=T):(o=eK[6],T=eK[7]),(0,r.useEffect)(o,T),eK[8]!==ts?($=c()(async e=>{ts(e)},1e3),eK[8]=ts,eK[9]=$):$=eK[9];let tl=(0,r.useRef)($).current;eK[10]!==ts?(z=()=>()=>{ts(null)},I=[ts],eK[10]=ts,eK[11]=z,eK[12]=I):(z=eK[11],I=eK[12]),(0,r.useEffect)(z,I),eK[13]!==ts?(L=e=>{"player"===e.setBy?tl(e.ts):ts(e.ts),tr(e)},eK[13]=ts,eK[14]=L):L=eK[14];let ti=L,[to,tc]=(0,r.useState)("paused"),[td,tu]=(0,r.useState)(void 0);eK[15]===Symbol.for("react.memo_cache_sentinel")?(M={history:"push"},eK[15]=M):M=eK[15];let[tm,th]=(0,d.ZA)("session_q",M);eK[16]!==td||eK[17]!==tm?(R=()=>{null!=tm&&null==td&&tu(tm)},D=[tm,td],eK[16]=td,eK[17]=tm,eK[18]=R,eK[19]=D):(R=eK[18],D=eK[19]),(0,r.useEffect)(R,D);let tp=tm??"";eK[20]!==th?(P=()=>()=>{th(null,{history:"replace"})},O=[th],eK[20]=th,eK[21]=P,eK[22]=O):(P=eK[21],O=eK[22]),(0,r.useEffect)(P,O);let[tx,tg]=(0,r.useState)("highlighted"),[tf,ty]=(0,B.Mj)("hdx-session-subpanel-show-relative-time",!1),[tb,tv]=(0,B.Mj)("hdx-session-subpanel-player-speed",1),[tj,t_]=(0,B.Mj)("hdx-session-subpanel-skip-inactive",!0),[tS,tw]=(0,B.Mj)("hdx-session-subpanel-events-follow-player-position",!0),[tE,tC]=(0,r.useState)(e1.getTime()+144e5),[tk,tN]=(0,r.useState)(e2.getTime()-144e5);eK[23]!==tE?(F=new Date(tE),eK[23]=tE,eK[24]=F):F=eK[24],eK[25]!==tk?(V=new Date(tk),eK[25]=tk,eK[26]=V):V=eK[26],eK[27]!==F||eK[28]!==V?(W=[F,V],eK[27]=F,eK[28]=V,eK[29]=W):W=eK[29];let tA=W,{getFieldExpression:tT}=(0,A.A)(eZ);eK[30]!==e2||eK[31]!==e0||eK[32]!==tp||eK[33]!==e1||eK[34]!==tx||eK[35]!==eG||eK[36]!==e6?(q={traceSource:eG,rumSessionId:e0,where:tp,whereLanguage:e6,start:e1,end:e2,tab:tx},eK[30]=e2,eK[31]=e0,eK[32]=tp,eK[33]=e1,eK[34]=tx,eK[35]=eG,eK[36]=e6,eK[37]=q):q=eK[37];let{eventsConfig:t$,aliasMap:tz}=function(e){let t,s,n,r,l,i,o=(0,a.c)(96),{traceSource:c,rumSessionId:d,where:u,whereLanguage:m,start:h,end:p,tab:x}=e,{getFieldExpression:g}=(0,A.A)(c);e:{let e,s,n,a,r,l,i,d,u,m,h,p,x,f,y,b,v,j,_,S,w,E,C,k,N;if(!g){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}let A=c.eventAttributesExpression??"SpanAttributes";o[1]!==g||o[2]!==A?(e=g(A,"message"),o[1]=g,o[2]=A,o[3]=e):e=o[3];let T=`${e}`;o[4]!==T?(s={valueExpression:T,alias:"body"},o[4]=T,o[5]=s):s=o[5];let $=c.eventAttributesExpression??"SpanAttributes";o[6]!==g||o[7]!==$?(n=g($,"component"),o[6]=g,o[7]=$,o[8]=n):n=o[8];let z=`${n}`;o[9]!==z?(a={valueExpression:z,alias:"component"},o[9]=z,o[10]=a):a=o[10];let I=`toFloat64OrZero(toString(${c.durationExpression})) * pow(10, 3) / pow(10, toInt8OrZero(toString(${c.durationPrecision})))`;o[11]!==I?(r={valueExpression:I,alias:"durationInMs"},o[11]=I,o[12]=r):r=o[12];let L=c.eventAttributesExpression??"SpanAttributes";o[13]!==g||o[14]!==L?(l=g(L,"error.message"),o[13]=g,o[14]=L,o[15]=l):l=o[15];let M=`${l}`;o[16]!==M?(i={valueExpression:M,alias:"error.message"},o[16]=M,o[17]=i):i=o[17];let R=c.eventAttributesExpression??"SpanAttributes";o[18]!==g||o[19]!==R?(d=g(R,"http.method"),o[18]=g,o[19]=R,o[20]=d):d=o[20];let D=`${d}`;o[21]!==D?(u={valueExpression:D,alias:"http.method"},o[21]=D,o[22]=u):u=o[22];let P=c.eventAttributesExpression??"SpanAttributes";o[23]!==g||o[24]!==P?(m=g(P,"http.status_code"),o[23]=g,o[24]=P,o[25]=m):m=o[25];let O=`${m}`;o[26]!==O?(h={valueExpression:O,alias:"http.status_code"},o[26]=O,o[27]=h):h=o[27];let F=c.eventAttributesExpression??"SpanAttributes";o[28]!==g||o[29]!==F?(p=g(F,"http.url"),o[28]=g,o[29]=F,o[30]=p):p=o[30];let V=`${p}`;o[31]!==V?(x={valueExpression:V,alias:"http.url"},o[31]=V,o[32]=x):x=o[32];let B=`toString(cityHash64(${c.traceIdExpression}, ${c.parentSpanIdExpression}, ${c.spanIdExpression}))`;o[33]!==B?(f={valueExpression:B,alias:"id"},o[33]=B,o[34]=f):f=o[34];let W=c.eventAttributesExpression??"SpanAttributes";o[35]!==g||o[36]!==W?(y=g(W,"location.href"),o[35]=g,o[36]=W,o[37]=y):y=o[37];let H=`${y}`;o[38]!==H?(b={valueExpression:H,alias:"location.href"},o[38]=H,o[39]=b):b=o[39],o[40]===Symbol.for("react.memo_cache_sentinel")?(v={valueExpression:"ScopeName",alias:"otel.library.name"},o[40]=v):v=o[40];let q=`${c.parentSpanIdExpression}`;o[41]!==q?(j={valueExpression:q,alias:"parent_span_id"},o[41]=q,o[42]=j):j=o[42];let X=`${c.statusCodeExpression}`;o[43]!==X?(_={valueExpression:X,alias:"severity_text"},o[43]=X,o[44]=_):_=o[44];let Y=`${c.spanIdExpression}`;o[45]!==Y?(S={valueExpression:Y,alias:"span_id"},o[45]=Y,o[46]=S):S=o[46];let J=`${c.spanNameExpression}`;o[47]!==J?(w={valueExpression:J,alias:"span_name"},o[47]=J,o[48]=w):w=o[48];let K=`${c.timestampValueExpression}`;o[49]!==K?(E={valueExpression:K,alias:"timestamp"},o[49]=K,o[50]=E):E=o[50];let G=`${c.traceIdExpression}`;o[51]!==G?(C={valueExpression:G,alias:"trace_id"},o[51]=G,o[52]=C):C=o[52],o[53]===Symbol.for("react.memo_cache_sentinel")?(k={valueExpression:"CAST('span', 'String')",alias:"type"},o[53]=k):k=o[53],o[54]!==r||o[55]!==i||o[56]!==u||o[57]!==h||o[58]!==x||o[59]!==f||o[60]!==b||o[61]!==j||o[62]!==_||o[63]!==S||o[64]!==w||o[65]!==E||o[66]!==C||o[67]!==s||o[68]!==a?(N=[s,a,r,i,u,h,x,f,b,v,j,_,S,w,E,C,k],o[54]=r,o[55]=i,o[56]=u,o[57]=h,o[58]=x,o[59]=f,o[60]=b,o[61]=j,o[62]=_,o[63]=S,o[64]=w,o[65]=E,o[66]=C,o[67]=s,o[68]=a,o[69]=N):N=o[69],t=N}let f=t,y=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:>299 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[70]!==y?(s={type:"lucene",condition:y},o[70]=y,o[71]=s):s=o[71];let b=s;t:{let e;if(!g){n=void 0;break t}let t=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:* 
      OR ${c.eventAttributesExpression}.component:"console" 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[72]!==t?(e={type:"lucene",condition:t},o[72]=t,o[73]=e):e=o[73],n=e}let v=n;s:{let e,t,s,n;if(!g||!f||!v){r=void 0;break s}o[74]!==p||o[75]!==h?(e=[h,p],o[74]=p,o[75]=h,o[76]=e):e=o[76];let a=`${c.timestampValueExpression} ASC`;o[77]===Symbol.for("react.memo_cache_sentinel")?(t={limit:4e3,offset:0},o[77]=t):t=o[77];let l="highlighted"===x?b:v;o[78]!==l?(s=[l],o[78]=l,o[79]=s):s=o[79],o[80]!==f||o[81]!==s||o[82]!==e||o[83]!==a||o[84]!==c.connection||o[85]!==c.from||o[86]!==c.implicitColumnExpression||o[87]!==c.timestampValueExpression||o[88]!==u||o[89]!==m?(n={select:f,from:c.from,dateRange:e,whereLanguage:m,where:u,timestampValueExpression:c.timestampValueExpression,implicitColumnExpression:c.implicitColumnExpression,connection:c.connection,orderBy:a,limit:t,filters:s},o[80]=f,o[81]=s,o[82]=e,o[83]=a,o[84]=c.connection,o[85]=c.from,o[86]=c.implicitColumnExpression,o[87]=c.timestampValueExpression,o[88]=u,o[89]=m,o[90]=n):n=o[90],r=n}let j=r;n:{let e;if(!g){l=void 0;break n}o[91]!==f?(e=f.reduce(ew,{}),o[91]=f,o[92]=e):e=o[92],l=e}let _=l;return o[93]!==_||o[94]!==j?(i={eventsConfig:j,aliasMap:_},o[93]=_,o[94]=j,o[95]=i):i=o[95],i}(q),[tI,tL]=(0,r.useState)(!1);eK[38]!==tb||eK[39]!==tv?(X=()=>{1==tb?tv(2):2==tb?tv(4):4==tb?tv(8):8==tb&&tv(1)},eK[38]=tb,eK[39]=tv,eK[40]=X):X=eK[40];let tM=X,tR=tA[0].getTime(),tD=tA[1].getTime();eK[41]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{tc(eC)},eK[41]=J):J=eK[41];let tP=J;eK[42]!==ta?.ts||eK[43]!==tR||eK[44]!==ti?(K=()=>{ti({ts:Math.max((ta?.ts??tR)-15e3,tR),setBy:"skip-backward"})},eK[42]=ta?.ts,eK[43]=tR,eK[44]=ti,eK[45]=K):K=eK[45],ta?.ts;let tO=K;eK[46]!==ta?.ts||eK[47]!==tD||eK[48]!==tR||eK[49]!==ti?(G=()=>{ti({ts:Math.min((ta?.ts??tR)+15e3,tD),setBy:"skip-forward"})},eK[46]=ta?.ts,eK[47]=tD,eK[48]=tR,eK[49]=ti,eK[50]=G):G=eK[50],ta?.ts;let tF=G;eK[51]!==tp||eK[52]!==e6?(Z={values:{where:tp,whereLanguage:e6}},eK[51]=tp,eK[52]=e6,eK[53]=Z):Z=eK[53];let{control:tV,handleSubmit:tB}=(0,u.mN)(Z);eK[54]!==th?(U=e=>{th(e.where)},eK[54]=th,eK[55]=U):U=eK[55];let tW=U;eK[56]!==eQ?(Q=e=>{eQ(!0),e8(e.where),te(e.aliasWith)},eK[56]=eQ,eK[57]=Q):Q=eK[57];let tH=Q;eK[58]!==ti?(ee=e=>{ti({ts:e,setBy:"timeline"})},eK[58]=ti,eK[59]=ee):ee=eK[59];let tq=ee;eK[60]!==ta?.setBy||eK[61]!==ta?.ts||eK[62]!==ti?(es=e=>{(ta?.setBy!=="player"||ta?.ts!==e)&&ti({ts:e,setBy:"player"})},eK[60]=ta?.setBy,eK[61]=ta?.ts,eK[62]=ti,eK[63]=es):es=eK[63];let tX=es;eK[64]!==e9||eK[65]!==e7||eK[66]!==eQ||eK[67]!==eG?(en=null!=e7&&eG&&(0,n.jsx)(h.Z,{children:(0,n.jsx)(k.A,{source:eG,rowId:e7,aliasWith:e9,onClose:()=>{eQ(!1),e8(void 0)}})}),eK[64]=e9,eK[65]=e7,eK[66]=eQ,eK[67]=eG,eK[68]=en):en=eK[68],eK[69]!==tI?(ea=i()(H().eventList,{"d-none":tI}),eK[69]=tI,eK[70]=ea):ea=eK[70],eK[71]===Symbol.for("react.memo_cache_sentinel")?(er={zIndex:100,width:"100%"},eK[71]=er):er=eK[71],eK[72]!==tB||eK[73]!==tW?(el=tB(tW),eK[72]=tB,eK[73]=tW,eK[74]=el):el=eK[74],eK[75]!==eG?(ei=(0,m.VO)(eG),eK[75]=eG,eK[76]=ei):ei=eK[76],eK[77]!==tB||eK[78]!==tW?(eo=tB(tW),eK[77]=tB,eK[78]=tW,eK[79]=eo):eo=eK[79],eK[80]!==tV||eK[81]!==e4||eK[82]!==ei||eK[83]!==eo?(ec=(0,n.jsx)(N.A,{tableConnection:ei,control:tV,name:"where",size:"xs",showLabel:!1,enableHotkey:!0,onSubmit:eo,onLanguageChange:e4}),eK[80]=tV,eK[81]=e4,eK[82]=ei,eK[83]=eo,eK[84]=ec):ec=eK[84],eK[85]!==el||eK[86]!==ec?(ed=(0,n.jsx)("form",{style:er,onSubmit:el,children:ec}),eK[85]=el,eK[86]=ec,eK[87]=ed):ed=eK[87],eK[88]===Symbol.for("react.memo_cache_sentinel")?(eu=[{value:"highlighted",label:"Highlighted"},{value:"events",label:"All Events"}],eK[88]=eu):eu=eK[88],eK[89]===Symbol.for("react.memo_cache_sentinel")?(em=e=>tg(e),eK[89]=em):em=eK[89],eK[90]!==tx?(eh=(0,n.jsx)(p.I,{flex:1,size:"xs",data:eu,value:tx,onChange:em}),eK[90]=tx,eK[91]=eh):eh=eK[91];let tY=tS?"filled":"subtle";eK[92]!==tS||eK[93]!==tw?(ep=()=>tw(!tS),eK[92]=tS,eK[93]=tw,eK[94]=ep):ep=eK[94],eK[95]===Symbol.for("react.memo_cache_sentinel")?(ex=(0,n.jsx)(v.A,{size:18}),eK[95]=ex):ex=eK[95],eK[96]!==tY||eK[97]!==ep?(eg=(0,n.jsx)(x.m,{label:"Sync with player position",color:"gray",children:(0,n.jsx)(g.M,{size:"md",color:"gray",variant:tY,onClick:ep,children:ex})}),eK[96]=tY,eK[97]=ep,eK[98]=eg):eg=eK[98],eK[99]!==eh||eK[100]!==eg?(ef=(0,n.jsxs)(f.Y,{gap:6,children:[eh,eg]}),eK[99]=eh,eK[100]=eg,eK[101]=ef):ef=eK[101],eK[102]!==ed||eK[103]!==ef?(ey=(0,n.jsxs)("div",{className:H().eventListHeader,children:[ed,ef]}),eK[102]=ed,eK[103]=ef,eK[104]=ey):ey=eK[104],eK[105]!==tz||eK[106]!==t$||eK[107]!==tS||eK[108]!==ta||eK[109]!==tR||eK[110]!==tH||eK[111]!==tq||eK[112]!==tf?(eb=t$&&tz&&(0,n.jsx)(e_,{eventsFollowPlayerPosition:tS,aliasMap:tz,queriedConfig:t$,onClick:tH,focus:ta,onTimeClick:tq,minTs:tR,showRelativeTime:tf}),eK[105]=tz,eK[106]=t$,eK[107]=tS,eK[108]=ta,eK[109]=tR,eK[110]=tH,eK[111]=tq,eK[112]=tf,eK[113]=eb):eb=eK[113],eK[114]!==ea||eK[115]!==ey||eK[116]!==eb?(ev=(0,n.jsxs)("div",{className:ea,children:[ey,eb]}),eK[114]=ea,eK[115]=ey,eK[116]=eb,eK[117]=ev):ev=eK[117],eK[118]!==e2||eK[119]!==ta||eK[120]!==tT||eK[121]!==tI||eK[122]!==tb||eK[123]!==to||eK[124]!==e0||eK[125]!==eU||eK[126]!==eZ||eK[127]!==tX||eK[128]!==tj||eK[129]!==e1?(ej=tT&&(0,n.jsx)(Y,{playerState:to,setPlayerState:tc,focus:ta,setPlayerTime:tX,config:{serviceName:eU.serviceName,sourceId:eZ.id,sessionId:e0,dateRange:[e1,e2]},playerSpeed:tb,skipInactive:tj,setPlayerStartTimestamp:tC,setPlayerEndTimestamp:tN,setPlayerFullWidth:tL,playerFullWidth:tI,resizeKey:`${tI}`,getSessionSourceFieldExpression:tT}),eK[118]=e2,eK[119]=ta,eK[120]=tT,eK[121]=tI,eK[122]=tb,eK[123]=to,eK[124]=e0,eK[125]=eU,eK[126]=eZ,eK[127]=tX,eK[128]=tj,eK[129]=e1,eK[130]=ej):ej=eK[130],eK[131]!==t$||eK[132]!==ta||eK[133]!==tA||eK[134]!==to||eK[135]!==ti?(eE=t$&&(0,n.jsx)(eS,{playerState:to,setPlayerState:tc,focus:ta,setFocus:ti,playbackRange:tA,queriedConfig:t$}),eK[131]=t$,eK[132]=ta,eK[133]=tA,eK[134]=to,eK[135]=ti,eK[136]=eE):eE=eK[136],eK[137]!==eE?(ek=(0,n.jsx)("div",{className:H().playerPlaybar,children:eE}),eK[137]=eE,eK[138]=ek):ek=eK[138],eK[139]!==ty||eK[140]!==tf?(eN=()=>ty(!tf),eK[139]=ty,eK[140]=tf,eK[141]=eN):eN=eK[141],eK[142]!==ta?.ts||eK[143]!==tD||eK[144]!==tR||eK[145]!==tf?(eA=tf?(0,n.jsxs)(n.Fragment,{children:[(0,B.ax)((ta?.ts??0)-tR),(0,n.jsxs)("span",{className:"fw-normal ms-2",children:[" / ",(0,B.ax)(tD-tR)]})]}):(0,n.jsx)(et.H,{value:ta?.ts||tR,format:"time"}),eK[142]=ta?.ts,eK[143]=tD,eK[144]=tR,eK[145]=tf,eK[146]=eA):eA=eK[146],eK[147]!==eN||eK[148]!==eA?(eT=(0,n.jsx)("div",{className:H().playerTimestamp,children:(0,n.jsx)(x.m,{label:"Toggle relative time",color:"gray",children:(0,n.jsx)(y.$,{variant:"subtle",color:"gray",onClick:eN,size:"compact-xs",children:eA})})}),eK[147]=eN,eK[148]=eA,eK[149]=eT):eT=eK[149];let tJ=(ta?.ts||0)<=tR;eK[150]===Symbol.for("react.memo_cache_sentinel")?(e$=(0,n.jsx)(j.A,{size:18}),eK[150]=e$):e$=eK[150],eK[151]!==tO||eK[152]!==tJ?(ez=(0,n.jsx)(x.m,{label:"Go 15 seconds back",color:"gray",children:(0,n.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tO,disabled:tJ,children:e$})}),eK[151]=tO,eK[152]=tJ,eK[153]=ez):ez=eK[153];let tK="playing"===to?"Pause":"Play";eK[154]!==to?(eI=(0,n.jsx)(g.M,{variant:"secondary",size:"lg",radius:"xl",onClick:tP,children:"paused"===to?(0,n.jsx)(_.A,{size:20}):(0,n.jsx)(S.A,{size:20})}),eK[154]=to,eK[155]=eI):eI=eK[155],eK[156]!==tK||eK[157]!==eI?(eL=(0,n.jsx)(x.m,{label:tK,color:"gray",children:eI}),eK[156]=tK,eK[157]=eI,eK[158]=eL):eL=eK[158];let tG=(ta?.ts||0)>=tD;return eK[159]===Symbol.for("react.memo_cache_sentinel")?(eM=(0,n.jsx)(w.A,{size:18}),eK[159]=eM):eM=eK[159],eK[160]!==tF||eK[161]!==tG?(eR=(0,n.jsx)(x.m,{label:"Skip 15 seconds",color:"gray",children:(0,n.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tF,disabled:tG,children:eM})}),eK[160]=tF,eK[161]=tG,eK[162]=eR):eR=eK[162],eK[163]!==ez||eK[164]!==eL||eK[165]!==eR?(eD=(0,n.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[ez,eL,eR]}),eK[163]=ez,eK[164]=eL,eK[165]=eR,eK[166]=eD):eD=eK[166],eK[167]!==tj?(eP=tj?(0,n.jsx)(E.A,{size:18,className:"pe-1"}):(0,n.jsx)(C.A,{size:18,className:"pe-1"}),eK[167]=tj,eK[168]=eP):eP=eK[168],eK[169]!==t_||eK[170]!==tj?(eO=()=>t_(!tj),eK[169]=t_,eK[170]=tj,eK[171]=eO):eO=eK[171],eK[172]===Symbol.for("react.memo_cache_sentinel")?(eF=(0,n.jsx)(b.c,{orientation:"vertical",ml:"sm"}),eK[172]=eF):eF=eK[172],eK[173]!==eP||eK[174]!==eO?(eV=(0,n.jsxs)(y.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eP,onClick:eO,children:["Skip Idle",eF]}),eK[173]=eP,eK[174]=eO,eK[175]=eV):eV=eK[175],eK[176]!==tb?(eB=(0,n.jsxs)("span",{className:"fw-bold pe-1",children:[tb,"x"]}),eK[176]=tb,eK[177]=eB):eB=eK[177],eK[178]===Symbol.for("react.memo_cache_sentinel")?(eW=(0,n.jsx)(b.c,{orientation:"vertical",ml:"sm"}),eK[178]=eW):eW=eK[178],eK[179]!==tM||eK[180]!==eB?(eH=(0,n.jsxs)(y.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eB,onClick:tM,children:["Speed",eW]}),eK[179]=tM,eK[180]=eB,eK[181]=eH):eH=eK[181],eK[182]!==eV||eK[183]!==eH?(eq=(0,n.jsxs)(f.Y,{align:"center",justify:"flex-end",gap:"xs",children:[eV,eH]}),eK[182]=eV,eK[183]=eH,eK[184]=eq):eq=eK[184],eK[185]!==eT||eK[186]!==eD||eK[187]!==eq?(eX=(0,n.jsxs)("div",{className:H().playerToolbar,children:[eT,eD,eq]}),eK[185]=eT,eK[186]=eD,eK[187]=eq,eK[188]=eX):eX=eK[188],eK[189]!==ej||eK[190]!==ek||eK[191]!==eX?(eY=(0,n.jsxs)("div",{className:H().player,children:[ej,ek,eX]}),eK[189]=ej,eK[190]=ek,eK[191]=eX,eK[192]=eY):eY=eK[192],eK[193]!==en||eK[194]!==ev||eK[195]!==eY?(eJ=(0,n.jsxs)("div",{className:H().wrapper,children:[en,ev,eY]}),eK[193]=en,eK[194]=ev,eK[195]=eY,eK[196]=eJ):eJ=eK[196],eJ}function eC(e){return"playing"===e?"paused":"playing"}},58541:(e,t,s)=>{"use strict";s.d(t,{g:()=>k});var n=s(6029),a=s(55729),r=s(11335),l=s(1909),i=s(59589),o=s(29135),c=s(82641),d=s(92495),u=s(34834),m=s(43517),h=s(18341),p=s(3635),x=s(59029),g=s(39603),f=s(25062),y=s(60665),b=s(32963),v=s(95352),j=s(6876),_=s(36600),S=s(92917);let w=["{{title}}","{{body}}","{{link}}","{{state}}","{{startTime}}","{{endTime}}","{{eventId}}"],E=w.join(" | "),C=()=>e=>""===e.state.doc.toString().trim()?[]:(0,i.cp)()(e);function k({webhook:e,onClose:t,onSuccess:s}){let k=(0,_.Kh)(),N=j.Ay.useSaveWebhook(),A=j.Ay.useUpdateWebhook(),T=j.Ay.useTestWebhook(),$=null!=e,z=(0,l.mN)({defaultValues:{service:e?.service||c.x.Slack,name:e?.name||"",url:e?.url||"",description:e?.description||"",body:e?.body||"",headers:e?.headers?JSON.stringify(e.headers,null,2):""}});(0,a.useEffect)(()=>{e&&z.reset({service:e.service,name:e.name,url:e.url,description:e.description,body:e.body,headers:e.headers?JSON.stringify(e.headers,null,2):""},{})},[e,z]);let I=async e=>{let t,{service:s,url:n,body:a,headers:l}=e;if(l&&l.trim())try{t=JSON.parse(l)}catch(t){let e=t instanceof Error?t.message:"Invalid JSON format";y.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let i=a;a||(s===c.x.Generic?i=`{"text": "${E}"}`:s===c.x.IncidentIO&&(i=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));try{await T.mutateAsync({service:s,url:n,body:i,headers:t}),y.$e.show({color:"green",message:"Test webhook sent successfully"})}catch(t){console.error(t);let e="Failed to send test webhook. Please check your webhook configuration.";if(t instanceof r.H)try{let s=await t.response.json();s.message&&(e=s.message)}catch(e){console.error("Failed to parse error response:",e)}y.$e.show({message:e,color:"red",autoClose:5e3})}},L=async n=>{let{service:a,name:l,url:i,description:o,body:d,headers:u}=n;try{let n;if(u&&u.trim())try{n=JSON.parse(u)}catch(t){let e=t instanceof Error?t.message:"Invalid JSON format";y.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let r=d;d||(a===c.x.Generic?r=`{"text": "${E}"}`:a===c.x.IncidentIO&&(r=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));let m={service:a,name:l,url:i,description:o||"",body:r,headers:n},h=$?await A.mutateAsync({id:e._id,...m}):await N.mutateAsync(m);y.$e.show({color:"green",message:`Webhook ${$?"updated":"created"} successfully`}),s(h.data?._id),t()}catch(t){console.error(t);let e=`Something went wrong. Please contact ${k} team.`;if(t instanceof r.H)try{let s=await t.response.json();if(s.error?.issues&&Array.isArray(s.error.issues)){let t=s.error.issues.map(e=>{let t=e.path.join(".");return`${t}: ${e.message}`}).join(", ");e=`Validation error: ${t}`}else e=s.message?s.message:JSON.stringify(s)}catch(e){console.error("Failed to parse error response:",e)}y.$e.show({message:e,color:"red",autoClose:5e3})}},M=(0,l.FH)({control:z.control,name:"service"});return(0,n.jsx)("form",{onSubmit:z.handleSubmit(L),children:(0,n.jsxs)(u.B,{mt:"sm",children:[(0,n.jsx)(m.E,{children:$?"Edit Webhook":"Create Webhook"}),(0,n.jsx)(h.s.Group,{"data-testid":"service-type-radio-group",label:"Service Type",required:!0,value:M,onChange:e=>z.setValue("service",e),children:(0,n.jsxs)(p.Y,{mt:"xs",children:[(0,n.jsx)(h.s,{value:c.x.Slack,label:"Slack"}),(0,n.jsx)(h.s,{value:c.x.IncidentIO,label:"incident.io"}),(0,n.jsx)(h.s,{value:c.x.Generic,label:"Generic"})]})}),(0,n.jsx)(x.k,{label:"Webhook Name","data-testid":"webhook-name-input",placeholder:"Post to #dev-alerts",required:!0,error:z.formState.errors.name?.message,...z.register("name",{required:!0})}),(0,n.jsx)(x.k,{label:"Webhook URL","data-testid":"webhook-url-input",placeholder:M===c.x.Slack?"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX":M===c.x.IncidentIO?"https://api.incident.io/v2/alert_events/http/ZZZZZZZZ?token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX":"https://example.com/webhook",type:"url",required:!0,error:z.formState.errors.url?.message,...z.register("url",{required:!0,validate:(e,t)=>t.service===c.x.Slack?(0,d.AB)(e)||"URL must be valid and have a slack.com domain":(0,S.AY)(e)||"URL must be valid"})}),(0,n.jsx)(x.k,{label:"Webhook Description (optional)",placeholder:"To be used for dev alerts",error:z.formState.errors.description?.message,...z.register("description")}),M===c.x.Generic&&[(0,n.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Headers (optional)"},"1"),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(l.xI,{name:"headers",control:z.control,render:({field:e})=>(0,n.jsx)(v.Ay,{height:"100px",extensions:[(0,i.Pq)(),(0,o.bu)(C()),(0,v.qf)(`{
	"Authorization": "Bearer token",
	"X-Custom-Header": "value"
}`)],theme:"dark",value:e.value,onChange:t=>e.onChange(t)})})},"2"),(0,n.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Body (optional)"},"3"),(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(l.xI,{name:"body",control:z.control,render:({field:e})=>(0,n.jsx)(v.Ay,{height:"100px",extensions:[(0,i.Pq)(),(0,o.bu)(C()),(0,v.qf)(`{
	"text": "${E}"
}`)],theme:"dark",value:e.value,onChange:t=>e.onChange(t)})})},"4"),(0,n.jsxs)(g.F,{icon:(0,n.jsx)(b.A,{size:16}),className:"mb-4",color:"gray",children:[(0,n.jsx)("span",{children:"Currently the body supports the following message template variables:"}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:w.map((e,t)=>(0,n.jsxs)("span",{children:[(0,n.jsx)("code",{children:e}),t<w.length-1&&", "]},t))})]},"5")],(0,n.jsxs)(p.Y,{justify:"space-between",children:[(0,n.jsxs)(p.Y,{children:[(0,n.jsx)(f.$,{variant:"primary",type:"submit","data-testid":"add-webhook-button",loading:N.isPending||A.isPending,children:$?"Update Webhook":"Add Webhook"}),(0,n.jsx)(f.$,{variant:"secondary",onClick:z.handleSubmit(I),loading:T.isPending,type:"button",children:"Test Webhook"})]}),(0,n.jsx)(f.$,{variant:"secondary",onClick:t,type:"reset",children:"Cancel"})]})]})})}},59017:(e,t,s)=>{"use strict";s.d(t,{V:()=>d});var n=s(6029),a=s(75155),r=s(55729),l=s(23935),i=s(78253),o=s(50374),c=s(94937);function d(e){let t,s,d,m,h,p=(0,a.c)(21),{attributes:x}=e;p[0]!==x?(t=void 0===x?[]:x,p[0]=x,p[1]=t):t=p[1];let g=t,[f,y]=(0,r.useState)(!1),{onPropertyAddClick:b,generateSearchUrl:v,source:j}=(0,r.useContext)(o.D);p[2]!==g||p[3]!==f?(s=g.sort(u).slice(0,f?g.length:12),p[2]=g,p[3]=f,p[4]=s):s=p[4];let _=s,S=g.length-_.length;if(p[5]!==j?.id||p[6]!==v||p[7]!==b||p[8]!==_){let e;p[10]!==j?.id||p[11]!==v||p[12]!==b?(e=e=>{let{displayedKey:t,value:s,sql:a,lucene:r,source:l}=e;return(0,n.jsx)(c.A,{displayedKey:t,name:r||a,nameLanguage:r?"lucene":"sql",value:s,...b&&j?.id===l.id?{onPropertyAddClick:b,sqlExpression:a}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:v?(e,t)=>v({where:e||"",whereLanguage:t??"lucene",source:l}):void 0},`${t}-${s}-${l.id}`)},p[10]=j?.id,p[11]=v,p[12]=b,p[13]=e):e=p[13],d=_.map(e),p[5]=j?.id,p[6]=v,p[7]=b,p[8]=_,p[9]=d}else d=p[9];return p[14]!==g.length||p[15]!==S||p[16]!==f?(m=g.length>12&&(0,n.jsx)(l.M,{size:"xs",onClick:()=>y(!f),children:f?"Show Less":`Show ${S} More...`}),p[14]=g.length,p[15]=S,p[16]=f,p[17]=m):m=p[17],p[18]!==d||p[19]!==m?(h=(0,n.jsxs)(i.s,{wrap:"wrap",gap:"2px",mb:"md",align:"baseline",children:[d,m]}),p[18]=d,p[19]=m,p[20]=h):h=p[20],h}function u(e,t){return e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value)}},61629:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var n=s(6029),a=s(75155),r=s(43517),l=s(92917);function i(e){let t,s,i,o=(0,a.c)(7);o[0]!==e?({level:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]);let c=(0,l.lO)(t),d="error"===c?"red":"warn"===c?"var(--color-chart-warning)":"gray";return o[3]!==t||o[4]!==s||o[5]!==d?(i=(0,n.jsx)(r.E,{component:"span",size:"xs",c:d,...s,children:t}),o[3]=t,o[4]=s,o[5]=d,o[6]=i):i=o[6],i}},64441:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var n=s(6029),a=s(75155),r=s(55729),l=s(63085),i=s(8737),o=s(43517),c=s(60481),d=s(20294),u=s(78253),m=s(22623),h=s(25062),p=s(15216),x=s(16232),g=s(7565),f=s(57820),y=s(92917),b=s(59017),v=s(50374),j=s(61629);let _=e=>"getTime"in e&&!isNaN(e.getTime());function S(e){let t,s,r,u=(0,a.c)(9),{breadcrumbPath:m,onNavigateToLevel:h}=e;u[0]!==h?(t=e=>{h?.(e)},u[0]=h,u[1]=t):t=u[1];let p=t;e:{let e;if(0===m.length){let e;u[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],u[2]=e):e=u[2],s=e;break e}if(u[3]!==m||u[4]!==p){let t;e=[],m.forEach((t,s)=>{let a,r=t.rowData?(a=(t.rowData.__hdx_body||"").trim()).length>200?`${a.substring(0,197)}...`:a:"";e.push((0,n.jsx)(l.m,{label:r,disabled:!r,position:"bottom",withArrow:!0,children:(0,n.jsx)(i.N,{onClick:()=>p(s),style:{textDecoration:"none"},children:(0,n.jsx)(o.E,{size:"sm",c:"blue",style:{cursor:"pointer"},children:0===s?"Original Event":t.label})})},`crumb-${s}`))}),u[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(o.E,{size:"sm",children:"Selected Event"},"current"),u[6]=t):t=u[6],e.push(t),u[3]=m,u[4]=p,u[5]=e}else e=u[5];s=e}let x=s;return 0===m.length?null:(u[7]!==x?(r=(0,n.jsx)(c.a,{mb:"sm",pb:"sm",className:"border-bottom border-dark",children:(0,n.jsx)(d.B,{separator:"›",separatorMargin:"xs",children:x})}),u[7]=x,u[8]=r):r=u[8],r)}function w(e){let t,s,l,i,d,w,C,k,N,A,T,$,z,I=(0,a.c)(41),{attributes:L,mainContent:M,mainContentHeader:R,date:D,severityText:P,breadcrumbPath:O,onBreadcrumbClick:F}=e;I[0]!==L?(t=void 0===L?[]:L,I[0]=L,I[1]=t):t=I[1];let V=t,B=void 0===M?"":M;I[2]!==O?(s=void 0===O?[]:O,I[2]=O,I[3]=s):s=I[3];let W=s,[H,q]=r.useState(!1),{generateSearchUrl:X}=(0,r.useContext)(v.D),Y=B.length>2e3;I[4]!==H||I[5]!==B?(l=H?B:B?.slice(0,2e3),I[4]=H,I[5]=B,I[6]=l):l=I[6];let J=l,[K,G]=(0,r.useState)(null),[Z,U]=(0,r.useState)(0);I[7]!==K?(i=()=>{if(!K)return;let e=()=>{U(K.offsetHeight)};e();let t=new ResizeObserver(e);return t.observe(K),()=>{t.disconnect()}},d=[K],I[7]=K,I[8]=i,I[9]=d):(i=I[8],d=I[9]),(0,r.useEffect)(i,d);let{userPreferences:Q,setUserPreference:ee}=(0,f.HW)(),{expandSidebarHeader:et}=Q;return I[10]!==W||I[11]!==F?(w=(0,n.jsx)(S,{breadcrumbPath:W,onNavigateToLevel:F}),I[10]=W,I[11]=F,I[12]=w):w=I[12],I[13]!==P?(C=P&&(0,n.jsx)(j.A,{level:P}),I[13]=P,I[14]=C):C=I[14],I[15]!==D||I[16]!==P?(k=P&&_(D)&&(0,n.jsx)(o.E,{size:"xs",mx:"xs",children:"\xb7"}),I[15]=D,I[16]=P,I[17]=k):k=I[17],I[18]!==D?(N=_(D)&&(0,n.jsxs)(o.E,{size:"xs",children:[(0,n.jsx)(g.H,{value:D})," \xb7"," ",(0,y.Jk)(D)," ago"]}),I[18]=D,I[19]=N):N=I[19],I[20]!==C||I[21]!==k||I[22]!==N?(A=(0,n.jsxs)(u.s,{children:[C,k,N]}),I[20]=C,I[21]=k,I[22]=N,I[23]=A):A=I[23],I[24]!==H||I[25]!==et||I[26]!==Z||I[27]!==Y||I[28]!==B||I[29]!==J||I[30]!==R||I[31]!==ee||I[32]!==Q?(T=B?(0,n.jsxs)(m.t,{p:"xs",mt:"sm",style:{maxHeight:et?void 0:120,overflow:"auto",overflowWrap:"break-word"},ref:G,children:[(0,n.jsxs)(u.s,{justify:"space-between",mb:"xs",children:[(0,n.jsx)(o.E,{size:"xs",children:R}),Z>=120&&(0,n.jsx)(h.$,{size:"compact-xs",variant:"subtle",onClick:()=>ee({...Q,expandSidebarHeader:!et}),children:et?(0,n.jsx)(p.A,{size:14}):(0,n.jsx)(x.A,{size:14})})]}),J,Y&&(0,n.jsx)(h.$,{size:"compact-xs",variant:"subtle",color:"gray",onClick:()=>{q(E)},children:H?"Collapse":"Expand"})]}):(0,n.jsx)(m.t,{p:"xs",mt:"sm",children:(0,n.jsx)(o.E,{size:"xs",mb:"xs",children:"[Empty]"})}),I[24]=H,I[25]=et,I[26]=Z,I[27]=Y,I[28]=B,I[29]=J,I[30]=R,I[31]=ee,I[32]=Q,I[33]=T):T=I[33],I[34]!==V?($=(0,n.jsx)(c.a,{mt:"xs",children:(0,n.jsx)(b.V,{attributes:V})}),I[34]=V,I[35]=$):$=I[35],I[36]!==A||I[37]!==T||I[38]!==$||I[39]!==w?(z=(0,n.jsxs)(n.Fragment,{children:[w,A,T,$]}),I[36]=A,I[37]=T,I[38]=$,I[39]=w,I[40]=z):z=I[40],z}function E(e){return!e}},64501:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var n=s(6029),a=s(55729),r=s(88459),l=s(82641),i=s(27166),o=s(43517),c=s(92789),d=s(25062),u=s(78253),m=s(94720),h=s(60665),p=s(24583),x=s(43567),g=s(98142),f=s(93108),y=s(78550),b=s(81973),v=s(36600),j=s(24314),_=s(54970);async function S({connectionId:e,createSourceMutation:t,updateSourceMutation:s,logSourceDatabaseName:n,logSourceName:a,logSourceTableName:r,metricsSourceDatabaseName:i,metricsSourceName:o,sessionSourceDatabaseName:c,sessionSourceName:d,sessionSourceTableName:u,traceSourceDatabaseName:m,traceSourceName:h,traceSourceTableName:p,traceSourceHighlightedTraceAttributes:x,traceSourceMaterializedViews:g}){let f,y,b=n&&a&&r,v=i&&o;b&&(f=await t.mutateAsync({source:{kind:l.GL.Log,name:a,connection:e,from:{databaseName:n,tableName:r},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, SeverityText, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body",displayedTimestampValueExpression:"Timestamp"}}));let j=await t.mutateAsync({source:{kind:l.GL.Trace,name:h,connection:e,from:{databaseName:m,tableName:p},timestampValueExpression:"Timestamp",defaultTableSelectExpression:"Timestamp, ServiceName, StatusCode, round(Duration / 1e6), SpanName",serviceNameExpression:"ServiceName",eventAttributesExpression:"SpanAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"SpanName",durationExpression:"Duration",durationPrecision:9,parentSpanIdExpression:"ParentSpanId",spanKindExpression:"SpanKind",spanNameExpression:"SpanName",...b?{logSourceId:"l-758211293"}:{},statusCodeExpression:"StatusCode",statusMessageExpression:"StatusMessage",spanEventsValueExpression:"Events",highlightedTraceAttributeExpressions:x,materializedViews:g}});v&&(y=await t.mutateAsync({source:{kind:l.GL.Metric,name:o,connection:e,from:{databaseName:i,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:{[l.SX.Gauge]:"otel_metrics_gauge",[l.SX.Histogram]:"otel_metrics_histogram",[l.SX.Sum]:"otel_metrics_sum",[l.SX.Summary]:"otel_metrics_summary",[l.SX.ExponentialHistogram]:"otel_metrics_exponential_histogram"},resourceAttributesExpression:"ResourceAttributes",...b&&f?{logSourceId:f.id}:{}}}));let _=await t.mutateAsync({source:{kind:l.GL.Session,name:d,connection:e,from:{databaseName:c,tableName:u},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceSourceId:j.id,traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body"}});await Promise.all([...b&&f?[s.mutateAsync({source:{...f,sessionSourceId:_.id,traceSourceId:j.id,...v&&y?{metricSourceId:y.id}:{}}})]:[],s.mutateAsync({source:{...j,...b&&f?{logSourceId:f.id}:{},...v&&y?{metricSourceId:y.id}:{},sessionSourceId:_.id}})])}let w=(0,a.memo)(function({requireSource:e=!0}){let t=(0,v.Kh)(),{data:s}=(0,b.oE)(),{data:w}=(0,f.ZY)(),E=w?.length===0?"connection":s?.length===0&&e?"auto-detect":void 0,[C,k]=(0,a.useState)(void 0);(0,a.useEffect)(()=>{null!=E&&null==C&&k(E)},[E,C]),(0,a.useEffect)(()=>{("auto-detect"===C||"source"===C)&&s&&s.length>0&&k("closed")},[C,s]);let N=(0,b.nd)(),A=(0,f.Ir)(),T=(0,b.sr)(),$=(0,b.YI)(),z=(0,y.Ge)(),[I,L]=(0,a.useState)(!1),[M,R]=(0,a.useState)(!1),[D,P]=(0,a.useState)([]),[O,F]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!g.Ju||"connection"!==C||w?.length!==0||O)return;F(!0);let e=window.location.origin;new r.aP({host:e,username:"default",password:""}).query({query:"SELECT 1",shouldSkipApplySettings:!0}).then(t=>{t.json().then(()=>{A.mutate({connection:{name:"Default",host:e,username:"default",password:""}},{onSuccess:()=>{k("auto-detect")}})})}).catch(()=>{})},[C,w,O,A]);let V=(0,a.useCallback)(async e=>{try{L(!0),R(!0);let t=await z.getOtelTables({connectionId:e});if(!t)return void k("source");let s=[];if(t.tables.logs){let n=await (0,b.Ys)({databaseName:t.database,tableName:t.tables.logs,connectionId:e,metadata:z});if(null!=n.timestampValueExpression){let a=await N.mutateAsync({source:{kind:l.GL.Log,name:"Logs",connection:e,from:{databaseName:t.database,tableName:t.tables.logs},...n,timestampValueExpression:n.timestampValueExpression}});s.push(a)}else console.error("Log source was found but missing required fields",n)}if(t.tables.traces){let n=await (0,b.Ys)({databaseName:t.database,tableName:t.tables.traces,connectionId:e,metadata:z});if(null!=n.timestampValueExpression){let a=await N.mutateAsync({source:{kind:l.GL.Trace,name:"Traces",connection:e,from:{databaseName:t.database,tableName:t.tables.traces},...n,timestampValueExpression:n.timestampValueExpression}});s.push(a)}else console.error("Trace source was found but missing required fields",n)}if(Object.values(t.tables.metrics).some(e=>null!=e)){let n={[l.SX.Gauge]:"",[l.SX.Histogram]:"",[l.SX.Sum]:"",[l.SX.Summary]:"",[l.SX.ExponentialHistogram]:""};t.tables.metrics.gauge&&(n[l.SX.Gauge]=t.tables.metrics.gauge),t.tables.metrics.histogram&&(n[l.SX.Histogram]=t.tables.metrics.histogram),t.tables.metrics.sum&&(n[l.SX.Sum]=t.tables.metrics.sum),t.tables.metrics.summary&&(n[l.SX.Summary]=t.tables.metrics.summary),t.tables.metrics.expHistogram&&(n[l.SX.ExponentialHistogram]=t.tables.metrics.expHistogram);let a=await N.mutateAsync({source:{kind:l.GL.Metric,name:"Metrics",connection:e,from:{databaseName:t.database,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:n,resourceAttributesExpression:"ResourceAttributes"}});s.push(a)}if(t.tables.sessions){let n=await (0,b.Ys)({databaseName:t.database,tableName:t.tables.sessions,connectionId:e,metadata:z}),a=s.find(e=>e.kind===l.GL.Trace);if(null!=n.timestampValueExpression&&null!=a){let r=await N.mutateAsync({source:{kind:l.GL.Session,name:"Sessions",connection:e,from:{databaseName:t.database,tableName:t.tables.sessions},...n,timestampValueExpression:n.timestampValueExpression,traceSourceId:a.id}});s.push(r)}else console.error("Session source was found but missing required fields",n)}if(0===s.length){console.error("No sources created due to missing required fields"),k("source");return}let n=s.find(e=>e.kind===l.GL.Log),a=s.find(e=>e.kind===l.GL.Trace),r=s.find(e=>e.kind===l.GL.Metric),i=s.find(e=>e.kind===l.GL.Session),o=[];n&&o.push(T.mutateAsync({source:{...n,...a?{traceSourceId:a.id}:{},...r?{metricSourceId:r.id}:{},...i?{sessionSourceId:i.id}:{}}})),a&&o.push(T.mutateAsync({source:{...a,...n?{logSourceId:n.id}:{},...r?{metricSourceId:r.id}:{},...i?{sessionSourceId:i.id}:{}}})),await Promise.all(o),P(s),h.$e.show({title:"Success",message:`Automatically detected and created ${s.length} source${s.length>1?"s":""}.`}),k("closed")}catch(e){console.error("Error auto-detecting sources:",e),h.$e.show({color:"red",title:"Error",message:"Failed to auto-detect telemetry sources. Please set up manually."}),k("source")}finally{L(!1)}},[z,N,T,k,P]);(0,a.useEffect)(()=>{"auto-detect"===C&&s?.length===0&&w&&w.length>0&&!1===I&&!1===M&&V(w[0].id)},[C,w,V,I,s,M]);let B=(0,a.useCallback)(async()=>{if(!g.Ju)try{if(s)for(let e of s)"local"===e.connection&&e.name.startsWith("Demo")&&"otel_v2"!==e.from.databaseName&&await $.mutateAsync({id:e.id});let e="";await A.mutateAsync({connection:{name:"Demo",host:"https://sql-clickhouse.clickhouse.com",username:"otel_demo",password:""}},{onSuccess(t){e=t.id},onError(e){console.error("Failed to create demo connection: ",e)}}),await S({connectionId:e,createConnectionMutation:A,createSourceMutation:N,deleteSourceMutation:$,logSourceDatabaseName:"otel_v2",logSourceName:"Demo Logs",logSourceTableName:"otel_logs",metricsSourceDatabaseName:"otel_v2",metricsSourceName:"Demo Metrics",sessionSourceDatabaseName:"otel_v2",sessionSourceName:"Demo Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_v2",traceSourceName:"Demo Traces",traceSourceTableName:"otel_traces",traceSourceMaterializedViews:[{databaseName:"otel_v2",tableName:"otel_traces_1m",dimensionColumns:"ServiceName, StatusCode",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"}]},{databaseName:"otel_v2",tableName:"otel_traces_1m_v2",dimensionColumns:"ServiceName, SpanName, SpanKind",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"},{mvColumn:"quantile__Duration",aggFn:"quantile",sourceColumn:"Duration"}]}],updateSourceMutation:T}),await S({connectionId:e,createConnectionMutation:A,createSourceMutation:N,deleteSourceMutation:$,sessionSourceDatabaseName:"otel_clickpy",sessionSourceName:"ClickPy Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_clickpy",traceSourceName:"ClickPy Traces",traceSourceTableName:"otel_traces",traceSourceHighlightedTraceAttributes:[{sqlExpression:"if((SpanAttributes['http.route']) LIKE '%dashboard%', concat('https://clickpy.clickhouse.com', path(SpanAttributes['http.target'])), '')",alias:"clickpy_link"}],updateSourceMutation:T}),h.$e.show({title:"Success",message:`Connected to ${t} demo server.`}),k("closed")}catch(e){console.error(e),h.$e.show({color:"red",title:"Error",message:`Could not connect to the ${t} demo server, please try again later.`})}},[t,N,A,T,$,s]);return(0,n.jsxs)(i.a,{"data-testid":"onboarding-modal",opened:null!=C&&"closed"!==C,onClose:()=>{},title:`Welcome to ${t}`,size:"xl",withCloseButton:!1,children:["connection"===C&&null!=w&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.E,{size:"sm",mb:"md",children:"Lets set up your connection to ClickHouse"}),0===w.length?(0,n.jsx)(x.B,{connection:{id:"",name:"Default",host:g.Ju?window.location.origin:"http://localhost:8123",username:"default",password:""},onSave:()=>{M?k("source"):k("auto-detect")},isNew:!0}):(0,n.jsx)(x.B,{connection:w[0],isNew:!1,onSave:()=>{M?k("source"):k("auto-detect")},showCancelButton:!1,showDeleteButton:!1}),!g.VO&&(0,n.jsx)(o.E,{size:"xs",mt:"md",children:"You can always add and edit connections later."}),!g.Ju&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.c,{label:"OR",my:"md"}),(0,n.jsx)(d.$,{"data-testid":"demo-server-button",variant:"secondary",w:"100%",onClick:B,children:"Connect to Demo Server"})]})]}),"auto-detect"===C&&(0,n.jsx)(n.Fragment,{children:I?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,n.jsx)(m.a,{size:"md",mb:"md"}),(0,n.jsx)(o.E,{size:"sm",c:"dimmed",mb:"md",children:"Detecting available tables..."}),(0,n.jsx)(d.$,{variant:"subtle",size:"xs",onClick:()=>{L(!1),k("source")},children:"Skip and setup manually"})]})}):D.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.$,{variant:"subtle",onClick:()=>k("connection"),p:"xs",mb:"md",children:[(0,n.jsx)(p.A,{size:14,className:"me-2"})," Back"]}),(0,n.jsxs)(o.E,{size:"sm",mb:"md",children:["We automatically detected and created"," ",D.length," source",D.length>1?"s":""," from your connection. You can review, edit, or continue."]}),(0,n.jsx)(_.v,{withCard:!1,variant:"default",showEmptyState:!1}),(0,n.jsxs)(u.s,{justify:"space-between",mt:"md",children:[(0,n.jsx)(d.$,{variant:"subtle",onClick:()=>{k("source")},children:"Add more sources"}),(0,n.jsx)(d.$,{variant:"primary",onClick:()=>{k("closed")},children:"Continue"})]})]}):(0,n.jsxs)(u.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,n.jsx)(o.E,{size:"sm",c:"dimmed",mb:"md",children:"No OTel tables detected automatically, please setup sources manually."}),(0,n.jsx)(d.$,{variant:"primary",onClick:()=>{k("source")},children:"Continue"})]})}),"source"===C&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.$,{variant:"subtle",onClick:()=>k("connection"),p:"xs",mb:"md",children:[(0,n.jsx)(p.A,{size:14,className:"me-2"})," Back"]}),(0,n.jsx)(o.E,{size:"sm",mb:"md",children:"Lets set up a source table to query telemetry from."}),(0,n.jsx)(j.Eb,{isNew:!0,defaultName:"Logs",onCreate:()=>{k("closed")}}),(0,n.jsx)(o.E,{size:"xs",mt:"lg",children:"You can always add and edit sources later."})]})]})})},65081:(e,t,s)=>{"use strict";s.d(t,{z:()=>D});var n=s(6029),a=s(75155),r=s(55729),l=s(81278),i=s.n(l),o=s(67549),c=s(83595),d=s(60449),u=s.n(d),m=s(8737),h=s(56513),p=s(3635),x=s(96061),g=s(25062),f=s(60481),y=s(22623),b=s(43517),v=s(39785),j=s(60665),_=s(24602),S=s(95316),w=s(90515),E=s(9385),C=s(41279),k=s(9841),N=s(6723),A=s(23195),T=s(45172),$=s(26355),z=s(92917),I=s(50374);function L(e,t,s="JSONExtractString"){let n=e.slice(t.length);if(0===n.length)return null;let a=t[t.length-1],r=n.map(e=>`'${e}'`).join(", ");return`${s}(${a}, ${r})`}let M=(0,c.tG)("hdx_json_viewer_options",{normallyExpanded:!0,lineWrap:!0,tabulate:!0,filterBlanks:!1});function R(){let e,t,s,r,l,i,c,d,u,x,g,f,y,b,v,j,E=(0,a.c)(39),[C,k]=(0,o.fp)(M);return E[0]!==C||E[1]!==k?(e=()=>k({...C,lineWrap:!C.lineWrap}),E[0]=C,E[1]=k,E[2]=e):e=E[2],E[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(_.A,{size:14}),E[3]=t):t=E[3],E[4]!==e?(s=(0,n.jsx)(m.N,{color:"gray",onClick:e,children:t}),E[4]=e,E[5]=s):s=E[5],E[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(h.W.Target,{children:(0,n.jsx)(m.N,{children:(0,n.jsx)(S.A,{size:14})})}),E[6]=r):r=E[6],E[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)(h.W.Label,{lh:1,py:6,children:"Properties view options"}),E[7]=l):l=E[7],E[8]!==C||E[9]!==k?(i=()=>k({...C,normallyExpanded:!C.normallyExpanded}),E[8]=C,E[9]=k,E[10]=i):i=E[10],E[11]!==C.normallyExpanded?(c=C.normallyExpanded?(0,n.jsx)(w.A,{size:14,className:"ps-2"}):null,E[11]=C.normallyExpanded,E[12]=c):c=E[12],E[13]!==i||E[14]!==c?(d=(0,n.jsx)(h.W.Item,{onClick:i,lh:"1",py:8,rightSection:c,children:"Expand all properties"}),E[13]=i,E[14]=c,E[15]=d):d=E[15],E[16]!==C.tabulate?(u=C.tabulate?(0,n.jsx)(w.A,{size:14,className:"ps-2"}):null,E[16]=C.tabulate,E[17]=u):u=E[17],E[18]!==C||E[19]!==k?(x=()=>k({...C,tabulate:!C.tabulate}),E[18]=C,E[19]=k,E[20]=x):x=E[20],E[21]!==u||E[22]!==x?(g=(0,n.jsx)(h.W.Item,{lh:"1",py:8,rightSection:u,onClick:x,children:"Tabulate"}),E[21]=u,E[22]=x,E[23]=g):g=E[23],E[24]!==C.filterBlanks?(f=C.filterBlanks?(0,n.jsx)(w.A,{size:14,className:"ps-2"}):null,E[24]=C.filterBlanks,E[25]=f):f=E[25],E[26]!==C||E[27]!==k?(y=()=>k({...C,filterBlanks:!C.filterBlanks}),E[26]=C,E[27]=k,E[28]=y):y=E[28],E[29]!==f||E[30]!==y?(b=(0,n.jsx)(h.W.Item,{lh:"1",py:8,rightSection:f,onClick:y,children:"Hide blank values"}),E[29]=f,E[30]=y,E[31]=b):b=E[31],E[32]!==g||E[33]!==b||E[34]!==d?(v=(0,n.jsxs)(h.W,{width:240,withinPortal:!1,children:[r,(0,n.jsxs)(h.W.Dropdown,{children:[l,d,g,b]})]}),E[32]=g,E[33]=b,E[34]=d,E[35]=v):v=E[35],E[36]!==v||E[37]!==s?(j=(0,n.jsxs)(p.Y,{children:[s,v]}),E[36]=v,E[37]=s,E[38]=j):j=E[38],j}function D(e){let t,s,l,c,d,m,h,_,S,w,D,O,F=(0,a.c)(31),{data:V,jsonColumns:B}=e;F[0]!==B?(t=void 0===B?[]:B,F[0]=B,F[1]=t):t=F[1];let W=t,{onPropertyAddClick:H,generateSearchUrl:q,generateChartUrl:X,displayedColumns:Y,toggleColumn:J}=(0,r.useContext)(I.D),[K,G]=(0,r.useState)(""),[Z]=(0,v.o)(K,100),U=(0,o.md)(M);e:{let e;if(!V){s=null;break e}if(F[2]!==V||F[3]!==Z||F[4]!==U.filterBlanks){let t=Object.fromEntries(Object.entries(V).filter(P));U.filterBlanks&&(t=function e(t){if(null!==t&&""!==t){if(Array.isArray(t)){let s=t.map(e).filter(e=>void 0!==e);return s.length>0?s:void 0}if("object"==typeof t){let s={};for(let[n,a]of Object.entries(t)){let t=e(a);void 0!==t&&(s[n]=t)}return Object.keys(s).length>0?s:void 0}return t}}(t)),e=function e(t,s){if("object"!=typeof t||null===t||""===s)return t;let n={};for(let[a,r]of Object.entries(t))if(null!==r&&((a.toLowerCase().includes(s.toLowerCase())||"string"==typeof r&&r.toLowerCase().includes(s.toLowerCase()))&&(n[a]=r),"object"==typeof r)){let t=e(r,s);Object.keys(t).length>0&&(n[a]=t)}return n}(t,Z),F[2]=V,F[3]=Z,F[4]=U.filterBlanks,F[5]=e}else e=F[5];s=e}let Q=s;F[6]!==Y||F[7]!==X||F[8]!==q||F[9]!==W||F[10]!==H||F[11]!==Q||F[12]!==J?(l=e=>{let{keyPath:t,value:s,isInParsedJson:a,parsedJsonRootPath:r}=e,l=[],o=(0,z.uc)(t,W),c=t.length>0&&W?.includes(t[0]);if(null!=H&&"string"==typeof s&&s&&"Timestamp"!=o&&"TimestampTime"!=o&&l.push({key:"add-to-search",label:(0,n.jsxs)(p.Y,{gap:2,children:[(0,n.jsx)(E.A,{size:14}),"Add to Filters"]}),title:"Add to Filters",onClick:()=>{let e;if(a&&r){let s=L(t,r);e=s||(c?`toString(${o})`:o)}else e=c?`toString(${o})`:o;H(e,s),j.$e.show({color:"green",message:`Added "${o} = ${s}" to filters`})}}),q&&"object"!=typeof s&&l.push({key:"search",label:(0,n.jsxs)(p.Y,{gap:2,children:[(0,n.jsx)(C.A,{size:14}),"Search"]}),title:"Search for this value only",onClick:()=>{let e=o;if(a&&r){let n="JSONExtractString";"number"==typeof s?n="JSONExtractFloat":"boolean"==typeof s&&(n="JSONExtractBool");let a=L(t,r,n);a&&(e=a)}let n=`${e} = ${"string"==typeof s?`'${s}'`:s}`;("Timestamp"==e||"TimestampTime"==e)&&(n=`${e} = parseDateTime64BestEffort('${s}', 9)`),i().push(q({where:n,whereLanguage:"sql"}))}}),X&&"number"==typeof s&&l.push({key:"chart",label:(0,n.jsx)(k.A,{size:14}),title:"Chart",onClick:()=>{let e=o;if(a&&r){let s=L(t,r);s&&(e=s)}i().push(X({aggFn:"avg",field:e,groupBy:[]}))}}),J&&"object"!=typeof s){let e=o;if(a&&r){let s=L(t,r);s&&(e=s)}let s=Y?.includes(e);l.push({key:"toggle-column",label:s?(0,n.jsxs)(p.Y,{gap:2,children:[(0,n.jsx)(N.A,{size:14}),"Column"]}):(0,n.jsxs)(p.Y,{gap:2,children:[(0,n.jsx)(A.A,{size:14}),"Column"]}),title:s?`Remove ${o} column from results table`:`Add ${o} column to results table`,onClick:()=>{J(e),j.$e.show({color:"green",message:`Column "${o}" ${s?"removed from":"added to"} results table`})}})}return"object"==typeof s?l.push({key:"copy-object",label:"Copy Object",onClick:()=>{let e;e=a&&r?s:0===t.length?Q:u()(Q,t),window.navigator.clipboard.writeText(JSON.stringify(e,null,2)),j.$e.show({color:"green",message:"Copied object to clipboard"})}}):l.push({key:"copy-value",label:(0,n.jsxs)(p.Y,{gap:2,children:[(0,n.jsx)(T.A,{size:14}),"Copy Value"]}),onClick:()=>{window.navigator.clipboard.writeText("string"==typeof s?s:JSON.stringify(s,null,2)),j.$e.show({color:"green",message:"Value copied to clipboard"})}}),l},F[6]=Y,F[7]=X,F[8]=q,F[9]=W,F[10]=H,F[11]=Q,F[12]=J,F[13]=l):l=F[13];let ee=l;return F[14]===Symbol.for("react.memo_cache_sentinel")?(c=e=>G(e.currentTarget.value),d=(0,n.jsx)(C.A,{size:16}),F[14]=c,F[15]=d):(c=F[14],d=F[15]),F[16]!==K?(m=(0,n.jsx)(x.p,{size:"xs",w:"100%",maw:"400px",placeholder:"Search properties by key or value",value:K,onChange:c,leftSection:d}),h=K&&(0,n.jsx)(g.$,{variant:"secondary",size:"xs",onClick:()=>G(""),children:"Clear"}),F[16]=K,F[17]=m,F[18]=h):(m=F[17],h=F[18]),F[19]===Symbol.for("react.memo_cache_sentinel")?(S=(0,n.jsx)("div",{className:"flex-grow-1"}),_=(0,n.jsx)(R,{}),F[19]=_,F[20]=S):(_=F[19],S=F[20]),F[21]!==m||F[22]!==h?(w=(0,n.jsx)(f.a,{py:"xs",children:(0,n.jsxs)(p.Y,{gap:"xs",children:[m,h,S,_]})}),F[21]=m,F[22]=h,F[23]=w):w=F[23],F[24]!==ee||F[25]!==U||F[26]!==Q?(D=(0,n.jsx)(y.t,{bg:"transparent",mt:"sm",children:null!=Q?(0,n.jsx)($.A,{data:Q,getLineActions:ee,...U}):(0,n.jsx)(b.E,{children:"No data"})}),F[24]=ee,F[25]=U,F[26]=Q,F[27]=D):D=F[27],F[28]!==w||F[29]!==D?(O=(0,n.jsxs)("div",{className:"flex-grow-1 overflow-auto",children:[w,D]}),F[28]=w,F[29]=D,F[30]=O):O=F[30],O}function P(e){return!e[0].startsWith("__hdx_")}},65723:e=>{e.exports={container:"HyperJson_container__GNwuL",withTabulate:"HyperJson_withTabulate__MzU_L",key:"HyperJson_key__AQ6QF",withLineWrap:"HyperJson_withLineWrap__gfDDi",valueContainer:"HyperJson_valueContainer__Ui_5y",string:"HyperJson_string__vkc96",treeNode:"HyperJson_treeNode__bDzsg",line:"HyperJson_line__n3Ltu",lineMenu:"HyperJson_lineMenu__Sg84e",expanded:"HyperJson_expanded__gHv9Z",object:"HyperJson_object__ChLzl",array:"HyperJson_array__rJBNC",expandable:"HyperJson_expandable__futZ8",lineMenuBtn:"HyperJson_lineMenuBtn__QKgME",clickable:"HyperJson_clickable__UNRbd",value:"HyperJson_value__aSXTw",hoverable:"HyperJson_hoverable__oWIY9",hoverContent:"HyperJson_hoverContent__2Ir2x",jsonBtn:"HyperJson_jsonBtn__T1ObP",keyContainer:"HyperJson_keyContainer___KqED",number:"HyperJson_number__VFmbX",boolean:"HyperJson_boolean__KkQsQ",expandMoreProps:"HyperJson_expandMoreProps__uHkwZ"}},65952:e=>{e.exports={tagWrapper:"Tags_tagWrapper__rCeVe"}},66773:e=>{e.exports={panel:"LogSidePanel_panel__JgveL",panelDragBar:"LogSidePanel_panelDragBar__sFi62",panelHeader:"LogSidePanel_panelHeader__Fl4jA",panelDetails:"LogSidePanel_panelDetails__wGBLr",panelContent:"LogSidePanel_panelContent__Olcws",severityChip:"LogSidePanel_severityChip__hIK7I",loadingState:"LogSidePanel_loadingState__b5y0C",panelSectionWrapper:"LogSidePanel_panelSectionWrapper__gOBKh",panelSectionWrapperTitle:"LogSidePanel_panelSectionWrapperTitle__eBMsG",kbdShortcuts:"LogSidePanel_kbdShortcuts__ogLDt",kbd:"LogSidePanel_kbd__gmxFq",kbdDivider:"LogSidePanel_kbdDivider____Gi4",lineContext:"LogSidePanel_lineContext__rCVjx",lineContextCurrentLine:"LogSidePanel_lineContextCurrentLine__K3t4J",lineContextLineNo:"LogSidePanel_lineContextLineNo__LuYmr",emptyMessage:"LogSidePanel_emptyMessage__6fbwp",traceTimelineLabel:"LogSidePanel_traceTimelineLabel___WCaD",traceTimelineLabelHighlighted:"LogSidePanel_traceTimelineLabelHighlighted__elopt",stacktraceRowInteractive:"LogSidePanel_stacktraceRowInteractive__i18zL"}},67398:e=>{e.exports={searchingHeader:"SearchInputV2_searchingHeader__n6jUL",searchingDescription:"SearchInputV2_searchingDescription__t0nLB",examplesLabel:"SearchInputV2_examplesLabel__xqeIs",exampleRow:"SearchInputV2_exampleRow__Soa_C",exampleLabel:"SearchInputV2_exampleLabel__5Xyqr",exampleCode:"SearchInputV2_exampleCode__frAb_",docsLink:"SearchInputV2_docsLink__3JECv"}},68344:(e,t,s)=>{"use strict";s.d(t,{t:()=>u});var n=s(6029),a=s(75155);s(55729);var r=s(7913),l=s(39603),i=s(34834),o=s(43517),c=s(25062),d=s(96556);let u=e=>{let t,s,u=(0,a.c)(8),{children:h,onRetry:p,allowReset:x,showErrorMessage:g,message:f}=e,y=x||!!p;return u[0]!==f||u[1]!==p||u[2]!==g||u[3]!==y?(t=e=>{let{error:t,resetErrorBoundary:s}=e;return(0,n.jsx)(l.F,{p:"xs",color:"red",icon:(0,n.jsx)(d.A,{size:16}),title:f||"Something went wrong",children:(g||y)&&(0,n.jsxs)(i.B,{align:"flex-start",gap:"xs",children:[g&&(0,n.jsx)(o.E,{size:"xs",children:t.message}),y&&(0,n.jsx)(c.$,{onClick:p||s,size:"compact-xs",variant:"danger",children:"Retry"})]})})},u[0]=f,u[1]=p,u[2]=g,u[3]=y,u[4]=t):t=u[4],u[5]!==h||u[6]!==t?(s=(0,n.jsx)(r.ErrorBoundary,{onError:m,fallbackRender:t,children:h}),u[5]=h,u[6]=t,u[7]=s):s=u[7],s};function m(e){console.error(e)}},70727:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>u,C2:()=>d,ZO:()=>c});var n=s(55729),a=s(6033),r=s.n(a),l=s(80519),i=s.n(l),o=s(35467);let c={ID:"__hyperdx_id",ALIAS_WITH:"__hyperdx_alias_with"};function d(e){return e?Object.entries(e).filter(([,e])=>null!=e&&""!==e.trim()).map(([e,t])=>({name:e,sql:{sql:t,params:{}},isSubquery:!1})):[]}function u({meta:e,aliasMap:t}){let s=(0,n.useMemo)(()=>new Map(e?.map(e=>{let s=null!=t?t[e.name]??e.name:e.name;return[e.name,{...e,valueExpr:s,jsType:(0,o.rj)(e.type)}]})),[e,t]),a=(0,n.useMemo)(()=>d(t),[t]);return(0,n.useCallback)(e=>{let{[c.ID]:t,[c.ALIAS_WITH]:n,...l}=e;return{where:Object.entries(l).map(([e,t])=>{let n=s.get(e),a=n?.type,l=n?.jsType,c=n?.valueExpr;if(null==a)throw Error(`Column type not found for ${e}, ${JSON.stringify(s)}`);if(null==c)throw Error(`valueExpr not found for ${e}, ${JSON.stringify(s)}`);switch(l){case o.A2.Date:return i().format("?=parseDateTime64BestEffort(?, 9)",[i().raw(c),t]);case o.A2.Array:case o.A2.Map:return i().format("?=JSONExtract(?, ?)",[i().raw(c),t,a]);case o.A2.Tuple:return i().format("toJSONString(?)=?",[i().raw(c),t]);case o.A2.JSON:return i().format("lower(hex(MD5(toString(?))))=?",[i().raw(c),r()(t).toString()]);case o.A2.Dynamic:if(null==t||"null"===t)return i().format("isNull(??)",[c]);return(t.length>1e3||e.length>1e3)&&console.warn("Search value/object key too large."),i().format("toJSONString(?) = coalesce(toJSONString(JSONExtract(?, 'Dynamic')), toJSONString(?))",[i().raw(c),t,t]);default:if(null==t)return i().format("isNull(?)",[i().raw(c)]);if(t.length>512)return i().format("lower(hex(MD5(leftUTF8(?, 1000))))=?",[i().raw(c),r()(t.substring(0,1e3)).toString()]);return i().format("?=?",[i().raw(c),t])}}).join(" AND "),aliasWith:a}},[s,a])}},72075:(e,t,s)=>{"use strict";s.d(t,{L:()=>x,X:()=>p});var n=s(6029),a=s(75155);s(55729);var r=s(75828),l=s.n(r),i=s(58333),o=s(23474),c=s(79220),d=s(39696),u=s(68593),m=s(34011),h=s.n(m);let p=({data:e=[],columns:t,emptyMessage:s,hideHeader:a,borderless:r,density:i="normal",interactive:o,tableMeta:m})=>{let p=(0,c.N4)({data:e,columns:t,meta:m,getCoreRowModel:(0,d.HT)()});return e.length?(0,n.jsx)("div",{className:l()(h().tableWrapper,{[h().tableBorderless]:r,[h().tableDensityZero]:"zero"===i,[h().tableDensityCompact]:"compact"===i,[h().tableDensityComfortable]:"comfortable"===i,[h().tableInteractive]:o}),children:(0,n.jsxs)("table",{children:[!a&&(0,n.jsx)("thead",{children:p.getHeaderGroups().map(e=>(0,n.jsx)("tr",{children:e.headers.map(e=>(0,n.jsx)("th",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,n.jsx)("tbody",{children:p.getRowModel().rows.map(e=>(0,n.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,n.jsx)("td",{style:{width:e.column.getSize()===u.k?"100%":e.column.getSize()},children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}):(0,n.jsx)("div",{className:h().emptyMessage,children:s})},x=e=>{let t,s,r,l,c=(0,a.c)(12),{onClick:d,title:u,label:m,biIcon:p}=e;return c[0]!==m?(t=m&&(0,n.jsx)("span",{children:m}),c[0]=m,c[1]=t):t=c[1],c[2]!==p?(s="chevron-up"===p&&(0,n.jsx)(i.A,{size:14}),c[2]=p,c[3]=s):s=c[3],c[4]!==p?(r="chevron-down"===p&&(0,n.jsx)(o.A,{size:14}),c[4]=p,c[5]=r):r=c[5],c[6]!==d||c[7]!==t||c[8]!==s||c[9]!==r||c[10]!==u?(l=(0,n.jsxs)("button",{className:h().tableCellButton,title:u,onClick:d,children:[t,s,r]}),c[6]=d,c[7]=t,c[8]=s,c[9]=r,c[10]=u,c[11]=l):l=c[11],l}},74620:e=>{e.exports={tableWrapper:"LogTable_tableWrapper__1X2n1",muted:"LogTable_muted__aIZSq",table:"LogTable_table__l63_F",tableHead:"LogTable_tableHead__sTgaD",tableRow:"LogTable_tableRow__7BXPl",tableRow__selected:"LogTable_tableRow__selected__DoaNL",rowButtons:"LogTable_rowButtons__XTh2c",rowContentButton:"LogTable_rowContentButton__fjkQI",expandButton:"LogTable_expandButton__nKsH0",expandedRowContent:"LogTable_expandedRowContent__Ps6mn",expanded:"LogTable_expanded___w9XA",expandButtonSeparator:"LogTable_expandButtonSeparator__lYPgm",isWrapped:"LogTable_isWrapped__ksgah",isTruncated:"LogTable_isTruncated__jXz22",iconActionButton:"LogTable_iconActionButton__hO7Fo",copied:"LogTable_copied__wZME1",fieldTextContainer:"LogTable_fieldTextContainer__4Dj7Q",fieldText:"LogTable_fieldText__zVjaq",chart:"LogTable_chart__8kFaD",truncated:"LogTable_truncated__Hv6oN",wrapped:"LogTable_wrapped__Dz8eR",fieldTextPopover:"LogTable_fieldTextPopover__dygEB"}},75359:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var n,a=s(6029),r=s(75155),l=s(55729),i=s(41038),o=s(81973),c=s(96958),d=s(92917),u=s(76539),m=s(37901),h=s(26837),p=s(50374),x=s(46061);function g(e){let t,s,n,c,d,m,h,g,f,b=(0,r.c)(47),{sourceId:v,config:j,onError:_,onScroll:S,context:w,onExpandedRowsChange:E,denoiseResults:C,collapseAllRows:k,isLive:N,enabled:A,isNestedPanel:T,breadcrumbPath:$,onSidebarOpen:z,onSortingChange:I,initialSortBy:L,variant:M}=e;b[0]!==v?(t={id:v},b[0]=v,b[1]=t):t=b[1];let{data:R}=(0,o.Fo)(t),[D,P]=(0,i.ZA)("rowWhere"),[O,F]=(0,i.ZA)("rowSource");b[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],b[2]=s):s=b[2];let[V,B]=(0,l.useState)(s),{setContextRowId:W,setContextRowSource:H}=(0,u.g)();b[3]!==z||b[4]!==P||b[5]!==F||b[6]!==v?(n=e=>{P(e.where),B(e.aliasWith),F(v),z?.(e.where)},b[3]=z,b[4]=P,b[5]=F,b[6]=v,b[7]=n):n=b[7];let q=n;b[8]!==T||b[9]!==W||b[10]!==H||b[11]!==P||b[12]!==F?(c=()=>{P(null),F(null),T||(W(null),H(null))},b[8]=T,b[9]=W,b[10]=H,b[11]=P,b[12]=F,b[13]=c):c=b[13];let X=c;b[14]!==R?(d=e=>R?(0,a.jsx)(y,{source:R,rowId:e.id,aliasWith:e.aliasWith}):(0,a.jsx)("div",{className:"p-3 text-muted",children:"Loading..."}),b[14]=R,b[15]=d):d=b[15];let Y=d;b[16]!==w?(m=w??{},b[16]=w,b[17]=m):m=b[17],b[18]!==V||b[19]!==$||b[20]!==T||b[21]!==X||b[22]!==D||b[23]!==O||b[24]!==R||b[25]!==v?(h=R&&(O===v||!O)&&(0,a.jsx)(p.A,{source:R,rowId:D??void 0,aliasWith:V,isNestedPanel:T,breadcrumbPath:$,onClose:X}),b[18]=V,b[19]=$,b[20]=T,b[21]=X,b[22]=D,b[23]=O,b[24]=R,b[25]=v,b[26]=h):h=b[26];let J=D??void 0,K=N??!0;return b[27]!==k||b[28]!==j||b[29]!==C||b[30]!==A||b[31]!==L||b[32]!==_||b[33]!==E||b[34]!==q||b[35]!==S||b[36]!==I||b[37]!==Y||b[38]!==v||b[39]!==J||b[40]!==K||b[41]!==M?(g=(0,a.jsx)(x.rD,{config:j,sourceId:v,onRowDetailsClick:q,highlightedLineId:J,enabled:A,isLive:K,queryKeyPrefix:"dbSqlRowTable",onSortingChange:I,denoiseResults:C,initialSortBy:L,renderRowDetails:Y,onScroll:S,onError:_,onExpandedRowsChange:E,collapseAllRows:k,variant:M}),b[27]=k,b[28]=j,b[29]=C,b[30]=A,b[31]=L,b[32]=_,b[33]=E,b[34]=q,b[35]=S,b[36]=I,b[37]=Y,b[38]=v,b[39]=J,b[40]=K,b[41]=M,b[42]=g):g=b[42],b[43]!==g||b[44]!==m||b[45]!==h?(f=(0,a.jsxs)(p.D.Provider,{value:m,children:[h,g]}),b[43]=g,b[44]=m,b[45]=h,b[46]=f):f=b[46],f}var f=((n=f||{}).Overview="overview",n.ColumnValues="columnValues",n);function y(e){let t,s,n,l,i,o,u=(0,r.c)(20),{source:p,rowId:x,aliasWith:g}=e,[f,y]=(0,d.Mj)("hdx-expanded-row-default-tab","columnValues");return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{text:"Overview",value:"overview"},{text:"Column Values",value:"columnValues"}],u[0]=t):t=u[0],u[1]!==f||u[2]!==y?(s=(0,a.jsx)("div",{className:"px-3 pt-2 position-relative",children:(0,a.jsx)(c.A,{className:"fs-8",items:t,activeItem:f,onClick:y})}),u[1]=f,u[2]=y,u[3]=s):s=u[3],u[4]!==f||u[5]!==g||u[6]!==x||u[7]!==p?(n="overview"===f&&(0,a.jsx)("div",{className:"inline-overview-panel",children:(0,a.jsx)(h.W,{source:p,rowId:x,aliasWith:g})}),u[4]=f,u[5]=g,u[6]=x,u[7]=p,u[8]=n):n=u[8],u[9]!==f||u[10]!==g||u[11]!==x||u[12]!==p?(l="columnValues"===f&&(0,a.jsx)(m.dD,{source:p,rowId:x,aliasWith:g}),u[9]=f,u[10]=g,u[11]=x,u[12]=p,u[13]=l):l=u[13],u[14]!==n||u[15]!==l?(i=(0,a.jsxs)("div",{children:[n,l]}),u[14]=n,u[15]=l,u[16]=i):i=u[16],u[17]!==s||u[18]!==i?(o=(0,a.jsxs)("div",{className:"position-relative",children:[s,i]}),u[17]=s,u[18]=i,u[19]=o):o=u[19],o}},76539:(e,t,s)=>{"use strict";s.d(t,{A:()=>E,g:()=>w});var n,a=s(6029),r=s(75155),l=s(55729),i=s(67264),o=s.n(i),c=s(41038),d=s(1909),u=s(3145),m=s(78253),h=s(3635),p=s(90124),x=s(43085),g=s(39785),f=s(17273),y=s(81973),b=s(92917),v=s(37901),j=s(50374),_=s(46061),S=((n=S||{}).All="all",n.Custom="custom",n.Host="host",n.Node="k8s.node.name",n.Pod="k8s.pod.name",n.Service="service",n);function w(e){let t,s,n,a=(0,r.c)(11),i=(0,c.ZA)("contextRowId",c.tU),o=(0,c.ZA)("contextRowSource",c.tU);a[0]!==i||a[1]!==o?(t={contextRowId:i,contextRowSource:o},a[0]=i,a[1]=o,a[2]=t):t=a[2];let d=t,u=(0,l.useState)(null),m=(0,l.useState)(null);a[3]!==u||a[4]!==m?(s={contextRowId:u,contextRowSource:m},a[3]=u,a[4]=m,a[5]=s):s=a[5];let h=s,p=e?h:d;return a[6]!==p.contextRowId[0]||a[7]!==p.contextRowId[1]||a[8]!==p.contextRowSource[0]||a[9]!==p.contextRowSource[1]?(n={contextRowId:p.contextRowId[0],contextRowSource:p.contextRowSource[0],setContextRowId:p.contextRowId[1],setContextRowSource:p.contextRowSource[1]},a[6]=p.contextRowId[0],a[7]=p.contextRowId[1],a[8]=p.contextRowSource[0],a[9]=p.contextRowSource[1],a[10]=n):n=a[10],n}function E(e){let t,s,n,i,c,S,E,C,k,N,A,T,$,z,I,L,M,R,D,P,O,F,V,B,W,H,q,X,Y=(0,r.c)(98),{source:J,dbSqlRowTableConfig:K,rowData:G,rowId:Z,breadcrumbPath:U,onBreadcrumbClick:Q}=e;Y[0]!==U?(t=void 0===U?[]:U,Y[0]=U,Y[1]=t):t=Y[1];let ee=t,et=G[v.$_.TIMESTAMP];Y[2]!==K?(s=K??{},Y[2]=K,Y[3]=s):s=Y[3];let{whereLanguage:es}=s,en=void 0===es?"lucene":es;Y[4]===Symbol.for("react.memo_cache_sentinel")?(n=o()("30s"),Y[4]=n):n=Y[4];let[ea,er]=(0,l.useState)(n),[el,ei]=(0,l.useState)("all");Y[5]!==en?(i=en??(0,f.S)()??"lucene",Y[5]=en,Y[6]=i):i=Y[6],Y[7]!==i?(c={defaultValues:{where:"",whereLanguage:i}},Y[7]=i,Y[8]=c):c=Y[8];let{control:eo}=(0,d.mN)(c);Y[9]!==eo?(S={control:eo,name:"where"},Y[9]=eo,Y[10]=S):S=Y[10];let ec=(0,d.FH)(S),[ed]=(0,g.o)(ec,1e3),{contextRowId:eu,contextRowSource:em,setContextRowId:eh,setContextRowSource:ep}=w(ee.length>0),ex=em||"";Y[11]!==ex?(E={id:ex},Y[11]=ex,Y[12]=E):E=Y[12];let{data:eg}=(0,y.Fo)(E);Y[13]===Symbol.for("react.memo_cache_sentinel")?(C=[],Y[13]=C):C=Y[13];let[ef,ey]=(0,l.useState)(C);Y[14]!==eh||Y[15]!==ep?(k=()=>{eh(null),ep(null)},Y[14]=eh,Y[15]=ep,Y[16]=k):k=Y[16];let eb=k,{setChildModalOpen:ev}=(0,l.useContext)(j.D);Y[17]!==eh||Y[18]!==ep||Y[19]!==J.id?(N=e=>{eh(e.where),ey(e.aliasWith),ep(J.id)},Y[17]=eh,Y[18]=ep,Y[19]=J.id,Y[20]=N):N=Y[20];let ej=N;Y[21]!==et?(A=new Date(et),Y[21]=et,Y[22]=A):A=Y[22];let e_=A,eS=e_.getTime()-ea/2;Y[23]!==eS?(T=new Date(eS),Y[23]=eS,Y[24]=T):T=Y[24];let ew=e_.getTime()+ea/2;Y[25]!==ew?($=new Date(ew),Y[25]=ew,Y[26]=$):$=Y[26],Y[27]!==T||Y[28]!==$?(z=[T,$],Y[27]=T,Y[28]=$,Y[29]=z):z=Y[29];let eE=z;Y[30]!==G?(I=G[v.$_.RESOURCE_ATTRIBUTES]??{},Y[30]=G,Y[31]=I):I=Y[31];let{"k8s.node.name":eC,"k8s.pod.name":ek,"host.name":eN,"service.name":eA}=I;Y[32]===Symbol.for("react.memo_cache_sentinel")?(L={field:"",value:""},Y[32]=L):L=Y[32];let eT=ed||"";Y[33]!==eT?(M={field:"",value:eT},Y[33]=eT,Y[34]=M):M=Y[34],Y[35]!==eA?(R={field:"service.name",value:eA},Y[35]=eA,Y[36]=R):R=Y[36],Y[37]!==eN?(D={field:"host.name",value:eN},Y[37]=eN,Y[38]=D):D=Y[38],Y[39]!==ek?(P={field:"k8s.pod.name",value:ek},Y[39]=ek,Y[40]=P):P=Y[40],Y[41]!==eC?(O={field:"k8s.node.name",value:eC},Y[41]=eC,Y[42]=O):O=Y[42],Y[43]!==M||Y[44]!==R||Y[45]!==D||Y[46]!==P||Y[47]!==O?(F={all:L,custom:M,service:R,host:D,"k8s.pod.name":P,"k8s.node.name":O},Y[43]=M,Y[44]=R,Y[45]=D,Y[46]=P,Y[47]=O,Y[48]=F):F=Y[48];let e$=F;Y[49]!==e$||Y[50]!==en?(V=e=>{let t="sql"===en,s=e$[e];return"all"===e?s.value:"custom"===e?s.value.trim():(0,b.ji)("ResourceAttributes",s.field,s.value,t)},Y[49]=e$,Y[50]=en,Y[51]=V):V=Y[51];let ez=V;Y[52]!==eN||Y[53]!==eC||Y[54]!==ek||Y[55]!==eA?(B=function(){return[{label:"All",value:"all"},...eA?[{label:"Service",value:"service"}]:[],...eN?[{label:"Host",value:"host"}]:[],...ek?[{label:"Pod",value:"k8s.pod.name"}]:[],...eC?[{label:"Node",value:"k8s.node.name"}]:[],{label:"Custom",value:"custom"}]},Y[52]=eN,Y[53]=eC,Y[54]=ek,Y[55]=eA,Y[56]=B):B=Y[56];let eI=B;e:{let e,t,s;Y[57]!==el||Y[58]!==ez?(e=ez(el),Y[57]=el,Y[58]=ez,Y[59]=e):e=Y[59];let n=e;if(!K){let e,t,s=J.defaultTableSelectExpression||"";Y[60]===Symbol.for("react.memo_cache_sentinel")?(e={limit:200},Y[60]=e):e=Y[60];let a=`${J.timestampValueExpression} DESC`;Y[61]!==eE||Y[62]!==en||Y[63]!==J.connection||Y[64]!==J.from||Y[65]!==J.timestampValueExpression||Y[66]!==s||Y[67]!==a||Y[68]!==n?(t={connection:J.connection,from:J.from,timestampValueExpression:J.timestampValueExpression,select:s,limit:e,orderBy:a,where:n,whereLanguage:en,dateRange:eE},Y[61]=eE,Y[62]=en,Y[63]=J.connection,Y[64]=J.from,Y[65]=J.timestampValueExpression,Y[66]=s,Y[67]=a,Y[68]=n,Y[69]=t):t=Y[69],W=t;break e}Y[70]===Symbol.for("react.memo_cache_sentinel")?(t=[],Y[70]=t):t=Y[70],Y[71]!==K||Y[72]!==eE||Y[73]!==en||Y[74]!==n?(s={...K,where:n,whereLanguage:en,dateRange:eE,filters:t},Y[71]=K,Y[72]=eE,Y[73]=en,Y[74]=n,Y[75]=s):s=Y[75],W=s}let eL=W;return Y[76]!==e$||Y[77]!==eL||Y[78]!==el||Y[79]!==eo||Y[80]!==eI||Y[81]!==ej||Y[82]!==ea||Y[83]!==Z||Y[84]!==ev||Y[85]!==J?(H=eL&&(0,a.jsxs)(m.s,{direction:"column",mih:"0px",style:{flexGrow:1},children:[(0,a.jsxs)(h.Y,{justify:"space-between",p:"sm",children:[(0,a.jsx)(p.I,{size:"xs",data:eI(),value:el,onChange:e=>ei(e)}),"custom"===el&&(0,a.jsx)(f.A,{tableConnection:(0,u.VO)(J),control:eo,name:"where",enableHotkey:!0,size:"xs"}),(0,a.jsx)(p.I,{size:"xs",data:[{label:"100ms",value:o()("100ms").toString()},{label:"500ms",value:o()("500ms").toString()},{label:"1s",value:o()("1s").toString()},{label:"5s",value:o()("5s").toString()},{label:"30s",value:o()("30s").toString()},{label:"1m",value:o()("1m").toString()},{label:"5m",value:o()("5m").toString()},{label:"15m",value:o()("15m").toString()}],value:ea.toString(),onChange:e=>er(Number(e))})]}),(0,a.jsx)(h.Y,{p:"sm",children:(0,a.jsxs)("div",{children:["all"!==el&&(0,a.jsxs)(x.E,{size:"md",variant:"default",children:[el,":",e$[el].value]}),(0,a.jsxs)(x.E,{size:"md",variant:"default",children:["Time range: \xb1",o()(ea/2)]})]})}),(0,a.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,a.jsx)(_.rD,{sourceId:J.id,highlightedLineId:Z,showExpandButton:!1,isLive:!1,config:eL,queryKeyPrefix:"context",onRowDetailsClick:ej,onChildModalOpen:ev})})]}),Y[76]=e$,Y[77]=eL,Y[78]=el,Y[79]=eo,Y[80]=eI,Y[81]=ej,Y[82]=ea,Y[83]=Z,Y[84]=ev,Y[85]=J,Y[86]=H):H=Y[86],Y[87]!==ee||Y[88]!==ef||Y[89]!==eu||Y[90]!==eg||Y[91]!==eb||Y[92]!==Q||Y[93]!==G?(q=eu&&eg&&(0,a.jsx)(j.A,{source:eg,rowId:eu,aliasWith:ef,onClose:eb,isNestedPanel:!0,breadcrumbPath:[...ee,{label:"Surrounding Context",rowData:G}],onBreadcrumbClick:Q}),Y[87]=ee,Y[88]=ef,Y[89]=eu,Y[90]=eg,Y[91]=eb,Y[92]=Q,Y[93]=G,Y[94]=q):q=Y[94],Y[95]!==H||Y[96]!==q?(X=(0,a.jsxs)(a.Fragment,{children:[H,q]}),Y[95]=H,Y[96]=q,Y[97]=X):X=Y[97],X}},76755:e=>{e.exports={filtersPanel:"SearchPage_filtersPanel__RSzmw",textButton:"SearchPage_textButton__bKr4G",filterCheckbox:"SearchPage_filterCheckbox__7aZCJ",filterActions:"SearchPage_filterActions__DIG8F",searchPageContainer:"SearchPage_searchPageContainer__PfX3Y",chevron:"SearchPage_chevron__eBKPl",recentlyMoved:"SearchPage_recentlyMoved___7dIo",highlight:"SearchPage_highlight__F9zRq",searchStatsContainer:"SearchPage_searchStatsContainer__W2ySO",timeChartContainer:"SearchPage_timeChartContainer__Ufski",searchForm:"SearchPage_searchForm__amID0"}},78694:(e,t,s)=>{"use strict";s.d(t,{iV:()=>g,ir:()=>v,$K:()=>f,hF:()=>y,Qx:()=>b});var n=s(6029),a=s(75155),r=s(55729);s(82203);var l=s(75828),i=(s(63085),s(8468)),o=s(20158),c=s(70114),d=s(23474);s(38067),s(26355);s(94720),s(3635);var u=s(72075),m=s(68593);s(7565),s(94364);var h=s(92917),p=s(66773),x=s.n(p);let g=e=>{let t,s,l,i,o,u,m=(0,a.c)(15),{title:h,children:p,initiallyCollapsed:x}=e,[g,f]=r.useState(x??!1);return m[0]!==g?(t=()=>f(!g),s=g?(0,n.jsx)(c.A,{size:14,className:"me-2"}):(0,n.jsx)(d.A,{size:14,className:"me-2"}),m[0]=g,m[1]=t,m[2]=s):(t=m[1],s=m[2]),m[3]!==h?(l=(0,n.jsx)("div",{className:"fs-7",children:h}),m[3]=h,m[4]=l):l=m[4],m[5]!==t||m[6]!==s||m[7]!==l?(i=(0,n.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,l]}),m[5]=t,m[6]=s,m[7]=l,m[8]=i):i=m[8],m[9]!==p||m[10]!==g?(o=g?null:(0,n.jsx)("div",{className:"mb-4",children:p}),m[9]=p,m[10]=g,m[11]=o):o=m[11],m[12]!==i||m[13]!==o?(u=(0,n.jsxs)("div",{className:"my-3",children:[i,o]}),m[12]=i,m[13]=o,m[14]=u):u=m[14],u},f=e=>{let t,s,r=(0,a.c)(5),{children:l,title:i}=e;return r[0]!==i?(t=i&&(0,n.jsx)("div",{className:x().panelSectionWrapperTitle,children:i}),r[0]=i,r[1]=t):t=r[1],r[2]!==l||r[3]!==t?(s=(0,n.jsxs)("div",{className:x().panelSectionWrapper,children:[t,l]}),r[2]=l,r[3]=t,r[4]=s):s=r[4],s};m.k;let y=[{accessorKey:"0",header:"Header",size:260,cell:({row:e})=>(0,n.jsx)("div",{className:"text-truncate",title:e.original[0],children:e.original[0]})},{size:m.k,accessorKey:"1",header:"Value"}],b=[{accessorKey:"label",header:"Label",size:260,cell:({row:e})=>(0,n.jsx)("span",{children:e.original.label})},{size:m.k,accessorKey:"value",header:"Value",cell:({row:e})=>(0,n.jsx)("span",{className:e.original.className,children:e.original.value})}],v=()=>{let e,t,s,r,l,c=(0,a.c)(7),[d,u]=(0,h.Mj)("kbd-shortcuts-dismissed",!1);c[0]!==u?(e=()=>{u(!0)},c[0]=u,c[1]=e):e=c[1];let m=e;return d?null:(c[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(i.u,{className:"me-1",children:"←"}),s=(0,n.jsx)(i.u,{children:"→"}),c[2]=t,c[3]=s):(t=c[2],s=c[3]),c[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,n.jsxs)("div",{children:["Use ",t,s," arrow keys or ",(0,n.jsx)(i.u,{className:"me-1",children:"k"}),(0,n.jsx)(i.u,{children:"j"})," to move through events"]}),(0,n.jsx)("div",{className:x().kbdDivider}),(0,n.jsxs)("div",{children:[(0,n.jsx)(i.u,{children:"ESC"})," to close"]})]}),c[4]=r):r=c[4],c[5]!==m?(l=(0,n.jsx)("div",{className:x().kbdShortcuts,children:(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center ",children:[r,(0,n.jsx)(o.J,{"aria-label":"Hide",onClick:m})]})}),c[5]=m,c[6]=l):l=c[6],l)}},80842:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>sv});var n=s(6029),a=s(75155),r=s(55729),l=s(71024),i=s.n(l),o=s(95669),c=s.n(o),d=s(82203),u=s.n(d),m=s(81278),h=s.n(m),p=s(41038),x=s(1909),g=s(6663),f=s(52789),y=s(35467),b=s(3145),v=s(76089),j=s(82641),_=s(56513),S=s(76013),w=s(43517),E=s(27166),C=s(25062),k=s(62801),N=s(34834),A=s(60481),T=s(3635),$=s(78253),z=s(63085),I=s(38206),L=s(22623),M=s(53061),R=s(48378),D=s(24589),P=s(2489),O=s(289),F=s(78341),V=s(60665),B=s(95316),W=s(28975),H=s(27798),q=s(62118),X=s(74011),Y=s(23195),J=s(28200),K=s(68934),G=s(95352),Z=s(225),U=s(75828),Q=s.n(U),ee=s(8737),et=s(47268),es=s(51564),en=s(45005),ea=s(59029),er=s(94720),el=s(53993),ei=s(64488),eo=s(28282),ec=s(64490),ed=s(94502),eu=s(95009),em=s(45556),eh=s(3562),ep=s(41279),ex=s(58333),eg=s(70114),ef=s(93607),ey=s(85318),eb=s(23474),ev=s(98142),ej=s(78550),e_=s(24885),eS=s(28959),ew=s(81973),eE=s(92917),eC=s(76755),ek=s.n(eC);let eN=e=>{let t,s,l,i,o,c,d,u,m,h,p,x,g,f,y,b,v,j,_=(0,a.c)(72),{name:S,childFilters:E,selectedValues:C,onChange:k,onClearClick:A,onOnlyClick:$,onExcludeClick:I,onPinClick:L,isPinned:M,onFieldPinClick:R,isFieldPinned:D,onLoadMore:P,loadMoreLoading:O,hasLoadedMore:F,isDefaultExpanded:V,"data-testid":B,chartConfig:W,isLive:H}=e;_[0]!==C?(t=void 0===C?{}:C,_[0]=C,_[1]=t):t=_[1];let q=t;_[2]!==q?(s=Object.values(q).reduce(eA,0),_[2]=q,_[3]=s):s=_[3];let X=s,[Y,J]=(0,r.useState)(V??X>0);_[4]===Symbol.for("react.memo_cache_sentinel")?(l={chevron:ek().chevron},_[4]=l):l=_[4];let K=Y?S:null;_[5]!==S?(i=e=>J(e===S),_[5]=S,_[6]=i):i=_[6],_[7]===Symbol.for("react.memo_cache_sentinel")?(o={chevron:"m-0",label:"p-0"},_[7]=o):o=_[7];let G=E.length?"":"opacity-50",Z=S.length>26?0:1500;_[8]!==S?(c=(0,n.jsx)(w.E,{size:"xs",fw:"500",children:S}),_[8]=S,_[9]=c):c=_[9];let U=`{${E.length}}`;if(_[10]!==U?(d=(0,n.jsx)(w.E,{size:"xs",c:"dimmed",children:U}),_[10]=U,_[11]=d):d=_[11],_[12]!==c||_[13]!==d?(u=(0,n.jsxs)(T.Y,{gap:"xs",wrap:"nowrap",flex:"1",children:[c,d]}),_[12]=c,_[13]=d,_[14]=u):u=_[14],_[15]!==S||_[16]!==u||_[17]!==Z?(m=(0,n.jsx)(z.m,{openDelay:Z,label:S,position:"top",withArrow:!0,fz:"xxs",color:"gray",children:u}),_[15]=S,_[16]=u,_[17]=Z,_[18]=m):m=_[18],_[19]!==m||_[20]!==G?(h=(0,n.jsx)("div",{className:ek().filterGroupHeader,children:(0,n.jsx)(en.n.Control,{component:ee.N,flex:"1",p:"0",pr:"xxxs","data-testid":"nested-filter-group-control",classNames:o,className:G,children:m})}),_[19]=m,_[20]=G,_[21]=h):h=_[21],_[22]===Symbol.for("react.memo_cache_sentinel")?(p={content:"pl-3 pt-1 pb-0"},_[22]=p):p=_[22],_[23]!==W||_[24]!==E||_[25]!==F||_[26]!==D||_[27]!==H||_[28]!==M||_[29]!==O||_[30]!==k||_[31]!==A||_[32]!==I||_[33]!==R||_[34]!==P||_[35]!==$||_[36]!==L||_[37]!==q){let e;_[39]!==W||_[40]!==F||_[41]!==D||_[42]!==H||_[43]!==M||_[44]!==O||_[45]!==k||_[46]!==A||_[47]!==I||_[48]!==R||_[49]!==P||_[50]!==$||_[51]!==L||_[52]!==q?(e=e=>{let t=q[e.key]||{included:new Set,excluded:new Set},s=t.included.size+t.excluded.size>0;return(0,n.jsx)(eD,{"data-testid":`nested-filter-group-${e.key}`,name:e.propertyPath,distributionKey:e.key,options:e.value.map(eT),optionsLoading:!1,selectedValues:t,onChange:t=>k(e.key,t),onClearClick:()=>A(e.key),onOnlyClick:t=>$(e.key,t),onExcludeClick:t=>I(e.key,t),onPinClick:t=>L(e.key,t),isPinned:t=>M(e.key,t),onFieldPinClick:()=>R?.(e.key),isFieldPinned:D?.(e.key),onLoadMore:()=>P(e.key),loadMoreLoading:O[e.key]||!1,hasLoadedMore:F[e.key]||!1,isDefaultExpanded:s,chartConfig:W,isLive:H},e.key)},_[39]=W,_[40]=F,_[41]=D,_[42]=H,_[43]=M,_[44]=O,_[45]=k,_[46]=A,_[47]=I,_[48]=R,_[49]=P,_[50]=$,_[51]=L,_[52]=q,_[53]=e):e=_[53],x=E.map(e),_[23]=W,_[24]=E,_[25]=F,_[26]=D,_[27]=H,_[28]=M,_[29]=O,_[30]=k,_[31]=A,_[32]=I,_[33]=R,_[34]=P,_[35]=$,_[36]=L,_[37]=q,_[38]=x}else x=_[38];return _[54]!==x?(g=(0,n.jsx)(N.B,{gap:"xs",children:x}),_[54]=x,_[55]=g):g=_[55],_[56]!==E.length?(f=0===E.length&&(0,n.jsx)(T.Y,{m:6,gap:"xs",children:(0,n.jsx)(w.E,{c:"dimmed",size:"xs",children:"No properties found"})}),_[56]=E.length,_[57]=f):f=_[57],_[58]!==g||_[59]!==f?(y=(0,n.jsx)(en.n.Panel,{"data-testid":"nested-filter-group-panel",classNames:p,children:(0,n.jsxs)("div",{className:ek().filterGroupPanel,children:[g,f]})}),_[58]=g,_[59]=f,_[60]=y):y=_[60],_[61]!==h||_[62]!==y?(b=(0,n.jsxs)("div",{className:ek().filterGroup,children:[h,y]}),_[61]=h,_[62]=y,_[63]=b):b=_[63],_[64]!==B||_[65]!==S||_[66]!==b?(v=(0,n.jsx)(en.n.Item,{value:S,"data-testid":B,children:b}),_[64]=B,_[65]=S,_[66]=b,_[67]=v):v=_[67],_[68]!==v||_[69]!==K||_[70]!==i?(j=(0,n.jsx)(en.n,{variant:"unstyled",chevronPosition:"left",classNames:l,value:K,onChange:i,children:v}),_[68]=v,_[69]=K,_[70]=i,_[71]=j):j=_[71],j};function eA(e,t){return e+t.included.size+t.excluded.size}function eT(e){return{value:e,label:e.toString()}}var e$=s(83101),ez=s.n(e$);let eI=e=>{let t,s,r=(0,a.c)(8),{onClick:l,label:i,ms:o,display:c,"data-testid":d}=e;return r[0]!==i||r[1]!==o?(t=(0,n.jsx)(w.E,{size:"xxs",lh:1,ms:o,children:i}),r[0]=i,r[1]=o,r[2]=t):t=r[2],r[3]!==d||r[4]!==c||r[5]!==l||r[6]!==t?(s=(0,n.jsx)(ee.N,{display:c,onClick:l,className:ek().textButton,"data-testid":d,children:t}),r[3]=d,r[4]=c,r[5]=l,r[6]=t,r[7]=s):s=r[7],s},eL=e=>{let t,s,r=(0,a.c)(5),{percentage:l,isLoading:i}=e;r[0]!==l?(t=l<1?"<1%":l>=99.5?">99%":`~${Math.round(l)}%`,r[0]=l,r[1]=t):t=r[1];let o=t,c=i?"effect-pulse":"";return r[2]!==o||r[3]!==c?(s=(0,n.jsx)(w.E,{size:"xs",className:c,children:o}),r[2]=o,r[3]=c,r[4]=s):s=r[4],s},eM=e=>{let t,s,r,l,i,o,c,d,u,m,h,p,x,g,f,y,b,v=(0,a.c)(57),{value:j,label:_,pinned:E,onChange:C,onClickOnly:k,onClickExclude:N,onClickPin:A,className:$,percentage:I,isPercentageLoading:L}=e;v[0]!==$?(t=Q()(ek().filterCheckbox,$),v[0]=$,v[1]=t):t=v[1];let R=`filter-checkbox-${_}`;v[2]!==C||v[3]!==j?(s=()=>C?.(!j),v[2]=C,v[3]=j,v[4]=s):s=v[4],v[5]===Symbol.for("react.memo_cache_sentinel")?(r={minWidth:0},v[5]=r):r=v[5];let D=!!j,P="excluded"===j,O=`filter-checkbox-input-${_}`;v[6]!==D||v[7]!==P||v[8]!==O?(l=(0,n.jsx)(et.S,{checked:D,size:13,onChange:eF,indeterminate:P,"data-testid":O}),v[6]=D,v[7]=P,v[8]=O,v[9]=l):l=v[9];let F=_.length>22?0:1500,V="excluded"===j?"var(--color-text-danger)":"var(--color-text)";v[10]!==_?(i=_||(0,n.jsx)("span",{className:"fst-italic",children:"(empty)"}),v[10]=_,v[11]=i):i=v[11],v[12]!==_||v[13]!==V||v[14]!==i?(o=(0,n.jsx)(w.E,{size:"xs",c:V,truncate:"end",flex:1,title:_,children:i}),v[12]=_,v[13]=V,v[14]=i,v[15]=o):o=v[15],v[16]!==L||v[17]!==I?(c=null!=I&&(0,n.jsx)(eL,{percentage:I,isLoading:L}),v[16]=L,v[17]=I,v[18]=c):c=v[18],v[19]!==o||v[20]!==c?(d=(0,n.jsxs)(T.Y,{w:"100%",gap:"xs",wrap:"nowrap",justify:"space-between",pe:"4px",miw:0,children:[o,c]}),v[19]=o,v[20]=c,v[21]=d):d=v[21],v[22]!==_||v[23]!==d||v[24]!==F?(u=(0,n.jsx)(z.m,{openDelay:F,label:_,position:"right",withArrow:!0,fz:"xxs",color:"gray",children:d}),v[22]=_,v[23]=d,v[24]=F,v[25]=u):u=v[25],v[26]!==u||v[27]!==s||v[28]!==l?(m=(0,n.jsxs)(T.Y,{gap:8,onClick:s,style:r,wrap:"nowrap",children:[l,u]}),v[26]=u,v[27]=s,v[28]=l,v[29]=m):m=v[29],v[30]!==_||v[31]!==k?(h=k&&(0,n.jsx)(eI,{onClick:k,label:"Only","data-testid":`filter-only-${_}`}),v[30]=_,v[31]=k,v[32]=h):h=v[32],v[33]!==_||v[34]!==N?(p=N&&(0,n.jsx)(eI,{onClick:N,label:"Exclude","data-testid":`filter-exclude-${_}`}),v[33]=_,v[34]=N,v[35]=p):p=v[35];let B=E?"Unpin field":"Pin field",W=`filter-pin-${_}`;return v[36]!==E?(x=E?(0,n.jsx)(eo.A,{size:12}):(0,n.jsx)(ec.A,{size:12}),v[36]=E,v[37]=x):x=v[37],v[38]!==A||v[39]!==E||v[40]!==B||v[41]!==W||v[42]!==x?(g=(0,n.jsx)(S.M,{onClick:A,size:"xs",variant:"subtle",color:"gray","aria-label":B,role:"checkbox","aria-checked":E,"data-testid":W,children:x}),v[38]=A,v[39]=E,v[40]=B,v[41]=W,v[42]=x,v[43]=g):g=v[43],v[44]!==h||v[45]!==p||v[46]!==g?(f=(0,n.jsxs)("div",{className:ek().filterActions,children:[h,p,g]}),v[44]=h,v[45]=p,v[46]=g,v[47]=f):f=v[47],v[48]!==_||v[49]!==E?(y=E&&(0,n.jsx)(M.o,{me:"1px",children:(0,n.jsx)(eo.A,{size:12,"data-testid":`filter-pin-${_}-pinned`})}),v[48]=_,v[49]=E,v[50]=y):y=v[50],v[51]!==t||v[52]!==m||v[53]!==R||v[54]!==f||v[55]!==y?(b=(0,n.jsxs)("div",{className:t,"data-testid":R,children:[m,f,y]}),v[51]=t,v[52]=m,v[53]=R,v[54]=f,v[55]=y,v[56]=b):b=v[56],b},eR=e=>{let t,s,l,i,o,c,d,u,m=(0,a.c)(18),{range:h,onRangeChange:p}=e,[x,g]=(0,r.useState)(h.min),[f,y]=(0,r.useState)(h.max);m[0]!==f||m[1]!==p?(t=e=>{let t="string"==typeof e?parseFloat(e):e;!isNaN(t)&&(g(t),p&&p({min:t,max:f}))},m[0]=f,m[1]=p,m[2]=t):t=m[2];let b=t;m[3]!==x||m[4]!==p?(s=e=>{let t="string"==typeof e?parseFloat(e):e;!isNaN(t)&&(y(t),p&&p({min:x,max:t}))},m[3]=x,m[4]=p,m[5]=s):s=m[5];let v=s;return m[6]===Symbol.for("react.memo_cache_sentinel")?(l={input:{fontSize:"11px"}},m[6]=l):l=m[6],m[7]!==b||m[8]!==x?(i=(0,n.jsx)(es.Q,{size:"xs",placeholder:"Min",value:x,onChange:b,styles:l,flex:1,hideControls:!0}),m[7]=b,m[8]=x,m[9]=i):i=m[9],m[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)(w.E,{size:"xs",c:"dimmed",children:"to"}),m[10]=o):o=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(c={input:{fontSize:"11px"}},m[11]=c):c=m[11],m[12]!==v||m[13]!==f?(d=(0,n.jsx)(es.Q,{size:"xs",placeholder:"Max",value:f,onChange:v,styles:c,flex:1,hideControls:!0}),m[12]=v,m[13]=f,m[14]=d):d=m[14],m[15]!==i||m[16]!==d?(u=(0,n.jsx)(N.B,{gap:8,px:"xs",mb:"xs",children:(0,n.jsxs)(T.Y,{gap:4,wrap:"nowrap",children:[i,o,d]})}),m[15]=i,m[16]=d,m[17]=u):u=m[17],u},eD=({name:e,options:t,optionsLoading:s,selectedValues:a={included:new Set,excluded:new Set},onChange:l,onClearClick:i,onOnlyClick:o,onExcludeClick:c,isPinned:d,onPinClick:u,onFieldPinClick:m,isFieldPinned:h,onLoadMore:p,loadMoreLoading:x,hasLoadedMore:g,isDefaultExpanded:f,"data-testid":y,chartConfig:b,isLive:v,distributionKey:j,onRangeChange:_})=>{let[E,C]=(0,r.useState)(""),[k,A]=(0,r.useState)(!1),[$,I]=(0,r.useState)(f??!1),[L,R]=(0,r.useState)(new Set),[D,P]=(0,r.useState)(!1),[O,F]=(0,r.useState)(b.dateRange),B=null!=a.range;(0,r.useEffect)(()=>{v||F(b.dateRange)},[b.dateRange,v]),(0,r.useEffect)(()=>{f&&I(!0)},[f]);let W=(0,r.useCallback)(t=>{C(t),t&&!g&&p(e)},[g,e,p]),{data:H,isFetching:q,error:X}=(0,ej.kN)({chartConfig:{...b,dateRange:O},key:j||e,limit:100},{enabled:D});(0,r.useEffect)(()=>{X&&(V.$e.show({color:"red",title:"Error loading filter distribution",message:X?.message,autoClose:5e3}),P(!1))},[X]);let Y=a.included.size+a.excluded.size+ +!!B,J=(0,r.useMemo)(()=>[...Array.from(new Set([...a.included,...a.excluded])).filter(e=>!t.find(t=>t.value===e)).map(e=>({value:e,label:e.toString()})),...t],[t,a]),K=k?50:10,G=(0,r.useMemo)(()=>E?J.filter(e=>e.value&&e.label.toLowerCase().includes(E.toLowerCase())).toSorted((e,t)=>e.label.localeCompare(t.label,void 0,{numeric:!0})):J.toSorted((e,t)=>{let s=d(e.value),n=a.included.has(e.value),r=a.excluded.has(e.value),l=d(t.value),i=a.included.has(t.value),o=a.excluded.has(t.value);if(s&&!l)return -1;if(!s&&l)return 1;if(n&&!i)return -1;if(!n&&i)return 1;if(r&&!o)return -1;if(!r&&o)return 1;let c=H?.get(e.value.toString())??0,u=H?.get(t.value.toString())??0;return c!==u?u-c:e.label.localeCompare(t.label,void 0,{numeric:!0})}),[E,J,d,a.included,a.excluded,H]),Z=(0,r.useMemo)(()=>G.length<=K?G:G.slice(0,K),[G,K]),U=(0,r.useCallback)(e=>{a.included.has(e)||(R(t=>new Set(t).add(e)),setTimeout(()=>{R(t=>{let s=new Set(t);return s.delete(e),s})},600)),l(e)},[l,a]),Q=G.length>Z.length,et=!E&&J.length>10&&Y<J.length;return(0,n.jsx)(en.n,{variant:"unstyled",chevronPosition:"left",classNames:{chevron:ek().chevron},value:$?e:null,onChange:t=>{I(t===e)},children:(0,n.jsx)(en.n.Item,{value:e,"data-testid":y,children:(0,n.jsxs)(N.B,{gap:0,children:[(0,n.jsxs)(M.o,{children:[(0,n.jsx)(en.n.Control,{component:ee.N,flex:"1",p:"0",pr:"xxxs","data-testid":"filter-group-control",style:{overflow:"hidden"},classNames:{chevron:"m-0",label:"p-0"},className:Z.length?"":"opacity-50",children:(0,n.jsx)(z.m,{openDelay:e.length>26?0:1500,label:e,position:"top",withArrow:!0,fz:"xxs",color:"gray",children:(0,n.jsx)(w.E,{size:"xs",fw:"500",truncate:"end",children:e})})}),(0,n.jsxs)(T.Y,{gap:0,wrap:"nowrap",children:[!B&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.m,{label:D?"Hide Distribution":"Show Distribution",position:"top",withArrow:!0,fz:"xxs",color:"gray",children:(0,n.jsx)(S.M,{size:"xs",variant:"subtle",color:"gray",onClick:()=>{D||(I(!0),F(b.dateRange)),P(e=>!e)},"data-testid":`toggle-distribution-button-${e}`,"aria-checked":D,role:"checkbox",children:q?(0,n.jsx)(M.o,{children:(0,n.jsx)(ed.A,{className:"spin-animate",size:12})}):D?(0,n.jsx)(eu.A,{size:14}):(0,n.jsx)(em.A,{size:14})})}),m&&(0,n.jsx)(z.m,{label:h?"Unpin Field":"Pin Field",position:"top",withArrow:!0,fz:"xxs",color:"gray",children:(0,n.jsx)(S.M,{size:"xs",variant:"subtle",color:"gray",onClick:m,children:h?(0,n.jsx)(eo.A,{size:14}):(0,n.jsx)(ec.A,{size:14})})})]}),Y>0&&(0,n.jsx)(z.m,{label:"Clear Filters",position:"top",withArrow:!0,fz:"xxs",color:"gray",children:(0,n.jsx)(S.M,{size:"xs",variant:"subtle",color:"gray",onClick:()=>{i(),C("")},children:(0,n.jsx)(eh.A,{size:14})})})]})]}),(0,n.jsx)(en.n.Panel,{"data-testid":"filter-group-panel",classNames:{content:"p-0 pt-2"},children:B&&a.range?(0,n.jsx)(eR,{name:e,range:a.range,onClearClick:i,onRangeChange:_}):(0,n.jsxs)(N.B,{gap:0,children:[$&&J.length>5&&(0,n.jsx)("div",{className:"px-2 pb-2",children:(0,n.jsx)(ea.k,{size:"xs",placeholder:"Search values...",value:E,"data-testid":`filter-search-${e}`,onChange:e=>W(e.currentTarget.value),rightSectionWidth:20,rightSection:(0,n.jsx)(ep.A,{size:12,stroke:2}),classNames:{input:"ps-0.5"}})}),Z.map(e=>(0,n.jsx)(eM,{label:e.label,pinned:d(e.value),className:L.has(e.value)?ek().recentlyMoved:"",value:a.included.has(e.value)?"included":!!a.excluded.has(e.value)&&"excluded",onChange:()=>U(e.value),onClickOnly:()=>o(e.value),onClickExclude:()=>c(e.value),onClickPin:()=>u(e.value),isPercentageLoading:q,percentage:D&&H?H.get(e.value.toString())??0:void 0},e.value.toString())),s?(0,n.jsxs)(T.Y,{m:6,gap:"xs",children:[(0,n.jsx)(er.a,{size:12,color:"gray"}),(0,n.jsx)(w.E,{c:"dimmed",size:"xs",children:"Loading..."})]}):0===Z.length?(0,n.jsx)(T.Y,{m:6,gap:"xs",children:(0,n.jsx)(w.E,{c:"dimmed",size:"xs",children:"No options found"})}):null,Q&&(k||E)&&(0,n.jsx)(w.E,{size:"xxs",ms:28,fs:"italic",children:"Search to see more"}),x&&(0,n.jsxs)(T.Y,{m:6,gap:"xs",children:[(0,n.jsx)(er.a,{size:12,color:"gray"}),(0,n.jsx)(w.E,{c:"dimmed",size:"xs",children:"Loading more..."})]}),et&&(0,n.jsx)("div",{className:"d-flex m-1",children:(0,n.jsx)(eI,{"data-testid":`filter-show-more-${e}`,label:k?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ex.A,{size:12})," Less"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eg.A,{size:12})," Show more"]}),onClick:()=>{A(!k),k||p?.(e)}})}),p&&!et&&!k&&!g&&!x&&(0,n.jsx)("div",{className:"d-flex m-1",children:(0,n.jsx)(eI,{"data-testid":`filter-load-more-${e}`,display:g?"none":void 0,label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eg.A,{size:12})," Load more"]}),onClick:()=>p(e)})})]})})]})})})};function eP(e,t){return e?.primary_key?.includes(t)}let eO=(0,r.memo)(({filters:e,clearAllFilters:t,clearFilter:s,setFilterValue:a,isLive:l,chartConfig:i,analysisMode:o,setAnalysisMode:c,sourceId:d,showDelta:u,denoiseResults:m,setDenoiseResults:h,setFilterRange:p})=>{let x=(0,r.useCallback)((e,t,s)=>a(e,t,s),[a]),{toggleFilterPin:g,toggleFieldPin:f,isFilterPinned:y,isFieldPinned:v,getPinnedFields:_,pinnedFilters:S}=(0,eS.RW)(d??null),{size:E,startResize:k}=(0,e_.A)(16,"left"),{data:I}=(0,ej.n$)({databaseName:i.from.databaseName,tableName:i.from.tableName,connectionId:i.connection}),{data:L,isLoading:M,error:R}=(0,ej.ws)({databaseName:i.from.databaseName,tableName:i.from.tableName,connectionId:i.connection}),{data:D}=(0,ej.Zh)({databaseName:i.from.databaseName,tableName:i.from.tableName,connectionId:i.connection}),{data:P}=(0,ew.Fo)({id:d}),{data:O}=(0,ej.Z2)((0,b.VO)(P));(0,r.useEffect)(()=>{R&&V.$e.show({color:"red",title:R?.name,message:R?.message,autoClose:5e3})},[R]);let[F,B]=(0,r.useState)(!1),W=(0,r.useMemo)(()=>L?L.sort((e,t)=>e.type.includes("LowCardinality")&&!t.type.includes("LowCardinality")?-1:1).filter(e=>e.jsType&&["string"].includes(e.jsType)).map(({path:e,type:t})=>({type:t,path:(0,eE.uc)(e,I??[])})).filter(t=>F||t.type.includes("LowCardinality")||Object.keys(e).includes(t.path)||v(t.path)).map(({path:e})=>e).filter(e=>!["body","timestamp","_hdx_body"].includes(e.toLowerCase())):[],[L,I,e,F,v]),[H,q]=(0,r.useState)(i.dateRange);(0,r.useEffect)(()=>{l||(q(i.dateRange),Q({}))},[i.dateRange,l]),(0,r.useEffect)(()=>{Q({})},[d]);let X=l&&H!==i.dateRange,{data:Y,isLoading:J,isFetching:K}=(0,ej.lo)({chartConfig:{...i,dateRange:H},limit:20,keys:W}),G=(0,r.useMemo)(()=>{let e=new Map((Y??[]).map(e=>[e.key,e.value]));return Array.from(new Set([...e.keys(),...Object.keys(S),..._()])).map(t=>{let s=new Set([...e.get(t)??[],...S[t]??[]]);return{key:t,value:Array.from(s)}})},[Y,S,_]),Z=(0,ej.Ge)(),[U,Q]=(0,r.useState)({}),[ee,es]=(0,r.useState)(new Set),en=(0,r.useCallback)(async e=>{es(t=>new Set(t).add(e));try{let t=await Z.getKeyValuesWithMVs({chartConfig:{...i,dateRange:H},keys:[e],limit:1e4,disableRowLimit:!0,source:P}),s=t[0].value?.map(e=>e.toString())??[];s.length>0&&Q(t=>({...t,[e]:[...t[e]||[],...s]}))}catch(e){console.error("failed to fetch more keys",e)}finally{es(t=>{let s=new Set(t);return s.delete(e),s})}},[i,Q,H,Z,P]),ea=(0,r.useMemo)(()=>{let t=[];for(let s of G??[]){let n=structuredClone(s);I?.some(e=>n.key.startsWith(e))&&(n.key=`toString(${n.key})`);let a=e[n.key],r=a&&(a.included.size>0||a.excluded.size>0),l=v(n.key);if(n.value?.length>0||r||l){let e=U[n.key];if(e&&e.length>0){let s=n.value.slice();for(let t of e)s.includes(t)||s.push(t);t.push({key:n.key,value:s})}else t.push(n)}}for(let s of Object.keys(e).filter(e=>!t.some(t=>t.key===e)))t.push({key:s,value:Array.from(e[s].included)});return t.sort((e,t)=>{let s=eP(O,e.key),n=eP(O,t.key);return s&&!n?-1:n&&!s?1:0}),t.sort((e,t)=>{let s=v(e.key),n=v(t.key);return s&&!n?-1:n&&!s?1:0}),t.sort((t,s)=>{let n=e?.[t.key]?.included.size>0,a=e?.[s.key]?.included.size>0;return n&&!a?-1:a&&!n?1:0}),t.sort((t,s)=>{let n=e?.[t.key]?.range,a=e?.[s.key]?.range;return n&&!a?-1:!n&&a?1:0}),t},[G,e,O,U,v,I]),eo=(0,r.useMemo)(()=>Object.values(e).some(e=>e.included.size>0||e.excluded.size>0||null!=e.range),[e]),ec=(0,r.useCallback)(e=>{P?.parentSpanIdExpression&&(e?D?.some(e=>e.name===eS.ae)?x(eS.ae,!0,"only"):x(P.parentSpanIdExpression,"","only"):(s(P.parentSpanIdExpression),s(eS.ae)))},[x,s,P,D]),eu=(0,r.useMemo)(()=>{if(!P?.parentSpanIdExpression||P.kind!==j.GL.Trace)return!1;let t=e?.[P?.parentSpanIdExpression],s=e?.[eS.ae];return t?.included.size===1&&t?.included.has("")||s?.included.size===1&&s?.included.has(!0)},[e,P]);return(0,n.jsxs)(A.a,{className:ek().filtersPanel,style:{width:`${E}%`},children:[(0,n.jsx)("div",{className:ez().resizeHandle,onMouseDown:k}),(0,n.jsx)(el.F,{h:"100%",scrollbarSize:4,scrollbars:"y",style:{display:"block",width:"100%",overflow:"hidden"},children:(0,n.jsxs)(N.B,{gap:"sm",p:"xs",children:[(0,n.jsx)(w.E,{size:"xxs",c:"dimmed",fw:"bold",children:"Analysis Mode"}),(0,n.jsx)(ei.t,{value:o,onChange:e=>c(e),orientation:"vertical",w:"100%",placement:"right",children:(0,n.jsxs)(ei.t.List,{w:"100%",children:[(0,n.jsx)(ei.t.Tab,{value:"results",size:"xs",h:"24px",children:(0,n.jsx)(w.E,{size:"xs",children:"Results Table"})}),u&&(0,n.jsx)(ei.t.Tab,{value:"delta",size:"xs",h:"24px",children:(0,n.jsx)(w.E,{size:"xs",children:"Event Deltas"})}),!ev.Ju&&(0,n.jsx)(ei.t.Tab,{value:"pattern",size:"xs",h:"24px",children:(0,n.jsx)(w.E,{size:"xs",children:"Event Patterns"})})]})}),(0,n.jsxs)($.s,{align:"center",justify:"space-between",children:[(0,n.jsxs)($.s,{className:K?"effect-pulse":"",children:[(0,n.jsxs)(w.E,{size:"xxs",c:"dimmed",fw:"bold",children:["Filters ",K&&"\xb7\xb7\xb7"]}),X&&(0,n.jsx)(eI,{label:(0,n.jsx)(ed.A,{size:14,className:"ms-1",onClick:()=>q(i.dateRange)})})]}),eo&&(0,n.jsx)(eI,{label:"Clear all",onClick:()=>{t()}})]}),"results"===o&&(0,n.jsx)(et.S,{size:13,checked:m,ms:"6px",label:(0,n.jsx)(z.m,{openDelay:200,color:"gray",position:"right",withArrow:!0,label:"Denoise results will visually remove events matching common event patterns from the results table.",children:(0,n.jsx)(w.E,{size:"xs",mt:"-2px",component:"div",children:(0,n.jsxs)(T.Y,{gap:2,children:[(0,n.jsx)(ef.A,{size:14,style:{display:"inline",verticalAlign:"middle"}}),"Denoise Results"]})})}),onChange:()=>h(!m)}),P?.kind===j.GL.Trace&&P.parentSpanIdExpression&&(0,n.jsx)(et.S,{size:13,checked:eu,ms:"6px",label:(0,n.jsx)(z.m,{openDelay:200,color:"gray",position:"right",withArrow:!0,label:"Only show root spans (spans with no parent span).",children:(0,n.jsx)(w.E,{size:"xs",mt:"-2px",component:"div",children:(0,n.jsxs)(T.Y,{gap:2,children:[(0,n.jsx)(ey.A,{size:14,style:{display:"inline",verticalAlign:"middle"}}),"Root Spans Only"]})})}),onChange:e=>ec(e.target.checked)}),M||J?(0,n.jsx)($.s,{align:"center",justify:"center",children:(0,n.jsx)(er.a,{size:"xs",color:"gray"})}):0===ea.length&&(0,n.jsx)(w.E,{size:"xxs",children:"No filters available"}),(()=>{let{grouped:t,nonGrouped:a}=function(e){let t=new Map,s=[];for(let n of e){let e=function(e){let t=e.replace(/^toString\((.+)\)$/,"$1").replace(/`([^`]+)`/g,"$1"),s=t.match(/^([^[]+)\[['"]([^'"]+)['"]\]$/);if(s)return{baseName:s[1],propertyPath:s[2]};let n=t.match(/^([^.]+)\.(.+)$/);return n?{baseName:n[1],propertyPath:n[2]}:null}(n.key);if(e){let{baseName:s,propertyPath:a}=e;t.has(s)||t.set(s,{key:s,value:[],children:[]}),t.get(s).children.push({...n,propertyPath:a})}else s.push(n)}return{grouped:Array.from(t.values()),nonGrouped:s}}(ea);return(0,n.jsxs)(n.Fragment,{children:[t.map(t=>(0,n.jsx)(eN,{"data-testid":`nested-filter-group-${t.key}`,name:t.key,childFilters:t.children,selectedValues:t.children.reduce((t,s)=>(t[s.key]=e[s.key]?e[s.key]:{included:new Set,excluded:new Set},t),{}),onChange:(e,t)=>{x(e,t)},onClearClick:e=>s(e),onOnlyClick:(e,t)=>{x(e,t,"only")},onExcludeClick:(e,t)=>{x(e,t,"exclude")},onPinClick:(e,t)=>g(e,t),isPinned:(e,t)=>y(e,t),onFieldPinClick:e=>f(e),isFieldPinned:e=>v(e),onLoadMore:en,loadMoreLoading:t.children.reduce((e,t)=>(e[t.key]=ee.has(t.key),e),{}),hasLoadedMore:t.children.reduce((e,t)=>(e[t.key]=!!U[t.key],e),{}),isDefaultExpanded:t.children.some(t=>e[t.key]&&(e[t.key].included.size>0||e[t.key].excluded.size>0)||v(t.key)),chartConfig:i,isLive:l},t.key)),a.map(t=>{var a;return(0,n.jsx)(eD,{"data-testid":`filter-group-${t.key}`,name:(a=t.key).startsWith("toString")?a.slice(9,a.length-1).split(".").map(e=>e.startsWith("`")&&e.endsWith("`")?e.slice(1,-1):e).join("."):a,options:t.value.map(e=>({value:e,label:e.toString()})),optionsLoading:J,selectedValues:e[t.key]?e[t.key]:{included:new Set,excluded:new Set},onChange:e=>{x(t.key,e)},onClearClick:()=>s(t.key),onOnlyClick:e=>{x(t.key,e,"only")},onExcludeClick:e=>{x(t.key,e,"exclude")},onPinClick:e=>g(t.key,e),isPinned:e=>y(t.key,e),onFieldPinClick:()=>f(t.key),isFieldPinned:v(t.key),onLoadMore:en,loadMoreLoading:ee.has(t.key),hasLoadedMore:!!U[t.key],isDefaultExpanded:eP(O,t.key)||v(t.key)||e[t.key]&&(e[t.key].included.size>0||e[t.key].excluded.size>0||null!=e[t.key].range),chartConfig:i,isLive:l,onRangeChange:e=>p(t.key,e)},t.key)})]})})(),(0,n.jsx)(C.$,{variant:"secondary",size:"compact-xs",loading:K,rightSection:F?(0,n.jsx)(ex.A,{size:14}):(0,n.jsx)(eb.A,{size:14}),onClick:()=>B(!F),children:F?"Less filters":"More filters"}),F&&(0,n.jsxs)("div",{children:[(0,n.jsx)(w.E,{size:"xs",fw:"bold",children:"Not seeing a filter?"}),(0,n.jsx)(w.E,{size:"xxs",children:"Try searching instead (e.g. column:foo)"})]})]})})]})});function eF(){}var eV=s(40228),eB=s(68344),eW=s(71781),eH=s(64501),eq=s(17273),eX=s(46466),eY=s(5653),eJ=s(90993),eK=s(90586);function eG(e){let t,s,r,l,i,o,c,d=(0,a.c)(11),{onClickDeleteSavedSearch:u,onClickRenameSavedSearch:m}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t={flexShrink:0},d[0]=t):t=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(_.W.Target,{children:(0,n.jsx)(S.M,{variant:"secondary",style:t,size:"input-xs",children:(0,n.jsx)(eY.A,{size:14})})}),d[1]=s):s=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(eJ.A,{size:16}),d[2]=r):r=d[2],d[3]!==u?(l=(0,n.jsx)(_.W.Item,{leftSection:r,onClick:u,children:"Delete Saved Search"}),d[3]=u,d[4]=l):l=d[4],d[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(eK.A,{size:16}),d[5]=i):i=d[5],d[6]!==m?(o=(0,n.jsx)(_.W.Item,{leftSection:i,onClick:m,children:"Rename Saved Search"}),d[6]=m,d[7]=o):o=d[7],d[8]!==l||d[9]!==o?(c=(0,n.jsxs)(_.W,{width:250,children:[s,(0,n.jsxs)(_.W.Dropdown,{children:[l,o]})]}),d[8]=l,d[9]=o,d[10]=c):c=d[10],c}var eZ=s(4308),eU=s(6876),eQ=s(43152),e0=s(91021);function e1(e,t,s){let n,r,l,i,o,c,d,u,m=(0,a.c)(25);m[0]!==s?(n=void 0===s?{}:s,m[0]=s,m[1]=n):n=m[1];let{disableQueryChunking:h,enableParallelQueries:p}=n;m[2]!==e?(r=(0,eQ.O7)(e),m[2]=e,m[3]=r):r=m[3];let x=r,{data:g,isLoading:f}=eU.Ay.useMe(),b=g?.team?.parallelizeWhenPossible;m[4]!==h||m[5]!==p||m[6]!==b?(l={disableQueryChunking:h,enableParallelQueries:p,parallelizeWhenPossible:b},m[4]=h,m[5]=p,m[6]=b,m[7]=l):l=m[7],m[8]!==x||m[9]!==t||m[10]!==l?(i=[t,x,"chunked",l],m[8]=x,m[9]=t,m[10]=l,m[11]=i):i=m[11];let v=!f;m[12]!==i||m[13]!==v?(o={queryKey:i,staleTime:3e5,refetchOnWindowFocus:!1,placeholderData:eZ.rX,enableQueryChunking:!0,enabled:v},m[12]=i,m[13]=v,m[14]=o):o=m[14];let{data:j,isLoading:_,isError:S}=(0,e0.HD)(x,o),w=!!j?.isComplete,E=j?.meta;if(m[15]!==E)c=!E||E.find(e=>"count()"===e.name)?"count()":(0,y.P1)(E,[y.A2.Number])?.[0].name??"count()",m[15]=E,m[16]=c;else c=m[16];let C=c;m[17]!==C||m[18]!==j?.data?(d=j?.data?.reduce((e,t)=>e+Number.parseInt(t[C]),0),m[17]=C,m[18]=j?.data,m[19]=d):d=m[19];let k=d;return m[20]!==S||m[21]!==_||m[22]!==w||m[23]!==k?(u={totalCount:k,isLoading:_,isError:S,isTotalCountComplete:w},m[20]=S,m[21]=_,m[22]=w,m[23]=k,m[24]=u):u=m[24],u}function e2(e){let t,s,r,l=(0,a.c)(9),{config:i,queryKeyPrefix:o,disableQueryChunking:c,enableParallelQueries:d}=e;l[0]!==c||l[1]!==d?(t={disableQueryChunking:c,enableParallelQueries:d},l[0]=c,l[1]=d,l[2]=t):t=l[2];let{totalCount:u,isLoading:m,isError:h}=e1(i,o,t);return l[3]!==h||l[4]!==m||l[5]!==u?(s=m?(0,n.jsx)("span",{className:"effect-pulse",children:"\xb7\xb7\xb7 Results"}):null===u||h?"0 Results":`${u?.toLocaleString()} Results`,l[3]=h,l[4]=m,l[5]=u,l[6]=s):s=l[6],l[7]!==s?(r=(0,n.jsx)(w.E,{size:"xs",mb:4,children:s}),l[7]=s,l[8]=r):r=l[8],r}var e3=s(24314),e5=s(57478),e4=s(85014),e6=s(58153),e7=s(8989),e8=s(70727),e9=s(56514),te=s(87095),tt=s(36600),ts=s(387),tn=s(88339),ta=s(75359),tr=s(46061),tl=s(31451),ti=s(10174),to=s(50374),tc=s(35729),td=s(26674),tu=s(66773),tm=s.n(tu);function th(e){let t,s,l,i,o,c,d,u,m,h,p,x,g,f,b,v,j,_,S,E,C,A,T,$,z=(0,a.c)(55),{isOpen:I,onClose:L,pattern:M,bodyValueExpression:R,source:D}=e,P=(0,td.Y)()+100,[O,F]=r.useState(null),V=D?.serviceNameExpression||"Service";z[0]===Symbol.for("react.memo_cache_sentinel")?(t=[tl.vN,{_type:y.A2.Date}],z[0]=t):t=z[0],z[1]===Symbol.for("react.memo_cache_sentinel")?(s=[tl.xj,{_type:y.A2.String}],z[1]=s):s=z[1],z[2]===Symbol.for("react.memo_cache_sentinel")?(l=[tl.Q$,{_type:y.A2.String}],z[2]=l):l=z[2],z[3]===Symbol.for("react.memo_cache_sentinel")?(i={_type:y.A2.String},z[3]=i):i=z[3],z[4]!==V?(o=new Map([t,s,l,[V,i]]),z[4]=V,z[5]=o):o=z[5];let B=o;z[6]!==V?(c={[tl.vN]:"Timestamp",[V]:"Service",[tl.Q$]:"level",[tl.xj]:"Body"},z[6]=V,z[7]=c):c=z[7];let W=c;z[8]!==V?(d=[tl.vN,V,tl.Q$,tl.xj],z[8]=V,z[9]=d):d=z[9];let H=d;z[10]===Symbol.for("react.memo_cache_sentinel")?(u=[{name:"body",type:"String"},{name:"ts",type:"DateTime64(9)"}],z[10]=u):u=z[10],z[11]!==D.timestampValueExpression?(m=(0,ew.AF)(D.timestampValueExpression),z[11]=D.timestampValueExpression,z[12]=m):m=z[12],z[13]!==R||z[14]!==m?(h={meta:u,aliasMap:{body:R,ts:m}},z[13]=R,z[14]=m,z[15]=h):h=z[15];let q=(0,e8.Ay)(h);z[16]!==q?(p=e=>{F(q({body:e[tl.xj],ts:e[tl.vN]}))},z[16]=q,z[17]=p):p=z[17];let X=p;z[18]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{F(null)},z[18]=x):x=z[18];let Y=x,J=O?Y:L;z[19]===Symbol.for("react.memo_cache_sentinel")?(g={body:{padding:0}},z[19]=g):g=z[19];let K=O?Y:L;return z[20]!==K?(f=(0,n.jsx)(tc.B,{header:"Pattern",onClose:K}),z[20]=K,z[21]=f):f=z[21],z[22]!==M.pattern?(b=(0,n.jsx)(k.Z,{p:"md",children:(0,n.jsx)(w.E,{size:"sm",children:M.pattern})}),z[22]=M.pattern,z[23]=b):b=z[23],z[24]!==M.count?(v=M.count?.toLocaleString(),z[24]=M.count,z[25]=v):v=z[25],z[26]!==v?(j=(0,n.jsxs)(k.Z.Section,{p:"md",py:"xs",children:["~",v," Sample Events"]}),z[26]=v,z[27]=j):j=z[27],z[28]!==W||z[29]!==B||z[30]!==H||z[31]!==X||z[32]!==M.samples?(_=(0,n.jsx)(tr.Ho,{rows:M.samples,generateRowId:tp,displayedColumns:H,columnTypeMap:B,columnNameMap:W,onRowDetailsClick:X,wrapLines:!1,showExpandButton:!1,isLive:!1}),z[28]=W,z[29]=B,z[30]=H,z[31]=X,z[32]=M.samples,z[33]=_):_=z[33],z[34]!==j||z[35]!==_?(S=(0,n.jsxs)(k.Z,{p:"md",children:[j,_]}),z[34]=j,z[35]=_,z[36]=S):S=z[36],z[37]!==b||z[38]!==S?(E=(0,n.jsx)(tc.y,{children:(0,n.jsxs)(N.B,{children:[b,S]})}),z[37]=b,z[38]=S,z[39]=E):E=z[39],z[40]!==O||z[41]!==D?(C=O&&(0,n.jsx)(to.A,{source:D,rowId:O.where,aliasWith:O.aliasWith,onClose:Y,isNestedPanel:!0,breadcrumbPath:[{label:"Pattern Overview"}]}),z[40]=O,z[41]=D,z[42]=C):C=z[42],z[43]!==f||z[44]!==E||z[45]!==C?(A=(0,n.jsxs)("div",{className:tm().panel,children:[f,E,C]}),z[43]=f,z[44]=E,z[45]=C,z[46]=A):A=z[46],z[47]!==P||z[48]!==A?(T=(0,n.jsx)(td.S.Provider,{value:P,children:A}),z[47]=P,z[48]=A,z[49]=T):T=z[49],z[50]!==P||z[51]!==I||z[52]!==J||z[53]!==T?($=(0,n.jsx)(ti._,{opened:I,onClose:J,position:"right",size:"70vw",withCloseButton:!1,zIndex:P,styles:g,children:T}),z[50]=P,z[51]=I,z[52]=J,z[53]=T,z[54]=$):$=z[54],$}function tp(e){return{where:e.id,aliasWith:[]}}let tx=new Map;function tg(e){let t,s,l,i,o,c,d,u,m,h=(0,a.c)(24),{config:p,totalCountConfig:x,totalCountQueryKeyPrefix:g,bodyValueExpression:f,source:y}=e,[b,v]=(0,r.useState)(null),{totalCount:j,isLoading:_,isTotalCountComplete:S}=e1(x,g),w=y?.severityTextExpression??"",E=y?.statusCodeExpression??"";h[0]!==f||h[1]!==p||h[2]!==w||h[3]!==E||h[4]!==j?(t={config:p,samples:1e4,bodyValueExpression:f,severityTextExpression:w,statusCodeExpression:E,totalCount:j},h[0]=f,h[1]=p,h[2]=w,h[3]=E,h[4]=j,h[5]=t):t=h[5];let{data:C,isLoading:k,patternQueryConfig:N}=(0,tl.nt)(t),A=_||!S||k;h[6]!==C?(s=Object.values(C).sort(tb),h[6]=C,h[7]=s):s=h[7];let T=s;return h[8]!==T?(l=T??[],h[8]=T,h[9]=l):l=h[9],h[10]===Symbol.for("react.memo_cache_sentinel")?(i=["__hdx_pattern_trend","countStr","severityText","pattern"],o=e=>v(e),h[10]=i,h[11]=o):(i=h[10],o=h[11]),h[12]===Symbol.for("react.memo_cache_sentinel")?(c={__hdx_pattern_trend:"Trend",countStr:"Count",pattern:"Pattern",severityText:"Level"},h[12]=c):c=h[12],h[13]!==A||h[14]!==N||h[15]!==l?(d=(0,n.jsx)(tr.Ho,{isLive:!1,wrapLines:!0,isLoading:A,rows:l,displayedColumns:i,onRowDetailsClick:o,hasNextPage:!1,fetchNextPage:ty,highlightedLineId:"",columnTypeMap:tx,generateRowId:tf,columnNameMap:c,config:N,showExpandButton:!1}),h[13]=A,h[14]=N,h[15]=l,h[16]=d):d=h[16],h[17]!==f||h[18]!==b||h[19]!==y?(u=b&&y&&(0,n.jsx)(th,{isOpen:!0,source:y,pattern:b,bodyValueExpression:f,onClose:()=>v(null)}),h[17]=f,h[18]=b,h[19]=y,h[20]=u):u=h[20],h[21]!==u||h[22]!==d?(m=(0,n.jsxs)(n.Fragment,{children:[d,u]}),h[21]=u,h[22]=d,h[23]=m):m=h[23],m}function tf(e){return{where:e.id,aliasWith:[]}}function ty(){}function tb(e,t){return t.count-e.count}var tv=s(7913),tj=s(2893),t_=s(47122),tS=s(31292),tw=s(14693),tE=s(40684),tC=s(92205),tk=s(83171),tN=s(78482),tA=s(88849),tT=s(43736),t$=s.n(tT);function tz(e){let t={};return!function e(s,n){if(Object(s)!==s)t[n]=s;else if(Array.isArray(s)){let a;for(let t=0,a=s.length;t<a;t++)e(s[t],n+"["+t+"]");0==a&&(t[n]=[])}else{let a=!0;for(let t in s)a=!1,e(s[t],n?n+"."+t:t);a&&n&&(t[n]={})}}(e,""),t}function tI(e){let t=e.map(tz),s=new Map,n=new Set;t.forEach(e=>{Object.entries(e).forEach(([e,t])=>{let a=s.get(e)||0;s.set(e,a+1),a+1>=5&&n.add(e)})});let a=new Map;t.forEach(e=>{Object.entries(e).forEach(([e,t])=>{if(n.has(e)){let s=a.get(e);s||(s=new Map,a.set(e,s));let n=s.get(t)||0;s.set(t,n+1)}})});let r=new Map;return a.forEach((e,t)=>{let n=new Map;e.forEach((e,a)=>{n.set(a,e/(s.get(t)??0)*100)}),r.set(t,n)}),{percentageOccurences:r}}function tL(e,t){let s=[];return Array.from(new Set([...e.keys(),...t.keys()])).sort().forEach(n=>{let a=e.get(n)||0,r=t.get(n)||0;s.push({name:n,outlierCount:a,inlierCount:r})}),s}let tM=(0,tv.withErrorBoundary)((0,r.memo)(e=>{let t=(0,a.c)(12),{active:s,payload:r,label:l,title:i}=e;if(s&&r&&r.length){let e,s,a,o,c;return t[0]!==i?(e=i&&(0,n.jsx)(w.E,{size:"xs",mb:"xs",children:i}),t[0]=i,t[1]=e):e=t[1],t[2]!==l?(s=0===l.length?(0,n.jsx)("i",{children:"Empty String"}):l,t[2]=l,t[3]=s):s=t[3],t[4]!==s?(a=(0,n.jsx)(w.E,{size:"xs",mb:"xs",children:s}),t[4]=s,t[5]=a):a=t[5],t[6]!==r?(o=r.sort(tF).map(tV),t[6]=r,t[7]=o):o=t[7],t[8]!==e||t[9]!==a||t[10]!==o?(c=(0,n.jsx)("div",{className:t$().chartTooltip,children:(0,n.jsxs)("div",{className:t$().chartTooltipContent,children:[e,a,o]})}),t[8]=e,t[9]=a,t[10]=o,t[11]=c):c=t[11],c}return null}),{onError:console.error,fallback:(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-8 font-monospace bg-danger-transparent",children:"An error occurred while rendering the tooltip."})});function tR(e){let t,s,r,l,i,o,c,d,u,m,h,p,x,g,f,y=(0,a.c)(26),{name:b,outlierValueOccurences:v,inlierValueOccurences:j}=e;y[0]!==j||y[1]!==v?(t=tL(v,j),y[0]=j,y[1]=v,y[2]=t):t=y[2];let _=t;return y[3]===Symbol.for("react.memo_cache_sentinel")?(s={width:"100%",height:120},y[3]=s):s=y[3],y[4]!==b?(r=(0,eE.kU)(b,32),y[4]=b,y[5]=r):r=y[5],y[6]!==b||y[7]!==r?(l=(0,n.jsx)(w.E,{size:"xs",ta:"center",title:b,children:r}),y[6]=b,y[7]=r,y[8]=l):l=y[8],y[9]===Symbol.for("react.memo_cache_sentinel")?(i={top:0,right:0,left:0,bottom:0},y[9]=i):i=y[9],y[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)(tj.W,{dataKey:"name",tick:{fontSize:10,fontFamily:"IBM Plex Mono, monospace"}}),y[10]=o):o=y[10],y[11]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(t_.h,{tick:{fontSize:11,fontFamily:"IBM Plex Mono, monospace"}}),y[11]=c):c=y[11],y[12]===Symbol.for("react.memo_cache_sentinel")?(d={zIndex:1e3},y[12]=d):d=y[12],y[13]!==b?(u=(0,n.jsx)(tM,{title:b}),y[13]=b,y[14]=u):u=y[14],y[15]===Symbol.for("react.memo_cache_sentinel")?(m={y:!0},y[15]=m):m=y[15],y[16]!==u?(h=(0,n.jsx)(tS.m,{wrapperStyle:d,content:u,allowEscapeViewBox:m}),y[16]=u,y[17]=h):h=y[17],y[18]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)(tw.y,{dataKey:"outlierCount",name:"Outliers",fill:(0,eE.cM)(),isAnimationActive:!1}),y[18]=p):p=y[18],y[19]===Symbol.for("react.memo_cache_sentinel")?(x=(0,n.jsx)(tw.y,{dataKey:"inlierCount",name:"Inliers",fill:(0,eE.V9)(),isAnimationActive:!1}),y[19]=x):x=y[19],y[20]!==_||y[21]!==h?(g=(0,n.jsx)(tE.u,{width:"100%",height:"100%",children:(0,n.jsxs)(tC.E,{barGap:2,width:500,height:300,data:_,margin:i,children:[o,c,h,p,x]})}),y[20]=_,y[21]=h,y[22]=g):g=y[22],y[23]!==g||y[24]!==l?(f=(0,n.jsxs)("div",{style:s,children:[l,g]}),y[23]=g,y[24]=l,y[25]=f):f=y[25],f}function tD(e){let t,s,l,i,o,c,d,u,m,h,p,x,g,f,b,v,j,_,S,E=(0,a.c)(63),{config:C,valueExpr:k,xMin:N,xMax:T,yMin:z,yMax:I}=e;E[0]!==k?(t=(0,eQ.eY)(k),E[0]=k,E[1]=t):t=E[1];let L=t,M=(0,ew.AF)(C.timestampValueExpression),R=e=>{let t,s=L?{name:"AggregatedTimestamps",chartConfig:{...C,from:C.from,select:M,filters:[...C.filters??[],{type:"sql",condition:`${M} >= ${N}`},{type:"sql",condition:`${M} <= ${T}`},...C.where?[{type:C.whereLanguage,condition:C.where}]:[]],groupBy:M,having:`(${k}) >= ${z} AND (${k}) <= ${I}`}}:null,n=(t=`${M} >= ${N} AND ${M} <= ${T}`,L||(t+=` AND (${k}) >= ${z} AND (${k}) <= ${I}`),e?t:`NOT (${t})`),a=e?`${M} IN (SELECT ${M} FROM AggregatedTimestamps)`:`${M} NOT IN (SELECT ${M} FROM AggregatedTimestamps)`;return[...s?[s]:[],{name:"PartIds",chartConfig:{...C,select:"tuple(_part, _part_offset)",filters:[...C.filters??[],{type:"sql",condition:n},...L?[{type:"sql",condition:a}]:[]],orderBy:[{ordering:"DESC",valueExpression:"rand()"}],limit:{limit:1e3}}}]},P=e=>{let t=L?e?`${M} >= ${N} AND ${M} <= ${T}`:`NOT (${M} >= ${N} AND ${M} <= ${T})`:e?`(${k}) >= ${z} AND (${k}) <= ${I} AND ${M} >= ${N} AND ${M} <= ${T}`:`NOT ((${k}) >= ${z} AND (${k}) <= ${I} AND ${M} >= ${N} AND ${M} <= ${T})`,s=e?`${M} IN (SELECT ${M} FROM AggregatedTimestamps)`:`${M} NOT IN (SELECT ${M} FROM AggregatedTimestamps)`;return[...C.filters??[],{type:"sql",condition:t},...L?[{type:"sql",condition:s}]:[],{type:"sql",condition:"indexHint((_part, _part_offset) IN PartIds)"}]},{data:O,error:F}=(0,e0.HD)({...C,with:R(!0),select:"*",filters:P(!0),orderBy:[{ordering:"DESC",valueExpression:"rand()"}],limit:{limit:1e3}}),V=R(!1);E[2]!==P?(s=P(!1),E[2]=P,E[3]=s):s=E[3],E[4]===Symbol.for("react.memo_cache_sentinel")?(l=[{ordering:"DESC",valueExpression:"rand()"}],i={limit:1e3},E[4]=l,E[5]=i):(l=E[4],i=E[5]),E[6]!==C||E[7]!==V||E[8]!==s?(o={...C,with:V,select:"*",filters:s,orderBy:l,limit:i},E[6]=C,E[7]=V,E[8]=s,E[9]=o):o=E[9];let{data:B}=(0,e0.HD)(o);if(O?.data,B?.data,E[10]!==B?.data||E[11]!==O?.data){({percentageOccurences:d}=tI(O?.data??[])),{percentageOccurences:c}=tI(B?.data??[]);let e=new Set([...d.keys()]);0===e.size&&(e=new Set([...c.keys()])),u=Array.from(e).map(e=>{let t=c.get(e)??new Map,s=tL(d.get(e)??new Map,t),n=0;return s.forEach(e=>{let t=Math.abs(e.outlierCount-e.inlierCount);t>n&&(n=t)}),[e,n]}).sort(tO).map(tP),E[10]=B?.data,E[11]=O?.data,E[12]=c,E[13]=d,E[14]=u}else c=E[12],d=E[13],u=E[14];let W=u;E[15]!==c||E[16]!==d||E[17]!==W?(m={sortedProperties:W,outlierValueOccurences:d,inlierValueOccurences:c},E[15]=c,E[16]=d,E[17]=W,E[18]=m):m=E[18];let{sortedProperties:H,outlierValueOccurences:q,inlierValueOccurences:X}=m,[Y,J]=(0,r.useState)(1),{ref:K,width:G,height:Z}=(0,tA.L)(),U=Math.max(1,Math.floor((G+16)/356)),Q=U*Math.max(1,Math.floor((Z-48+16)/136));if(E[19]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{J(1)},E[19]=h):h=E[19],E[20]!==Q||E[21]!==T||E[22]!==N||E[23]!==I||E[24]!==z?(p=[Q,N,T,z,I],E[20]=Q,E[21]=T,E[22]=N,E[23]=I,E[24]=z,E[25]=p):p=E[25],(0,r.useEffect)(h,p),F){let e,t,s,a,r,l;return E[26]===Symbol.for("react.memo_cache_sentinel")?(e={overflow:"auto"},E[26]=e):e=E[26],E[27]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(w.E,{my:"sm",size:"sm",children:"Error Message:"}),E[27]=t):t=E[27],E[28]===Symbol.for("react.memo_cache_sentinel")?(s={whiteSpace:"pre-wrap"},E[28]=s):s=E[28],E[29]!==F.message?(a=(0,n.jsxs)(A.a,{mt:"lg",children:[t,(0,n.jsx)(D.C,{block:!0,style:s,children:F.message})]}),E[29]=F.message,E[30]=a):a=E[30],E[31]!==F?(r=F instanceof y.p1&&(0,n.jsxs)(A.a,{mt:"lg",children:[(0,n.jsx)(w.E,{my:"sm",size:"sm",children:"Original Query:"}),(0,n.jsx)(D.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:(0,n.jsx)(tn.V,{data:F.query,formatData:!0})})]}),E[31]=F,E[32]=r):r=E[32],E[33]!==a||E[34]!==r?(l=(0,n.jsxs)(tk.m,{style:e,children:[a,r]}),E[33]=a,E[34]=r,E[35]=l):l=E[35],l}let ee=Math.ceil(H.length/Q);E[36]===Symbol.for("react.memo_cache_sentinel")?(x={overflow:"hidden",height:"100%",display:"flex",flexDirection:"column"},E[36]=x):x=E[36];let et=`repeat(${U}, 1fr)`;if(E[37]!==et?(g={display:"grid",gridTemplateColumns:et,gap:16},E[37]=et,E[38]=g):g=E[38],E[39]!==Q||E[40]!==Y||E[41]!==X||E[42]!==q||E[43]!==H){let e;E[45]!==X||E[46]!==q?(e=e=>(0,n.jsx)(tR,{name:e,outlierValueOccurences:q.get(e)??new Map,inlierValueOccurences:X.get(e)??new Map},e),E[45]=X,E[46]=q,E[47]=e):e=E[47],f=H.slice((Y-1)*Q,Y*Q).map(e),E[39]=Q,E[40]=Y,E[41]=X,E[42]=q,E[43]=H,E[44]=f}else f=E[44];E[48]!==g||E[49]!==f?(b=(0,n.jsx)("div",{style:g,children:f}),E[48]=g,E[49]=f,E[50]=b):b=E[50];let es=ee>1?"visible":"hidden";return E[51]!==es?(v={marginTop:"auto",paddingTop:16,visibility:es},E[51]=es,E[52]=v):v=E[52],E[53]!==Y||E[54]!==ee?(j=(0,n.jsx)(tN.d,{size:"xs",value:Y,onChange:J,total:ee}),E[53]=Y,E[54]=ee,E[55]=j):j=E[55],E[56]!==v||E[57]!==j?(_=(0,n.jsx)($.s,{justify:"flex-end",style:v,children:j}),E[56]=v,E[57]=j,E[58]=_):_=E[58],E[59]!==K||E[60]!==b||E[61]!==_?(S=(0,n.jsxs)(A.a,{ref:K,p:"sm",style:x,children:[b,_]}),E[59]=K,E[60]=b,E[61]=_,E[62]=S):S=E[62],S}function tP(e){return e[0]}function tO(e,t){return t[1]-e[1]}function tF(e,t){return t.value-e.value}function tV(e){return(0,n.jsxs)("div",{children:[e.name,": ",e.value.toFixed(2),"%"]},e.dataKey)}var tB=s(1639);let tW=g.Ik({value:g.Yj().trim().min(1),count:g.Yj().trim().optional()});function tH(e){let t,s,l,i,o,c,d,u,m,h,x,g,f,y,v,_=(0,a.c)(42),{chartConfig:S,source:E,isReady:C}=e;_[0]!==E?(t=p.tU.withDefault((0,ew.Dp)(E)),_[0]=E,_[1]=t):t=_[1],_[2]===Symbol.for("react.memo_cache_sentinel")?(s=p.tU.withDefault("count()"),_[2]=s):s=_[2],_[3]!==t?(l={value:t,count:s,xMin:p.YC,xMax:p.YC,yMin:p.YC,yMax:p.YC},_[3]=t,_[4]=l):l=_[4];let[k,N]=(0,p.ab)(l),[T,z]=(0,r.useState)(null);_[5]===Symbol.for("react.memo_cache_sentinel")?(i={overflow:"hidden"},_[5]=i):i=_[5],_[6]!==E?(o=(0,b.VO)(E),_[6]=E,_[7]=o):o=_[7],_[8]!==k.count||_[9]!==k.value?(c={value:k.value,count:k.count},_[8]=k.count,_[9]=k.value,_[10]=c):c=_[10],_[11]!==N?(d=e=>{N({value:e.value,count:e.count})},_[11]=N,_[12]=d):d=_[12],_[13]!==T||_[14]!==o||_[15]!==c||_[16]!==d?(u=(0,n.jsx)(A.a,{px:"sm",pt:"xs",mb:0,children:(0,n.jsx)(tq,{connection:o,defaultValues:c,parentRef:T,onSubmit:d})}),_[13]=T,_[14]=o,_[15]=c,_[16]=d,_[17]=u):u=_[17],_[18]===Symbol.for("react.memo_cache_sentinel")?(m={minHeight:210,maxHeight:210,width:"100%",position:"relative"},_[18]=m):m=_[18];let I=k.count||void 0;return _[19]!==k.value||_[20]!==I?(h=[{aggFn:"heatmap",valueExpression:k.value,countExpression:I}],_[19]=k.value,_[20]=I,_[21]=h):h=_[21],_[22]!==S||_[23]!==h?(x={...S,select:h,granularity:"auto",displayType:j.t2.Heatmap},_[22]=S,_[23]=h,_[24]=x):x=_[24],_[25]!==N?(g=(e,t,s,n)=>{N({xMin:e,xMax:t,yMin:s,yMax:n})},_[25]=N,_[26]=g):g=_[26],_[27]!==C||_[28]!==x||_[29]!==g?(f=(0,n.jsx)("div",{style:m,children:(0,n.jsx)(tB.A,{config:x,enabled:C,onFilter:g})}),_[27]=C,_[28]=x,_[29]=g,_[30]=f):f=_[30],_[31]!==S||_[32]!==k.value||_[33]!==k.xMax||_[34]!==k.xMin||_[35]!==k.yMax||_[36]!==k.yMin?(y=null!=k.xMin&&null!=k.xMax&&null!=k.yMin&&null!=k.yMax?(0,n.jsx)(tD,{config:{...S,with:void 0},valueExpr:k.value,xMin:k.xMin,xMax:k.xMax,yMin:k.yMin,yMax:k.yMax}):(0,n.jsx)(M.o,{mih:100,h:"100%",children:(0,n.jsx)(w.E,{size:"sm",children:"Please highlight an outlier range in the heatmap to view the delta chart."})}),_[31]=S,_[32]=k.value,_[33]=k.xMax,_[34]=k.xMin,_[35]=k.yMax,_[36]=k.yMin,_[37]=y):y=_[37],_[38]!==f||_[39]!==y||_[40]!==u?(v=(0,n.jsxs)($.s,{direction:"column",w:"100%",style:i,ref:z,children:[u,f,y]}),_[38]=f,_[39]=y,_[40]=u,_[41]=v):v=_[41],v}function tq(e){let t,s,r,l,i,o,c,d,u,m,h,p,g,y=(0,a.c)(34),{connection:b,defaultValues:v,parentRef:j,onSubmit:_}=e;y[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,f.u)(tW),y[0]=t):t=y[0],y[1]!==v?(s={resolver:t,defaultValues:v},y[1]=v,y[2]=s):s=y[2];let S=(0,x.mN)(s);y[3]!==S||y[4]!==_?(r=S.handleSubmit(_),y[3]=S,y[4]=_,y[5]=r):r=y[5],y[6]===Symbol.for("react.memo_cache_sentinel")?(l={position:"relative"},y[6]=l):l=y[6];let w=S.control;y[7]!==S||y[8]!==_?(i=S.handleSubmit(_),y[7]=S,y[8]=_,y[9]=i):i=y[9];let E=S.formState.errors.value?.message;y[10]===Symbol.for("react.memo_cache_sentinel")?(o={required:!0},y[10]=o):o=y[10],y[11]!==b||y[12]!==S.control||y[13]!==j||y[14]!==i||y[15]!==E?(c=(0,n.jsx)(eX.Z,{parentRef:j,tableConnection:b,control:w,name:"value",size:"xs",tooltipText:"Controls the Y axis range and scale — defines the metric plotted vertically.",placeholder:"SQL expression",language:"sql",onSubmit:i,label:"Value",error:E,rules:o}),y[11]=b,y[12]=S.control,y[13]=j,y[14]=i,y[15]=E,y[16]=c):c=y[16];let k=S.control;y[17]!==S||y[18]!==_?(d=S.handleSubmit(_),y[17]=S,y[18]=_,y[19]=d):d=y[19];let N=S.formState.errors.count?.message;return y[20]===Symbol.for("react.memo_cache_sentinel")?(u={required:!0},y[20]=u):u=y[20],y[21]!==b||y[22]!==S.control||y[23]!==j||y[24]!==d||y[25]!==N?(m=(0,n.jsx)(eX.Z,{parentRef:j,tableConnection:b,control:k,name:"count",placeholder:"SQL expression",language:"sql",size:"xs",tooltipText:"Controls the color intensity (Z axis) — shows how frequently or strongly each value occurs.",onSubmit:d,label:"Count",error:N,rules:u}),y[21]=b,y[22]=S.control,y[23]=j,y[24]=d,y[25]=N,y[26]=m):m=y[26],y[27]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)(C.$,{variant:"secondary",type:"submit",size:"xs",leftSection:(0,n.jsx)(q.A,{size:16}),children:"Run"}),y[27]=h):h=y[27],y[28]!==m||y[29]!==c?(p=(0,n.jsxs)($.s,{m:"0",mb:"xs",align:"stretch",gap:"xs",children:[c,m,h]}),y[28]=m,y[29]=c,y[30]=p):p=y[30],y[31]!==p||y[32]!==r?(g=(0,n.jsx)("form",{onSubmit:r,style:l,children:p}),y[31]=p,y[32]=r,y[33]=g):g=y[33],g}var tX=s(86761),tY=s(13759);class tJ{detect(e){let t=!1,s=!1;for(let n of e)if("'"===n)s?s=!1:t=!t;else if('"'===n){if(t)continue;return!0}else"\\"===n&&(s=!0);return!1}userMessage(e){return`ClickHouse does not support double quotes (") but they were detected in ${e.toUpperCase()}. Switch to single quotes?`}correct(e){let t=!1,s="",n=!1;for(let a=0;a<e.length;a++)switch(e[a]){case"'":n?t=!t:n=!1,s+=e[a];break;case'"':s+=t?'"':"'";break;case"\\":n=!0,s+=e[a];break;default:s+=e[a]}return s}}let tK=[new tJ];var tG=s(17978),tZ=s(93108),tU=s(69580),tQ=s(39603),t0=s(61982),t1=s(32963),t2=s(9841),t3=s(93251),t5=s(12869),t4=s(26932);let t6=e=>{let t,s,r,l,i,o,c,d,u=(0,a.c)(31),{source:m,where:h,whereLanguage:p,interval:x,groupBy:g,threshold:f,thresholdType:y,select:b}=e,v=(b&&b.trim().length>0?b:m.defaultTableSelectExpression)??"",j=h||"",_=p||void 0;u[0]!==v||u[1]!==m.connection||u[2]!==m.from||u[3]!==j||u[4]!==_?(t={select:v,where:j,connection:m.connection,from:m.from,whereLanguage:_},u[0]=v,u[1]=m.connection,u[2]=m.from,u[3]=j,u[4]=_,u[5]=t):t=u[5];let{data:S}=(0,e0.Kc)(t);u[6]!==S?(s=(0,e8.C2)(S),u[6]=S,u[7]=s):s=u[7];let w=s,E=m.id;u[8]!==f||u[9]!==y?(r=(0,t4.h)({threshold:f,thresholdType:y}),u[8]=f,u[9]=y,u[10]=r):r=u[10];let C=h||"",k=p||void 0;return u[11]!==x?(l=(0,t5.gK)(x),u[11]=x,u[12]=l):l=u[12],u[13]!==x?(i=(0,t5.lT)(x),u[13]=x,u[14]=i):i=u[14],u[15]===Symbol.for("react.memo_cache_sentinel")?(o=[{aggFn:"count",aggCondition:"",aggConditionLanguage:"sql",valueExpression:""}],u[15]=o):o=u[15],u[16]!==w||u[17]!==g||u[18]!==m.connection||u[19]!==m.from||u[20]!==m.implicitColumnExpression||u[21]!==m.timestampValueExpression||u[22]!==i||u[23]!==C||u[24]!==k||u[25]!==l?(c={where:C,whereLanguage:k,dateRange:l,granularity:i,implicitColumnExpression:m.implicitColumnExpression,groupBy:g,with:w,select:o,timestampValueExpression:m.timestampValueExpression,from:m.from,connection:m.connection},u[16]=w,u[17]=g,u[18]=m.connection,u[19]=m.from,u[20]=m.implicitColumnExpression,u[21]=m.timestampValueExpression,u[22]=i,u[23]=C,u[24]=k,u[25]=l,u[26]=c):c=u[26],u[27]!==m.id||u[28]!==c||u[29]!==r?(d=(0,n.jsx)(L.t,{w:"100%",h:200,children:(0,n.jsx)(eV.S,{sourceId:E,showDisplaySwitcher:!1,showMVOptimizationIndicator:!1,showDateRangeIndicator:!1,referenceLines:r,config:c})}),u[27]=m.id,u[28]=c,u[29]=r,u[30]=d):d=u[30],d};var t7=s(17513);let t8=g.Ik({interval:j.lZ,threshold:g.ai().int().min(1),thresholdType:g.fc(j.qQ),channel:j.Oq}).passthrough(),t9=e=>{let t,s,r,l,i,o,c,d,u,m,h,p,g,y,v,_,S,E,k,A,$,z,I,M,R,D,P,O,F,V,B,W,H,q,X,Y,J,K,G,Z,U,Q,ee=(0,a.c)(98),{sourceId:et,where:es,whereLanguage:ea,select:er,defaultValues:el,loading:ei,deleteLoading:eo,hasSavedSearch:ec,onDelete:ed,onSubmit:eu,onClose:em}=e;ee[0]!==et?(t={id:et},ee[0]=et,ee[1]=t):t=ee[1];let{data:eh}=(0,ew.Fo)(t);ee[2]!==el?(s=el||{interval:"5m",threshold:1,thresholdType:j.qQ.ABOVE,source:j.w5.SAVED_SEARCH,channel:{type:"webhook",webhookId:""}},ee[2]=el,ee[3]=s):s=ee[3],ee[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,f.u)(t8),ee[4]=r):r=ee[4],ee[5]!==s?(l={defaultValues:s,resolver:r},ee[5]=s,ee[6]=l):l=ee[6];let{control:ep,handleSubmit:ex}=(0,x.mN)(l);ee[7]!==ep?(i={control:ep,name:"groupBy"},ee[7]=ep,ee[8]=i):i=ee[8];let eg=(0,x.FH)(i);ee[9]!==ep?(o={control:ep,name:"thresholdType"},ee[9]=ep,ee[10]=o):o=ee[10];let ef=(0,x.FH)(o);ee[11]!==ep?(c={control:ep,name:"channel.type"},ee[11]=ep,ee[12]=c):c=ee[12];let ey=(0,x.FH)(c);ee[13]!==ep?(d={control:ep,name:"interval"},ee[13]=ep,ee[14]=d):d=ee[14];let eb=(0,x.FH)(d);ee[15]!==ep?(u={control:ep,name:"groupBy"},ee[15]=ep,ee[16]=u):u=ee[16];let ev=(0,x.FH)(u);ee[17]!==ep?(m={control:ep,name:"threshold"},ee[17]=ep,ee[18]=m):m=ee[18];let ej=(0,x.FH)(m);ee[19]!==ex||ee[20]!==eu?(h=ex(eu),ee[19]=ex,ee[20]=eu,ee[21]=h):h=ee[21],ee[22]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)(w.E,{size:"xxs",opacity:.5,children:"Trigger"}),ee[22]=p):p=ee[22],ee[23]===Symbol.for("react.memo_cache_sentinel")?(g=(0,n.jsx)(w.E,{size:"sm",opacity:.7,children:"Alert when"}),ee[23]=g):g=ee[23],ee[24]===Symbol.for("react.memo_cache_sentinel")?(y=(0,eE.kR)(t5.nq),ee[24]=y):y=ee[24],ee[25]!==ep?(v=(0,n.jsx)(tU.mh,{data:y,size:"xs",name:"thresholdType",control:ep}),_=(0,n.jsx)(tU.Q7,{min:1,size:"xs",w:80,control:ep,name:"threshold"}),ee[25]=ep,ee[26]=v,ee[27]=_):(v=ee[26],_=ee[27]),ee[28]===Symbol.for("react.memo_cache_sentinel")?(S=(0,n.jsx)(w.E,{size:"sm",opacity:.7,children:"lines appear within"}),ee[28]=S):S=ee[28],ee[29]===Symbol.for("react.memo_cache_sentinel")?(E=(0,eE.kR)(t5.A8),ee[29]=E):E=ee[29],ee[30]!==ep?(k=(0,n.jsx)(tU.mh,{data:E,size:"xs",name:"interval",control:ep}),ee[30]=ep,ee[31]=k):k=ee[31],ee[32]===Symbol.for("react.memo_cache_sentinel")?(A=(0,n.jsx)(w.E,{size:"sm",opacity:.7,children:"via"}),ee[32]=A):A=ee[32],ee[33]===Symbol.for("react.memo_cache_sentinel")?($=(0,eE.kR)(t5.mo),ee[33]=$):$=ee[33],ee[34]!==ep?(z=(0,n.jsx)(tU.mh,{data:$,size:"xs",name:"channel.type",control:ep}),ee[34]=ep,ee[35]=z):z=ee[35],ee[36]!==v||ee[37]!==_||ee[38]!==k||ee[39]!==z?(I=(0,n.jsxs)(T.Y,{gap:"xs",children:[g,v,_,S,k,A,z]}),ee[36]=v,ee[37]=_,ee[38]=k,ee[39]=z,ee[40]=I):I=ee[40],ee[41]===Symbol.for("react.memo_cache_sentinel")?(M=(0,n.jsx)(w.E,{size:"xxs",opacity:.5,mb:4,mt:"xs",children:"grouped by"}),ee[41]=M):M=ee[41],ee[42]!==eh?(R=(0,b.VO)(eh),ee[42]=eh,ee[43]=R):R=ee[43],ee[44]!==ep||ee[45]!==R?(D=(0,n.jsx)(eX.Z,{tableConnection:R,control:ep,name:"groupBy",placeholder:"SQL Columns",disableKeywordAutocomplete:!0,size:"xs"}),ee[44]=ep,ee[45]=R,ee[46]=D):D=ee[46],ee[47]!==I||ee[48]!==D?(P=(0,n.jsxs)(L.t,{px:"md",py:"sm",radius:"xs",children:[p,I,M,D]}),ee[47]=I,ee[48]=D,ee[49]=P):P=ee[49],ee[50]===Symbol.for("react.memo_cache_sentinel")?(O=(0,n.jsx)(w.E,{size:"xxs",opacity:.5,mb:4,children:"Send to"}),ee[50]=O):O=ee[50],ee[51]!==ey||ee[52]!==ep?(F=(0,n.jsxs)(L.t,{px:"md",py:"sm",radius:"xs",children:[O,(0,n.jsx)(t4.e,{control:ep,type:ey})]}),ee[51]=ey,ee[52]=ep,ee[53]=F):F=ee[53],ee[54]!==eg||ee[55]!==ef?(V=eg&&ef===j.qQ.BELOW&&(0,n.jsx)(tQ.F,{icon:(0,n.jsx)(t1.A,{size:16}),bg:"dark",py:"xs",children:(0,n.jsx)(w.E,{size:"sm",opacity:.7,children:'Warning: Alerts with a "Below (<)" threshold and a "grouped by" value will not alert for periods with no data for a group.'})}),ee[54]=eg,ee[55]=ef,ee[56]=V):V=ee[56],ee[57]!==P||ee[58]!==F||ee[59]!==V?(B=(0,n.jsxs)(N.B,{gap:"xs",children:[P,F,V]}),ee[57]=P,ee[58]=F,ee[59]=V,ee[60]=B):B=ee[60],ee[61]===Symbol.for("react.memo_cache_sentinel")?(W=(0,n.jsx)(en.n.Control,{icon:(0,n.jsx)(t2.A,{size:16}),children:(0,n.jsx)(w.E,{size:"sm",children:"Threshold chart"})}),ee[61]=W):W=ee[61],ee[62]!==ev||ee[63]!==eb||ee[64]!==er||ee[65]!==eh||ee[66]!==ej||ee[67]!==ef||ee[68]!==es||ee[69]!==ea?(H=eh&&(0,n.jsx)(t6,{source:eh,where:es,whereLanguage:ea,select:er,interval:eb,groupBy:ev,threshold:ej,thresholdType:ef}),ee[62]=ev,ee[63]=eb,ee[64]=er,ee[65]=eh,ee[66]=ej,ee[67]=ef,ee[68]=es,ee[69]=ea,ee[70]=H):H=ee[70],ee[71]!==H?(q=(0,n.jsx)(en.n,{defaultValue:"chart",mt:"sm",mx:-16,children:(0,n.jsxs)(en.n.Item,{value:"chart",children:[W,(0,n.jsx)(en.n.Panel,{children:H})]})}),ee[71]=H,ee[72]=q):q=ee[72],ee[73]!==el?(X=el?.createdBy&&(0,n.jsxs)(L.t,{px:"md",py:"sm",radius:"xs",mt:"sm",children:[(0,n.jsx)(w.E,{size:"xxs",opacity:.5,mb:4,children:"Created by"}),(0,n.jsx)(w.E,{size:"sm",opacity:.8,children:el.createdBy.name||el.createdBy.email}),el.createdBy.name&&(0,n.jsx)(w.E,{size:"xs",opacity:.6,children:el.createdBy.email})]}),ee[73]=el,ee[74]=X):X=ee[74],ee[75]!==el||ee[76]!==eo||ee[77]!==ed?(Y=el&&(0,n.jsx)(C.$,{variant:"subtle",color:"red",size:"compact-sm",onClick:()=>ed(el.id),loading:eo,children:"Delete Alert"}),ee[75]=el,ee[76]=eo,ee[77]=ed,ee[78]=Y):Y=ee[78],ee[79]!==Y?(J=(0,n.jsx)("div",{children:Y}),ee[79]=Y,ee[80]=J):J=ee[80],ee[81]!==em?(K=(0,n.jsx)(C.$,{variant:"secondary",onClick:em,children:"Cancel"}),ee[81]=em,ee[82]=K):K=ee[82];let e_=el?"Save Alert":ec?"Create Alert":"Save Search with Alert";return ee[83]!==ei||ee[84]!==e_?(G=(0,n.jsx)(C.$,{variant:"primary",type:"submit",loading:ei,children:e_}),ee[83]=ei,ee[84]=e_,ee[85]=G):G=ee[85],ee[86]!==K||ee[87]!==G?(Z=(0,n.jsxs)(T.Y,{gap:"xs",children:[K,G]}),ee[86]=K,ee[87]=G,ee[88]=Z):Z=ee[88],ee[89]!==J||ee[90]!==Z?(U=(0,n.jsxs)(T.Y,{mt:"lg",justify:"space-between",gap:"xs",children:[J,Z]}),ee[89]=J,ee[90]=Z,ee[91]=U):U=ee[91],ee[92]!==h||ee[93]!==B||ee[94]!==q||ee[95]!==X||ee[96]!==U?(Q=(0,n.jsxs)("form",{onSubmit:h,children:[B,q,X,U]}),ee[92]=h,ee[93]=B,ee[94]=q,ee[95]=X,ee[96]=U,ee[97]=Q):Q=ee[97],Q},se=({id:e,searchedConfig:t,onClose:s,open:a})=>{let l=(0,tt.Kh)(),i=(0,t3.jE)(),o=eU.Ay.useCreateAlert(),c=eU.Ay.useUpdateAlert(),d=eU.Ay.useDeleteAlert(),u=(0,te.V3)(),{data:m,isLoading:p}=(0,te.rs)({id:e||""},{enabled:!!e}),[x,g]=r.useState("stage"),[f,y]=r.useState(""),b=async n=>{try{if(!e&&t){if(!f)return void V.$e.show({color:"red",message:"Please provide a name for the saved search.",autoClose:5e3});let e=await u.mutateAsync({name:f,select:t.select??"",where:t.where??"",whereLanguage:t.whereLanguage??(0,eq.S)()??"lucene",source:t.source??"",orderBy:t.orderBy??"",filters:t.filters??[],tags:[]});await o.mutate({...n,source:j.w5.SAVED_SEARCH,savedSearchId:e.id}),h().push(`/search/${e.id}`),s()}else if(e){if("stage"===x)await o.mutate({...n,source:j.w5.SAVED_SEARCH,savedSearchId:e});else{if(!n.id)return;await c.mutate({...n,id:n.id,source:j.w5.SAVED_SEARCH,savedSearchId:e})}V.$e.show({color:"green",message:`Alert ${"stage"===x?"created":"updated"}!`,autoClose:5e3})}}catch(e){V.$e.show({color:"red",message:`Something went wrong. Please contact ${l} team.`,autoClose:5e3})}i.invalidateQueries({queryKey:["saved-search"]}),s()},v=async e=>{try{await d.mutate(e),V.$e.show({color:"green",message:"Alert deleted!",autoClose:5e3})}catch(e){V.$e.show({color:"red",message:`Something went wrong. Please contact ${l} team.`,autoClose:5e3})}i.invalidateQueries({queryKey:["saved-search"]}),s()};return(0,n.jsx)(E.a,{"data-testid":"alerts-modal",opened:a,onClose:s,size:"xl",withCloseButton:!1,zIndex:9999,children:(0,n.jsxs)(A.a,{pos:"relative",children:[(0,n.jsx)(t0.p,{visible:p,m:-16,zIndex:1e3,overlayProps:{radius:"sm"},loaderProps:{type:"dots"}}),(0,n.jsxs)(N.B,{gap:0,mb:"md",children:[(0,n.jsxs)(T.Y,{children:[(0,n.jsxs)(w.E,{size:"sm",children:["Alerts for ",(0,n.jsx)("strong",{children:m?.name})]}),!e&&(0,n.jsx)(ea.k,{size:"xs",placeholder:"Saved search name",value:f,onChange:e=>y(e.currentTarget.value),required:!0})]}),(0,n.jsx)(w.E,{size:"xxs",children:m?.where})]}),(0,n.jsx)(ei.t,{value:x,onChange:e=>{null===e||("stage"===e?g(e):g(`${parseInt(e)}`))},mb:"xs",children:(0,n.jsxs)(ei.t.List,{children:[(m?.alerts||[]).map((e,t)=>(0,n.jsx)(ei.t.Tab,{value:`${t}`,children:(0,n.jsxs)(T.Y,{gap:"xs",children:[(0,t7.WD)(e.channel.type)," Alert ",t+1]})},e.id)),(0,n.jsx)(ei.t.Tab,{value:"stage",children:(0,n.jsxs)(T.Y,{gap:4,children:[(0,n.jsx)(Y.A,{size:18,style:{marginLeft:-8}}),"New Alert"]})})]})}),(0,n.jsx)(t9,{hasSavedSearch:!!m,sourceId:t?.source,where:t?.where,whereLanguage:t?.whereLanguage,select:t?.select,defaultValues:"stage"===x?null:m?.alerts?.[parseInt(x)],onSubmit:b,onDelete:v,deleteLoading:d.isPending,onClose:s,loading:c.isPending||o.isPending},x)]})})},st=[{value:"1000",label:"1s"},{value:"2000",label:"2s"},{value:"4000",label:"4s"},{value:"10000",label:"10s"},{value:"30000",label:"30s"}],ss=[j.GL.Log,j.GL.Trace],sn=g.Ik({select:g.Yj(),source:g.Yj(),where:g.Yj(),whereLanguage:g.k5(["sql","lucene"]),orderBy:g.Yj(),filters:g.YO(g.KC([g.Ik({type:g.eu("sql_ast"),operator:g.k5(["=","<",">",">=","<=","!="]),left:g.Yj(),right:g.Yj()}),g.Ik({type:g.k5(["sql","lucene"]),condition:g.Yj()})]))});function sa(e){let t,s,r,l,i,o,c=(0,a.c)(10),{setModalOpen:d,setModelFormExpanded:m}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(_.W.Target,{children:(0,n.jsx)(S.M,{"data-testid":"source-settings-menu",variant:"subtle",size:"sm",title:"Edit Source",children:(0,n.jsx)(w.E,{size:"xs",children:(0,n.jsx)(B.A,{size:14})})})}),c[0]=t):t=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsx)(_.W.Label,{children:"Sources"}),c[1]=s):s=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(W.A,{size:14}),c[2]=r):r=c[2],c[3]!==d?(l=(0,n.jsx)(_.W.Item,{"data-testid":"create-new-source-menu-item",leftSection:r,onClick:()=>d(!0),children:"Create New Source"}),c[3]=d,c[4]=l):l=c[4],c[5]!==m?(i=ev.VO?(0,n.jsx)(_.W.Item,{"data-testid":"edit-sources-menu-item",leftSection:(0,n.jsx)(B.A,{size:14}),onClick:()=>m(sr),children:"Edit Source"}):(0,n.jsx)(_.W.Item,{"data-testid":"edit-sources-menu-item",leftSection:(0,n.jsx)(B.A,{size:14}),component:u(),href:"/team",children:"Edit Sources"}),c[5]=m,c[6]=i):i=c[6],c[7]!==l||c[8]!==i?(o=(0,n.jsxs)(_.W,{withArrow:!0,position:"bottom-start",children:[t,(0,n.jsxs)(_.W.Dropdown,{children:[s,l,i]})]}),c[7]=l,c[8]=i,c[9]=o):o=c[9],o}function sr(e){return!e}function sl(e){let t,s,r=(0,a.c)(6),{opened:l,onClose:i,inputSource:o}=e;return r[0]!==o?(t=(0,n.jsx)(e3.Eb,{sourceId:o}),r[0]=o,r[1]=t):t=r[1],r[2]!==i||r[3]!==l||r[4]!==t?(s=(0,n.jsx)(E.a,{size:"xl",opened:l,onClose:i,title:"Edit Source",children:t}),r[2]=i,r[3]=l,r[4]=t,r[5]=s):s=r[5],s}function si(e){let t,s,r=(0,a.c)(6),{opened:l,onClose:i,onCreate:o}=e;return r[0]!==o?(t=(0,n.jsx)(e3.Eb,{isNew:!0,defaultName:"My New Source",onCreate:o}),r[0]=o,r[1]=t):t=r[1],r[2]!==i||r[3]!==l||r[4]!==t?(s=(0,n.jsx)(E.a,{size:"xl",opened:l,onClose:i,title:"Configure New Source",children:t}),r[2]=i,r[3]=l,r[4]=t,r[5]=s):s=r[5],s}function so(e){let t,s,r=(0,a.c)(4),{handleResumeLiveTail:l}=e,{themeName:i}=(0,tt.o3)(),o="clickstack"===i?"secondary":"primary";return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(H.A,{size:14}),r[0]=t):t=r[0],r[1]!==l||r[2]!==o?(s=(0,n.jsx)(C.$,{size:"compact-xs",variant:o,onClick:l,leftSection:t,children:"Resume Live Tail"}),r[1]=l,r[2]=o,r[3]=s):s=r[3],s}function sc(e){let t,s,r,l=(0,a.c)(4),{isFormStateDirty:i}=e,o=i?"primary":"secondary";return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(q.A,{size:16}),s={flexShrink:0},l[0]=t,l[1]=s):(t=l[0],s=l[1]),l[2]!==o?(r=(0,n.jsx)(C.$,{"data-testid":"search-submit-button",variant:o,type:"submit",leftSection:t,style:s,children:"Run"}),l[2]=o,l[3]=r):r=l[3],r}function sd(e){let t,s,r,l=(0,a.c)(8),{config:i,enabled:o}=e;l[0]!==o?(t={enabled:o},l[0]=o,l[1]=t):t=l[1];let{data:c,isLoading:d,error:u}=(0,e7.R)(i,t);if(!o)return null;let m=c?.[0]?.rows;return l[2]!==u||l[3]!==d||l[4]!==m?(s=d?"Scanned Rows ...":u||!m?"":`Scanned Rows: ${Number.parseInt(m)?.toLocaleString()}`,l[2]=u,l[3]=d,l[4]=m,l[5]=s):s=l[5],l[6]!==s?(r=(0,n.jsx)(w.E,{size:"xs",mb:4,children:s}),l[6]=s,l[7]=r):r=l[7],r}function su(e,t){return(0,n.jsx)(w.E,{size:"xs",c:"dimmed",children:"sql_ast"===e.type?`${e.left} ${e.operator} ${e.right}`:e.condition},t)}function sm(e){return!!(e&&e.trim().length>0)}let sh=(0,r.memo)(function(e){let t,s,l,i,o,c,d,u,m,p,g,f,y,b,v,j,_,$,z,I,L,M,R,D=(0,a.c)(58),{searchedConfig:P,opened:O,onClose:F,isUpdate:V,savedSearchId:B}=e,W=B??"";D[0]!==W?(t={id:W},D[0]=W,D[1]=t):t=D[1];let H=null!=B;D[2]!==H?(s={enabled:H},D[2]=H,D[3]=s):s=D[3];let{data:q}=(0,te.rs)(t,s);D[4]!==V||D[5]!==q?.name?(l=V?{values:{name:q?.name??""}}:{},D[4]=V,D[5]=q?.name,D[6]=l):l=D[6],D[7]===Symbol.for("react.memo_cache_sentinel")?(i={keepDirtyValues:!0,keepErrors:!0},D[7]=i):i=D[7],D[8]!==l?(o={...l,resetOptions:i},D[8]=l,D[9]=o):o=D[9];let{control:J,handleSubmit:K,formState:G,reset:Z}=(0,x.mN)(o);D[10]!==F||D[11]!==Z?(c=()=>{Z(),F()},D[10]=F,D[11]=Z,D[12]=c):c=D[12];let U=c;D[13]!==q?.tags?(d=q?.tags||[],D[13]=q?.tags,D[14]=d):d=D[14];let[Q,ee]=(0,r.useState)(d);D[15]!==q?(u=()=>{q?.tags&&ee(q.tags)},m=[q],D[15]=q,D[16]=u,D[17]=m):(u=D[16],m=D[17]),(0,r.useEffect)(u,m);let et=(0,te.V3)(),es=(0,te.CI)();D[18]!==et||D[19]!==K||D[20]!==V||D[21]!==F||D[22]!==B||D[23]!==P||D[24]!==Q||D[25]!==es?(p=e=>{e.preventDefault(),K(e=>{let{name:t}=e;if(V){if(null==B)throw Error("savedSearchId is required for update");es.mutate({id:B,name:t,select:P.select??"",where:P.where??"",whereLanguage:P.whereLanguage??(0,eq.S)()??"lucene",source:P.source??"",orderBy:P.orderBy??"",filters:P.filters??[],tags:Q},{onSuccess:()=>{F()}})}else et.mutate({name:t,select:P.select??"",where:P.where??"",whereLanguage:P.whereLanguage??(0,eq.S)()??"lucene",source:P.source??"",orderBy:P.orderBy??"",filters:P.filters??[],tags:Q},{onSuccess:e=>{h().push(`/search/${e.id}${window.location.search}`),F()}})})()},D[18]=et,D[19]=K,D[20]=V,D[21]=F,D[22]=B,D[23]=P,D[24]=Q,D[25]=es,D[26]=p):p=D[26];let en=p,{data:ea}=sx(P);D[27]!==ea||D[28]!==P?(g=null!=ea?(0,n.jsxs)(k.Z,{withBorder:!0,children:[(0,n.jsx)(w.E,{size:"xs",mb:"xs",children:"SELECT"}),(0,n.jsx)(w.E,{mb:"sm",size:"xs",children:`${ea.select}`}),(0,n.jsx)(w.E,{size:"xs",mb:"xs",children:"FROM"}),(0,n.jsxs)(w.E,{mb:"sm",size:"xs",children:[ea?.from.databaseName,".",ea?.from.tableName]}),(0,n.jsx)(w.E,{size:"xs",mb:"xs",children:"WHERE"}),ea.where?(0,n.jsx)(w.E,{size:"xs",children:ea.where}):(0,n.jsx)(w.E,{size:"xxs",fs:"italic",children:"None"}),(0,n.jsx)(w.E,{size:"xs",mb:"xs",mt:"sm",children:"ORDER BY"}),(0,n.jsx)(w.E,{size:"xs",children:ea.orderBy}),P.filters&&P.filters.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.E,{size:"xs",mb:"xs",mt:"sm",children:"FILTERS"}),(0,n.jsx)(N.B,{gap:"xs",children:P.filters.map(su)})]})]}):(0,n.jsx)(w.E,{children:"Loading Chart Config..."}),D[27]=ea,D[28]=P,D[29]=g):g=D[29],D[30]===Symbol.for("react.memo_cache_sentinel")?(f=(0,n.jsx)(w.E,{size:"xs",mb:"xs",children:"Name"}),D[30]=f):f=D[30],D[31]===Symbol.for("react.memo_cache_sentinel")?(y={required:!0,validate:sm},D[31]=y):y=D[31],D[32]!==J?(b=(0,n.jsxs)(A.a,{children:[f,(0,n.jsx)(eW.t4,{"data-testid":"save-search-name-input",control:J,name:"name",rules:y})]}),D[32]=J,D[33]=b):b=D[33],D[34]===Symbol.for("react.memo_cache_sentinel")?(v=(0,n.jsx)(w.E,{size:"xs",mb:"xs",children:"Tags"}),D[34]=v):v=D[34],D[35]!==Q?(j=Q.map(e=>(0,n.jsx)(C.$,{variant:"secondary",size:"xs",rightSection:(0,n.jsx)(S.M,{variant:"transparent",color:"gray",onClick:t=>{t.stopPropagation(),ee(Q.filter(t=>t!==e))},size:"xs",children:(0,n.jsx)(X.A,{size:14})}),children:e.toUpperCase()},e)),D[35]=Q,D[36]=j):j=D[36],D[37]===Symbol.for("react.memo_cache_sentinel")?(_=(0,n.jsxs)(C.$,{"data-testid":"add-tag-button",variant:"secondary",size:"xs",children:[(0,n.jsx)(Y.A,{size:14,className:"me-1"}),"Add Tag"]}),D[37]=_):_=D[37],D[38]!==Q?($=(0,n.jsx)(e4.Y,{allowCreate:!0,values:Q,onChange:ee,children:_}),D[38]=Q,D[39]=$):$=D[39],D[40]!==j||D[41]!==$?(z=(0,n.jsxs)(A.a,{mb:"sm",children:[v,(0,n.jsxs)(T.Y,{gap:"xs",align:"center",mb:"xs",children:[j,$]})]}),D[40]=j,D[41]=$,D[42]=z):z=D[42];let er=!G.isValid,el=V?"Update":"Save";return D[43]!==er||D[44]!==el?(I=(0,n.jsx)(C.$,{"data-testid":"save-search-submit-button",variant:"primary",type:"submit",disabled:er,children:el}),D[43]=er,D[44]=el,D[45]=I):I=D[45],D[46]!==g||D[47]!==b||D[48]!==z||D[49]!==I?(L=(0,n.jsxs)(N.B,{children:[g,b,z,I]}),D[46]=g,D[47]=b,D[48]=z,D[49]=I,D[50]=L):L=D[50],D[51]!==en||D[52]!==L?(M=(0,n.jsx)("form",{"data-testid":"save-search-form",onSubmit:en,children:L}),D[51]=en,D[52]=L,D[53]=M):M=D[53],D[54]!==U||D[55]!==O||D[56]!==M?(R=(0,n.jsx)(E.a,{"data-testid":"save-search-modal",opened:O,onClose:U,title:"Save Search",centered:!0,size:"lg",children:M}),D[54]=U,D[55]=O,D[56]=M,D[57]=R):R=D[57],R}),sp=(0,ts.lr)("Past 15m",!1);function sx(e,t){let s,n,r=(0,a.c)(21),{select:l,source:i,whereLanguage:o,where:c,filters:d,orderBy:u}=e;r[0]!==i?(s={id:i},r[0]=i,r[1]=s):s=r[1];let{data:m,isLoading:h}=(0,ew.Fo)(s),p=sg(i);e:{let e;if(null!=m){let e,s,a,i=l||t?.select||m.defaultTableSelectExpression||"";r[2]!==d||r[3]!==m.tableFilterExpression?(e=null!=m.tableFilterExpression?{filters:[{type:"sql",condition:m.tableFilterExpression},...d??[]]}:{},r[2]=d,r[3]=m.tableFilterExpression,r[4]=e):e=r[4],r[5]!==d?(s=null!=d?{filters:d}:{},r[5]=d,r[6]=s):s=r[6];let h=c??"",x=o??"sql",g=u||t?.orderBy||p;r[7]!==m.connection||r[8]!==m.from||r[9]!==m.id||r[10]!==m.implicitColumnExpression||r[11]!==m.timestampValueExpression||r[12]!==i||r[13]!==e||r[14]!==s||r[15]!==h||r[16]!==x||r[17]!==g?(a={data:{select:i,from:m.from,source:m.id,...e,...s,where:h,whereLanguage:x,timestampValueExpression:m.timestampValueExpression,implicitColumnExpression:m.implicitColumnExpression,connection:m.connection,displayType:j.t2.Search,orderBy:g}},r[7]=m.connection,r[8]=m.from,r[9]=m.id,r[10]=m.implicitColumnExpression,r[11]=m.timestampValueExpression,r[12]=i,r[13]=e,r[14]=s,r[15]=h,r[16]=x,r[17]=g,r[18]=a):a=r[18],n=a;break e}r[19]!==h?(e={data:null,isLoading:h},r[19]=h,r[20]=e):e=r[20],n=e}return n}function sg(e){let t,s,n,r=(0,a.c)(8);r[0]!==e?(t={id:e},r[0]=e,r[1]=t):t=r[1];let{data:l}=(0,ew.Fo)(t);r[2]!==l?(s=(0,b.VO)(l),r[2]=l,r[3]=s):s=r[3];let{data:i}=(0,ej.Z2)(s);e:{let e;if(!l){n=void 0;break e}let t=l?.timestampValueExpression??"",s=l?.displayedTimestampValueExpression,a=i?.sorting_key;r[4]!==t||r[5]!==s||r[6]!==a?(e=function(e,t,s){let n="DESC",a=(0,ew.AF)(e??"")??"",r=[a],l=t?.trim();l&&l!==a&&r.push(l);let i=r.length>1?`(${r.join(", ")}) ${n}`:`${r[0]} ${n}`;if(!s)return i;let o=[],c=(0,v.AB)(s);for(let e=0;e<c.length;e++){let t=c[e];if(t.includes("toStartOf")&&t.includes(a))o.push(t);else if(t===a||t.startsWith("toUnixTimestamp")&&t.includes(a)||t.startsWith("toDateTime")&&t.includes(a))if(0===o.length)return i;else{o.push(t);break}else t===l&&o.push(t)}return 0===o.length?i:(l&&!o.includes(l)&&o.push(l),o.length>1?`(${o.join(", ")}) ${n}`:`${o[0]} ${n}`)}(t,s,a),r[4]=t,r[5]=s,r[6]=a,r[7]=e):e=r[7],n=e}return n}let sf={source:p.tU,where:tG.s,select:tG.s,whereLanguage:(0,p.Oq)(["sql","lucene"]),filters:(0,p.os)(),orderBy:tG.s};function sy(){let e=(0,tt.Kh)(),t=window.location.pathname.split("/"),s=3===t.length?t[2]:null,[l,i]=(0,p.ab)(sf),{data:o}=(0,te.rs)({id:`${s}`},{enabled:null!=s}),{data:d}=(0,ew.oE)(),[u,m]=(0,eE.Mj)("hdx-last-selected-source-id",""),{data:g}=(0,ew.Fo)({id:l.source}),[_,S]=(0,p.ZA)("mode",(0,p.Oq)(["results","delta","pattern"]).withDefault("results")),[E,k]=(0,p.ZA)("isLive",p.cr.withDefault(!0));(0,r.useEffect)(()=>{("delta"===_||"pattern"===_)&&k(!1)},[_,k]);let[N,B]=(0,p.ZA)("denoise",p.cr.withDefault(!1)),W=(0,r.useCallback)(e=>{k(!1),B(e)},[k,B]),H=(0,r.useMemo)(()=>d&&0!==d.length?u&&d.some(e=>e.id===u)?u:d[0].id:"",[d,u]),{control:q,setValue:X,reset:Y,handleSubmit:U,getValues:Q,formState:ee,setError:et,resetField:es}=(0,x.mN)({values:{select:l.select||"",where:l.where||"",whereLanguage:l.whereLanguage??(0,eq.S)()??"lucene",source:l.source||H,filters:l.filters??[],orderBy:l.orderBy??""},resetOptions:{keepDirtyValues:!0,keepErrors:!0},resolver:(0,f.u)(sn)}),en=(0,x.FH)({name:"source",control:q}),ea=sg(en),er=(0,r.useMemo)(()=>{let e=o;return s&&o?.id===s||(e=void 0),en!==o?.source&&(e=void 0),{select:e?.select??g?.defaultTableSelectExpression,where:e?.where??"",whereLanguage:e?.whereLanguage??"lucene",source:e?.source,filters:e?.filters??[],orderBy:e?.orderBy||ea}},[g,en,o,ea,s]),{data:el}=(0,ew.oE)(),ei=el?.find(e=>e.id===en),[eo,ec]=(0,r.useState)("Live Tail"),{isReady:ed,searchedTimeRange:eu,onSearch:em,onTimeRangeSelect:eh}=(0,ts.R0)({initialDisplayValue:"Live Tail",initialTimeRange:sp,showRelativeInterval:E??!0,setDisplayedTimeInputValue:ec,updateInput:!E}),ep=(0,eE.ZC)(l);(0,r.useEffect)(()=>{JSON.stringify(ep)!==JSON.stringify(l)&&Y({select:l?.select??"",where:l?.where??"",whereLanguage:l?.whereLanguage??(0,eq.S)()??"lucene",source:l?.source??void 0,filters:l?.filters??[],orderBy:l?.orderBy??""})},[l,Y,ep]),(0,r.useEffect)(()=>{let{source:e,where:t,select:n,whereLanguage:a,filters:r}=l,c=!e&&!t&&!n&&!a&&!r?.length;null!=o&&o.id===s&&c?i({source:o.source,where:o.where,select:o.select,whereLanguage:o.whereLanguage,filters:o.filters??[],orderBy:o.orderBy??""}):null==s&&H&&c&&i({source:H,where:"",select:"",whereLanguage:(0,eq.S)()??"lucene",filters:[],orderBy:""})},[o,l,i,s,H,d]);let[ex,eg]=(0,r.useState)({});(0,r.useEffect)(()=>{if(!v.Bd||!ev.VO)return;let e=e=>{e.key===tZ.Gs&&eg({})};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]);let ef=(0,r.useCallback)(()=>{em(eo),U(({select:e,where:t,whereLanguage:s,source:n,filters:a,orderBy:r})=>{i({select:e,where:t,whereLanguage:s,source:n,filters:a,orderBy:r})})(),eg({})},[U,i,eo,em,eg]),ey=(0,O.Y)(ef,1e3),eb=(0,r.useCallback)(e=>{X("filters",e),ey()},[ey,X]),ej=(0,x.FH)({name:"filters",control:q}),e_=(0,eS.Ye)({searchQuery:ej??void 0,onFilterChange:eb}),eC=(0,x.FH)({control:q,name:"source",defaultValue:l.source??void 0}),eN=(0,r.useRef)(eC);(0,r.useEffect)(()=>{if(eC!==eN.current){eN.current=eC;let e=el?.find(e=>e.id===eC);null!=e&&(m(e.id),null==s||o?.source!==eC?(X("select",""),X("orderBy",""),e_.clearAllFilters()):(X("select",o?.select??""),X("orderBy",o?.orderBy??"")))}},[eC,X,o,s,el,e_,m]);let eA=(0,r.useCallback)(e=>{e>16&&E&&k(!1)},[E,k]),eT=(0,r.useCallback)(()=>{k(!1)},[k]),[e$,ez]=(0,r.useState)(!1),[eI,eL]=(0,r.useState)(void 0),{data:eM,isLoading:eR}=sx(l,er),{hasQueryError:eD,queryError:eP}=(0,r.useMemo)(()=>{let e=Object.values(ex).length>0,t=e?Object.values(ex)[0]:null;return{hasQueryError:e,queryError:t}},[ex]),eF=(0,x.FH)({name:"where",control:q}),eW=(0,x.FH)({name:"whereLanguage",control:q}),eY=function(e){let t,s=(0,a.c)(2),{input:n,enabled:r}=e;e:{let e;if(!r){t=null;break e}if(s[0]!==n){for(let t of(e=[],tK))t.detect(n)&&e.push({userMessage:e=>t.userMessage(e),corrected:()=>t.correct(n)});s[0]=n,s[1]=e}else e=s[1];t=e.length>0?e:null}return t}({input:eF,enabled:eD&&"sql"===eW}),eJ=eM?.from?.databaseName&&eM?.from?.tableName&&eM?.timestampValueExpression,eK=(0,te.CI)(),eZ=(0,te.c_)(),eQ=(0,r.useCallback)(()=>{null==o?eL("create"):U(e=>{eK.mutate({id:o.id,...e},{onSuccess:()=>{ef()}})})()},[o,eK,ef,U]),e1=(0,r.useCallback)(e=>{o?.id&&eK.mutate({id:o.id,name:o.name,select:l.select??"",where:l.where??"",whereLanguage:l.whereLanguage??(0,eq.S)()??"lucene",source:l.source??"",orderBy:l.orderBy??"",filters:l.filters??[],tags:e},{onSuccess:()=>{V.$e.show({color:"green",message:"Tags updated successfully"})},onError:()=>{V.$e.show({color:"red",message:(0,n.jsxs)(n.Fragment,{children:["An error occurred. ",(0,n.jsx)(Z.z,{})]})})}})},[o,l,eK]),[e3,e7]=(0,r.useState)(!1),e9="search",tr=(0,K.C)({queryKey:[e9]})>0,tl=(0,P.f)(),[ti,to]=(0,r.useState)(!1),[tc,td]=(0,p.ZA)("liveInterval",p.GJ.withDefault(tY.e2)),[tu,tm]=(0,p.ZA)("refreshFrequency",p.GJ.withDefault(4e3)),th=(0,r.useCallback)(e=>{let t=(0,tY.zG)(e);t&&ec(t)},[]);(0,r.useEffect)(()=>{ed&&E&&th(tc)},[th,l.source,ed]),function(e){let t,s,n,l,i,o=(0,a.c)(22),{isLive:c,interval:d,refreshFrequency:u,onTimeRangeSelect:m,pause:h}=e,p="visible"===(0,P.f)(),[x,g]=(0,r.useState)(!1);o[0]!==d||o[1]!==m?(t=()=>{m(new Date(Date.now()-d),new Date,null)},o[0]=d,o[1]=m,o[2]=t):t=o[2];let f=t;o[3]!==p||o[4]!==h||o[5]!==f||o[6]!==x?(s=()=>{x&&p&&(h||f(),g(!1))},n=[x,p,h,f],o[3]=p,o[4]=h,o[5]=f,o[6]=x,o[7]=s,o[8]=n):(s=o[7],n=o[8]),(0,r.useEffect)(s,n);let y=(0,r.useRef)(null);o[9]!==p||o[10]!==c||o[11]!==h||o[12]!==f||o[13]!==u?(l=()=>(c?(y.current&&window.clearInterval(y.current),h||(y.current=window.setInterval(()=>{p?f():g(!0)},u))):y.current&&window.clearInterval(y.current),()=>{y.current&&window.clearInterval(y.current)}),o[9]=p,o[10]=c,o[11]=h,o[12]=f,o[13]=u,o[14]=l):l=o[14],o[15]!==p||o[16]!==c||o[17]!==m||o[18]!==h||o[19]!==f||o[20]!==u?(i=[c,p,m,h,f,u],o[15]=p,o[16]=c,o[17]=m,o[18]=h,o[19]=f,o[20]=u,o[21]=i):i=o[21],(0,r.useEffect)(l,i)}({isLive:E,interval:tc,refreshFrequency:tu,onTimeRangeSelect:eh,pause:tr||!eJ||!tl});let[tp,tx]=(0,r.useState)(!1);(0,r.useEffect)(()=>{tx(!1===E)},[E]);let{data:tf}=eU.Ay.useMe(),ty=(0,r.useCallback)(e=>{e&&E&&k(!1)},[E,k]),tb=(0,r.useCallback)(()=>{k(!0),th(tc),to(!0),setTimeout(()=>to(!1),100)},[tc,th,k]),tv=(0,r.useMemo)(()=>{if(null!=eM)return{...eM,dateRange:eu}},[eM,eu]),tj=(0,r.useMemo)(()=>(0,v.AB)(tv?.select??er.select??""),[tv?.select,er.select]),t_=(0,r.useCallback)(e=>{X("select",(tj.includes(e)?tj.filter(t=>t!==e):[...tj,e]).join(", ")),ef()},[tj,X,ef]),tS=(0,r.useCallback)(({where:e,whereLanguage:t,source:s})=>{let n=new URLSearchParams({whereLanguage:t||"sql",from:eu[0].getTime().toString(),to:eu[1].getTime().toString(),isLive:"false",liveInterval:tc.toString()});return s&&s.id!==g?.id?(n.append("where",e||""),n.append("source",s.id)):(n.append("select",l.select||""),n.append("where",e||l.where||""),n.append("filters",JSON.stringify(l.filters??[])),n.append("source",g?.id||"")),`/search?${n.toString()}`},[tc,l.filters,l.select,l.where,g?.id,eu]),tw=(0,r.useCallback)(e=>{k(!1),eg(t=>({...t,DBSqlRowTable:e}))},[k,eg]),[tE,{open:tC,close:tk}]=(0,F.j)();(0,r.useEffect)(()=>{if(ed&&eJ&&!eR){let e=new URLSearchParams(window.location.search);e.has("from")||e.has("to")||em("Live Tail")}},[ed,eJ,eR,em]);let{data:tN}=(0,e0.Kc)(tv),tA=(0,r.useMemo)(()=>(0,e8.C2)(tN),[tN]),tT=(0,r.useMemo)(()=>{if(null==eM)return;let e={};switch(g?.kind){case j.GL.Log:e.groupBy=g?.severityTextExpression;break;case j.GL.Trace:e.groupBy=g?.statusCodeExpression}return{...eM,select:[{aggFn:"count",aggCondition:"",valueExpression:""}],orderBy:void 0,granularity:"auto",dateRange:eu,displayType:j.t2.StackedBar,with:tA,eventTableSelect:l.select,alignDateRangeToGranularity:!E,...e}},[eM,g,tA,eu,l.select,E]),t$=(0,r.useCallback)(e=>(e.preventDefault(),ef(),!1),[ef]),tz=(0,r.useCallback)(e=>{k(!1);let t=e?.at(0);i({orderBy:t?`${t.id} ${t.desc?"DESC":"ASC"}`:er.orderBy})},[k,er.orderBy,i]),tI=(0,r.useMemo)(()=>{let e=tG.I.parse(l.orderBy??"");return e?[e]:[]},[l.orderBy]),tL=(0,r.useCallback)((e,t)=>{eh(e,t),k(!1)},[eh,k]),tM=(0,r.useMemo)(()=>{let e={orderBy:void 0,dateRange:eu,with:tA};return eM?{...eM,...e}:{timestampValueExpression:"",connection:"",from:{databaseName:"",tableName:""},where:"",select:"",...e}},[eM,eu,tA]),tR=(0,r.useCallback)(()=>{e7(!0)},[]),[tD,tP]=(0,r.useState)(!1),tO=(0,r.useMemo)(()=>({onPropertyAddClick:e_.setFilterValue,displayedColumns:tj,toggleColumn:t_,generateSearchUrl:tS,dbSqlRowTableConfig:tv,isChildModalOpen:tD,setChildModalOpen:tP,source:g}),[e_.setFilterValue,g,tv,tj,t_,tS,tD]),tF=(0,r.useMemo)(()=>(0,b.VO)(ei),[ei]),tV=(0,r.useMemo)(()=>(0,n.jsx)(tX.A,{source:ei,variant:"text"}),[ei]),tB=(0,r.useCallback)(e=>{k(!1),em(e)},[k,em]),tW=(0,r.useCallback)(e=>{let t=(0,ts.jC)(e);k(!0),td(e),eh(t[0],t[1],null)},[k,td,eh]),tq=(0,r.useCallback)(()=>eL(void 0),[eL]),tJ=(0,r.useCallback)(()=>{ez(!1)},[ez]),tU=(0,r.useCallback)(()=>e7(!1),[e7]),tQ=(0,r.useCallback)(e=>{X("source",e.id),tU()},[X,tU]);return(0,n.jsxs)($.s,{direction:"column",h:"100vh",style:{overflow:"hidden"},"data-testid":"search-page",children:[(0,n.jsx)(c(),{children:(0,n.jsxs)("title",{children:[o?`${o.name} Search`:"Search"," - ",e]})}),!ev.VO&&tE&&(0,n.jsx)(se,{id:o?.id,searchedConfig:l,open:tE,onClose:tk}),(0,n.jsx)(eH.A,{}),(0,n.jsxs)("form",{"data-testid":"search-form",onSubmit:t$,className:ek().searchForm,children:[(0,n.jsxs)($.s,{gap:"sm",px:"sm",pt:"sm",wrap:"nowrap",children:[(0,n.jsxs)(T.Y,{gap:"4px",wrap:"nowrap",style:{minWidth:150},children:[(0,n.jsx)(e5.W,{size:"xs",control:q,name:"source",onCreate:tR,allowedSourceKinds:ss,"data-testid":"source-selector",sourceSchemaPreview:tV},`${s}`),(0,n.jsx)(sa,{setModalOpen:e7,setModelFormExpanded:ez})]}),(0,n.jsx)(A.a,{style:{flex:"1 1 0%",minWidth:100},children:(0,n.jsx)(eX.Z,{tableConnection:tF,control:q,name:"select",defaultValue:er.select,placeholder:er.select||"SELECT Columns",onSubmit:ef,label:"SELECT",size:"xs",allowMultiline:!0})}),(0,n.jsx)(A.a,{style:{maxWidth:400,width:"20%"},children:(0,n.jsx)(eX.Z,{tableConnection:tF,control:q,name:"orderBy",defaultValue:er.orderBy,onSubmit:ef,label:"ORDER BY",size:"xs"})}),!ev.VO&&(0,n.jsxs)(n.Fragment,{children:[s?(0,n.jsx)(C.$,{"data-testid":"update-search-button",variant:"secondary",size:"xs",onClick:()=>{eL("update")},style:{flexShrink:0},children:"Update"}):(0,n.jsx)(C.$,{"data-testid":"save-search-button",variant:"secondary",size:"xs",onClick:eQ,style:{flexShrink:0},children:"Save"}),!ev.VO&&(0,n.jsx)(C.$,{"data-testid":"alerts-button",variant:"secondary",size:"xs",onClick:tC,style:{flexShrink:0},children:"Alerts"}),!!o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e4.Y,{allowCreate:!0,values:o.tags||[],onChange:e1,children:(0,n.jsxs)(C.$,{"data-testid":"tags-button",variant:"secondary",px:"xs",size:"xs",style:{flexShrink:0},children:[(0,n.jsx)(J.A,{size:14,className:"me-1"}),o.tags?.length||0]})}),(0,n.jsx)(eG,{onClickDeleteSavedSearch:()=>{eZ.mutate(o?.id??"",{onSuccess:()=>{h().push("/search")}})},onClickRenameSavedSearch:()=>{eL("update")}})]})]})]}),(0,n.jsx)(sl,{opened:e$,onClose:tJ,inputSource:en}),(0,n.jsx)(si,{opened:e3,onClose:tU,onCreate:tQ}),(0,n.jsxs)($.s,{gap:"sm",mt:"sm",px:"sm",children:[(0,n.jsx)(eq.A,{tableConnection:tF,control:q,name:"where",onSubmit:ef,sqlQueryHistoryType:eE.j3.SEARCH_SQL,luceneQueryHistoryType:eE.j3.SEARCH_LUCENE,enableHotkey:!0,"data-testid":"search-input"}),(0,n.jsx)(e6.A,{"data-testid":"time-picker",inputValue:eo,setInputValue:ec,onSearch:tB,onRelativeSearch:tW,showLive:"results"===_,isLiveMode:E,defaultRelativeTimeMode:E&&tc!==tY.e2}),E&&(0,n.jsx)(z.m,{label:"Live tail refresh interval",children:(0,n.jsx)(A.a,{style:{width:80,minWidth:80,flexShrink:0},children:(0,n.jsx)(I.l,{size:"sm",w:"100%",data:st,value:String(tu),onChange:e=>tm(e?parseInt(e,10):null),allowDeselect:!1,comboboxProps:{withinPortal:!0,zIndex:1e3}})})}),(0,n.jsx)(sc,{isFormStateDirty:ee.isDirty})]})]}),null!=l&&null!=g&&(0,n.jsx)(sh,{opened:null!=eI,onClose:tq,searchedConfig:l,isUpdate:"update"===eI,savedSearchId:s}),(0,n.jsx)($.s,{direction:"column",style:{overflow:"hidden",height:"100%"},className:"bg-body",children:eJ?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:ek().searchPageContainer,style:{minHeight:0,height:"100%"},children:[(0,n.jsx)(eB.t,{message:"Unable to render search filters",children:(0,n.jsx)(eO,{denoiseResults:N,setDenoiseResults:W,isLive:E,analysisMode:_,setAnalysisMode:S,chartConfig:tM,sourceId:ei?.id,showDelta:!!g?.durationExpression,...e_})}),"pattern"===_&&null!=tT&&(0,n.jsxs)($.s,{direction:"column",w:"100%",gap:"0px",mih:"0",children:[(0,n.jsx)(A.a,{className:ek().searchStatsContainer,children:(0,n.jsxs)(T.Y,{justify:"space-between",style:{width:"100%"},children:[(0,n.jsx)(e2,{config:tT,queryKeyPrefix:e9}),(0,n.jsx)(sd,{config:{...eM,dateRange:eu},enabled:ed})]})}),!eD&&(0,n.jsx)(A.a,{className:ek().timeChartContainer,mih:"0",children:(0,n.jsx)(eV.S,{sourceId:l.source??void 0,showLegend:!1,config:tT,enabled:ed,showDisplaySwitcher:!1,showMVOptimizationIndicator:!1,showDateRangeIndicator:!1,queryKeyPrefix:e9,onTimeRangeSelect:tL})}),(0,n.jsx)(A.a,{flex:"1",mih:"0",px:"sm",children:(0,n.jsx)(tg,{source:g,config:{...eM,dateRange:eu},bodyValueExpression:g?(0,ew.N8)(g)??"":eM.implicitColumnExpression??"",totalCountConfig:tT,totalCountQueryKeyPrefix:e9})})]}),"delta"===_&&null!=g&&(0,n.jsx)(tH,{chartConfig:{...eM,dateRange:eu,with:tA},isReady:ed,source:g}),"results"===_&&(0,n.jsxs)($.s,{direction:"column",mih:"0",children:[eM&&tT&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.a,{className:ek().searchStatsContainer,children:(0,n.jsxs)(T.Y,{justify:"space-between",style:{width:"100%"},children:[(0,n.jsx)(e2,{config:tT,queryKeyPrefix:e9,enableParallelQueries:!0}),(0,n.jsxs)(T.Y,{gap:"sm",align:"center",children:[tp&&!0!=N&&(0,n.jsx)(so,{handleResumeLiveTail:tb}),(0,n.jsx)(sd,{config:{...eM,dateRange:eu},enabled:ed})]})]})}),!eD&&(0,n.jsx)(A.a,{className:ek().timeChartContainer,mih:"0",children:(0,n.jsx)(eV.S,{sourceId:l.source??void 0,showLegend:!1,config:tT,enabled:ed,showDisplaySwitcher:!1,showMVOptimizationIndicator:!1,showDateRangeIndicator:!1,queryKeyPrefix:e9,onTimeRangeSelect:tL,enableParallelQueries:!0})})]}),eD&&eP?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"h-100 w-100 px-4 mt-4 align-items-center justify-content-center text-muted overflow-auto",children:[eY&&eY.length>0&&(0,n.jsxs)(A.a,{mb:"xl",children:[(0,n.jsx)(w.E,{size:"lg",children:(0,n.jsx)("b",{children:"Query Helper"})}),(0,n.jsx)(R.x,{children:eY.map(e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.x.Col,{span:10,children:(0,n.jsx)(w.E,{children:e.userMessage("where")})}),(0,n.jsx)(R.x.Col,{span:2,children:(0,n.jsx)(C.$,{onClick:()=>X("where",e.corrected()),children:"Accept"})})]}))})]}),(0,n.jsxs)(A.a,{mt:"sm",children:[(0,n.jsx)(w.E,{my:"sm",size:"sm",children:"Error encountered for query with inputs:"}),(0,n.jsx)(L.t,{flex:"auto",p:"sm",shadow:"none",radius:"sm",style:{overflow:"hidden"},children:(0,n.jsxs)(R.x,{children:[(0,n.jsx)(R.x.Col,{span:2,children:(0,n.jsx)(w.E,{children:"SELECT"})}),(0,n.jsx)(R.x.Col,{span:10,children:(0,n.jsx)(tn.V,{data:`${eM.select}`,formatData:!1})}),(0,n.jsx)(R.x.Col,{span:2,children:(0,n.jsx)(w.E,{children:"ORDER BY"})}),(0,n.jsx)(R.x.Col,{span:10,children:(0,n.jsx)(tn.V,{data:`${eM.orderBy}`,formatData:!1})}),(0,n.jsx)(R.x.Col,{span:2,children:(0,n.jsx)(w.E,{children:"lucene"===eM.whereLanguage?"Searched For":"WHERE"})}),(0,n.jsx)(R.x.Col,{span:10,children:"lucene"===eM.whereLanguage?(0,n.jsx)(G.Ay,{indentWithTab:!1,value:eM.where,theme:"dark",basicSetup:{lineNumbers:!1,foldGutter:!1,highlightActiveLine:!1,highlightActiveLineGutter:!1},editable:!1}):(0,n.jsx)(tn.V,{data:`${eM.where}`})})]})})]}),(0,n.jsxs)(A.a,{mt:"lg",children:[(0,n.jsx)(w.E,{my:"sm",size:"sm",children:"Error Message:"}),(0,n.jsx)(D.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:eP.message})]}),eP instanceof y.p1&&(0,n.jsxs)(A.a,{mt:"lg",children:[(0,n.jsx)(w.E,{my:"sm",size:"sm",children:"Original Query:"}),(0,n.jsx)(D.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:(0,n.jsx)(tn.V,{data:eP.query,formatData:!0})})]})]})}):(0,n.jsx)(A.a,{flex:"1",mih:"0",px:"sm",children:eM&&l.source&&tv&&(0,n.jsx)(ta.A,{context:tO,config:tv,sourceId:l.source,onSidebarOpen:eT,onExpandedRowsChange:ty,enabled:ed,isLive:E??!0,queryKeyPrefix:e9,onScroll:eA,onError:tw,denoiseResults:N,collapseAllRows:ti,onSortingChange:tz,initialSortBy:tI})})]})]})}):(0,n.jsx)(L.t,{shadow:"xs",p:"xl",h:"100%",children:(0,n.jsx)(M.o,{mih:100,h:"100%",children:(0,n.jsx)(w.E,{size:"sm",children:"Please start by selecting a source and then click the play button to query data."})})})})]})}let sb=i()(async()=>sy,{ssr:!1});sb.getLayout=e9.D;let sv=sb},80925:(e,t,s)=>{"use strict";s.d(t,{S:()=>g,t:()=>h});var n=s(55729),a=s(67843),r=s(35467),l=s(67270),i=s(12482),o=s(92917),c=s(40147),d=s(78550),u=s(49672),m=s(81973);function h({traceSource:e,sessionSource:t,dateRange:s,where:n,whereLanguage:a},o){let{enabled:m=!0}=o||{},{getFieldExpression:h,isLoading:p}=(0,c.A)(e),{getFieldExpression:x,isLoading:g}=(0,c.A)(t),f=["teamId","teamName","userEmail","userName"],y="sessions",b=(0,u.fu)(),v=(0,d.Ge)();return(0,i.I)({queryKey:["sessions",e?.id,t?.id,s,n,a],queryFn:async()=>{if(!e||!t||!h||!x)return[];let i=h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId"),[o,c,d]=await Promise.all([(0,l.PV)({select:[{valueExpression:`${e.serviceNameExpression}`,alias:"serviceName"},{valueExpression:i,alias:"sessionId"},{alias:"maxTimestamp",valueExpression:`MAX(${e.timestampValueExpression})`},{alias:"minTimestamp",valueExpression:`MIN(${e.timestampValueExpression})`},{aggFn:"count",alias:"sessionCount",valueExpression:"*"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.eventAttributesExpression}.component:"user-interaction"`,valueExpression:"",alias:"interactionCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.statusCodeExpression}:error`,valueExpression:"",alias:"errorCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.spanNameExpression}:"record init"`,valueExpression:"",alias:"recordingCount"},...f.map(t=>({valueExpression:`MAX(${h(e.eventAttributesExpression??"SpanAttributes",t)})`,alias:t}))],from:e.from,dateRange:s,where:`${e.resourceAttributesExpression}.rum.sessionId:*`,whereLanguage:"lucene",...n&&{filters:[{type:a??"lucene",condition:n}]},timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e.connection,groupBy:"serviceName, sessionId"},v,e.querySettings),(0,l.PV)({select:[{valueExpression:`DISTINCT ${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:t.from,dateRange:s,where:`${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${y})`,whereLanguage:"sql",timestampValueExpression:t.timestampValueExpression,implicitColumnExpression:t.implicitColumnExpression,connection:t.connection},v,t.querySettings),(0,l.PV)({select:[{valueExpression:`DISTINCT ${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:e.from,dateRange:s,where:`(${e.spanNameExpression}='record init' OR ${e.spanNameExpression}='visibility') AND (${h(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${y}))`,whereLanguage:"sql",timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e?.connection},v,e.querySettings)]),u=(0,r.kg)`
        WITH _${y} AS (${o}),
        ${y} AS (
          SELECT * 
          FROM _${y}
          ${n?"":"HAVING interactionCount > 0 OR recordingCount > 0"}
          ORDER BY maxTimestamp DESC
          LIMIT 500
        )
      `,m=n&&n.length>0?(0,r.kg)`
        ${u},
        sessionIdsWithRecordings AS (${c}),
        sessionIdsWithUserActivity AS (${d})
        SELECT *
        FROM ${y}
        WHERE ${y}.sessionId IN (
          SELECT sessionIdsWithRecordings.sessionId FROM sessionIdsWithRecordings
        ) OR ${y}.sessionId IN (
          SELECT sessionIdsWithUserActivity.sessionId FROM sessionIdsWithUserActivity
        )
      `:(0,r.kg)`
        ${u}
        SELECT *
        FROM ${y}
        `;return await b.query({query:m.sql,query_params:m.params,connectionId:e?.connection}).then(e=>e.json())},staleTime:3e5,...o,enabled:!!m&&!p&&!g})}class p extends Error{}async function*x(e){let t=e.getReader();try{for(;;){let{done:e,value:s}=await t.read();if(e)return;yield s}}finally{t.releaseLock()}}function g({serviceName:e,sessionId:t,sourceId:s,startDate:r,endDate:i,limit:c=100,onEvent:h,onEnd:g,resultsKey:f,getSessionSourceFieldExpression:y},b){let v=b?.keepPreviousData??!1,j=b?.shouldAbortPendingRequest??!0,_=(0,d.Ge)(),[S,w]=(0,n.useState)({key:"",data:[]}),[E,C]=(0,n.useState)(!0),[k,N]=(0,n.useState)(!0),A=(0,n.useRef)(null),[T,$]=(0,n.useState)("idle"),z=(0,n.useRef)(void 0),{data:I}=(0,m.Fo)({id:s}),L=(0,n.useCallback)(async({pageParam:s=0,limit:n})=>{if(!I)return;let o=[],d=0,b=r.getTime().toString(),j=i.getTime().toString(),S=(n??c).toString(),E=s.toString(),k=new AbortController;A.current=k,C(!0),$("fetching"),z.current="fetching";let T=await (0,l.PV)({select:[{valueExpression:m.kJ.implicitColumnExpression,alias:"b"},{valueExpression:`simpleJSONExtractInt(${m.kJ.implicitColumnExpression}, 'type')`,alias:"t"},{valueExpression:`${y(m.kJ.eventAttributesExpression,"rr-web.chunk")}`,alias:"ck"},{valueExpression:`${y(m.kJ.eventAttributesExpression,"rr-web.total-chunks")}`,alias:"tcks"}],dateRange:[new Date(parseInt(b)),new Date(parseInt(j))],from:I.from,whereLanguage:"lucene",where:`ServiceName:"${e}" AND ${m.kJ.resourceAttributesExpression}.rum.sessionId:"${t}"`,timestampValueExpression:I.timestampValueExpression,implicitColumnExpression:m.kJ.implicitColumnExpression,connection:I.connection,orderBy:`${I.timestampValueExpression} ASC`,limit:{limit:Math.min(1e6,parseInt(S)),offset:parseInt(E)}},_,I.querySettings),L=(async()=>{let e,t=(0,u.W)(),s=await t.query({query:T.sql,query_params:T.params,format:"JSONEachRow",connectionId:I.connection});for await(let t of(e=h||(v?e=>o.push(e):e=>w(t=>(0,a.Ay)(t,t=>{t.key=f??t.key??"DEFAULT_KEY",t.data.push(e)}))),x(s.stream())))for(let s of t)try{let t=s.json();d++,e(t)}catch{}g?.(),v&&w({key:f??"DEFAULT_KEY",data:o}),(0===d||d<c)&&N(!1)})();try{await Promise.race([L,new Promise((e,t)=>{setTimeout(()=>{t(new p("Timeout"))},18e4)})])}catch(e){e instanceof p?(C(!1),$("idle"),z.current="idle",k.abort(),console.warn("Closing event source due to timeout"),g?.(new p)):console.error(e)}k.abort(),C(!1),$("idle"),z.current="idle"},[I,e,t,r,i,c,v,w,h,g,f,_,y]),M=[t,r,i,c].join("||"),R=(0,o.ZC)(M);(0,n.useEffect)(()=>{R!=M&&("fetching"!==z.current||j)&&(j&&"fetching"===z.current&&A.current?.abort(),v||w({key:"",data:[]}),N(!0),L({pageParam:0}))},[R,M,j,L,v]);let D=(0,n.useCallback)(e=>{k&&"idle"===z.current&&S.data.length>0&&L({pageParam:S.data.length,limit:e?.limit}).then(()=>{e?.cb?.()})},[L,S.data.length,k]),P=(0,n.useCallback)(()=>{A.current?.abort()},[]);return{hasNextPage:k,isFetching:E,results:S.data,resultsKey:S.key,fetchNextPage:D,abort:P}}},81408:e=>{e.exports={wrapper:"SessionSubpanelV2_wrapper__5kN48",eventList:"SessionSubpanelV2_eventList__CJCVt",eventListHeader:"SessionSubpanelV2_eventListHeader__Hbhpi",eventListContainer:"SessionSubpanelV2_eventListContainer__r2wEN",eventRow:"SessionSubpanelV2_eventRow__XFl1t",eventRowError:"SessionSubpanelV2_eventRowError__61zDU",eventRowIcon:"SessionSubpanelV2_eventRowIcon__C371Y",eventRowTitle:"SessionSubpanelV2_eventRowTitle__BCmpn",eventRowSuccess:"SessionSubpanelV2_eventRowSuccess___a9Kd",eventRowHighlighted:"SessionSubpanelV2_eventRowHighlighted__YWXks",eventRowContent:"SessionSubpanelV2_eventRowContent__Y9_5z",eventRowTimestamp:"SessionSubpanelV2_eventRowTimestamp__MPRLq",eventRowDescription:"SessionSubpanelV2_eventRowDescription__XJ9b7",player:"SessionSubpanelV2_player___Erie",playerHeader:"SessionSubpanelV2_playerHeader__qMRJo",playerHeaderUrl:"SessionSubpanelV2_playerHeaderUrl__K3MEs",playerContainer:"SessionSubpanelV2_playerContainer__m7RnT",domPlayerWrapper:"SessionSubpanelV2_domPlayerWrapper__wKZpR",domPlayerWrapperPaused:"SessionSubpanelV2_domPlayerWrapperPaused__9xhaT",playerTimestamp:"SessionSubpanelV2_playerTimestamp__ebCzv",playerPlaybar:"SessionSubpanelV2_playerPlaybar__FEw0u",playerToolbar:"SessionSubpanelV2_playerToolbar__7sL7N"}},83101:e=>{e.exports={resizeHandle:"ResizablePanel_resizeHandle__4fEVM",resizeYHandle:"ResizablePanel_resizeYHandle__1pBbm"}},85014:(e,t,s)=>{"use strict";s.d(t,{Y:()=>b});var n=s(6029),a=s(55729),r=s(37659),l=s(76013),i=s(96061),o=s(20158),c=s(53993),d=s(47268),u=s(34834),m=s(3635),h=s(25062),p=s(28200),x=s(41279),g=s(6876),f=s(65952),y=s.n(f);let b=a.memo(({values:e,onChange:t,allowCreate:s,children:f})=>{let{data:b,isLoading:v,isError:j,refetch:_}=g.Ay.useTags(),S=a.useMemo(()=>{let t=new Map;return[...e,...b?.data||[]].forEach(e=>{t.set(e.toLowerCase(),e)}),Array.from(t.values()).sort((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))},[b,e]),[w,E]=a.useState(""),C=a.useMemo(()=>S.filter(e=>e.toLowerCase().includes(w.toLowerCase())),[S,w]),k=a.useCallback(()=>{t([])},[t]),N=a.useCallback(n=>{if("Enter"===n.key&&s&&w.length>0){let s=n.currentTarget.value;e.some(e=>e.toLowerCase()===s.toLowerCase())||(t([...e,s]),E(""))}},[s,w,t,e]);return(0,n.jsxs)(r.A,{withinPortal:!0,width:240,keepMounted:!1,shadow:"xl",onOpen:()=>{_(),E("")},position:"bottom-start",children:[(0,n.jsx)(r.A.Target,{children:f||(0,n.jsx)(l.M,{variant:"secondary",size:"sm",style:{cursor:"pointer"},children:(0,n.jsx)(p.A,{size:14})})}),(0,n.jsxs)(r.A.Dropdown,{p:0,children:[v&&"Loading",j&&"Error",(0,n.jsx)(i.p,{size:"xs",placeholder:s?"Search or create tag":"Search tag",variant:"filled",leftSection:(0,n.jsx)(x.A,{size:16}),autoFocus:!0,m:8,mb:0,value:w,onChange:e=>E(e.currentTarget.value),onKeyDown:N,rightSection:w&&(0,n.jsx)(o.J,{size:"xs",radius:"xl",onClick:()=>E("")})}),(0,n.jsxs)(c.F,{viewportProps:{style:{maxHeight:200}},children:[0===C.length&&(0,n.jsx)("div",{className:"pt-3 px-4 fs-8 text-center",children:s?(0,n.jsxs)(n.Fragment,{children:["Type and press ",(0,n.jsx)("span",{children:"Enter"})," to create new tag"]}):"No tags found"}),(0,n.jsx)(d.S.Group,{value:e,onChange:t,size:"xs",my:"sm",children:(0,n.jsx)(u.B,{gap:4,children:C.map(e=>(0,n.jsxs)(m.Y,{justify:"space-between",className:y().tagWrapper,children:[(0,n.jsx)(d.S,{label:e.toUpperCase(),value:e,size:"xs"}),S.length>=2&&(0,n.jsx)(h.$,{variant:"secondary",size:"compact-xs",fw:"normal",onClick:()=>{t([e])},children:"Only"})]},e))})})]}),(0,n.jsxs)("div",{className:"p-2 border-top border-dark d-flex justify-content-between align-items-center",children:[(0,n.jsxs)("div",{className:"ms-2 fs-8 ",children:[e.length||"None"," selected"]}),e.length>=1&&(0,n.jsx)(h.$,{variant:"secondary",size:"compact-xs",fw:"normal",onClick:k,children:"Clear all"})]})]})]})})},92138:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return s(41029)}])},92495:(e,t)=>{"use strict";t.AB=function(e){let t,s;return function(e){try{return new URL(e),!0}catch(e){return!1}}(e)&&"slack.com"===((s=(t=new URL(e).hostname).split(".")).length>=2?s.slice(-2).join("."):t)}},94364:(e,t,s)=>{"use strict";s.d(t,{f:()=>n});let n=e=>({isLoading:!1,error:null,enrichedFrame:null})},94937:(e,t,s)=>{"use strict";s.d(t,{A:()=>v});var n=s(6029),a=s(75155),r=s(55729),l=s(82203),i=s.n(l),o=s(80519),c=s.n(o),d=s(37659),u=s(3635),m=s(43517),h=s(63085),p=s(34834),x=s(25062),g=s(56795),f=s(28975),y=s(41279),b=s(18006);function v(e){let t,s,l,o,v,j,_,S,w,E,C,k,N,A,T,$,z,I,L=(0,a.c)(62),{displayedKey:M,name:R,nameLanguage:D,sqlExpression:P,value:O,onPropertyAddClick:F,generateSearchUrl:V}=e,B=void 0===D?"lucene":D,[W,H]=(0,r.useState)(!1);L[0]!==O?(t=(0,b.OH)(O),L[0]=O,L[1]=t):t=L[1];let q=t;if(!(F||V||q)){let e,t=M||R;return L[2]!==R||L[3]!==t||L[4]!==O?(e=(0,n.jsxs)("div",{className:"bg-highlighted px-2 py-0.5 me-1 my-1",children:[t,": ",O]},R),L[2]=R,L[3]=t,L[4]=O,L[5]=e):e=L[5],e}if(L[6]!==M||L[7]!==V||L[8]!==q||L[9]!==R||L[10]!==B||L[11]!==F||L[12]!==W||L[13]!==P||L[14]!==O){let e,t,a="sql"===B?c().format("? = ?",[c().raw(R),O]):`${R}:${"string"==typeof O?`"${O}"`:O}`;o=d.A,A="top",T=!1,v=!0,j=W,_=H,L[29]===Symbol.for("react.memo_cache_sentinel")?(e={wordBreak:"break-word"},L[29]=e):e=L[29],L[30]!==M||L[31]!==q||L[32]!==R||L[33]!==W||L[34]!==O?(t=q?(0,n.jsxs)("a",{href:encodeURI(O),target:"_blank",rel:"noopener noreferrer",className:"d-flex flex-row align-items-center bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",children:[M||R,(0,n.jsx)(g.A,{size:14,className:"ms-1"})]}):(0,n.jsxs)(u.Y,{className:"bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",wrap:"nowrap",gap:0,onClick:()=>H(!W),children:[M||R,":",(0,n.jsx)(m.E,{size:"xs",ms:4,maw:300,truncate:!0,children:O})]}),L[30]=M,L[31]=q,L[32]=R,L[33]=W,L[34]=O,L[35]=t):t=L[35],L[36]!==t||L[37]!==O?(S=(0,n.jsx)(d.A.Target,{children:(0,n.jsx)(h.m,{label:O,withArrow:!0,maw:400,multiline:!0,style:e,position:"bottom",children:t})}),L[36]=t,L[37]=O,L[38]=S):S=L[38],l=d.A.Dropdown,N=2,s=p.B,w=0,E="stretch",L[39]!==F||L[40]!==P||L[41]!==O?(C=F&&(0,n.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,n.jsx)(f.A,{size:14}),onClick:()=>{F(P,O),H(!1)},children:"Add to Search"}),L[39]=F,L[40]=P,L[41]=O,L[42]=C):C=L[42],k=V&&(0,n.jsx)(i(),{href:V(a,B),children:(0,n.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,n.jsx)(y.A,{size:14}),children:"Search This Value"})}),L[6]=M,L[7]=V,L[8]=q,L[9]=R,L[10]=B,L[11]=F,L[12]=W,L[13]=P,L[14]=O,L[15]=s,L[16]=l,L[17]=o,L[18]=v,L[19]=j,L[20]=_,L[21]=S,L[22]=w,L[23]=E,L[24]=C,L[25]=k,L[26]=N,L[27]=A,L[28]=T}else s=L[15],l=L[16],o=L[17],v=L[18],j=L[19],_=L[20],S=L[21],w=L[22],E=L[23],C=L[24],k=L[25],N=L[26],A=L[27],T=L[28];return L[43]!==s||L[44]!==w||L[45]!==E||L[46]!==C||L[47]!==k?($=(0,n.jsxs)(s,{gap:w,justify:E,children:[C,k]}),L[43]=s,L[44]=w,L[45]=E,L[46]=C,L[47]=k,L[48]=$):$=L[48],L[49]!==l||L[50]!==$||L[51]!==N?(z=(0,n.jsx)(l,{p:N,children:$}),L[49]=l,L[50]=$,L[51]=N,L[52]=z):z=L[52],L[53]!==o||L[54]!==v||L[55]!==j||L[56]!==_||L[57]!==S||L[58]!==z||L[59]!==A||L[60]!==T?(I=(0,n.jsxs)(o,{position:A,withinPortal:T,withArrow:v,opened:j,onChange:_,children:[S,z]}),L[53]=o,L[54]=v,L[55]=j,L[56]=_,L[57]=S,L[58]=z,L[59]=A,L[60]=T,L[61]=I):I=L[61],I}},96958:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(6029),a=s(75155),r=s(75828),l=s.n(r);function i(e){let t,s,r,i,o,c,d,u,m,h,p,x=(0,a.c)(23);x[0]!==e?({children:s,onClick:i,active:t,className:r,style:c,...o}=e,x[0]=e,x[1]=t,x[2]=s,x[3]=r,x[4]=i,x[5]=o,x[6]=c):(t=x[1],s=x[2],r=x[3],i=x[4],o=x[5],c=x[6]);let g=!t;x[7]!==t||x[8]!==r||x[9]!==g?(d=l()("text-center cursor-pointer",{"fw-bold text-white-hover":t,"text-muted-hover":g},r),x[7]=t,x[8]=r,x[9]=g,x[10]=d):d=x[10],x[11]!==s?(u=(0,n.jsx)("span",{children:s}),x[11]=s,x[12]=u):u=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(m={height:2},x[13]=m):m=x[13];let f=t?"var(--color-text-brand)":"var(--color-border)";return x[14]!==f?(h=(0,n.jsx)("div",{className:"w-100 mt-2",style:m,children:(0,n.jsx)("div",{className:"h-100 w-100",style:{background:f}})}),x[14]=f,x[15]=h):h=x[15],x[16]!==i||x[17]!==o||x[18]!==c||x[19]!==d||x[20]!==u||x[21]!==h?(p=(0,n.jsxs)("div",{className:d,onClick:i,style:c,...o,children:[u,h]}),x[16]=i,x[17]=o,x[18]=c,x[19]=d,x[20]=u,x[21]=h,x[22]=p):p=x[22],p}function o(e){let t,s,r,o,c=(0,a.c)(14),{items:d,activeItem:u,className:m,onClick:h,"data-testid":p}=e;if(c[0]!==m?(t=l()("d-flex flex-wrap",m),c[0]=m,c[1]=t):t=c[1],c[2]!==u||c[3]!==d||c[4]!==h){let e;c[6]!==u||c[7]!==h?(e=e=>(0,n.jsx)(i,{"data-testid":`tab-${String(e.value).toLowerCase()}`,active:e.value===u,onClick:()=>h?.(e.value),children:(0,n.jsx)("span",{className:"mx-4 text-nowrap",children:e.text})},e.value),c[6]=u,c[7]=h,c[8]=e):e=c[8],s=d.map(e),c[2]=u,c[3]=d,c[4]=h,c[5]=s}else s=c[5];return c[9]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(i,{className:"flex-grow-1 pe-none",children:"\xa0"}),c[9]=r):r=c[9],c[10]!==p||c[11]!==t||c[12]!==s?(o=(0,n.jsxs)("div",{className:t,"data-testid":p,children:[s,r]}),c[10]=p,c[11]=t,c[12]=s,c[13]=o):o=c[13],o}}},e=>{e.O(0,[7756,883,2928,6171,5554,910,1606,1909,6747,3062,1445,2990,4607,9979,8855,5165,5948,9353,4528,9207,8224,8462,1021,6514,3234,8374,3172,6593,636,8792],()=>e(e.s=92138)),_N_E=e.O()}]);