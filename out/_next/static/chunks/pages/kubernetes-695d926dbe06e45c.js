(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6108],{225:(e,t,s)=>{"use strict";s.d(t,{z:()=>i});var a=s(6029),r=s(75155),n=s(98142);let i=()=>{let e,t=(0,r.c)(2);if(n.bp){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("span",{children:["Please open an issue on"," ",(0,a.jsx)("a",{href:"https://github.com/hyperdxio/hyperdx/issues",target:"_blank",children:"GitHub"}),"."]}),t[0]=e):e=t[0],e}return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("span",{children:"Please contact support."}),t[1]=e):e=t[1],e}},2326:e=>{e.exports={wrapper:"PlaybarSlider_wrapper__WAjbf",markers:"PlaybarSlider_markers__X51XN",markerDot:"PlaybarSlider_markerDot__X23nO"}},17273:(e,t,s)=>{"use strict";s.d(t,{A:()=>x,S:()=>h});var a=s(6029),r=s(1909),n=s(60481),i=s(78253),l=s(8468),o=s(74860),c=s(24196),d=s(46466),m=s(36011),u=s.n(m);let p="hdx-search-where-language";function h(){try{let e=window.localStorage.getItem(p);if("sql"===e||"lucene"===e)return e}catch{}return null}function x({tableConnection:e,tableConnections:t,control:s,name:m,onSubmit:h,onLanguageChange:x,enableHotkey:g,size:f="sm",showLabel:b=!0,label:y="WHERE",allowMultiline:v=!0,sqlQueryHistoryType:j,luceneQueryHistoryType:_,sqlPlaceholder:S="SQL WHERE clause (ex. column = 'foo')",lucenePlaceholder:w="Search your events w/ Lucene ex. column:foo",width:E="100%",maxWidth:k="100%",minWidth:N,"data-testid":C,additionalSuggestions:A,languageName:T=`${m}Language`}){let{field:$}=(0,r.as)({control:s,name:T}),I=$.value??"lucene",L="sql"===I,R=e?{tableConnection:e}:{tableConnections:t},z="xs"===f?u().sizeXs:u().sizeSm;return(0,a.jsxs)(n.a,{className:u().root,style:{width:E,maxWidth:k,minWidth:N},children:[(0,a.jsx)(i.s,{align:"center",className:`${u().languageSwitch} ${z}`,"data-testid":"where-language-switch",onMouseDown:e=>e.preventDefault(),children:(0,a.jsx)(o.A,{language:I,onLanguageChange:e=>{try{window.localStorage.setItem(p,e)}catch{}$.onChange(e),x?.(e)}})}),(0,a.jsxs)(n.a,{className:`${u().inputWrapper} ${z}`,children:[L?(0,a.jsx)(d.Z,{...R,control:s,name:m,placeholder:S,onSubmit:h,label:b?y:void 0,queryHistoryType:j,enableHotkey:g,allowMultiline:v,size:f,additionalSuggestions:A}):(0,a.jsx)(c.A,{...R,control:s,name:m,onSubmit:h,placeholder:w,queryHistoryType:_,enableHotkey:g,size:f,"data-testid":C,additionalSuggestions:A}),g&&(0,a.jsx)(n.a,{className:u().shortcutHint,title:"Press / or s to focus search","aria-hidden":!0,children:(0,a.jsx)(l.u,{size:"xs",children:"/"})})]})]})}},18006:(e,t,s)=>{"use strict";s.d(t,{N4:()=>n,OH:()=>i,z4:()=>r});var a=s(37901);function r(e=[]){return e.map(({sqlExpression:e,alias:t})=>({valueExpression:e,alias:t||e}))}function n(e,t=[],s,r){let i=new Map,l=new Map,o=new Map,c=(0,a.bn)(r);try{for(let e of s)for(let{sqlExpression:s,luceneExpression:a,alias:r}of t){let t=r||s,n=c.includes(s.split(".")[0])?`toString(${s})`:s;l.set(t,n),a&&o.set(t,a);let d=e[t];d&&"string"==typeof d&&(i.has(t)||i.set(t,new Set),i.get(t).add(d))}}catch(e){console.error("Error extracting attributes from data",e)}return Array.from(i.entries()).flatMap(([t,s])=>[...s].map(s=>({displayedKey:t,value:s,sql:l.get(t),lucene:o.get(t),source:e})))}function i(e){try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}},20699:e=>{e.exports={timelineRow:"TimelineChart_timelineRow__qebNk",timelineRowActive:"TimelineChart_timelineRowActive__V6ZZf",labelContainer:"TimelineChart_labelContainer__6r6Eb"}},24196:(e,t,s)=>{"use strict";s.d(t,{A:()=>$});var a=s(6029),r=s(75155),n=s(55729),i=s(1909),l=s(66692),o=s(54167),c=s(3635),d=s(21604),m=s(78550),u=s(92917);let p=Date.now();function h(e){let{databaseName:t,tableName:s,connectionId:a}=e;return{connection:a,from:{databaseName:t,tableName:s},timestampValueExpression:"",select:"",where:"",dateRange:[new Date(p-432e5),new Date(p)]}}function x(e){return{value:e,label:e}}function g(e){return null!==e.jsType}var f=s(75828),b=s.n(f),y=s(1885),v=s(37659),j=s(94193),_=s(8737),S=s(74860),w=s(45862),E=s.n(w);function k({inputRef:e,value:t,onChange:s,placeholder:r="Search your events for anything...",autocompleteOptions:i,size:l="sm",aboveSuggestions:o,belowSuggestions:c,showSuggestionsOnEmpty:d,suggestionsHeader:m="Properties",zIndex:p=999,onLanguageChange:h,language:x,onSubmit:g,queryHistoryType:f,"data-testid":w}){let[k,N]=(0,n.useState)(!1),[C,A]=(0,n.useState)(!1),T=(0,n.useCallback)(e=>{N(e),A(e)},[N]),[$,I]=(0,n.useState)("auto"),[L,R]=(0,n.useState)(720),[z,M]=(0,n.useState)(-1),[D,P]=(0,n.useState)(-1),[V,F]=(0,u.mk)(f),O=(0,n.useMemo)(()=>f&&V?V.map(e=>({value:e,label:e})):[],[V,f]),H=null!=t&&0===t.length&&O.length>0&&f,W=(0,n.useMemo)(()=>new y.A(i??[],{keys:["value"],threshold:0,ignoreLocation:!0}),[i]),B=(0,u.d7)(t??"",200),X=(0,n.useMemo)(()=>{let e=B.split(" "),t=e[e.length-1];return 0===t.length&&d?i??[]:W.search(t).map(e=>e.item)},[B,W,i,d]),Z=a=>{M(-1),s(null==t?a:t.split(" ").slice(0,-1).join(" ")+`${t.split(" ").length>1?" ":""}${a}`),e.current?.focus()},q=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{q.current&&I(q.current.clientWidth),e.current&&R(e.current.clientWidth)},[x,h,e]);let J="xs"===l?32:"lg"===l?44:38;return(0,a.jsx)("div",{className:E().root,style:{"--autocomplete-base-height":`${J}px`},"data-expanded":k?"true":void 0,children:(0,a.jsxs)(v.A,{opened:C,onChange:A,position:"bottom-start",offset:8,width:"target",withinPortal:!0,closeOnClickOutside:!0,closeOnEscape:!0,styles:{dropdown:{maxWidth:L>300?L:720,width:"100%",zIndex:p}},children:[(0,a.jsx)(v.A.Target,{children:(0,a.jsx)(j.T,{ref:e,placeholder:r,className:b()(E().textarea,!k&&E().collapseFade,k&&E().focused),value:t,size:l,autosize:!0,minRows:1,maxRows:k?4:1,"data-testid":w,onChange:e=>s(e.target.value),onFocus:()=>{M(-1),P(-1),T(!0)},onBlur:()=>{M(-1),P(-1),T(!1)},onKeyDown:e=>{"Escape"===e.key&&e.target instanceof HTMLTextAreaElement&&(e.preventDefault(),A(!1),e.target.blur()),"Tab"===e.key&&e.target instanceof HTMLTextAreaElement&&X.length>0&&z<X.length&&z>=0&&(e.preventDefault(),Z(X[z].value)),"Enter"===e.key&&e.target instanceof HTMLTextAreaElement&&(X.length>0&&z<X.length&&z>=0?(e.preventDefault(),Z(X[z].value)):e.shiftKey||(e.preventDefault(),f&&t&&F(t),g?.())),"ArrowDown"===e.key&&e.target instanceof HTMLTextAreaElement&&X.length>0&&M(Math.min(z+1,X.length-1,9)),"ArrowUp"===e.key&&e.target instanceof HTMLTextAreaElement&&X.length>0&&M(Math.max(z-1,0))},rightSectionWidth:$,rightSection:null!=x&&null!=h?(0,a.jsx)("div",{ref:q,children:(0,a.jsx)(S.A,{language:x,onLanguageChange:h})}):void 0})}),(0,a.jsxs)(v.A.Dropdown,{className:E().dropdown,children:[null!=o&&(0,a.jsx)("div",{className:E().aboveSuggestions,children:o}),(0,a.jsx)("div",{children:X.length>0&&(0,a.jsxs)("div",{className:E().suggestionsSection,children:[(0,a.jsxs)("div",{className:E().suggestionsHeaderRow,children:[(0,a.jsx)("div",{className:E().suggestionsHeader,children:m}),X.length>10&&(0,a.jsxs)("div",{className:E().suggestionsLimit,children:["(Showing Top ",10,")"]})]}),X.slice(0,10).map(({value:e,label:t},s)=>(0,a.jsx)("div",{className:b()(E().suggestionItem,z===s&&E().selected),role:"button",onMouseOver:()=>{M(s)},onClick:()=>{Z(e)},children:(0,a.jsx)("span",{className:E().suggestionLabel,children:t})},e))]})}),null!=c&&(0,a.jsx)("div",{className:E().belowSuggestions,children:c}),(0,a.jsx)("div",{children:H&&(0,a.jsxs)("div",{className:E().historySection,children:[(0,a.jsx)("div",{className:E().historyTitle,children:"Search History:"}),O.map(({value:e,label:t},r)=>(0,a.jsx)(_.N,{className:b()(E().historyItem,D===r&&E().selected),onMouseOver:()=>P(r),onClick:()=>{P(-1),s(e),F(e),A(!1),g?.()},children:(0,a.jsx)("span",{className:E().historyItemLabel,children:t})},e))]})})]})]})})}var N=s(67398),C=s.n(N);class A{formatFieldValue(e){return e.path.join(".")}formatFieldLabel(e){return`${e.path.join(".")} (${e.jsType})`}formatKeyValPair(e,t){return`${e}:"${t}"`}}let T=new A;function $(e){let t,s,p,f,b,y,v,j,_,S,w,E,N,A,$,I,L,R,z,M,D,P,V,F,O,H,W,B,X,Z,q,J,G,U,K,Y,Q,ee,et=(0,r.c)(78);et[0]!==e?({tableConnection:w,tableConnections:E,placeholder:_,size:S,zIndex:N,language:f,onLanguageChange:b,enableHotkey:p,onSubmit:y,additionalSuggestions:t,queryHistoryType:j,"data-testid":s,...v}=e,et[0]=e,et[1]=t,et[2]=s,et[3]=p,et[4]=f,et[5]=b,et[6]=y,et[7]=v,et[8]=j,et[9]=_,et[10]=S,et[11]=w,et[12]=E,et[13]=N):(t=et[1],s=et[2],p=et[3],f=et[4],b=et[5],y=et[6],v=et[7],j=et[8],_=et[9],S=et[10],w=et[11],E=et[12],N=et[13]);let es=void 0===_?"Search your events for anything...":_,ea=void 0===S?"sm":S,{field:er}=(0,i.as)(v),{onChange:en,value:ei}=er,el=(0,m.Ge)(),eo=(0,n.useRef)(null),[ec,ed]=(0,n.useState)(""),em=w||E;et[14]!==t||et[15]!==em?(A={tableConnection:em,additionalSuggestions:t},et[14]=t,et[15]=em,et[16]=A):A=et[16];let eu=function(e,t,s){let a,i,l,o,c,d,p,f,b,y,v,j,_,S,w=(0,r.c)(39),{tableConnection:E,additionalSuggestions:k}=s;w[0]!==E?(a=E?Array.isArray(E)?E:[E]:[],w[0]=E,w[1]=a):a=w[1];let{data:N}=(0,m.Sh)(a);if(w[2]!==k||w[3]!==N||w[4]!==e){let t=(N??[]).filter(g);i=new Map,l=[...t.map(t=>{let s={value:e.formatFieldValue(t),label:e.formatFieldLabel(t)};return i.set(s.value,t),s}),...k?.map(x)??[]],w[2]=k,w[3]=N,w[4]=e,w[5]=i,w[6]=l}else i=w[5],l=w[6];let C=l;w[7]!==i||w[8]!==C?(o={fieldCompleteOptions:C,fieldCompleteMap:i},w[7]=i,w[8]=C,w[9]=o):o=w[9];let{fieldCompleteOptions:A,fieldCompleteMap:T}=o,[$,I]=(0,n.useState)(null);w[10]!==T||w[11]!==t?(c=()=>{let e=T.get(t);e&&I(e)},d=[T,t],w[10]=T,w[11]=t,w[12]=c,w[13]=d):(c=w[12],d=w[13]),(0,n.useEffect)(c,d),w[14]!==e||w[15]!==$||w[16]!==t?(p=()=>{$&&(t.startsWith(e.formatFieldValue($))||I(null))},f=[$,I,t,e],w[14]=e,w[15]=$,w[16]=t,w[17]=p,w[18]=f):(p=w[17],f=w[18]),(0,n.useEffect)(p,f);let L=Array.isArray(E)?E.length>0?E[0]:void 0:E;w[19]!==L?(b=L??{tableName:"",databaseName:"",connectionId:""},w[19]=L,w[20]=b):b=w[20];let{data:R}=(0,m.n$)(b);w[21]!==R||w[22]!==$?(y=$&&R?[(0,u.uc)($.path,R)]:[],w[21]=R,w[22]=$,w[23]=y):y=w[23];let z=y;w[24]!==E?(v=(0,u.$r)(E).map(h),w[24]=E,w[25]=v):v=w[25];let M=v;w[26]!==M||w[27]!==z?(j={chartConfigs:M,keys:z},w[26]=M,w[27]=z,w[28]=j):j=w[28];let{data:D}=(0,m.nT)(j);e:{let t;if(!D||!$){_=A;break e}if(w[29]!==e||w[30]!==$||w[31]!==D){let s;w[33]!==e||w[34]!==$?(s=t=>t.value.flatMap(t=>{if("string"==typeof t){let s=e.formatKeyValPair(e.formatFieldValue($),t);return[{value:s,label:s}]}if("object"!=typeof t)return[];{let s=[];for(let[a,r]of Object.entries(t)){if("string"!=typeof a||"string"!=typeof r)return console.error("unknown type for autocomplete object ",t),[];let n=structuredClone($);n.path.push(a);let i=e.formatKeyValPair(e.formatFieldValue(n),r);s.push({value:i,label:i})}return s}}),w[33]=e,w[34]=$,w[35]=s):s=w[35],t=D.flatMap(s),w[29]=e,w[30]=$,w[31]=D,w[32]=t}else t=w[32];_=t}let P=_;return w[36]!==A||w[37]!==P?(S=(0,m.Ii)([A,P]),w[36]=A,w[37]=P,w[38]=S):S=w[38],S}(T,null!=ei?`${ei}`:"",A);et[17]!==el||et[18]!==w||et[19]!==ei?($=()=>{w&&(0,o.oU)({query:ei,tableConnection:w,metadata:el}).then(e=>{ed(e)})},I=[ei,w,el],et[17]=el,et[18]=w,et[19]=ei,et[20]=$,et[21]=I):($=et[20],I=et[21]),(0,n.useEffect)($,I),et[22]===Symbol.for("react.memo_cache_sentinel")?(L=["/","s"],et[22]=L):L=et[22],et[23]!==p?(R=()=>{p&&eo.current?.focus()},et[23]=p,et[24]=R):R=et[24],et[25]===Symbol.for("react.memo_cache_sentinel")?(z={preventDefault:!0,enableOnFormTags:!1,enableOnContentEditable:!1},et[25]=z):z=et[25],et[26]!==p?(M=[p],et[26]=p,et[27]=M):M=et[27],(0,l.vC)(L,R,z,M),et[28]===Symbol.for("react.memo_cache_sentinel")?(D=(0,a.jsx)("div",{className:C().searchingHeader,children:"Searching for:"}),et[28]=D):D=et[28];let ep=""===ec?"Matching all events, enter a query to search.":ec;return et[29]!==ep?(P=(0,a.jsxs)(a.Fragment,{children:[D,(0,a.jsx)("div",{className:C().searchingDescription,children:ep})]}),et[29]=ep,et[30]=P):P=et[30],et[31]===Symbol.for("react.memo_cache_sentinel")?(V=(0,a.jsx)("div",{className:C().examplesLabel,children:"Examples:"}),et[31]=V):V=et[31],et[32]===Symbol.for("react.memo_cache_sentinel")?(F=(0,a.jsx)("span",{className:C().exampleLabel,children:"Full Text:"}),et[32]=F):F=et[32],et[33]!==en||et[34]!==ei?(O=(0,a.jsxs)("div",{className:C().exampleRow,children:[F,(0,a.jsx)("code",{className:C().exampleCode,role:"button",onClick:()=>{en(ei+(ei.length>0?" ":"")+"my log")},children:"my log"})]}),et[33]=en,et[34]=ei,et[35]=O):O=et[35],et[36]===Symbol.for("react.memo_cache_sentinel")?(H=(0,a.jsx)("span",{className:C().exampleLabel,children:"Substring:"}),et[36]=H):H=et[36],et[37]!==en||et[38]!==ei?(W=(0,a.jsxs)("div",{className:C().exampleRow,children:[H,(0,a.jsx)("code",{className:C().exampleCode,role:"button",onClick:()=>{en(ei+(ei.length>0?" ":"")+"*err*")},children:"*err*"})]}),et[37]=en,et[38]=ei,et[39]=W):W=et[39],et[40]===Symbol.for("react.memo_cache_sentinel")?(B=(0,a.jsx)("span",{className:C().exampleLabel,children:"Exact:"}),et[40]=B):B=et[40],et[41]!==en||et[42]!==ei?(X=(0,a.jsxs)("div",{className:C().exampleRow,children:[B,(0,a.jsxs)("code",{className:C().exampleCode,role:"button",onClick:()=>{en(ei+(ei.length>0?" ":"")+'level:"info"')},children:["level:",'"',"info",'"']})]}),et[41]=en,et[42]=ei,et[43]=X):X=et[43],et[44]===Symbol.for("react.memo_cache_sentinel")?(Z=(0,a.jsx)("span",{className:C().exampleLabel,children:"Not:"}),et[44]=Z):Z=et[44],et[45]!==en||et[46]!==ei?(q=(0,a.jsxs)("div",{className:C().exampleRow,children:[Z,(0,a.jsx)("code",{className:C().exampleCode,role:"button",onClick:()=>{en(ei+(ei.length>0?" ":"")+"-level:info")},children:"-level:info"})]}),et[45]=en,et[46]=ei,et[47]=q):q=et[47],et[48]===Symbol.for("react.memo_cache_sentinel")?(J=(0,a.jsx)("span",{className:C().exampleLabel,children:"Existence:"}),et[48]=J):J=et[48],et[49]!==en||et[50]!==ei?(G=(0,a.jsxs)("div",{className:C().exampleRow,children:[J,(0,a.jsx)("code",{className:C().exampleCode,role:"button",onClick:()=>{en(ei+(ei.length>0?" ":"")+"service:*")},children:"service:*"})]}),et[49]=en,et[50]=ei,et[51]=G):G=et[51],et[52]===Symbol.for("react.memo_cache_sentinel")?(U=(0,a.jsx)("span",{className:C().exampleLabel,children:"Boolean:"}),et[52]=U):U=et[52],et[53]!==en||et[54]!==ei?(K=(0,a.jsxs)("div",{className:C().exampleRow,children:[U,(0,a.jsx)("code",{className:C().exampleCode,role:"button",onClick:()=>{en(ei+(ei.length>0?" ":"")+'("foo" OR "bar")')},children:"(foo OR bar)"})]}),et[53]=en,et[54]=ei,et[55]=K):K=et[55],et[56]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,a.jsx)("a",{className:C().docsLink,target:"_blank",href:"https://clickhouse.com/docs/use-cases/observability/clickstack/search",rel:"noreferrer",children:(0,a.jsxs)(c.Y,{gap:5,children:[(0,a.jsx)(d.A,{size:14}),(0,a.jsx)("span",{children:"Docs"})]})}),et[56]=Y):Y=et[56],et[57]!==O||et[58]!==W||et[59]!==X||et[60]!==q||et[61]!==G||et[62]!==K?(Q=(0,a.jsxs)(a.Fragment,{children:[V,O,W,X,q,G,K,Y]}),et[57]=O,et[58]=W,et[59]=X,et[60]=q,et[61]=G,et[62]=K,et[63]=Q):Q=et[63],et[64]!==eu||et[65]!==s||et[66]!==f||et[67]!==en||et[68]!==b||et[69]!==y||et[70]!==es||et[71]!==j||et[72]!==ea||et[73]!==P||et[74]!==Q||et[75]!==ei||et[76]!==N?(ee=(0,a.jsx)(k,{inputRef:eo,value:ei,onChange:en,placeholder:es,autocompleteOptions:eu,size:ea,zIndex:N,language:f,onLanguageChange:b,onSubmit:y,queryHistoryType:j,"data-testid":s,aboveSuggestions:P,belowSuggestions:Q}),et[64]=eu,et[65]=s,et[66]=f,et[67]=en,et[68]=b,et[69]=y,et[70]=es,et[71]=j,et[72]=ea,et[73]=P,et[74]=Q,et[75]=ei,et[76]=N,et[77]=ee):ee=et[77],ee}},24885:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(55729);let r=function(e,t="right"){let[s,r]=(0,a.useState)(e),n=(0,a.useRef)(0),i=(0,a.useRef)(0),l="top"===t||"bottom"===t,o=l?"clientY":"clientX",c="right"===t||"top"===t?-1:1,d=(0,a.useCallback)(e=>{let t=l?window.innerHeight:window.innerWidth,s=e[o]-n.current,a=l?window.innerHeight:document.body.offsetWidth;r(Math.min(Math.max(10,i.current+s/t*100*c),(a-25)/t*100))},[l,o,c]),m=(0,a.useCallback)(()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",m)},[d]),u=(0,a.useCallback)(e=>{e.preventDefault(),n.current=e[o],i.current=s,document.addEventListener("mousemove",d),document.addEventListener("mouseup",m)},[o,s,d,m]);return(0,a.useEffect)(()=>()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",m)},[d,m]),{size:s,startResize:u}}},25156:()=>{},26355:(e,t,s)=>{"use strict";s.d(t,{A:()=>z});var a=s(6029),r=s(75155),n=s(55729),i=s(75828),l=s.n(i),o=s(70921),c=s(67549),d=s(40399),m=s(91544),u=s.n(m),p=s(59513),h=s.n(p),x=s(77494),g=s.n(x),f=s(97554),b=s.n(f),y=s(64022),v=s.n(y),j=s(84450),_=s.n(j),S=s(22273),w=s(33958),E=s(88302),k=s(74805),N=s(65723),C=s.n(N);let A=(0,o.eU)({normallyExpanded:!1}),T=n.memo(n.forwardRef((e,t)=>{let s=(0,r.c)(19),{value:n}=e;if(g()(n)){let e;return s[0]!==t?(e=(0,a.jsx)("span",{ref:t,className:C().null,children:"null"}),s[0]=t,s[1]=e):e=s[1],e}if(_()(n)){let e;return s[2]!==t||s[3]!==n?(e=(0,a.jsx)("span",{ref:t,className:C().string,children:n}),s[2]=t,s[3]=n,s[4]=e):e=s[4],e}if(b()(n)){let e;return s[5]!==t||s[6]!==n?(e=(0,a.jsx)("span",{ref:t,className:C().number,children:n}),s[5]=t,s[6]=n,s[7]=e):e=s[7],e}if(h()(n)){let e,r=n?"true":"false";return s[8]!==t||s[9]!==r?(e=(0,a.jsx)("span",{ref:t,className:C().boolean,children:r}),s[8]=t,s[9]=r,s[10]=e):e=s[10],e}if(v()(n)){let e,r;return s[11]!==n?(e=Object.keys(n),s[11]=n,s[12]=e):e=s[12],s[13]!==t||s[14]!==e.length?(r=(0,a.jsxs)("span",{ref:t,className:C().object,children:["{}"," ",e.length," keys"]}),s[13]=t,s[14]=e.length,s[15]=r):r=s[15],r}if(u()(n)){let e;return s[16]!==t||s[17]!==n.length?(e=(0,a.jsxs)("span",{ref:t,className:C().array,children:["[]"," ",n.length," items"]}),s[16]=t,s[17]=n.length,s[18]=e):e=s[18],e}return null})),$=n.memo(e=>{let t,s,n,i=(0,r.c)(12),{keyName:l,keyPath:o,value:d,isInParsedJson:m,parsedJsonRootPath:u}=e,{getLineActions:p}=(0,c.md)(A);e:{let e;if(p){let e;i[0]!==p||i[1]!==m||i[2]!==l||i[3]!==o||i[4]!==u||i[5]!==d?(e=p({key:l,keyPath:o,value:d,isInParsedJson:m,parsedJsonRootPath:u}),i[0]=p,i[1]=m,i[2]=l,i[3]=o,i[4]=u,i[5]=d,i[6]=e):e=i[6],t=e;break e}i[7]===Symbol.for("react.memo_cache_sentinel")?(e=[],i[7]=e):e=i[7],t=e}let h=t;return i[8]!==h?(s=h.map(M),i[8]=h,i[9]=s):s=i[9],i[10]!==s?(n=(0,a.jsx)("div",{className:C().lineMenu,children:s}),i[10]=s,i[11]=n):n=i[11],n}),I=n.memo(({keyName:e,keyPath:t,value:s,disableMenu:r,isInParsedJson:i=!1,parsedJsonRootPath:o=[]})=>{let{normallyExpanded:d}=(0,c.md)(A),{ref:m,hovered:p}=(0,S.M)(),h=n.useMemo(()=>{if(!_()(s))return!1;try{if(s.startsWith("{")&&s.endsWith("}")||s.startsWith("[")&&s.endsWith("]"))return!!JSON.parse(s)}catch(e){return!1}},[s]),[x,g]=n.useState(d&&!h);n.useEffect(()=>{g(d&&!h)},[h,d]);let f=n.useMemo(()=>v()(s)&&Object.keys(s).length>0||u()(s)&&s.length>0||h,[h,s]),b=n.useCallback(()=>{f&&g(e=>!e)},[f]),y=n.useMemo(()=>{if(h)try{return JSON.parse(s)}catch(e){return null}return s},[h,s]),j=t.length,N=n.useMemo(()=>[...t,e],[e,t]),I=i||h,R=n.useMemo(()=>h?N:o,[h,N,o]),z=n.useRef(null),[M,D]=n.useState(!1),P=n.useCallback(()=>{D(!0)},[]),V=n.useCallback(()=>{D(!1)},[]);return n.useEffect(()=>{let e=z.current;return e?.addEventListener("selectstart",P),e?.addEventListener("mouseup",V),()=>{e?.removeEventListener("selectstart",P),e?.removeEventListener("mouseup",V)}},[V,P]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{ref:m,onClick:b,className:l()(C().line,{[C().nestedLine]:j>0,[C().expanded]:x,[C().expandable]:f}),style:{marginLeft:16*j},children:[(0,a.jsx)("div",{className:C().keyContainer,children:(0,a.jsxs)("div",{className:C().key,children:[f&&(x?(0,a.jsx)(w.A,{size:10}):(0,a.jsx)(E.A,{size:10})),e,(0,a.jsx)("div",{className:C().hoverContent,children:(0,a.jsx)(k.A,{size:14})})]})}),(0,a.jsx)("div",{className:C().valueContainer,children:h?x?(0,a.jsxs)("div",{className:C().object,children:["{}"," Parsed JSON"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T,{value:s,ref:z}),(0,a.jsx)("div",{className:C().jsonBtn,children:"Expand JSON"})]}):(0,a.jsx)(T,{value:s,ref:z})}),p&&!r&&!M&&(0,a.jsx)($,{keyName:e,keyPath:N,value:s,isInParsedJson:i,parsedJsonRootPath:o})]},e),x&&f&&(0,a.jsx)(L,{data:y,keyPath:N,disableMenu:r,isInParsedJson:I,parsedJsonRootPath:R})]})});function L(e){let t,s,i,o,c,d,m,u=(0,r.c)(22),{data:p,keyPath:h,disableMenu:x,isInParsedJson:g,parsedJsonRootPath:f}=e;u[0]!==h?(t=void 0===h?[]:h,u[0]=h,u[1]=t):t=u[1];let b=t,y=void 0!==x&&x,v=void 0!==g&&g;u[2]!==f?(s=void 0===f?[]:f,u[2]=f,u[3]=s):s=u[3];let j=s,[_,S]=n.useState(!1);u[4]!==p?(i=Object.keys(p),u[4]=p,u[5]=i):i=u[5];let w=i.length;u[6]!==p||u[7]!==_?(o=_?Object.entries(p):Object.entries(p).slice(0,50),u[6]=p,u[7]=_,u[8]=o):o=u[8];let E=o,k=b?.length||0;return u[9]!==y||u[10]!==v||u[11]!==b||u[12]!==j||u[13]!==E?(c=E.map(e=>{let[t,s]=e;return(0,a.jsx)(I,{keyName:t,value:s,keyPath:b,disableMenu:y,isInParsedJson:v,parsedJsonRootPath:j},t)}),u[9]=y,u[10]=v,u[11]=b,u[12]=j,u[13]=E,u[14]=c):c=u[14],u[15]!==_||u[16]!==k||u[17]!==w?(d=w>50&&!_&&(0,a.jsx)("div",{className:l()(C().line,C().nestedLine,C().expandable),style:{marginLeft:16*k},onClick:()=>S(!0),children:(0,a.jsx)("div",{className:C().keyContainer,children:(0,a.jsxs)("div",{className:C().jsonBtn,children:["Expand ",w-50," more properties"]})})}),u[15]=_,u[16]=k,u[17]=w,u[18]=d):d=u[18],u[19]!==d||u[20]!==c?(m=(0,a.jsxs)(a.Fragment,{children:[c,d]}),u[19]=d,u[20]=c,u[21]=m):m=u[21],m}let R=e=>{let t,s,a,i=(0,r.c)(6),{children:l,initialValues:o}=e;i[0]!==o?(t=[[A,o]],i[0]=o,i[1]=t):t=i[1],(0,d.RH)(t);let m=(0,c.Xr)(A);return i[2]!==o||i[3]!==m?(s=()=>{m(o)},a=[o,m],i[2]=o,i[3]=m,i[4]=s,i[5]=a):(s=i[4],a=i[5]),n.useEffect(s,a),l},z=e=>{let t,s,n,i,o,d,m=(0,r.c)(17),{data:u,normallyExpanded:p,tabulate:h,lineWrap:x,getLineActions:g}=e,f=void 0!==p&&p,b=void 0!==h&&h;m[0]!==u?(t=Object.keys(u),m[0]=u,m[1]=t):t=m[1];let y=0===t.length;return m[2]!==g||m[3]!==f?(s={normallyExpanded:f,getLineActions:g},m[2]=g,m[3]=f,m[4]=s):s=m[4],m[5]!==x||m[6]!==b?(n=l()(C().container,{[C().withTabulate]:b,[C().withLineWrap]:x}),m[5]=x,m[6]=b,m[7]=n):n=m[7],m[8]!==u||m[9]!==y?(i=y?(0,a.jsx)("div",{children:"Empty"}):(0,a.jsx)(L,{data:u}),m[8]=u,m[9]=y,m[10]=i):i=m[10],m[11]!==n||m[12]!==i?(o=(0,a.jsx)("div",{className:n,children:i}),m[11]=n,m[12]=i,m[13]=o):o=m[13],m[14]!==s||m[15]!==o?(d=(0,a.jsx)(c.Kq,{children:(0,a.jsx)(R,{initialValues:s,children:o})}),m[14]=s,m[15]=o,m[16]=d):d=m[16],d};function M(e){return(0,a.jsx)("button",{title:e.title,className:C().lineMenuBtn,onClick:t=>{e.onClick(),t.stopPropagation()},children:e.label},e.key)}},26674:(e,t,s)=>{"use strict";s.d(t,{S:()=>r,Y:()=>n});var a=s(55729);let r=(0,a.createContext)(0);function n(){return(0,a.useContext)(r)}},26837:(e,t,s)=>{"use strict";s.d(t,{W:()=>eS});var a=s(6029),r=s(55729),n=s(75155),i=s(84450),l=s.n(i),o=s(16943),c=s.n(o),d=s(82641),m=s(60481),u=s(45005),p=s(43517),h=s(78253),x=s(81973),g=s(18006),f=s(37901),b=s(65081),y=s(50374),v=s(64441),j=s(94937),_=s(75828),S=s.n(_),w=s(7913),E=s(63085),k=s(25062),N=s(94720),C=s(3635),A=s(70114),T=s(23474),$=s(54134),I=s(58333),L=s(7565),R=s(94364),z=s(72075),M=s(66773),D=s.n(M);let P=e=>{let t,s,r,i,l,o,c,d=(0,n.c)(19),{filename:m,function:u,lineno:p,colno:h,isLoading:x}=e,g=x?.8:1,f=x?"blur(1px)":"none";return d[0]!==g||d[1]!==f?(t={opacity:g,filter:f},d[0]=g,d[1]=f,d[2]=t):t=d[2],d[3]!==h||d[4]!==p?(s=(0,a.jsxs)("span",{children:[":",p,":",h]}),d[3]=h,d[4]=p,d[5]=s):s=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)("span",{children:" in "}),d[6]=r):r=d[6],d[7]!==u?(i=u&&(0,a.jsx)("span",{style:{background:"#ffffff10",padding:"0 4px",borderRadius:4},children:u}),d[7]=u,d[8]=i):i=d[8],d[9]!==m||d[10]!==t||d[11]!==s||d[12]!==i?(l=(0,a.jsxs)("div",{className:" fs-8",style:t,children:[m,s,r,i]}),d[9]=m,d[10]=t,d[11]=s,d[12]=i,d[13]=l):l=d[13],d[14]!==x?(o=x&&(0,a.jsx)(N.a,{size:"xs",color:"gray"}),d[14]=x,d[15]=o):o=d[15],d[16]!==l||d[17]!==o?(c=(0,a.jsxs)(C.Y,{gap:"xs",display:"inline-flex",children:[l,o]}),d[16]=l,d[17]=o,d[18]=c):c=d[18],c},V=e=>{let t,s,i,l,o,c,d=(0,n.c)(15),{title:m,children:u,initiallyCollapsed:p}=e,[h,x]=r.useState(p??!1);return d[0]!==h?(t=()=>x(!h),s=h?(0,a.jsx)(A.A,{size:14,className:"me-2"}):(0,a.jsx)(T.A,{size:14,className:"me-2"}),d[0]=h,d[1]=t,d[2]=s):(t=d[1],s=d[2]),d[3]!==m?(i=(0,a.jsx)("div",{className:"fs-7",children:m}),d[3]=m,d[4]=i):i=d[4],d[5]!==t||d[6]!==s||d[7]!==i?(l=(0,a.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,i]}),d[5]=t,d[6]=s,d[7]=i,d[8]=l):l=d[8],d[9]!==u||d[10]!==h?(o=h?null:(0,a.jsx)("div",{className:"mb-4",children:u}),d[9]=u,d[10]=h,d[11]=o):o=d[11],d[12]!==l||d[13]!==o?(c=(0,a.jsxs)("div",{className:"my-3",children:[l,o]}),d[12]=l,d[13]=o,d[14]=c):c=d[14],c},F=e=>{let t,s,r=(0,n.c)(5),{children:i,title:l}=e;return r[0]!==l?(t=l&&(0,a.jsx)("div",{className:D().panelSectionWrapperTitle,children:l}),r[0]=l,r[1]=t):t=r[1],r[2]!==i||r[3]!==t?(s=(0,a.jsxs)("div",{className:D().panelSectionWrapper,children:[t,i]}),r[2]=i,r[3]=t,r[4]=s):s=r[4],s},O=e=>{let t,s,r,i,l=(0,n.c)(8),{label:o,value:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={paddingRight:20,marginRight:12,borderRight:"1px solid #ffffff20"},l[0]=t):t=l[0],l[1]!==o?(s=(0,a.jsx)("div",{children:o}),l[1]=o,l[2]=s):s=l[2],l[3]!==c?(r=(0,a.jsx)("div",{className:"fs-7",children:c}),l[3]=c,l[4]=r):r=l[4],l[5]!==s||l[6]!==r?(i=(0,a.jsxs)("div",{style:t,children:[s,r]}),l[5]=s,l[6]=r,l[7]=i):i=l[7],i},H=e=>{let t,s=(0,n.c)(3),{onClick:r,isOpen:i}=e,l=i?"chevron-up":"chevron-down";return s[0]!==r||s[1]!==l?(t=(0,a.jsx)(z.L,{label:"",biIcon:l,onClick:r}),s[0]=r,s[1]=l,s[2]=t):t=s[2],t},W=[{accessorKey:"filename",cell:e=>{let t,s,i,l,o,c,d,m,u,p=(0,n.c)(31),{row:h,table:x}=e,g=x.options.meta,[f,b]=r.useState(h.index===g.firstFrameIndex);p[0]!==f?(t=()=>{b(!f)},p[0]=f,p[1]=t):t=p[1];let y=t,v=h.original,{isLoading:j,enrichedFrame:_}=(0,R.f)(v),w=_??v,k=!!w.context_line;return p[2]!==k?(s=S()("w-100 py-2 px-4 d-flex justify-content-between align-items-center",{[D().stacktraceRowInteractive]:k}),p[2]=k,p[3]=s):s=p[3],p[4]!==w.in_app?(i=!w.in_app&&(0,a.jsx)(E.m,{label:"in_app: false",position:"top",withArrow:!0,color:"gray",children:(0,a.jsx)($.A,{size:14,className:"me-2","aria-label":"in_app: false"})}),p[4]=w.in_app,p[5]=i):i=p[5],p[6]!==w||p[7]!==j?(l=w&&(0,a.jsx)(P,{colno:w.colno,filename:w.filename,lineno:w.lineno,function:w.function,isLoading:j}),p[6]=w,p[7]=j,p[8]=l):l=p[8],p[9]!==i||p[10]!==l?(o=(0,a.jsxs)("div",{children:[i,l]}),p[9]=i,p[10]=l,p[11]=o):o=p[11],p[12]!==y||p[13]!==k||p[14]!==f?(c=k&&(0,a.jsx)(H,{onClick:y,isOpen:f}),p[12]=y,p[13]=k,p[14]=f,p[15]=c):c=p[15],p[16]!==y||p[17]!==s||p[18]!==o||p[19]!==c?(d=(0,a.jsxs)("div",{className:s,onClick:y,children:[o,c]}),p[16]=y,p[17]=s,p[18]=o,p[19]=c,p[20]=d):d=p[20],p[21]!==w.context_line||p[22]!==w.lineno||p[23]!==w.post_context||p[24]!==w.pre_context||p[25]!==k||p[26]!==f?(m=f&&k&&(0,a.jsxs)("pre",{className:D().lineContext,children:[w.pre_context?.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:D().lineContextLineNo,children:(w.lineno??0)-(w.pre_context?.length??0)+t}),e]},e+t)),w.context_line&&(0,a.jsxs)("div",{className:D().lineContextCurrentLine,children:[(0,a.jsx)("span",{className:D().lineContextLineNo,children:w.lineno}),w.context_line]}),w.post_context?.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:D().lineContextLineNo,children:w.lineno+t+1}),e]},e+t))]}),p[21]=w.context_line,p[22]=w.lineno,p[23]=w.post_context,p[24]=w.pre_context,p[25]=k,p[26]=f,p[27]=m):m=p[27],p[28]!==d||p[29]!==m?(u=(0,a.jsxs)(a.Fragment,{children:[d,m]}),p[28]=d,p[29]=m,p[30]=u):u=p[30],u}}],B=e=>{let t,s=(0,n.c)(2),{url:r}=e;return s[0]!==r?(t=(0,a.jsx)("span",{title:r,children:r}),s[0]=r,s[1]=t):t=s[1],t},X=r.memo(e=>{let t,s=(0,n.c)(3),{status:r}=e;if(!r)return null;let i=r>=500?"text-danger bg-danger":r>=400?"text-warning bg-warning":"text-success bg-success",l=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${i}`;return s[0]!==r||s[1]!==l?(t=(0,a.jsx)("span",{className:l,children:r}),s[0]=r,s[1]=l,s[2]=t):t=s[2],t}),Z=r.memo(e=>{let t,s=(0,n.c)(3),{level:r}=e;if(!r)return null;let i=r.includes("error")?"text-danger bg-danger":r.includes("warn")||r.includes("warning")?"text-warning bg-warning":"bg-muted",l=`badge lh-base rounded-5 bg-opacity-10 fw-normal ${i}`;return s[0]!==r||s[1]!==l?(t=(0,a.jsx)("span",{className:l,children:r}),s[0]=r,s[1]=l,s[2]=t):t=s[2],t}),q=[{accessorKey:"category",header:"Category",size:180,cell:({row:e})=>(0,a.jsxs)("span",{className:"d-flex align-items-center gap-2",children:[e.original.category,"console"===e.original.category&&(0,a.jsx)(Z,{level:e.original.level}),"fetch"===e.original.category||"xhr"===e.original.category?(0,a.jsx)(X,{status:e.original.data?.status_code}):null]})},{accessorKey:"message",header:"Data",size:99999,cell:({row:e})=>{if(e.original.data&&("fetch"===e.original.category||"xhr"===e.original.category)){let{method:t,url:s}=e.original.data;return(0,a.jsxs)("div",{className:"text-truncate",children:[(0,a.jsxs)("span",{children:[t," "]}),(0,a.jsx)("span",{title:s,children:(0,a.jsx)(B,{url:s})})]})}if("navigation"===e.original.category&&e.original.data){let{from:t,to:s}=e.original.data;return(0,a.jsxs)("div",{className:"text-truncate",children:[(0,a.jsx)("span",{title:t,children:(0,a.jsx)(B,{url:t})}),(0,a.jsx)("span",{children:" â†’ "}),(0,a.jsx)("span",{title:s,children:(0,a.jsx)(B,{url:s})})]})}if("console"===e.original.category){let{message:t}=e.original;return(0,a.jsx)("pre",{className:"mb-0 text-truncate fs-8",title:t,children:t})}return e.original.message?(0,a.jsx)("div",{className:"text-truncate",children:e.original.message}):(0,a.jsx)("span",{className:"text-muted",children:"Empty"})}},{header:"Timestamp",size:220,cell:({row:e})=>(0,a.jsx)("span",{className:"text-muted",children:(0,a.jsx)(L.H,{value:1e3*e.original.timestamp,format:"withMs"})})}],J=e=>{let t,s,a,i=(0,n.c)(11),{rows:l,maxRows:o}=e,c=void 0===o?5:o,[d,m]=r.useState(!1);i[0]!==d||i[1]!==c||i[2]!==l?(t=d?l:l.slice(0,c),i[0]=d,i[1]=c,i[2]=l,i[3]=t):t=i[3];let u=t,p=l.length??0,h=p>c?p-c:null;i[4]!==d?(s=()=>{m(!d)},i[4]=d,i[5]=s):s=i[5];let x=s;return i[6]!==x||i[7]!==h||i[8]!==d||i[9]!==u?(a={visibleRows:u,hiddenRowsCount:h,handleToggleMoreRows:x,isExpanded:d},i[6]=x,i[7]=h,i[8]=d,i[9]=u,i[10]=a):a=i[10],a},G=e=>{let t,s,r,i,l,o,c,d,m,u,h,x,g,f,b=(0,n.c)(42),{logData:y,breadcrumbs:v,exceptionValues:j}=e,_=j[0];_?.stacktrace?.frames;e:{let e;if(!_?.stacktrace?.frames){let e;b[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],b[0]=e):e=b[0],t=e;break e}b[1]!==_?.stacktrace.frames?(e=_?.stacktrace.frames.slice().reverse(),b[1]=_?.stacktrace.frames,b[2]=e):e=b[2],t=e}let S=t;if(b[3]!==S){let e=S&&S.length?S.find(e=>e.in_app)??S.find(e=>!!e.function||!!e.filename)??S[0]:null;s=e?S.indexOf(e):-1,b[3]=S,b[4]=s}else s=b[4];let E=s;b[5]!==v||b[6]!==_||b[7]!==y?.timestamp?(r=()=>[..._&&v?[{category:"exception",timestamp:new Date(y?.timestamp??0).getTime()/1e3,message:`${_.type}: ${_.value} `}]:[],...v?.slice().reverse()??[]],b[5]=v,b[6]=_,b[7]=y?.timestamp,b[8]=r):r=b[8],y?.timestamp,b[9]!==r?(i=r(),b[9]=r,b[10]=i):i=b[10];let N=i,C=Math.max(5,E+1);b[11]!==S||b[12]!==C?(l={rows:S,maxRows:C},b[11]=S,b[12]=C,b[13]=l):l=b[13];let{handleToggleMoreRows:A,hiddenRowsCount:$,visibleRows:L,isExpanded:R}=J(l);b[14]!==N?(o={rows:N},b[14]=N,b[15]=o):o=b[15];let{handleToggleMoreRows:M,hiddenRowsCount:D,visibleRows:P,isExpanded:H}=J(o);return b[16]!==_?(c=_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(p.E,{fw:"bold",component:"span",size:"sm",variant:"danger",children:[_.type,":"," "]}),(0,a.jsx)("span",{className:"text-muted",children:_.value})]}),_.mechanism&&(0,a.jsxs)("div",{className:"d-flex gap-2 flex-wrap pt-3",children:[(0,a.jsx)(O,{label:"mechanism",value:_.mechanism?.type}),(0,a.jsx)(O,{label:"handled",value:_.mechanism?.handled?(0,a.jsx)("span",{className:"text-success",children:"true"}):(0,a.jsx)("span",{className:"text-danger",children:"false"})}),_.mechanism?.data?.function?(0,a.jsx)(O,{label:"function",value:_.mechanism.data.function}):null,_.mechanism?.data?.handler?(0,a.jsx)(O,{label:"handler",value:_.mechanism.data.handler}):null,_.mechanism?.data?.target?(0,a.jsx)(O,{label:"target",value:_.mechanism.data.target}):null]})]}),b[16]=_,b[17]=c):c=b[17],b[18]!==E?(d={firstFrameIndex:E},b[18]=E,b[19]=d):d=b[19],b[20]!==L||b[21]!==d?(m=(0,a.jsx)(w.ErrorBoundary,{onError:U,fallbackRender:K,children:(0,a.jsx)(z.X,{hideHeader:!0,columns:W,data:L,density:"zero",tableMeta:d})}),b[20]=L,b[21]=d,b[22]=m):m=b[22],b[23]!==j[0].stacktrace?(u="string"==typeof j[0].stacktrace&&(0,a.jsx)("pre",{className:"px-4",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:j[0].stacktrace}),b[23]=j[0].stacktrace,b[24]=u):u=b[24],b[25]!==A||b[26]!==R||b[27]!==$?(h=$?(0,a.jsx)(k.$,{variant:"secondary",size:"xs",m:"xs",onClick:A,children:R?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{size:14,className:"me-2"})," Hide stack trace"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{size:14,className:"me-2"}),"Show ",$," more frames"]})}):null,b[25]=A,b[26]=R,b[27]=$,b[28]=h):h=b[28],b[29]!==m||b[30]!==u||b[31]!==h||b[32]!==c?(x=(0,a.jsxs)(F,{title:c,children:[m,u,h]}),b[29]=m,b[30]=u,b[31]=h,b[32]=c,b[33]=x):x=b[33],b[34]!==H||b[35]!==D||b[36]!==P||b[37]!==M?(g=P.length>0&&(0,a.jsx)(V,{title:"Breadcrumbs",children:(0,a.jsxs)(F,{children:[(0,a.jsx)(z.X,{columns:q,data:P,emptyMessage:"No breadcrumbs found"}),D?(0,a.jsx)(k.$,{variant:"secondary",size:"xs",m:"xs",onClick:M,children:H?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{size:14,className:"me-2"})," Hide breadcrumbs"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{size:14,className:"me-2"}),"Show ",D," more breadcrumbs"]})}):null]})}),b[34]=H,b[35]=D,b[36]=P,b[37]=M,b[38]=g):g=b[38],b[39]!==x||b[40]!==g?(f=(0,a.jsxs)("div",{children:[x,g]}),b[39]=x,b[40]=g,b[41]=f):f=b[41],f};function U(e){console.error(e)}function K(){return(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering stacktrace"})}var Y=s(65234),Q=s.n(Y),ee=s(21510),et=s(60665),es=s(34027),ea=s(26355),er=s(78694);let en=function(e){let t="";return e&&(t=` ${({GET:"-X GET",POST:"-X POST",PUT:"-X PUT",PATCH:"-X PATCH",DELETE:"-X DELETE"})[e.toUpperCase()]}`)," \\\n"+t},ei=function(e){let t="";return e&&e.map(([e,s])=>{t+=` \\
-H "${e}: ${s.replace(/(\\|")/g,"\\$1")}"`}),t},el=function(e){let t="";return e&&(t+=` \\
-d "${JSON.stringify(e).replace(/(\\|")/g,"\\$1")}"`),t},eo=function(e){let t="";return e&&(t+=` \\
--data-raw ${/[\0-\x1F\x7F-\x9F!]|\'/.test(e)?"$'"+e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(e){let t=e.charCodeAt(0).toString(16);for(;t.length<4;)t="0"+t;return"\\u"+t})+"'":"'"+e+"'"}`),t},ec=function(e){let t="";return e&&Object.keys(e).forEach(s=>{let a=s.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`);if(e[s])"boolean"==typeof e[s]&&e[s]?t+=`--${a} `:"string"==typeof e[s]&&(t+=`--${a} ${e[s]} `);else throw Error(`Invalid Curl option ${s}`)}),t?` \\
${t}`:t},ed=function(e,t){let s="curl ";return s+=e.url,s+=en(e.method),s+=ei(e.headers),s+="string"==typeof e.body?eo(e.body):el(e.body),(s+=ec(t)).trim()},em={base00:"#00000000",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#8378FF",base0E:"#ae81ff",base0F:"#cc6633"},eu=(e,t)=>Object.entries(c()(t,(t,s)=>s.startsWith(e))).flatMap(([t,s])=>{let a=s;try{"string"==typeof s&&(a=JSON.parse(s))}catch(e){}let r=t.replace(e,"").replace("_","-"),n=[[r,`${a}`]];if(Array.isArray(a))n=a.map(e=>[r,`${e}`]);else if("object"==typeof a&&Object.keys(a).length>0)try{n=[[r,`${JSON.stringify(a)}`]]}catch(e){console.error(e)}return n}),ep=({body:e,theme:t,emptyMessage:s,notCollectedMessage:n})=>{let i=r.useCallback(e=>(0,a.jsx)("pre",{className:"d-inline text-break",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e}),[]),l=r.useMemo(()=>{if("string"!=typeof e)return null;try{if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))return JSON.parse(e)}catch(e){return null}},[e]);return(0,a.jsx)(a.Fragment,{children:null!=e&&""!=e?(0,a.jsx)("pre",{className:"m-0 px-4 py-3",style:{wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:l?(0,a.jsx)(ea.A,{data:l,normallyExpanded:!0}):"string"==typeof e?e:(0,a.jsx)(ee.d,{hideRoot:!0,invertTheme:!1,data:e,theme:t,valueRenderer:i})}):""===e?(0,a.jsx)("div",{className:"px-4 py-3",children:s}):(0,a.jsx)("div",{className:"px-4 py-3",children:n})})};function eh(e){let t,s,r,i,l,o,c,d,m,u,p,h,x,g,f,b=(0,n.c)(41),{eventAttributes:y}=e;b[0]!==y?(t=eu("http.request.header.",y),b[0]=y,b[1]=t):t=b[1];let v=t;b[2]!==y?(s=eu("http.response.header.",y),b[2]=y,b[3]=s):s=b[3];let j=s,_=y["http.url"],S=y["net.peer.ip"],w=y["http.status_code"],E=y["http.method"],N=y["http.request.body"],C=y["http.response.body"];b[4]!==E||b[5]!==N||b[6]!==v||b[7]!==_?(r=ed({method:E,headers:v,url:_,body:N}),b[4]=E,b[5]=N,b[6]=v,b[7]=_,b[8]=r):r=b[8];let A=r;return _||E||w?(b[9]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsxs)(k.$,{size:"xs",variant:"primary",children:[(0,a.jsx)(es.A,{size:14,className:"me-2"}),"Copy Request as Curl"]}),b[9]=i):i=b[9],b[10]!==A?(l=(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(Q(),{text:A,onCopy:ex,children:i})}),b[10]=A,b[11]=l):l=b[11],b[12]!==_?(o=_&&{label:"URL",value:_},b[12]=_,b[13]=o):o=b[13],b[14]!==E?(c=E&&{label:"Method",value:E},b[14]=E,b[15]=c):c=b[15],b[16]!==S?(d=S&&{label:"Remote Address",value:S},b[16]=S,b[17]=d):d=b[17],b[18]!==y||b[19]!==w?(m=w&&{label:"Status",value:`${w} ${y["http.status_text"]??""}`,className:w>=500?"text-danger":w>=400?"text-warning":"text-success"},b[18]=y,b[19]=w,b[20]=m):m=b[20],b[21]!==o||b[22]!==c||b[23]!==d||b[24]!==m?(u=(0,a.jsx)(er.$K,{children:(0,a.jsx)(z.X,{borderless:!0,density:"compact",columns:er.Qx,data:[o,c,d,m].filter(Boolean),hideHeader:!0})}),b[21]=o,b[22]=c,b[23]=d,b[24]=m,b[25]=u):u=b[25],b[26]!==v?(p=v.length>0&&(0,a.jsx)(er.iV,{title:`Request Headers (${v.length})`,initiallyCollapsed:!0,children:(0,a.jsx)(er.$K,{children:(0,a.jsx)(z.X,{borderless:!0,hideHeader:!0,density:"compact",columns:er.hF,data:v,emptyMessage:"No request headers collected"})})}),b[26]=v,b[27]=p):p=b[27],b[28]!==N?(h=null!=N&&(0,a.jsx)(er.iV,{title:"Request Body",children:(0,a.jsx)(er.$K,{children:(0,a.jsx)(ep,{body:N,theme:em,emptyMessage:"Empty request",notCollectedMessage:"No request body collected"})})}),b[28]=N,b[29]=h):h=b[29],b[30]!==j?(x=j.length>0&&(0,a.jsx)(er.iV,{title:`Response Headers (${j.length})`,initiallyCollapsed:!0,children:(0,a.jsx)(er.$K,{children:(0,a.jsx)(z.X,{borderless:!0,hideHeader:!0,density:"compact",columns:er.hF,data:j,emptyMessage:"No response headers collected"})})}),b[30]=j,b[31]=x):x=b[31],b[32]!==C?(g=null!=C&&(0,a.jsx)(er.iV,{title:"Response Body",children:(0,a.jsx)(er.$K,{children:(0,a.jsx)(ep,{body:C,theme:em,emptyMessage:"Empty response",notCollectedMessage:"No response body collected"})})}),b[32]=C,b[33]=g):g=b[33],b[34]!==u||b[35]!==p||b[36]!==h||b[37]!==x||b[38]!==g||b[39]!==l?(f=(0,a.jsxs)("div",{children:[l,u,p,h,x,g]}),b[34]=u,b[35]=p,b[36]=h,b[37]=x,b[38]=g,b[39]=l,b[40]=f):f=b[40],f):null}function ex(){et.$e.show({color:"green",message:"Curl command copied to clipboard"})}let eg=[{accessorKey:"Timestamp",header:"Timestamp",size:120,cell:({row:e})=>(0,a.jsx)("span",{className:"text-muted",title:e.original.Timestamp,children:(0,a.jsx)(L.H,{value:new Date(e.original.Timestamp).getTime(),format:"withMs"})})},{accessorKey:"Name",header:"Name",size:180,cell:({row:e})=>(0,a.jsx)("span",{className:"d-flex align-items-center gap-2",children:e.original.Name})},{accessorKey:"Attributes",header:"Attributes",size:400,cell:({row:e})=>{let t=e.original.Attributes;return t&&Object.keys(t).length>0?(0,a.jsx)(m.a,{children:(0,a.jsx)(b.z,{data:t})}):(0,a.jsx)("span",{className:"text-muted",children:"Empty"})}}],ef=e=>{let t,s,r,i,l,o=(0,n.c)(15),{spanEvents:c}=e;e:{let e;if(!c||0===c.length){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}o[1]!==c?(e=[...c.filter(eb)].sort(ey),o[1]=c,o[2]=e):e=o[2],t=e}let d=t;o[3]!==d?(s={rows:d,maxRows:5},o[3]=d,o[4]=s):s=o[4];let{handleToggleMoreRows:m,hiddenRowsCount:u,visibleRows:p,isExpanded:h}=J(s);if(!d||0===d.length){let e;return o[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:"p-3 text-muted fs-7",children:"No span events available for this trace"}),o[5]=e):e=o[5],e}return o[6]!==p?(r=(0,a.jsx)(w.ErrorBoundary,{onError:ev,fallbackRender:ej,children:(0,a.jsx)(z.X,{columns:eg,data:p,emptyMessage:"No span events found"})}),o[6]=p,o[7]=r):r=o[7],o[8]!==m||o[9]!==u||o[10]!==h?(i=u?(0,a.jsx)(k.$,{variant:"secondary",size:"xs",my:"sm",onClick:m,children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{size:14,className:"me-2"})," Hide events"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.A,{size:14,className:"me-2"}),"Show ",u," more events"]})}):null,o[8]=m,o[9]=u,o[10]=h,o[11]=i):i=o[11],o[12]!==r||o[13]!==i?(l=(0,a.jsx)("div",{children:(0,a.jsxs)(F,{children:[r,i]})}),o[12]=r,o[13]=i,o[14]=l):l=o[14],l};function eb(e){return"string"==typeof e.Timestamp&&"string"==typeof e.Name&&void 0!==e.Attributes}function ey(e,t){let s=new Date(e.Timestamp).getTime();return new Date(t.Timestamp).getTime()-s}function ev(e){console.error(e)}function ej(){return(0,a.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering span events"})}let e_={};function eS(e){let t,s,i,o,_,S,w,E,k,N,C,A,T,$,I,L,R,z,M,D,P,V,F,O,H,W,B,X,Z,q,J=(0,n.c)(96),{source:U,rowId:K,aliasWith:Y,hideHeader:Q,"data-testid":ee}=e,et=void 0!==Q&&Q;J[0]!==Y||J[1]!==K||J[2]!==U?(t={source:U,rowId:K,aliasWith:Y},J[0]=Y,J[1]=K,J[2]=U,J[3]=t):t=J[3];let{data:es}=(0,f.k1)(t),{onPropertyAddClick:ea,generateSearchUrl:er}=(0,r.useContext)(y.D);J[4]!==U.highlightedRowAttributeExpressions||J[5]!==U.kind?(s=U.kind===d.GL.Trace||U.kind===d.GL.Log?U.highlightedRowAttributeExpressions??[]:[],J[4]=U.highlightedRowAttributeExpressions,J[5]=U.kind,J[6]=s):s=J[6];let en=s;J[7]!==en||J[8]!==es||J[9]!==U?(i=es?(0,g.N4)(U,en,es.data||[],es.meta||[]):[],J[7]=en,J[8]=es,J[9]=U,J[10]=i):i=J[10];let ei=i,el=es?.meta;J[11]!==el?(o=(0,f.bn)(el),J[11]=el,J[12]=o):o=J[12];let eo=o,ec=U.eventAttributesExpression;e:{let e,t;J[13]!==es?.data?.[0]?(e=es?.data?.[0]??{},J[13]=es?.data?.[0],J[14]=e):e=J[14],J[15]!==e?(t={...e},J[15]=e,J[16]=t):t=J[16];let s=t;if(!s){_=null;break e}_=s}let ed=_;J[17]===Symbol.for("react.memo_cache_sentinel")?(S=["ServiceName","SpanName","Duration","SeverityText","StatusCode","StatusMessage","SpanKind","TraceId","SpanId","ParentSpanId","ScopeName","ScopeVersion"],J[17]=S):S=J[17];let em=S;J[18]===Symbol.for("react.memo_cache_sentinel")?(w=(e,t)=>""!==e&&!!em.includes(t),J[18]=w):w=J[18],J[19]!==ed?(E=c()(ed,w),J[19]=ed,J[20]=E):E=J[20];let eu=E,ep=ed?.__hdx_resource_attributes??e_,ex=ed?.__hdx_event_attributes??e_;J[21]!==ec||J[22]!==ed?(k=ec&&ed?.[ec]&&Object.keys(ed[ec]).length>0?{[ec]:ed[ec]}:{},J[21]=ec,J[22]=ed,J[23]=k):k=J[23];let eg=k;J[24]!==er?(N=(e,t)=>er?.({where:e,whereLanguage:t})??"/",J[24]=er,J[25]=N):N=J[25];let eb=N,ey=ec&&eg?.[ec],ev=ey?.["http.url"]!=null;t:{let e;if(!ec){C=eg;break t}let t=eg?.[ec];J[26]!==t||J[27]!==eg||J[28]!==ec||J[29]!==ev?(e=ev&&t?{[ec]:c()(t,ew)}:eg,J[26]=t,J[27]=eg,J[28]=ec,J[29]=ev,J[30]=e):e=J[30],C=e}let ej=C,eS=ed?.__hdx_events_exception_attributes??e_,eE=eS?.["exception.stacktrace"]||eS?.["exception.parsed_stacktrace"],ek=eE??"[]";try{let e;J[31]!==eE?(e=JSON.parse(eE),J[31]=eE,J[32]=e):e=J[32],ek=e}catch(e){}let eN=eS?.["exception.type"];J[33]!==eS?(A="string"!=typeof eS?.["exception.message"]?JSON.stringify(eS?.["exception.message"]):eS?.["exception.message"],J[33]=eS,J[34]=A):A=J[34];let eC=eS?.["exception.mechanism"];J[35]!==ek||J[36]!==eN||J[37]!==A||J[38]!==eC?(T=[{stacktrace:ek,type:eN,value:A,mechanism:eC}],J[35]=ek,J[36]=eN,J[37]=A,J[38]=eC,J[39]=T):T=J[39];let eA=T;J[40]!==ed?.__hdx_events_exception_attributes?($=()=>Object.keys(ed?.__hdx_events_exception_attributes??{}).length>0,J[40]=ed?.__hdx_events_exception_attributes,J[41]=$):$=J[41],ed?.__hdx_events_exception_attributes;let eT=$();ed?.__hdx_span_events;let e$=Array.isArray(ed?.__hdx_span_events)&&ed?.__hdx_span_events.length>0;J[42]!==U?(I=(0,x.N8)(U),J[42]=U,J[43]=I):I=J[43];let eI=I;J[44]!==ed?(L=l()(ed?.__hdx_body)?ed.__hdx_body:ed?.__hdx_body!==void 0?JSON.stringify(ed.__hdx_body):void 0,J[44]=ed,J[45]=L):L=J[45];let eL=L;J[46]!==ed?.__hdx_severity_text||J[47]!==ed?.__hdx_timestamp||J[48]!==et||J[49]!==ei||J[50]!==eL||J[51]!==eI?(R=!et&&(0,a.jsx)(m.a,{px:"sm",pt:"md",children:(0,a.jsx)(v.A,{attributes:ei,date:new Date(ed?.__hdx_timestamp??0),mainContent:eL,mainContentHeader:eI,severityText:ed?.__hdx_severity_text})}),J[46]=ed?.__hdx_severity_text,J[47]=ed?.__hdx_timestamp,J[48]=et,J[49]=ei,J[50]=eL,J[51]=eI,J[52]=R):R=J[52],J[53]===Symbol.for("react.memo_cache_sentinel")?(z=["exception","spanEvents","network","resourceAttributes","eventAttributes","topLevelAttributes"],J[53]=z):z=J[53],J[54]!==ex||J[55]!==ev?(M=ev&&(0,a.jsxs)(u.n.Item,{value:"network",children:[(0,a.jsx)(u.n.Control,{children:(0,a.jsx)(p.E,{size:"sm",ps:"md",children:"HTTP Request"})}),(0,a.jsx)(u.n.Panel,{children:(0,a.jsx)(m.a,{px:"md",children:(0,a.jsx)(eh,{eventAttributes:ex})})})]}),J[54]=ex,J[55]=ev,J[56]=M):M=J[56],J[57]!==eA||J[58]!==ed?.__hdx_timestamp||J[59]!==eT?(D=eT&&(0,a.jsxs)(u.n.Item,{value:"exception",children:[(0,a.jsx)(u.n.Control,{children:(0,a.jsx)(p.E,{size:"sm",ps:"md",children:"Exception"})}),(0,a.jsx)(u.n.Panel,{children:(0,a.jsx)(m.a,{px:"md",children:(0,a.jsx)(G,{exceptionValues:eA,breadcrumbs:[],logData:{timestamp:ed?.__hdx_timestamp}})})})]}),J[57]=eA,J[58]=ed?.__hdx_timestamp,J[59]=eT,J[60]=D):D=J[60],J[61]!==ed?.__hdx_span_events||J[62]!==e$?(P=e$&&(0,a.jsxs)(u.n.Item,{value:"spanEvents",children:[(0,a.jsx)(u.n.Control,{children:(0,a.jsx)(p.E,{size:"sm",ps:"md",children:"Span Events"})}),(0,a.jsx)(u.n.Panel,{children:(0,a.jsx)(m.a,{px:"md",children:(0,a.jsx)(ef,{spanEvents:ed?.__hdx_span_events})})})]}),J[61]=ed?.__hdx_span_events,J[62]=e$,J[63]=P):P=J[63],J[64]!==eo||J[65]!==eu?(V=Object.keys(eu).length>0&&(0,a.jsxs)(u.n.Item,{value:"topLevelAttributes",children:[(0,a.jsx)(u.n.Control,{children:(0,a.jsx)(p.E,{size:"sm",ps:"md",children:"Top Level Attributes"})}),(0,a.jsx)(u.n.Panel,{children:(0,a.jsx)(m.a,{px:"md",children:(0,a.jsx)(b.z,{data:eu,jsonColumns:eo})})})]}),J[64]=eo,J[65]=eu,J[66]=V):V=J[66];let eR="log"===U.kind?"Log":"Span";return J[67]!==eR?(F=(0,a.jsx)(u.n.Control,{children:(0,a.jsxs)(p.E,{size:"sm",ps:"md",children:[eR," Attributes"]})}),J[67]=eR,J[68]=F):F=J[68],J[69]!==ej||J[70]!==eo?(O=(0,a.jsx)(u.n.Panel,{children:(0,a.jsx)(m.a,{px:"md",children:(0,a.jsx)(b.z,{data:ej,jsonColumns:eo})})}),J[69]=ej,J[70]=eo,J[71]=O):O=J[71],J[72]!==F||J[73]!==O?(H=(0,a.jsxs)(u.n.Item,{value:"eventAttributes",children:[F,O]}),J[72]=F,J[73]=O,J[74]=H):H=J[74],J[75]===Symbol.for("react.memo_cache_sentinel")?(W=(0,a.jsx)(u.n.Control,{children:(0,a.jsx)(p.E,{size:"sm",ps:"md",children:"Resource Attributes"})}),J[75]=W):W=J[75],J[76]!==ep?(B=Object.entries(ep),J[76]=ep,J[77]=B):B=J[77],J[78]!==eb||J[79]!==er||J[80]!==eo||J[81]!==ea||J[82]!==U.resourceAttributesExpression||J[83]!==B?(X=(0,a.jsxs)(u.n.Item,{value:"resourceAttributes",children:[W,(0,a.jsx)(u.n.Panel,{children:(0,a.jsx)(h.s,{wrap:"wrap",gap:"2px",mx:"md",mb:"lg",children:B.map(e=>{let[t,s]=e;return(0,r.createElement)(j.A,{...ea?{onPropertyAddClick:ea,sqlExpression:U.resourceAttributesExpression&&eo?.includes(U.resourceAttributesExpression)?`toString(${U.resourceAttributesExpression}.${t})`:`${U.resourceAttributesExpression}['${t}']`}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:er?eb:void 0,displayedKey:t,name:`${U.resourceAttributesExpression}.${t}`,value:s,key:t})})})})]}),J[78]=eb,J[79]=er,J[80]=eo,J[81]=ea,J[82]=U.resourceAttributesExpression,J[83]=B,J[84]=X):X=J[84],J[85]!==M||J[86]!==D||J[87]!==P||J[88]!==V||J[89]!==H||J[90]!==X?(Z=(0,a.jsxs)(u.n,{mt:"sm",defaultValue:z,multiple:!0,variant:"noPadding",children:[M,D,P,V,H,X]}),J[85]=M,J[86]=D,J[87]=P,J[88]=V,J[89]=H,J[90]=X,J[91]=Z):Z=J[91],J[92]!==ee||J[93]!==R||J[94]!==Z?(q=(0,a.jsxs)("div",{className:"flex-grow-1 overflow-auto","data-testid":ee,children:[R,Z]}),J[92]=ee,J[93]=R,J[94]=Z,J[95]=q):q=J[95],q}function ew(e,t){return!t.startsWith("http.")}},28450:(e,t,s)=>{"use strict";s.d(t,{FB:()=>j,Qg:()=>y,xD:()=>_});var a=s(6029),r=s(75155);s(55729);var n=s(82203),i=s.n(n),l=s(43465),o=s(67270),c=s(30039),d=s(43517),m=s(3635),u=s(43085),p=s(12482),h=s(49672),x=s(78550),g=s(81973),f=s(9897),b=s(7565);let y=(e,t)=>{let s,a,n,i=(0,r.c)(22),{dateRange:l,extraSelects:c,limit:d,logSource:m,order:u,where:f,whereLanguage:b}=e,y=(0,h.fu)(),v=(0,x.Ge)();return i[0]!==l||i[1]!==c||i[2]!==d||i[3]!==m.id||i[4]!==u||i[5]!==f||i[6]!==b?(s=["v2LogBatch",m.id,c,l,f,b,d,u],i[0]=l,i[1]=c,i[2]=d,i[3]=m.id,i[4]=u,i[5]=f,i[6]=b,i[7]=s):s=i[7],i[8]!==y||i[9]!==l||i[10]!==c||i[11]!==d||i[12]!==m||i[13]!==v||i[14]!==u||i[15]!==f||i[16]!==b?(a=async()=>{let e=await (0,o.PV)({select:[{valueExpression:(0,g.xg)(m),alias:"timestamp"},{valueExpression:`${m.serviceNameExpression}`,alias:"_service"},...c&&Array.isArray(c)?c:[]],from:m.from,dateRange:l,timestampValueExpression:m.timestampValueExpression,implicitColumnExpression:m.implicitColumnExpression,where:f,whereLanguage:b,connection:m.connection,limit:{limit:d??50,offset:0},orderBy:`${m.timestampValueExpression} ${u}`},v,m.querySettings);return await y.query({query:e.sql,query_params:e.params,connectionId:m.connection}).then(S)},i[8]=y,i[9]=l,i[10]=c,i[11]=d,i[12]=m,i[13]=v,i[14]=u,i[15]=f,i[16]=b,i[17]=a):a=i[17],i[18]!==t||i[19]!==s||i[20]!==a?(n={queryKey:s,queryFn:a,staleTime:3e5,...t},i[18]=t,i[19]=s,i[20]=a,i[21]=n):n=i[21],(0,p.I)(n)},v=e=>t=>{let s="#";try{s=`/search?q=${encodeURIComponent(`${e.resourceAttributesExpression}.k8s.pod.name:"${t["k8s.pod.name"]}"`)}&source=${e.id}&from=${new Date(t.timestamp).getTime()-9e5}&to=${new Date(t.timestamp).getTime()+1}`}catch(e){}return(0,a.jsxs)(c.K.Item,{children:[(0,a.jsx)(i(),{href:s,children:(0,a.jsx)(d.E,{size:"xs",fz:11,title:t.timestamp,c:"green",td:"underline",fw:"bold",children:(0,a.jsx)(b.H,{value:t.timestamp})})}),(0,a.jsxs)(m.Y,{gap:"xs",my:4,children:[(0,a.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:t["object.reason"]}),t["object.type"]&&(0,a.jsx)(u.E,{variant:"light",size:"xs",fw:"normal",color:"Normal"===t["object.type"]?"green":"yellow",children:t["object.type"]})]}),(0,a.jsx)(d.E,{size:"xs",children:t["object.note"]||t["object.message"]})]},t.id)},j=e=>{let t,s,n,i,o,u,p,h,x,g,f,j,_,S,k,N,C,A,T,$,I=(0,r.c)(82),{q:L,logSource:R,anchorEvent:z,dateRange:M}=e;I[0]!==M?.[0]?(t=M?.[0]??(0,l.A)(new Date,{days:1}),I[0]=M?.[0],I[1]=t):t=I[1];let D=t;I[2]!==M?.[1]?(s=M?.[1]??new Date,I[2]=M?.[1],I[3]=s):s=I[3];let P=s;I[4]!==P||I[5]!==D?(n=[D,P],I[4]=P,I[5]=D,I[6]=n):n=I[6];let V=`${R.eventAttributesExpression}.k8s.resource.name:"events" ${L}`;I[7]===Symbol.for("react.memo_cache_sentinel")?(i={valueExpression:"generateUUIDv4()",alias:"id"},I[7]=i):i=I[7];let F=`JSONExtractString(${R.eventAttributesExpression}['object'], 'metadata', 'creationTimestamp')`;I[8]!==F?(o={valueExpression:F,alias:"object.metadata.creationTimestamp"},I[8]=F,I[9]=o):o=I[9];let O=`JSONExtractString(${R.eventAttributesExpression}['object'], 'reason')`;I[10]!==O?(u={valueExpression:O,alias:"object.reason"},I[10]=O,I[11]=u):u=I[11];let H=`JSONExtractString(${R.eventAttributesExpression}['object'], 'note')`;I[12]!==H?(p={valueExpression:H,alias:"object.note"},I[12]=H,I[13]=p):p=I[13];let W=`JSONExtractString(${R.eventAttributesExpression}['object'], 'type')`;I[14]!==W?(h={valueExpression:W,alias:"object.type"},I[14]=W,I[15]=h):h=I[15];let B=`JSONExtractString(${R.eventAttributesExpression}['object'], 'message')`;I[16]!==B?(x={valueExpression:B,alias:"object.message"},I[16]=B,I[17]=x):x=I[17];let X=`JSONExtractString(${R.eventAttributesExpression}['object'], 'regarding', 'name')`;I[18]!==X?(g={valueExpression:X,alias:"k8s.pod.name"},I[18]=X,I[19]=g):g=I[19];let Z=`JSONExtractString(${R.eventAttributesExpression}['object'], 'regarding', 'uid')`;I[20]!==Z?(f={valueExpression:Z,alias:"k8s.pod.uid"},I[20]=Z,I[21]=f):f=I[21];let q=`JSONExtractString(${R.eventAttributesExpression}['object'], 'type')`;I[22]!==q?(j={valueExpression:q,alias:"type"},I[22]=q,I[23]=j):j=I[23];let J=`JSONExtractString(${R.eventAttributesExpression}['object'], 'type')`;I[24]!==J?(_={valueExpression:J,alias:"severity_text"},I[24]=J,I[25]=_):_=I[25];let G=`JSONExtractString(${R.eventAttributesExpression}['object'], 'note')`;I[26]!==G?(S={valueExpression:G,alias:"body"},I[26]=G,I[27]=S):S=I[27],I[28]!==p||I[29]!==h||I[30]!==x||I[31]!==g||I[32]!==f||I[33]!==j||I[34]!==_||I[35]!==S||I[36]!==o||I[37]!==u?(k=[i,o,u,p,h,x,g,f,j,_,S],I[28]=p,I[29]=h,I[30]=x,I[31]=g,I[32]=f,I[33]=j,I[34]=_,I[35]=S,I[36]=o,I[37]=u,I[38]=k):k=I[38],I[39]!==R||I[40]!==k||I[41]!==n||I[42]!==V?(N={dateRange:n,limit:50,logSource:R,order:"desc",where:V,whereLanguage:"lucene",extraSelects:k},I[39]=R,I[40]=k,I[41]=n,I[42]=V,I[43]=N):N=I[43];let{data:U,isLoading:K}=y(N);I[44]!==U?.data?(C=U?.data||[],I[44]=U?.data,I[45]=C):C=I[45],I[46]!==C?(A=C.sort(w),I[46]=C,I[47]=A):A=I[47];let Y=A;I[48]!==Y||I[49]!==z?(T=z?Y.filter(e=>new Date(e.timestamp)<new Date(z.timestamp)):[],I[48]=Y,I[49]=z,I[50]=T):T=I[50];let Q=T;I[51]!==Y||I[52]!==z?($=z?Y.filter(e=>new Date(e.timestamp)>new Date(z.timestamp)):[],I[51]=Y,I[52]=z,I[53]=$):$=I[53];let ee=$;if(K){let e;return I[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(d.E,{color:"muted",ta:"center",children:"Loading..."}),I[54]=e):e=I[54],e}if(0===Y.length){let e;return I[55]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(d.E,{color:"muted",ta:"center",children:"No events"}),I[55]=e):e=I[55],e}if(z){let e,t,s,r,n,i,l;return I[56]!==R||I[57]!==ee?(e=ee.map(v(R)),I[56]=R,I[57]=ee,I[58]=e):e=I[58],I[59]!==z.timestamp?(t=(0,a.jsx)(b.H,{value:z.timestamp}),I[59]=z.timestamp,I[60]=t):t=I[60],I[61]!==z.timestamp||I[62]!==t?(s=(0,a.jsx)(d.E,{size:"xs",fz:11,title:z.timestamp,children:t}),I[61]=z.timestamp,I[62]=t,I[63]=s):s=I[63],I[64]!==z.label?(r=(0,a.jsx)(m.Y,{gap:"xs",my:4,children:(0,a.jsx)(d.E,{size:"sm",fz:12,c:"white",fw:"bold",children:z.label})}),I[64]=z.label,I[65]=r):r=I[65],I[66]!==z.timestamp||I[67]!==s||I[68]!==r?(n=(0,a.jsxs)(c.K.Item,{ref:E,children:[s,r]},z.timestamp),I[66]=z.timestamp,I[67]=s,I[68]=r,I[69]=n):n=I[69],I[70]!==R||I[71]!==Q?(i=Q.map(v(R)),I[70]=R,I[71]=Q,I[72]=i):i=I[72],I[73]!==e||I[74]!==n||I[75]!==i?(l=(0,a.jsxs)(c.K,{bulletSize:12,lineWidth:1,children:[e,n,i]}),I[73]=e,I[74]=n,I[75]=i,I[76]=l):l=I[76],l}{let e,t;return I[77]!==Y||I[78]!==R?(e=Y.map(v(R)),I[77]=Y,I[78]=R,I[79]=e):e=I[79],I[80]!==e?(t=(0,a.jsx)(c.K,{bulletSize:12,lineWidth:1,children:e}),I[80]=e,I[81]=t):t=I[81],t}},_=e=>{let t=(0,r.c)(6),{status:s}=e;switch(s){case f.h.Pending:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(u.E,{variant:"light",color:"yellow",fw:"normal",tt:"none",size:"md",children:"Pending"}),t[0]=e):e=t[0],e}case f.h.Running:{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(u.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Running"}),t[1]=e):e=t[1],e}case f.h.Succeeded:{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(u.E,{variant:"light",color:"indigo",fw:"normal",tt:"none",size:"md",children:"Succeeded"}),t[2]=e):e=t[2],e}case f.h.Failed:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(u.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Failed"}),t[3]=e):e=t[3],e}case f.h.Unknown:{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(u.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[4]=e):e=t[4],e}default:{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(u.E,{variant:"light",color:"gray",fw:"normal",tt:"none",size:"md",children:"Unknown"}),t[5]=e):e=t[5],e}}};function S(e){return e.json()}function w(e,t){return new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()}function E(e){null!==e&&e.scrollIntoView({block:"nearest"})}},31451:(e,t,s)=>{"use strict";s.d(t,{Q$:()=>f,nt:()=>v,vN:()=>g,xj:()=>x});var a=s(75155),r=s(36722),n=s.n(r),i=s(76089),l=s(12482),o=s(43152),c=s(46061),d=s(91021),m=s(81973);async function u(){let e=await window.loadPyodide();await e.loadPackage("micropip");let t=e.pyimport("micropip"),s=new URL("/jsonpickle-4.1.1-py3-none-any.whl",window.location.origin);await t.install(s.href);let a=new URL("/drain3-0.9.11-py3-none-any.whl",window.location.origin);return await t.install(a.href),e}class p{constructor(e){this.pyodide=e,this.id=Math.random().toString(36).substring(2,15),this.minerVariableName=`m_${this.id}`}async init(){await this.pyodide.runPythonAsync(`
import js
import json
from drain3 import TemplateMiner
from drain3.template_miner_config import TemplateMinerConfig

${this.minerVariableName} = TemplateMiner(None, TemplateMinerConfig())
    `)}async minePatterns(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        ${s}.append(${this.minerVariableName}.add_log_message(log))
      json.dumps(${s})
    `))}async matchLogs(e){let t=`temp_logs_${this.id}`,s=`temp_results_${this.id}`;return this.pyodide.globals.set(t,e),JSON.parse(await this.pyodide.runPythonAsync(`
      ${s} = []
      for log in ${t}:
        match = ${this.minerVariableName}.match(log)
        ${s}.append(match.cluster_id if match else None)
      json.dumps(${s})
    `))}}async function h(e,t){let s=new p(t);return await s.init(),{miner:s,patterns:await s.minePatterns(e)}}let x="__hdx_pattern_field",g="__hdx_timestamp",f="__hdx_severity_text",b="__hdx_status_code";function y(e){return n()(e[x])}function v(e){let t,s,r,n,p,v=(0,a.c)(22),{config:S,samples:w,bodyValueExpression:E,severityTextExpression:k,statusCodeExpression:N,totalCount:C,enabled:A}=e,T=void 0===A||A;v[0]!==E||v[1]!==S||v[2]!==T||v[3]!==w||v[4]!==k||v[5]!==N?(t={config:S,samples:w,bodyValueExpression:E,severityTextExpression:k,statusCodeExpression:N,enabled:T},v[0]=E,v[1]=S,v[2]=T,v[3]=w,v[4]=k,v[5]=N,v[6]=t):t=v[6];let{data:$,isLoading:I,patternQueryConfig:L}=function(e){var t;let s,r,n,i,o,p,v,j,_,S,w,E,k,N,C,A,T=(0,a.c)(36),{config:$,samples:I,bodyValueExpression:L,severityTextExpression:R,statusCodeExpression:z,enabled:M}=e,D=void 0===M||M,P=`${L} as ${x}`;T[0]!==$.timestampValueExpression?(s=(0,m.AF)($.timestampValueExpression),T[0]=$.timestampValueExpression,T[1]=s):s=T[1];let V=`${s} as ${g}`;T[2]!==R?(r=R?[`${R} as ${f}`]:[],T[2]=R,T[3]=r):r=T[3],T[4]!==z?(n=z?[`${z} as ${b}`]:[],T[4]=z,T[5]=n):n=T[5],T[6]!==P||T[7]!==V||T[8]!==r||T[9]!==n?(i=[P,V,...r,...n],T[6]=P,T[7]=V,T[8]=r,T[9]=n,T[10]=i):i=T[10];let F=i.join(",");T[11]===Symbol.for("react.memo_cache_sentinel")?(o=[{ordering:"DESC",valueExpression:"rand()"}],T[11]=o):o=T[11],T[12]!==I?(p={limit:I},T[12]=I,T[13]=p):p=T[13],T[14]!==$||T[15]!==p||T[16]!==F?(v={...$,select:F,orderBy:o,limit:p},T[14]=$,T[15]=p,T[16]=F,T[17]=v):v=T[17];let O=(0,c.YB)(v),H=null!=O&&D;T[18]!==H?(j={enabled:H},T[18]=H,T[19]=j):j=T[19];let{data:W,isLoading:B}=(0,d.HD)(O??$,j);T[20]!==D?(_={enabled:D},T[20]=D,T[21]=_):_=T[21];let{data:X,isLoading:Z}=(t=_,(A=(0,a.c)(3))[0]===Symbol.for("react.memo_cache_sentinel")?(N=["pyodide"],A[0]=N):N=A[0],A[1]!==t.enabled?(C={queryKey:N,queryFn:u,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchInterval:!1,enabled:t.enabled},A[1]=t.enabled,A[2]=C):C=A[2],(0,l.I)(C));T[22]!==$?(S=["patterns",$],T[22]=$,T[23]=S):S=T[23],T[24]!==O||T[25]!==X||T[26]!==W?(w=()=>{if(null==O)throw Error("Unexpected configWithPrimaryAndPartitionKey is null");return h(W?.data.map(y)??[],X).then(e=>{let t=[],s=e.patterns;for(let e=0;e<s.length;e++){let a=s[e],r=W?.data[e];t.push({...r,__hdx_patternId:a.cluster_id,__hdx_pattern:a.template_mined})}return{...W,data:t,additionalKeysLength:O.additionalKeysLength,miner:e.miner}})},T[24]=O,T[25]=X,T[26]=W,T[27]=w):w=T[27];let q=null!=W&&null!=X&&D;T[28]!==S||T[29]!==w||T[30]!==q?(E={queryKey:S,queryFn:w,refetchOnWindowFocus:!1,enabled:q},T[28]=S,T[29]=w,T[30]=q,T[31]=E):E=T[31];let J=(0,l.I)(E),G=J.isLoading||B||Z;return T[32]!==O||T[33]!==J||T[34]!==G?(k={...J,isLoading:G,patternQueryConfig:O},T[32]=O,T[33]=J,T[34]=G,T[35]=k):k=T[35],k}(t),R=$?.data.length,z=C&&R?C/R:1;v[7]!==S.dateRange?(s=(0,i.tA)(S.dateRange,24),r=(0,o.Ht)(S.dateRange[0],S.dateRange[1],s),v[7]=S.dateRange,v[8]=s,v[9]=r):(s=v[8],r=v[9]);let M=r;if(v[10]!==S.dateRange||v[11]!==s||v[12]!==$?.data||v[13]!==z||v[14]!==M){let e=$?.data.reduce(_,{});n={},Object.entries(e??{}).forEach(e=>{let[t,a]=e,r=M.reduce(j,{}),i=a.reduce((e,t)=>{let a=t[g],r=(0,o.W6)(new Date(a),s).getTime();return e[r]=(e[r]||0)+1,e},r),l=Math.max(Math.round(a.length*z),1),c=a.at(-1);n[t]={id:t,pattern:c?.__hdx_pattern,count:l,countStr:`~${l}`,severityText:c?.[f],statusCode:c?.[b],samples:a,__hdx_pattern_trend:{data:Object.entries(i).map(e=>{let[t,s]=e;return{bucket:Number.parseInt(t)/1e3,count:Math.round(s*z)}}),granularity:s,dateRange:S.dateRange}}}),v[10]=S.dateRange,v[11]=s,v[12]=$?.data,v[13]=z,v[14]=M,v[15]=n}else n=v[15];let D=n,P=$?.miner;return v[16]!==D||v[17]!==I||v[18]!==L||v[19]!==R||v[20]!==P?(p={data:D,isLoading:I,miner:P,sampledRowCount:R,patternQueryConfig:L},v[16]=D,v[17]=I,v[18]=L,v[19]=R,v[20]=P,v[21]=p):p=v[21],p}function j(e,t){return e[t.getTime()]=0,e}function _(e,t){let s=`${t.__hdx_patternId}`;return e[s]=e[s]||[],e[s].push(t),e}},32479:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var a=s(75155),r=s(55729),n=s(76089),i=s(2489),l=s(43152);let o=e=>{let t,s,o,c,d,m=(0,a.c)(15),{searchedTimeRange:u,onTimeRangeSelect:p,isLive:h}=e,[x,g]=r.useState(!1),f="visible"===(0,i.f)()&&h;m[0]!==p||m[1]!==u?(t=()=>{let e=1e3*Math.round((u[1].getTime()-u[0].getTime())/1e3),t=new Date;p(new Date(t.getTime()-e),t),g(!0),setTimeout(()=>{g(!1)},1e3)},m[0]=p,m[1]=u,m[2]=t):t=m[2];let b=t;m[3]!==u?(s=(0,n.tA)(u),m[3]=u,m[4]=s):s=m[4];let y=s,v=r.useRef(null);return m[5]!==y||m[6]!==f||m[7]!==b?(o=()=>(f?(v.current&&window.clearInterval(v.current),v.current=window.setInterval(()=>{b()},1e3*(0,l.qL)(y))):v.current&&window.clearInterval(v.current),()=>{v.current&&window.clearInterval(v.current)}),c=[f,y,b],m[5]=y,m[6]=f,m[7]=b,m[8]=o,m[9]=c):(o=m[8],c=m[9]),r.useEffect(o,c),m[10]!==y||m[11]!==f||m[12]!==x||m[13]!==b?(d={granularityOverride:y,isRefreshEnabled:f,manualRefreshCooloff:x,refresh:b},m[10]=y,m[11]=f,m[12]=x,m[13]=b,m[14]=d):d=m[14],d}},35729:(e,t,s)=>{"use strict";s.d(t,{B:()=>d,y:()=>m});var a=s(6029),r=s(55729),n=s(66692),i=s(60481),l=s(3635),o=s(43517),c=s(20158);let d=r.memo(({header:e,onClose:t,closeEsc:s=!0})=>((0,n.vC)(["esc"],()=>t?.(),{enabled:s}),(0,a.jsx)(i.a,{px:"md",py:"xs",className:"border-bottom border-dark",children:(0,a.jsxs)(l.Y,{justify:"space-between",align:"center",children:[(0,a.jsx)(o.E,{size:"md",children:e}),(0,a.jsx)(c.J,{onClick:t,"aria-label":"Close modal",variant:"subtle",size:"md"})]})}))),m=r.memo(({children:e})=>(0,a.jsx)(i.a,{className:"w-100 overflow-auto",px:"sm",py:"md",children:e}))},36011:e=>{e.exports={root:"SearchWhereInput_root__IzMOd",inputWrapper:"SearchWhereInput_inputWrapper__7mdT7",sizeXs:"SearchWhereInput_sizeXs__MfgMj",sizeSm:"SearchWhereInput_sizeSm__B7Xwd",languageSwitch:"SearchWhereInput_languageSwitch__dZQ28",shortcutHint:"SearchWhereInput_shortcutHint__NwHbY"}},37901:(e,t,s)=>{"use strict";s.d(t,{$_:()=>p,bn:()=>x,dD:()=>g,k1:()=>h});var a,r=s(6029),n=s(75155),i=s(46375),l=s(82641),o=s(60481),c=s(91021),d=s(81973),m=s(18006),u=s(65081),p=((a={}).TIMESTAMP="__hdx_timestamp",a.BODY="__hdx_body",a.TRACE_ID="__hdx_trace_id",a.SPAN_ID="__hdx_span_id",a.SEVERITY_TEXT="__hdx_severity_text",a.SERVICE_NAME="__hdx_service_name",a.RESOURCE_ATTRIBUTES="__hdx_resource_attributes",a.EVENT_ATTRIBUTES="__hdx_event_attributes",a.EVENTS_EXCEPTION_ATTRIBUTES="__hdx_events_exception_attributes",a.SPAN_EVENTS="__hdx_span_events",a);function h(e){let t,s,a,r,o,u,p,h,x,g,f,b=(0,n.c)(62),{source:y,rowId:v,aliasWith:j}=e;b[0]!==y?(t=(0,d.N8)(y),b[0]=y,b[1]=t):t=b[1];let _=t,S=y.traceIdExpression,w=y.spanIdExpression,E=y.severityTextExpression||y.statusCodeExpression;if(b[2]!==_||b[3]!==w||b[4]!==S||b[5]!==E||b[6]!==y){let e,t,n,i,o,u,p,h,x,g,f,v=y.kind===l.GL.Trace||y.kind===l.GL.Log?(0,m.z4)(y.highlightedRowAttributeExpressions):[];r=c.HD,s=y.connection,b[10]===Symbol.for("react.memo_cache_sentinel")?(e={valueExpression:"*"},b[10]=e):e=b[10],b[11]!==y?(t=(0,d.xg)(y),b[11]=y,b[12]=t):t=b[12],b[13]!==t?(n={valueExpression:t,alias:"__hdx_timestamp"},b[13]=t,b[14]=n):n=b[14],b[15]!==_?(i=_?[{valueExpression:_,alias:"__hdx_body"}]:[],b[15]=_,b[16]=i):i=b[16],b[17]!==S?(o=S?[{valueExpression:S,alias:"__hdx_trace_id"}]:[],b[17]=S,b[18]=o):o=b[18],b[19]!==w?(u=w?[{valueExpression:w,alias:"__hdx_span_id"}]:[],b[19]=w,b[20]=u):u=b[20],b[21]!==E?(p=E?[{valueExpression:E,alias:"__hdx_severity_text"}]:[],b[21]=E,b[22]=p):p=b[22],b[23]!==y.serviceNameExpression?(h=y.serviceNameExpression?[{valueExpression:y.serviceNameExpression,alias:"__hdx_service_name"}]:[],b[23]=y.serviceNameExpression,b[24]=h):h=b[24],b[25]!==y.resourceAttributesExpression?(x=y.resourceAttributesExpression?[{valueExpression:y.resourceAttributesExpression,alias:"__hdx_resource_attributes"}]:[],b[25]=y.resourceAttributesExpression,b[26]=x):x=b[26],b[27]!==y.eventAttributesExpression?(g=y.eventAttributesExpression?[{valueExpression:y.eventAttributesExpression,alias:"__hdx_event_attributes"}]:[],b[27]=y.eventAttributesExpression,b[28]=g):g=b[28],b[29]!==y.kind||b[30]!==y.spanEventsValueExpression?(f=y.kind===l.GL.Trace&&y.spanEventsValueExpression?[{valueExpression:`${y.spanEventsValueExpression}.Attributes[indexOf(${y.spanEventsValueExpression}.Name, 'exception')]`,alias:"__hdx_events_exception_attributes"},{valueExpression:y.spanEventsValueExpression,alias:"__hdx_span_events"}]:[],b[29]=y.kind,b[30]=y.spanEventsValueExpression,b[31]=f):f=b[31],a=[e,n,...i,...o,...u,...p,...h,...x,...g,...f,...v],b[2]=_,b[3]=w,b[4]=S,b[5]=E,b[6]=y,b[7]=s,b[8]=a,b[9]=r}else s=b[7],a=b[8],r=b[9];let k=v??"0=1";b[32]===Symbol.for("react.memo_cache_sentinel")?(o={limit:1},b[32]=o):o=b[32],b[33]!==j?(u=j&&j.length>0?{with:j}:{},b[33]=j,b[34]=u):u=b[34],b[35]!==y.from||b[36]!==s||b[37]!==a||b[38]!==k||b[39]!==u?(p={connection:s,select:a,where:k,from:y.from,limit:o,...u},b[35]=y.from,b[36]=s,b[37]=a,b[38]=k,b[39]=u,b[40]=p):p=b[40],b[41]!==j||b[42]!==v||b[43]!==y?(h=["row_side_panel",v,j,y],b[41]=j,b[42]=v,b[43]=y,b[44]=h):h=b[44];let N=null!=v;b[45]!==N||b[46]!==h?(x={queryKey:h,enabled:N},b[45]=N,b[46]=h,b[47]=x):x=b[47];let C=r(p,x);e:{let e,t,s;if(!C.data?.data?.[0]){g=C.data;break e}let a=C.data.data[0];if(b[48]!==a){if(e={...a},a.__hdx_resource_attributes){let t,s=a.__hdx_resource_attributes;b[50]!==s?(t=(0,i.flatten)(s),b[50]=s,b[51]=t):t=b[51],e.__hdx_resource_attributes=t}if(a.__hdx_event_attributes){let t,s=a.__hdx_event_attributes;b[52]!==s?(t=(0,i.flatten)(s),b[52]=s,b[53]=t):t=b[53],e.__hdx_event_attributes=t}b[48]=a,b[49]=e}else e=b[49];b[54]!==e?(t=[e],b[54]=e,b[55]=t):t=b[55],b[56]!==C.data||b[57]!==t?(s={...C.data,data:t},b[56]=C.data,b[57]=t,b[58]=s):s=b[58],g=s}let A=g;return b[59]!==A||b[60]!==C?(f={...C,data:A},b[59]=A,b[60]=C,b[61]=f):f=b[61],f}function x(e){return e?.filter(e=>"JSON"===e.type||e.type.startsWith("JSON(")).map(e=>e.name)??[]}function g(e){let t,s,a,i,l,c=(0,n.c)(16),{source:d,rowId:m,aliasWith:p,"data-testid":g}=e;c[0]!==p||c[1]!==m||c[2]!==d?(t={source:d,rowId:m,aliasWith:p},c[0]=p,c[1]=m,c[2]=d,c[3]=t):t=c[3];let{data:f}=h(t);e:{let e,t;c[4]!==f?.data?.[0]?(e=f?.data?.[0]??{},c[4]=f?.data?.[0],c[5]=e):e=c[5],c[6]!==e?(t={...e},c[6]=e,c[7]=t):t=c[7];let a=t;if(!a){s=null;break e}s=a}let b=s,y=f?.meta;c[8]!==y?(a=x(y),c[8]=y,c[9]=a):a=c[9];let v=a;return c[10]!==b||c[11]!==v?(i=(0,r.jsx)(o.a,{mx:"md",my:"sm",children:(0,r.jsx)(u.z,{data:b,jsonColumns:v})}),c[10]=b,c[11]=v,c[12]=i):i=c[12],c[13]!==g||c[14]!==i?(l=(0,r.jsx)("div",{className:"flex-grow-1 overflow-auto","data-testid":g,children:i}),c[13]=g,c[14]=i,c[15]=l):l=c[15],l}},40147:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(75155),r=s(80519),n=s.n(r),i=s(3145),l=s(78550);function o(e){let t,s=(0,a.c)(6);s[0]!==e?(t=(0,i.VO)(e),s[0]=e,s[1]=t):t=s[1];let{data:r,isLoading:o}=(0,l.n$)(t);if(e&&!o){let e;return s[2]!==r?(e={isLoading:!1,getFieldExpression:(e,t,s)=>r?.includes(e)?n().format(`${void 0===s?"toString":s}(??.??)`,[e,t]):n().format("??[?]",[e,t])},s[2]=r,s[3]=e):e=s[3],e}{let e;return s[4]!==o?(e={isLoading:o,getFieldExpression:void 0},s[4]=o,s[5]=e):e=s[5],e}}},45862:e=>{e.exports={root:"AutocompleteInput_root__4aZ0r",textarea:"AutocompleteInput_textarea__90yii",focused:"AutocompleteInput_focused__puBi_",collapseFade:"AutocompleteInput_collapseFade__GOMDH",aboveSuggestions:"AutocompleteInput_aboveSuggestions__aaRAR",suggestionsSection:"AutocompleteInput_suggestionsSection__tpfoD",suggestionsHeaderRow:"AutocompleteInput_suggestionsHeaderRow___m20z",suggestionsHeader:"AutocompleteInput_suggestionsHeader__8ivOI",suggestionsLimit:"AutocompleteInput_suggestionsLimit__jvv5c",suggestionItem:"AutocompleteInput_suggestionItem__cgp5x",selected:"AutocompleteInput_selected__1YH4P",suggestionLabel:"AutocompleteInput_suggestionLabel__ygOCA",belowSuggestions:"AutocompleteInput_belowSuggestions__X0P0_",historySection:"AutocompleteInput_historySection__ZcsPH",historyTitle:"AutocompleteInput_historyTitle__s_n4W",historyItem:"AutocompleteInput_historyItem__txvhH",historyItemLabel:"AutocompleteInput_historyItemLabel__PZTlb",dropdown:"AutocompleteInput_dropdown__CzHbR"}},46061:(e,t,s)=>{"use strict";s.d(t,{rD:()=>eO,Ho:()=>eV,YB:()=>eF});var a=s(6029),r=s(75155),n=s(55729),i=s(75828),l=s.n(i),o=s(92799),c=s(84450),d=s.n(c),m=s(90310),u=s.n(m),p=s(67264),h=s.n(p),x=s(66692),g=s(2893),f=s(47122),b=s(14693),y=s(31292),v=s(40684),j=s(92205),_=s(35467),S=s(76089),w=s(27166),E=s(78253),k=s(60481),N=s(3635),C=s(8737),A=s(63085),T=s(43517),$=s(24589),I=s(94502),L=s(73454),R=s(6620),z=s(38314),M=s(24602),D=s(40387),P=s(95316),V=s(12482),F=s(39696),O=s(79220),H=s(21440),W=s(6876),B=s(61410),X=s(91021),Z=s(55024),q=s(78550),J=s(78744),G=s(31451),U=s(70727),K=s(39785),Y=s(81973),Q=s(68593),ee=s(7565),et=s(57820),es=s(92917),ea=s(37659),er=s(78341),en=s(45172),ei=s(9385),el=s(96413),eo=s(50374),ec=s(90515),ed=s(74620),em=s.n(ed);let eu=e=>{let t,s,n,i,o,c=(0,r.c)(19),{onClick:d,className:m,title:u,tabIndex:p,children:h,variant:x,isActive:g,iconSize:f}=e,b=void 0===p?-1:p,y=void 0===x?"default":x,v=void 0!==g&&g,j=void 0===f?14:f;c[0]!==d?(t=e=>{e.stopPropagation(),e.preventDefault(),d(e)},c[0]=d,c[1]=t):t=c[1];let _=t;c[2]!==m||c[3]!==v||c[4]!==y?(s="copy"===y?l()(em().iconActionButton,{[em().copied]:v}):m,c[2]=m,c[3]=v,c[4]=y,c[5]=s):s=c[5];let S=s,w=!u;return c[6]!==h||c[7]!==j||c[8]!==v?(n=v?(0,a.jsx)(ec.A,{size:j}):h,c[6]=h,c[7]=j,c[8]=v,c[9]=n):n=c[9],c[10]!==S||c[11]!==_||c[12]!==n||c[13]!==b?(i=(0,a.jsx)(C.N,{onClick:_,component:"div",className:S,tabIndex:b,role:"button",children:n}),c[10]=S,c[11]=_,c[12]=n,c[13]=b,c[14]=i):i=c[14],c[15]!==w||c[16]!==i||c[17]!==u?(o=(0,a.jsx)(A.m,{label:u,position:"top",withArrow:!0,disabled:w,openDelay:300,closeDelay:100,fz:"xs",children:i}),c[15]=w,c[16]=i,c[17]=u,c[18]=o):o=c[18],o},ep=({children:e,cellValue:t,tableContainerRef:s,wrapLinesEnabled:r,columnName:i,isChart:o=!1})=>{let[c,{close:d,open:m}]=(0,er.j)(!1),[u,p]=(0,n.useState)(!1),[h,x]=(0,n.useState)(!1),g=(0,n.useRef)(void 0),f=(0,n.useRef)(void 0);(0,n.useEffect)(()=>()=>{g.current&&clearTimeout(g.current),f.current&&clearTimeout(f.current)},[]);let{onPropertyAddClick:b}=(0,n.useContext)(eo.D),y=i&&b&&null!=t,v=()=>{h||(g.current&&clearTimeout(g.current),m())},j=()=>{g.current=setTimeout(()=>{d()},100)},_=()=>{d(),x(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{x(!1)},1e3)},S=async()=>{try{let e="string"==typeof t?t:String(t??"");await navigator.clipboard.writeText(e),p(!0),setTimeout(()=>p(!1),2e3)}catch(e){console.error("Failed to copy to clipboard:",e)}},w=y?3:1;return o?(0,a.jsx)("div",{className:l()(em().fieldText,{[em().chart]:o}),style:{display:"flex",alignItems:"center"},children:e}):(0,a.jsx)("div",{className:l()(em().fieldText,{[em().truncated]:!r&&!o,[em().wrapped]:r,[em().chart]:o}),children:(0,a.jsxs)(ea.A,{width:20*w+4*(w-1),position:"top-start",offset:5,opened:c,portalProps:{target:s??void 0},closeOnClickOutside:!1,clickOutsideEvents:[],children:[(0,a.jsx)(ea.A.Target,{children:(0,a.jsx)("span",{onMouseEnter:v,onMouseLeave:j,onClick:_,tabIndex:-1,"aria-hidden":"true",style:{cursor:"pointer"},children:e})}),(0,a.jsx)(ea.A.Dropdown,{style:{pointerEvents:"auto"},onMouseEnter:v,onMouseLeave:j,className:em().fieldTextPopover,children:(0,a.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[(0,a.jsx)(eu,{onClick:S,variant:"copy",isActive:u,title:u?"Copied!":"Copy field value",children:(0,a.jsx)(en.A,{size:14})}),y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eu,{onClick:()=>{y&&(b(i,"string"==typeof t?t:String(t??""),"include"),_())},variant:"copy",title:"Toggle filter for this value",children:(0,a.jsx)(ei.A,{size:14})}),(0,a.jsx)(eu,{onClick:()=>{y&&(b(i,"string"==typeof t?t:String(t??""),"exclude"),_())},variant:"copy",title:"Exclude this value",children:(0,a.jsx)(el.A,{size:14})})]})]})})]})})};var eh=s(56795);let ex=({row:e,getRowWhere:t,sourceId:s,isWrapped:r,onToggleWrap:i})=>{let[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),m=async()=>{try{let{[U.ZO.ID]:t,...s}=e,a=Object.entries(s).reduce((e,[t,s])=>{if("string"==typeof s&&s.startsWith("{")||s.startsWith("["))try{e[t]=JSON.parse(s)}catch{e[t]=s}else e[t]=s;return e},{}),r=JSON.stringify(a,null,2);await navigator.clipboard.writeText(r),o(!0),setTimeout(()=>o(!1),2e3)}catch(e){console.error("Failed to copy row data to clipboard:",e)}},u=async()=>{try{let a=t(e),r=new URL(window.location.href);r.searchParams.set("rowWhere",a.where),s&&r.searchParams.set("rowSource",s),await navigator.clipboard.writeText(r.toString()),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error("Failed to copy URL to clipboard:",e)}};return(0,a.jsxs)("div",{className:em().rowButtons,children:[!r&&(0,a.jsx)(eu,{onClick:i,variant:"copy",title:"Wrap All Lines",children:(0,a.jsx)(M.A,{size:16})}),(0,a.jsx)(eu,{onClick:m,variant:"copy",isActive:l,title:l?"Copied entire row as JSON!":"Copy entire row as JSON",children:(0,a.jsx)(en.A,{size:16})}),(0,a.jsx)(eu,{onClick:u,variant:"copy",isActive:c,title:c?"Copied shareable link!":"Copy shareable link to this specific row",children:(0,a.jsx)(eh.A,{size:16})})]})};var eg=s(48423),ef=s(22623),eb=s(59029),ey=s(74011),ev=s(97767),ej=s(67872);let e_=({searchQuery:e,onSearchChange:t,matchIndices:s,currentMatchIndex:r,onPreviousMatch:i,onNextMatch:l,isVisible:o,onVisibilityChange:c,containerRef:d})=>{let[m,u]=(0,n.useState)(!1),p=(0,n.useRef)(null),h=o??m,x=(0,n.useCallback)(()=>{void 0!==o?c?.(!1):u(!1),t("")},[o,t,c]),g=(0,n.useCallback)(()=>{void 0!==o?c?.(!0):u(!0),setTimeout(()=>{p.current?.focus(),p.current?.select()},0)},[o,c]),f=(0,n.useCallback)(e=>{if((e.metaKey||e.ctrlKey)&&"f"===e.key){if(d&&!(0,es.dS)(d))return;e.preventDefault(),g()}"Escape"===e.key&&h&&x()},[h,x,g]);(0,n.useEffect)(()=>(window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}),[f]);let b=(0,n.useCallback)(e=>{"Enter"===e.key&&s.length>0&&(e.shiftKey?i():l(),e.preventDefault())},[s.length,i,l]);return h?(0,a.jsx)(ef.t,{p:"xs",withBorder:!0,shadow:"md",pos:"absolute",top:8,right:8,style:{zIndex:2},miw:400,maw:500,role:"search","aria-label":"Table search",children:(0,a.jsxs)(N.Y,{gap:"xs",align:"center",wrap:"nowrap",children:[(0,a.jsx)(eb.k,{ref:p,placeholder:"Find in table...",value:e,onChange:e=>t(e.target.value),onKeyDown:b,size:"xs",style:{flex:1,minWidth:0},"aria-label":"Search table contents","aria-describedby":s.length>0?"search-match-count":void 0,rightSection:e?(0,a.jsx)(C.N,{onClick:()=>t(""),display:"flex",style:{alignItems:"center"},title:"Clear search","aria-label":"Clear search",children:(0,a.jsx)(ey.A,{size:14})}):null}),s.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(T.E,{id:"search-match-count",size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},"aria-live":"polite",children:[r+1," of ",s.length]}),(0,a.jsxs)(N.Y,{gap:4,children:[(0,a.jsx)(C.N,{onClick:i,display:"flex",style:{alignItems:"center"},title:"Previous match (Shift+Enter)","aria-label":"Previous match",children:(0,a.jsx)(ev.A,{size:16})}),(0,a.jsx)(C.N,{onClick:l,display:"flex",style:{alignItems:"center"},title:"Next match (Enter)","aria-label":"Next match",children:(0,a.jsx)(ej.A,{size:16})})]})]}):e?(0,a.jsx)(T.E,{size:"xs",c:"dimmed",style:{whiteSpace:"nowrap"},role:"status","aria-live":"polite",children:"No matches"}):null,(0,a.jsx)(C.N,{onClick:x,display:"flex",style:{alignItems:"center"},title:"Close search (Esc)","aria-label":"Close search",children:(0,a.jsx)(ey.A,{size:16})})]})}):null},eS=e=>{let t,s,n,i=(0,r.c)(17),{searchQuery:l,matchIndices:o,currentMatchIndex:c,dedupedRows:d,tableRows:m,getRowId:u,onMatchClick:p}=e;if(!l||0===o.length||0===m.length)return null;if(i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",zIndex:1},i[0]=t):t=i[0],i[1]!==c||i[2]!==d||i[3]!==u||i[4]!==o||i[5]!==p||i[6]!==m){let e;i[8]!==c||i[9]!==d||i[10]!==u||i[11]!==o.length||i[12]!==p||i[13]!==m?(e=(e,t)=>{let s=d[e];if(!s)return null;let r=m.findIndex(e=>u(e.original)===u(s));if(-1===r)return null;let n=r/m.length*100,i=100/m.length,l=t===c;return(0,a.jsx)(k.a,{pos:"absolute",top:`${n}%`,right:0,w:"100%",h:`${i}%`,bg:l?"var(--mantine-color-orange-5)":"var(--mantine-color-yellow-5)",style:{cursor:"pointer",pointerEvents:"auto",minHeight:1,maxHeight:4},onClick:()=>p(t),title:`Match ${t+1} of ${o.length}`},`match-indicator-${e}`)},i[8]=c,i[9]=d,i[10]=u,i[11]=o.length,i[12]=p,i[13]=m,i[14]=e):e=i[14],s=o.map(e),i[1]=c,i[2]=d,i[3]=u,i[4]=o,i[5]=p,i[6]=m,i[7]=s}else s=i[7];return i[15]!==s?(n=(0,a.jsx)(k.a,{pos:"absolute",right:0,top:0,bottom:0,w:8,style:t,children:s}),i[15]=s,i[16]=n):n=i[16],n};var ew=s(88339),eE=s(17421),ek=s(41038),eN=s(81055),eC=s(70114);let eA=(0,n.memo)(e=>{let t,s,n,i,o,c=(0,r.c)(17),{columnsLength:d,children:m,virtualKey:u,source:p,rowId:h,measureElement:x,virtualIndex:g}=e,f=(()=>{let e,t=(0,r.c)(3),[,s]=(0,ek.ZA)("rowWhere"),[,a]=(0,ek.ZA)("rowSource");return t[0]!==s||t[1]!==a?(e=(e,t)=>{s(e),a(t??null)},t[0]=s,t[1]=a,t[2]=e):e=t[2],e})(),b=`expanded-row-${h}`,y=`${u}-expanded`;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=l()("mx-2 mb-2 rounded",em().expandedRowContent),c[0]=t):t=c[0],c[1]!==f||c[2]!==h||c[3]!==p?.id?(s=f&&(0,a.jsx)("button",{type:"button",className:l()("position-absolute top-0 end-0 mt-1 me-1 p-1 border-0 bg-transparent text-muted rounded",em().expandButton),onClick:()=>f(h,p?.id),title:"Open in sidebar","aria-label":"Open in sidebar",style:{zIndex:1,fontSize:"12px",lineHeight:1},children:(0,a.jsx)(eN.A,{size:14})}),c[1]=f,c[2]=h,c[3]=p?.id,c[4]=s):s=c[4],c[5]!==m||c[6]!==s?(n=(0,a.jsx)("div",{className:t,children:(0,a.jsx)("div",{className:"position-relative",children:(0,a.jsxs)("div",{className:"px-3 pt-2 position-relative",children:[s,m]})})}),c[5]=m,c[6]=s,c[7]=n):n=c[7],c[8]!==d||c[9]!==n?(i=(0,a.jsx)("td",{colSpan:d,className:"p-0 border-0",children:n}),c[8]=d,c[9]=n,c[10]=i):i=c[10],c[11]!==x||c[12]!==b||c[13]!==y||c[14]!==i||c[15]!==g?(o=(0,a.jsx)("tr",{"data-testid":b,className:em().expandedRow,"data-index":g,ref:x,children:i},y),c[11]=x,c[12]=b,c[13]=y,c[14]=i,c[15]=g,c[16]=o):o=c[16],o}),eT=(0,n.memo)(e=>{let t,s,n,i,o,c,d=(0,r.c)(16),{rowId:m,isExpanded:u,highlightedLineId:p,toggleRowExpansion:h}=e,x=p===m,g=p!==m;d[0]!==u||d[1]!==x||d[2]!==g?(t=l()(em().expandButton,{[em().expanded]:u,"text-brand":x,"text-muted":g}),d[0]=u,d[1]=x,d[2]=g,d[3]=t):t=d[3],d[4]!==m||d[5]!==h?(s=e=>{e.stopPropagation(),h(m)},d[4]=m,d[5]=h,d[6]=s):s=d[6];let f=`${u?"Collapse":"Expand"} log details`;return d[7]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eC.A,{size:16}),d[7]=n):n=d[7],d[8]!==u||d[9]!==t||d[10]!==s||d[11]!==f?(i=(0,a.jsx)("button",{type:"button",className:t,onClick:s,"aria-expanded":u,"aria-label":f,children:n}),d[8]=u,d[9]=t,d[10]=s,d[11]=f,d[12]=i):i=d[12],d[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)("span",{className:em().expandButtonSeparator}),d[13]=o):o=d[13],d[14]!==i?(c=(0,a.jsxs)("span",{className:"d-flex align-items-center justify-content-center",children:[i,o]}),d[14]=i,d[15]=c):c=d[15],c});eT.displayName="ExpandButton";var e$=s(61629);let eI="NULL",eL={duration:e=>e.duration>=0?e.duration:eI,severityText:e=>e.severityText??e.statusCode,default:(e,t)=>e[t]},eR=e=>e[U.ZO.ID];function ez(e,t){return(eL[e]??eL.default)(t,e)}let eM=()=>null,eD=e=>{let t,s,n,i,l,o,c,d,m,u,p=(0,r.c)(17),{data:h,dateRange:x,color:_}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t={position:"relative",width:"100%",height:"100%"},s={position:"absolute",left:0,right:0,bottom:0,top:0},p[0]=t,p[1]=s):(t=p[0],s=p[1]),p[2]===Symbol.for("react.memo_cache_sentinel")?(n={top:4,left:0,right:4,bottom:0},p[2]=n):n=p[2];let S=x[0].getTime()/1e3,w=x[1].getTime()/1e3;p[3]!==S||p[4]!==w?(i=[S,w],p[3]=S,p[4]=w,p[5]=i):i=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(l={fontSize:12,fontFamily:"IBM Plex Mono, monospace"},p[6]=l):l=p[6],p[7]!==i?(o=(0,a.jsx)(g.W,{dataKey:"bucket",domain:i,interval:"preserveStartEnd",scale:"time",type:"number",tickFormatter:eH,minTickGap:50,tick:l}),p[7]=i,p[8]=o):o=p[8],p[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)(f.h,{width:40,minTickGap:25,tickFormatter:eW,tick:{fontSize:12,fontFamily:"IBM Plex Mono, monospace"}}),p[9]=c):c=p[9];let E=_||es.lm[0];return p[10]!==E?(d=(0,a.jsx)(b.y,{isAnimationActive:!1,dataKey:"count",stackId:"a",fill:E,maxBarSize:24}),p[10]=E,p[11]=d):d=p[11],p[12]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsx)(y.m,{content:(0,a.jsx)(eM,{})}),p[12]=m):m=p[12],p[13]!==h||p[14]!==d||p[15]!==o?(u=(0,a.jsx)("div",{style:t,children:(0,a.jsx)("div",{style:s,children:(0,a.jsx)(v.u,{width:"100%",height:"100%",minWidth:0,children:(0,a.jsxs)(j.E,{width:500,height:300,data:h,syncId:"hdx",syncMethod:"value",margin:n,children:[o,c,d,m]})})})}),p[13]=h,p[14]=d,p[15]=o,p[16]=u):u=p[16],u},eP=e=>{let t,s,n,i,l=(0,r.c)(12),{opened:o,onClose:c,config:d}=e;l[0]!==d?(t=["SqlModal",d],l[0]=d,l[1]=t):t=l[1],l[2]!==o||l[3]!==t?(s={queryKey:t,placeholderData:eB,enabled:o},l[2]=o,l[3]=t,l[4]=s):s=l[4];let{data:m,isLoading:u}=(0,X.zu)(d,s);return l[5]!==u||l[6]!==m?(n=m?(0,a.jsx)(ew.V,{data:m,enableCopy:!0}):u?(0,a.jsxs)("div",{className:"text-center my-2",children:[(0,a.jsx)("div",{className:"d-inline-block me-2",children:(0,a.jsx)(I.A,{size:14,className:"spin-animate"})}),"Loading SQL..."]}):(0,a.jsx)("div",{className:"text-center my-2",children:"No SQL available"}),l[5]=u,l[6]=m,l[7]=n):n=l[7],l[8]!==c||l[9]!==o||l[10]!==n?(i=(0,a.jsx)(w.a,{opened:o,onClose:c,title:"Generated SQL",size:"auto",children:n}),l[8]=c,l[9]=o,l[10]=n,l[11]=i):i=l[11],i},eV=(0,n.memo)(({tableId:e,displayedColumns:t,fetchNextPage:s,hasNextPage:i,highlightedLineId:c,isLive:m,isLoading:p,rows:h,generateRowId:g,onInstructionsClick:f,onRowDetailsClick:b,onScroll:y,onSettingsClick:v,onShowPatternsClick:j,wrapLines:S=!1,columnNameMap:w,showServiceColumn:V=!0,dedupRows:W,isError:B,error:q,columnTypeMap:J,dateRange:G,loadingDate:Y,config:ea,onChildModalOpen:er,renderRowDetails:en,source:ei,onExpandedRowsChange:el,collapseAllRows:eo,enableSorting:ec=!1,onSortingChange:ed,sortOrder:eu,showExpandButton:eh=!0,getRowWhere:ef,variant:eb="default"})=>{let ey=(0,n.useMemo)(()=>{let e=new Set;return(W?h.filter(t=>{let s=g(t);return!e.has(s.where)&&(e.add(s.where),!0)}):h).map(e=>{let t=g(e);return{...e,[U.ZO.ID]:t.where,[U.ZO.ALIAS_WITH]:t.aliasWith}})},[h,W,g]),ev=(0,n.useCallback)(e=>{b?.(e)},[b]),{userPreferences:{isUTC:ej}}=(0,et.HW)(),[ek,eN]=(0,es.Mj)(`${e}-column-sizes`,{}),[eC,eL]=(0,n.useState)(null),eM=(0,n.useCallback)(e=>(e&&eL(e),()=>{eL(null)}),[]),{data:eV}=(0,X.Kc)(ea),eF=(0,es.ZC)(m);(0,n.useEffect)(()=>{m&&!1===eF&&null!=eC&&(eC.scrollTop=0)},[m,eF,eC]);let eO=(0,n.useMemo)(()=>(function(e){let t={},s=Math.min(e.length,100);for(let a=0;a<s;a++){let s=e[a];Object.keys(s).forEach(e=>{let a=s[e];(a?.length||0)>0&&512>(a?.length||0)&&d()(a)&&null!=(0,es.lO)(a)&&(t[e]=(t[e]??0)+1)})}let a=0,r="";for(let[e,s]of Object.entries(t))s>a&&(a=s,r=e);if(a>0)return r})(ey),[ey]),{csvData:eH,maxRows:eW,isLimited:eB}=(0,Z.u)(ey,t.map(e=>({dataKey:e,displayName:w?.[e]??e}))),{expandedRows:eX,toggleRowExpansion:eZ,collapseAllRows:eq}=(e=>{let t,s,a,i,l=(0,r.c)(9);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={},l[0]=t):t=l[0];let[o,c]=(0,n.useState)(t);l[1]!==e?(s=t=>{c(s=>{let a={...s,[t]:!s[t]},r=Object.values(a).some(Boolean);return e?.(r),a})},l[1]=e,l[2]=s):s=l[2];let d=s;l[3]!==e?(a=()=>{c({}),e?.(!1)},l[3]=e,l[4]=a):a=l[4];let m=a;return l[5]!==m||l[6]!==o||l[7]!==d?(i={expandedRows:o,toggleRowExpansion:d,collapseAllRows:m},l[5]=m,l[6]=o,l[7]=d,l[8]=i):i=l[8],i})(el);(0,n.useEffect)(()=>{eo&&eq()},[eo,eq]);let eJ=function({rows:e,searchableColumns:t,debounceMs:s=300,onVisibilityChange:a}){let[r,i]=(0,n.useState)(""),[l]=(0,K.o)(r,s),[o,c]=(0,n.useState)(0),[d,m]=(0,n.useState)([]),[u,p]=(0,n.useState)(!1),h=(0,n.useRef)(!1);(0,n.useEffect)(()=>{if(!l.trim()){m([]),c(0);return}let s=l.toLowerCase(),a=[];e.forEach((e,r)=>{t.map(t=>{let s=e[t];return null!=s?String(s).toLowerCase():""}).join(" ").includes(s)&&a.push(r)});let r=d.length;m(a),0===r&&a.length>0?(c(0),h.current=!0):a.length>0&&o>=a.length&&(c(a.length-1),h.current=!0)},[l,e,t]),(0,n.useEffect)(()=>{a?.(u)},[u,a]);let x=(0,n.useCallback)(e=>{i(e),e||(m([]),c(0),h.current=!1)},[]),g=(0,n.useCallback)(()=>{h.current=!0,c(e=>e>0?e-1:d.length-1)},[d.length]),f=(0,n.useCallback)(()=>{h.current=!0,c(e=>e<d.length-1?e+1:0)},[d.length]),b=(0,n.useCallback)(e=>{h.current=!0,c(e)},[]),y=(0,n.useCallback)(()=>{i(""),m([]),c(0),h.current=!1,p(!1)},[]),v=(0,n.useCallback)(()=>{h.current=!1},[]);return{searchQuery:l,inputValue:r,setInputValue:i,matchIndices:d,currentMatchIndex:o,isSearchVisible:u,setIsSearchVisible:p,shouldScrollToMatch:h.current,clearShouldScrollToMatch:v,handlePreviousMatch:g,handleNextMatch:f,handleMatchClick:b,handleSearchChange:x,resetSearch:y}}({rows:ey,searchableColumns:t,debounceMs:300}),eG=(0,n.useMemo)(()=>[...eh?[{id:"expand-btn",accessorKey:U.ZO.ID,header:()=>"",cell:e=>{let t=e.getValue(),s=eX[t]??!1;return(0,a.jsx)(eT,{rowId:t,isExpanded:s,highlightedLineId:c,toggleRowExpansion:eZ})},size:32,enableResizing:!1,enableSorting:!1,meta:{className:"text-center"}}]:[],...t.map((e,s)=>{let r=J.get(e)?._type,n=r===_.A2.Date,i=e===eO;return{meta:{column:e,jsColumnType:r},id:eV?.[e]?`"${e}"`:e,enableSorting:r!==_.A2.Dynamic,accessorFn:u()(ez)(e),header:`${w?.[e]??e}${n?ej?" (UTC)":" (Local)":""}`,cell:t=>{let s=t.getValue();if("__hdx_pattern_trend"===e)return(0,a.jsx)("div",{style:{height:50,width:"100%"},children:(0,a.jsx)(eD,{data:s.data,dateRange:s.dateRange,color:(0,es.aw)(t.row.original.severityText??t.row.original.statusCode)})});if(n){let e=new Date(s);return(0,a.jsx)("span",{className:"text-muted",children:(0,a.jsx)(ee.H,{value:e,format:"withMs"})})}let r="string"==typeof s?s:`${s}`;if(e===eO)return(0,a.jsx)(e$.A,{level:r});let i=r.length>500?`${r.slice(0,500)}...`:r,o=!!eJ.searchQuery&&eJ.matchIndices.length>0&&eJ.matchIndices[eJ.currentMatchIndex]===t.row.index,c=eJ.searchQuery?((e,t,s={})=>{if(!t.trim())return e;let r=s.isCurrentMatch?s.currentMatchBackgroundColor||"var(--mantine-color-orange-5)":s.backgroundColor||"var(--mantine-color-yellow-3)",n=e.toLowerCase(),i=t.toLowerCase(),l=[],o=0,c=n.indexOf(i);for(;-1!==c;)c>o&&l.push(e.slice(o,c)),l.push((0,a.jsx)("mark",{style:{backgroundColor:r,color:s.textColor||"var(--color-text-inverted)",padding:0},children:e.slice(c,c+t.length)},`${c}-${o}`)),o=c+t.length,c=n.indexOf(i,o);return o<e.length&&l.push(e.slice(o)),l.length>0?(0,a.jsx)(a.Fragment,{children:l}):e})(i,eJ.searchQuery,{isCurrentMatch:o}):i;return(0,a.jsx)("span",{className:l()({"text-muted":s===eI}),children:c})},size:s===t.length-1?Q.k:ek[e]??(n?170:i?115:160)}})],[ej,c,t,ek,w,J,eO,eX,eZ,eh,eV,eJ.searchQuery,eJ.matchIndices,eJ.currentMatchIndex]),eU=(0,n.useCallback)(e=>{if(e){let{scrollHeight:t,scrollTop:a,clientHeight:r}=e;t-a-r<500&&!p&&i&&s?.({cancelRefetch:!1})}},[s,p,i]);(0,n.useEffect)(()=>{eU(eC)},[eU,eC]);let eK=(0,n.useMemo)(()=>{let t={data:ey,columns:eG,getCoreRowModel:(0,F.HT)(),enableSorting:ec,manualSorting:!0,onSortingChange:e=>{if("function"==typeof e){let t=e(eu??[]);ed?.(t??null)}else ed?.(e??null)},state:{sorting:eu??[]},enableColumnResizing:!0,columnResizeMode:"onChange"};return e?{...t,state:{columnSizing:ek},onColumnSizingChange:e=>{let t=e instanceof Function?e():e;eN({...ek,...t})}}:t},[eG,ey,e,eu,ec,ed,ek,eN]),eY=(0,O.N4)(eK),{rows:eQ}=eY.getRowModel(),e0=(0,H.Te)({count:eQ.length,getScrollElement:(0,n.useCallback)(()=>eC,[eC]),estimateSize:(0,n.useCallback)(()=>23,[]),overscan:30,paddingEnd:20}),e1=e0.getVirtualItems(),e2=e0.getTotalSize(),[e3,e4]=(0,n.useMemo)(()=>e1.length>0?[Math.max(0,e1[0].start-e0.options.scrollMargin),Math.max(0,e2-e1[e1.length-1].end)]:[0,0],[e1,e0.options.scrollMargin,e2]),[e5,e6]=(0,n.useState)(!1),[e7,e8]=(0,es.Mj)(`${e}-wrap-lines`,S??!1),[e9,te]=(0,n.useState)(!1),tt=e=>{te(e),er?.(e)};(0,n.useEffect)(()=>{if(eJ.shouldScrollToMatch)if(eJ.matchIndices.length>0&&e0&&eJ.currentMatchIndex<eJ.matchIndices.length&&eJ.searchQuery.trim()){let e=ey[eJ.matchIndices[eJ.currentMatchIndex]];if(e){let t=eQ.findIndex(t=>eR(t.original)===eR(e));-1!==t?requestAnimationFrame(()=>{e0.scrollToIndex(t,{align:"center"}),eJ.clearShouldScrollToMatch()}):eJ.clearShouldScrollToMatch()}else eJ.clearShouldScrollToMatch()}else eJ.clearShouldScrollToMatch()},[eJ.shouldScrollToMatch,eJ.currentMatchIndex,eJ.matchIndices,eJ.searchQuery,eJ.clearShouldScrollToMatch,e0,eQ,ey]),(0,n.useEffect)(()=>{if(e5||!c||null==e0)return;let e=ey.findIndex(e=>eR(e)===c);-1==e&&c?ey.length<1e3&&!p&&i&&s?.({cancelRefetch:!1}):(e6(!0),null==e0.getVirtualItems().find(t=>t.index===e)&&e0.scrollToIndex(e,{align:"center"}))},[ey,c,s,e0,e5,p,i]);let ts=(0,n.useCallback)(e=>{if(null==c)return;let t=ey.findIndex(e=>eR(e)===c)+e;t<0||t>=ey.length||ev(ey[t])},[c,ev,ey]);return(0,x.vC)(["ArrowRight","ArrowDown","j"],e=>{e.preventDefault(),ts(1)}),(0,x.vC)(["ArrowLeft","ArrowUp","k"],e=>{e.preventDefault(),ts(-1)}),(0,a.jsx)(E.s,{direction:"column",h:"100%",children:(0,a.jsxs)(k.a,{pos:"relative",style:{flex:1,minHeight:0},children:[(0,a.jsx)(e_,{searchQuery:eJ.inputValue,onSearchChange:eJ.handleSearchChange,matchIndices:eJ.matchIndices,currentMatchIndex:eJ.currentMatchIndex,onPreviousMatch:eJ.handlePreviousMatch,onNextMatch:eJ.handleNextMatch,isVisible:eJ.isSearchVisible,onVisibilityChange:eJ.setIsSearchVisible,containerRef:eC}),(0,a.jsxs)("div",{"data-testid":"search-results-table",className:l()("overflow-auto h-100 fs-8",em().tableWrapper,{[em().muted]:"muted"===eb}),onScroll:e=>{if(eU(e.target),null!=e.target){let{scrollTop:t}=e.target;y?.(t)}},ref:eM,children:[ea&&(0,a.jsx)(eP,{opened:e9,onClose:()=>tt(!1),config:ea}),(0,a.jsxs)("table",{className:l()("w-100",em().table),id:e,children:[(0,a.jsx)("thead",{className:em().tableHead,children:t.length>0&&eY.getHeaderGroups().map(t=>(0,a.jsx)("tr",{children:t.headers.map((s,r)=>{let n=r===t.headers.length-1;return(0,a.jsx)(eg.A,{header:s,isLast:n,lastItemButtons:(0,a.jsxs)(N.Y,{gap:8,mr:8,children:[e&&Object.keys(ek).length>0&&(0,a.jsx)(C.N,{onClick:()=>eN({}),title:"Reset Column Widths",children:(0,a.jsx)(A.m,{label:"Reset Column Widths",children:(0,a.jsx)(L.A,{size:16})})}),ea&&(0,a.jsx)(C.N,{onClick:()=>tt(!0),title:"Show Generated SQL",tabIndex:0,children:(0,a.jsx)(A.m,{label:"Show Generated SQL",children:(0,a.jsx)(R.A,{size:16})})}),(0,a.jsx)(C.N,{onClick:()=>e8(e=>!e),title:`${e7?"Disable":"Enable"}  Wrap Lines`,children:(0,a.jsx)(A.m,{label:`${e7?"Disable":"Enable"} Wrap Lines`,children:e7?(0,a.jsx)(z.A,{size:16}):(0,a.jsx)(M.A,{size:16})})}),(0,a.jsx)(eE.P,{data:eH,filename:`hyperdx_search_results_${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}`,className:"fs-6",children:(0,a.jsx)(A.m,{label:`Download Table as CSV (max ${eW.toLocaleString()} rows)${eB?" - data truncated":""}`,children:(0,a.jsx)(D.A,{size:16})})}),null!=v&&(0,a.jsx)(C.N,{onClick:()=>v(),title:"Settings",children:(0,a.jsx)(A.m,{label:"Settings",children:(0,a.jsx)(P.A,{size:16})})})]})},s.id)})},t.id))}),(0,a.jsxs)("tbody",{children:[e3>0&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:99999,style:{height:`${e3}px`}})}),e1.map(e=>{let t=eQ[e.index],s=eR(t.original),r=eX[s]??!1;return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)("tr",{"data-testid":`table-row-${s}`,className:l()(em().tableRow,{[em().tableRow__selected]:c&&c===s}),"data-index":e.index,ref:e0.measureElement,children:[eh&&(0,a.jsx)("td",{className:"align-top overflow-hidden",style:{width:"40px"},children:(0,O.Kv)(t.getVisibleCells()[0].column.columnDef.cell,t.getVisibleCells()[0].getContext())}),(0,a.jsx)("td",{className:"align-top overflow-hidden p-0",colSpan:eG.length-!!eh,children:(0,a.jsxs)("button",{type:"button",className:l()(em().rowContentButton,{[em().isWrapped]:e7,[em().isTruncated]:!e7}),onClick:e=>{ev(t.original)},"aria-label":"View details for log entry",children:[t.getVisibleCells().slice(+!!eh).map(e=>{let t=e.column.columnDef.meta?.className,s=e.column.getSize(),r=e.getValue();return(0,a.jsx)("div",{className:l()("flex-shrink-0 overflow-hidden position-relative",t),style:{width:s===Q.k?"auto":`${s}px`,flex:s===Q.k?"1":"none"},children:(0,a.jsx)("div",{className:em().fieldTextContainer,children:(0,a.jsx)(ep,{cellValue:r,wrapLinesEnabled:e7,tableContainerRef:eC,columnName:e.column.columnDef.meta?.column,isChart:e.column.columnDef.meta?.column==="__hdx_pattern_trend",children:(0,O.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)}),ef&&(0,a.jsx)(ex,{row:t.original,getRowWhere:ef,sourceId:ei?.id,isWrapped:e7,onToggleWrap:()=>e8(!e7)})]})})]}),eh&&r&&(0,a.jsx)(eA,{columnsLength:eG.length,virtualKey:e.key.toString(),source:ei,rowId:s,measureElement:e0.measureElement,virtualIndex:e.index,children:en?.({id:s,aliasWith:t.original[U.ZO.ALIAS_WITH],...t.original})})]},e.key)}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:800,children:(0,a.jsx)("div",{className:"rounded fs-7 bg-muted text-center d-flex align-items-center justify-content-center mt-3",children:p?(0,a.jsxs)("div",{className:"my-3",children:[(0,a.jsx)("div",{className:"d-inline-block",children:(0,a.jsx)(I.A,{size:14,className:"spin-animate"})})," ",null!=Y&&(0,a.jsxs)(a.Fragment,{children:["Searched ",(0,a.jsx)(ee.H,{value:Y}),"."," "]}),"Loading results",G?.[0]!=null&&G?.[1]!=null?(0,a.jsxs)(a.Fragment,{children:[" ","across"," ",(0,o.A)(G?.[1],G?.[0])," ","(",(0,a.jsx)(ee.H,{value:G?.[0],format:"withYear"})," ","to"," ",(0,a.jsx)(ee.H,{value:G?.[1],format:"withYear"}),")"]}):null,"..."]}):!1==i&&!1==p&&ey.length>0?(0,a.jsx)("div",{className:"my-3",children:"End of Results"}):B?(0,a.jsxs)("div",{className:"my-3",children:[(0,a.jsx)(T.E,{ta:"center",size:"sm",children:"Error loading results, please check your query or try again."}),(0,a.jsxs)(k.a,{p:"sm",children:[(0,a.jsx)(k.a,{mt:"sm",children:(0,a.jsx)($.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:q?.message})}),q instanceof _.p1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,a.jsx)(E.s,{w:"100%",ta:"initial",align:"center",justify:"center",children:(0,a.jsx)(ew.V,{data:q?.query})})]})]})]}):!1==i&&!1==p&&0===ey.length?(0,a.jsxs)("div",{className:"my-3","data-testid":"db-row-table-no-results",children:["No results found.",(0,a.jsx)(T.E,{mt:"sm",children:"Try checking the query explainer in the search bar if there are any search syntax issues."}),G?.[0]!=null&&G?.[1]!=null?(0,a.jsxs)(T.E,{mt:"sm",children:["Searched Time Range:"," ",(0,o.A)(G?.[1],G?.[0])," ","(",(0,a.jsx)(ee.H,{value:G?.[0],format:"withYear"})," ","to"," ",(0,a.jsx)(ee.H,{value:G?.[1],format:"withYear"}),")"]}):null]}):(0,a.jsx)("div",{})})})}),e4>0&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:99999,style:{height:`${e4}px`}})})]})]})]}),(0,a.jsx)(eS,{searchQuery:eJ.searchQuery,matchIndices:eJ.matchIndices,currentMatchIndex:eJ.currentMatchIndex,dedupedRows:ey,tableRows:eQ,getRowId:eR,onMatchClick:eJ.handleMatchClick})]})})});function eF(e){let t,s,a=(0,r.c)(12);a[0]!==e.connection||a[1]!==e.from.databaseName||a[2]!==e.from.tableName?(t={databaseName:e.from.databaseName,tableName:e.from.tableName,connectionId:e.connection},a[0]=e.connection,a[1]=e.from.databaseName,a[2]=e.from.tableName,a[3]=t):t=a[3];let{data:n}=(0,q.Z2)(t),i=n?.primary_key,l=n?.partition_key;e:{let t,r;if(null==i||null==l){s=void 0;break e}a[4]!==e.select||a[5]!==l||a[6]!==i?(t=function(e,t,s){let a=new Set([...(0,_.bZ)(s),...(0,_.bZ)(t)]);if("string"==typeof e){let t=new Set((0,S.AB)(e)),s=[...a].filter(e=>!t.has(e));return{select:[...t,...s].join(","),additionalKeysLength:s.length}}{let t=[...a].map(e=>({valueExpression:e}));return{select:[...e,...t],additionalKeysLength:t.length}}}(e.select,i,l),a[4]=e.select,a[5]=l,a[6]=i,a[7]=t):t=a[7];let{select:n,additionalKeysLength:o}=t;a[8]!==o||a[9]!==e||a[10]!==n?(r={...e,select:n,additionalKeysLength:o},a[8]=o,a[9]=e,a[10]=n,a[11]=r):r=a[11],s=r}return s}let eO=(0,n.memo)(function({config:e,sourceId:t,onError:s,onRowDetailsClick:r,highlightedLineId:i,enabled:l=!0,isLive:o=!1,queryKeyPrefix:c,onScroll:d,denoiseResults:m=!1,onChildModalOpen:u,onExpandedRowsChange:p,collapseAllRows:x,showExpandButton:g=!0,renderRowDetails:f,onSortingChange:b,initialSortBy:y,variant:v="default"}){var j;let{data:S}=W.Ay.useMe(),[w,E]=(0,n.useState)(y?.[0]??null),N=(0,n.useMemo)(()=>w?[w]:[],[w]),C=(0,n.useCallback)(e=>{b?.(e),E(e?.[0]??null)},[E,b]),A=(0,es.ZC)(t);(0,n.useEffect)(()=>{A&&A!==t&&C(null)},[t]);let $=(0,es.ZC)(y);(0,n.useEffect)(()=>{let e=y?.[0]??null,t=$?.[0]??null;JSON.stringify(e)!==JSON.stringify(t)&&E(e)},[y,$]);let I=(0,n.useMemo)(()=>{let t={...(0,B.Nz)(S?.team),...e};return N.length&&(t.orderBy=N.map(e=>({valueExpression:e.id,ordering:e.desc?"DESC":"ASC"}))),t},[S,e,N]),L=eF(I),{data:R,fetchNextPage:z,hasNextPage:M,isFetching:D,isError:P,error:F}=(0,J.A)(L??e,{enabled:l&&null!=L&&("string"==typeof(j=e.select)?j.split(",").filter(e=>e.trim().length>0).length:j.length)>0,isLive:o,queryKeyPrefix:c}),O=(0,n.useMemo)(()=>(function(e,t){if(null==e||null==t)return new Map;let s=e.slice(0,e.length-t);return new Map(s?.map(e=>[e.name,{...e,_type:(0,_.rj)(e.type)}]))})(R?.meta,L?.additionalKeysLength),[R,L]),H=(0,n.useMemo)(()=>Array.from(O.keys()),[O]),X=(0,n.useMemo)(()=>H.filter(e=>{let t=O.get(e)?._type;return(0,_.Zo)(t)}),[H,O]),Z=(0,n.useMemo)(()=>(R?.data??[]).map(e=>{let t={...e};return X.forEach(s=>{O.get(s)?._type===_.A2.JSON?t[s]=JSON.stringify(e[s]).replace(/\//g,"\\/"):t[s]=JSON.stringify(e[s])}),t}),[R,X,O]),q=(0,n.useMemo)(()=>(0,_.D7)(R?.chSql??{sql:"",params:{}}),[R]),K=(0,U.Ay)({meta:R?.meta,aliasMap:q}),Q=(0,n.useCallback)(e=>r?.(K(e)),[r,K]);(0,n.useEffect)(()=>{P&&s&&F&&s(F)},[P,s,F]);let{data:ee}=(0,Y.Fo)({id:t}),et=H[H.length-1],ea=(0,G.nt)({config:e,samples:1e4,bodyValueExpression:et??"",severityTextExpression:ee?.severityTextExpression??"",totalCount:void 0,enabled:m}),er=(0,V.I)({queryKey:["noisy-patterns",e],queryFn:async()=>Object.values(ea.data).filter(e=>e.count/(ea.sampledRowCount??1)>.1),enabled:m&&null!=ea.data&&Object.values(ea.data).length>0&&null!=ea.miner}),en=(0,n.useMemo)(()=>er.data?.map(e=>e.id)??[],[er.data]),ei=(0,V.I)({queryKey:["denoised-rows",e,m,...m?[Z]:[],en,et],queryFn:async()=>{if(!m)return[];if(0===en.length)return Z;let e=await ea.miner?.matchLogs(Z.map(e=>e[et]));return Z.filter((t,s)=>{let a=e?.[s];return!en.includes(`${a}`)})},placeholderData:(t,s)=>{if(s?.queryKey?.[0]==="denoised-rows"&&s?.queryKey?.[1]===e)return t},gcTime:o?h()("30s"):h()("5m"),enabled:m&&er.isSuccess&&Z.length>0&&null!=ea.miner}),el=m?D||ei.isFetching||er.isFetching||ea.isLoading:D,eo=R?.window?.direction==="ASC"?R?.window?.endTime:R?.window?.startTime;return(0,a.jsxs)(a.Fragment,{children:[m&&(0,a.jsxs)(k.a,{mb:"xxs",px:"sm",children:[(0,a.jsx)(T.E,{fw:"bold",fz:"xs",mb:"xxs",children:"Removed Noisy Event Patterns"}),(0,a.jsxs)(k.a,{mah:100,style:{overflow:"auto"},children:[er.data?.map(e=>(0,a.jsx)(T.E,{fz:"xs",children:e.pattern},e.id)),0===en.length&&(0,a.jsx)(T.E,{fz:"xs",children:"No noisy patterns found"})]})]}),(0,a.jsx)(eV,{isLive:o,wrapLines:!1,displayedColumns:H,highlightedLineId:i,rows:m?ei?.data??[]:Z,renderRowDetails:f,isLoading:el,fetchNextPage:z,hasNextPage:M,onRowDetailsClick:Q,onScroll:d,generateRowId:K,isError:P,error:F??void 0,columnTypeMap:O,dateRange:e.dateRange,loadingDate:eo,config:I,onChildModalOpen:u,source:ee,onExpandedRowsChange:p,collapseAllRows:x,showExpandButton:g,enableSorting:!0,onSortingChange:C,sortOrder:N,getRowWhere:K,variant:v})]})});function eH(){return""}function eW(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function eB(e){return e??""}},50374:(e,t,s)=>{"use strict";s.d(t,{D:()=>e0,A:()=>e3});var a,r,n=s(6029),i=s(75155),l=s(55729),o=s(86508),c=s(84450),d=s.n(c),m=s(41038),u=s(7913),p=s(66692),h=s(82641),x=s(60481),g=s(78253),f=s(10174),b=s(34834),y=s(64441),v=s(24885);function j(e){let t,s,a,r=(0,i.c)(13),{hasLogSource:n}=e,[o,c]=(0,m.ZA)("traceWhere"),[d,u]=(0,m.ZA)("logWhere"),p=!!o||!!(n&&d),[h,x]=(0,l.useState)(p);r[0]!==u||r[1]!==c?(t=e=>{c(e.traceWhere||null),u(e.logWhere||null)},r[0]=u,r[1]=c,r[2]=t):t=r[2];let g=t;r[3]!==u||r[4]!==c?(s=()=>{c(null),u(null)},r[3]=u,r[4]=c,r[5]=s):s=r[5];let f=s;return r[6]!==f||r[7]!==p||r[8]!==h||r[9]!==d||r[10]!==g||r[11]!==o?(a={traceWhere:o,logWhere:d,isFilterActive:p,isFilterExpanded:h,setIsFilterExpanded:x,onSubmit:g,clear:f},r[6]=f,r[7]=p,r[8]=h,r[9]=d,r[10]=g,r[11]=o,r[12]=a):a=r[12],a}var _=s(78694),S=s(81973),w=s(96958),E=s(18006),k=s(26674),N=s(3635),C=s(43517),A=s(43085),T=s(98287);function $(e){let t,s,a,r,l=(0,i.c)(9),{traceId:o,dateRange:c,traceTableSourceId:d}=e;l[0]!==d?(t={id:d},l[0]=d,l[1]=t):t=l[1];let{data:m}=(0,S.Fo)(t);return l[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,n.jsxs)(N.Y,{gap:0,children:[(0,n.jsx)(C.E,{size:"sm",ps:"sm",children:"Service Map"}),(0,n.jsx)(A.E,{size:"xs",ms:"xs",color:"gray",autoContrast:!0,radius:"sm",children:"Beta"})]}),l[2]=s):s=l[2],l[3]!==c||l[4]!==o||l[5]!==m?(a=m?(0,n.jsx)(T.A,{traceTableSource:m,traceId:o,dateRange:c,isSingleTrace:!0}):null,l[3]=c,l[4]=o,l[5]=m,l[6]=a):a=l[6],l[7]!==a?(r=(0,n.jsxs)(b.B,{w:"100%",children:[s,a]}),l[7]=a,l[8]=r):r=l[8],r}var I=s(76539),L=s(43465),R=s(66631),z=s(76089),M=s(90124),D=s(62801),P=s(44595),V=s(53993),F=s(43152),O=s(40228),H=s(28450);let W=e=>{let t,s,a,r,c,d,m,u,p,h,x,g,f,b,y,v,j,_,S,w,E,k,C,A,T,$=(0,i.c)(73),{fieldPrefix:I,metricSource:V,timestamp:H,title:W,where:B}=e,[X,Z]=(0,l.useState)("30m"),[q,J]=(0,l.useState)("sm");if($[0]!==X||$[1]!==H){let e={"30m":{minutes:15},"1h":{minutes:30},"1d":{hours:12}}[X];t=(0,L.A)(new Date(H),e),s=(0,R.A)([(0,o.A)(new Date(H),e),new Date]),$[0]=X,$[1]=H,$[2]=t,$[3]=s}else t=$[2],s=$[3];$[4]!==t||$[5]!==s?(a=[t,s],$[4]=t,$[5]=s,$[6]=a):a=$[6];let G=a;e:{switch(q){case"sm":{let e;$[7]===Symbol.for("react.memo_cache_sentinel")?(e={cols:3,height:200},$[7]=e):e=$[7],r=e;break e}case"md":{let e;$[8]===Symbol.for("react.memo_cache_sentinel")?(e={cols:2,height:250},$[8]=e):e=$[8],r=e;break e}case"lg":{let e;$[9]===Symbol.for("react.memo_cache_sentinel")?(e={cols:1,height:320},$[9]=e):e=$[9],r=e;break e}}r=void 0}let{cols:U,height:K}=r;$[10]!==G?(c=(0,z.tA)(G),$[10]=G,$[11]=c):c=$[11];let Y=c,Q=`infra-subpanel-${I}`;$[12]!==W?(d=(0,n.jsx)("h4",{className:"fs-6 m-0",children:W}),$[12]=W,$[13]=d):d=$[13],$[14]===Symbol.for("react.memo_cache_sentinel")?(m=[{label:"30m",value:"30m"},{label:"1h",value:"1h"},{label:"1d",value:"1d"}],$[14]=m):m=$[14],$[15]===Symbol.for("react.memo_cache_sentinel")?(u=e=>Z(e),$[15]=u):u=$[15],$[16]!==X?(p=(0,n.jsx)(M.I,{size:"xs",data:m,value:X,onChange:u}),$[16]=X,$[17]=p):p=$[17],$[18]!==p||$[19]!==d?(h=(0,n.jsxs)(N.Y,{align:"center",children:[d,p]}),$[18]=p,$[19]=d,$[20]=h):h=$[20],$[21]===Symbol.for("react.memo_cache_sentinel")?(x=[{label:"SM",value:"sm"},{label:"MD",value:"md"},{label:"LG",value:"lg"}],$[21]=x):x=$[21],$[22]===Symbol.for("react.memo_cache_sentinel")?(g=e=>J(e),$[22]=g):g=$[22],$[23]!==q?(f=(0,n.jsx)(N.Y,{align:"center",children:(0,n.jsx)(M.I,{size:"xs",data:x,value:q,onChange:g})}),$[23]=q,$[24]=f):f=$[24],$[25]!==h||$[26]!==f?(b=(0,n.jsxs)(N.Y,{justify:"space-between",align:"center",children:[h,f]}),$[25]=h,$[26]=f,$[27]=b):b=$[27],$[28]!==G||$[29]!==I||$[30]!==Y||$[31]!==V||$[32]!==B?(y=(0,F.ik)({dateRange:G,granularity:Y,seriesReturnType:"column",series:[{type:"time",where:B,groupBy:[],aggFn:"avg",field:`${I}cpu.utilization - Gauge`,table:"metrics",numberFormat:F.p2}]},{metric:V}),$[28]=G,$[29]=I,$[30]=Y,$[31]=V,$[32]=B,$[33]=y):y=$[33];let ee=H/1e3;$[34]!==y||$[35]!==ee?(v=(0,n.jsx)(O.S,{title:"CPU Usage (%)",config:y,showDisplaySwitcher:!1,logReferenceTimestamp:ee}),$[34]=y,$[35]=ee,$[36]=v):v=$[36],$[37]!==K||$[38]!==v?(j=(0,n.jsx)(D.Z,{"data-testid":"cpu-usage-card",children:(0,n.jsx)(D.Z.Section,{py:8,px:8,h:K,children:v})}),$[37]=K,$[38]=v,$[39]=j):j=$[39],$[40]!==G||$[41]!==I||$[42]!==Y||$[43]!==V||$[44]!==B?(_=(0,F.ik)({dateRange:G,granularity:Y,seriesReturnType:"column",series:[{type:"time",where:B,groupBy:[],aggFn:"avg",field:`${I}memory.usage - Gauge`,table:"metrics",numberFormat:F.JD}]},{metric:V}),$[40]=G,$[41]=I,$[42]=Y,$[43]=V,$[44]=B,$[45]=_):_=$[45];let et=H/1e3;$[46]!==_||$[47]!==et?(S=(0,n.jsx)(O.S,{title:"Memory Used",config:_,showDisplaySwitcher:!1,logReferenceTimestamp:et}),$[46]=_,$[47]=et,$[48]=S):S=$[48],$[49]!==K||$[50]!==S?(w=(0,n.jsx)(D.Z,{"data-testid":"memory-usage-card",children:(0,n.jsx)(D.Z.Section,{py:8,px:8,h:K,children:S})}),$[49]=K,$[50]=S,$[51]=w):w=$[51],$[52]!==G||$[53]!==I||$[54]!==Y||$[55]!==V||$[56]!==B?(E=(0,F.ik)({dateRange:G,granularity:Y,seriesReturnType:"column",series:[{type:"time",where:B,groupBy:[],aggFn:"avg",field:`${I}filesystem.available - Gauge`,table:"metrics",numberFormat:F.nH}]},{metric:V}),$[52]=G,$[53]=I,$[54]=Y,$[55]=V,$[56]=B,$[57]=E):E=$[57];let es=H/1e3;return $[58]!==E||$[59]!==es?(k=(0,n.jsx)(O.S,{title:"Disk Available",config:E,showDisplaySwitcher:!1,logReferenceTimestamp:es}),$[58]=E,$[59]=es,$[60]=k):k=$[60],$[61]!==K||$[62]!==k?(C=(0,n.jsx)(D.Z,{"data-testid":"disk-usage-card",children:(0,n.jsx)(D.Z.Section,{py:8,px:8,h:K,children:k})}),$[61]=K,$[62]=k,$[63]=C):C=$[63],$[64]!==U||$[65]!==j||$[66]!==w||$[67]!==C?(A=(0,n.jsxs)(P.r,{mt:"md",cols:U,children:[j,w,C]}),$[64]=U,$[65]=j,$[66]=w,$[67]=C,$[68]=A):A=$[68],$[69]!==b||$[70]!==A||$[71]!==Q?(T=(0,n.jsxs)("div",{"data-testid":Q,children:[b,A]}),$[69]=b,$[70]=A,$[71]=Q,$[72]=T):T=$[72],T},B=({rowData:e,rowId:t,source:s})=>{let{data:a}=(0,S.Fo)({id:s.metricSourceId}),r=e?.__hdx_resource_attributes["k8s.pod.uid"],i=e?.__hdx_resource_attributes["k8s.node.name"],l=new Date(e?.__hdx_timestamp).getTime();return(0,n.jsxs)(b.B,{my:"md",gap:40,children:[r&&(0,n.jsxs)("div",{children:[a&&(0,n.jsx)(W,{title:"Pod",where:`${a.resourceAttributesExpression}.k8s.pod.uid:"${r}"`,fieldPrefix:"k8s.pod.",timestamp:l,metricSource:a}),s&&(0,n.jsxs)(D.Z,{p:"md",mt:"xl",children:[(0,n.jsx)(D.Z.Section,{p:"md",py:"xs",children:"Pod Timeline"}),(0,n.jsx)(D.Z.Section,{children:(0,n.jsx)(V.F,{viewportProps:{style:{maxHeight:280}},children:(0,n.jsx)(x.a,{p:"md",py:"sm",children:(0,n.jsx)(H.FB,{logSource:s,q:`\`k8s.pod.uid\`:"${r}"`,dateRange:[(0,L.A)(new Date(l),{days:1}),(0,o.A)(new Date(l),{days:1})],anchorEvent:{label:(0,n.jsx)("div",{className:"text-brand",children:"This Event"}),timestamp:new Date(l).toISOString()}})})})})]})]}),i&&a&&(0,n.jsx)(W,{metricSource:a,title:"Node",where:`${a.resourceAttributesExpression}.k8s.node.name:"${i}"`,fieldPrefix:"k8s.node.",timestamp:l})]})};var X=s(37901),Z=s(26837),q=s(82203),J=s.n(q),G=s(94720),U=s(40147),K=s(57030),Y=s(71434),Q=s.n(Y),ee=s(1909),et=s(14262),es=s.n(et),ea=s(3145),er=s(53061),en=s(47268),ei=s(23935),el=s(24589),eo=s(92789),ec=s(70114),ed=s(23474),em=s(54134),eu=s(225),ep=s(24196),eh=s(78744),ex=s(70727),eg=s(75828),ef=s.n(eg),eb=s(63085),ey=s(21440),ev=s(7565),ej=s(92917),e_=s(83101),eS=s.n(e_),ew=s(20699),eE=s.n(ew);let ek=(0,l.memo)(function(e){let t,s,a,r,l,o,c,d,m,u,p,h,x,g,f=(0,i.c)(30),{marker:b,eventStart:y,eventEnd:v,height:j}=e,_=(0,ev.a)(),S=v-y,w=b.timestamp-y,E=S>0?w/S*100:0;f[0]!==b.attributes?(t=Object.entries(b.attributes),f[0]=b.attributes,f[1]=t):t=f[1];let k=t;f[2]!==_||f[3]!==b.timestamp?(s=_(new Date(b.timestamp),{format:"withMs"}),f[2]=_,f[3]=b.timestamp,f[4]=s):s=f[4],f[5]!==s?(a=(0,n.jsx)(C.E,{size:"xxs",c:"dimmed",mb:"xxs",children:s}),f[5]=s,f[6]=a):a=f[6],f[7]!==b.name?(r=(0,n.jsx)(C.E,{size:"xs",children:b.name}),f[7]=b.name,f[8]=r):r=f[8],f[9]!==k?(l=k.length>0&&(0,n.jsxs)("div",{style:{fontSize:10,marginTop:4},children:[k.slice(0,5).map(eL),k.length>5&&(0,n.jsxs)("div",{style:{fontStyle:"italic"},children:["...and ",k.length-5," more"]})]}),f[9]=k,f[10]=l):l=f[10],f[11]!==a||f[12]!==r||f[13]!==l?(o=(0,n.jsxs)("div",{children:[a,r,l]}),f[11]=a,f[12]=r,f[13]=l,f[14]=o):o=f[14];let N=o;f[15]===Symbol.for("react.memo_cache_sentinel")?(c={transition:"fade"},d={fontSize:11,maxWidth:350,wordBreak:"break-word"},f[15]=c,f[16]=d):(c=f[15],d=f[16]),f[17]!==E?(m=E.toFixed(6),f[17]=E,f[18]=m):m=f[18];let A=`${m}%`;return f[19]!==A?(u={position:"absolute",left:A,top:"50%",transform:"translate(-50%, -50%)",width:8,height:8,cursor:"pointer",zIndex:10,pointerEvents:"auto"},f[19]=A,f[20]=u):u=f[20],f[21]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)("div",{style:{width:8,height:8,backgroundColor:"var(--color-bg-success)",transform:"rotate(45deg)",border:"1px solid #333",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"}}),f[21]=p):p=f[21],f[22]!==j?(h=(0,n.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:1,height:j,backgroundColor:"var(--color-bg-success)",opacity:.4,zIndex:-1}}),f[22]=j,f[23]=h):h=f[23],f[24]!==u||f[25]!==h?(x=(0,n.jsxs)("div",{style:u,onMouseEnter:eR,onClick:ez,children:[p,h]}),f[24]=u,f[25]=h,f[26]=x):x=f[26],f[27]!==x||f[28]!==N?(g=(0,n.jsx)(eb.m,{label:N,color:"var(--color-bg-surface)",withArrow:!0,multiline:!0,transitionProps:c,style:d,children:x}),f[27]=x,f[28]=N,f[29]=g):g=f[29],g}),eN=(0,l.memo)(function(e){let t,s,a,r,l,o,c=(0,i.c)(25),{events:d,maxVal:m,height:u,eventStyles:p,onEventHover:h,scale:x,offset:g}=e,f=h??eM;c[0]!==u?(t={width:0,flexGrow:1,height:u,position:"relative"},c[0]=u,c[1]=t):t=c[1];let b=-1*g*x;c[2]!==b?(s=b.toFixed(6),c[2]=b,c[3]=s):s=c[3];let y=`${s}%`;if(c[4]!==y?(a=(0,n.jsx)("div",{style:{marginRight:y}}),c[4]=y,c[5]=a):a=c[5],c[6]!==d?(r=d??[],c[6]=d,c[7]=r):r=c[7],c[8]!==p||c[9]!==u||c[10]!==m||c[11]!==f||c[12]!==x||c[13]!==r){let e;c[15]!==p||c[16]!==u||c[17]!==m||c[18]!==f||c[19]!==x?(e=(e,t,s)=>{let a=(e.minWidthPerc??0)/100,r=s[t-1],i=r?.start!=null?r?.start+m*a:0,l=Math.max(r?.end??0,i),o=x*Math.max((e.end-e.start)/m,a)*100,c=x*((e.start-l)/m*100);return(0,n.jsx)(eb.m,{label:e.tooltip,color:"gray",withArrow:!0,multiline:!0,transitionProps:{transition:"fade-right"},style:{fontSize:11,maxWidth:300,wordBreak:"break-word"},children:(0,n.jsxs)("div",{onMouseEnter:()=>f(e.id),className:"d-flex align-items-center h-100 cursor-pointer text-truncate hover-opacity",style:{userSelect:"none",backgroundColor:e.color,minWidth:`${o.toFixed(6)}%`,width:`${o.toFixed(6)}%`,marginLeft:`${c.toFixed(6)}%`,position:"relative",..."function"==typeof p?p(e):p},children:[(0,n.jsx)("div",{style:{margin:"auto"},className:"px-2",children:e.body}),e.markers?.map((t,s)=>(0,n.jsx)(ek,{marker:t,eventStart:e.start,eventEnd:e.end,height:u},`${e.id}-marker-${s}`))]})},e.id)},c[15]=p,c[16]=u,c[17]=m,c[18]=f,c[19]=x,c[20]=e):e=c[20],l=r.map(e),c[8]=p,c[9]=u,c[10]=m,c[11]=f,c[12]=x,c[13]=r,c[14]=l}else l=c[14];return c[21]!==t||c[22]!==a||c[23]!==l?(o=(0,n.jsxs)("div",{className:"d-flex overflow-hidden",style:t,children:[a,l]}),c[21]=t,c[22]=a,c[23]=l,c[24]=o):o=c[24],o});function eC(e){return e<1e3?`${Math.round(e)}ms`:e%1e3==0?`${Math.floor(e/1e3)}s`:`${(e/1e3).toFixed(3)}s`}function eA(e){let t,s,a,r,l,o,c,d,m,u,p,h=(0,i.c)(19),{maxVal:x,labelWidth:g,height:f,scale:b,offset:y}=e,v=(p=u=Math.pow(10,Math.floor(Math.log10(m=x/b/10))),m>=2*u&&(p=2*u),m>=5*u&&(p=5*u),p),j=Math.floor(x/v),_=v/x*100*b;if(h[0]!==f||h[1]!==v||h[2]!==j||h[3]!==_){t=[];for(let e=0;e<j;e++)t.push((0,n.jsx)("div",{style:{height:f,width:1,marginRight:-1,marginLeft:0===e?0:`${_.toFixed(6)}%`,background:"var(--color-border-muted)"},children:(0,n.jsx)("div",{className:"ms-2 fs-8.5",children:eC(e*v)})},e));h[0]=f,h[1]=v,h[2]=j,h[3]=_,h[4]=t}else t=h[4];h[5]===Symbol.for("react.memo_cache_sentinel")?(s={position:"sticky",top:0,height:24,paddingTop:4,zIndex:200,pointerEvents:"none",background:"var(--color-bg-body)"},a=ef()("d-flex align-items-center"),h[5]=s,h[6]=a):(s=h[5],a=h[6]),h[7]!==g?(r=(0,n.jsx)("div",{style:{width:g,minWidth:g}}),h[7]=g,h[8]=r):r=h[8];let S=-1*y*b;h[9]!==S?(l=S.toFixed(6),h[9]=S,h[10]=l):l=h[10];let w=`${l}%`;return h[11]!==w?(o=(0,n.jsx)("div",{style:{marginRight:w}}),h[11]=w,h[12]=o):o=h[12],h[13]!==o||h[14]!==t?(c=(0,n.jsxs)("div",{className:"d-flex w-100 overflow-hidden",children:[o,t]}),h[13]=o,h[14]=t,h[15]=c):c=h[15],h[16]!==r||h[17]!==c?(d=(0,n.jsx)("div",{style:s,children:(0,n.jsxs)("div",{className:`${a}`,children:[r,c]})}),h[16]=r,h[17]=c,h[18]=d):d=h[18],d}function eT(e){let t,s,a,r,l,o,c,d,m,u=(0,i.c)(24),{xPerc:p,overlay:h,labelWidth:x,color:g,height:f}=e,b=Math.min(Math.max(100*p,-1),100);u[0]!==b?(t=b.toFixed(6),u[0]=b,u[1]=t):t=u[1];let y=`${t}%`,v=p<=0?"none":"block";return u[2]!==v?(s={position:"sticky",top:0,height:0,zIndex:250,pointerEvents:"none",display:v},u[2]=v,u[3]=s):s=u[3],u[4]!==x?(a=(0,n.jsx)("div",{style:{width:x,minWidth:x}}),u[4]=x,u[5]=a):a=u[5],u[6]!==y?(r={marginLeft:y},u[6]=y,u[7]=r):r=u[7],u[8]!==h||u[9]!==p?(l=null!=h&&(0,n.jsx)("div",{style:{height:0,marginLeft:p<.5?12:-150,top:12,position:"relative"},children:(0,n.jsx)("div",{children:(0,n.jsx)("span",{className:"p-2 rounded border",style:{background:"var(--color-bg-surface)"},children:h})})}),u[8]=h,u[9]=p,u[10]=l):l=u[10],u[11]!==g||u[12]!==f?(o=(0,n.jsx)("div",{style:{height:f,width:1,background:g}}),u[11]=g,u[12]=f,u[13]=o):o=u[13],u[14]!==r||u[15]!==l||u[16]!==o?(c=(0,n.jsx)("div",{className:"w-100 overflow-hidden",children:(0,n.jsxs)("div",{style:r,children:[l,o]})}),u[14]=r,u[15]=l,u[16]=o,u[17]=c):c=u[17],u[18]!==a||u[19]!==c?(d=(0,n.jsxs)("div",{className:"d-flex",children:[a,c]}),u[18]=a,u[19]=c,u[20]=d):d=u[20],u[21]!==d||u[22]!==s?(m=(0,n.jsx)("div",{style:s,children:d}),u[21]=d,u[22]=s,u[23]=m):m=u[23],m}function e$(e){let t,s,a,r=(0,i.c)(11),{containerRef:o,maxVal:c,labelWidth:d,height:m,scale:u,offset:p,xPerc:h,setXPerc:x}=e,[g,f]=(0,l.useState)(!1);r[0]!==o||r[1]!==d||r[2]!==x?(t=()=>{let e=t=>{if(null!=o.current){let s=o.current,a=s.getBoundingClientRect(),r=(t.clientX-a.left-d)/(s.clientWidth-d);null!=e&&x(r)}},t=()=>f(!0),s=()=>f(!1),a=o.current;return a?.addEventListener("mousemove",e),a?.addEventListener("mouseleave",s),a?.addEventListener("mouseenter",t),()=>{a?.removeEventListener("mousemove",e),a?.removeEventListener("mouseleave",s),a?.removeEventListener("mouseenter",t)}},s=[o,d,x],r[0]=o,r[1]=d,r[2]=x,r[3]=t,r[4]=s):(t=r[3],s=r[4]),(0,l.useEffect)(t,s);let b=(p/100+Math.max(h,0)/u)*c;return r[5]!==b||r[6]!==m||r[7]!==d||r[8]!==g||r[9]!==h?(a=g?(0,n.jsx)(eT,{xPerc:Math.max(h,0),overlay:eC(Math.max(b,0)),height:m,labelWidth:d,color:"var(--color-bg-neutral)"}):null,r[5]=b,r[6]=m,r[7]=d,r[8]=g,r[9]=h,r[10]=a):a=r[10],a}function eI({rows:e,cursors:t,rowHeight:s,onMouseMove:a,onEventClick:r,labelWidth:i,className:o,style:c,onClick:d,scale:m=1,setScale:u=()=>{},initialScrollRowIndex:p,scaleWithScroll:h=!1}){let[x,g]=(0,l.useState)(0),f=(0,ej.ZC)(m),b=i/window.innerWidth*100,{size:y,startResize:j}=(0,v.A)(b,"left"),_=y/100*window.innerWidth,S=(0,l.useRef)(null),w=(e,t)=>{if(null!=S.current&&null!=t){let s=S.current,a=s.getBoundingClientRect(),r=e.clientX-a.left;e.clientY,a.top,t(Math.max((x/100+(r-_)/(s.clientWidth-_)/m)*A))}},E=(0,l.useMemo)(()=>({onDrag:e=>{g(t=>Math.min(Math.max(t-e.movementX*(.125/m),0),100-100/m))}}),[m,g]);(0,ej.i3)(S,E);let[k,N]=(0,l.useState)(0),C=e=>{h&&(e.preventDefault(),u(t=>Math.max(t-.001*e.deltaY,1)))};(0,l.useEffect)(()=>{null!=f&&f!=m&&g(e=>{let t=Math.max(Math.min(k,1),0);return Math.min(Math.max(e+100*t/f-100*t/m,0),100-100/m)})},[m,f,k]),(0,l.useEffect)(()=>{let e=S.current;if(null!=e)return e.addEventListener("wheel",C,{passive:!1}),()=>{e.removeEventListener("wheel",C)}});let A=(0,l.useMemo)(()=>{let t=0;for(let s of e??[])for(let e of s.events)t=Math.max(t,e.end);return 1.1*t},[e]),T=(0,ey.Te)({count:e?.length??0,getScrollElement:()=>S.current,estimateSize:()=>s,overscan:5}),$=T.getVirtualItems(),[I,L]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{null!=p&&!I&&p>=0&&(L(!0),T.scrollToIndex(p,{align:"center"}))},[p,I,T]),(0,n.jsxs)("div",{style:{position:"relative",...c},className:o,ref:S,onClick:e=>{w(e,d)},onMouseMove:e=>{w(e,a)},children:[(t??[]).map(e=>{let t=(e.start/A-x/100)*m;return(0,n.jsx)(eT,{xPerc:t,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,color:e.color},e.id)}),(0,n.jsx)(e$,{containerRef:S,maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,scale:m,offset:x,xPerc:k,setXPerc:N}),(0,n.jsx)(eA,{maxVal:A,height:S.current?.getBoundingClientRect().height??300,labelWidth:_,scale:m,offset:x}),(0,n.jsx)("div",{style:{height:`${T.getTotalSize()+32}px`,width:"100%",position:"relative"},children:(0,n.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${$?.[0]?.start??0}px)`},children:T.getVirtualItems().map(t=>{let a=e?.[t.index];return(0,n.jsxs)("div",{onClick:()=>r?.(a),"data-index":t.index,ref:T.measureElement,className:`${ef()("d-flex align-items-center overflow-hidden",a.className,eE().timelineRow,a.isActive&&eE().timelineRowActive)}`,style:{...a.style},children:[(0,n.jsxs)("div",{className:eE().labelContainer,style:{width:_,minWidth:_},children:[a.label,(0,n.jsx)("div",{className:eS().resizeHandle,onMouseDown:j,style:{backgroundColor:"var(--color-bg-neutral)"}})]}),(0,n.jsx)(eN,{events:a.events,height:s,maxVal:A,eventStyles:e=>({borderRadius:2,fontSize:.5*s,backgroundColor:e.isError?"var(--color-bg-danger)":"var(--color-bg-inverted)",color:"var(--color-text-inverted)"}),scale:m,offset:x})]},t.index)})})})]})}function eL(e){let[t,s]=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{style:{color:"var(--color-text-primary)"},children:[t,":"]})," ",String(s).length>50?String(s).substring(0,50)+"...":String(s)]},t)}function eR(e){return e.stopPropagation()}function ez(e){return e.stopPropagation()}function eM(){}var eD=s(59017),eP=s(66773),eV=s.n(eP);function eF(e){let t,s,a=(0,i.c)(6),{config:r,dateRangeStartInclusive:n,dateRange:l,enabled:o}=e;a[0]!==r||a[1]!==l||a[2]!==n?(t={...r,dateRange:l,dateRangeStartInclusive:n},a[0]=r,a[1]=l,a[2]=n,a[3]=t):t=a[3];let c=t;return a[4]!==o?(s={enabled:o},a[4]=o,a[5]=s):s=a[5],(0,eh.A)(c,s)}function eO(e){let t,s,a,r,n,l,o,c,d=(0,i.c)(32),{tableSource:m,focusDate:u,dateRange:p,traceId:x,enabled:g,hiddenRowExpression:f}=e;d[0]!==f||d[1]!==m||d[2]!==x?(t=function(e,t,s){let a={Body:e?.kind===h.GL.Trace?(0,S.pM)(e)??"":e?.kind===h.GL.Log?(0,S.N8)(e)??"":"",Timestamp:(0,S.xg)(e),Duration:e.durationExpression?(0,S.kg)(e):"",TraceId:e.traceIdExpression??"",SpanId:e.spanIdExpression??"",ParentSpanId:e.parentSpanIdExpression??"",StatusCode:e.statusCodeExpression??"",ServiceName:e.serviceNameExpression??"",SeverityText:e.severityTextExpression??"",SpanAttributes:e.eventAttributesExpression??"",SpanEvents:e.spanEventsValueExpression??""};if(e.highlightedTraceAttributeExpressions)for(let t of e.highlightedTraceAttributeExpressions)t.alias&&(a[t.alias]=t.sqlExpression);let r=[{valueExpression:a.Body,alias:"Body"},{valueExpression:a.Timestamp,alias:"Timestamp"},{valueExpression:a.SpanId,alias:"SpanId"},...a.ServiceName?[{valueExpression:a.ServiceName,alias:"ServiceName"}]:[],...s?[{valueExpression:s,valueExpressionLanguage:"lucene",alias:"__hdx_hidden"}]:[]];return(e.kind===h.GL.Trace||e.kind===h.GL.Log)&&r.push(...(0,E.z4)(e.highlightedTraceAttributeExpressions)),s&&(a.__hdx_hidden=s),e.kind===h.GL.Trace?r.push({valueExpression:a.Duration,alias:"Duration"},{valueExpression:a.ParentSpanId,alias:"ParentSpanId"},...a.StatusCode?[{valueExpression:a.StatusCode,alias:"StatusCode"}]:[],...a.SpanAttributes?[{valueExpression:a.SpanAttributes,alias:"SpanAttributes"}]:[],...a.SpanEvents?[{valueExpression:a.SpanEvents,alias:"SpanEvents"}]:[]):e.kind===h.GL.Log&&r.push(...a.SeverityText?[{valueExpression:a.SeverityText,alias:"SeverityText"}]:[]),{config:{select:r,from:e.from,timestampValueExpression:e.timestampValueExpression,where:`${a.TraceId} = '${t}'`,limit:{limit:5e4},connection:e.connection},alias:a,type:e.kind}}(m,x,f),d[0]=f,d[1]=m,d[2]=x,d[3]=t):t=d[3];let{config:b,alias:y,type:v}=t;d[4]!==p[0]||d[5]!==u?(s=[p[0],u],d[4]=p[0],d[5]=u,d[6]=s):s=d[6],d[7]!==b||d[8]!==g||d[9]!==s?(a={config:b,dateRangeStartInclusive:!0,dateRange:s,enabled:g},d[7]=b,d[8]=g,d[9]=s,d[10]=a):a=d[10];let{data:j,isFetching:_,error:w}=eF(a);d[11]!==p[1]||d[12]!==u?(r=[u,p[1]],d[11]=p[1],d[12]=u,d[13]=r):r=d[13],d[14]!==b||d[15]!==g||d[16]!==r?(n={config:b,dateRangeStartInclusive:!1,dateRange:r,enabled:g},d[14]=b,d[15]=g,d[16]=r,d[17]=n):n=d[17];let{data:k,isFetching:N,error:C}=eF(n),A=_||N,T=j?.meta??k?.meta,$=w||C;d[18]!==y||d[19]!==T?(l={meta:T,aliasMap:y},d[18]=y,d[19]=T,d[20]=l):l=d[20];let I=(0,ex.Ay)(l);e:{let e;if(!T||0===T.length){let e;d[21]===Symbol.for("react.memo_cache_sentinel")?(e=[],d[21]=e):e=d[21],o=e;break e}d[22]!==k?.data||d[23]!==j?.data||d[24]!==I||d[25]!==v?(e=[...j?.data??[],...k?.data??[]].map(e=>{let t=I((0,Y.omit)(e,["SpanAttributes","SpanEvents","__hdx_hidden"]));return{...e,SpanId:e?.SpanId,__hdx_hidden:e?.__hdx_hidden,type:v,id:t.where,aliasWith:[]}}),d[22]=k?.data,d[23]=j?.data,d[24]=I,d[25]=v,d[26]=e):e=d[26],o=e}let L=o;return d[27]!==$||d[28]!==A||d[29]!==T||d[30]!==L?(c={rows:L,meta:T,isFetching:A,error:$},d[27]=$,d[28]=A,d[29]=T,d[30]=L,d[31]=c):c=d[31],c}function eH({traceTableSource:e,logTableSource:t,traceId:s,dateRange:a,focusDate:r,onClick:i,highlightedRowWhere:o,initialRowHighlightHint:c}){let{size:d,startResize:m}=(0,v.A)(30,"bottom"),u=(0,ev.a)(),{traceWhere:p,logWhere:g,clear:f,isFilterActive:b,isFilterExpanded:y,setIsFilterExpanded:_,onSubmit:S}=j({hasLogSource:!!t}),{control:w,handleSubmit:k,setValue:A}=(0,ee.mN)({defaultValues:{traceWhere:p??"",logWhere:g??""}}),T=(0,l.useCallback)(()=>{A("traceWhere",""),A("logWhere",""),f()},[f,A]),{rows:$,isFetching:I,meta:L,error:R}=eO({tableSource:e,focusDate:r,dateRange:a,traceId:s,hiddenRowExpression:p?`NOT (${p})`:void 0,enabled:!0}),{rows:z,isFetching:M,meta:D,error:P}=eO({tableSource:t||e,focusDate:r,dateRange:t?a:[a[1],a[0]],traceId:s,hiddenRowExpression:g?`NOT (${g})`:void 0,enabled:!!t}),V=I||M,F=R||P,O=(0,l.useMemo)(()=>[...$,...z],[$,z]);O.sort((e,t)=>{let s=es().fromString(e.Timestamp),a=es().fromString(t.Timestamp),r=s.getTimeT()-a.getTimeT();return 0===r?s.getNano()-a.getNano():r});let H=(0,l.useMemo)(()=>{let s=$?.filter(e=>!e.__hdx_hidden),a=(0,E.N4)(e,e.highlightedTraceAttributeExpressions,s,L);if(t&&z&&D){let e=z?.filter(e=>!e.__hdx_hidden);a.push(...(0,E.N4)(t,t.highlightedTraceAttributeExpressions,e,D))}return a.sort((e,t)=>e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value))},[e,$,L,t,z,D]);(0,l.useEffect)(()=>{if(c&&i&&null==o){let e=O.findIndex(e=>e.Timestamp===c.timestamp&&e.SpanId===c.spanId&&e.Body===c.body);-1!==e&&i?.({id:O[e].id,type:O[e].type??"",aliasWith:O[e].aliasWith})}},[c,O,i,o]);let W=(0,l.useMemo)(()=>new Set($?.filter(e=>Q().isString(e.SpanId)&&e.SpanId.length>0).map(e=>e.SpanId)??[]),[$]),B=[],X=new Map,Z=new Map;for(let e of O??[]){let{type:t,SpanId:s,ParentSpanId:a}=e;if(!s)continue;let r=t===h.GL.Log?`${s}-log`:s,n=t===h.GL.Log?s:a||"",i={...e,children:[]};if(t===h.GL.Trace){if(!Z.has(r)){Z.set(r,e.id);let t=`placeholder-${r}`,s=X.get(t);s&&(i.children=s.children||[],X.delete(t))}X.set(e.id,i)}if(t!==h.GL.Trace||n&&W.has(n)){let e=Z.get(n),t=e?X.get(e):void 0;if(!t){let e=`placeholder-${n}`;(t=X.get(e))||(t={children:[]},X.set(e,t))}t.children.push(i)}else B.push(i)}let[q,J]=(0,l.useState)(new Set),[G,U]=(0,l.useState)(!0),K=(0,l.useCallback)(e=>{J(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[J]),Y=(e,t,s=0)=>{e.__hdx_hidden||t.push({level:s,...e}),q.has(e.id)||e?.children?.forEach(e=>Y(e,t,s+1))},et=[];B.length>0&&B.forEach(e=>Y(e,et));let eh=et.length,ex=et.filter(e=>"Error"===e.StatusCode||e.SeverityText?.toLowerCase()==="error").length,eg=`${eh} span${1!==eh?"s":""}`,ef=`${ex} error${1!==ex?"s":""}`,eb=O?.reduce((e,t)=>Math.min(e,new Date(t.Timestamp).getTime()),Number.MAX_SAFE_INTEGER)??0,ey=eb===Number.MAX_SAFE_INTEGER?0:eb,e_=et.map((e,t)=>{let s=1e3*(e.Duration||0),a=new Date(e.Timestamp).getTime(),r=a-ey,l=r+s,{Body:c,ServiceName:d,id:m,type:p,aliasWith:x}=e,g=`${c}`;try{g="string"==typeof c?c:JSON.stringify(c)}catch(e){console.warn("DBTraceWaterfallChart: Couldn't JSON stringify Body",e)}let f=e.SpanAttributes||{},y=f["http.url"]||f["http.method"],v=f["http.url"],j=y&&v?`${g} ${v}`:g,_=G&&e.SpanEvents?e.SpanEvents.map(e=>({timestamp:new Date(e.Timestamp).getTime()-ey,name:e.Name,attributes:e.Attributes||{}})):[],S="Error"==e.StatusCode||"error"===e.SeverityText,w=e.StatusCode||e.SeverityText,E="warn"===e.SeverityText,k=o===m;return{id:m,type:p,aliasWith:x,label:(0,n.jsx)("div",{className:`${function(e){let{isError:t,isWarn:s}=e;return t?"text-danger":s?"text-warning":""}({isError:S,isWarn:E})} ${k&&eV().traceTimelineLabelHighlighted} text-truncate cursor-pointer ps-2 ${eV().traceTimelineLabel}`,role:"button",onClick:()=>{i?.({id:m,type:p??"",aliasWith:x})},children:(0,n.jsxs)("div",{className:"d-flex align-items-center",style:{height:24},children:[Array.from({length:e.level}).map((e,t)=>(0,n.jsx)("div",{style:{borderLeft:"1px solid var(--color-border)",marginLeft:7,width:8,minWidth:8,maxWidth:8,flexGrow:1,flexShrink:0,height:"100%"}},t)),(0,n.jsxs)(er.o,{style:{opacity:+(e.children.length>0)},onClick:()=>{K(m)},children:[q.has(m)?(0,n.jsx)(ec.A,{size:16,className:"me-1 text-muted-hover"}):(0,n.jsx)(ed.A,{size:16,className:"me-1 text-muted-hover"})," "]}),!b&&(0,n.jsx)(C.E,{span:!0,size:"xxs",me:"xs",pt:"2px",children:e.children.length>0?`(${e.children.length})`:""}),(0,n.jsxs)(N.Y,{gap:0,wrap:"nowrap",children:[p===h.GL.Log?(0,n.jsx)(em.A,{size:14,className:"align-middle me-2","aria-label":"Correlated Log Line"}):null,(0,n.jsxs)(C.E,{size:"xxs",truncate:"end",span:!0,title:`${d}${y&&v?` | ${j}`:""}`,role:"button",children:[d?`${d} | `:"",j]})]})]})}),style:{marginTop:32*(0===t)},isActive:k,events:[{id:m,type:p,aliasWith:x,start:r,end:l,tooltip:`${j} ${s>=0?`took ${s.toFixed(4)}ms`:""} ${w?`| Status: ${w}`:""}${!isNaN(a)?` | Started at ${u(new Date(a),{format:"withMs"})}`:""}`,color:function(e){let{isError:t,isWarn:s,isHighlighted:a}=e;return t?a?(0,ej.sS)():(0,ej.cM)():s?a?(0,ej.qS)():(0,ej.AD)():a?"#A9AFB7":"#6A7077"}({isError:S,isWarn:E,isHighlighted:k}),body:(0,n.jsx)("span",{children:j}),minWidthPerc:1,isError:S,markers:_}]}}),ew=et.findIndex(e=>e.id===o),eE=d/100*window.innerHeight;return(0,n.jsxs)(n.Fragment,{children:[y&&(0,n.jsx)("form",{onSubmit:k(S),children:(0,n.jsxs)(x.a,{style:{display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",gap:"12px"},children:[(0,n.jsx)(C.E,{size:"xs",children:"Spans filter"}),(0,n.jsx)(ep.A,{tableConnection:(0,ea.VO)(e),placeholder:'Search trace spans w/ Lucene ex. StatusCode:"Error"',language:"lucene",name:"traceWhere",control:w,size:"xs",onSubmit:k(S),"data-testid":"trace-search-input"}),t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.E,{size:"xs",children:"Logs filter"}),(0,n.jsx)(ep.A,{tableConnection:(0,ea.VO)(t),placeholder:'Search trace logs w/ Lucene ex. SeverityText:"error"',language:"lucene",name:"logWhere",control:w,size:"xs",onSubmit:k(S),"data-testid":"log-search-input"})]})]})}),(0,n.jsxs)(N.Y,{my:"xs",justify:"space-between",children:[(0,n.jsxs)(N.Y,{gap:"md",children:[(0,n.jsxs)(C.E,{size:"xs",children:[eg,","," ",(0,n.jsx)("span",{className:ex?"text-danger":"",children:ef})]}),(0,n.jsx)(en.S,{size:"xs",label:"Show span events",checked:G,onChange:()=>U(!G)})]}),(0,n.jsxs)("span",{children:[(0,n.jsxs)(ei.M,{underline:"always",onClick:()=>_(e=>!e),size:"xs",children:[y?"Hide Filters":"Show Filters"," ",b&&"(active)"]}),b&&(0,n.jsx)(ei.M,{underline:"always",onClick:T,size:"xs",ms:"xs",children:"Clear Filters"})]})]}),!V&&!F&&(0,n.jsx)(eD.V,{attributes:H}),(0,n.jsx)("div",{style:{position:"relative",overflow:"hidden",maxHeight:`${eE}px`},children:V?(0,n.jsx)("div",{className:"my-3",children:"Loading Traces..."}):F?(0,n.jsxs)(x.a,{mt:"lg",children:[(0,n.jsx)(C.E,{my:"sm",size:"sm",children:"An error occurred while fetching trace data:"}),(0,n.jsx)(el.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:F.message})]}):null==O?(0,n.jsxs)("div",{children:["An unknown error occurred. ",(0,n.jsx)(eu.z,{})]}):0===et.length?(0,n.jsx)("div",{className:"my-3",children:"No matching spans or logs found"}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(eI,{style:{overflowY:"auto",maxHeight:`${eE}px`},scale:1,setScale:()=>{},rowHeight:22,labelWidth:300,onClick:e=>{},onEventClick:e=>{i?.({id:e.id,type:e.type??"",aliasWith:e.aliasWith??[]})},cursors:[],rows:e_,initialScrollRowIndex:ew})})}),(0,n.jsx)(eo.c,{mt:"md",className:eS().resizeYHandle,onMouseDown:m,style:{position:"relative",bottom:0}})]})}let eW=e=>{let t,s,a,r=(0,i.c)(13),{traceSourceId:l,rumSessionId:o,dateRange:c,focusDate:d,serviceName:m,setSubDrawerOpen:u}=e;r[0]!==l?(t={id:l},r[0]=l,r[1]=t):t=r[1];let{data:p}=(0,S.Fo)(t),h=p?.sessionSourceId;r[2]!==h?(s={id:h},r[2]=h,r[3]=s):s=r[3];let{data:x,isLoading:g}=(0,S.Fo)(s);if(!p||!x&&g){let e;return r[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(G.a,{}),r[4]=e):e=r[4],e}return r[5]!==c||r[6]!==d||r[7]!==o||r[8]!==m||r[9]!==x||r[10]!==u||r[11]!==p?(a=(0,n.jsx)(n.Fragment,{children:x?o&&p?(0,n.jsx)(K.A,{start:c[0],end:c[1],traceSource:p,session:{serviceName:m},sessionSource:x,rumSessionId:o,setDrawerOpen:u,initialTs:d.getTime()}):(0,n.jsx)("span",{className:"p-3 text-muted",children:"Session ID not found."}):(0,n.jsxs)("div",{className:"m-2 fs-8 p-4",children:["No correlated session source found.",(0,n.jsx)("br",{}),"Go to ",(0,n.jsx)(J(),{href:"/team#sources",children:"Team Settings"})," and update the"," ",(0,n.jsx)("strong",{children:p?.name})," source to include the correlated session source."]})}),r[5]=c,r[6]=d,r[7]=o,r[8]=m,r[9]=x,r[10]=u,r[11]=p,r[12]=a):a=r[12],a};function eB(e){return null===e.parentSpanId&&e.rumSessionId}function eX(e){return e.rumSessionId}var eZ=s(25062),eq=s(22623),eJ=s(6892),eG=s(46466),eU=s(57478),eK=((a=eK||{}).Overview="overview",a.Parsed="parsed",a);function eY(e){let t,s,a,r,o,c,d,u,p,x,f,y,v,j,_,E,k,A,T,$,I,L,R,z=(0,i.c)(74),{childSourceId:M,traceId:D,dateRange:P,focusDate:V,parentSourceId:F,initialRowHighlightHint:O,"data-testid":H}=e;z[0]!==M?(t={defaultValues:{source:M}},z[0]=M,z[1]=t):t=z[1];let{control:W}=(0,ee.mN)(t);z[2]!==W?(s={control:W,name:"source"},z[2]=W,z[3]=s):s=z[3];let B=(0,ee.FH)(s);z[4]!==B?(a={id:B},z[4]=B,z[5]=a):a=z[5];let{data:q,isLoading:J}=(0,S.Fo)(a);z[6]!==F?(r={id:F},z[6]=F,z[7]=r):r=z[7];let{data:G,isLoading:U}=(0,S.Fo)(r),K=G?.kind===h.GL.Log?G:q?.kind===h.GL.Log?q:null,Y=G?.kind===h.GL.Trace?G:q?.kind===h.GL.Trace?q:null;q?.kind===h.GL.Trace||(G?.kind,h.GL.Trace);let{mutate:Q}=(0,S.sr)();z[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.os)(),z[8]=o):o=z[8];let[et,es]=(0,m.ZA)("eventRowWhere",o),en=G?.traceIdExpression??"";z[9]!==en?(c={defaultValues:{traceIdExpression:en}},z[9]=en,z[10]=c):c=z[10];let{control:ei,handleSubmit:el,setValue:ec}=(0,ee.mN)(c);z[11]!==G||z[12]!==ec?(d=()=>{G?.traceIdExpression&&ec("traceIdExpression",G.traceIdExpression)},z[11]=G,z[12]=ec,z[13]=d):d=z[13];let ed=G?.traceIdExpression;z[14]!==ed||z[15]!==ec?(u=[ed,ec],z[14]=ed,z[15]=ec,z[16]=u):u=z[16],(0,l.useEffect)(d,u);let[em,eu]=(0,l.useState)(!1);z[17]!==es?(p=()=>()=>{es(null)},z[17]=es,z[18]=p):p=z[18],z[19]!==es||z[20]!==D?(x=[D,es],z[19]=es,z[20]=D,z[21]=x):x=z[21],(0,l.useEffect)(p,x);let[ep,eh]=(0,l.useState)("overview"),ex=G?.traceIdExpression,eg=D||"No trace id found for event";z[22]!==ex||z[23]!==eg?(f=(0,n.jsxs)(C.E,{size:"xs",me:"xs",children:[ex,":"," ",eg]}),z[22]=ex,z[23]=eg,z[24]=f):f=z[24],z[25]!==D?(y=null!=D&&(0,n.jsx)(eZ.$,{variant:"subtle",size:"xs",onClick:()=>eu(eQ),children:(0,n.jsx)(eJ.A,{size:14})}),z[25]=D,z[26]=y):y=z[26],z[27]!==f||z[28]!==y?(v=(0,n.jsxs)(g.s,{align:"center",children:[f,y]}),z[27]=f,z[28]=y,z[29]=v):v=z[29];let ef=G?.kind===h.GL.Log?"Trace Source":"Correlated Log Source";return z[30]!==ef?(j=(0,n.jsx)(C.E,{size:"sm",children:ef}),z[30]=ef,z[31]=j):j=z[31],z[32]!==W?(_=(0,n.jsx)(eU.W,{control:W,name:"source",size:"xs"}),z[32]=W,z[33]=_):_=z[33],z[34]!==j||z[35]!==_?(E=(0,n.jsxs)(N.Y,{gap:"sm",children:[j,_]}),z[34]=j,z[35]=_,z[36]=E):E=z[36],z[37]!==v||z[38]!==E?(k=(0,n.jsxs)(g.s,{align:"center",justify:"space-between",mb:"sm",children:[v,E]}),z[37]=v,z[38]=E,z[39]=k):k=z[39],z[40]!==G||z[41]!==F||z[42]!==em||z[43]!==D||z[44]!==ei||z[45]!==el||z[46]!==Q?(A=(em||!D)&&null!=F&&(0,n.jsxs)(b.B,{gap:"xs",children:[(0,n.jsx)(C.E,{size:"xs",children:"Trace ID Expression"}),(0,n.jsxs)(g.s,{align:"center",children:[(0,n.jsx)(eG.Z,{tableConnection:(0,ea.VO)(G),name:"traceIdExpression",placeholder:"Log Trace ID Column (ex. trace_id)",control:ei,size:"xs",parentRef:"u">typeof document?document.body:null}),(0,n.jsx)(eZ.$,{ms:"sm",variant:"primary",onClick:el(e=>{let{traceIdExpression:t}=e;null!=G&&Q({source:{...G,traceIdExpression:t}})}),size:"xs",children:"Save"}),(0,n.jsx)(eZ.$,{ms:"sm",variant:"secondary",onClick:()=>eu(!1),size:"xs",children:"Cancel"})]})]}),z[40]=G,z[41]=F,z[42]=em,z[43]=D,z[44]=ei,z[45]=el,z[46]=Q,z[47]=A):A=z[47],z[48]===Symbol.for("react.memo_cache_sentinel")?(T=(0,n.jsx)(eo.c,{my:"sm"}),z[48]=T):T=z[48],z[49]!==P||z[50]!==et?.id||z[51]!==V||z[52]!==O||z[53]!==K||z[54]!==es||z[55]!==D||z[56]!==Y?($=Y?.kind===h.GL.Trace&&D&&(0,n.jsx)(eH,{traceTableSource:Y,logTableSource:K,traceId:D,dateRange:P,focusDate:V,highlightedRowWhere:et?.id,onClick:es,initialRowHighlightHint:O}),z[49]=P,z[50]=et?.id,z[51]=V,z[52]=O,z[53]=K,z[54]=es,z[55]=D,z[56]=Y,z[57]=$):$=z[57],z[58]!==ep||z[59]!==et||z[60]!==K||z[61]!==Y?(I=null!=Y&&null!=et&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.E,{size:"sm",my:"sm",children:"Event Details"}),(0,n.jsx)(w.A,{className:"fs-8 mt-2",items:[{text:"Overview",value:"overview"},{text:"Column Values",value:"parsed"}],activeItem:ep,onClick:e=>eh(e)}),"overview"===ep&&(0,n.jsx)(Z.W,{source:et?.type===h.GL.Log&&K?K:Y,rowId:et?.id,aliasWith:et?.aliasWith}),"parsed"===ep&&(0,n.jsx)(X.dD,{source:et?.type===h.GL.Log&&K?K:Y,rowId:et?.id,aliasWith:et?.aliasWith})]}),z[58]=ep,z[59]=et,z[60]=K,z[61]=Y,z[62]=I):I=z[62],z[63]!==et||z[64]!==D||z[65]!==Y?(L=null!=Y&&!et&&D&&(0,n.jsx)(eq.t,{shadow:"xs",p:"xl",mt:"md",children:(0,n.jsx)(er.o,{mih:100,children:(0,n.jsx)(C.E,{size:"sm",children:"Please select a span above to view details."})})}),z[63]=et,z[64]=D,z[65]=Y,z[66]=L):L=z[66],z[67]!==H||z[68]!==k||z[69]!==A||z[70]!==$||z[71]!==I||z[72]!==L?(R=(0,n.jsxs)("div",{"data-testid":H,children:[k,A,T,$,I,L]}),z[67]=H,z[68]=k,z[69]=A,z[70]=$,z[71]=I,z[72]=L,z[73]=R):R=z[73],R}function eQ(e){return!e}let e0=(0,l.createContext)({});var e1=((r=e1||{}).Overview="overview",r.Parsed="parsed",r.Debug="debug",r.Trace="trace",r.ServiceMap="serviceMap",r.Context="context",r.Replay="replay",r.Infrastructure="infrastructure",r);let e2=({rowId:e,aliasWith:t,source:s,isNestedPanel:a=!1,setSubDrawerOpen:r,onClose:c,breadcrumbPath:p=[],onBreadcrumbClick:f})=>{let b,{data:v,isLoading:j,isSuccess:k}=(0,X.k1)({source:s,rowId:e,aliasWith:t}),{dbSqlRowTableConfig:N}=(0,l.useContext)(e0),C=(0,l.useCallback)(e=>{let t=p.length;if(t>e)c(),f?.(e);else{if(t===e)return;f?.(e)}},[p.length,f,c]),A=(0,l.useMemo)(()=>!!s.resourceAttributesExpression||!!s.eventAttributesExpression,[s.eventAttributesExpression,s.resourceAttributesExpression]),T="trace"===s.kind?"trace":A?"overview":"parsed",[L,R]=(0,m.ZA)("sidePanelTab",(0,m.Oq)(Object.values(e1)).withDefault(T)),[z,M]=(0,l.useState)(T),D=a?M:R,P=a?z:L,V=v?.data?.[0],F=V?.__hdx_timestamp;b=new Date("number"==typeof F?1e3*F:F);let O=(0,S.N8)(s),H=d()(V?.__hdx_body)?V.__hdx_body:V?.__hdx_body!==void 0?JSON.stringify(V.__hdx_body):void 0,W=V?.__hdx_severity_text,q=(0,l.useMemo)(()=>{let e=[];return(s.kind===h.GL.Trace||s.kind===h.GL.Log)&&s.highlightedRowAttributeExpressions&&e.push(...s.highlightedRowAttributeExpressions),s.serviceNameExpression&&e.push({sqlExpression:s.serviceNameExpression}),v?(0,E.N4)(s,e,v.data||[],v.meta||[]):[]},[s,v]),J=(0,l.useMemo)(()=>[(0,o.A)(b,{minutes:-60}),(0,o.A)(b,{minutes:60})],[b]),G=(0,l.useMemo)(()=>[(0,o.A)(b,{hours:-4}),(0,o.A)(b,{hours:4})],[b]),K=V?.__hdx_trace_id,Y="log"===s.kind?s.traceSourceId:"trace"===s.kind?s.logSourceId:void 0,Q="trace"===s.kind?s.id:s.traceSourceId,ee=K&&Q,{rumSessionId:et,rumServiceName:es}=(e=>{let t,s,a,r,n=(0,i.c)(42),{sourceId:l,traceId:o,dateRange:c,enabled:d}=e;n[0]!==l?(t={id:l},n[0]=l,n[1]=t):t=n[1];let{data:m}=(0,S.Fo)(t),{getFieldExpression:u}=(0,U.A)(m);e:{let e,t,a,r,i,l,c,d,p;if(!m||!o||!u){s=void 0;break e}let h=`${m.timestampValueExpression}`;n[2]!==h?(e={valueExpression:h,alias:"Timestamp"},n[2]=h,n[3]=e):e=n[3];let x=m.resourceAttributesExpression??"ResourceAttributes";n[4]!==u||n[5]!==x?(t=u(x,"rum.sessionId"),n[4]=u,n[5]=x,n[6]=t):t=n[6];let g=`${t}`;n[7]!==g?(a={valueExpression:g,alias:"rumSessionId"},n[7]=g,n[8]=a):a=n[8];let f=m.resourceAttributesExpression??"ResourceAttributes";n[9]!==u||n[10]!==f?(r=u(f,"service.name"),n[9]=u,n[10]=f,n[11]=r):r=n[11];let b=`${r}`;n[12]!==b?(i={valueExpression:b,alias:"serviceName"},n[12]=b,n[13]=i):i=n[13];let y=`${m.parentSpanIdExpression}`;n[14]!==y?(l={valueExpression:y,alias:"parentSpanId"},n[14]=y,n[15]=l):l=n[15],n[16]!==i||n[17]!==l||n[18]!==e||n[19]!==a?(c=[e,a,i,l],n[16]=i,n[17]=l,n[18]=e,n[19]=a,n[20]=c):c=n[20],n[21]===Symbol.for("react.memo_cache_sentinel")?(d={limit:1e4},n[21]=d):d=n[21];let v=`${m.traceIdExpression} = '${o}'`;n[22]!==m.connection||n[23]!==m.from||n[24]!==m.timestampValueExpression||n[25]!==c||n[26]!==v?(p={select:c,from:m.from,timestampValueExpression:m.timestampValueExpression,limit:d,connection:m.connection,where:v,whereLanguage:"sql"},n[22]=m.connection,n[23]=m.from,n[24]=m.timestampValueExpression,n[25]=c,n[26]=v,n[27]=p):p=n[27],s=p}let p=s,h=void 0!==d&&d&&!!m&&!!p;n[28]!==p||n[29]!==c||n[30]!==h?(a={config:p,dateRangeStartInclusive:!0,dateRange:c,enabled:h},n[28]=p,n[29]=c,n[30]=h,n[31]=a):a=n[31];let{data:x}=eF(a);t:{let e,t,s;n[32]!==x?.data?(e=x?.data||[],n[32]=x?.data,n[33]=e):e=n[33];let a=e;n[34]!==a?(t=a.find(eB),n[34]=a,n[35]=t):t=n[35];let i=t;if(!i){let e;n[36]!==a?(e=a.find(eX),n[36]=a,n[37]=e):e=n[37],i=e}if(i){let e;n[38]!==i.rumSessionId||n[39]!==i.serviceName?(e={rumServiceName:i.serviceName,rumSessionId:i.rumSessionId},n[38]=i.rumSessionId,n[39]=i.serviceName,n[40]=e):e=n[40],r=e;break t}n[41]===Symbol.for("react.memo_cache_sentinel")?(s={rumServiceName:void 0,rumSessionId:void 0},n[41]=s):s=n[41],r=s}return r})({sourceId:Q,traceId:K,dateRange:J,enabled:null!=e}),ea=(0,l.useMemo)(()=>{try{if(!s?.resourceAttributesExpression||!V)return!1;let e=V.__hdx_resource_attributes;return e?.["k8s.pod.uid"]!=null||e?.["k8s.node.name"]!=null}catch(e){return console.error(e),!1}},[s,V]),er=(0,l.useMemo)(()=>{if(V)return{timestamp:V.__hdx_timestamp,spanId:V.__hdx_span_id,body:V.__hdx_body}},[V]);return j?(0,n.jsx)("div",{className:eV().loadingState,children:"Loading..."}):k?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.a,{p:"sm",children:(0,n.jsx)(y.A,{date:b,attributes:q,mainContent:H,mainContentHeader:O,severityText:W,breadcrumbPath:p,onBreadcrumbClick:C})}),(0,n.jsx)(w.A,{"data-testid":"side-panel-tabs",className:"fs-8 mt-2",items:[...A?[{text:"Overview",value:"overview"}]:[],{text:"Column Values",value:"parsed"},{text:"Trace",value:"trace"},...ee?[{text:"Service Map",value:"serviceMap"}]:[],{text:"Surrounding Context",value:"context"},...null!=et?[{text:"Session Replay",value:"replay"}]:[],...ea?[{text:"Infrastructure",value:"infrastructure"}]:[]],activeItem:P,onClick:e=>D(e)}),"overview"===P&&(0,n.jsx)(u.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(Z.W,{"data-testid":"side-panel-tab-overview",source:s,rowId:e,aliasWith:t,hideHeader:!0})}),"trace"===P&&(0,n.jsx)(u.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,n.jsx)(eY,{"data-testid":"side-panel-tab-trace",parentSourceId:s.id,childSourceId:Y,traceId:K,dateRange:J,focusDate:b,initialRowHighlightHint:er})})}),"serviceMap"===P&&ee&&(0,n.jsx)(u.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(g.s,{p:"sm",flex:1,children:(0,n.jsx)($,{traceId:K,traceTableSourceId:Q,dateRange:J})})}),"parsed"===P&&(0,n.jsx)(u.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(X.dD,{"data-testid":"side-panel-tab-parsed",source:s,rowId:e,aliasWith:t})}),"context"===P&&(0,n.jsx)(u.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(I.A,{"data-testid":"side-panel-tab-context",source:s,dbSqlRowTableConfig:N,rowData:V,rowId:e,breadcrumbPath:p,onBreadcrumbClick:C})}),"replay"===P&&(0,n.jsx)(u.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)("div",{className:"overflow-hidden flex-grow-1",children:(0,n.jsx)(eW,{"data-testid":"side-panel-tab-replay",dateRange:G,focusDate:b,setSubDrawerOpen:r,traceSourceId:Q,serviceName:es,rumSessionId:et})})}),"infrastructure"===P&&(0,n.jsx)(u.ErrorBoundary,{onError:e=>{console.error(e)},fallbackRender:()=>(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),children:(0,n.jsx)(x.a,{style:{overflowY:"auto"},p:"sm",h:"100%",children:(0,n.jsx)(B,{"data-testid":"side-panel-tab-infrastructure",source:s,rowData:V,rowId:e})})}),(0,n.jsx)(_.ir,{})]}):(0,n.jsx)("div",{className:eV().loadingState,children:"Error loading row data"})};function e3(e){let t,s,a,r,o,c,d,h,g,b,y,_,S,w=(0,i.c)(39),{onClose:E,rowId:N,aliasWith:C,source:A,isNestedPanel:T,breadcrumbPath:$,onBreadcrumbClick:I}=e;w[0]!==$?(t=void 0===$?[]:$,w[0]=$,w[1]=t):t=w[1];let L=t,R=(0,k.Y)()+10,{size:z,startResize:M}=(0,v.A)(80),[D,P]=(0,l.useState)(!1);(0,l.useContext)(e0),w[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.Oq)(Object.values(e1)),w[2]=s):s=w[2];let[,V]=(0,m.ZA)("tab",s);w[3]===Symbol.for("react.memo_cache_sentinel")?(a={},w[3]=a):a=w[3];let{clear:F}=j(a);w[4]!==F||w[5]!==T||w[6]!==E||w[7]!==V?(r=()=>{T||V(null),F(),E()},w[4]=F,w[5]=T,w[6]=E,w[7]=V,w[8]=r):r=w[8];let O=r;w[9]===Symbol.for("react.memo_cache_sentinel")?(o=["esc"],w[9]=o):o=w[9];let H=!1===D;w[10]!==H?(c={enabled:H},w[10]=H,w[11]=c):c=w[11],(0,p.vC)(o,O,c);let W=null!=N,B=!T;w[12]!==O||w[13]!==D?(d=()=>{D||O()},w[12]=O,w[13]=D,w[14]=d):d=w[14];let X=`${z}vw`;return w[15]===Symbol.for("react.memo_cache_sentinel")?(h={body:{padding:"0",height:"100vh"}},w[15]=h):h=w[15],w[16]!==M?(g=(0,n.jsx)(x.a,{className:eV().panelDragBar,onMouseDown:M}),w[16]=M,w[17]=g):g=w[17],w[18]!==O||w[19]!==C||w[20]!==L||w[21]!==T||w[22]!==I||w[23]!==N||w[24]!==A?(b=(0,n.jsx)(u.ErrorBoundary,{fallbackRender:e4,children:(0,n.jsx)(e2,{source:A,rowId:N,aliasWith:C,onClose:O,isNestedPanel:T,breadcrumbPath:L,setSubDrawerOpen:P,onBreadcrumbClick:I})}),w[18]=O,w[19]=C,w[20]=L,w[21]=T,w[22]=I,w[23]=N,w[24]=A,w[25]=b):b=w[25],w[26]!==g||w[27]!==b?(y=(0,n.jsxs)("div",{className:eV().panel,"data-testid":"row-side-panel",children:[g,b]}),w[26]=g,w[27]=b,w[28]=y):y=w[28],w[29]!==R||w[30]!==y?(_=(0,n.jsx)(k.S.Provider,{value:R,children:y}),w[29]=R,w[30]=y,w[31]=_):_=w[31],w[32]!==R||w[33]!==B||w[34]!==d||w[35]!==X||w[36]!==_||w[37]!==W?(S=(0,n.jsx)(f._,{opened:W,withCloseButton:!1,withOverlay:B,onClose:d,position:"right",size:X,styles:h,zIndex:R,children:_}),w[32]=R,w[33]=B,w[34]=d,w[35]=X,w[36]=_,w[37]=W,w[38]=S):S=w[38],S}function e4(e){return(0,n.jsxs)(b.B,{children:[(0,n.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-7 font-monospace bg-danger-transparent p-4",children:"An error occurred while rendering this event."}),(0,n.jsx)("div",{className:"px-2 py-1 m-2 fs-7 font-monospace bg-body p-4",children:e?.error?.message})]})}},54167:(e,t,s)=>{"use strict";var a=s(31832);s(5062),s(75131),s(17769),a.N,a.M,a.P,t.oU=a.Q,a.O,a.L},57030:(e,t,s)=>{"use strict";s.d(t,{A:()=>eE});var a=s(6029),r=s(75155),n=s(55729),i=s(75828),l=s.n(i),o=s(47687),c=s.n(o),d=s(41038),m=s(1909),u=s(3145),p=s(95991),h=s(90124),x=s(63085),g=s(76013),f=s(3635),b=s(25062),y=s(92789),v=s(79621),j=s(10822),_=s(62118),S=s(97684),w=s(39614),E=s(81244),k=s(12853),N=s(50374),C=s(17273),A=s(40147),T=s(66692),$=s(86823),I=s(97039),L=s(61441),R=s(10708),z=s(56795),M=s(61411),D=s(81055),P=s(90515),V=s(45172),F=s(94502),O=s(80925),H=s(92917),W=s(81408),B=s.n(W);function X(e){return Math.max(e.getCurrentTime(),0)}let Z=(0,n.memo)(({url:e})=>{let t,s;try{t=new URL(e)}catch{}try{let e=new URLSearchParams(t?.search??"");for(let[t,a]of(s=[],e.entries()))s.push({key:t,value:a})}catch{}return(0,a.jsxs)(I.j,{shadow:"md",position:"bottom-start",children:[(0,a.jsx)(I.j.Target,{children:(0,a.jsx)("div",{className:B().playerHeaderUrl,children:e||"Session Player"})}),e&&(0,a.jsx)(I.j.Dropdown,{children:(0,a.jsxs)("table",{className:"table fs-8 mb-0",children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(R.A,{size:14})}),(0,a.jsx)("td",{children:t?.host})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(z.A,{size:14})}),(0,a.jsx)("td",{children:t?.pathname})]}),s&&s.length>0&&s.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)("strong",{children:e.key})}),(0,a.jsx)("td",{children:e.value})]},e.key))]})})]})});function q({config:{dateRange:e,serviceName:t,sessionId:s,sourceId:r},focus:i,setPlayerTime:o,playerState:d,setPlayerState:m,playerSpeed:u,skipInactive:p,setPlayerStartTimestamp:h,setPlayerEndTimestamp:x,setPlayerFullWidth:b,playerFullWidth:y,resizeKey:v,getSessionSourceFieldExpression:j}){let _=(0,H.uy)(),S=(0,n.useRef)(null),w=(0,n.useRef)(null),E=(0,n.useRef)(null),k=(0,n.useRef)([]),N=(0,n.useRef)(0),[C,A]=(0,n.useState)(0),I=(0,n.useRef)(c()(A,100,{leading:!0,trailing:!0})),[R,z]=(0,n.useState)(!1),[W,q]=(0,n.useState)(!1),J="",{isFetching:G,abort:U}=(0,O.S)({serviceName:t,sessionId:s,sourceId:r,startDate:e?.[0]??new Date,endDate:e?.[1]??new Date,limit:1e6,onEvent:e=>{try{let{b:t,ck:s,tcks:a}=e;if(J+=t,!s||s===a){let e=JSON.parse(J);null!=E.current?E.current.addEvent(e):(null!=h&&0===k.current.length&&h(e.timestamp),k.current.push(e)),I.current(e.timestamp),N.current=e.timestamp,J=""}}catch(e){_&&console.error(e),J=""}k.current.length>5&&z(!0)},onEnd:()=>{z(!0),q(!0),null!=x&&(null!=E.current?x(N.current??0):k.current.length>0&&x(k.current[k.current.length-1].timestamp??0))},getSessionSourceFieldExpression:j},{keepPreviousData:!0,shouldAbortPendingRequest:!0}),[K,Y]=(0,n.useState)(""),Q=(0,n.useCallback)(()=>{if(null!=E.current)try{E.current.play(X(E.current))}catch(e){console.error(e)}},[E]),ee=(0,n.useCallback)(e=>{if(null!=E.current)try{E.current.pause(e)}catch(e){console.error(e)}},[E]);(0,T.vC)(["space"],()=>{"playing"===d?m("paused"):"paused"===d&&m("playing")});let et=(0,n.useRef)(o);(0,n.useEffect)(()=>{et.current=o},[o]);let es=(0,n.useRef)(0),ea=(0,n.useCallback)(()=>{null!=E.current&&E.current.service.state.matches("playing")&&et.current(Math.round(E.current.getMetaData().startTime+X(E.current))),es.current=requestAnimationFrame(ea)},[]);(0,n.useEffect)(()=>(es.current=requestAnimationFrame(ea),()=>{cancelAnimationFrame(es.current)}),[ea]),(0,n.useEffect)(()=>{null!=E.current&&("playing"===d?Q():"paused"===d&&ee())},[d,Q,ee]),(0,n.useEffect)(()=>{null!=E.current&&("playing"===d?(ee(),E.current?.setConfig({speed:u,skipInactive:p}),Q()):"paused"===d&&E.current?.setConfig({speed:u,skipInactive:p}))},[d,u,p,ee,Q]);let er=(0,n.useCallback)(()=>{null!=S.current&&null!=w.current&&(w.current.style.transform="scale(0.0001)",window.requestAnimationFrame(()=>{if(null==S.current||null==w.current)return;let e=S.current.getBoundingClientRect(),t=E?.current?.iframe?.offsetWidth??1280,s=E?.current?.iframe?.offsetHeight??720,a=e.width/t,r=e.height/s;w.current.style.transform=`scale(${Math.min(a,r)})`}))},[S,w]);(0,n.useEffect)(()=>(window.addEventListener("resize",er),()=>window.removeEventListener("resize",er)),[er]),(0,n.useEffect)(()=>{er()},[v,er]);let[en,ei]=(0,n.useState)(!1);(0,n.useEffect)(()=>{k.current.length<2||null==w.current||null!=E.current||(E.current=new $.B(k.current,{root:w.current,mouseTail:!0,pauseAnimation:!1,showWarning:_,skipInactive:!0}),ei(!0),_&&(window.__hdx_replayer=E.current),E.current.enableInteract(),E.current.on("event-cast",e=>{try{(e?.type===3&&e?.data?.source===4||4===e.type)&&setTimeout(()=>{er()},0),e?.type===4&&Y(e.data.href)}catch(e){_&&console.error(e)}}),"playing"===d&&E.current.getMetaData().endTime>(i?.ts??0)&&(null!=i&&ee(i.ts-E.current.getMetaData().startTime),Q()),setTimeout(()=>{er()},0))},[er,i,ee,R,d,Q,_]),(0,n.useEffect)(()=>{R&&en&&!(C<(i?.ts?i.ts+1e3:1/0))&&i?.setBy!=="player"&&null!=E.current&&(ee(i?.ts==null?0:i?.ts-E.current.getMetaData().startTime),er(),"playing"===d&&Q())},[i,ee,m,d,Q,R,en,er,C]),(0,n.useEffect)(()=>()=>{null!=E.current&&(E.current?.destroy(),E.current=null),U()},[U]);let el=!1===R&&G,eo=!1===W&&(E.current?.getMetaData()?.endTime??0)<(i?.ts??0);return(0,n.useEffect)(()=>{null!=E.current&&null!=i&&E.current.getMetaData().endTime>i.ts&&"playing"===d&&E.current?.service?.state?.matches("paused")&&(ee(i.ts-E.current.getMetaData().startTime),Q())},[C,i,d,ee,Q]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:B().playerHeader,children:[(0,a.jsx)(g.M,{onClick:()=>b(!y),size:"sm",color:"gray",children:y?(0,a.jsx)(M.A,{size:14}):(0,a.jsx)(D.A,{size:14})}),(0,a.jsx)(L.i,{value:K,children:({copied:e,copy:t})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z,{url:K}),(0,a.jsx)(g.M,{onClick:t,title:"Copy URL",variant:"secondary",size:"sm",children:e?(0,a.jsx)(P.A,{size:14}):(0,a.jsx)(V.A,{size:14})})]})})]}),(0,a.jsxs)("div",{className:B().playerContainer,children:[el||eo?(0,a.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[(0,a.jsx)(F.A,{className:"spin-animate",size:14}),eo?"Buffering to time...":"Loading replay..."]}):W&&null==E.current?(0,a.jsx)("div",{className:"text-center",children:"No replay available for this session, most likely due to this session starting and ending in a background tab."}):null,(0,a.jsx)("div",{ref:S,className:l()(B().domPlayerWrapper,"overflow-hidden",{"d-none":el||eo,started:(E.current?.getCurrentTime()??0)>0,[B().domPlayerWrapperPaused]:"paused"===d}),children:(0,a.jsx)("div",{className:"player rr-block",ref:w})})]})]})}var J=s(831),G=s.n(J),U=s(4308),K=s(91021),Y=s(29766);let Q=Y.Ay.object({body:Y.Ay.string().nullish(),component:Y.Ay.string().nullish(),durationInMs:Y.Ay.number(),"error.message":Y.Ay.string().nullish(),"http.method":Y.Ay.string().nullish(),"http.status_code":Y.Ay.string().nullish(),"http.url":Y.Ay.string().nullish(),id:Y.Ay.string(),"location.href":Y.Ay.string().nullish(),"otel.library.name":Y.Ay.string(),parent_span_id:Y.Ay.string(),severity_text:Y.Ay.string(),span_id:Y.Ay.string(),span_name:Y.Ay.string(),timestamp:Y.Ay.string(),trace_id:Y.Ay.string(),type:Y.Ay.string().nullish()});var ee=s(9953),et=s(7565),es=s(2326),ea=s.n(es);let er=e=>{let t,s,i,l,o,c,d,m=(0,r.c)(28),{min:u,max:p,value:h,markers:g,playerState:f,onChange:b,setPlayerState:y}=e,v=(0,et.a)();m[0]!==v||m[1]!==u?(t=e=>{let t=Math.max(e-u,0),s=Math.floor(t/1e3/60),a=Math.floor(t/1e3%60),r=`${s}:${a<10?"0":""}${a}`,n=v(e,{format:"short"});return`${r} at ${n}`},m[0]=v,m[1]=u,m[2]=t):t=m[2];let j=t;m[3]!==g||m[4]!==p||m[5]!==u||m[6]!==b?(s=g?.map(e=>(0,a.jsx)(x.m,{color:e.isError?"red":"gray",label:(0,H.EJ)(e?.description??"",240,"...",/\n/),position:"top",withArrow:!0,children:(0,a.jsx)("div",{className:ea().markerDot,style:{backgroundColor:e.isSuccess?"var(--color-text-success)":e.isError?"var(--color-text-danger)":"var(--color-text-muted)",left:`${(e.ts-u)/(p-u)*100}%`},onClick:()=>b(e.ts)})},e.id)),m[3]=g,m[4]=p,m[5]=u,m[6]=b,m[7]=s):s=m[7];let _=s,[S,w]=n.useState(f);m[8]!==f||m[9]!==y?(i=()=>{w(f),y("paused")},m[8]=f,m[9]=y,m[10]=i):i=m[10];let E=i;m[11]!==S||m[12]!==y?(l=()=>{y(S)},m[11]=S,m[12]=y,m[13]=l):l=m[13];let k=l;m[14]!==_?(o=(0,a.jsx)("div",{className:ea().markers,children:_}),m[14]=_,m[15]=o):o=m[15];let N="playing"===f?"green":"gray",C=h||u;return m[16]!==E||m[17]!==k||m[18]!==p||m[19]!==u||m[20]!==b||m[21]!==N||m[22]!==C||m[23]!==j?(c=(0,a.jsx)(ee.A,{color:N,size:"sm",min:u,max:p,value:C,step:1e3,label:j,onChange:b,onMouseDown:E,onMouseUp:k}),m[16]=E,m[17]=k,m[18]=p,m[19]=u,m[20]=b,m[21]=N,m[22]=C,m[23]=j,m[24]=c):c=m[24],m[25]!==o||m[26]!==c?(d=(0,a.jsxs)("div",{className:ea().wrapper,children:[o,c]}),m[25]=o,m[26]=c,m[27]=d):d=m[27],d};function en(e){let{timestamp:t,durationInMs:s}=e,a=new Date(t).getTime(),r=new Date(a).getTime()+s;return{...e,startOffset:a,endOffset:r}}function ei(e){return e.data}function el(e){return e.success}function eo(e){return Q.safeParse(e)}var ec=s(34834),ed=s(67214),em=s(53993),eu=s(91104),ep=s(54396),eh=s(56906),ex=s(69986),eg=s(98632),ef=s(34027),eb=s(21440),ey=s(70727);let ev={navigation:(0,a.jsx)(ep.A,{size:14}),chat:(0,a.jsx)(eh.A,{size:14}),network:(0,a.jsx)(ex.A,{size:14}),custom:(0,a.jsx)(eg.A,{size:14})},ej=n.forwardRef((e,t)=>{let s,n,i,o,c,d,m,u,p,h,x=(0,r.c)(30),{dataIndex:g,event:f,isHighlighted:b,onClick:y,onTimeClick:v}=e;return x[0]!==f.isError||x[1]!==f.isSuccess||x[2]!==b?(s=l()(B().eventRow,{[B().eventRowError]:f.isError,[B().eventRowSuccess]:f.isSuccess,[B().eventRowHighlighted]:b}),x[0]=f.isError,x[1]=f.isSuccess,x[2]=b,x[3]=s):s=x[3],x[4]!==f.eventSource?(n=ev[f.eventSource]||(0,a.jsx)(ef.A,{size:14}),x[4]=f.eventSource,x[5]=n):n=x[5],x[6]!==n?(i=(0,a.jsx)("div",{className:B().eventRowIcon,children:n}),x[6]=n,x[7]=i):i=x[7],x[8]!==f.duration?(o=f.duration>0&&(0,a.jsxs)("span",{children:[f.duration,"ms"]}),x[8]=f.duration,x[9]=o):o=x[9],x[10]!==f.title||x[11]!==o?(c=(0,a.jsxs)("div",{className:B().eventRowTitle,children:[f.title," ",o]}),x[10]=f.title,x[11]=o,x[12]=c):c=x[12],x[13]!==f.description?(d=(0,a.jsx)("div",{className:B().eventRowDescription,title:f.description,children:f.description}),x[13]=f.description,x[14]=d):d=x[14],x[15]!==y||x[16]!==c||x[17]!==d?(m=(0,a.jsxs)("div",{className:B().eventRowContent,onClick:y,children:[c,d]}),x[15]=y,x[16]=c,x[17]=d,x[18]=m):m=x[18],x[19]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsx)(_.A,{size:12,className:"me-1"}),x[19]=u):u=x[19],x[20]!==f.formattedTimestamp||x[21]!==v?(p=(0,a.jsxs)("div",{className:B().eventRowTimestamp,onClick:v,children:[u,f.formattedTimestamp]}),x[20]=f.formattedTimestamp,x[21]=v,x[22]=p):p=x[22],x[23]!==g||x[24]!==t||x[25]!==s||x[26]!==i||x[27]!==m||x[28]!==p?(h=(0,a.jsxs)("div",{"data-index":g,ref:t,className:s,children:[i,m,p]}),x[23]=g,x[24]=t,x[25]=s,x[26]=i,x[27]=m,x[28]=p,x[29]=h):h=x[29],h}),e_=({queriedConfig:e,aliasMap:t,onClick:s,onTimeClick:r,focus:i,minTs:l,showRelativeTime:o,eventsFollowPlayerPosition:c})=>{let{data:d,isLoading:m}=(0,K.HD)(e,{placeholderData:e=>e,queryKey:["SessionEventList",e]}),u=(0,et.a)(),p=n.useMemo(()=>d?.data?.map(e=>Q.safeParse(e)).filter(e=>e.success).map(e=>e.data)??[],[d?.data]),h=(0,ey.Ay)({meta:d?.meta,aliasMap:t}),x=n.useMemo(()=>p.map(e=>{let{timestamp:t,durationInMs:s}=e,a=new Date(t).getTime(),r=new Date(a).getTime()+s,n=e["http.url"]??"",i=Number(e["http.status_code"]??""),c=e["http.method"]??"",d=(0,H.Up)(n),m=""!=c&&null!=c&&null!=n&&""!=n,p=e["error.message"],h=e.body??"",x=e.component,g=e.span_name,f=e["location.href"]??"",b=e["otel.library.name"],y=(0,H.Up)(f),v="custom-action"===b,j="routeChange"===g||"documentLoad"===g,_=e.severity_text?.toLowerCase()==="error"||"error"===x||i>499;return{id:e.id,row:e,isError:_,isSuccess:!_&&i<400&&i>99,eventSource:j?"navigation":m?"network":v?"custom":"intercom.onShow"===g?"chat":"log",title:j?"Navigated":"console.error"===g?"console.error":"console.log"===g?"console.log":"console.warn"===g?"console.warn":n.length>0?`${i} ${c}`:"intercom.onShow"===g?"Intercom Chat Opened":v||"console"===x?g:"console.error",description:j?y:null!=p&&p.length>0?p:"console"===x?h??"":n.length>0?d:"",timestamp:new Date(a),formattedTimestamp:o?(0,H.ax)(a-l):u(a,{format:"time"}),duration:r-a}})??[],[p,o,l,u]),g=n.useRef(null),f=(0,eb.Te)({count:x.length,getScrollElement:()=>g.current,estimateSize:()=>36}),b=(0,eu.D)(x.findIndex(e=>e.timestamp.getTime()>=(i?.ts??0)),500);return(n.useEffect(()=>{f&&b>=0&&c&&f.scrollToIndex(b,{align:"center"})},[b,c,f]),m)?(0,a.jsxs)(ec.B,{p:"sm",gap:"xs",children:[(0,a.jsx)(ed.E,{height:36}),(0,a.jsx)(ed.E,{height:36}),(0,a.jsx)(ed.E,{height:36})]}):(0,a.jsx)(em.F,{h:"100%",scrollbarSize:4,viewportRef:g,children:(0,a.jsx)("div",{className:B().eventListContainer,children:(0,a.jsx)("div",{style:{height:`${f.getTotalSize()}px`,width:"100%",position:"relative"},children:f.getVirtualItems().map(e=>{let t=x[e.index];return(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},children:(0,a.jsx)(ej,{event:t,dataIndex:e.index,isHighlighted:b===e.index,ref:f.measureElement,onClick:()=>s(h(t.row)),onTimeClick:()=>r(t.timestamp.getTime())})},e.key)})})})})},eS=(0,n.memo)(function(e){let t,s,n,i,l,o=(0,r.c)(18),{playerState:c,setPlayerState:d,setFocus:m,playbackRange:u,focus:p,queriedConfig:h}=e,x=u[0].getTime(),g=u[1].getTime(),f=1e3*Math.ceil(u[1].getTime()/1e3),b=1e3*Math.floor(u[0].getTime()/1e3);o[0]!==h?(t={placeholderData:U.rX,queryKey:["PlayBar",h]},o[0]=h,o[1]=t):t=o[1];let{data:y}=(0,K.HD)(h,t);y?.data,o[2]!==y?.data?(s=y?.data?.map(eo).filter(el).map(ei)??[],o[2]=y?.data,o[3]=s):s=o[3];let v=s;o[4]!==v||o[5]!==g||o[6]!==x?(n=G()(v.map(en).filter(e=>{let{startOffset:t}=e;return t>=x&&t<=g}).map(e=>{let t=e.span_name,s=e["location.href"]??"",a=(0,H.Up)(s),r=e["error.message"]??"",n=e["http.url"]??"",i=Number(e["http.status_code"]??""),l=e["http.method"]??"",o=(0,H.Up)(n),c=e.severity_text?.toLowerCase()==="error"||"error"===e.component||"console"===e.component||i>=399;return{id:e.id,ts:e.startOffset,percentage:Math.round((e.startOffset-x)/(g-x)*100),description:"routeChange"===t||"documentLoad"===t?`Navigated to ${a}`:n.length>0?`${i} ${l}${n.length>0?` ${o}`:""}`:null!=r&&r.length>0?r:"intercom.onShow"===t?"Intercom Chat Opened":e.body??"",isError:c,isSuccess:!c&&i<400&&i>99}})??[],"percentage"),o[4]=v,o[5]=g,o[6]=x,o[7]=n):n=o[7];let j=n,_=p?.ts;return o[8]!==m?(i=e=>{m({ts:e,setBy:"slider"})},o[8]=m,o[9]=i):i=o[9],o[10]!==j||o[11]!==f||o[12]!==b||o[13]!==c||o[14]!==d||o[15]!==_||o[16]!==i?(l=(0,a.jsx)(er,{markers:j,min:b,max:f,value:_,onChange:i,setPlayerState:d,playerState:c}),o[10]=j,o[11]=f,o[12]=b,o[13]=c,o[14]=d,o[15]=_,o[16]=i,o[17]=l):l=o[17],l});function ew(e,t){let{valueExpression:s,alias:a}=t;return e[a]=s,e}function eE(e){let t,s,i,o,T,$,I,L,R,z,M,D,P,V,F,O,W,X,Z,J,G,U,K,Y,Q,ee,es,ea,er,en,ei,el,eo,ec,ed,em,eu,ep,eh,ex,eg,ef,eb,ey,ev,ej,eE,eN,eC,eA,eT,e$,eI,eL,eR,ez,eM,eD,eP,eV,eF,eO,eH,eW,eB,eX,eZ,eq,eJ,eG=(0,r.c)(197),{traceSource:eU,sessionSource:eK,session:eY,setDrawerOpen:eQ,rumSessionId:e0,start:e1,end:e2,initialTs:e3,whereLanguage:e4,onLanguageChange:e5}=e,e6=void 0===e4?"lucene":e4,[e7,e8]=(0,n.useState)(void 0);eG[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],eG[0]=t):t=eG[0];let[e9,te]=(0,n.useState)(t);eG[1]===Symbol.for("react.memo_cache_sentinel")?(s=d.GJ.withOptions({history:"replace"}),eG[1]=s):s=eG[1];let[tt,ts]=(0,d.ZA)("ts",s),ta=(0,H.ZC)(tt);eG[2]!==e3?(i=null!=e3?{ts:e3,setBy:"parent"}:void 0,eG[2]=e3,eG[3]=i):i=eG[3];let[tr,tn]=(0,n.useState)(i);eG[4]!==ta||eG[5]!==tt?(o=()=>{null==ta&&null!=tt&&tn({ts:tt,setBy:"url"})},T=[ta,tt],eG[4]=ta,eG[5]=tt,eG[6]=o,eG[7]=T):(o=eG[6],T=eG[7]),(0,n.useEffect)(o,T),eG[8]!==ts?($=c()(async e=>{ts(e)},1e3),eG[8]=ts,eG[9]=$):$=eG[9];let ti=(0,n.useRef)($).current;eG[10]!==ts?(I=()=>()=>{ts(null)},L=[ts],eG[10]=ts,eG[11]=I,eG[12]=L):(I=eG[11],L=eG[12]),(0,n.useEffect)(I,L),eG[13]!==ts?(R=e=>{"player"===e.setBy?ti(e.ts):ts(e.ts),tn(e)},eG[13]=ts,eG[14]=R):R=eG[14];let tl=R,[to,tc]=(0,n.useState)("paused"),[td,tm]=(0,n.useState)(void 0);eG[15]===Symbol.for("react.memo_cache_sentinel")?(z={history:"push"},eG[15]=z):z=eG[15];let[tu,tp]=(0,d.ZA)("session_q",z);eG[16]!==td||eG[17]!==tu?(M=()=>{null!=tu&&null==td&&tm(tu)},D=[tu,td],eG[16]=td,eG[17]=tu,eG[18]=M,eG[19]=D):(M=eG[18],D=eG[19]),(0,n.useEffect)(M,D);let th=tu??"";eG[20]!==tp?(P=()=>()=>{tp(null,{history:"replace"})},V=[tp],eG[20]=tp,eG[21]=P,eG[22]=V):(P=eG[21],V=eG[22]),(0,n.useEffect)(P,V);let[tx,tg]=(0,n.useState)("highlighted"),[tf,tb]=(0,H.Mj)("hdx-session-subpanel-show-relative-time",!1),[ty,tv]=(0,H.Mj)("hdx-session-subpanel-player-speed",1),[tj,t_]=(0,H.Mj)("hdx-session-subpanel-skip-inactive",!0),[tS,tw]=(0,H.Mj)("hdx-session-subpanel-events-follow-player-position",!0),[tE,tk]=(0,n.useState)(e1.getTime()+144e5),[tN,tC]=(0,n.useState)(e2.getTime()-144e5);eG[23]!==tE?(F=new Date(tE),eG[23]=tE,eG[24]=F):F=eG[24],eG[25]!==tN?(O=new Date(tN),eG[25]=tN,eG[26]=O):O=eG[26],eG[27]!==F||eG[28]!==O?(W=[F,O],eG[27]=F,eG[28]=O,eG[29]=W):W=eG[29];let tA=W,{getFieldExpression:tT}=(0,A.A)(eK);eG[30]!==e2||eG[31]!==e0||eG[32]!==th||eG[33]!==e1||eG[34]!==tx||eG[35]!==eU||eG[36]!==e6?(X={traceSource:eU,rumSessionId:e0,where:th,whereLanguage:e6,start:e1,end:e2,tab:tx},eG[30]=e2,eG[31]=e0,eG[32]=th,eG[33]=e1,eG[34]=tx,eG[35]=eU,eG[36]=e6,eG[37]=X):X=eG[37];let{eventsConfig:t$,aliasMap:tI}=function(e){let t,s,a,n,i,l,o=(0,r.c)(96),{traceSource:c,rumSessionId:d,where:m,whereLanguage:u,start:p,end:h,tab:x}=e,{getFieldExpression:g}=(0,A.A)(c);e:{let e,s,a,r,n,i,l,d,m,u,p,h,x,f,b,y,v,j,_,S,w,E,k,N,C;if(!g){let e;o[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[0]=e):e=o[0],t=e;break e}let A=c.eventAttributesExpression??"SpanAttributes";o[1]!==g||o[2]!==A?(e=g(A,"message"),o[1]=g,o[2]=A,o[3]=e):e=o[3];let T=`${e}`;o[4]!==T?(s={valueExpression:T,alias:"body"},o[4]=T,o[5]=s):s=o[5];let $=c.eventAttributesExpression??"SpanAttributes";o[6]!==g||o[7]!==$?(a=g($,"component"),o[6]=g,o[7]=$,o[8]=a):a=o[8];let I=`${a}`;o[9]!==I?(r={valueExpression:I,alias:"component"},o[9]=I,o[10]=r):r=o[10];let L=`toFloat64OrZero(toString(${c.durationExpression})) * pow(10, 3) / pow(10, toInt8OrZero(toString(${c.durationPrecision})))`;o[11]!==L?(n={valueExpression:L,alias:"durationInMs"},o[11]=L,o[12]=n):n=o[12];let R=c.eventAttributesExpression??"SpanAttributes";o[13]!==g||o[14]!==R?(i=g(R,"error.message"),o[13]=g,o[14]=R,o[15]=i):i=o[15];let z=`${i}`;o[16]!==z?(l={valueExpression:z,alias:"error.message"},o[16]=z,o[17]=l):l=o[17];let M=c.eventAttributesExpression??"SpanAttributes";o[18]!==g||o[19]!==M?(d=g(M,"http.method"),o[18]=g,o[19]=M,o[20]=d):d=o[20];let D=`${d}`;o[21]!==D?(m={valueExpression:D,alias:"http.method"},o[21]=D,o[22]=m):m=o[22];let P=c.eventAttributesExpression??"SpanAttributes";o[23]!==g||o[24]!==P?(u=g(P,"http.status_code"),o[23]=g,o[24]=P,o[25]=u):u=o[25];let V=`${u}`;o[26]!==V?(p={valueExpression:V,alias:"http.status_code"},o[26]=V,o[27]=p):p=o[27];let F=c.eventAttributesExpression??"SpanAttributes";o[28]!==g||o[29]!==F?(h=g(F,"http.url"),o[28]=g,o[29]=F,o[30]=h):h=o[30];let O=`${h}`;o[31]!==O?(x={valueExpression:O,alias:"http.url"},o[31]=O,o[32]=x):x=o[32];let H=`toString(cityHash64(${c.traceIdExpression}, ${c.parentSpanIdExpression}, ${c.spanIdExpression}))`;o[33]!==H?(f={valueExpression:H,alias:"id"},o[33]=H,o[34]=f):f=o[34];let W=c.eventAttributesExpression??"SpanAttributes";o[35]!==g||o[36]!==W?(b=g(W,"location.href"),o[35]=g,o[36]=W,o[37]=b):b=o[37];let B=`${b}`;o[38]!==B?(y={valueExpression:B,alias:"location.href"},o[38]=B,o[39]=y):y=o[39],o[40]===Symbol.for("react.memo_cache_sentinel")?(v={valueExpression:"ScopeName",alias:"otel.library.name"},o[40]=v):v=o[40];let X=`${c.parentSpanIdExpression}`;o[41]!==X?(j={valueExpression:X,alias:"parent_span_id"},o[41]=X,o[42]=j):j=o[42];let Z=`${c.statusCodeExpression}`;o[43]!==Z?(_={valueExpression:Z,alias:"severity_text"},o[43]=Z,o[44]=_):_=o[44];let q=`${c.spanIdExpression}`;o[45]!==q?(S={valueExpression:q,alias:"span_id"},o[45]=q,o[46]=S):S=o[46];let J=`${c.spanNameExpression}`;o[47]!==J?(w={valueExpression:J,alias:"span_name"},o[47]=J,o[48]=w):w=o[48];let G=`${c.timestampValueExpression}`;o[49]!==G?(E={valueExpression:G,alias:"timestamp"},o[49]=G,o[50]=E):E=o[50];let U=`${c.traceIdExpression}`;o[51]!==U?(k={valueExpression:U,alias:"trace_id"},o[51]=U,o[52]=k):k=o[52],o[53]===Symbol.for("react.memo_cache_sentinel")?(N={valueExpression:"CAST('span', 'String')",alias:"type"},o[53]=N):N=o[53],o[54]!==n||o[55]!==l||o[56]!==m||o[57]!==p||o[58]!==x||o[59]!==f||o[60]!==y||o[61]!==j||o[62]!==_||o[63]!==S||o[64]!==w||o[65]!==E||o[66]!==k||o[67]!==s||o[68]!==r?(C=[s,r,n,l,m,p,x,f,y,v,j,_,S,w,E,k,N],o[54]=n,o[55]=l,o[56]=m,o[57]=p,o[58]=x,o[59]=f,o[60]=y,o[61]=j,o[62]=_,o[63]=S,o[64]=w,o[65]=E,o[66]=k,o[67]=s,o[68]=r,o[69]=C):C=o[69],t=C}let f=t,b=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:>299 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[70]!==b?(s={type:"lucene",condition:b},o[70]=b,o[71]=s):s=o[71];let y=s;t:{let e;if(!g){a=void 0;break t}let t=`${c.resourceAttributesExpression}.rum.sessionId:"${d}"
    AND (
      ${c.eventAttributesExpression}.http.status_code:* 
      OR ${c.eventAttributesExpression}.component:"console" 
      OR ${c.eventAttributesExpression}.component:"error" 
      OR ${c.spanNameExpression}:"routeChange" 
      OR ${c.spanNameExpression}:"documentLoad" 
      OR ${c.spanNameExpression}:"intercom.onShow" 
      OR ScopeName:"custom-action" 
    )`;o[72]!==t?(e={type:"lucene",condition:t},o[72]=t,o[73]=e):e=o[73],a=e}let v=a;s:{let e,t,s,a;if(!g||!f||!v){n=void 0;break s}o[74]!==h||o[75]!==p?(e=[p,h],o[74]=h,o[75]=p,o[76]=e):e=o[76];let r=`${c.timestampValueExpression} ASC`;o[77]===Symbol.for("react.memo_cache_sentinel")?(t={limit:4e3,offset:0},o[77]=t):t=o[77];let i="highlighted"===x?y:v;o[78]!==i?(s=[i],o[78]=i,o[79]=s):s=o[79],o[80]!==f||o[81]!==s||o[82]!==e||o[83]!==r||o[84]!==c.connection||o[85]!==c.from||o[86]!==c.implicitColumnExpression||o[87]!==c.timestampValueExpression||o[88]!==m||o[89]!==u?(a={select:f,from:c.from,dateRange:e,whereLanguage:u,where:m,timestampValueExpression:c.timestampValueExpression,implicitColumnExpression:c.implicitColumnExpression,connection:c.connection,orderBy:r,limit:t,filters:s},o[80]=f,o[81]=s,o[82]=e,o[83]=r,o[84]=c.connection,o[85]=c.from,o[86]=c.implicitColumnExpression,o[87]=c.timestampValueExpression,o[88]=m,o[89]=u,o[90]=a):a=o[90],n=a}let j=n;a:{let e;if(!g){i=void 0;break a}o[91]!==f?(e=f.reduce(ew,{}),o[91]=f,o[92]=e):e=o[92],i=e}let _=i;return o[93]!==_||o[94]!==j?(l={eventsConfig:j,aliasMap:_},o[93]=_,o[94]=j,o[95]=l):l=o[95],l}(X),[tL,tR]=(0,n.useState)(!1);eG[38]!==ty||eG[39]!==tv?(Z=()=>{1==ty?tv(2):2==ty?tv(4):4==ty?tv(8):8==ty&&tv(1)},eG[38]=ty,eG[39]=tv,eG[40]=Z):Z=eG[40];let tz=Z,tM=tA[0].getTime(),tD=tA[1].getTime();eG[41]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{tc(ek)},eG[41]=J):J=eG[41];let tP=J;eG[42]!==tr?.ts||eG[43]!==tM||eG[44]!==tl?(G=()=>{tl({ts:Math.max((tr?.ts??tM)-15e3,tM),setBy:"skip-backward"})},eG[42]=tr?.ts,eG[43]=tM,eG[44]=tl,eG[45]=G):G=eG[45],tr?.ts;let tV=G;eG[46]!==tr?.ts||eG[47]!==tD||eG[48]!==tM||eG[49]!==tl?(U=()=>{tl({ts:Math.min((tr?.ts??tM)+15e3,tD),setBy:"skip-forward"})},eG[46]=tr?.ts,eG[47]=tD,eG[48]=tM,eG[49]=tl,eG[50]=U):U=eG[50],tr?.ts;let tF=U;eG[51]!==th||eG[52]!==e6?(K={values:{where:th,whereLanguage:e6}},eG[51]=th,eG[52]=e6,eG[53]=K):K=eG[53];let{control:tO,handleSubmit:tH}=(0,m.mN)(K);eG[54]!==tp?(Y=e=>{tp(e.where)},eG[54]=tp,eG[55]=Y):Y=eG[55];let tW=Y;eG[56]!==eQ?(Q=e=>{eQ(!0),e8(e.where),te(e.aliasWith)},eG[56]=eQ,eG[57]=Q):Q=eG[57];let tB=Q;eG[58]!==tl?(ee=e=>{tl({ts:e,setBy:"timeline"})},eG[58]=tl,eG[59]=ee):ee=eG[59];let tX=ee;eG[60]!==tr?.setBy||eG[61]!==tr?.ts||eG[62]!==tl?(es=e=>{(tr?.setBy!=="player"||tr?.ts!==e)&&tl({ts:e,setBy:"player"})},eG[60]=tr?.setBy,eG[61]=tr?.ts,eG[62]=tl,eG[63]=es):es=eG[63];let tZ=es;eG[64]!==e9||eG[65]!==e7||eG[66]!==eQ||eG[67]!==eU?(ea=null!=e7&&eU&&(0,a.jsx)(p.Z,{children:(0,a.jsx)(N.A,{source:eU,rowId:e7,aliasWith:e9,onClose:()=>{eQ(!1),e8(void 0)}})}),eG[64]=e9,eG[65]=e7,eG[66]=eQ,eG[67]=eU,eG[68]=ea):ea=eG[68],eG[69]!==tL?(er=l()(B().eventList,{"d-none":tL}),eG[69]=tL,eG[70]=er):er=eG[70],eG[71]===Symbol.for("react.memo_cache_sentinel")?(en={zIndex:100,width:"100%"},eG[71]=en):en=eG[71],eG[72]!==tH||eG[73]!==tW?(ei=tH(tW),eG[72]=tH,eG[73]=tW,eG[74]=ei):ei=eG[74],eG[75]!==eU?(el=(0,u.VO)(eU),eG[75]=eU,eG[76]=el):el=eG[76],eG[77]!==tH||eG[78]!==tW?(eo=tH(tW),eG[77]=tH,eG[78]=tW,eG[79]=eo):eo=eG[79],eG[80]!==tO||eG[81]!==e5||eG[82]!==el||eG[83]!==eo?(ec=(0,a.jsx)(C.A,{tableConnection:el,control:tO,name:"where",size:"xs",showLabel:!1,enableHotkey:!0,onSubmit:eo,onLanguageChange:e5}),eG[80]=tO,eG[81]=e5,eG[82]=el,eG[83]=eo,eG[84]=ec):ec=eG[84],eG[85]!==ei||eG[86]!==ec?(ed=(0,a.jsx)("form",{style:en,onSubmit:ei,children:ec}),eG[85]=ei,eG[86]=ec,eG[87]=ed):ed=eG[87],eG[88]===Symbol.for("react.memo_cache_sentinel")?(em=[{value:"highlighted",label:"Highlighted"},{value:"events",label:"All Events"}],eG[88]=em):em=eG[88],eG[89]===Symbol.for("react.memo_cache_sentinel")?(eu=e=>tg(e),eG[89]=eu):eu=eG[89],eG[90]!==tx?(ep=(0,a.jsx)(h.I,{flex:1,size:"xs",data:em,value:tx,onChange:eu}),eG[90]=tx,eG[91]=ep):ep=eG[91];let tq=tS?"filled":"subtle";eG[92]!==tS||eG[93]!==tw?(eh=()=>tw(!tS),eG[92]=tS,eG[93]=tw,eG[94]=eh):eh=eG[94],eG[95]===Symbol.for("react.memo_cache_sentinel")?(ex=(0,a.jsx)(v.A,{size:18}),eG[95]=ex):ex=eG[95],eG[96]!==tq||eG[97]!==eh?(eg=(0,a.jsx)(x.m,{label:"Sync with player position",color:"gray",children:(0,a.jsx)(g.M,{size:"md",color:"gray",variant:tq,onClick:eh,children:ex})}),eG[96]=tq,eG[97]=eh,eG[98]=eg):eg=eG[98],eG[99]!==ep||eG[100]!==eg?(ef=(0,a.jsxs)(f.Y,{gap:6,children:[ep,eg]}),eG[99]=ep,eG[100]=eg,eG[101]=ef):ef=eG[101],eG[102]!==ed||eG[103]!==ef?(eb=(0,a.jsxs)("div",{className:B().eventListHeader,children:[ed,ef]}),eG[102]=ed,eG[103]=ef,eG[104]=eb):eb=eG[104],eG[105]!==tI||eG[106]!==t$||eG[107]!==tS||eG[108]!==tr||eG[109]!==tM||eG[110]!==tB||eG[111]!==tX||eG[112]!==tf?(ey=t$&&tI&&(0,a.jsx)(e_,{eventsFollowPlayerPosition:tS,aliasMap:tI,queriedConfig:t$,onClick:tB,focus:tr,onTimeClick:tX,minTs:tM,showRelativeTime:tf}),eG[105]=tI,eG[106]=t$,eG[107]=tS,eG[108]=tr,eG[109]=tM,eG[110]=tB,eG[111]=tX,eG[112]=tf,eG[113]=ey):ey=eG[113],eG[114]!==er||eG[115]!==eb||eG[116]!==ey?(ev=(0,a.jsxs)("div",{className:er,children:[eb,ey]}),eG[114]=er,eG[115]=eb,eG[116]=ey,eG[117]=ev):ev=eG[117],eG[118]!==e2||eG[119]!==tr||eG[120]!==tT||eG[121]!==tL||eG[122]!==ty||eG[123]!==to||eG[124]!==e0||eG[125]!==eY||eG[126]!==eK||eG[127]!==tZ||eG[128]!==tj||eG[129]!==e1?(ej=tT&&(0,a.jsx)(q,{playerState:to,setPlayerState:tc,focus:tr,setPlayerTime:tZ,config:{serviceName:eY.serviceName,sourceId:eK.id,sessionId:e0,dateRange:[e1,e2]},playerSpeed:ty,skipInactive:tj,setPlayerStartTimestamp:tk,setPlayerEndTimestamp:tC,setPlayerFullWidth:tR,playerFullWidth:tL,resizeKey:`${tL}`,getSessionSourceFieldExpression:tT}),eG[118]=e2,eG[119]=tr,eG[120]=tT,eG[121]=tL,eG[122]=ty,eG[123]=to,eG[124]=e0,eG[125]=eY,eG[126]=eK,eG[127]=tZ,eG[128]=tj,eG[129]=e1,eG[130]=ej):ej=eG[130],eG[131]!==t$||eG[132]!==tr||eG[133]!==tA||eG[134]!==to||eG[135]!==tl?(eE=t$&&(0,a.jsx)(eS,{playerState:to,setPlayerState:tc,focus:tr,setFocus:tl,playbackRange:tA,queriedConfig:t$}),eG[131]=t$,eG[132]=tr,eG[133]=tA,eG[134]=to,eG[135]=tl,eG[136]=eE):eE=eG[136],eG[137]!==eE?(eN=(0,a.jsx)("div",{className:B().playerPlaybar,children:eE}),eG[137]=eE,eG[138]=eN):eN=eG[138],eG[139]!==tb||eG[140]!==tf?(eC=()=>tb(!tf),eG[139]=tb,eG[140]=tf,eG[141]=eC):eC=eG[141],eG[142]!==tr?.ts||eG[143]!==tD||eG[144]!==tM||eG[145]!==tf?(eA=tf?(0,a.jsxs)(a.Fragment,{children:[(0,H.ax)((tr?.ts??0)-tM),(0,a.jsxs)("span",{className:"fw-normal ms-2",children:[" / ",(0,H.ax)(tD-tM)]})]}):(0,a.jsx)(et.H,{value:tr?.ts||tM,format:"time"}),eG[142]=tr?.ts,eG[143]=tD,eG[144]=tM,eG[145]=tf,eG[146]=eA):eA=eG[146],eG[147]!==eC||eG[148]!==eA?(eT=(0,a.jsx)("div",{className:B().playerTimestamp,children:(0,a.jsx)(x.m,{label:"Toggle relative time",color:"gray",children:(0,a.jsx)(b.$,{variant:"subtle",color:"gray",onClick:eC,size:"compact-xs",children:eA})})}),eG[147]=eC,eG[148]=eA,eG[149]=eT):eT=eG[149];let tJ=(tr?.ts||0)<=tM;eG[150]===Symbol.for("react.memo_cache_sentinel")?(e$=(0,a.jsx)(j.A,{size:18}),eG[150]=e$):e$=eG[150],eG[151]!==tV||eG[152]!==tJ?(eI=(0,a.jsx)(x.m,{label:"Go 15 seconds back",color:"gray",children:(0,a.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tV,disabled:tJ,children:e$})}),eG[151]=tV,eG[152]=tJ,eG[153]=eI):eI=eG[153];let tG="playing"===to?"Pause":"Play";eG[154]!==to?(eL=(0,a.jsx)(g.M,{variant:"secondary",size:"lg",radius:"xl",onClick:tP,children:"paused"===to?(0,a.jsx)(_.A,{size:20}):(0,a.jsx)(S.A,{size:20})}),eG[154]=to,eG[155]=eL):eL=eG[155],eG[156]!==tG||eG[157]!==eL?(eR=(0,a.jsx)(x.m,{label:tG,color:"gray",children:eL}),eG[156]=tG,eG[157]=eL,eG[158]=eR):eR=eG[158];let tU=(tr?.ts||0)>=tD;return eG[159]===Symbol.for("react.memo_cache_sentinel")?(ez=(0,a.jsx)(w.A,{size:18}),eG[159]=ez):ez=eG[159],eG[160]!==tF||eG[161]!==tU?(eM=(0,a.jsx)(x.m,{label:"Skip 15 seconds",color:"gray",children:(0,a.jsx)(g.M,{variant:"secondary",size:"md",radius:"xl",onClick:tF,disabled:tU,children:ez})}),eG[160]=tF,eG[161]=tU,eG[162]=eM):eM=eG[162],eG[163]!==eI||eG[164]!==eR||eG[165]!==eM?(eD=(0,a.jsxs)(f.Y,{align:"center",justify:"center",gap:"xs",children:[eI,eR,eM]}),eG[163]=eI,eG[164]=eR,eG[165]=eM,eG[166]=eD):eD=eG[166],eG[167]!==tj?(eP=tj?(0,a.jsx)(E.A,{size:18,className:"pe-1"}):(0,a.jsx)(k.A,{size:18,className:"pe-1"}),eG[167]=tj,eG[168]=eP):eP=eG[168],eG[169]!==t_||eG[170]!==tj?(eV=()=>t_(!tj),eG[169]=t_,eG[170]=tj,eG[171]=eV):eV=eG[171],eG[172]===Symbol.for("react.memo_cache_sentinel")?(eF=(0,a.jsx)(y.c,{orientation:"vertical",ml:"sm"}),eG[172]=eF):eF=eG[172],eG[173]!==eP||eG[174]!==eV?(eO=(0,a.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eP,onClick:eV,children:["Skip Idle",eF]}),eG[173]=eP,eG[174]=eV,eG[175]=eO):eO=eG[175],eG[176]!==ty?(eH=(0,a.jsxs)("span",{className:"fw-bold pe-1",children:[ty,"x"]}),eG[176]=ty,eG[177]=eH):eH=eG[177],eG[178]===Symbol.for("react.memo_cache_sentinel")?(eW=(0,a.jsx)(y.c,{orientation:"vertical",ml:"sm"}),eG[178]=eW):eW=eG[178],eG[179]!==tz||eG[180]!==eH?(eB=(0,a.jsxs)(b.$,{size:"compact-sm",variant:"secondary",fw:"normal",rightSection:eH,onClick:tz,children:["Speed",eW]}),eG[179]=tz,eG[180]=eH,eG[181]=eB):eB=eG[181],eG[182]!==eO||eG[183]!==eB?(eX=(0,a.jsxs)(f.Y,{align:"center",justify:"flex-end",gap:"xs",children:[eO,eB]}),eG[182]=eO,eG[183]=eB,eG[184]=eX):eX=eG[184],eG[185]!==eT||eG[186]!==eD||eG[187]!==eX?(eZ=(0,a.jsxs)("div",{className:B().playerToolbar,children:[eT,eD,eX]}),eG[185]=eT,eG[186]=eD,eG[187]=eX,eG[188]=eZ):eZ=eG[188],eG[189]!==ej||eG[190]!==eN||eG[191]!==eZ?(eq=(0,a.jsxs)("div",{className:B().player,children:[ej,eN,eZ]}),eG[189]=ej,eG[190]=eN,eG[191]=eZ,eG[192]=eq):eq=eG[192],eG[193]!==ea||eG[194]!==ev||eG[195]!==eq?(eJ=(0,a.jsxs)("div",{className:B().wrapper,children:[ea,ev,eq]}),eG[193]=ea,eG[194]=ev,eG[195]=eq,eG[196]=eJ):eJ=eG[196],eJ}function ek(e){return"playing"===e?"paused":"playing"}},57749:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/kubernetes",function(){return s(62808)}])},59017:(e,t,s)=>{"use strict";s.d(t,{V:()=>d});var a=s(6029),r=s(75155),n=s(55729),i=s(23935),l=s(78253),o=s(50374),c=s(94937);function d(e){let t,s,d,u,p,h=(0,r.c)(21),{attributes:x}=e;h[0]!==x?(t=void 0===x?[]:x,h[0]=x,h[1]=t):t=h[1];let g=t,[f,b]=(0,n.useState)(!1),{onPropertyAddClick:y,generateSearchUrl:v,source:j}=(0,n.useContext)(o.D);h[2]!==g||h[3]!==f?(s=g.sort(m).slice(0,f?g.length:12),h[2]=g,h[3]=f,h[4]=s):s=h[4];let _=s,S=g.length-_.length;if(h[5]!==j?.id||h[6]!==v||h[7]!==y||h[8]!==_){let e;h[10]!==j?.id||h[11]!==v||h[12]!==y?(e=e=>{let{displayedKey:t,value:s,sql:r,lucene:n,source:i}=e;return(0,a.jsx)(c.A,{displayedKey:t,name:n||r,nameLanguage:n?"lucene":"sql",value:s,...y&&j?.id===i.id?{onPropertyAddClick:y,sqlExpression:r}:{onPropertyAddClick:void 0,sqlExpression:void 0},generateSearchUrl:v?(e,t)=>v({where:e||"",whereLanguage:t??"lucene",source:i}):void 0},`${t}-${s}-${i.id}`)},h[10]=j?.id,h[11]=v,h[12]=y,h[13]=e):e=h[13],d=_.map(e),h[5]=j?.id,h[6]=v,h[7]=y,h[8]=_,h[9]=d}else d=h[9];return h[14]!==g.length||h[15]!==S||h[16]!==f?(u=g.length>12&&(0,a.jsx)(i.M,{size:"xs",onClick:()=>b(!f),children:f?"Show Less":`Show ${S} More...`}),h[14]=g.length,h[15]=S,h[16]=f,h[17]=u):u=h[17],h[18]!==d||h[19]!==u?(p=(0,a.jsxs)(l.s,{wrap:"wrap",gap:"2px",mb:"md",align:"baseline",children:[d,u]}),h[18]=d,h[19]=u,h[20]=p):p=h[20],p}function m(e,t){return e.displayedKey.localeCompare(t.displayedKey)||e.value.localeCompare(t.value)}},61629:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(6029),r=s(75155),n=s(43517),i=s(92917);function l(e){let t,s,l,o=(0,r.c)(7);o[0]!==e?({level:t,...s}=e,o[0]=e,o[1]=t,o[2]=s):(t=o[1],s=o[2]);let c=(0,i.lO)(t),d="error"===c?"red":"warn"===c?"var(--color-chart-warning)":"gray";return o[3]!==t||o[4]!==s||o[5]!==d?(l=(0,a.jsx)(n.E,{component:"span",size:"xs",c:d,...s,children:t}),o[3]=t,o[4]=s,o[5]=d,o[6]=l):l=o[6],l}},62808:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eF});var a=s(6029),r=s(75155),n=s(55729),i=s(71024),l=s.n(i),o=s(82203),c=s.n(o),d=s(75828),m=s.n(d),u=s(43465),p=s(41038),h=s(1909),x=s(76089),g=s(82641),f=s(11088),b=s(67214),y=s(62801),v=s(3635),j=s(90124),_=s(39603),S=s(63085),w=s(43517),E=s(43085),k=s(76013),N=s(64488),C=s(48378),A=s(78253),T=s(60481),$=s(60665),I=s(49109),L=s(33958),R=s(94502),z=s(21440),M=s(58153);let D=(e,t,s=10)=>{let a=(0,n.useRef)(null),r=(0,z.Te)({count:e,getScrollElement:()=>a.current,estimateSize:(0,n.useCallback)(()=>t,[t]),overscan:s}),i=r.getVirtualItems(),l=r.getTotalSize(),[o,c]=(0,n.useMemo)(()=>i.length>0?[Math.max(0,i[0].start-r.options.scrollMargin),Math.max(0,l-i[i.length-1].end)]:[0,0],[i,r.options.scrollMargin,l]);return{containerRef:a,rowVirtualizer:r,virtualItems:i,paddingTop:o,paddingBottom:c}};var P=s(75359),V=s(40228),F=s(28450),O=s(3145),H=s(38206),W=s(24196),B=s(78550);let X=e=>{let t,s,n,i,l=(0,r.c)(14),{metricSource:o,placeholder:c,fieldName:d,value:m,onChange:u,chartConfig:p,dataTestId:h}=e,x=`${o.resourceAttributesExpression}['${d}']`;l[0]!==x?(t=[x],l[0]=x,l[1]=t):t=l[1],l[2]!==p||l[3]!==t?(s={chartConfig:p,keys:t,disableRowLimit:!0,limit:1e6},l[2]=p,l[3]=t,l[4]=s):s=l[4];let{data:g,isLoading:f}=(0,B.lo)(s);l[5]!==g?.[0]?.value?(n=g?.[0]?.value.map(q).sort(J)||[],l[5]=g?.[0]?.value,l[6]=n):n=l[6];let b=n,y=c+(f?" (loading...)":"");return l[7]!==h||l[8]!==f||l[9]!==u||l[10]!==b||l[11]!==y||l[12]!==m?(i=(0,a.jsx)(H.l,{placeholder:y,data:b,value:m,onChange:u,searchable:!0,clearable:!0,allowDeselect:!0,size:"xs",maxDropdownHeight:280,disabled:f,variant:"filled",w:200,limit:100,"data-testid":h}),l[7]=h,l[8]=f,l[9]=u,l[10]=b,l[11]=y,l[12]=m,l[13]=i):i=l[13],i},Z=e=>{let t,s,i,l,o,c,d,m,u,p,x,g,f,b,y,j,_,S,w,E,k,N,C,A,$,I=(0,r.c)(76),{dateRange:L,metricSource:R,searchQuery:z,setSearchQuery:M}=e,[D,P]=(0,n.useState)(null),[V,F]=(0,n.useState)(null),[H,B]=(0,n.useState)(null),[Z,q]=(0,n.useState)(null),[J,U]=(0,n.useState)(null);I[0]!==z?(t={defaultValues:{searchQuery:z}},I[0]=z,I[1]=t):t=I[1];let{control:K,setValue:Y}=(0,h.mN)(t);I[2]!==K?(s={control:K,name:"searchQuery"},I[2]=K,I[3]=s):s=I[3];let Q=(0,h.FH)(s),ee=(0,n.useRef)(z);I[4]!==M||I[5]!==Q?(i=()=>{Q!==ee.current&&(ee.current=Q??"",M(Q??""))},l=[Q,M],I[4]=M,I[5]=Q,I[6]=i,I[7]=l):(i=I[6],l=I[7]),(0,n.useEffect)(i,l),I[8]!==z||I[9]!==Y?(o=()=>{z!==ee.current&&(ee.current=z,Y("searchQuery",z))},c=[z,Y],I[8]=z,I[9]=Y,I[10]=o,I[11]=c):(o=I[10],c=I[11]),(0,n.useEffect)(o,c);let et=G;I[12]!==R.resourceAttributesExpression||I[13]!==z?(d=()=>{if(z){let e=R.resourceAttributesExpression;P(et(z,e,"k8s.pod.name")),F(et(z,e,"k8s.deployment.name")),B(et(z,e,"k8s.node.name")),q(et(z,e,"k8s.namespace.name")),U(et(z,e,"k8s.cluster.name"))}},m=[z,R.resourceAttributesExpression],I[12]=R.resourceAttributesExpression,I[13]=z,I[14]=d,I[15]=m):(d=I[14],m=I[15]),(0,n.useEffect)(d,m);let es=R.metricTables?.gauge||"";I[16]!==R.from.databaseName||I[17]!==es?(u={databaseName:R.from.databaseName,tableName:es},I[16]=R.from.databaseName,I[17]=es,I[18]=u):u=I[18];let ea=R.timestampValueExpression||"";I[19]!==L||I[20]!==R.connection||I[21]!==u||I[22]!==ea?(p={from:u,where:"",whereLanguage:"sql",select:"",timestampValueExpression:ea,connection:R.connection,dateRange:L},I[19]=L,I[20]=R.connection,I[21]=u,I[22]=ea,I[23]=p):p=I[23];let er=p;I[24]!==R.resourceAttributesExpression||I[25]!==z||I[26]!==M?(x=(e,t,s)=>{s(t);let a=R.resourceAttributesExpression,r=`${a}.${e}`,n=z,i=RegExp(`${r}:"[^"]*"`,"g");n=n.replace(i,"").trim(),t&&(n=`${r}:"${t}" ${n}`.trim()),M(n)},I[24]=R.resourceAttributesExpression,I[25]=z,I[26]=M,I[27]=x):x=I[27];let en=x;return I[28]!==en?(g=e=>en("k8s.pod.name",e,P),I[28]=en,I[29]=g):g=I[29],I[30]!==er||I[31]!==R||I[32]!==D||I[33]!==g?(f=(0,a.jsx)(X,{metricSource:R,placeholder:"Pod",fieldName:"k8s.pod.name",value:D,onChange:g,chartConfig:er,dataTestId:"pod-filter-select"}),I[30]=er,I[31]=R,I[32]=D,I[33]=g,I[34]=f):f=I[34],I[35]!==en?(b=e=>en("k8s.deployment.name",e,F),I[35]=en,I[36]=b):b=I[36],I[37]!==er||I[38]!==V||I[39]!==R||I[40]!==b?(y=(0,a.jsx)(X,{metricSource:R,placeholder:"Deployment",fieldName:"k8s.deployment.name",value:V,onChange:b,chartConfig:er,dataTestId:"deployment-filter-select"}),I[37]=er,I[38]=V,I[39]=R,I[40]=b,I[41]=y):y=I[41],I[42]!==en?(j=e=>en("k8s.node.name",e,B),I[42]=en,I[43]=j):j=I[43],I[44]!==er||I[45]!==R||I[46]!==H||I[47]!==j?(_=(0,a.jsx)(X,{metricSource:R,placeholder:"Node",fieldName:"k8s.node.name",value:H,onChange:j,chartConfig:er,dataTestId:"node-filter-select"}),I[44]=er,I[45]=R,I[46]=H,I[47]=j,I[48]=_):_=I[48],I[49]!==en?(S=e=>en("k8s.namespace.name",e,q),I[49]=en,I[50]=S):S=I[50],I[51]!==er||I[52]!==R||I[53]!==Z||I[54]!==S?(w=(0,a.jsx)(X,{metricSource:R,placeholder:"Namespace",fieldName:"k8s.namespace.name",value:Z,onChange:S,chartConfig:er,dataTestId:"namespace-filter-select"}),I[51]=er,I[52]=R,I[53]=Z,I[54]=S,I[55]=w):w=I[55],I[56]!==en?(E=e=>en("k8s.cluster.name",e,U),I[56]=en,I[57]=E):E=I[57],I[58]!==er||I[59]!==J||I[60]!==R||I[61]!==E?(k=(0,a.jsx)(X,{metricSource:R,placeholder:"Cluster",fieldName:"k8s.cluster.name",value:J,onChange:E,chartConfig:er,dataTestId:"cluster-filter-select"}),I[58]=er,I[59]=J,I[60]=R,I[61]=E,I[62]=k):k=I[62],I[63]===Symbol.for("react.memo_cache_sentinel")?(N={flex:1,minWidth:200},I[63]=N):N=I[63],I[64]!==R?(C=(0,O.VO)(R),I[64]=R,I[65]=C):C=I[65],I[66]!==K||I[67]!==C?(A=(0,a.jsx)(T.a,{style:N,children:(0,a.jsx)(W.A,{tableConnection:C,placeholder:"Search your events w/ Lucene ex. column:foo",language:"lucene",name:"searchQuery",control:K,size:"xs",enableHotkey:!0,"data-testid":"k8s-search-input"})}),I[66]=K,I[67]=C,I[68]=A):A=I[68],I[69]!==f||I[70]!==y||I[71]!==_||I[72]!==w||I[73]!==k||I[74]!==A?($=(0,a.jsxs)(v.Y,{mt:"md",mb:"xs",wrap:"wrap",gap:"xxs",children:[f,y,_,w,k,A]}),I[69]=f,I[70]=y,I[71]=_,I[72]=w,I[73]=k,I[74]=A,I[75]=$):$=I[75],$};function q(e){return{value:e,label:e}}function J(e,t){return e.value.localeCompare(t.value)}function G(e,t,s){let a=e.match(RegExp(`${void 0===t?"":t}\\.${s}:"([^"]+)"`,"i"));return a?a[1]:null}var U=s(64501),K=s(86761),Y=s(57478),Q=s(91021),ee=s(32479),et=s(43152),es=s(56514),ea=s(6065),er=s(10174),en=s(35729),ei=s(81973),el=s(387),eo=s(26674),ec=s(66773),ed=s.n(ec);let em=(0,el.lr)("Past 1h",!1),eu=n.memo(e=>{let t,s,n,i=(0,r.c)(7),{label:l,value:o}=e;return o?(i[0]!==l?(t=(0,a.jsx)(w.E,{size:"xs",color:"gray",children:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==o?(s=(0,a.jsx)(w.E,{size:"sm",children:o}),i[2]=o,i[3]=s):s=i[3],i[4]!==t||i[5]!==s?(n=(0,a.jsxs)("div",{className:"pe-4",children:[t,s]}),i[4]=t,i[5]=s,i[6]=n):n=i[6],n):null}),ep=e=>{let t,s,n,i,l,o,c=(0,r.c)(15),{name:d,dateRange:m,metricSource:u}=e,p=`${u?.resourceAttributesExpression}.k8s.namespace.name:"${d}"`;c[0]!==m||c[1]!==u||c[2]!==p?(t=Q.HD,s=(0,et.ik)({series:[{table:"metrics",field:"k8s.namespace.phase - Gauge",type:"table",aggFn:"last_value",where:p,groupBy:["k8s.namespace.name"]}],dateRange:m,seriesReturnType:"column"},{metric:u}),c[0]=m,c[1]=u,c[2]=p,c[3]=t,c[4]=s):(t=c[3],s=c[4]);let{data:h}=t(s);e:{let e;if(!h){let e;c[5]===Symbol.for("react.memo_cache_sentinel")?(e={},c[5]=e):e=c[5],n=e;break e}let t=h.data?.[0]?.["last_value(k8s.namespace.phase)"];c[6]!==t?(e={ready:t},c[6]=t,c[7]=e):e=c[7],n=e}let x=n;return c[8]!==d?(i=(0,a.jsx)(eu,{label:"Namespace",value:d}),c[8]=d,c[9]=i):i=c[9],c[10]!==x.ready?(l=void 0!==x.ready&&(0,a.jsx)(eu,{label:"Status",value:1===x.ready?(0,a.jsx)(E.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Ready"}):(0,a.jsx)(E.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Not Ready"})}),c[10]=x.ready,c[11]=l):l=c[11],c[12]!==i||c[13]!==l?(o=(0,a.jsx)(C.x.Col,{span:12,children:(0,a.jsxs)("div",{className:"p-2 gap-2 d-flex flex-wrap","data-testid":"k8s-namespace-details-panel",children:[i,l]})}),c[12]=i,c[13]=l,c[14]=o):o=c[14],o};function eh(e){let t,s,i,l,o,c,d,m,u,p,h,x,g,f,b,v=(0,r.c)(35),{dateRange:_,logSource:S,where:w}=e,[E,k]=n.useState("all"),N=w+("error"===E?" Severity:err":"");v[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{("all"===e||"error"===e)&&k(e)},s=[{label:"All",value:"all"},{label:"Errors",value:"error"}],v[0]=t,v[1]=s):(t=v[0],s=v[1]),v[2]!==E?(i=(0,a.jsx)(y.Z.Section,{p:"md",py:"xs",children:(0,a.jsxs)(A.s,{justify:"space-between",align:"center",children:["Latest Namespace Logs & Spans",(0,a.jsx)(A.s,{gap:"xs",align:"center",children:(0,a.jsx)(j.I,{size:"xs",value:E,onChange:t,data:s})})]})}),v[2]=E,v[3]=i):i=v[3];let C=S.id;v[4]===Symbol.for("react.memo_cache_sentinel")?(l=[{label:"Namespace Details"}],v[4]=l):l=v[4],v[5]!==S.timestampValueExpression?(o={valueExpression:S.timestampValueExpression,alias:"Timestamp"},v[5]=S.timestampValueExpression,v[6]=o):o=v[6];let T=`${S.severityTextExpression}`;v[7]!==T?(c={valueExpression:T,alias:"Severity"},v[7]=T,v[8]=c):c=v[8];let $=`${S.serviceNameExpression}`;v[9]!==$?(d={valueExpression:$,alias:"Service"},v[9]=$,v[10]=d):d=v[10],v[11]!==S?(m=(0,ei.N8)(S),v[11]=S,v[12]=m):m=v[12];let I=`${m}`;return v[13]!==I?(u={valueExpression:I,alias:"Message"},v[13]=I,v[14]=u):u=v[14],v[15]!==d||v[16]!==u||v[17]!==o||v[18]!==c?(p=[o,c,d,u],v[15]=d,v[16]=u,v[17]=o,v[18]=c,v[19]=p):p=v[19],v[20]!==S.timestampValueExpression?(h=[{valueExpression:S.timestampValueExpression,ordering:"DESC"}],v[20]=S.timestampValueExpression,v[21]=h):h=v[21],v[22]===Symbol.for("react.memo_cache_sentinel")?(x={limit:200,offset:0},v[22]=x):x=v[22],v[23]!==N||v[24]!==_||v[25]!==S||v[26]!==p||v[27]!==h?(g={...S,where:N,whereLanguage:"lucene",select:p,orderBy:h,limit:x,dateRange:_},v[23]=N,v[24]=_,v[25]=S,v[26]=p,v[27]=h,v[28]=g):g=v[28],v[29]!==S.id||v[30]!==g?(f=(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:(0,a.jsx)(P.A,{sourceId:C,isNestedPanel:!0,breadcrumbPath:l,config:g,isLive:!1,queryKeyPrefix:"k8s-dashboard-namespace-logs"})}),v[29]=S.id,v[30]=g,v[31]=f):f=v[31],v[32]!==f||v[33]!==i?(b=(0,a.jsxs)(y.Z,{p:"md",children:[i,f]}),v[32]=f,v[33]=i,v[34]=b):b=v[34],b}function ex(e){let t,s,n,i,l,o,c,d,m,u,p,h,g,f,b,v,j,_,S,w,E,k,N,A,T,$,I=(0,r.c)(78),{metricSource:L,logSource:R}=e;I[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,ea.withDefault)(ea.StringParam,""),s={updateType:"replaceIn"},I[0]=t,I[1]=s):(t=I[0],s=I[1]);let[z,M]=(0,ea.useQueryParam)("namespaceName",t,s),D=(0,eo.Y)()+10,P=`${L?.resourceAttributesExpression}.k8s.namespace.name:"${z}"`;I[2]===Symbol.for("react.memo_cache_sentinel")?(n={defaultValue:"Past 1h",defaultTimeRange:[em?.[0]?.getTime()??-1,em?.[1]?.getTime()??-1]},I[2]=n):n=I[2];let{searchedTimeRange:F}=(0,el.vM)(n);I[3]!==R?(i=(0,O.VO)(R),I[3]=R,I[4]=i):i=I[4];let{data:H}=(0,B.Z2)(i);I[5]!==R.serviceNameExpression||I[6]!==H?(l=!1,R?.serviceNameExpression&&(H?.primary_key||H?.sorting_key)&&(H.primary_key&&H.primary_key.includes(R.serviceNameExpression)?l=!0:H.sorting_key&&H.sorting_key.includes(R.serviceNameExpression)&&(l=!0)),I[5]=R.serviceNameExpression,I[6]=H,I[7]=l):l=I[7];let W=`${R?.resourceAttributesExpression}.k8s.namespace.name:"${z}"`,X=R.timestampValueExpression??"";I[8]!==F||I[9]!==R.connection||I[10]!==R.from||I[11]!==R.id||I[12]!==W||I[13]!==X?(o={source:R.id,from:R.from,where:W,whereLanguage:"lucene",select:"",timestampValueExpression:X,connection:R.connection,dateRange:F},I[8]=F,I[9]=R.connection,I[10]=R.from,I[11]=R.id,I[12]=W,I[13]=X,I[14]=o):o=I[14];let Z=R.serviceNameExpression??"";I[15]!==Z?(c=[Z],I[15]=Z,I[16]=c):c=I[16],I[17]!==o||I[18]!==c?(d={chartConfig:o,keys:c,limit:10,disableRowLimit:!1},I[17]=o,I[18]=c,I[19]=d):d=I[19];let q=!!z&&!!R.serviceNameExpression&&l;I[20]!==q?(m={enabled:q},I[20]=q,I[21]=m):m=I[21];let{data:J}=(0,B.lo)(d,m);e:{let e=`${R?.resourceAttributesExpression}.k8s.namespace.name:"${z}"`;if(J&&J[0].value.length>0&&l){let t,s=J[0].value,a=J[0].key;if(I[22]!==a||I[23]!==s){let e;I[25]!==a?(e=e=>`${a}:"${e}"`,I[25]=a,I[26]=e):e=I[26],t=s.map(e).join(" OR "),I[22]=a,I[23]=s,I[24]=t}else t=I[24];u=`(${t}) AND ${e}`;break e}u=e}let G=u;I[27]!==M?(p=()=>{M(void 0)},I[27]=M,I[28]=p):p=I[28];let U=p;if(!z)return null;let K=!!z;I[29]===Symbol.for("react.memo_cache_sentinel")?(h={body:{padding:0}},I[29]=h):h=I[29];let Y=`Details for ${z}`;return I[30]!==U||I[31]!==Y?(g=(0,a.jsx)(en.B,{header:Y,onClose:U}),I[30]=U,I[31]=Y,I[32]=g):g=I[32],I[33]!==F||I[34]!==L||I[35]!==z?(f=(0,a.jsx)(ep,{name:z,dateRange:F,metricSource:L}),I[33]=F,I[34]=L,I[35]=z,I[36]=f):f=I[36],I[37]!==F||I[38]!==L||I[39]!==P?(b=(0,et.ik)({dateRange:F,granularity:(0,x.tA)(F),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.pod.name"],where:P,table:"metrics",aggFn:"avg",field:"k8s.pod.cpu.utilization - Gauge",numberFormat:et.p2}]},{metric:L}),I[37]=F,I[38]=L,I[39]=P,I[40]=b):b=I[40],I[41]!==b?(v=(0,a.jsx)(C.x.Col,{span:6,children:(0,a.jsx)(y.Z,{p:"md","data-testid":"namespace-details-cpu-usage-chart",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:(0,a.jsx)(V.S,{title:"CPU Usage by Pod",config:b})})})}),I[41]=b,I[42]=v):v=I[42],I[43]!==F||I[44]!==L||I[45]!==P?(j=(0,et.ik)({dateRange:F,granularity:(0,x.tA)(F),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.pod.name"],where:P,table:"metrics",aggFn:"avg",field:"k8s.pod.memory.usage - Gauge",numberFormat:et.JD}]},{metric:L}),I[43]=F,I[44]=L,I[45]=P,I[46]=j):j=I[46],I[47]!==j?(_=(0,a.jsx)(C.x.Col,{span:6,children:(0,a.jsx)(y.Z,{p:"md","data-testid":"namespace-details-memory-usage-chart",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:(0,a.jsx)(V.S,{title:"Memory Usage by Pod",config:j})})})}),I[47]=j,I[48]=_):_=I[48],I[49]!==F||I[50]!==L||I[51]!==P?(S=L&&(0,a.jsx)(eL,{dateRange:F,metricSource:L,where:P}),I[49]=F,I[50]=L,I[51]=P,I[52]=S):S=I[52],I[53]!==S?(w=(0,a.jsx)(C.x.Col,{span:12,children:S}),I[53]=S,I[54]=w):w=I[54],I[55]!==F||I[56]!==R||I[57]!==G?(E=R&&(0,a.jsx)(eh,{where:G,dateRange:F,logSource:R}),I[55]=F,I[56]=R,I[57]=G,I[58]=E):E=I[58],I[59]!==E?(k=(0,a.jsx)(C.x.Col,{span:12,children:E}),I[59]=E,I[60]=k):k=I[60],I[61]!==f||I[62]!==v||I[63]!==_||I[64]!==w||I[65]!==k?(N=(0,a.jsx)(en.y,{children:(0,a.jsxs)(C.x,{children:[f,v,_,w,k]})}),I[61]=f,I[62]=v,I[63]=_,I[64]=w,I[65]=k,I[66]=N):N=I[66],I[67]!==g||I[68]!==N?(A=(0,a.jsxs)("div",{className:ed().panel,children:[g,N]}),I[67]=g,I[68]=N,I[69]=A):A=I[69],I[70]!==D||I[71]!==A?(T=(0,a.jsx)(eo.S.Provider,{value:D,children:A}),I[70]=D,I[71]=A,I[72]=T):T=I[72],I[73]!==D||I[74]!==U||I[75]!==K||I[76]!==T?($=(0,a.jsx)(er._,{opened:K,onClose:U,position:"right",size:"80vw",withCloseButton:!1,zIndex:D,styles:h,children:T}),I[73]=D,I[74]=U,I[75]=K,I[76]=T,I[77]=$):$=I[77],$}var eg=s(92917);let ef=(0,el.lr)("Past 1h",!1),eb=n.memo(e=>{let t,s,n,i=(0,r.c)(7),{label:l,value:o}=e;return o?(i[0]!==l?(t=(0,a.jsx)(w.E,{size:"xs",color:"gray",children:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==o?(s=(0,a.jsx)(w.E,{size:"sm",children:o}),i[2]=o,i[3]=s):s=i[3],i[4]!==t||i[5]!==s?(n=(0,a.jsxs)("div",{className:"pe-4",children:[t,s]}),i[4]=t,i[5]=s,i[6]=n):n=i[6],n):null}),ey=e=>{let t,s,n,i,l,o,c,d=(0,r.c)(19),{name:m,dateRange:u,metricSource:p}=e,h=`${p.resourceAttributesExpression}.k8s.node.name:"${m}"`;if(d[0]!==u||d[1]!==p||d[2]!==h){let e=["k8s.node.name"];t=Q.HD,s=(0,et.ik)({series:[{table:"metrics",field:"k8s.node.condition_ready - Gauge",type:"table",aggFn:"last_value",where:h,groupBy:e},{table:"metrics",field:"k8s.node.uptime - Sum",type:"table",aggFn:void 0,where:h,groupBy:e}],dateRange:u,seriesReturnType:"column"},{metric:p}),d[0]=u,d[1]=p,d[2]=h,d[3]=t,d[4]=s}else t=d[3],s=d[4];let{data:x}=t(s);e:{let e;if(!x){let e;d[5]===Symbol.for("react.memo_cache_sentinel")?(e={},d[5]=e):e=d[5],n=e;break e}let t=x.data?.[0]?.["last_value(k8s.node.condition_ready)"],s=x.data?.[0]?.["undefined(k8s.node.uptime)"];d[6]!==t||d[7]!==s?(e={ready:t,uptime:s},d[6]=t,d[7]=s,d[8]=e):e=d[8],n=e}let g=n;return d[9]!==m?(i=(0,a.jsx)(eb,{label:"Node",value:m}),d[9]=m,d[10]=i):i=d[10],d[11]!==g.ready?(l=void 0!==g.ready&&(0,a.jsx)(eb,{label:"Status",value:1===g.ready?(0,a.jsx)(E.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Ready"}):(0,a.jsx)(E.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Not Ready"})}),d[11]=g.ready,d[12]=l):l=d[12],d[13]!==g.uptime?(o=g.uptime&&(0,a.jsx)(eb,{label:"Uptime",value:(0,eg.Y0)(g.uptime)}),d[13]=g.uptime,d[14]=o):o=d[14],d[15]!==i||d[16]!==l||d[17]!==o?(c=(0,a.jsx)(C.x.Col,{span:12,children:(0,a.jsxs)("div",{className:"p-2 gap-2 d-flex flex-wrap",children:[i,l,o]})}),d[15]=i,d[16]=l,d[17]=o,d[18]=c):c=d[18],c};function ev(e){let t,s,i,l,o,c,d,m,u,p,h,x,g,f,b,v=(0,r.c)(35),{dateRange:_,logSource:S,where:w}=e,[E,k]=n.useState("all"),N=w+("error"===E?" Severity:err":"");v[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{("all"===e||"error"===e)&&k(e)},s=[{label:"All",value:"all"},{label:"Errors",value:"error"}],v[0]=t,v[1]=s):(t=v[0],s=v[1]),v[2]!==E?(i=(0,a.jsx)(y.Z.Section,{p:"md",py:"xs",children:(0,a.jsxs)(A.s,{justify:"space-between",align:"center",children:["Latest Node Logs & Spans",(0,a.jsx)(A.s,{gap:"xs",align:"center",children:(0,a.jsx)(j.I,{size:"xs",value:E,onChange:t,data:s})})]})}),v[2]=E,v[3]=i):i=v[3];let C=S.id;v[4]===Symbol.for("react.memo_cache_sentinel")?(l=[{label:"Node Details"}],v[4]=l):l=v[4],v[5]!==S.timestampValueExpression?(o={valueExpression:S.timestampValueExpression,alias:"Timestamp"},v[5]=S.timestampValueExpression,v[6]=o):o=v[6];let T=`${S.severityTextExpression}`;v[7]!==T?(c={valueExpression:T,alias:"Severity"},v[7]=T,v[8]=c):c=v[8];let $=`${S.serviceNameExpression}`;v[9]!==$?(d={valueExpression:$,alias:"Service"},v[9]=$,v[10]=d):d=v[10],v[11]!==S?(m=(0,ei.N8)(S),v[11]=S,v[12]=m):m=v[12];let I=`${m}`;return v[13]!==I?(u={valueExpression:I,alias:"Message"},v[13]=I,v[14]=u):u=v[14],v[15]!==d||v[16]!==u||v[17]!==o||v[18]!==c?(p=[o,c,d,u],v[15]=d,v[16]=u,v[17]=o,v[18]=c,v[19]=p):p=v[19],v[20]!==S.timestampValueExpression?(h=[{valueExpression:S.timestampValueExpression,ordering:"DESC"}],v[20]=S.timestampValueExpression,v[21]=h):h=v[21],v[22]===Symbol.for("react.memo_cache_sentinel")?(x={limit:200,offset:0},v[22]=x):x=v[22],v[23]!==N||v[24]!==_||v[25]!==S||v[26]!==p||v[27]!==h?(g={...S,where:N,whereLanguage:"lucene",select:p,orderBy:h,limit:x,dateRange:_},v[23]=N,v[24]=_,v[25]=S,v[26]=p,v[27]=h,v[28]=g):g=v[28],v[29]!==S.id||v[30]!==g?(f=(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:(0,a.jsx)(P.A,{sourceId:C,isNestedPanel:!0,breadcrumbPath:l,config:g,isLive:!1,queryKeyPrefix:"k8s-dashboard-node-logs"})}),v[29]=S.id,v[30]=g,v[31]=f):f=v[31],v[32]!==f||v[33]!==i?(b=(0,a.jsxs)(y.Z,{p:"md",children:[i,f]}),v[32]=f,v[33]=i,v[34]=b):b=v[34],b}function ej(e){let t,s,n,i,l,o,c,d,m,u,p,h,g,f,b,v,j,_,S,w,E,k,N,A,T,$,I=(0,r.c)(78),{metricSource:L,logSource:R}=e;I[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,ea.withDefault)(ea.StringParam,""),s={updateType:"replaceIn"},I[0]=t,I[1]=s):(t=I[0],s=I[1]);let[z,M]=(0,ea.useQueryParam)("nodeName",t,s),D=(0,eo.Y)()+10,P=`${L?.resourceAttributesExpression}.k8s.node.name:"${z}"`;I[2]===Symbol.for("react.memo_cache_sentinel")?(n={defaultValue:"Past 1h",defaultTimeRange:[ef?.[0]?.getTime()??-1,ef?.[1]?.getTime()??-1]},I[2]=n):n=I[2];let{searchedTimeRange:F}=(0,el.vM)(n);I[3]!==R?(i=(0,O.VO)(R),I[3]=R,I[4]=i):i=I[4];let{data:H}=(0,B.Z2)(i);I[5]!==R.serviceNameExpression||I[6]!==H?(l=!1,R?.serviceNameExpression&&(H?.primary_key||H?.sorting_key)&&(H.primary_key&&H.primary_key.includes(R.serviceNameExpression)?l=!0:H.sorting_key&&H.sorting_key.includes(R.serviceNameExpression)&&(l=!0)),I[5]=R.serviceNameExpression,I[6]=H,I[7]=l):l=I[7];let W=`${R?.resourceAttributesExpression}.k8s.node.name:"${z}"`,X=R.timestampValueExpression??"";I[8]!==F||I[9]!==R.connection||I[10]!==R.from||I[11]!==R.id||I[12]!==W||I[13]!==X?(o={source:R.id,from:R.from,where:W,whereLanguage:"lucene",select:"",timestampValueExpression:X,connection:R.connection,dateRange:F},I[8]=F,I[9]=R.connection,I[10]=R.from,I[11]=R.id,I[12]=W,I[13]=X,I[14]=o):o=I[14];let Z=R.serviceNameExpression??"";I[15]!==Z?(c=[Z],I[15]=Z,I[16]=c):c=I[16],I[17]!==o||I[18]!==c?(d={chartConfig:o,keys:c,limit:10,disableRowLimit:!1},I[17]=o,I[18]=c,I[19]=d):d=I[19];let q=!!z&&!!R.serviceNameExpression&&l;I[20]!==q?(m={enabled:q},I[20]=q,I[21]=m):m=I[21];let{data:J}=(0,B.lo)(d,m);e:{let e=`${R?.resourceAttributesExpression}.k8s.node.name:"${z}"`;if(J&&J[0].value.length>0&&l){let t,s=J[0].value,a=J[0].key;if(I[22]!==a||I[23]!==s){let e;I[25]!==a?(e=e=>`${a}:"${e}"`,I[25]=a,I[26]=e):e=I[26],t=s.map(e).join(" OR "),I[22]=a,I[23]=s,I[24]=t}else t=I[24];u=`(${t}) AND ${e}`;break e}u=e}let G=u;I[27]!==M?(p=()=>{M(void 0)},I[27]=M,I[28]=p):p=I[28];let U=p;if(!z)return null;let K=!!z;I[29]===Symbol.for("react.memo_cache_sentinel")?(h={body:{padding:0}},I[29]=h):h=I[29];let Y=`Details for ${z}`;return I[30]!==U||I[31]!==Y?(g=(0,a.jsx)(en.B,{header:Y,onClose:U}),I[30]=U,I[31]=Y,I[32]=g):g=I[32],I[33]!==F||I[34]!==L||I[35]!==z?(f=(0,a.jsx)(ey,{name:z,dateRange:F,metricSource:L}),I[33]=F,I[34]=L,I[35]=z,I[36]=f):f=I[36],I[37]!==F||I[38]!==L||I[39]!==P?(b=(0,et.ik)({dateRange:F,granularity:(0,x.tA)(F),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.pod.name"],where:P,table:"metrics",aggFn:"avg",field:"k8s.pod.cpu.utilization - Gauge",numberFormat:et.p2}]},{metric:L}),I[37]=F,I[38]=L,I[39]=P,I[40]=b):b=I[40],I[41]!==b?(v=(0,a.jsx)(C.x.Col,{span:6,children:(0,a.jsx)(y.Z,{p:"md","data-testid":"nodes-details-cpu-usage-chart",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:(0,a.jsx)(V.S,{title:"CPU Usage by Pod",config:b})})})}),I[41]=b,I[42]=v):v=I[42],I[43]!==F||I[44]!==L||I[45]!==P?(j=(0,et.ik)({dateRange:F,granularity:(0,x.tA)(F),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.pod.name"],where:P,table:"metrics",aggFn:"avg",field:"k8s.pod.memory.usage - Gauge",numberFormat:et.JD}]},{metric:L}),I[43]=F,I[44]=L,I[45]=P,I[46]=j):j=I[46],I[47]!==j?(_=(0,a.jsx)(C.x.Col,{span:6,"data-testid":"nodes-details-memory-usage-chart",children:(0,a.jsx)(y.Z,{p:"md",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:(0,a.jsx)(V.S,{title:"Memory Usage by Pod",config:j})})})}),I[47]=j,I[48]=_):_=I[48],I[49]!==F||I[50]!==L||I[51]!==P?(S=L&&(0,a.jsx)(eL,{metricSource:L,dateRange:F,where:P}),I[49]=F,I[50]=L,I[51]=P,I[52]=S):S=I[52],I[53]!==S?(w=(0,a.jsx)(C.x.Col,{span:12,children:S}),I[53]=S,I[54]=w):w=I[54],I[55]!==F||I[56]!==R||I[57]!==G?(E=R&&(0,a.jsx)(ev,{where:G,dateRange:F,logSource:R}),I[55]=F,I[56]=R,I[57]=G,I[58]=E):E=I[58],I[59]!==E?(k=(0,a.jsx)(C.x.Col,{span:12,children:E}),I[59]=E,I[60]=k):k=I[60],I[61]!==f||I[62]!==v||I[63]!==_||I[64]!==w||I[65]!==k?(N=(0,a.jsx)(en.y,{children:(0,a.jsxs)(C.x,{children:[f,v,_,w,k]})}),I[61]=f,I[62]=v,I[63]=_,I[64]=w,I[65]=k,I[66]=N):N=I[66],I[67]!==g||I[68]!==N?(A=(0,a.jsxs)("div",{className:ed().panel,"data-testid":"k8s-node-details-panel",children:[g,N]}),I[67]=g,I[68]=N,I[69]=A):A=I[69],I[70]!==D||I[71]!==A?(T=(0,a.jsx)(eo.S.Provider,{value:D,children:A}),I[70]=D,I[71]=A,I[72]=T):T=I[72],I[73]!==D||I[74]!==U||I[75]!==K||I[76]!==T?($=(0,a.jsx)(er._,{opened:K,onClose:U,position:"right",size:"80vw",withCloseButton:!1,zIndex:D,styles:h,children:T}),I[73]=D,I[74]=U,I[75]=K,I[76]=T,I[77]=$):$=I[77],$}var e_=s(53993),eS=s(50374);let ew=(0,el.lr)("Past 1h",!1),eE=n.memo(e=>{let t,s,n,i=(0,r.c)(7),{label:l,value:o}=e;return o?(i[0]!==l?(t=(0,a.jsx)(w.E,{size:"xs",color:"gray",children:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==o?(s=(0,a.jsx)(w.E,{size:"sm",children:o}),i[2]=o,i[3]=s):s=i[3],i[4]!==t||i[5]!==s?(n=(0,a.jsxs)("div",{className:"pe-4",children:[t,s]}),i[4]=t,i[5]=s,i[6]=n):n=i[6],n):null}),ek=e=>{let t,s,n,i,l,o,c,d,m,u,p,h,x,g,f=(0,r.c)(39),{dateRange:b,logSource:y,podName:v}=e,j=`${y.resourceAttributesExpression}.k8s.pod.name:"${v}"`,_=`${y.resourceAttributesExpression}['k8s.node.name']`;f[0]!==_?(t={valueExpression:_,alias:"k8s.node.name"},f[0]=_,f[1]=t):t=f[1];let S=`${y.resourceAttributesExpression}['k8s.pod.name']`;f[2]!==S?(s={valueExpression:S,alias:"k8s.pod.name"},f[2]=S,f[3]=s):s=f[3];let w=`${y.resourceAttributesExpression}['k8s.pod.uid']`;f[4]!==w?(n={valueExpression:w,alias:"k8s.pod.uid"},f[4]=w,f[5]=n):n=f[5];let E=`${y.resourceAttributesExpression}['k8s.namespace.name']`;f[6]!==E?(i={valueExpression:E,alias:"k8s.namespace.name"},f[6]=E,f[7]=i):i=f[7];let k=`${y.resourceAttributesExpression}['k8s.deployment.name']`;f[8]!==k?(l={valueExpression:k,alias:"k8s.deployment.name"},f[8]=k,f[9]=l):l=f[9],f[10]!==l||f[11]!==t||f[12]!==s||f[13]!==n||f[14]!==i?(o=[t,s,n,i,l],f[10]=l,f[11]=t,f[12]=s,f[13]=n,f[14]=i,f[15]=o):o=f[15],f[16]!==b||f[17]!==y||f[18]!==j||f[19]!==o?(c={where:j,whereLanguage:"lucene",limit:1,dateRange:b,logSource:y,order:"desc",extraSelects:o},f[16]=b,f[17]=y,f[18]=j,f[19]=o,f[20]=c):c=f[20];let{data:N}=(0,F.Qg)(c);if(N?.data?.[0]==null)return null;f[21]!==N.data[0]?(d=N.data[0]??{},f[21]=N.data[0],f[22]=d):d=f[22];let A=d;if(Object.values(A).every(eA))return null;let T=A["k8s.node.name"];f[23]!==T?(m=(0,a.jsx)(eE,{label:"Node",value:T}),f[23]=T,f[24]=m):m=f[24];let $=A["k8s.pod.name"];f[25]!==$?(u=(0,a.jsx)(eE,{label:"Pod",value:$}),f[25]=$,f[26]=u):u=f[26];let I=A["k8s.pod.uid"];f[27]!==I?(p=(0,a.jsx)(eE,{label:"Pod UID",value:I}),f[27]=I,f[28]=p):p=f[28];let L=A["k8s.namespace.name"];f[29]!==L?(h=(0,a.jsx)(eE,{label:"Namespace",value:L}),f[29]=L,f[30]=h):h=f[30];let R=A["k8s.deployment.name"];return f[31]!==R?(x=(0,a.jsx)(eE,{label:"Deployment",value:R}),f[31]=R,f[32]=x):x=f[32],f[33]!==m||f[34]!==u||f[35]!==p||f[36]!==h||f[37]!==x?(g=(0,a.jsx)(C.x.Col,{span:12,children:(0,a.jsxs)("div",{className:"p-2 gap-2 d-flex flex-wrap",children:[m,u,p,h,x]})}),f[33]=m,f[34]=u,f[35]=p,f[36]=h,f[37]=x,f[38]=g):g=f[38],g};function eN(e){let t,s,i,l,o,c,d,m,u,p,h,x,g,f,b,v=(0,r.c)(39),{dateRange:_,logSource:S,where:w}=e,[E,k]=n.useState("all"),N=w+("error"===E?" Severity:err":""),C=S.from,T=S.timestampValueExpression,$=S.implicitColumnExpression,I=S.connection;v[0]!==S.timestampValueExpression?(t={valueExpression:S.timestampValueExpression,alias:"Timestamp"},v[0]=S.timestampValueExpression,v[1]=t):t=v[1];let L=`${S.severityTextExpression}`;v[2]!==L?(s={valueExpression:L,alias:"Severity"},v[2]=L,v[3]=s):s=v[3];let R=`${S.serviceNameExpression}`;v[4]!==R?(i={valueExpression:R,alias:"Service"},v[4]=R,v[5]=i):i=v[5];let z=`${S.resourceAttributesExpression}['k8s.container.name']`;v[6]!==z?(l={valueExpression:z,alias:"Container"},v[6]=z,v[7]=l):l=v[7],v[8]!==S?(o=(0,ei.N8)(S),v[8]=S,v[9]=o):o=v[9];let M=`${o}`;v[10]!==M?(c={valueExpression:M,alias:"Message"},v[10]=M,v[11]=c):c=v[11],v[12]!==l||v[13]!==c||v[14]!==t||v[15]!==s||v[16]!==i?(d=[t,s,i,l,c],v[12]=l,v[13]=c,v[14]=t,v[15]=s,v[16]=i,v[17]=d):d=v[17];let D=`${S.timestampValueExpression} DESC`;v[18]===Symbol.for("react.memo_cache_sentinel")?(m={limit:200,offset:0},v[18]=m):m=v[18],v[19]!==N||v[20]!==_||v[21]!==S.connection||v[22]!==S.from||v[23]!==S.implicitColumnExpression||v[24]!==S.timestampValueExpression||v[25]!==d||v[26]!==D?(u={from:C,where:N,whereLanguage:"lucene",timestampValueExpression:T,implicitColumnExpression:$,connection:I,select:d,orderBy:D,limit:m,dateRange:_},v[19]=N,v[20]=_,v[21]=S.connection,v[22]=S.from,v[23]=S.implicitColumnExpression,v[24]=S.timestampValueExpression,v[25]=d,v[26]=D,v[27]=u):u=v[27];let V=u;return v[28]===Symbol.for("react.memo_cache_sentinel")?(p=e=>{("all"===e||"error"===e)&&k(e)},h=[{label:"All",value:"all"},{label:"Errors",value:"error"}],v[28]=p,v[29]=h):(p=v[28],h=v[29]),v[30]!==E?(x=(0,a.jsx)(y.Z.Section,{p:"md",py:"xs",children:(0,a.jsxs)(A.s,{justify:"space-between",align:"center",children:["Latest Pod Logs & Spans",(0,a.jsx)(A.s,{gap:"xs",align:"center",children:(0,a.jsx)(j.I,{size:"xs",value:E,onChange:p,data:h})})]})}),v[30]=E,v[31]=x):x=v[31],v[32]===Symbol.for("react.memo_cache_sentinel")?(g=[{label:"Pods"}],v[32]=g):g=v[32],v[33]!==S.id||v[34]!==V?(f=(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:(0,a.jsx)(P.A,{sourceId:S.id,config:V,isLive:!1,isNestedPanel:!0,breadcrumbPath:g,queryKeyPrefix:"k8s-dashboard-pod-logs"})}),v[33]=S.id,v[34]=V,v[35]=f):f=v[35],v[36]!==x||v[37]!==f?(b=(0,a.jsxs)(y.Z,{p:"md",children:[x,f]}),v[36]=x,v[37]=f,v[38]=b):b=v[38],b}function eC(e){let t,s,i,l,o,c,d,m,u,p,h,g,f,b,v,j,_,S,w,E,k,N,A,$,I,L,R,z,M,D,P=(0,r.c)(87),{logSource:H,metricSource:W}=e;P[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,ea.withDefault)(ea.StringParam,""),s={updateType:"replaceIn"},P[0]=t,P[1]=s):(t=P[0],s=P[1]);let[X,Z]=(0,ea.useQueryParam)("podName",t,s),[q,J]=n.useState(null);P[2]===Symbol.for("react.memo_cache_sentinel")?(i=[],P[2]=i):i=P[2];let[G,U]=n.useState(i);P[3]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{J(e.where),U(e.aliasWith)},P[3]=l):l=P[3];let K=l;P[4]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{J(null)},P[4]=o):o=P[4];let Y=o,[Q]=(0,ea.useQueryParam)("nodeName",ea.StringParam),[ee]=(0,ea.useQueryParam)("namespaceName",ea.StringParam),es=!!Q||!!ee,ei=(0,eo.Y)()+10+100*!!es,ec=`${W?.resourceAttributesExpression}.k8s.pod.name:"${X}"`;P[5]===Symbol.for("react.memo_cache_sentinel")?(c={defaultValue:"Past 1h",defaultTimeRange:[ew?.[0]?.getTime()??-1,ew?.[1]?.getTime()??-1]},P[5]=c):c=P[5];let{searchedTimeRange:em}=(0,el.vM)(c);P[6]!==H?(d=(0,O.VO)(H),P[6]=H,P[7]=d):d=P[7];let{data:eu}=(0,B.Z2)(d);P[8]!==H.serviceNameExpression||P[9]!==eu?(m=!1,H?.serviceNameExpression&&(eu?.primary_key||eu?.sorting_key)&&(eu.primary_key&&eu.primary_key.includes(H.serviceNameExpression)?m=!0:eu.sorting_key&&eu.sorting_key.includes(H.serviceNameExpression)&&(m=!0)),P[8]=H.serviceNameExpression,P[9]=eu,P[10]=m):m=P[10];let ep=`${H?.resourceAttributesExpression}.k8s.pod.name:"${X}"`,eh=H.timestampValueExpression??"";P[11]!==em||P[12]!==H.connection||P[13]!==H.from||P[14]!==H.id||P[15]!==ep||P[16]!==eh?(u={source:H.id,from:H.from,where:ep,whereLanguage:"lucene",select:"",timestampValueExpression:eh,connection:H.connection,dateRange:em},P[11]=em,P[12]=H.connection,P[13]=H.from,P[14]=H.id,P[15]=ep,P[16]=eh,P[17]=u):u=P[17];let ex=H.serviceNameExpression??"";P[18]!==ex?(p=[ex],P[18]=ex,P[19]=p):p=P[19],P[20]!==u||P[21]!==p?(h={chartConfig:u,keys:p,limit:10,disableRowLimit:!1},P[20]=u,P[21]=p,P[22]=h):h=P[22];let eg=!!X&&!!H.serviceNameExpression&&m;P[23]!==eg?(g={enabled:eg},P[23]=eg,P[24]=g):g=P[24];let{data:ef}=(0,B.lo)(h,g);e:{let e=`${H?.resourceAttributesExpression}.k8s.pod.name:"${X}"`;if(ef&&ef[0].value.length>0&&m){let t,s=ef[0].value,a=ef[0].key;if(P[25]!==a||P[26]!==s){let e;P[28]!==a?(e=e=>`${a}:"${e}"`,P[28]=a,P[29]=e):e=P[29],t=s.map(e).join(" OR "),P[25]=a,P[26]=s,P[27]=t}else t=P[27];f=`(${t}) AND ${e}`;break e}f=e}let eb=f;P[30]!==q||P[31]!==Z?(b=()=>{q||Z(void 0)},P[30]=q,P[31]=Z,P[32]=b):b=P[32];let ey=b;if(!X)return null;let ev=!!X,ej=es?"70vw":"80vw";P[33]===Symbol.for("react.memo_cache_sentinel")?(v={body:{padding:0,height:"100vh"}},P[33]=v):v=P[33];let eE=`Details for ${X}`;P[34]!==ey||P[35]!==eE?(j=(0,a.jsx)(en.B,{header:eE,onClose:ey}),P[34]=ey,P[35]=eE,P[36]=j):j=P[36],P[37]!==em||P[38]!==H||P[39]!==X?(_=(0,a.jsx)(ek,{dateRange:em,logSource:H,podName:X}),P[37]=em,P[38]=H,P[39]=X,P[40]=_):_=P[40],P[41]!==em||P[42]!==W||P[43]!==ec?(S=(0,et.ik)({dateRange:em,granularity:(0,x.tA)(em),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.pod.name"],where:ec,table:"metrics",aggFn:"avg",field:"k8s.pod.cpu.utilization - Gauge",numberFormat:et.p2}]},{metric:W}),P[41]=em,P[42]=W,P[43]=ec,P[44]=S):S=P[44],P[45]!==S?(w=(0,a.jsx)(C.x.Col,{span:6,children:(0,a.jsx)(y.Z,{p:"md","data-testid":"pod-details-cpu-usage-chart",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:(0,a.jsx)(V.S,{title:"CPU Usage by Pod",config:S,showDisplaySwitcher:!1})})})}),P[45]=S,P[46]=w):w=P[46],P[47]!==em||P[48]!==W||P[49]!==ec?(E=(0,et.ik)({dateRange:em,granularity:(0,x.tA)(em),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.pod.name"],where:ec,table:"metrics",aggFn:"avg",field:"k8s.pod.memory.usage - Gauge",numberFormat:et.JD}]},{metric:W}),P[47]=em,P[48]=W,P[49]=ec,P[50]=E):E=P[50],P[51]!==E?(k=(0,a.jsx)(C.x.Col,{span:6,children:(0,a.jsx)(y.Z,{p:"md","data-testid":"pod-details-memory-usage-chart",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:(0,a.jsx)(V.S,{title:"Memory Usage",config:E,showDisplaySwitcher:!1})})})}),P[51]=E,P[52]=k):k=P[52],P[53]===Symbol.for("react.memo_cache_sentinel")?(N=(0,a.jsx)(y.Z.Section,{p:"md",py:"xs",children:"Latest Pod Events"}),P[53]=N):N=P[53],P[54]===Symbol.for("react.memo_cache_sentinel")?(A={style:{maxHeight:300}},P[54]=A):A=P[54];let eC=`\`k8s.pod.name\`:"${X}"`;return P[55]!==em||P[56]!==H||P[57]!==eC?($=(0,a.jsx)(C.x.Col,{span:12,children:(0,a.jsxs)(y.Z,{p:"md",children:[N,(0,a.jsx)(y.Z.Section,{children:(0,a.jsx)(e_.F,{viewportProps:A,children:(0,a.jsx)(T.a,{p:"md",py:"sm",children:(0,a.jsx)(F.FB,{logSource:H,q:eC,dateRange:em})})})})]})}),P[55]=em,P[56]=H,P[57]=eC,P[58]=$):$=P[58],P[59]!==em||P[60]!==H||P[61]!==eb||P[62]!==q?(I=(0,a.jsx)(C.x.Col,{span:12,children:(0,a.jsx)(eN,{logSource:H,where:eb,dateRange:em,rowId:q,onRowClick:K})}),P[59]=em,P[60]=H,P[61]=eb,P[62]=q,P[63]=I):I=P[63],P[64]!==_||P[65]!==w||P[66]!==k||P[67]!==$||P[68]!==I?(L=(0,a.jsx)(en.y,{children:(0,a.jsxs)(C.x,{children:[_,w,k,$,I]})}),P[64]=_,P[65]=w,P[66]=k,P[67]=$,P[68]=I,P[69]=L):L=P[69],P[70]!==G||P[71]!==H||P[72]!==q?(R=q&&(0,a.jsx)(eS.A,{source:H,rowId:q,aliasWith:G,onClose:Y,isNestedPanel:!0}),P[70]=G,P[71]=H,P[72]=q,P[73]=R):R=P[73],P[74]!==j||P[75]!==L||P[76]!==R?(z=(0,a.jsxs)("div",{className:ed().panel,"data-testid":"k8s-pod-details-panel",children:[j,L,R]}),P[74]=j,P[75]=L,P[76]=R,P[77]=z):z=P[77],P[78]!==ei||P[79]!==z?(M=(0,a.jsx)(eo.S.Provider,{value:ei,children:z}),P[78]=ei,P[79]=z,P[80]=M):M=P[80],P[81]!==ei||P[82]!==ey||P[83]!==ev||P[84]!==ej||P[85]!==M?(D=(0,a.jsx)(er._,{opened:ev,onClose:ey,position:"right",size:ej,withCloseButton:!1,zIndex:ei,styles:v,children:M}),P[81]=ei,P[82]=ey,P[83]=ev,P[84]=ej,P[85]=M,P[86]=D):D=P[86],D}function eA(e){return!e}var eT=s(9897);let e$=n.memo(e=>{let t,s,n,i,l=(0,r.c)(13),{children:o,onSort:c,sort:d,style:u}=e,p=!!c;return l[0]!==p?(t=m()({"cursor-pointer":p},"text-nowrap"),l[0]=p,l[1]=t):t=l[1],l[2]!==c||l[3]!==d?(s=()=>c?.("asc"===d?"desc":"asc"),l[2]=c,l[3]=d,l[4]=s):s=l[4],l[5]!==d?(n=!!d&&("asc"===d?(0,a.jsx)(I.A,{size:12,className:"ps-1"}):(0,a.jsx)(L.A,{size:12,className:"ps-1"})),l[5]=d,l[6]=n):n=l[6],l[7]!==o||l[8]!==u||l[9]!==t||l[10]!==s||l[11]!==n?(i=(0,a.jsxs)(f.X.Th,{style:u,className:t,onClick:s,children:[o,n]}),l[7]=o,l[8]=u,l[9]=t,l[10]=s,l[11]=n,l[12]=i):i=l[12],i}),eI=()=>{let e,t,s,n,i=(0,r.c)(4);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(f.X.Tr,{children:(0,a.jsx)(f.X.Td,{children:(0,a.jsx)(b.E,{height:8,my:6})})}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(f.X.Tr,{children:(0,a.jsx)(f.X.Td,{children:(0,a.jsx)(b.E,{height:8,my:6})})}),i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(f.X.Tr,{children:(0,a.jsx)(f.X.Td,{children:(0,a.jsx)(b.E,{height:8,my:6})})}),i[2]=s):s=i[2],i[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(f.X,{horizontalSpacing:"md",highlightOnHover:!0,children:(0,a.jsxs)(f.X.Tbody,{children:[e,t,s,(0,a.jsx)(f.X.Tr,{children:(0,a.jsx)(f.X.Td,{children:(0,a.jsx)(b.E,{height:8,my:6})})})]},"table-loader")}),i[3]=n):n=i[3],n},eL=({dateRange:e,metricSource:t,where:s})=>{let[r,i]=n.useState("running");(0,n.useEffect)(()=>{s&&i("all")},[s]);let[l,o]=n.useState({column:"restarts",order:"desc"}),d=["k8s.pod.name","k8s.namespace.name","k8s.node.name"],{data:m,isError:u,isLoading:p}=(0,Q.HD)({...(0,et.ik)({series:[{table:"metrics",field:"k8s.pod.phase - Gauge",type:"table",aggFn:"last_value",where:s,groupBy:d},{table:"metrics",field:"k8s.container.restarts - Gauge",type:"table",aggFn:"last_value",where:s,groupBy:d},{table:"metrics",field:"k8s.pod.uptime - Sum",type:"table",aggFn:void 0,where:s,groupBy:d},{table:"metrics",field:"k8s.pod.cpu.utilization - Gauge",type:"table",aggFn:"avg",where:s,groupBy:d},{table:"metrics",field:"k8s.pod.cpu_limit_utilization - Gauge",type:"table",aggFn:"avg",where:s,groupBy:d},{table:"metrics",field:"k8s.pod.memory.usage - Gauge",type:"table",aggFn:"avg",where:s,groupBy:d},{table:"metrics",field:"k8s.pod.memory_limit_utilization - Gauge",type:"table",aggFn:"avg",where:s,groupBy:d}],dateRange:e,seriesReturnType:"column"},{metric:t}),limit:{limit:1e4,offset:0}}),h=t.resourceAttributesExpression,x=n.useMemo(()=>m?m.data.filter(e=>"all"===r||e["last_value(k8s.pod.phase)"]===(e=>{switch(e){case"running":return eT.h.Running;case"succeeded":return eT.h.Succeeded;case"pending":return eT.h.Pending;case"failed":return eT.h.Failed;default:return eT.h.Unknown}})(r)).map((e,t)=>({id:`pod-${t}`,name:e[`arrayElement(${h}, 'k8s.pod.name')`],namespace:e[`arrayElement(${h}, 'k8s.namespace.name')`],node:e[`arrayElement(${h}, 'k8s.node.name')`],restarts:e["last_value(k8s.container.restarts)"],uptime:e["undefined(k8s.pod.uptime)"],cpuAvg:e["avg(k8s.pod.cpu.utilization)"],cpuLimitUtilization:e["avg(k8s.pod.cpu_limit_utilization)"],memAvg:e["avg(k8s.pod.memory.usage)"],memLimitUtilization:e["avg(k8s.pod.memory_limit_utilization)"],phase:e["last_value(k8s.pod.phase)"]})).sort((e,t)=>{let s=e=>{switch(l.column){case"phase":return e.phase;case"restarts":return e.restarts;case"uptime":return e.uptime;case"cpuLimit":return e.cpuLimitUtilization;case"memLimit":return e.memLimitUtilization}},a=s(e),r=s(t);if(null==a&&null==r)return 0;if(null==a)return 1;if(null==r)return -1;let n=a<r?-1:+(a>r);return"asc"===l.order?n:-n}):[],[m,r,l,h]),g=m?.data&&m.data.length>=1e4,b=n.useCallback(e=>{let t=new URLSearchParams(window.location.search);return t.set("podName",`${e}`),window.location.pathname+"?"+t.toString()},[]),E=e=>({onSort:t=>{o({column:e,order:t})},sort:l.column===e?l.order:null}),k=(0,n.useRef)(null),N=(0,z.Te)({count:x.length,getScrollElement:()=>k.current,estimateSize:(0,n.useCallback)(()=>40,[]),overscan:10}),C=N.getVirtualItems(),A=N.getTotalSize(),[T,$]=(0,n.useMemo)(()=>C.length>0?[Math.max(0,C[0].start-N.options.scrollMargin),Math.max(0,A-C[C.length-1].end)]:[0,0],[C,N.options.scrollMargin,A]);return(0,a.jsxs)(y.Z,{p:"md","data-testid":"k8s-pods-table",children:[(0,a.jsx)(y.Z.Section,{p:"md",py:"xs",children:(0,a.jsxs)(v.Y,{align:"center",justify:"space-between",children:["Pods",(0,a.jsx)(j.I,{size:"xs",value:r,onChange:i,data:[{label:"Running",value:"running"},{label:"Succeeded",value:"succeeded"},{label:"Pending",value:"pending"},{label:"Failed",value:"failed"},{label:"All",value:"all"}]})]})}),g&&!p&&!u&&x.length>0&&(0,a.jsx)(y.Z.Section,{px:"md",py:"xs",children:(0,a.jsxs)(_.F,{variant:"light",color:"blue",children:["Showing first ",1e4.toLocaleString()," pods. Use the filters above to narrow your search."]})}),(0,a.jsx)(y.Z.Section,{children:(0,a.jsx)("div",{ref:k,style:{height:"300px",overflow:"auto"},children:p?(0,a.jsx)(eI,{}):u?(0,a.jsx)("div",{className:"p-4 text-center text-muted fs-8",children:"Unable to load pod metrics"}):0===x.length?(0,a.jsx)("div",{className:"p-4 text-center text-muted fs-8",children:"No pods found"}):(0,a.jsxs)(f.X,{horizontalSpacing:"md",highlightOnHover:!0,children:[(0,a.jsx)(f.X.Thead,{className:"muted-thead",children:(0,a.jsxs)(f.X.Tr,{children:[(0,a.jsx)(e$,{children:"Name"}),(0,a.jsx)(e$,{children:"Namespace"}),(0,a.jsx)(e$,{children:"Node"}),(0,a.jsx)(e$,{...E("phase"),style:{width:130},children:"Status"}),(0,a.jsx)(e$,{...E("cpuLimit"),style:{width:100},children:"CPU/Limit"}),(0,a.jsx)(e$,{...E("memLimit"),style:{width:100},children:"Mem/Limit"}),(0,a.jsx)(e$,{...E("uptime"),style:{width:80},children:"Age"}),(0,a.jsx)(e$,{...E("restarts"),style:{width:100},children:"Restarts"})]})}),(0,a.jsxs)(f.X.Tbody,{children:[T>0&&(0,a.jsx)(f.X.Tr,{children:(0,a.jsx)(f.X.Td,{colSpan:8,style:{height:`${T}px`}})}),C.map(e=>{let t=x[e.index];return(0,a.jsx)(c(),{href:b(t.name),style:{display:"contents"},children:(0,a.jsxs)(f.X.Tr,{className:"cursor-pointer",ref:N.measureElement,"data-index":e.index,children:[(0,a.jsx)(f.X.Td,{children:t.name}),(0,a.jsx)(f.X.Td,{"data-testid":`k8s-pods-table-namespace-${t.id}`,children:t.namespace}),(0,a.jsx)(f.X.Td,{children:t.node}),(0,a.jsx)(f.X.Td,{children:(0,a.jsx)(F.xD,{status:t.phase})}),(0,a.jsx)(f.X.Td,{children:(0,a.jsx)(S.m,{color:"gray",label:(0,eg.ZV)(t.cpuAvg,et.p2)+" avg",children:(0,a.jsx)(w.E,{span:!0,c:t.cpuLimitUtilization?void 0:"gray",children:t.cpuLimitUtilization?(0,eg.ZV)(t.cpuLimitUtilization,et.p2):"-"})})}),(0,a.jsx)(f.X.Td,{children:(0,a.jsx)(S.m,{color:"gray",label:(0,eg.ZV)(t.memAvg,et.JD)+" avg",children:(0,a.jsx)(w.E,{span:!0,c:t.memLimitUtilization?void 0:"gray",children:t.memLimitUtilization?(0,eg.ZV)(t.memLimitUtilization,et.p2):"-"})})}),(0,a.jsx)(f.X.Td,{children:(0,a.jsx)(w.E,{span:!0,c:t.uptime?void 0:"gray",children:t.uptime?(0,eg.Y0)(t.uptime):"â€“"})}),(0,a.jsx)(f.X.Td,{children:(0,a.jsx)(w.E,{color:t.restarts>=10?"red":t.restarts>=5?"yellow":"gray",children:t.restarts})})]})},t.id)}),$>0&&(0,a.jsx)(f.X.Tr,{children:(0,a.jsx)(f.X.Td,{colSpan:8,style:{height:`${$}px`}})})]})]})})})]})},eR=e=>{let t,s,n,i,l,o,d,m,u,p=(0,r.c)(27),{metricSource:h,where:x,dateRange:g}=e;if(p[0]!==g||p[1]!==h||p[2]!==x){let e=["k8s.node.name"];s=Q.HD,t=(0,et.ik)({series:[{table:"metrics",field:"k8s.node.cpu.utilization - Gauge",type:"table",aggFn:"avg",where:x,groupBy:e},{table:"metrics",field:"k8s.node.memory.usage - Gauge",type:"table",aggFn:"avg",where:x,groupBy:e},{table:"metrics",field:"k8s.node.condition_ready - Gauge",type:"table",aggFn:"avg",where:x,groupBy:e},{table:"metrics",field:"k8s.node.uptime - Sum",type:"table",aggFn:void 0,where:x,groupBy:e}],dateRange:g,seriesReturnType:"column"},{metric:h}),p[0]=g,p[1]=h,p[2]=x,p[3]=t,p[4]=s}else t=p[3],s=p[4];p[5]===Symbol.for("react.memo_cache_sentinel")?(n={limit:1e4,offset:0},p[5]=n):n=p[5],p[6]!==t?(i={...t,limit:n},p[6]=t,p[7]=i):i=p[7];let{data:b,isError:v,isLoading:j}=s(i),_=h.resourceAttributesExpression;e:{let e;if(!b){let e;p[8]===Symbol.for("react.memo_cache_sentinel")?(e=[],p[8]=e):e=p[8],l=e;break e}if(p[9]!==b.data||p[10]!==_){let t;p[12]!==_?(t=e=>({name:e[`arrayElement(${_}, 'k8s.node.name')`],cpuAvg:e["avg(k8s.node.cpu.utilization)"],memAvg:e["avg(k8s.node.memory.usage)"],ready:e["avg(k8s.node.condition_ready)"],uptime:e["undefined(k8s.node.uptime)"]}),p[12]=_,p[13]=t):t=p[13],e=b.data.map(t),p[9]=b.data,p[10]=_,p[11]=e}else e=p[11];l=e}let S=l,{containerRef:w,rowVirtualizer:k,virtualItems:N,paddingTop:C,paddingBottom:A}=D(S.length,40,10);return p[14]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(y.Z.Section,{p:"md",py:"xs",children:"Nodes"}),p[14]=o):o=p[14],p[15]===Symbol.for("react.memo_cache_sentinel")?(d={height:"300px",overflow:"auto"},p[15]=d):d=p[15],p[16]!==v||p[17]!==j||p[18]!==N||p[19]!==S||p[20]!==A||p[21]!==C||p[22]!==k?(m=j?(0,a.jsx)(eI,{}):v?(0,a.jsx)("div",{className:"p-4 text-center text-muted fs-8",children:"Unable to load nodes"}):0===S.length?(0,a.jsx)("div",{className:"p-4 text-center text-muted fs-8",children:"No nodes found"}):(0,a.jsxs)(f.X,{horizontalSpacing:"md",highlightOnHover:!0,children:[(0,a.jsx)(f.X.Thead,{className:"muted-thead",children:(0,a.jsxs)(f.X.Tr,{children:[(0,a.jsx)(f.X.Th,{children:"Node"}),(0,a.jsx)(f.X.Th,{style:{width:130},children:"Status"}),(0,a.jsx)(f.X.Th,{style:{width:130},children:"CPU"}),(0,a.jsx)(f.X.Th,{style:{width:130},children:"Memory"}),(0,a.jsx)(f.X.Th,{style:{width:130},children:"Uptime"})]})}),(0,a.jsxs)(f.X.Tbody,{children:[C>0&&(0,a.jsx)(f.X.Tr,{children:(0,a.jsx)(f.X.Td,{colSpan:5,style:{height:`${C}px`}})}),N.map(e=>{let t=S[e.index];return(0,a.jsx)(c(),{href:function(e){let t=new URLSearchParams(window.location.search);return t.set("nodeName",`${e}`),window.location.pathname+"?"+t.toString()}(t.name),style:{display:"contents"},children:(0,a.jsxs)(f.X.Tr,{className:"cursor-pointer",ref:k.measureElement,"data-index":e.index,children:[(0,a.jsx)(f.X.Td,{children:t.name||"N/A"}),(0,a.jsx)(f.X.Td,{children:1===t.ready?(0,a.jsx)(E.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Ready"}):(0,a.jsx)(E.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Not Ready"})}),(0,a.jsx)(f.X.Td,{children:(0,eg.ZV)(t.cpuAvg,et.p2)}),(0,a.jsx)(f.X.Td,{children:(0,eg.ZV)(t.memAvg,et.JD)}),(0,a.jsx)(f.X.Td,{children:t.uptime?(0,eg.Y0)(t.uptime):"â€“"})]})},t.name)}),A>0&&(0,a.jsx)(f.X.Tr,{children:(0,a.jsx)(f.X.Td,{colSpan:5,style:{height:`${A}px`}})})]})]}),p[16]=v,p[17]=j,p[18]=N,p[19]=S,p[20]=A,p[21]=C,p[22]=k,p[23]=m):m=p[23],p[24]!==w||p[25]!==m?(u=(0,a.jsxs)(y.Z,{p:"md","data-testid":"k8s-nodes-table",children:[o,(0,a.jsx)(y.Z.Section,{children:(0,a.jsx)("div",{ref:w,style:d,children:m})})]}),p[24]=w,p[25]=m,p[26]=u):u=p[26],u},ez=e=>{let t,s,n,i,l,o,d,m,p,h=(0,r.c)(27),{dateRange:x,metricSource:g,where:b}=e;if(h[0]!==x[1]||h[1]!==g||h[2]!==b){let e=["k8s.namespace.name"];s=Q.HD,t=(0,et.ik)({series:[{table:"metrics",field:"k8s.pod.cpu.utilization - Gauge",type:"table",aggFn:"sum",where:b,groupBy:e},{table:"metrics",field:"k8s.pod.memory.usage - Gauge",type:"table",aggFn:"sum",where:b,groupBy:e},{table:"metrics",field:"k8s.namespace.phase - Gauge",type:"table",aggFn:"last_value",where:b,groupBy:e}],dateRange:[(0,u.A)(x[1]??new Date,{minutes:5}),x[1]??new Date],seriesReturnType:"column"},{metric:g}),h[0]=x[1],h[1]=g,h[2]=b,h[3]=t,h[4]=s}else t=h[3],s=h[4];h[5]===Symbol.for("react.memo_cache_sentinel")?(n={limit:1e4,offset:0},h[5]=n):n=h[5],h[6]!==t?(i={...t,limit:n},h[6]=t,h[7]=i):i=h[7];let{data:v,isError:j,isLoading:_}=s(i),S=g.resourceAttributesExpression;e:{let e;if(!v){let e;h[8]===Symbol.for("react.memo_cache_sentinel")?(e=[],h[8]=e):e=h[8],l=e;break e}if(h[9]!==v.data||h[10]!==S){let t;h[12]!==S?(t=e=>({name:e[`arrayElement(${S}, 'k8s.namespace.name')`],cpuAvg:e["sum(k8s.pod.cpu.utilization)"],memAvg:e["sum(k8s.pod.memory.usage)"],phase:e["last_value(k8s.namespace.phase)"]}),h[12]=S,h[13]=t):t=h[13],e=v.data.map(t),h[9]=v.data,h[10]=S,h[11]=e}else e=h[11];l=e}let w=l,{containerRef:k,rowVirtualizer:N,virtualItems:C,paddingTop:A,paddingBottom:T}=D(w.length,40,10);return h[14]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(y.Z.Section,{p:"md",py:"xs",children:"Namespaces"}),h[14]=o):o=h[14],h[15]===Symbol.for("react.memo_cache_sentinel")?(d={height:"300px",overflow:"auto"},h[15]=d):d=h[15],h[16]!==j||h[17]!==_||h[18]!==C||h[19]!==w||h[20]!==T||h[21]!==A||h[22]!==N?(m=_?(0,a.jsx)(eI,{}):j?(0,a.jsx)("div",{className:"p-4 text-center text-muted fs-8",children:"Unable to load namespaces"}):0===w.length?(0,a.jsx)("div",{className:"p-4 text-center text-muted fs-8",children:"No namespaces found"}):(0,a.jsxs)(f.X,{horizontalSpacing:"md",highlightOnHover:!0,children:[(0,a.jsx)(f.X.Thead,{className:"muted-thead",children:(0,a.jsxs)(f.X.Tr,{children:[(0,a.jsx)(f.X.Th,{children:"Namespace"}),(0,a.jsx)(f.X.Th,{style:{width:130},children:"Phase"}),(0,a.jsx)(f.X.Th,{style:{width:130},children:"CPU"}),(0,a.jsx)(f.X.Th,{style:{width:130},children:"Memory"})]})}),(0,a.jsxs)(f.X.Tbody,{children:[A>0&&(0,a.jsx)(f.X.Tr,{children:(0,a.jsx)(f.X.Td,{colSpan:4,style:{height:`${A}px`}})}),C.map(e=>{let t=w[e.index];return(0,a.jsx)(c(),{href:function(e){let t=new URLSearchParams(window.location.search);return t.set("namespaceName",`${e}`),window.location.pathname+"?"+t.toString()}(t.name),style:{display:"contents"},children:(0,a.jsxs)(f.X.Tr,{className:"cursor-pointer",ref:N.measureElement,"data-index":e.index,children:[(0,a.jsx)(f.X.Td,{children:t.name||"N/A"}),(0,a.jsx)(f.X.Td,{children:1===t.phase?(0,a.jsx)(E.E,{variant:"light",color:"green",fw:"normal",tt:"none",size:"md",children:"Ready"}):(0,a.jsx)(E.E,{variant:"light",color:"red",fw:"normal",tt:"none",size:"md",children:"Terminating"})}),(0,a.jsx)(f.X.Td,{children:(0,eg.ZV)(t.cpuAvg,et.p2)}),(0,a.jsx)(f.X.Td,{children:(0,eg.ZV)(t.memAvg,et.JD)})]})},t.name)}),T>0&&(0,a.jsx)(f.X.Tr,{children:(0,a.jsx)(f.X.Td,{colSpan:4,style:{height:`${T}px`}})})]})]}),h[16]=j,h[17]=_,h[18]=C,h[19]=w,h[20]=T,h[21]=A,h[22]=N,h[23]=m):m=h[23],h[24]!==k||h[25]!==m?(p=(0,a.jsxs)(y.Z,{p:"md","data-testid":"k8s-namespaces-table",children:[o,(0,a.jsx)(y.Z.Section,{children:(0,a.jsx)("div",{ref:k,style:d,children:m})})]}),h[24]=k,h[25]=m,h[26]=p):p=h[26],p},eM=(0,el.lr)("Past 1h",!1),eD=(e,t)=>{if(!e)return;let{kind:s,connection:a,id:r}=t;return e.find(e=>(void 0===s||e.kind===s)&&(void 0===r||e.id===r)&&(void 0===a||e.connection===a))};function eP(){let e,t,s,i,l,o,c,d,m,u,f,b,j,_,E,I,L,z,D,F,O,H,W,X,q,J,G,Q,es,ea,er,en,eo,ec,ed,em,eu,ep,eh,eg,ef,eb,ey,ev,e_,eS,ew,eE,ek,eN,eA,eT,e$,eI,eP,eV,eF,eO,eH,eW,eB,eX,eZ,eq,eJ,eG,eU,eK,eY,eQ=(0,r.c)(208),{data:e0}=(0,ei.oE)(),[e1,e2]=(0,p.ZA)("logSource"),[e3,e4]=(0,p.ZA)("metricSource");eQ[0]!==e1||eQ[1]!==e3||eQ[2]!==e0?(e=((e,t,s)=>{if(e&&t||!s)return{logSourceId:e??void 0,metricSourceId:t??void 0};if(e&&!t){let{connection:t,metricSourceId:a}=eD(s,{id:e})??{};return{logSourceId:e,metricSourceId:(a&&eD(s,{id:a})?.id)??(t&&eD(s,{connection:t,kind:g.GL.Metric})?.id)}}if(!e&&t){let{connection:e,logSourceId:a}=eD(s,{id:t})??{};return{logSourceId:(a&&eD(s,{id:a})?.id)??(e&&eD(s,{connection:e,kind:g.GL.Log})?.id),metricSourceId:t}}let a=s.find(e=>e.kind===g.GL.Log&&e.metricSourceId&&eD(s,{id:e.metricSourceId}));if(a)return{logSourceId:a.id,metricSourceId:a.metricSourceId};let r=Array.from(new Set(s.map(e=>e.connection))).find(e=>eD(s,{connection:e,kind:g.GL.Log})&&eD(s,{connection:e,kind:g.GL.Metric})),n=r?eD(s,{connection:r,kind:g.GL.Log}):void 0,i=r?eD(s,{connection:r,kind:g.GL.Metric}):void 0;return{logSourceId:n?.id,metricSourceId:i?.id}})(e1,e3,e0),eQ[0]=e1,eQ[1]=e3,eQ[2]=e0,eQ[3]=e):e=eQ[3];let{logSourceId:e5,metricSourceId:e6}=e;eQ[4]!==e5||eQ[5]!==e0?(t=e0?.find(e=>e.id===e5),eQ[4]=e5,eQ[5]=e0,eQ[6]=t):t=eQ[6];let e7=t;eQ[7]!==e6||eQ[8]!==e0?(s=e0?.find(e=>e.id===e6),eQ[7]=e6,eQ[8]=e0,eQ[9]=s):s=eQ[9];let e8=s;eQ[10]!==e5||eQ[11]!==e6?(i={values:{logSourceId:e5,metricSourceId:e6}},eQ[10]=e5,eQ[11]=e6,eQ[12]=i):i=eQ[12];let{control:e9}=(0,h.mN)(i);eQ[13]!==e9?(l={control:e9,name:"logSourceId"},eQ[13]=e9,eQ[14]=l):l=eQ[14];let te=(0,h.FH)(l);eQ[15]!==e9?(o={control:e9,name:"metricSourceId"},eQ[15]=e9,eQ[16]=o):o=eQ[16];let tt=(0,h.FH)(o),ts=(0,n.useRef)(e5),ta=(0,n.useRef)(e6);eQ[17]!==e1||eQ[18]!==e5||eQ[19]!==e2?(c=()=>{e5&&e5!==e1&&e2(e5)},d=[e5,e1,e2],eQ[17]=e1,eQ[18]=e5,eQ[19]=e2,eQ[20]=c,eQ[21]=d):(c=eQ[20],d=eQ[21]),(0,n.useEffect)(c,d),eQ[22]!==e3||eQ[23]!==e6||eQ[24]!==e4?(m=()=>{e6&&e6!==e3&&e4(e6)},u=[e6,e3,e4],eQ[22]=e3,eQ[23]=e6,eQ[24]=e4,eQ[25]=m,eQ[26]=u):(m=eQ[25],u=eQ[26]),(0,n.useEffect)(m,u),eQ[27]!==e2||eQ[28]!==e4||eQ[29]!==e0||eQ[30]!==te||eQ[31]!==tt?(f=()=>{if(te!==ts.current&&(ts.current=te,e2(te??null),te&&e0)){let e=eD(e0,{id:te}),t=e?.metricSourceId?eD(e0,{id:e.metricSourceId}):void 0;t&&t.id!==tt?(e4(t.id),$.$e.show({id:`${t.id}-auto-correlated-metric-source`,title:"Updated Metrics Source",message:`Using correlated metrics source: ${t.name}`})):e&&!t&&$.$e.show({id:`${e.id}-not-correlated`,title:"Warning",message:"The selected logs source is not correlated with a metrics source. Source correlations can be configured in Team Settings.",color:"yellow"})}},b=[te,tt,e0,e2,e4],eQ[27]=e2,eQ[28]=e4,eQ[29]=e0,eQ[30]=te,eQ[31]=tt,eQ[32]=f,eQ[33]=b):(f=eQ[32],b=eQ[33]),(0,n.useEffect)(f,b),eQ[34]!==e2||eQ[35]!==e4||eQ[36]!==e0||eQ[37]!==te||eQ[38]!==tt?(j=()=>{if(tt!==ta.current&&(ta.current=tt,e4(tt??null),tt&&e0)){let e=eD(e0,{id:tt}),t=e?.logSourceId?eD(e0,{id:e.logSourceId}):void 0;t&&t.id!==te?(e2(t.id),$.$e.show({id:`${t.id}-auto-correlated-log-source`,title:"Updated Logs Source",message:`Using correlated logs source: ${t.name}`})):e&&!t&&$.$e.show({id:`${e.id}-not-correlated`,title:"Warning",message:"The selected metrics source is not correlated with a logs source. Source correlations can be configured in Team Settings.",color:"yellow"})}},_=[tt,te,e0,e4,e2],eQ[34]=e2,eQ[35]=e4,eQ[36]=e0,eQ[37]=te,eQ[38]=tt,eQ[39]=j,eQ[40]=_):(j=eQ[39],_=eQ[40]),(0,n.useEffect)(j,_),eQ[41]===Symbol.for("react.memo_cache_sentinel")?(E={defaultValue:"pods"},eQ[41]=E):E=eQ[41];let[tr,tn]=(0,p.ZA)("tab",E);eQ[42]===Symbol.for("react.memo_cache_sentinel")?(I={defaultValue:""},eQ[42]=I):I=eQ[42];let[ti,tl]=(0,p.ZA)("q",I);eQ[43]===Symbol.for("react.memo_cache_sentinel")?(L={defaultValue:"Past 1h",defaultTimeRange:[eM?.[0]?.getTime()??-1,eM?.[1]?.getTime()??-1]},eQ[43]=L):L=eQ[43];let{searchedTimeRange:to,displayedTimeInputValue:tc,setDisplayedTimeInputValue:td,onSearch:tm,onTimeRangeSelect:tu}=(0,el.vM)(L);eQ[44]!==to||eQ[45]!==tu?(z={searchedTimeRange:to,onTimeRangeSelect:tu,isLive:!1},eQ[44]=to,eQ[45]=tu,eQ[46]=z):z=eQ[46];let{manualRefreshCooloff:tp,refresh:th}=(0,ee.r)(z);n.useState(null),eQ[47]!==e7?(D=e7&&{databaseName:e7.from.databaseName,tableName:e7.from.tableName,connectionId:e7.connection},eQ[47]=e7,eQ[48]=D):D=eQ[48];let{data:tx,isLoading:tg}=(0,B.n$)(D);e:{let e;if(tg||!e7){F=void 0;break e}if(e7.eventAttributesExpression&&tx?.includes(e7.eventAttributesExpression)){let e,t=`${e7.eventAttributesExpression}.object.type.:String`,s=`${e7.eventAttributesExpression}.object.regarding.kind.:String`,a=`${e7.eventAttributesExpression}.object.regarding.name.:String`,r=`${e7.eventAttributesExpression}.object.note.:String`;eQ[49]!==t||eQ[50]!==s||eQ[51]!==a||eQ[52]!==r?(e={Severity:t,Kind:s,Name:a,Message:r},eQ[49]=t,eQ[50]=s,eQ[51]=a,eQ[52]=r,eQ[53]=e):e=eQ[53],F=e;break e}let t=`JSONExtractString(${e7.eventAttributesExpression}['object'], 'type')`,s=`JSONExtractString(${e7.eventAttributesExpression}['object'], 'regarding', 'kind')`,a=`JSONExtractString(${e7.eventAttributesExpression}['object'], 'regarding', 'name')`,r=`JSONExtractString(${e7.eventAttributesExpression}['object'], 'note')`;eQ[54]!==t||eQ[55]!==s||eQ[56]!==a||eQ[57]!==r?(e={Severity:t,Kind:s,Name:a,Message:r},eQ[54]=t,eQ[55]=s,eQ[56]=a,eQ[57]=r,eQ[58]=e):e=eQ[58],F=e}let tf=F;return eQ[59]===Symbol.for("react.memo_cache_sentinel")?(O=(0,a.jsx)(U.A,{requireSource:!1}),eQ[59]=O):O=eQ[59],eQ[60]!==e7||eQ[61]!==e8?(H=e8&&e7&&(0,a.jsx)(eC,{logSource:e7,metricSource:e8}),eQ[60]=e7,eQ[61]=e8,eQ[62]=H):H=eQ[62],eQ[63]!==e7||eQ[64]!==e8?(W=e8&&e7&&(0,a.jsx)(ej,{metricSource:e8,logSource:e7}),eQ[63]=e7,eQ[64]=e8,eQ[65]=W):W=eQ[65],eQ[66]!==e7||eQ[67]!==e8?(X=e8&&e7&&(0,a.jsx)(ex,{metricSource:e8,logSource:e7}),eQ[66]=e7,eQ[67]=e8,eQ[68]=X):X=eQ[68],eQ[69]===Symbol.for("react.memo_cache_sentinel")?(q=(0,a.jsx)(w.E,{size:"xl",children:"Kubernetes Dashboard"}),eQ[69]=q):q=eQ[69],eQ[70]===Symbol.for("react.memo_cache_sentinel")?(J=[g.GL.Log],eQ[70]=J):J=eQ[70],eQ[71]!==e7?(G=(0,a.jsx)(K.A,{source:e7,variant:"text"}),eQ[71]=e7,eQ[72]=G):G=eQ[72],eQ[73]!==e9||eQ[74]!==G?(Q=(0,a.jsx)(Y.W,{name:"logSourceId",control:e9,allowedSourceKinds:J,size:"xs",allowDeselect:!1,sourceSchemaPreview:G}),eQ[73]=e9,eQ[74]=G,eQ[75]=Q):Q=eQ[75],eQ[76]===Symbol.for("react.memo_cache_sentinel")?(es=[g.GL.Metric],eQ[76]=es):es=eQ[76],eQ[77]!==e8?(ea=(0,a.jsx)(K.A,{source:e8,variant:"text"}),eQ[77]=e8,eQ[78]=ea):ea=eQ[78],eQ[79]!==e9||eQ[80]!==ea?(er=(0,a.jsx)(Y.W,{name:"metricSourceId",control:e9,allowedSourceKinds:es,size:"xs",allowDeselect:!1,sourceSchemaPreview:ea}),eQ[79]=e9,eQ[80]=ea,eQ[81]=er):er=eQ[81],eQ[82]!==Q||eQ[83]!==er?(en=(0,a.jsxs)(v.Y,{children:[q,Q,er]}),eQ[82]=Q,eQ[83]=er,eQ[84]=en):en=eQ[84],eQ[85]!==tc||eQ[86]!==tm?(eo=e=>(e.preventDefault(),tm(tc),!1),eQ[85]=tc,eQ[86]=tm,eQ[87]=eo):eo=eQ[87],eQ[88]!==tc||eQ[89]!==tm||eQ[90]!==td?(ec=(0,a.jsx)(M.A,{"data-testid":"kubernetes-time-picker",inputValue:tc,setInputValue:td,onSearch:tm}),eQ[88]=tc,eQ[89]=tm,eQ[90]=td,eQ[91]=ec):ec=eQ[91],eQ[92]!==eo||eQ[93]!==ec?(ed=(0,a.jsx)("form",{"data-testid":"kubernetes-time-form",onSubmit:eo,children:ec}),eQ[92]=eo,eQ[93]=ec,eQ[94]=ed):ed=eQ[94],eQ[95]===Symbol.for("react.memo_cache_sentinel")?(em=(0,a.jsx)(R.A,{size:18}),eQ[95]=em):em=eQ[95],eQ[96]!==tp||eQ[97]!==th?(eu=(0,a.jsx)(S.m,{withArrow:!0,label:"Refresh dashboard",fz:"xs",color:"gray",children:(0,a.jsx)(k.M,{onClick:th,loading:tp,disabled:tp,variant:"secondary",title:"Refresh dashboard","aria-label":"Refresh dashboard",size:"lg",children:em})}),eQ[96]=tp,eQ[97]=th,eQ[98]=eu):eu=eQ[98],eQ[99]!==ed||eQ[100]!==eu?(ep=(0,a.jsxs)(v.Y,{gap:"xs",children:[ed,eu]}),eQ[99]=ed,eQ[100]=eu,eQ[101]=ep):ep=eQ[101],eQ[102]!==en||eQ[103]!==ep?(eh=(0,a.jsxs)(v.Y,{justify:"space-between",children:[en,ep]}),eQ[102]=en,eQ[103]=ep,eQ[104]=eh):eh=eQ[104],eQ[105]!==to||eQ[106]!==e8||eQ[107]!==ti||eQ[108]!==tl?(eg=e8&&(0,a.jsx)(Z,{dateRange:to,metricSource:e8,searchQuery:ti,setSearchQuery:tl}),eQ[105]=to,eQ[106]=e8,eQ[107]=ti,eQ[108]=tl,eQ[109]=eg):eg=eQ[109],eQ[110]===Symbol.for("react.memo_cache_sentinel")?(ef=(0,a.jsxs)(N.t.List,{children:[(0,a.jsx)(N.t.Tab,{value:"pods",children:"Pods"}),(0,a.jsx)(N.t.Tab,{value:"nodes",children:"Nodes"}),(0,a.jsx)(N.t.Tab,{value:"namespaces",children:"Namespaces"})]}),eQ[110]=ef):ef=eQ[110],eQ[111]!==to||eQ[112]!==e7||eQ[113]!==e8||eQ[114]!==ti?(eb=e8&&(0,a.jsx)(V.S,{title:"CPU Usage",config:(0,et.ik)({dateRange:to,granularity:(0,x.tA)(to),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.pod.name"],where:ti,table:"metrics",aggFn:"avg",field:"k8s.pod.cpu.utilization - Gauge",numberFormat:et.p2}]},{log:e7,metric:e8}),showDisplaySwitcher:!1}),eQ[111]=to,eQ[112]=e7,eQ[113]=e8,eQ[114]=ti,eQ[115]=eb):eb=eQ[115],eQ[116]!==eb?(ey=(0,a.jsx)(C.x.Col,{span:6,children:(0,a.jsx)(y.Z,{p:"md","data-testid":"pod-cpu-usage-chart",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:eb})})}),eQ[116]=eb,eQ[117]=ey):ey=eQ[117],eQ[118]!==to||eQ[119]!==e7||eQ[120]!==e8||eQ[121]!==ti?(ev=e8&&(0,a.jsx)(V.S,{title:"Memory Usage",config:(0,et.ik)({dateRange:to,granularity:(0,x.tA)(to),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.pod.name"],where:ti,table:"metrics",aggFn:"avg",field:"k8s.pod.memory.usage - Gauge",numberFormat:et.JD}]},{log:e7,metric:e8}),showDisplaySwitcher:!1}),eQ[118]=to,eQ[119]=e7,eQ[120]=e8,eQ[121]=ti,eQ[122]=ev):ev=eQ[122],eQ[123]!==ev?(e_=(0,a.jsx)(C.x.Col,{span:6,children:(0,a.jsx)(y.Z,{p:"md","data-testid":"pod-memory-usage-chart",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:ev})})}),eQ[123]=ev,eQ[124]=e_):e_=eQ[124],eQ[125]!==to||eQ[126]!==e8||eQ[127]!==ti?(eS=e8&&(0,a.jsx)(eL,{metricSource:e8,dateRange:to,where:ti}),eQ[125]=to,eQ[126]=e8,eQ[127]=ti,eQ[128]=eS):eS=eQ[128],eQ[129]!==eS?(ew=(0,a.jsx)(C.x.Col,{span:12,children:eS}),eQ[129]=eS,eQ[130]=ew):ew=eQ[130],eQ[131]===Symbol.for("react.memo_cache_sentinel")?(eE=(0,a.jsx)(y.Z.Section,{p:"md",py:"xs",children:(0,a.jsx)(A.s,{justify:"space-between",children:"Latest Kubernetes Warning Events"})}),eQ[131]=eE):eE=eQ[131],eQ[132]!==to||eQ[133]!==tf||eQ[134]!==e7||eQ[135]!==ti?(ek=e7&&tf&&(0,a.jsx)(P.A,{sourceId:e7.id,config:{...e7,where:`${ti.trim().length>0?`(${ti.trim()}) `:""}(${e7.eventAttributesExpression}.k8s.resource.name:"events" -Severity:"Normal")`,whereLanguage:"lucene",select:[{valueExpression:e7.timestampValueExpression,alias:"Timestamp"},{valueExpression:tf.Severity,alias:"Severity"},{valueExpression:tf.Kind,alias:"Kind"},{valueExpression:tf.Name,alias:"Name"},{valueExpression:tf.Message,alias:"Message"}],orderBy:[{valueExpression:e7.timestampValueExpression,ordering:"DESC"}],limit:{limit:200,offset:0},dateRange:to},isLive:!1,queryKeyPrefix:"k8s-dashboard-events"}),eQ[132]=to,eQ[133]=tf,eQ[134]=e7,eQ[135]=ti,eQ[136]=ek):ek=eQ[136],eQ[137]!==ek?(eN=(0,a.jsx)(C.x.Col,{span:12,children:(0,a.jsxs)(y.Z,{p:"md","data-testid":"k8s-warning-events-table",children:[eE,(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:ek})]})}),eQ[137]=ek,eQ[138]=eN):eN=eQ[138],eQ[139]!==ey||eQ[140]!==e_||eQ[141]!==ew||eQ[142]!==eN?(eA=(0,a.jsx)(N.t.Panel,{value:"pods",children:(0,a.jsxs)(C.x,{children:[ey,e_,ew,eN]})}),eQ[139]=ey,eQ[140]=e_,eQ[141]=ew,eQ[142]=eN,eQ[143]=eA):eA=eQ[143],eQ[144]!==to||eQ[145]!==e7||eQ[146]!==e8||eQ[147]!==ti?(eT=e8&&(0,a.jsx)(V.S,{title:"CPU Usage",config:(0,et.ik)({dateRange:to,granularity:(0,x.tA)(to),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.node.name"],where:ti,table:"metrics",aggFn:"avg",field:"k8s.node.cpu.utilization - Gauge",numberFormat:et.p2}]},{log:e7,metric:e8}),showDisplaySwitcher:!1}),eQ[144]=to,eQ[145]=e7,eQ[146]=e8,eQ[147]=ti,eQ[148]=eT):eT=eQ[148],eQ[149]!==eT?(e$=(0,a.jsx)(C.x.Col,{span:6,children:(0,a.jsx)(y.Z,{p:"md","data-testid":"nodes-cpu-usage-chart",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:eT})})}),eQ[149]=eT,eQ[150]=e$):e$=eQ[150],eQ[151]!==to||eQ[152]!==e7||eQ[153]!==e8||eQ[154]!==ti?(eI=e8&&(0,a.jsx)(V.S,{title:"Memory Usage",config:(0,et.ik)({dateRange:to,granularity:(0,x.tA)(to),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.node.name"],where:ti,table:"metrics",aggFn:"avg",field:"k8s.node.memory.usage - Gauge",numberFormat:et.JD}]},{log:e7,metric:e8}),showDisplaySwitcher:!1}),eQ[151]=to,eQ[152]=e7,eQ[153]=e8,eQ[154]=ti,eQ[155]=eI):eI=eQ[155],eQ[156]!==eI?(eP=(0,a.jsx)(C.x.Col,{span:6,children:(0,a.jsx)(y.Z,{p:"md","data-testid":"nodes-memory-usage-chart",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:eI})})}),eQ[156]=eI,eQ[157]=eP):eP=eQ[157],eQ[158]!==to||eQ[159]!==e8||eQ[160]!==ti?(eV=e8&&(0,a.jsx)(eR,{metricSource:e8,dateRange:to,where:ti}),eQ[158]=to,eQ[159]=e8,eQ[160]=ti,eQ[161]=eV):eV=eQ[161],eQ[162]!==eV?(eF=(0,a.jsx)(C.x.Col,{span:12,children:eV}),eQ[162]=eV,eQ[163]=eF):eF=eQ[163],eQ[164]!==e$||eQ[165]!==eP||eQ[166]!==eF?(eO=(0,a.jsx)(N.t.Panel,{value:"nodes",children:(0,a.jsxs)(C.x,{children:[e$,eP,eF]})}),eQ[164]=e$,eQ[165]=eP,eQ[166]=eF,eQ[167]=eO):eO=eQ[167],eQ[168]!==to||eQ[169]!==e7||eQ[170]!==e8||eQ[171]!==ti?(eH=e8&&(0,a.jsx)(V.S,{title:"CPU Usage",config:(0,et.ik)({dateRange:to,granularity:(0,x.tA)(to),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.namespace.name"],where:ti,table:"metrics",aggFn:"sum",field:"k8s.pod.cpu.utilization - Gauge",numberFormat:et.p2}]},{log:e7,metric:e8}),showDisplaySwitcher:!1}),eQ[168]=to,eQ[169]=e7,eQ[170]=e8,eQ[171]=ti,eQ[172]=eH):eH=eQ[172],eQ[173]!==eH?(eW=(0,a.jsx)(C.x.Col,{span:6,children:(0,a.jsx)(y.Z,{p:"md","data-testid":"namespaces-cpu-usage-chart",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:eH})})}),eQ[173]=eH,eQ[174]=eW):eW=eQ[174],eQ[175]!==to||eQ[176]!==e7||eQ[177]!==e8||eQ[178]!==ti?(eB=e8&&(0,a.jsx)(V.S,{title:"Memory Usage",config:(0,et.ik)({dateRange:to,granularity:(0,x.tA)(to),seriesReturnType:"column",series:[{type:"time",groupBy:["k8s.namespace.name"],where:ti,table:"metrics",aggFn:"sum",field:"k8s.pod.memory.usage - Gauge",numberFormat:et.JD}]},{log:e7,metric:e8}),showDisplaySwitcher:!1}),eQ[175]=to,eQ[176]=e7,eQ[177]=e8,eQ[178]=ti,eQ[179]=eB):eB=eQ[179],eQ[180]!==eB?(eX=(0,a.jsx)(C.x.Col,{span:6,children:(0,a.jsx)(y.Z,{p:"md","data-testid":"namespaces-memory-usage-chart",children:(0,a.jsx)(y.Z.Section,{p:"md",py:"sm",h:300,children:eB})})}),eQ[180]=eB,eQ[181]=eX):eX=eQ[181],eQ[182]!==to||eQ[183]!==e8||eQ[184]!==ti?(eZ=e8&&(0,a.jsx)(ez,{dateRange:to,metricSource:e8,where:ti}),eQ[182]=to,eQ[183]=e8,eQ[184]=ti,eQ[185]=eZ):eZ=eQ[185],eQ[186]!==eZ?(eq=(0,a.jsx)(C.x.Col,{span:12,children:eZ}),eQ[186]=eZ,eQ[187]=eq):eq=eQ[187],eQ[188]!==eW||eQ[189]!==eX||eQ[190]!==eq?(eJ=(0,a.jsx)(N.t.Panel,{value:"namespaces",children:(0,a.jsxs)(C.x,{children:[eW,eX,eq]})}),eQ[188]=eW,eQ[189]=eX,eQ[190]=eq,eQ[191]=eJ):eJ=eQ[191],eQ[192]===Symbol.for("react.memo_cache_sentinel")?(eG=(0,a.jsx)(N.t.Panel,{value:"clusters",children:"Clusters"}),eQ[192]=eG):eG=eQ[192],eQ[193]!==eA||eQ[194]!==eO||eQ[195]!==eJ?(eU=(0,a.jsxs)("div",{className:"p-3",children:[eA,eO,eJ,eG]}),eQ[193]=eA,eQ[194]=eO,eQ[195]=eJ,eQ[196]=eU):eU=eQ[196],eQ[197]!==tr||eQ[198]!==tn||eQ[199]!==eU?(eK=(0,a.jsxs)(N.t,{mt:"md",keepMounted:!1,defaultValue:"pods",onChange:tn,value:tr,children:[ef,eU]}),eQ[197]=tr,eQ[198]=tn,eQ[199]=eU,eQ[200]=eK):eK=eQ[200],eQ[201]!==H||eQ[202]!==W||eQ[203]!==X||eQ[204]!==eh||eQ[205]!==eg||eQ[206]!==eK?(eY=(0,a.jsxs)(T.a,{"data-testid":"kubernetes-dashboard-page",p:"sm",children:[O,H,W,X,eh,eg,eK]}),eQ[201]=H,eQ[202]=W,eQ[203]=X,eQ[204]=eh,eQ[205]=eg,eQ[206]=eK,eQ[207]=eY):eY=eQ[207],eY}let eV=l()(async()=>eP,{ssr:!1});eV.getLayout=es.D;let eF=eV},64441:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var a=s(6029),r=s(75155),n=s(55729),i=s(63085),l=s(8737),o=s(43517),c=s(60481),d=s(20294),m=s(78253),u=s(22623),p=s(25062),h=s(15216),x=s(16232),g=s(7565),f=s(57820),b=s(92917),y=s(59017),v=s(50374),j=s(61629);let _=e=>"getTime"in e&&!isNaN(e.getTime());function S(e){let t,s,n,m=(0,r.c)(9),{breadcrumbPath:u,onNavigateToLevel:p}=e;m[0]!==p?(t=e=>{p?.(e)},m[0]=p,m[1]=t):t=m[1];let h=t;e:{let e;if(0===u.length){let e;m[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],m[2]=e):e=m[2],s=e;break e}if(m[3]!==u||m[4]!==h){let t;e=[],u.forEach((t,s)=>{let r,n=t.rowData?(r=(t.rowData.__hdx_body||"").trim()).length>200?`${r.substring(0,197)}...`:r:"";e.push((0,a.jsx)(i.m,{label:n,disabled:!n,position:"bottom",withArrow:!0,children:(0,a.jsx)(l.N,{onClick:()=>h(s),style:{textDecoration:"none"},children:(0,a.jsx)(o.E,{size:"sm",c:"blue",style:{cursor:"pointer"},children:0===s?"Original Event":t.label})})},`crumb-${s}`))}),m[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(o.E,{size:"sm",children:"Selected Event"},"current"),m[6]=t):t=m[6],e.push(t),m[3]=u,m[4]=h,m[5]=e}else e=m[5];s=e}let x=s;return 0===u.length?null:(m[7]!==x?(n=(0,a.jsx)(c.a,{mb:"sm",pb:"sm",className:"border-bottom border-dark",children:(0,a.jsx)(d.B,{separator:"â€º",separatorMargin:"xs",children:x})}),m[7]=x,m[8]=n):n=m[8],n)}function w(e){let t,s,i,l,d,w,k,N,C,A,T,$,I,L=(0,r.c)(41),{attributes:R,mainContent:z,mainContentHeader:M,date:D,severityText:P,breadcrumbPath:V,onBreadcrumbClick:F}=e;L[0]!==R?(t=void 0===R?[]:R,L[0]=R,L[1]=t):t=L[1];let O=t,H=void 0===z?"":z;L[2]!==V?(s=void 0===V?[]:V,L[2]=V,L[3]=s):s=L[3];let W=s,[B,X]=n.useState(!1),{generateSearchUrl:Z}=(0,n.useContext)(v.D),q=H.length>2e3;L[4]!==B||L[5]!==H?(i=B?H:H?.slice(0,2e3),L[4]=B,L[5]=H,L[6]=i):i=L[6];let J=i,[G,U]=(0,n.useState)(null),[K,Y]=(0,n.useState)(0);L[7]!==G?(l=()=>{if(!G)return;let e=()=>{Y(G.offsetHeight)};e();let t=new ResizeObserver(e);return t.observe(G),()=>{t.disconnect()}},d=[G],L[7]=G,L[8]=l,L[9]=d):(l=L[8],d=L[9]),(0,n.useEffect)(l,d);let{userPreferences:Q,setUserPreference:ee}=(0,f.HW)(),{expandSidebarHeader:et}=Q;return L[10]!==W||L[11]!==F?(w=(0,a.jsx)(S,{breadcrumbPath:W,onNavigateToLevel:F}),L[10]=W,L[11]=F,L[12]=w):w=L[12],L[13]!==P?(k=P&&(0,a.jsx)(j.A,{level:P}),L[13]=P,L[14]=k):k=L[14],L[15]!==D||L[16]!==P?(N=P&&_(D)&&(0,a.jsx)(o.E,{size:"xs",mx:"xs",children:"\xb7"}),L[15]=D,L[16]=P,L[17]=N):N=L[17],L[18]!==D?(C=_(D)&&(0,a.jsxs)(o.E,{size:"xs",children:[(0,a.jsx)(g.H,{value:D})," \xb7"," ",(0,b.Jk)(D)," ago"]}),L[18]=D,L[19]=C):C=L[19],L[20]!==k||L[21]!==N||L[22]!==C?(A=(0,a.jsxs)(m.s,{children:[k,N,C]}),L[20]=k,L[21]=N,L[22]=C,L[23]=A):A=L[23],L[24]!==B||L[25]!==et||L[26]!==K||L[27]!==q||L[28]!==H||L[29]!==J||L[30]!==M||L[31]!==ee||L[32]!==Q?(T=H?(0,a.jsxs)(u.t,{p:"xs",mt:"sm",style:{maxHeight:et?void 0:120,overflow:"auto",overflowWrap:"break-word"},ref:U,children:[(0,a.jsxs)(m.s,{justify:"space-between",mb:"xs",children:[(0,a.jsx)(o.E,{size:"xs",children:M}),K>=120&&(0,a.jsx)(p.$,{size:"compact-xs",variant:"subtle",onClick:()=>ee({...Q,expandSidebarHeader:!et}),children:et?(0,a.jsx)(h.A,{size:14}):(0,a.jsx)(x.A,{size:14})})]}),J,q&&(0,a.jsx)(p.$,{size:"compact-xs",variant:"subtle",color:"gray",onClick:()=>{X(E)},children:B?"Collapse":"Expand"})]}):(0,a.jsx)(u.t,{p:"xs",mt:"sm",children:(0,a.jsx)(o.E,{size:"xs",mb:"xs",children:"[Empty]"})}),L[24]=B,L[25]=et,L[26]=K,L[27]=q,L[28]=H,L[29]=J,L[30]=M,L[31]=ee,L[32]=Q,L[33]=T):T=L[33],L[34]!==O?($=(0,a.jsx)(c.a,{mt:"xs",children:(0,a.jsx)(y.V,{attributes:O})}),L[34]=O,L[35]=$):$=L[35],L[36]!==A||L[37]!==T||L[38]!==$||L[39]!==w?(I=(0,a.jsxs)(a.Fragment,{children:[w,A,T,$]}),L[36]=A,L[37]=T,L[38]=$,L[39]=w,L[40]=I):I=L[40],I}function E(e){return!e}},64501:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var a=s(6029),r=s(55729),n=s(88459),i=s(82641),l=s(27166),o=s(43517),c=s(92789),d=s(25062),m=s(78253),u=s(94720),p=s(60665),h=s(24583),x=s(43567),g=s(98142),f=s(93108),b=s(78550),y=s(81973),v=s(36600),j=s(24314),_=s(54970);async function S({connectionId:e,createSourceMutation:t,updateSourceMutation:s,logSourceDatabaseName:a,logSourceName:r,logSourceTableName:n,metricsSourceDatabaseName:l,metricsSourceName:o,sessionSourceDatabaseName:c,sessionSourceName:d,sessionSourceTableName:m,traceSourceDatabaseName:u,traceSourceName:p,traceSourceTableName:h,traceSourceHighlightedTraceAttributes:x,traceSourceMaterializedViews:g}){let f,b,y=a&&r&&n,v=l&&o;y&&(f=await t.mutateAsync({source:{kind:i.GL.Log,name:r,connection:e,from:{databaseName:a,tableName:n},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, SeverityText, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body",displayedTimestampValueExpression:"Timestamp"}}));let j=await t.mutateAsync({source:{kind:i.GL.Trace,name:p,connection:e,from:{databaseName:u,tableName:h},timestampValueExpression:"Timestamp",defaultTableSelectExpression:"Timestamp, ServiceName, StatusCode, round(Duration / 1e6), SpanName",serviceNameExpression:"ServiceName",eventAttributesExpression:"SpanAttributes",resourceAttributesExpression:"ResourceAttributes",traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"SpanName",durationExpression:"Duration",durationPrecision:9,parentSpanIdExpression:"ParentSpanId",spanKindExpression:"SpanKind",spanNameExpression:"SpanName",...y?{logSourceId:"l-758211293"}:{},statusCodeExpression:"StatusCode",statusMessageExpression:"StatusMessage",spanEventsValueExpression:"Events",highlightedTraceAttributeExpressions:x,materializedViews:g}});v&&(b=await t.mutateAsync({source:{kind:i.GL.Metric,name:o,connection:e,from:{databaseName:l,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:{[i.SX.Gauge]:"otel_metrics_gauge",[i.SX.Histogram]:"otel_metrics_histogram",[i.SX.Sum]:"otel_metrics_sum",[i.SX.Summary]:"otel_metrics_summary",[i.SX.ExponentialHistogram]:"otel_metrics_exponential_histogram"},resourceAttributesExpression:"ResourceAttributes",...y&&f?{logSourceId:f.id}:{}}}));let _=await t.mutateAsync({source:{kind:i.GL.Session,name:d,connection:e,from:{databaseName:c,tableName:m},timestampValueExpression:"TimestampTime",defaultTableSelectExpression:"Timestamp, ServiceName, Body",serviceNameExpression:"ServiceName",severityTextExpression:"SeverityText",eventAttributesExpression:"LogAttributes",resourceAttributesExpression:"ResourceAttributes",traceSourceId:j.id,traceIdExpression:"TraceId",spanIdExpression:"SpanId",implicitColumnExpression:"Body"}});await Promise.all([...y&&f?[s.mutateAsync({source:{...f,sessionSourceId:_.id,traceSourceId:j.id,...v&&b?{metricSourceId:b.id}:{}}})]:[],s.mutateAsync({source:{...j,...y&&f?{logSourceId:f.id}:{},...v&&b?{metricSourceId:b.id}:{},sessionSourceId:_.id}})])}let w=(0,r.memo)(function({requireSource:e=!0}){let t=(0,v.Kh)(),{data:s}=(0,y.oE)(),{data:w}=(0,f.ZY)(),E=w?.length===0?"connection":s?.length===0&&e?"auto-detect":void 0,[k,N]=(0,r.useState)(void 0);(0,r.useEffect)(()=>{null!=E&&null==k&&N(E)},[E,k]),(0,r.useEffect)(()=>{("auto-detect"===k||"source"===k)&&s&&s.length>0&&N("closed")},[k,s]);let C=(0,y.nd)(),A=(0,f.Ir)(),T=(0,y.sr)(),$=(0,y.YI)(),I=(0,b.Ge)(),[L,R]=(0,r.useState)(!1),[z,M]=(0,r.useState)(!1),[D,P]=(0,r.useState)([]),[V,F]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!g.Ju||"connection"!==k||w?.length!==0||V)return;F(!0);let e=window.location.origin;new n.aP({host:e,username:"default",password:""}).query({query:"SELECT 1",shouldSkipApplySettings:!0}).then(t=>{t.json().then(()=>{A.mutate({connection:{name:"Default",host:e,username:"default",password:""}},{onSuccess:()=>{N("auto-detect")}})})}).catch(()=>{})},[k,w,V,A]);let O=(0,r.useCallback)(async e=>{try{R(!0),M(!0);let t=await I.getOtelTables({connectionId:e});if(!t)return void N("source");let s=[];if(t.tables.logs){let a=await (0,y.Ys)({databaseName:t.database,tableName:t.tables.logs,connectionId:e,metadata:I});if(null!=a.timestampValueExpression){let r=await C.mutateAsync({source:{kind:i.GL.Log,name:"Logs",connection:e,from:{databaseName:t.database,tableName:t.tables.logs},...a,timestampValueExpression:a.timestampValueExpression}});s.push(r)}else console.error("Log source was found but missing required fields",a)}if(t.tables.traces){let a=await (0,y.Ys)({databaseName:t.database,tableName:t.tables.traces,connectionId:e,metadata:I});if(null!=a.timestampValueExpression){let r=await C.mutateAsync({source:{kind:i.GL.Trace,name:"Traces",connection:e,from:{databaseName:t.database,tableName:t.tables.traces},...a,timestampValueExpression:a.timestampValueExpression}});s.push(r)}else console.error("Trace source was found but missing required fields",a)}if(Object.values(t.tables.metrics).some(e=>null!=e)){let a={[i.SX.Gauge]:"",[i.SX.Histogram]:"",[i.SX.Sum]:"",[i.SX.Summary]:"",[i.SX.ExponentialHistogram]:""};t.tables.metrics.gauge&&(a[i.SX.Gauge]=t.tables.metrics.gauge),t.tables.metrics.histogram&&(a[i.SX.Histogram]=t.tables.metrics.histogram),t.tables.metrics.sum&&(a[i.SX.Sum]=t.tables.metrics.sum),t.tables.metrics.summary&&(a[i.SX.Summary]=t.tables.metrics.summary),t.tables.metrics.expHistogram&&(a[i.SX.ExponentialHistogram]=t.tables.metrics.expHistogram);let r=await C.mutateAsync({source:{kind:i.GL.Metric,name:"Metrics",connection:e,from:{databaseName:t.database,tableName:""},timestampValueExpression:"TimeUnix",serviceNameExpression:"ServiceName",metricTables:a,resourceAttributesExpression:"ResourceAttributes"}});s.push(r)}if(t.tables.sessions){let a=await (0,y.Ys)({databaseName:t.database,tableName:t.tables.sessions,connectionId:e,metadata:I}),r=s.find(e=>e.kind===i.GL.Trace);if(null!=a.timestampValueExpression&&null!=r){let n=await C.mutateAsync({source:{kind:i.GL.Session,name:"Sessions",connection:e,from:{databaseName:t.database,tableName:t.tables.sessions},...a,timestampValueExpression:a.timestampValueExpression,traceSourceId:r.id}});s.push(n)}else console.error("Session source was found but missing required fields",a)}if(0===s.length){console.error("No sources created due to missing required fields"),N("source");return}let a=s.find(e=>e.kind===i.GL.Log),r=s.find(e=>e.kind===i.GL.Trace),n=s.find(e=>e.kind===i.GL.Metric),l=s.find(e=>e.kind===i.GL.Session),o=[];a&&o.push(T.mutateAsync({source:{...a,...r?{traceSourceId:r.id}:{},...n?{metricSourceId:n.id}:{},...l?{sessionSourceId:l.id}:{}}})),r&&o.push(T.mutateAsync({source:{...r,...a?{logSourceId:a.id}:{},...n?{metricSourceId:n.id}:{},...l?{sessionSourceId:l.id}:{}}})),await Promise.all(o),P(s),p.$e.show({title:"Success",message:`Automatically detected and created ${s.length} source${s.length>1?"s":""}.`}),N("closed")}catch(e){console.error("Error auto-detecting sources:",e),p.$e.show({color:"red",title:"Error",message:"Failed to auto-detect telemetry sources. Please set up manually."}),N("source")}finally{R(!1)}},[I,C,T,N,P]);(0,r.useEffect)(()=>{"auto-detect"===k&&s?.length===0&&w&&w.length>0&&!1===L&&!1===z&&O(w[0].id)},[k,w,O,L,s,z]);let H=(0,r.useCallback)(async()=>{if(!g.Ju)try{if(s)for(let e of s)"local"===e.connection&&e.name.startsWith("Demo")&&"otel_v2"!==e.from.databaseName&&await $.mutateAsync({id:e.id});let e="";await A.mutateAsync({connection:{name:"Demo",host:"https://sql-clickhouse.clickhouse.com",username:"otel_demo",password:""}},{onSuccess(t){e=t.id},onError(e){console.error("Failed to create demo connection: ",e)}}),await S({connectionId:e,createConnectionMutation:A,createSourceMutation:C,deleteSourceMutation:$,logSourceDatabaseName:"otel_v2",logSourceName:"Demo Logs",logSourceTableName:"otel_logs",metricsSourceDatabaseName:"otel_v2",metricsSourceName:"Demo Metrics",sessionSourceDatabaseName:"otel_v2",sessionSourceName:"Demo Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_v2",traceSourceName:"Demo Traces",traceSourceTableName:"otel_traces",traceSourceMaterializedViews:[{databaseName:"otel_v2",tableName:"otel_traces_1m",dimensionColumns:"ServiceName, StatusCode",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"}]},{databaseName:"otel_v2",tableName:"otel_traces_1m_v2",dimensionColumns:"ServiceName, SpanName, SpanKind",minGranularity:"1 minute",timestampColumn:"Timestamp",aggregatedColumns:[{mvColumn:"count",aggFn:"count",sourceColumn:""},{mvColumn:"max__Duration",aggFn:"max",sourceColumn:"Duration"},{mvColumn:"avg__Duration",aggFn:"avg",sourceColumn:"Duration"},{mvColumn:"quantile__Duration",aggFn:"quantile",sourceColumn:"Duration"}]}],updateSourceMutation:T}),await S({connectionId:e,createConnectionMutation:A,createSourceMutation:C,deleteSourceMutation:$,sessionSourceDatabaseName:"otel_clickpy",sessionSourceName:"ClickPy Sessions",sessionSourceTableName:"hyperdx_sessions",traceSourceDatabaseName:"otel_clickpy",traceSourceName:"ClickPy Traces",traceSourceTableName:"otel_traces",traceSourceHighlightedTraceAttributes:[{sqlExpression:"if((SpanAttributes['http.route']) LIKE '%dashboard%', concat('https://clickpy.clickhouse.com', path(SpanAttributes['http.target'])), '')",alias:"clickpy_link"}],updateSourceMutation:T}),p.$e.show({title:"Success",message:`Connected to ${t} demo server.`}),N("closed")}catch(e){console.error(e),p.$e.show({color:"red",title:"Error",message:`Could not connect to the ${t} demo server, please try again later.`})}},[t,C,A,T,$,s]);return(0,a.jsxs)(l.a,{"data-testid":"onboarding-modal",opened:null!=k&&"closed"!==k,onClose:()=>{},title:`Welcome to ${t}`,size:"xl",withCloseButton:!1,children:["connection"===k&&null!=w&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.E,{size:"sm",mb:"md",children:"Lets set up your connection to ClickHouse"}),0===w.length?(0,a.jsx)(x.B,{connection:{id:"",name:"Default",host:g.Ju?window.location.origin:"http://localhost:8123",username:"default",password:""},onSave:()=>{z?N("source"):N("auto-detect")},isNew:!0}):(0,a.jsx)(x.B,{connection:w[0],isNew:!1,onSave:()=>{z?N("source"):N("auto-detect")},showCancelButton:!1,showDeleteButton:!1}),!g.VO&&(0,a.jsx)(o.E,{size:"xs",mt:"md",children:"You can always add and edit connections later."}),!g.Ju&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.c,{label:"OR",my:"md"}),(0,a.jsx)(d.$,{"data-testid":"demo-server-button",variant:"secondary",w:"100%",onClick:H,children:"Connect to Demo Server"})]})]}),"auto-detect"===k&&(0,a.jsx)(a.Fragment,{children:L?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(m.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,a.jsx)(u.a,{size:"md",mb:"md"}),(0,a.jsx)(o.E,{size:"sm",c:"dimmed",mb:"md",children:"Detecting available tables..."}),(0,a.jsx)(d.$,{variant:"subtle",size:"xs",onClick:()=>{R(!1),N("source")},children:"Skip and setup manually"})]})}):D.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.$,{variant:"subtle",onClick:()=>N("connection"),p:"xs",mb:"md",children:[(0,a.jsx)(h.A,{size:14,className:"me-2"})," Back"]}),(0,a.jsxs)(o.E,{size:"sm",mb:"md",children:["We automatically detected and created"," ",D.length," source",D.length>1?"s":""," from your connection. You can review, edit, or continue."]}),(0,a.jsx)(_.v,{withCard:!1,variant:"default",showEmptyState:!1}),(0,a.jsxs)(m.s,{justify:"space-between",mt:"md",children:[(0,a.jsx)(d.$,{variant:"subtle",onClick:()=>{N("source")},children:"Add more sources"}),(0,a.jsx)(d.$,{variant:"primary",onClick:()=>{N("closed")},children:"Continue"})]})]}):(0,a.jsxs)(m.s,{justify:"center",align:"center",direction:"column",py:"xl",children:[(0,a.jsx)(o.E,{size:"sm",c:"dimmed",mb:"md",children:"No OTel tables detected automatically, please setup sources manually."}),(0,a.jsx)(d.$,{variant:"primary",onClick:()=>{N("source")},children:"Continue"})]})}),"source"===k&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.$,{variant:"subtle",onClick:()=>N("connection"),p:"xs",mb:"md",children:[(0,a.jsx)(h.A,{size:14,className:"me-2"})," Back"]}),(0,a.jsx)(o.E,{size:"sm",mb:"md",children:"Lets set up a source table to query telemetry from."}),(0,a.jsx)(j.Eb,{isNew:!0,defaultName:"Logs",onCreate:()=>{N("closed")}}),(0,a.jsx)(o.E,{size:"xs",mt:"lg",children:"You can always add and edit sources later."})]})]})})},65081:(e,t,s)=>{"use strict";s.d(t,{z:()=>D});var a=s(6029),r=s(75155),n=s(55729),i=s(81278),l=s.n(i),o=s(67549),c=s(83595),d=s(60449),m=s.n(d),u=s(8737),p=s(56513),h=s(3635),x=s(96061),g=s(25062),f=s(60481),b=s(22623),y=s(43517),v=s(39785),j=s(60665),_=s(24602),S=s(95316),w=s(90515),E=s(9385),k=s(41279),N=s(9841),C=s(6723),A=s(23195),T=s(45172),$=s(26355),I=s(92917),L=s(50374);function R(e,t,s="JSONExtractString"){let a=e.slice(t.length);if(0===a.length)return null;let r=t[t.length-1],n=a.map(e=>`'${e}'`).join(", ");return`${s}(${r}, ${n})`}let z=(0,c.tG)("hdx_json_viewer_options",{normallyExpanded:!0,lineWrap:!0,tabulate:!0,filterBlanks:!1});function M(){let e,t,s,n,i,l,c,d,m,x,g,f,b,y,v,j,E=(0,r.c)(39),[k,N]=(0,o.fp)(z);return E[0]!==k||E[1]!==N?(e=()=>N({...k,lineWrap:!k.lineWrap}),E[0]=k,E[1]=N,E[2]=e):e=E[2],E[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(_.A,{size:14}),E[3]=t):t=E[3],E[4]!==e?(s=(0,a.jsx)(u.N,{color:"gray",onClick:e,children:t}),E[4]=e,E[5]=s):s=E[5],E[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(p.W.Target,{children:(0,a.jsx)(u.N,{children:(0,a.jsx)(S.A,{size:14})})}),E[6]=n):n=E[6],E[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(p.W.Label,{lh:1,py:6,children:"Properties view options"}),E[7]=i):i=E[7],E[8]!==k||E[9]!==N?(l=()=>N({...k,normallyExpanded:!k.normallyExpanded}),E[8]=k,E[9]=N,E[10]=l):l=E[10],E[11]!==k.normallyExpanded?(c=k.normallyExpanded?(0,a.jsx)(w.A,{size:14,className:"ps-2"}):null,E[11]=k.normallyExpanded,E[12]=c):c=E[12],E[13]!==l||E[14]!==c?(d=(0,a.jsx)(p.W.Item,{onClick:l,lh:"1",py:8,rightSection:c,children:"Expand all properties"}),E[13]=l,E[14]=c,E[15]=d):d=E[15],E[16]!==k.tabulate?(m=k.tabulate?(0,a.jsx)(w.A,{size:14,className:"ps-2"}):null,E[16]=k.tabulate,E[17]=m):m=E[17],E[18]!==k||E[19]!==N?(x=()=>N({...k,tabulate:!k.tabulate}),E[18]=k,E[19]=N,E[20]=x):x=E[20],E[21]!==m||E[22]!==x?(g=(0,a.jsx)(p.W.Item,{lh:"1",py:8,rightSection:m,onClick:x,children:"Tabulate"}),E[21]=m,E[22]=x,E[23]=g):g=E[23],E[24]!==k.filterBlanks?(f=k.filterBlanks?(0,a.jsx)(w.A,{size:14,className:"ps-2"}):null,E[24]=k.filterBlanks,E[25]=f):f=E[25],E[26]!==k||E[27]!==N?(b=()=>N({...k,filterBlanks:!k.filterBlanks}),E[26]=k,E[27]=N,E[28]=b):b=E[28],E[29]!==f||E[30]!==b?(y=(0,a.jsx)(p.W.Item,{lh:"1",py:8,rightSection:f,onClick:b,children:"Hide blank values"}),E[29]=f,E[30]=b,E[31]=y):y=E[31],E[32]!==g||E[33]!==y||E[34]!==d?(v=(0,a.jsxs)(p.W,{width:240,withinPortal:!1,children:[n,(0,a.jsxs)(p.W.Dropdown,{children:[i,d,g,y]})]}),E[32]=g,E[33]=y,E[34]=d,E[35]=v):v=E[35],E[36]!==v||E[37]!==s?(j=(0,a.jsxs)(h.Y,{children:[s,v]}),E[36]=v,E[37]=s,E[38]=j):j=E[38],j}function D(e){let t,s,i,c,d,u,p,_,S,w,D,V,F=(0,r.c)(31),{data:O,jsonColumns:H}=e;F[0]!==H?(t=void 0===H?[]:H,F[0]=H,F[1]=t):t=F[1];let W=t,{onPropertyAddClick:B,generateSearchUrl:X,generateChartUrl:Z,displayedColumns:q,toggleColumn:J}=(0,n.useContext)(L.D),[G,U]=(0,n.useState)(""),[K]=(0,v.o)(G,100),Y=(0,o.md)(z);e:{let e;if(!O){s=null;break e}if(F[2]!==O||F[3]!==K||F[4]!==Y.filterBlanks){let t=Object.fromEntries(Object.entries(O).filter(P));Y.filterBlanks&&(t=function e(t){if(null!==t&&""!==t){if(Array.isArray(t)){let s=t.map(e).filter(e=>void 0!==e);return s.length>0?s:void 0}if("object"==typeof t){let s={};for(let[a,r]of Object.entries(t)){let t=e(r);void 0!==t&&(s[a]=t)}return Object.keys(s).length>0?s:void 0}return t}}(t)),e=function e(t,s){if("object"!=typeof t||null===t||""===s)return t;let a={};for(let[r,n]of Object.entries(t))if(null!==n&&((r.toLowerCase().includes(s.toLowerCase())||"string"==typeof n&&n.toLowerCase().includes(s.toLowerCase()))&&(a[r]=n),"object"==typeof n)){let t=e(n,s);Object.keys(t).length>0&&(a[r]=t)}return a}(t,K),F[2]=O,F[3]=K,F[4]=Y.filterBlanks,F[5]=e}else e=F[5];s=e}let Q=s;F[6]!==q||F[7]!==Z||F[8]!==X||F[9]!==W||F[10]!==B||F[11]!==Q||F[12]!==J?(i=e=>{let{keyPath:t,value:s,isInParsedJson:r,parsedJsonRootPath:n}=e,i=[],o=(0,I.uc)(t,W),c=t.length>0&&W?.includes(t[0]);if(null!=B&&"string"==typeof s&&s&&"Timestamp"!=o&&"TimestampTime"!=o&&i.push({key:"add-to-search",label:(0,a.jsxs)(h.Y,{gap:2,children:[(0,a.jsx)(E.A,{size:14}),"Add to Filters"]}),title:"Add to Filters",onClick:()=>{let e;if(r&&n){let s=R(t,n);e=s||(c?`toString(${o})`:o)}else e=c?`toString(${o})`:o;B(e,s),j.$e.show({color:"green",message:`Added "${o} = ${s}" to filters`})}}),X&&"object"!=typeof s&&i.push({key:"search",label:(0,a.jsxs)(h.Y,{gap:2,children:[(0,a.jsx)(k.A,{size:14}),"Search"]}),title:"Search for this value only",onClick:()=>{let e=o;if(r&&n){let a="JSONExtractString";"number"==typeof s?a="JSONExtractFloat":"boolean"==typeof s&&(a="JSONExtractBool");let r=R(t,n,a);r&&(e=r)}let a=`${e} = ${"string"==typeof s?`'${s}'`:s}`;("Timestamp"==e||"TimestampTime"==e)&&(a=`${e} = parseDateTime64BestEffort('${s}', 9)`),l().push(X({where:a,whereLanguage:"sql"}))}}),Z&&"number"==typeof s&&i.push({key:"chart",label:(0,a.jsx)(N.A,{size:14}),title:"Chart",onClick:()=>{let e=o;if(r&&n){let s=R(t,n);s&&(e=s)}l().push(Z({aggFn:"avg",field:e,groupBy:[]}))}}),J&&"object"!=typeof s){let e=o;if(r&&n){let s=R(t,n);s&&(e=s)}let s=q?.includes(e);i.push({key:"toggle-column",label:s?(0,a.jsxs)(h.Y,{gap:2,children:[(0,a.jsx)(C.A,{size:14}),"Column"]}):(0,a.jsxs)(h.Y,{gap:2,children:[(0,a.jsx)(A.A,{size:14}),"Column"]}),title:s?`Remove ${o} column from results table`:`Add ${o} column to results table`,onClick:()=>{J(e),j.$e.show({color:"green",message:`Column "${o}" ${s?"removed from":"added to"} results table`})}})}return"object"==typeof s?i.push({key:"copy-object",label:"Copy Object",onClick:()=>{let e;e=r&&n?s:0===t.length?Q:m()(Q,t),window.navigator.clipboard.writeText(JSON.stringify(e,null,2)),j.$e.show({color:"green",message:"Copied object to clipboard"})}}):i.push({key:"copy-value",label:(0,a.jsxs)(h.Y,{gap:2,children:[(0,a.jsx)(T.A,{size:14}),"Copy Value"]}),onClick:()=>{window.navigator.clipboard.writeText("string"==typeof s?s:JSON.stringify(s,null,2)),j.$e.show({color:"green",message:"Value copied to clipboard"})}}),i},F[6]=q,F[7]=Z,F[8]=X,F[9]=W,F[10]=B,F[11]=Q,F[12]=J,F[13]=i):i=F[13];let ee=i;return F[14]===Symbol.for("react.memo_cache_sentinel")?(c=e=>U(e.currentTarget.value),d=(0,a.jsx)(k.A,{size:16}),F[14]=c,F[15]=d):(c=F[14],d=F[15]),F[16]!==G?(u=(0,a.jsx)(x.p,{size:"xs",w:"100%",maw:"400px",placeholder:"Search properties by key or value",value:G,onChange:c,leftSection:d}),p=G&&(0,a.jsx)(g.$,{variant:"secondary",size:"xs",onClick:()=>U(""),children:"Clear"}),F[16]=G,F[17]=u,F[18]=p):(u=F[17],p=F[18]),F[19]===Symbol.for("react.memo_cache_sentinel")?(S=(0,a.jsx)("div",{className:"flex-grow-1"}),_=(0,a.jsx)(M,{}),F[19]=_,F[20]=S):(_=F[19],S=F[20]),F[21]!==u||F[22]!==p?(w=(0,a.jsx)(f.a,{py:"xs",children:(0,a.jsxs)(h.Y,{gap:"xs",children:[u,p,S,_]})}),F[21]=u,F[22]=p,F[23]=w):w=F[23],F[24]!==ee||F[25]!==Y||F[26]!==Q?(D=(0,a.jsx)(b.t,{bg:"transparent",mt:"sm",children:null!=Q?(0,a.jsx)($.A,{data:Q,getLineActions:ee,...Y}):(0,a.jsx)(y.E,{children:"No data"})}),F[24]=ee,F[25]=Y,F[26]=Q,F[27]=D):D=F[27],F[28]!==w||F[29]!==D?(V=(0,a.jsxs)("div",{className:"flex-grow-1 overflow-auto",children:[w,D]}),F[28]=w,F[29]=D,F[30]=V):V=F[30],V}function P(e){return!e[0].startsWith("__hdx_")}},65723:e=>{e.exports={container:"HyperJson_container__GNwuL",withTabulate:"HyperJson_withTabulate__MzU_L",key:"HyperJson_key__AQ6QF",withLineWrap:"HyperJson_withLineWrap__gfDDi",valueContainer:"HyperJson_valueContainer__Ui_5y",string:"HyperJson_string__vkc96",treeNode:"HyperJson_treeNode__bDzsg",line:"HyperJson_line__n3Ltu",lineMenu:"HyperJson_lineMenu__Sg84e",expanded:"HyperJson_expanded__gHv9Z",object:"HyperJson_object__ChLzl",array:"HyperJson_array__rJBNC",expandable:"HyperJson_expandable__futZ8",lineMenuBtn:"HyperJson_lineMenuBtn__QKgME",clickable:"HyperJson_clickable__UNRbd",value:"HyperJson_value__aSXTw",hoverable:"HyperJson_hoverable__oWIY9",hoverContent:"HyperJson_hoverContent__2Ir2x",jsonBtn:"HyperJson_jsonBtn__T1ObP",keyContainer:"HyperJson_keyContainer___KqED",number:"HyperJson_number__VFmbX",boolean:"HyperJson_boolean__KkQsQ",expandMoreProps:"HyperJson_expandMoreProps__uHkwZ"}},66773:e=>{e.exports={panel:"LogSidePanel_panel__JgveL",panelDragBar:"LogSidePanel_panelDragBar__sFi62",panelHeader:"LogSidePanel_panelHeader__Fl4jA",panelDetails:"LogSidePanel_panelDetails__wGBLr",panelContent:"LogSidePanel_panelContent__Olcws",severityChip:"LogSidePanel_severityChip__hIK7I",loadingState:"LogSidePanel_loadingState__b5y0C",panelSectionWrapper:"LogSidePanel_panelSectionWrapper__gOBKh",panelSectionWrapperTitle:"LogSidePanel_panelSectionWrapperTitle__eBMsG",kbdShortcuts:"LogSidePanel_kbdShortcuts__ogLDt",kbd:"LogSidePanel_kbd__gmxFq",kbdDivider:"LogSidePanel_kbdDivider____Gi4",lineContext:"LogSidePanel_lineContext__rCVjx",lineContextCurrentLine:"LogSidePanel_lineContextCurrentLine__K3t4J",lineContextLineNo:"LogSidePanel_lineContextLineNo__LuYmr",emptyMessage:"LogSidePanel_emptyMessage__6fbwp",traceTimelineLabel:"LogSidePanel_traceTimelineLabel___WCaD",traceTimelineLabelHighlighted:"LogSidePanel_traceTimelineLabelHighlighted__elopt",stacktraceRowInteractive:"LogSidePanel_stacktraceRowInteractive__i18zL"}},67398:e=>{e.exports={searchingHeader:"SearchInputV2_searchingHeader__n6jUL",searchingDescription:"SearchInputV2_searchingDescription__t0nLB",examplesLabel:"SearchInputV2_examplesLabel__xqeIs",exampleRow:"SearchInputV2_exampleRow__Soa_C",exampleLabel:"SearchInputV2_exampleLabel__5Xyqr",exampleCode:"SearchInputV2_exampleCode__frAb_",docsLink:"SearchInputV2_docsLink__3JECv"}},70727:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>m,C2:()=>d,ZO:()=>c});var a=s(55729),r=s(6033),n=s.n(r),i=s(80519),l=s.n(i),o=s(35467);let c={ID:"__hyperdx_id",ALIAS_WITH:"__hyperdx_alias_with"};function d(e){return e?Object.entries(e).filter(([,e])=>null!=e&&""!==e.trim()).map(([e,t])=>({name:e,sql:{sql:t,params:{}},isSubquery:!1})):[]}function m({meta:e,aliasMap:t}){let s=(0,a.useMemo)(()=>new Map(e?.map(e=>{let s=null!=t?t[e.name]??e.name:e.name;return[e.name,{...e,valueExpr:s,jsType:(0,o.rj)(e.type)}]})),[e,t]),r=(0,a.useMemo)(()=>d(t),[t]);return(0,a.useCallback)(e=>{let{[c.ID]:t,[c.ALIAS_WITH]:a,...i}=e;return{where:Object.entries(i).map(([e,t])=>{let a=s.get(e),r=a?.type,i=a?.jsType,c=a?.valueExpr;if(null==r)throw Error(`Column type not found for ${e}, ${JSON.stringify(s)}`);if(null==c)throw Error(`valueExpr not found for ${e}, ${JSON.stringify(s)}`);switch(i){case o.A2.Date:return l().format("?=parseDateTime64BestEffort(?, 9)",[l().raw(c),t]);case o.A2.Array:case o.A2.Map:return l().format("?=JSONExtract(?, ?)",[l().raw(c),t,r]);case o.A2.Tuple:return l().format("toJSONString(?)=?",[l().raw(c),t]);case o.A2.JSON:return l().format("lower(hex(MD5(toString(?))))=?",[l().raw(c),n()(t).toString()]);case o.A2.Dynamic:if(null==t||"null"===t)return l().format("isNull(??)",[c]);return(t.length>1e3||e.length>1e3)&&console.warn("Search value/object key too large."),l().format("toJSONString(?) = coalesce(toJSONString(JSONExtract(?, 'Dynamic')), toJSONString(?))",[l().raw(c),t,t]);default:if(null==t)return l().format("isNull(?)",[l().raw(c)]);if(t.length>512)return l().format("lower(hex(MD5(leftUTF8(?, 1000))))=?",[l().raw(c),n()(t.substring(0,1e3)).toString()]);return l().format("?=?",[l().raw(c),t])}}).join(" AND "),aliasWith:r}},[s,r])}},72075:(e,t,s)=>{"use strict";s.d(t,{L:()=>x,X:()=>h});var a=s(6029),r=s(75155);s(55729);var n=s(75828),i=s.n(n),l=s(58333),o=s(23474),c=s(79220),d=s(39696),m=s(68593),u=s(34011),p=s.n(u);let h=({data:e=[],columns:t,emptyMessage:s,hideHeader:r,borderless:n,density:l="normal",interactive:o,tableMeta:u})=>{let h=(0,c.N4)({data:e,columns:t,meta:u,getCoreRowModel:(0,d.HT)()});return e.length?(0,a.jsx)("div",{className:i()(p().tableWrapper,{[p().tableBorderless]:n,[p().tableDensityZero]:"zero"===l,[p().tableDensityCompact]:"compact"===l,[p().tableDensityComfortable]:"comfortable"===l,[p().tableInteractive]:o}),children:(0,a.jsxs)("table",{children:[!r&&(0,a.jsx)("thead",{children:h.getHeaderGroups().map(e=>(0,a.jsx)("tr",{children:e.headers.map(e=>(0,a.jsx)("th",{style:{width:e.column.getSize()===m.k?"100%":e.column.getSize()},children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)("tbody",{children:h.getRowModel().rows.map(e=>(0,a.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,a.jsx)("td",{style:{width:e.column.getSize()===m.k?"100%":e.column.getSize()},children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}):(0,a.jsx)("div",{className:p().emptyMessage,children:s})},x=e=>{let t,s,n,i,c=(0,r.c)(12),{onClick:d,title:m,label:u,biIcon:h}=e;return c[0]!==u?(t=u&&(0,a.jsx)("span",{children:u}),c[0]=u,c[1]=t):t=c[1],c[2]!==h?(s="chevron-up"===h&&(0,a.jsx)(l.A,{size:14}),c[2]=h,c[3]=s):s=c[3],c[4]!==h?(n="chevron-down"===h&&(0,a.jsx)(o.A,{size:14}),c[4]=h,c[5]=n):n=c[5],c[6]!==d||c[7]!==t||c[8]!==s||c[9]!==n||c[10]!==m?(i=(0,a.jsxs)("button",{className:p().tableCellButton,title:m,onClick:d,children:[t,s,n]}),c[6]=d,c[7]=t,c[8]=s,c[9]=n,c[10]=m,c[11]=i):i=c[11],i}},74620:e=>{e.exports={tableWrapper:"LogTable_tableWrapper__1X2n1",muted:"LogTable_muted__aIZSq",table:"LogTable_table__l63_F",tableHead:"LogTable_tableHead__sTgaD",tableRow:"LogTable_tableRow__7BXPl",tableRow__selected:"LogTable_tableRow__selected__DoaNL",rowButtons:"LogTable_rowButtons__XTh2c",rowContentButton:"LogTable_rowContentButton__fjkQI",expandButton:"LogTable_expandButton__nKsH0",expandedRowContent:"LogTable_expandedRowContent__Ps6mn",expanded:"LogTable_expanded___w9XA",expandButtonSeparator:"LogTable_expandButtonSeparator__lYPgm",isWrapped:"LogTable_isWrapped__ksgah",isTruncated:"LogTable_isTruncated__jXz22",iconActionButton:"LogTable_iconActionButton__hO7Fo",copied:"LogTable_copied__wZME1",fieldTextContainer:"LogTable_fieldTextContainer__4Dj7Q",fieldText:"LogTable_fieldText__zVjaq",chart:"LogTable_chart__8kFaD",truncated:"LogTable_truncated__Hv6oN",wrapped:"LogTable_wrapped__Dz8eR",fieldTextPopover:"LogTable_fieldTextPopover__dygEB"}},75359:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var a,r=s(6029),n=s(75155),i=s(55729),l=s(41038),o=s(81973),c=s(96958),d=s(92917),m=s(76539),u=s(37901),p=s(26837),h=s(50374),x=s(46061);function g(e){let t,s,a,c,d,u,p,g,f,y=(0,n.c)(47),{sourceId:v,config:j,onError:_,onScroll:S,context:w,onExpandedRowsChange:E,denoiseResults:k,collapseAllRows:N,isLive:C,enabled:A,isNestedPanel:T,breadcrumbPath:$,onSidebarOpen:I,onSortingChange:L,initialSortBy:R,variant:z}=e;y[0]!==v?(t={id:v},y[0]=v,y[1]=t):t=y[1];let{data:M}=(0,o.Fo)(t),[D,P]=(0,l.ZA)("rowWhere"),[V,F]=(0,l.ZA)("rowSource");y[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],y[2]=s):s=y[2];let[O,H]=(0,i.useState)(s),{setContextRowId:W,setContextRowSource:B}=(0,m.g)();y[3]!==I||y[4]!==P||y[5]!==F||y[6]!==v?(a=e=>{P(e.where),H(e.aliasWith),F(v),I?.(e.where)},y[3]=I,y[4]=P,y[5]=F,y[6]=v,y[7]=a):a=y[7];let X=a;y[8]!==T||y[9]!==W||y[10]!==B||y[11]!==P||y[12]!==F?(c=()=>{P(null),F(null),T||(W(null),B(null))},y[8]=T,y[9]=W,y[10]=B,y[11]=P,y[12]=F,y[13]=c):c=y[13];let Z=c;y[14]!==M?(d=e=>M?(0,r.jsx)(b,{source:M,rowId:e.id,aliasWith:e.aliasWith}):(0,r.jsx)("div",{className:"p-3 text-muted",children:"Loading..."}),y[14]=M,y[15]=d):d=y[15];let q=d;y[16]!==w?(u=w??{},y[16]=w,y[17]=u):u=y[17],y[18]!==O||y[19]!==$||y[20]!==T||y[21]!==Z||y[22]!==D||y[23]!==V||y[24]!==M||y[25]!==v?(p=M&&(V===v||!V)&&(0,r.jsx)(h.A,{source:M,rowId:D??void 0,aliasWith:O,isNestedPanel:T,breadcrumbPath:$,onClose:Z}),y[18]=O,y[19]=$,y[20]=T,y[21]=Z,y[22]=D,y[23]=V,y[24]=M,y[25]=v,y[26]=p):p=y[26];let J=D??void 0,G=C??!0;return y[27]!==N||y[28]!==j||y[29]!==k||y[30]!==A||y[31]!==R||y[32]!==_||y[33]!==E||y[34]!==X||y[35]!==S||y[36]!==L||y[37]!==q||y[38]!==v||y[39]!==J||y[40]!==G||y[41]!==z?(g=(0,r.jsx)(x.rD,{config:j,sourceId:v,onRowDetailsClick:X,highlightedLineId:J,enabled:A,isLive:G,queryKeyPrefix:"dbSqlRowTable",onSortingChange:L,denoiseResults:k,initialSortBy:R,renderRowDetails:q,onScroll:S,onError:_,onExpandedRowsChange:E,collapseAllRows:N,variant:z}),y[27]=N,y[28]=j,y[29]=k,y[30]=A,y[31]=R,y[32]=_,y[33]=E,y[34]=X,y[35]=S,y[36]=L,y[37]=q,y[38]=v,y[39]=J,y[40]=G,y[41]=z,y[42]=g):g=y[42],y[43]!==g||y[44]!==u||y[45]!==p?(f=(0,r.jsxs)(h.D.Provider,{value:u,children:[p,g]}),y[43]=g,y[44]=u,y[45]=p,y[46]=f):f=y[46],f}var f=((a=f||{}).Overview="overview",a.ColumnValues="columnValues",a);function b(e){let t,s,a,i,l,o,m=(0,n.c)(20),{source:h,rowId:x,aliasWith:g}=e,[f,b]=(0,d.Mj)("hdx-expanded-row-default-tab","columnValues");return m[0]===Symbol.for("react.memo_cache_sentinel")?(t=[{text:"Overview",value:"overview"},{text:"Column Values",value:"columnValues"}],m[0]=t):t=m[0],m[1]!==f||m[2]!==b?(s=(0,r.jsx)("div",{className:"px-3 pt-2 position-relative",children:(0,r.jsx)(c.A,{className:"fs-8",items:t,activeItem:f,onClick:b})}),m[1]=f,m[2]=b,m[3]=s):s=m[3],m[4]!==f||m[5]!==g||m[6]!==x||m[7]!==h?(a="overview"===f&&(0,r.jsx)("div",{className:"inline-overview-panel",children:(0,r.jsx)(p.W,{source:h,rowId:x,aliasWith:g})}),m[4]=f,m[5]=g,m[6]=x,m[7]=h,m[8]=a):a=m[8],m[9]!==f||m[10]!==g||m[11]!==x||m[12]!==h?(i="columnValues"===f&&(0,r.jsx)(u.dD,{source:h,rowId:x,aliasWith:g}),m[9]=f,m[10]=g,m[11]=x,m[12]=h,m[13]=i):i=m[13],m[14]!==a||m[15]!==i?(l=(0,r.jsxs)("div",{children:[a,i]}),m[14]=a,m[15]=i,m[16]=l):l=m[16],m[17]!==s||m[18]!==l?(o=(0,r.jsxs)("div",{className:"position-relative",children:[s,l]}),m[17]=s,m[18]=l,m[19]=o):o=m[19],o}},76539:(e,t,s)=>{"use strict";s.d(t,{A:()=>E,g:()=>w});var a,r=s(6029),n=s(75155),i=s(55729),l=s(67264),o=s.n(l),c=s(41038),d=s(1909),m=s(3145),u=s(78253),p=s(3635),h=s(90124),x=s(43085),g=s(39785),f=s(17273),b=s(81973),y=s(92917),v=s(37901),j=s(50374),_=s(46061),S=((a=S||{}).All="all",a.Custom="custom",a.Host="host",a.Node="k8s.node.name",a.Pod="k8s.pod.name",a.Service="service",a);function w(e){let t,s,a,r=(0,n.c)(11),l=(0,c.ZA)("contextRowId",c.tU),o=(0,c.ZA)("contextRowSource",c.tU);r[0]!==l||r[1]!==o?(t={contextRowId:l,contextRowSource:o},r[0]=l,r[1]=o,r[2]=t):t=r[2];let d=t,m=(0,i.useState)(null),u=(0,i.useState)(null);r[3]!==m||r[4]!==u?(s={contextRowId:m,contextRowSource:u},r[3]=m,r[4]=u,r[5]=s):s=r[5];let p=s,h=e?p:d;return r[6]!==h.contextRowId[0]||r[7]!==h.contextRowId[1]||r[8]!==h.contextRowSource[0]||r[9]!==h.contextRowSource[1]?(a={contextRowId:h.contextRowId[0],contextRowSource:h.contextRowSource[0],setContextRowId:h.contextRowId[1],setContextRowSource:h.contextRowSource[1]},r[6]=h.contextRowId[0],r[7]=h.contextRowId[1],r[8]=h.contextRowSource[0],r[9]=h.contextRowSource[1],r[10]=a):a=r[10],a}function E(e){let t,s,a,l,c,S,E,k,N,C,A,T,$,I,L,R,z,M,D,P,V,F,O,H,W,B,X,Z,q=(0,n.c)(98),{source:J,dbSqlRowTableConfig:G,rowData:U,rowId:K,breadcrumbPath:Y,onBreadcrumbClick:Q}=e;q[0]!==Y?(t=void 0===Y?[]:Y,q[0]=Y,q[1]=t):t=q[1];let ee=t,et=U[v.$_.TIMESTAMP];q[2]!==G?(s=G??{},q[2]=G,q[3]=s):s=q[3];let{whereLanguage:es}=s,ea=void 0===es?"lucene":es;q[4]===Symbol.for("react.memo_cache_sentinel")?(a=o()("30s"),q[4]=a):a=q[4];let[er,en]=(0,i.useState)(a),[ei,el]=(0,i.useState)("all");q[5]!==ea?(l=ea??(0,f.S)()??"lucene",q[5]=ea,q[6]=l):l=q[6],q[7]!==l?(c={defaultValues:{where:"",whereLanguage:l}},q[7]=l,q[8]=c):c=q[8];let{control:eo}=(0,d.mN)(c);q[9]!==eo?(S={control:eo,name:"where"},q[9]=eo,q[10]=S):S=q[10];let ec=(0,d.FH)(S),[ed]=(0,g.o)(ec,1e3),{contextRowId:em,contextRowSource:eu,setContextRowId:ep,setContextRowSource:eh}=w(ee.length>0),ex=eu||"";q[11]!==ex?(E={id:ex},q[11]=ex,q[12]=E):E=q[12];let{data:eg}=(0,b.Fo)(E);q[13]===Symbol.for("react.memo_cache_sentinel")?(k=[],q[13]=k):k=q[13];let[ef,eb]=(0,i.useState)(k);q[14]!==ep||q[15]!==eh?(N=()=>{ep(null),eh(null)},q[14]=ep,q[15]=eh,q[16]=N):N=q[16];let ey=N,{setChildModalOpen:ev}=(0,i.useContext)(j.D);q[17]!==ep||q[18]!==eh||q[19]!==J.id?(C=e=>{ep(e.where),eb(e.aliasWith),eh(J.id)},q[17]=ep,q[18]=eh,q[19]=J.id,q[20]=C):C=q[20];let ej=C;q[21]!==et?(A=new Date(et),q[21]=et,q[22]=A):A=q[22];let e_=A,eS=e_.getTime()-er/2;q[23]!==eS?(T=new Date(eS),q[23]=eS,q[24]=T):T=q[24];let ew=e_.getTime()+er/2;q[25]!==ew?($=new Date(ew),q[25]=ew,q[26]=$):$=q[26],q[27]!==T||q[28]!==$?(I=[T,$],q[27]=T,q[28]=$,q[29]=I):I=q[29];let eE=I;q[30]!==U?(L=U[v.$_.RESOURCE_ATTRIBUTES]??{},q[30]=U,q[31]=L):L=q[31];let{"k8s.node.name":ek,"k8s.pod.name":eN,"host.name":eC,"service.name":eA}=L;q[32]===Symbol.for("react.memo_cache_sentinel")?(R={field:"",value:""},q[32]=R):R=q[32];let eT=ed||"";q[33]!==eT?(z={field:"",value:eT},q[33]=eT,q[34]=z):z=q[34],q[35]!==eA?(M={field:"service.name",value:eA},q[35]=eA,q[36]=M):M=q[36],q[37]!==eC?(D={field:"host.name",value:eC},q[37]=eC,q[38]=D):D=q[38],q[39]!==eN?(P={field:"k8s.pod.name",value:eN},q[39]=eN,q[40]=P):P=q[40],q[41]!==ek?(V={field:"k8s.node.name",value:ek},q[41]=ek,q[42]=V):V=q[42],q[43]!==z||q[44]!==M||q[45]!==D||q[46]!==P||q[47]!==V?(F={all:R,custom:z,service:M,host:D,"k8s.pod.name":P,"k8s.node.name":V},q[43]=z,q[44]=M,q[45]=D,q[46]=P,q[47]=V,q[48]=F):F=q[48];let e$=F;q[49]!==e$||q[50]!==ea?(O=e=>{let t="sql"===ea,s=e$[e];return"all"===e?s.value:"custom"===e?s.value.trim():(0,y.ji)("ResourceAttributes",s.field,s.value,t)},q[49]=e$,q[50]=ea,q[51]=O):O=q[51];let eI=O;q[52]!==eC||q[53]!==ek||q[54]!==eN||q[55]!==eA?(H=function(){return[{label:"All",value:"all"},...eA?[{label:"Service",value:"service"}]:[],...eC?[{label:"Host",value:"host"}]:[],...eN?[{label:"Pod",value:"k8s.pod.name"}]:[],...ek?[{label:"Node",value:"k8s.node.name"}]:[],{label:"Custom",value:"custom"}]},q[52]=eC,q[53]=ek,q[54]=eN,q[55]=eA,q[56]=H):H=q[56];let eL=H;e:{let e,t,s;q[57]!==ei||q[58]!==eI?(e=eI(ei),q[57]=ei,q[58]=eI,q[59]=e):e=q[59];let a=e;if(!G){let e,t,s=J.defaultTableSelectExpression||"";q[60]===Symbol.for("react.memo_cache_sentinel")?(e={limit:200},q[60]=e):e=q[60];let r=`${J.timestampValueExpression} DESC`;q[61]!==eE||q[62]!==ea||q[63]!==J.connection||q[64]!==J.from||q[65]!==J.timestampValueExpression||q[66]!==s||q[67]!==r||q[68]!==a?(t={connection:J.connection,from:J.from,timestampValueExpression:J.timestampValueExpression,select:s,limit:e,orderBy:r,where:a,whereLanguage:ea,dateRange:eE},q[61]=eE,q[62]=ea,q[63]=J.connection,q[64]=J.from,q[65]=J.timestampValueExpression,q[66]=s,q[67]=r,q[68]=a,q[69]=t):t=q[69],W=t;break e}q[70]===Symbol.for("react.memo_cache_sentinel")?(t=[],q[70]=t):t=q[70],q[71]!==G||q[72]!==eE||q[73]!==ea||q[74]!==a?(s={...G,where:a,whereLanguage:ea,dateRange:eE,filters:t},q[71]=G,q[72]=eE,q[73]=ea,q[74]=a,q[75]=s):s=q[75],W=s}let eR=W;return q[76]!==e$||q[77]!==eR||q[78]!==ei||q[79]!==eo||q[80]!==eL||q[81]!==ej||q[82]!==er||q[83]!==K||q[84]!==ev||q[85]!==J?(B=eR&&(0,r.jsxs)(u.s,{direction:"column",mih:"0px",style:{flexGrow:1},children:[(0,r.jsxs)(p.Y,{justify:"space-between",p:"sm",children:[(0,r.jsx)(h.I,{size:"xs",data:eL(),value:ei,onChange:e=>el(e)}),"custom"===ei&&(0,r.jsx)(f.A,{tableConnection:(0,m.VO)(J),control:eo,name:"where",enableHotkey:!0,size:"xs"}),(0,r.jsx)(h.I,{size:"xs",data:[{label:"100ms",value:o()("100ms").toString()},{label:"500ms",value:o()("500ms").toString()},{label:"1s",value:o()("1s").toString()},{label:"5s",value:o()("5s").toString()},{label:"30s",value:o()("30s").toString()},{label:"1m",value:o()("1m").toString()},{label:"5m",value:o()("5m").toString()},{label:"15m",value:o()("15m").toString()}],value:er.toString(),onChange:e=>en(Number(e))})]}),(0,r.jsx)(p.Y,{p:"sm",children:(0,r.jsxs)("div",{children:["all"!==ei&&(0,r.jsxs)(x.E,{size:"md",variant:"default",children:[ei,":",e$[ei].value]}),(0,r.jsxs)(x.E,{size:"md",variant:"default",children:["Time range: \xb1",o()(er/2)]})]})}),(0,r.jsx)("div",{style:{height:"100%",overflow:"auto"},children:(0,r.jsx)(_.rD,{sourceId:J.id,highlightedLineId:K,showExpandButton:!1,isLive:!1,config:eR,queryKeyPrefix:"context",onRowDetailsClick:ej,onChildModalOpen:ev})})]}),q[76]=e$,q[77]=eR,q[78]=ei,q[79]=eo,q[80]=eL,q[81]=ej,q[82]=er,q[83]=K,q[84]=ev,q[85]=J,q[86]=B):B=q[86],q[87]!==ee||q[88]!==ef||q[89]!==em||q[90]!==eg||q[91]!==ey||q[92]!==Q||q[93]!==U?(X=em&&eg&&(0,r.jsx)(j.A,{source:eg,rowId:em,aliasWith:ef,onClose:ey,isNestedPanel:!0,breadcrumbPath:[...ee,{label:"Surrounding Context",rowData:U}],onBreadcrumbClick:Q}),q[87]=ee,q[88]=ef,q[89]=em,q[90]=eg,q[91]=ey,q[92]=Q,q[93]=U,q[94]=X):X=q[94],q[95]!==B||q[96]!==X?(Z=(0,r.jsxs)(r.Fragment,{children:[B,X]}),q[95]=B,q[96]=X,q[97]=Z):Z=q[97],Z}},78694:(e,t,s)=>{"use strict";s.d(t,{iV:()=>g,ir:()=>v,$K:()=>f,hF:()=>b,Qx:()=>y});var a=s(6029),r=s(75155),n=s(55729);s(82203);var i=s(75828),l=(s(63085),s(8468)),o=s(20158),c=s(70114),d=s(23474);s(38067),s(26355);s(94720),s(3635);var m=s(72075),u=s(68593);s(7565),s(94364);var p=s(92917),h=s(66773),x=s.n(h);let g=e=>{let t,s,i,l,o,m,u=(0,r.c)(15),{title:p,children:h,initiallyCollapsed:x}=e,[g,f]=n.useState(x??!1);return u[0]!==g?(t=()=>f(!g),s=g?(0,a.jsx)(c.A,{size:14,className:"me-2"}):(0,a.jsx)(d.A,{size:14,className:"me-2"}),u[0]=g,u[1]=t,u[2]=s):(t=u[1],s=u[2]),u[3]!==p?(i=(0,a.jsx)("div",{className:"fs-7",children:p}),u[3]=p,u[4]=i):i=u[4],u[5]!==t||u[6]!==s||u[7]!==i?(l=(0,a.jsxs)("div",{className:"d-flex align-items-center mb-1 text-white-hover w-50",role:"button",onClick:t,children:[s,i]}),u[5]=t,u[6]=s,u[7]=i,u[8]=l):l=u[8],u[9]!==h||u[10]!==g?(o=g?null:(0,a.jsx)("div",{className:"mb-4",children:h}),u[9]=h,u[10]=g,u[11]=o):o=u[11],u[12]!==l||u[13]!==o?(m=(0,a.jsxs)("div",{className:"my-3",children:[l,o]}),u[12]=l,u[13]=o,u[14]=m):m=u[14],m},f=e=>{let t,s,n=(0,r.c)(5),{children:i,title:l}=e;return n[0]!==l?(t=l&&(0,a.jsx)("div",{className:x().panelSectionWrapperTitle,children:l}),n[0]=l,n[1]=t):t=n[1],n[2]!==i||n[3]!==t?(s=(0,a.jsxs)("div",{className:x().panelSectionWrapper,children:[t,i]}),n[2]=i,n[3]=t,n[4]=s):s=n[4],s};u.k;let b=[{accessorKey:"0",header:"Header",size:260,cell:({row:e})=>(0,a.jsx)("div",{className:"text-truncate",title:e.original[0],children:e.original[0]})},{size:u.k,accessorKey:"1",header:"Value"}],y=[{accessorKey:"label",header:"Label",size:260,cell:({row:e})=>(0,a.jsx)("span",{children:e.original.label})},{size:u.k,accessorKey:"value",header:"Value",cell:({row:e})=>(0,a.jsx)("span",{className:e.original.className,children:e.original.value})}],v=()=>{let e,t,s,n,i,c=(0,r.c)(7),[d,m]=(0,p.Mj)("kbd-shortcuts-dismissed",!1);c[0]!==m?(e=()=>{m(!0)},c[0]=m,c[1]=e):e=c[1];let u=e;return d?null:(c[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(l.u,{className:"me-1",children:"â†"}),s=(0,a.jsx)(l.u,{children:"â†’"}),c[2]=t,c[3]=s):(t=c[2],s=c[3]),c[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsxs)("div",{children:["Use ",t,s," arrow keys or ",(0,a.jsx)(l.u,{className:"me-1",children:"k"}),(0,a.jsx)(l.u,{children:"j"})," to move through events"]}),(0,a.jsx)("div",{className:x().kbdDivider}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.u,{children:"ESC"})," to close"]})]}),c[4]=n):n=c[4],c[5]!==u?(i=(0,a.jsx)("div",{className:x().kbdShortcuts,children:(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center ",children:[n,(0,a.jsx)(o.J,{"aria-label":"Hide",onClick:u})]})}),c[5]=u,c[6]=i):i=c[6],i)}},80925:(e,t,s)=>{"use strict";s.d(t,{S:()=>g,t:()=>p});var a=s(55729),r=s(67843),n=s(35467),i=s(67270),l=s(12482),o=s(92917),c=s(40147),d=s(78550),m=s(49672),u=s(81973);function p({traceSource:e,sessionSource:t,dateRange:s,where:a,whereLanguage:r},o){let{enabled:u=!0}=o||{},{getFieldExpression:p,isLoading:h}=(0,c.A)(e),{getFieldExpression:x,isLoading:g}=(0,c.A)(t),f=["teamId","teamName","userEmail","userName"],b="sessions",y=(0,m.fu)(),v=(0,d.Ge)();return(0,l.I)({queryKey:["sessions",e?.id,t?.id,s,a,r],queryFn:async()=>{if(!e||!t||!p||!x)return[];let l=p(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId"),[o,c,d]=await Promise.all([(0,i.PV)({select:[{valueExpression:`${e.serviceNameExpression}`,alias:"serviceName"},{valueExpression:l,alias:"sessionId"},{alias:"maxTimestamp",valueExpression:`MAX(${e.timestampValueExpression})`},{alias:"minTimestamp",valueExpression:`MIN(${e.timestampValueExpression})`},{aggFn:"count",alias:"sessionCount",valueExpression:"*"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.eventAttributesExpression}.component:"user-interaction"`,valueExpression:"",alias:"interactionCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.statusCodeExpression}:error`,valueExpression:"",alias:"errorCount"},{aggFn:"count",aggConditionLanguage:"lucene",aggCondition:`${e.spanNameExpression}:"record init"`,valueExpression:"",alias:"recordingCount"},...f.map(t=>({valueExpression:`MAX(${p(e.eventAttributesExpression??"SpanAttributes",t)})`,alias:t}))],from:e.from,dateRange:s,where:`${e.resourceAttributesExpression}.rum.sessionId:*`,whereLanguage:"lucene",...a&&{filters:[{type:r??"lucene",condition:a}]},timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e.connection,groupBy:"serviceName, sessionId"},v,e.querySettings),(0,i.PV)({select:[{valueExpression:`DISTINCT ${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:t.from,dateRange:s,where:`${x(t.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b})`,whereLanguage:"sql",timestampValueExpression:t.timestampValueExpression,implicitColumnExpression:t.implicitColumnExpression,connection:t.connection},v,t.querySettings),(0,i.PV)({select:[{valueExpression:`DISTINCT ${p(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")}`,alias:"sessionId"}],from:e.from,dateRange:s,where:`(${e.spanNameExpression}='record init' OR ${e.spanNameExpression}='visibility') AND (${p(e.resourceAttributesExpression??"ResourceAttributes","rum.sessionId")} IN (SELECT sessions.sessionId FROM ${b}))`,whereLanguage:"sql",timestampValueExpression:e.timestampValueExpression,implicitColumnExpression:e.implicitColumnExpression,connection:e?.connection},v,e.querySettings)]),m=(0,n.kg)`
        WITH _${b} AS (${o}),
        ${b} AS (
          SELECT * 
          FROM _${b}
          ${a?"":"HAVING interactionCount > 0 OR recordingCount > 0"}
          ORDER BY maxTimestamp DESC
          LIMIT 500
        )
      `,u=a&&a.length>0?(0,n.kg)`
        ${m},
        sessionIdsWithRecordings AS (${c}),
        sessionIdsWithUserActivity AS (${d})
        SELECT *
        FROM ${b}
        WHERE ${b}.sessionId IN (
          SELECT sessionIdsWithRecordings.sessionId FROM sessionIdsWithRecordings
        ) OR ${b}.sessionId IN (
          SELECT sessionIdsWithUserActivity.sessionId FROM sessionIdsWithUserActivity
        )
      `:(0,n.kg)`
        ${m}
        SELECT *
        FROM ${b}
        `;return await y.query({query:u.sql,query_params:u.params,connectionId:e?.connection}).then(e=>e.json())},staleTime:3e5,...o,enabled:!!u&&!h&&!g})}class h extends Error{}async function*x(e){let t=e.getReader();try{for(;;){let{done:e,value:s}=await t.read();if(e)return;yield s}}finally{t.releaseLock()}}function g({serviceName:e,sessionId:t,sourceId:s,startDate:n,endDate:l,limit:c=100,onEvent:p,onEnd:g,resultsKey:f,getSessionSourceFieldExpression:b},y){let v=y?.keepPreviousData??!1,j=y?.shouldAbortPendingRequest??!0,_=(0,d.Ge)(),[S,w]=(0,a.useState)({key:"",data:[]}),[E,k]=(0,a.useState)(!0),[N,C]=(0,a.useState)(!0),A=(0,a.useRef)(null),[T,$]=(0,a.useState)("idle"),I=(0,a.useRef)(void 0),{data:L}=(0,u.Fo)({id:s}),R=(0,a.useCallback)(async({pageParam:s=0,limit:a})=>{if(!L)return;let o=[],d=0,y=n.getTime().toString(),j=l.getTime().toString(),S=(a??c).toString(),E=s.toString(),N=new AbortController;A.current=N,k(!0),$("fetching"),I.current="fetching";let T=await (0,i.PV)({select:[{valueExpression:u.kJ.implicitColumnExpression,alias:"b"},{valueExpression:`simpleJSONExtractInt(${u.kJ.implicitColumnExpression}, 'type')`,alias:"t"},{valueExpression:`${b(u.kJ.eventAttributesExpression,"rr-web.chunk")}`,alias:"ck"},{valueExpression:`${b(u.kJ.eventAttributesExpression,"rr-web.total-chunks")}`,alias:"tcks"}],dateRange:[new Date(parseInt(y)),new Date(parseInt(j))],from:L.from,whereLanguage:"lucene",where:`ServiceName:"${e}" AND ${u.kJ.resourceAttributesExpression}.rum.sessionId:"${t}"`,timestampValueExpression:L.timestampValueExpression,implicitColumnExpression:u.kJ.implicitColumnExpression,connection:L.connection,orderBy:`${L.timestampValueExpression} ASC`,limit:{limit:Math.min(1e6,parseInt(S)),offset:parseInt(E)}},_,L.querySettings),R=(async()=>{let e,t=(0,m.W)(),s=await t.query({query:T.sql,query_params:T.params,format:"JSONEachRow",connectionId:L.connection});for await(let t of(e=p||(v?e=>o.push(e):e=>w(t=>(0,r.Ay)(t,t=>{t.key=f??t.key??"DEFAULT_KEY",t.data.push(e)}))),x(s.stream())))for(let s of t)try{let t=s.json();d++,e(t)}catch{}g?.(),v&&w({key:f??"DEFAULT_KEY",data:o}),(0===d||d<c)&&C(!1)})();try{await Promise.race([R,new Promise((e,t)=>{setTimeout(()=>{t(new h("Timeout"))},18e4)})])}catch(e){e instanceof h?(k(!1),$("idle"),I.current="idle",N.abort(),console.warn("Closing event source due to timeout"),g?.(new h)):console.error(e)}N.abort(),k(!1),$("idle"),I.current="idle"},[L,e,t,n,l,c,v,w,p,g,f,_,b]),z=[t,n,l,c].join("||"),M=(0,o.ZC)(z);(0,a.useEffect)(()=>{M!=z&&("fetching"!==I.current||j)&&(j&&"fetching"===I.current&&A.current?.abort(),v||w({key:"",data:[]}),C(!0),R({pageParam:0}))},[M,z,j,R,v]);let D=(0,a.useCallback)(e=>{N&&"idle"===I.current&&S.data.length>0&&R({pageParam:S.data.length,limit:e?.limit}).then(()=>{e?.cb?.()})},[R,S.data.length,N]),P=(0,a.useCallback)(()=>{A.current?.abort()},[]);return{hasNextPage:N,isFetching:E,results:S.data,resultsKey:S.key,fetchNextPage:D,abort:P}}},81408:e=>{e.exports={wrapper:"SessionSubpanelV2_wrapper__5kN48",eventList:"SessionSubpanelV2_eventList__CJCVt",eventListHeader:"SessionSubpanelV2_eventListHeader__Hbhpi",eventListContainer:"SessionSubpanelV2_eventListContainer__r2wEN",eventRow:"SessionSubpanelV2_eventRow__XFl1t",eventRowError:"SessionSubpanelV2_eventRowError__61zDU",eventRowIcon:"SessionSubpanelV2_eventRowIcon__C371Y",eventRowTitle:"SessionSubpanelV2_eventRowTitle__BCmpn",eventRowSuccess:"SessionSubpanelV2_eventRowSuccess___a9Kd",eventRowHighlighted:"SessionSubpanelV2_eventRowHighlighted__YWXks",eventRowContent:"SessionSubpanelV2_eventRowContent__Y9_5z",eventRowTimestamp:"SessionSubpanelV2_eventRowTimestamp__MPRLq",eventRowDescription:"SessionSubpanelV2_eventRowDescription__XJ9b7",player:"SessionSubpanelV2_player___Erie",playerHeader:"SessionSubpanelV2_playerHeader__qMRJo",playerHeaderUrl:"SessionSubpanelV2_playerHeaderUrl__K3MEs",playerContainer:"SessionSubpanelV2_playerContainer__m7RnT",domPlayerWrapper:"SessionSubpanelV2_domPlayerWrapper__wKZpR",domPlayerWrapperPaused:"SessionSubpanelV2_domPlayerWrapperPaused__9xhaT",playerTimestamp:"SessionSubpanelV2_playerTimestamp__ebCzv",playerPlaybar:"SessionSubpanelV2_playerPlaybar__FEw0u",playerToolbar:"SessionSubpanelV2_playerToolbar__7sL7N"}},83101:e=>{e.exports={resizeHandle:"ResizablePanel_resizeHandle__4fEVM",resizeYHandle:"ResizablePanel_resizeYHandle__1pBbm"}},94364:(e,t,s)=>{"use strict";s.d(t,{f:()=>a});let a=e=>({isLoading:!1,error:null,enrichedFrame:null})},94937:(e,t,s)=>{"use strict";s.d(t,{A:()=>v});var a=s(6029),r=s(75155),n=s(55729),i=s(82203),l=s.n(i),o=s(80519),c=s.n(o),d=s(37659),m=s(3635),u=s(43517),p=s(63085),h=s(34834),x=s(25062),g=s(56795),f=s(28975),b=s(41279),y=s(18006);function v(e){let t,s,i,o,v,j,_,S,w,E,k,N,C,A,T,$,I,L,R=(0,r.c)(62),{displayedKey:z,name:M,nameLanguage:D,sqlExpression:P,value:V,onPropertyAddClick:F,generateSearchUrl:O}=e,H=void 0===D?"lucene":D,[W,B]=(0,n.useState)(!1);R[0]!==V?(t=(0,y.OH)(V),R[0]=V,R[1]=t):t=R[1];let X=t;if(!(F||O||X)){let e,t=z||M;return R[2]!==M||R[3]!==t||R[4]!==V?(e=(0,a.jsxs)("div",{className:"bg-highlighted px-2 py-0.5 me-1 my-1",children:[t,": ",V]},M),R[2]=M,R[3]=t,R[4]=V,R[5]=e):e=R[5],e}if(R[6]!==z||R[7]!==O||R[8]!==X||R[9]!==M||R[10]!==H||R[11]!==F||R[12]!==W||R[13]!==P||R[14]!==V){let e,t,r="sql"===H?c().format("? = ?",[c().raw(M),V]):`${M}:${"string"==typeof V?`"${V}"`:V}`;o=d.A,A="top",T=!1,v=!0,j=W,_=B,R[29]===Symbol.for("react.memo_cache_sentinel")?(e={wordBreak:"break-word"},R[29]=e):e=R[29],R[30]!==z||R[31]!==X||R[32]!==M||R[33]!==W||R[34]!==V?(t=X?(0,a.jsxs)("a",{href:encodeURI(V),target:"_blank",rel:"noopener noreferrer",className:"d-flex flex-row align-items-center bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",children:[z||M,(0,a.jsx)(g.A,{size:14,className:"ms-1"})]}):(0,a.jsxs)(m.Y,{className:"bg-highlighted px-2 py-0.5 me-1 my-1 cursor-pointer",wrap:"nowrap",gap:0,onClick:()=>B(!W),children:[z||M,":",(0,a.jsx)(u.E,{size:"xs",ms:4,maw:300,truncate:!0,children:V})]}),R[30]=z,R[31]=X,R[32]=M,R[33]=W,R[34]=V,R[35]=t):t=R[35],R[36]!==t||R[37]!==V?(S=(0,a.jsx)(d.A.Target,{children:(0,a.jsx)(p.m,{label:V,withArrow:!0,maw:400,multiline:!0,style:e,position:"bottom",children:t})}),R[36]=t,R[37]=V,R[38]=S):S=R[38],i=d.A.Dropdown,C=2,s=h.B,w=0,E="stretch",R[39]!==F||R[40]!==P||R[41]!==V?(k=F&&(0,a.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,a.jsx)(f.A,{size:14}),onClick:()=>{F(P,V),B(!1)},children:"Add to Search"}),R[39]=F,R[40]=P,R[41]=V,R[42]=k):k=R[42],N=O&&(0,a.jsx)(l(),{href:O(r,H),children:(0,a.jsx)(x.$,{justify:"space-between",color:"gray",variant:"subtle",size:"xs",rightSection:(0,a.jsx)(b.A,{size:14}),children:"Search This Value"})}),R[6]=z,R[7]=O,R[8]=X,R[9]=M,R[10]=H,R[11]=F,R[12]=W,R[13]=P,R[14]=V,R[15]=s,R[16]=i,R[17]=o,R[18]=v,R[19]=j,R[20]=_,R[21]=S,R[22]=w,R[23]=E,R[24]=k,R[25]=N,R[26]=C,R[27]=A,R[28]=T}else s=R[15],i=R[16],o=R[17],v=R[18],j=R[19],_=R[20],S=R[21],w=R[22],E=R[23],k=R[24],N=R[25],C=R[26],A=R[27],T=R[28];return R[43]!==s||R[44]!==w||R[45]!==E||R[46]!==k||R[47]!==N?($=(0,a.jsxs)(s,{gap:w,justify:E,children:[k,N]}),R[43]=s,R[44]=w,R[45]=E,R[46]=k,R[47]=N,R[48]=$):$=R[48],R[49]!==i||R[50]!==$||R[51]!==C?(I=(0,a.jsx)(i,{p:C,children:$}),R[49]=i,R[50]=$,R[51]=C,R[52]=I):I=R[52],R[53]!==o||R[54]!==v||R[55]!==j||R[56]!==_||R[57]!==S||R[58]!==I||R[59]!==A||R[60]!==T?(L=(0,a.jsxs)(o,{position:A,withinPortal:T,withArrow:v,opened:j,onChange:_,children:[S,I]}),R[53]=o,R[54]=v,R[55]=j,R[56]=_,R[57]=S,R[58]=I,R[59]=A,R[60]=T,R[61]=L):L=R[61],L}},96958:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(6029),r=s(75155),n=s(75828),i=s.n(n);function l(e){let t,s,n,l,o,c,d,m,u,p,h,x=(0,r.c)(23);x[0]!==e?({children:s,onClick:l,active:t,className:n,style:c,...o}=e,x[0]=e,x[1]=t,x[2]=s,x[3]=n,x[4]=l,x[5]=o,x[6]=c):(t=x[1],s=x[2],n=x[3],l=x[4],o=x[5],c=x[6]);let g=!t;x[7]!==t||x[8]!==n||x[9]!==g?(d=i()("text-center cursor-pointer",{"fw-bold text-white-hover":t,"text-muted-hover":g},n),x[7]=t,x[8]=n,x[9]=g,x[10]=d):d=x[10],x[11]!==s?(m=(0,a.jsx)("span",{children:s}),x[11]=s,x[12]=m):m=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(u={height:2},x[13]=u):u=x[13];let f=t?"var(--color-text-brand)":"var(--color-border)";return x[14]!==f?(p=(0,a.jsx)("div",{className:"w-100 mt-2",style:u,children:(0,a.jsx)("div",{className:"h-100 w-100",style:{background:f}})}),x[14]=f,x[15]=p):p=x[15],x[16]!==l||x[17]!==o||x[18]!==c||x[19]!==d||x[20]!==m||x[21]!==p?(h=(0,a.jsxs)("div",{className:d,onClick:l,style:c,...o,children:[m,p]}),x[16]=l,x[17]=o,x[18]=c,x[19]=d,x[20]=m,x[21]=p,x[22]=h):h=x[22],h}function o(e){let t,s,n,o,c=(0,r.c)(14),{items:d,activeItem:m,className:u,onClick:p,"data-testid":h}=e;if(c[0]!==u?(t=i()("d-flex flex-wrap",u),c[0]=u,c[1]=t):t=c[1],c[2]!==m||c[3]!==d||c[4]!==p){let e;c[6]!==m||c[7]!==p?(e=e=>(0,a.jsx)(l,{"data-testid":`tab-${String(e.value).toLowerCase()}`,active:e.value===m,onClick:()=>p?.(e.value),children:(0,a.jsx)("span",{className:"mx-4 text-nowrap",children:e.text})},e.value),c[6]=m,c[7]=p,c[8]=e):e=c[8],s=d.map(e),c[2]=m,c[3]=d,c[4]=p,c[5]=s}else s=c[5];return c[9]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(l,{className:"flex-grow-1 pe-none",children:"\xa0"}),c[9]=n):n=c[9],c[10]!==h||c[11]!==t||c[12]!==s?(o=(0,a.jsxs)("div",{className:t,"data-testid":h,children:[s,n]}),c[10]=h,c[11]=t,c[12]=s,c[13]=o):o=c[13],o}}},e=>{e.O(0,[7756,883,2928,6171,5554,910,1606,1909,6747,3062,1445,2990,4607,9979,8855,5165,5948,9353,4528,1021,6514,3234,8374,3172,6593,636,8792],()=>e(e.s=57749)),_N_E=e.O()}]);