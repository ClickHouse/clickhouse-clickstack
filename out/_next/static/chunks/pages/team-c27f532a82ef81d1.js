(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3819],{9211:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(6029),n=t(75155),r=t(1909),i=t(38206);function l(e){let s,t,l,o,c,d=(0,n.c)(16),{field:m,fieldState:h}=(0,r.as)(e),{value:u,onChange:x,onBlur:g,name:j,ref:p}=m;d[0]!==e?({onCreate:s,allowDeselect:l,...t}=e,d[0]=e,d[1]=s,d[2]=t,d[3]=l):(s=d[1],t=d[2],l=d[3]);let y=void 0===l||l,v=e.data?.find(e=>"string"==typeof e?e===u:!("value"in e)||e.value===u);d[4]!==y||d[5]!==x||d[6]!==s?(o=e=>{"_create_new_value"===e&&null!=s?s():(null!==e||y)&&x(e)},d[4]=y,d[5]=x,d[6]=s,d[7]=o):o=d[7];let f=o,b=h.error?.message,w=null==v?null:u;return d[8]!==j||d[9]!==g||d[10]!==p||d[11]!==f||d[12]!==t||d[13]!==b||d[14]!==w?(c=(0,a.jsx)(i.l,{...t,error:b,value:w,onChange:f,onBlur:g,name:j,ref:p}),d[8]=j,d[9]=g,d[10]=p,d[11]=f,d[12]=t,d[13]=b,d[14]=w,d[15]=c):c=d[15],c}},17513:(e,s,t)=>{"use strict";t.d(s,{WD:()=>h,dG:()=>m,w7:()=>u,cm:()=>x});var a=t(6029);t(55729);var n=t(82641),r=t(51058),i=t(56795),l=t(75155);function o(e){let s,t,n,r,i=(0,l.c)(6),{style:o,width:c}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)("title",{children:"Incident.io"}),i[0]=s):s=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("g",{clipPath:"url(#clip0_1361_12546)",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.7336 139.642V163C20.7585 156.323 0 131.711 0 102.372C0 85.4557 7.15792 72.0354 18.1053 58.8703C27.1831 47.9534 49.5985 19.0426 56.6543 3.08954C58.3673 -0.783473 62.7348 -0.633805 64.6182 1.44721C70.6432 8.10421 78.0694 22.6432 80.4983 39.135C80.9932 42.4953 81.1969 45.2388 81.3587 47.4184C81.706 52.0954 81.8604 54.1748 84.2854 54.1748C88.0955 54.1748 90.588 48.3977 91.1358 42.4345C91.4869 38.6136 95.2774 37.3346 97.8914 38.6136C110.463 44.7644 123.292 74.0426 126.393 88.4102C127.366 92.9158 128 97.5719 128 102.372C128 131.646 107.335 156.214 79.4537 162.955V139.642H48.7336ZM64.0002 130.333C73.8316 130.333 81.8016 122.789 81.8016 113.483C81.8016 98.6407 70.8577 88.0345 65.4048 84.8105C65.0364 84.5928 64.8523 84.4839 64.3512 84.4974C63.9843 84.5073 63.4429 84.7369 63.181 84.9935C62.8232 85.3441 62.7283 85.743 62.5387 86.5409C61.5721 90.6065 58.5292 93.5054 55.327 96.556C50.9141 100.76 46.1988 105.252 46.1988 113.483C46.1988 122.789 54.1688 130.333 64.0002 130.333Z",fill:"currentColor"})}),i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_1361_12546",children:(0,a.jsx)("rect",{width:"128",height:"163",fill:"white"})})}),i[2]=n):n=i[2],i[3]!==o||i[4]!==c?(r=(0,a.jsxs)("svg",{width:c,height:c,viewBox:"0 0 128 163",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid",style:o,children:[s,t,n]}),i[3]=o,i[4]=c,i[5]=r):r=i[5],r}let c={[n.x.Slack]:{name:"Slack",icon:(0,a.jsx)(r.A,{size:16}),order:1},[n.x.IncidentIO]:{name:"incident.io",icon:(0,a.jsx)(o,{width:16}),order:4},[n.x.Generic]:{name:"Generic",icon:(0,a.jsx)(i.A,{size:16}),order:5}},d={[n.x.Generic]:(0,a.jsx)(i.A,{size:16}),[n.x.Slack]:(0,a.jsx)(r.A,{size:16}),[n.x.IncidentIO]:(0,a.jsx)(o,{width:16})},m=e=>{if(e)return c[e]},h=e=>e&&d[e]||d[n.x.Generic],u=e=>{let s=m(e);return s?.name||e||"Unknown"},x=e=>Object.entries(e.reduce((e,s)=>{let t=s.service;return e[t]||(e[t]=[]),e[t].push(s),e},{})).sort(([e],[s])=>(c[e]?.order||999)-(c[s]?.order||999))},18205:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var a=(0,t(41495).A)("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]])},21587:(e,s,t)=>{"use strict";t.d(s,{z:()=>l});var a=t(6029),n=t(75155),r=t(58525),i=t.n(r);let l=e=>{let s,t=(0,n.c)(2),{children:r}=e;return t[0]!==r?(s=(0,a.jsxs)("div",{className:i().header,children:[" ",r]}),t[0]=r,t[1]=s):s=t[1],s}},28797:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var a=(0,t(41495).A)("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]])},32963:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var a=(0,t(41495).A)("filled","info-circle-filled","IconInfoCircleFilled",[["path",{d:"M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1 -19.995 .324l-.005 -.324l.004 -.28c.148 -5.393 4.566 -9.72 9.996 -9.72zm0 9h-1l-.117 .007a1 1 0 0 0 0 1.986l.117 .007v3l.007 .117a1 1 0 0 0 .876 .876l.117 .007h1l.117 -.007a1 1 0 0 0 .876 -.876l.007 -.117l-.007 -.117a1 1 0 0 0 -.764 -.857l-.112 -.02l-.117 -.006v-3l-.007 -.117a1 1 0 0 0 -.876 -.876l-.117 -.007zm.01 -3l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007z",key:"svg-0"}]])},39090:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var a=(0,t(41495).A)("outline","lock","IconLock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]])},51058:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var a=(0,t(41495).A)("outline","brand-slack","IconBrandSlack",[["path",{d:"M12 12v-6a2 2 0 0 1 4 0v6m0 -2a2 2 0 1 1 2 2h-6",key:"svg-0"}],["path",{d:"M12 12h6a2 2 0 0 1 0 4h-6m2 0a2 2 0 1 1 -2 2v-6",key:"svg-1"}],["path",{d:"M12 12v6a2 2 0 0 1 -4 0v-6m0 2a2 2 0 1 1 -2 -2h6",key:"svg-2"}],["path",{d:"M12 12h-6a2 2 0 0 1 0 -4h6m-2 0a2 2 0 1 1 2 -2v6",key:"svg-3"}]])},57478:(e,s,t)=>{"use strict";t.d(s,{J:()=>x,W:()=>p});var a=t(6029),n=t(75155),r=t(55729),i=t(8737),l=t(48259),o=t(17283),c=t(9211),d=t(98142),m=t(81973),h=t(89011),u=t.n(h);let x=({sourceSchemaPreview:e})=>e?{rightSection:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.N,{onClick:e=>{e.stopPropagation(),e.preventDefault()},className:u().sourceSchemaPreviewButton,children:e}),(0,a.jsx)(l.l,{})]}),rightSectionWidth:70}:{rightSection:(0,a.jsx)(l.l,{})};function g(e,s){return e.label.localeCompare(s.label)}function j(e){return{value:e.id,label:e.name}}let p=(0,r.memo)(function(e){let s,t,r,i,l,h,u,p,y,v,f,b=(0,n.c)(25);b[0]!==e?({size:l,onCreate:r,allowedSourceKinds:s,comboboxProps:t,sourceSchemaPreview:h,...i}=e,b[0]=e,b[1]=s,b[2]=t,b[3]=r,b[4]=i,b[5]=l,b[6]=h):(s=b[1],t=b[2],r=b[3],i=b[4],l=b[5],h=b[6]);let{data:w}=(0,m.oE)(),S=!!d.m6;if(b[7]!==s||b[8]!==w||b[9]!==r){let e;b[11]!==r?(e=r&&!S?[{value:"_create_new_value",label:"Create New Source"}]:[],b[11]=r,b[12]=e):e=b[12],u=[...(w?.filter(e=>!s||s.includes(e.kind)).map(j)??[]).sort(g),...e],b[7]=s,b[8]=w,b[9]=r,b[10]=u}else u=b[10];let k=u;b[13]!==h?(p=x({sourceSchemaPreview:h}),b[13]=h,b[14]=p):p=b[14];let O=p;return b[15]!==t?(y={withinPortal:!1,...t},b[15]=t,b[16]=y):y=b[16],b[17]===Symbol.for("react.memo_cache_sentinel")?(v=(0,a.jsx)(o.A,{size:16}),b[17]=v):v=b[17],b[18]!==r||b[19]!==i||b[20]!==O||b[21]!==l||b[22]!==y||b[23]!==k?(f=(0,a.jsx)(c.A,{...i,data:k,comboboxProps:y,searchable:!0,placeholder:"Data Source",leftSection:v,maxDropdownHeight:280,size:l,onCreate:r,...O}),b[18]=r,b[19]=i,b[20]=O,b[21]=l,b[22]=y,b[23]=k,b[24]=f):f=b[24],f})},58525:e=>{e.exports={header:"PageHeader_header__Rc2pT"}},58541:(e,s,t)=>{"use strict";t.d(s,{g:()=>_});var a=t(6029),n=t(55729),r=t(11335),i=t(1909),l=t(59589),o=t(29135),c=t(82641),d=t(92495),m=t(34834),h=t(43517),u=t(18341),x=t(3635),g=t(59029),j=t(39603),p=t(25062),y=t(60665),v=t(32963),f=t(95352),b=t(6876),w=t(36600),S=t(92917);let k=["{{title}}","{{body}}","{{link}}","{{state}}","{{startTime}}","{{endTime}}","{{eventId}}"],O=k.join(" | "),C=()=>e=>""===e.state.doc.toString().trim()?[]:(0,l.cp)()(e);function _({webhook:e,onClose:s,onSuccess:t}){let _=(0,w.Kh)(),P=b.Ay.useSaveWebhook(),A=b.Ay.useUpdateWebhook(),X=b.Ay.useTestWebhook(),$=null!=e,z=(0,i.mN)({defaultValues:{service:e?.service||c.x.Slack,name:e?.name||"",url:e?.url||"",description:e?.description||"",body:e?.body||"",headers:e?.headers?JSON.stringify(e.headers,null,2):""}});(0,n.useEffect)(()=>{e&&z.reset({service:e.service,name:e.name,url:e.url,description:e.description,body:e.body,headers:e.headers?JSON.stringify(e.headers,null,2):""},{})},[e,z]);let T=async e=>{let s,{service:t,url:a,body:n,headers:i}=e;if(i&&i.trim())try{s=JSON.parse(i)}catch(s){let e=s instanceof Error?s.message:"Invalid JSON format";y.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let l=n;n||(t===c.x.Generic?l=`{"text": "${O}"}`:t===c.x.IncidentIO&&(l=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));try{await X.mutateAsync({service:t,url:a,body:l,headers:s}),y.$e.show({color:"green",message:"Test webhook sent successfully"})}catch(s){console.error(s);let e="Failed to send test webhook. Please check your webhook configuration.";if(s instanceof r.H)try{let t=await s.response.json();t.message&&(e=t.message)}catch(e){console.error("Failed to parse error response:",e)}y.$e.show({message:e,color:"red",autoClose:5e3})}},N=async a=>{let{service:n,name:i,url:l,description:o,body:d,headers:m}=a;try{let a;if(m&&m.trim())try{a=JSON.parse(m)}catch(s){let e=s instanceof Error?s.message:"Invalid JSON format";y.$e.show({message:`Invalid JSON in headers: ${e}`,color:"red",autoClose:5e3});return}let r=d;d||(n===c.x.Generic?r=`{"text": "${O}"}`:n===c.x.IncidentIO&&(r=`{
  "title": "{{title}}",
  "description": "{{body}}",
  "deduplication_key": "{{eventId}}",
  "status": "{{#if (eq state "${c.Or.ALERT}")}}firing{{else}}resolved{{/if}}",
  "source_url": "{{link}}"
}`));let h={service:n,name:i,url:l,description:o||"",body:r,headers:a},u=$?await A.mutateAsync({id:e._id,...h}):await P.mutateAsync(h);y.$e.show({color:"green",message:`Webhook ${$?"updated":"created"} successfully`}),t(u.data?._id),s()}catch(s){console.error(s);let e=`Something went wrong. Please contact ${_} team.`;if(s instanceof r.H)try{let t=await s.response.json();if(t.error?.issues&&Array.isArray(t.error.issues)){let s=t.error.issues.map(e=>{let s=e.path.join(".");return`${s}: ${e.message}`}).join(", ");e=`Validation error: ${s}`}else e=t.message?t.message:JSON.stringify(t)}catch(e){console.error("Failed to parse error response:",e)}y.$e.show({message:e,color:"red",autoClose:5e3})}},E=(0,i.FH)({control:z.control,name:"service"});return(0,a.jsx)("form",{onSubmit:z.handleSubmit(N),children:(0,a.jsxs)(m.B,{mt:"sm",children:[(0,a.jsx)(h.E,{children:$?"Edit Webhook":"Create Webhook"}),(0,a.jsx)(u.s.Group,{"data-testid":"service-type-radio-group",label:"Service Type",required:!0,value:E,onChange:e=>z.setValue("service",e),children:(0,a.jsxs)(x.Y,{mt:"xs",children:[(0,a.jsx)(u.s,{value:c.x.Slack,label:"Slack"}),(0,a.jsx)(u.s,{value:c.x.IncidentIO,label:"incident.io"}),(0,a.jsx)(u.s,{value:c.x.Generic,label:"Generic"})]})}),(0,a.jsx)(g.k,{label:"Webhook Name","data-testid":"webhook-name-input",placeholder:"Post to #dev-alerts",required:!0,error:z.formState.errors.name?.message,...z.register("name",{required:!0})}),(0,a.jsx)(g.k,{label:"Webhook URL","data-testid":"webhook-url-input",placeholder:E===c.x.Slack?"https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX":E===c.x.IncidentIO?"https://api.incident.io/v2/alert_events/http/ZZZZZZZZ?token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX":"https://example.com/webhook",type:"url",required:!0,error:z.formState.errors.url?.message,...z.register("url",{required:!0,validate:(e,s)=>s.service===c.x.Slack?(0,d.AB)(e)||"URL must be valid and have a slack.com domain":(0,S.AY)(e)||"URL must be valid"})}),(0,a.jsx)(g.k,{label:"Webhook Description (optional)",placeholder:"To be used for dev alerts",error:z.formState.errors.description?.message,...z.register("description")}),E===c.x.Generic&&[(0,a.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Headers (optional)"},"1"),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(i.xI,{name:"headers",control:z.control,render:({field:e})=>(0,a.jsx)(f.Ay,{height:"100px",extensions:[(0,l.Pq)(),(0,o.bu)(C()),(0,f.qf)(`{
	"Authorization": "Bearer token",
	"X-Custom-Header": "value"
}`)],theme:"dark",value:e.value,onChange:s=>e.onChange(s)})})},"2"),(0,a.jsx)("label",{className:".mantine-TextInput-label",children:"Webhook Body (optional)"},"3"),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(i.xI,{name:"body",control:z.control,render:({field:e})=>(0,a.jsx)(f.Ay,{height:"100px",extensions:[(0,l.Pq)(),(0,o.bu)(C()),(0,f.qf)(`{
	"text": "${O}"
}`)],theme:"dark",value:e.value,onChange:s=>e.onChange(s)})})},"4"),(0,a.jsxs)(j.F,{icon:(0,a.jsx)(v.A,{size:16}),className:"mb-4",color:"gray",children:[(0,a.jsx)("span",{children:"Currently the body supports the following message template variables:"}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:k.map((e,s)=>(0,a.jsxs)("span",{children:[(0,a.jsx)("code",{children:e}),s<k.length-1&&", "]},s))})]},"5")],(0,a.jsxs)(x.Y,{justify:"space-between",children:[(0,a.jsxs)(x.Y,{children:[(0,a.jsx)(p.$,{variant:"primary",type:"submit","data-testid":"add-webhook-button",loading:P.isPending||A.isPending,children:$?"Update Webhook":"Add Webhook"}),(0,a.jsx)(p.$,{variant:"secondary",onClick:z.handleSubmit(T),loading:X.isPending,type:"button",children:"Test Webhook"})]}),(0,a.jsx)(p.$,{variant:"secondary",onClick:s,type:"reset",children:"Cancel"})]})]})})}},59589:(e,s,t)=>{"use strict";t.d(s,{Pq:()=>d,cp:()=>o});var a=t(81422),n=t(55584);let r=(0,n.pn)({String:n._A.string,Number:n._A.number,"True False":n._A.bool,PropertyName:n._A.propertyName,Null:n._A.null,",":n._A.separator,"[ ]":n._A.squareBracket,"{ }":n._A.brace}),i=a.U1.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"âš  JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[r],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});var l=t(26374);let o=()=>e=>{try{JSON.parse(e.state.doc.toString())}catch(r){var s,t;let a;if(!(r instanceof SyntaxError))throw r;let n=(s=r,t=e.state.doc,(a=s.message.match(/at position (\d+)/))?Math.min(+a[1],t.length):(a=s.message.match(/at line (\d+) column (\d+)/))?Math.min(t.line(+a[1]).from+ +a[2]-1,t.length):0);return[{from:n,message:r.message,severity:"error",to:n}]}return[]},c=l.bj.define({name:"json",parser:i.configure({props:[l.Oh.add({Object:(0,l.mz)({except:/^\s*\}/}),Array:(0,l.mz)({except:/^\s*\]/})}),l.b_.add({"Object Array":l.yd})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function d(){return new l.Yy(c)}},69246:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eb});var a=t(6029),n=t(75155),r=t(55729),i=t(95669),l=t.n(i),o=t(65234),c=t.n(o),d=t(1909),m=t(3145),h=t(43517),u=t(92789),x=t(60481),g=t(78253),j=t(34834),p=t(25062),y=t(62801),v=t(3635),f=t(59029),b=t(52502),w=t(63085),S=t(27166),k=t(53061),O=t(94720),C=t(83171),_=t(60665),P=t(6892),A=t(74011),X=t(97702),$=t(90515),z=t(74805),T=t(43567),N=t(9211),E=t(54970),I=t(98142),Q=t(21587),R=t(11335),M=t(11088),W=t(43085),Y=(0,t(41495).A)("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]),B=t(39090),Z=t(6876),V=t(36600);function q(){let e,s,t,i,l,o,d,m,g,f,b,w,k,O,C,P,A,X,$,z,T,N,E=(0,n.c)(61),I=(0,V.Kh)();Z.Ay.useTeam();let{data:Q,isLoading:q,refetch:G}=Z.Ay.useTeamMembers(),{data:H,isLoading:F,refetch:J}=Z.Ay.useTeamInvitations(),ee=e=>{let{email:s}=e;ec(s),er(!1)};E[0]===Symbol.for("react.memo_cache_sentinel")?(e={mode:null,id:null,email:null},E[0]=e):e=E[0];let[es,et]=(0,r.useState)(e),[ea,en]=(0,r.useState)(!1),er=en,ei=Z.Ay.useSaveTeamInvitation(),el=Z.Ay.useDeleteTeamMember(),eo=Z.Ay.useDeleteTeamInvitation(),ec=e=>{e&&ei.mutate({email:e},{onSuccess:()=>{_.$e.show({color:"green",message:'Click "Copy URL" and share the URL with your team member'}),J()},onError:e=>{e instanceof R.H?e.response.json().then(K).catch(()=>{_.$e.show({color:"red",message:`Something went wrong. Please contact ${I} team.`,autoClose:5e3})}):_.$e.show({color:"red",message:`Something went wrong. Please contact ${I} team.`,autoClose:5e3})}})};if(E[1]!==I||E[2]!==eo||E[3]!==el||E[4]!==es.mode||E[5]!==J||E[6]!==G||E[7]!==et){s=s=>{"team"===es.mode?t(s):"teamInvite"===es.mode&&e(s),et({mode:null,id:null,email:null})};let e=e=>{e&&eo.mutate({id:encodeURIComponent(e)},{onSuccess:()=>{_.$e.show({color:"green",message:"Deleted team invite"}),J()},onError:e=>{e instanceof R.H?e.response.json().then(U).catch(()=>{_.$e.show({color:"red",message:`Something went wrong. Please contact ${I} team.`,autoClose:5e3})}):_.$e.show({color:"red",message:`Something went wrong. Please contact ${I} team.`,autoClose:5e3})}})},t=e=>{e&&el.mutate({userId:encodeURIComponent(e)},{onSuccess:()=>{_.$e.show({color:"green",message:"Deleted team member"}),G()},onError:e=>{e instanceof R.H?e.response.json().then(D).catch(()=>{_.$e.show({color:"red",message:`Something went wrong. Please contact ${I} team.`,autoClose:5e3})}):_.$e.show({color:"red",message:`Something went wrong. Please contact ${I} team.`,autoClose:5e3})}})};E[1]=I,E[2]=eo,E[3]=el,E[4]=es.mode,E[5]=J,E[6]=G,E[7]=et,E[8]=s}else s=E[8];E[9]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(h.E,{size:"md",children:"Team"}),i=(0,a.jsx)(u.c,{my:"md"}),E[9]=t,E[10]=i):(t=E[9],i=E[10]),E[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)("div",{className:"fs-7",children:"Team Members"}),E[11]=l):l=E[11],E[12]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(Y,{size:16}),E[12]=o):o=E[12],E[13]!==er?(d=(0,a.jsx)(y.Z.Section,{withBorder:!0,py:"sm",px:"lg",children:(0,a.jsxs)(v.Y,{align:"center",justify:"space-between",children:[l,(0,a.jsx)(p.$,{variant:"primary",leftSection:o,onClick:()=>er(!0),children:"Invite Team Member"})]})}),E[13]=er,E[14]=d):d=E[14],E[15]!==q||E[16]!==Q?.data||E[17]!==et?(m=!q&&Array.isArray(Q?.data)&&Q?.data.map(e=>(0,a.jsxs)(M.X.Tr,{children:[(0,a.jsxs)(M.X.Td,{children:[(0,a.jsxs)("div",{children:[e.isCurrentUser&&(0,a.jsx)(W.E,{variant:"light",mr:"xs",tt:"none",children:"You"}),(0,a.jsx)("span",{className:"text-white fw-bold fs-7",children:e.name})]}),(0,a.jsxs)(v.Y,{mt:4,fz:"xs",children:[(0,a.jsx)("div",{children:e.email}),e.hasPasswordAuth&&(0,a.jsxs)("div",{children:[(0,a.jsx)(B.A,{size:14})," Password Auth"]})]})]}),(0,a.jsx)(M.X.Td,{children:e.groupName&&(0,a.jsx)(W.E,{variant:"light",color:"green",fw:"normal",tt:"none",children:e.groupName})}),(0,a.jsx)(M.X.Td,{style:{textAlign:"right"},children:!e.isCurrentUser&&(0,a.jsx)(v.Y,{justify:"flex-end",gap:"8",children:(0,a.jsx)(p.$,{size:"compact-sm",variant:"danger",onClick:()=>et({mode:"team",id:e._id,email:e.email}),children:"Remove"})})})]},e.email)),E[15]=q,E[16]=Q?.data,E[17]=et,E[18]=m):m=E[18],E[19]!==H||E[20]!==F||E[21]!==et?(g=!F&&Array.isArray(H.data)&&H.data.map(e=>(0,a.jsxs)(M.X.Tr,{className:"mt-2",children:[(0,a.jsx)(M.X.Td,{children:(0,a.jsx)("span",{className:"text-white fw-bold fs-7",children:e.email})}),(0,a.jsxs)(M.X.Td,{children:[(0,a.jsx)(W.E,{variant:"dot",color:"gray",fw:"normal",tt:"none",children:"Pending Invite"}),(0,a.jsx)(c(),{text:e.url,children:(0,a.jsx)(p.$,{size:"compact-xs",variant:"secondary",ml:"xs",children:"\uD83D\uDCCB Copy URL"})})]}),(0,a.jsx)(M.X.Td,{style:{textAlign:"right"},children:(0,a.jsx)(v.Y,{justify:"flex-end",gap:"8",children:(0,a.jsx)(p.$,{size:"compact-sm",variant:"danger",onClick:()=>et({mode:"teamInvite",id:e._id,email:e.email}),children:"Delete"})})})]},e.email)),E[19]=H,E[20]=F,E[21]=et,E[22]=g):g=E[22],E[23]!==m||E[24]!==g?(f=(0,a.jsx)(y.Z.Section,{children:(0,a.jsx)(M.X,{horizontalSpacing:"lg",verticalSpacing:"xs",children:(0,a.jsxs)(M.X.Tbody,{children:[m,g]})})}),E[23]=m,E[24]=g,E[25]=f):f=E[25],E[26]!==f||E[27]!==d?(b=(0,a.jsxs)(y.Z,{children:[d,f]}),E[26]=f,E[27]=d,E[28]=b):b=E[28],E[29]!==er?(w=()=>er(!1),E[29]=er,E[30]=w):w=E[30],E[31]!==ee||E[32]!==ei.isPending?(k=(0,a.jsx)(L,{onSubmit:ee,isSubmitting:ei.isPending}),E[31]=ee,E[32]=ei.isPending,E[33]=k):k=E[33],E[34]!==w||E[35]!==k||E[36]!==ea?(O=(0,a.jsx)(S.a,{centered:!0,onClose:w,opened:ea,title:"Invite Team Member",children:k}),E[34]=w,E[35]=k,E[36]=ea,E[37]=O):O=E[37],E[38]!==et?(C=()=>et({mode:null,id:null,email:null}),E[38]=et,E[39]=C):C=E[39];let ed=null!=es.id;return E[40]!==es.email?(P=(0,a.jsxs)(h.E,{children:["Deleting this team member (",es.email,") will revoke their access to the team's resources and services. This action is not reversible."]}),E[40]=es.email,E[41]=P):P=E[41],E[42]!==et?(A=(0,a.jsx)(p.$,{variant:"secondary",onClick:()=>et({mode:null,id:null,email:null}),children:"Cancel"}),E[42]=et,E[43]=A):A=E[43],E[44]!==es.id||E[45]!==s?(X=(0,a.jsx)(p.$,{variant:"danger",onClick:()=>es.id&&s(es.id),children:"Confirm"}),E[44]=es.id,E[45]=s,E[46]=X):X=E[46],E[47]!==A||E[48]!==X?($=(0,a.jsxs)(v.Y,{justify:"flex-end",gap:"xs",children:[A,X]}),E[47]=A,E[48]=X,E[49]=$):$=E[49],E[50]!==P||E[51]!==$?(z=(0,a.jsxs)(j.B,{children:[P,$]}),E[50]=P,E[51]=$,E[52]=z):z=E[52],E[53]!==C||E[54]!==ed||E[55]!==z?(T=(0,a.jsx)(S.a,{centered:!0,onClose:C,opened:ed,size:"lg",title:"Delete Team Member",children:z}),E[53]=C,E[54]=ed,E[55]=z,E[56]=T):T=E[56],E[57]!==b||E[58]!==O||E[59]!==T?(N=(0,a.jsxs)(x.a,{id:"team_members",children:[t,i,b,O,T]}),E[57]=b,E[58]=O,E[59]=T,E[60]=N):N=E[60],N}function D(e){_.$e.show({color:"red",message:e.message,autoClose:5e3})}function U(e){_.$e.show({color:"red",message:e.message,autoClose:5e3})}function K(e){_.$e.show({color:"red",message:e.message,autoClose:5e3})}function L(e){let s,t,i,l,o,c,d,m=(0,n.c)(15),{isSubmitting:h,onSubmit:u}=e,[x,g]=(0,r.useState)("");m[0]!==x||m[1]!==u?(s=e=>{u({email:x}),e.preventDefault()},m[0]=x,m[1]=u,m[2]=s):s=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(t=e=>g(e.target.value),m[3]=t):t=m[3],m[4]!==x?(i=(0,a.jsx)(f.k,{label:"Email",name:"email",type:"email",value:x,onChange:t,required:!0,placeholder:"you@company.com",withAsterisk:!1}),m[4]=x,m[5]=i):i=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)("div",{className:"fs-8",children:"The invite link will automatically expire after 30 days."}),m[6]=l):l=m[6];let y=!x||h;return m[7]!==y?(o=(0,a.jsx)(p.$,{variant:"primary",type:"submit",disabled:y,children:"Send Invite"}),m[7]=y,m[8]=o):o=m[8],m[9]!==i||m[10]!==o?(c=(0,a.jsxs)(j.B,{children:[i,l,o]}),m[9]=i,m[10]=o,m[11]=c):c=m[11],m[12]!==s||m[13]!==c?(d=(0,a.jsx)("form",{onSubmit:s,children:c}),m[12]=s,m[13]=c,m[14]=d):d=m[14],d}var G=t(82641),H=t(92556),F=t(78341),J=t(46197),ee=t(17513),es=t(58541);function et(e){let s,t,r=(0,n.c)(10),{webhookId:i,webhookName:l,onSuccess:o}=e,c=(0,V.Kh)(),d=(0,J.S)(),m=Z.Ay.useDeleteWebhook();r[0]!==c||r[1]!==d||r[2]!==m||r[3]!==o||r[4]!==i||r[5]!==l?(s=async()=>{if(await d(`Are you sure you want to delete ${l} webhook?`,"Delete",{variant:"danger"}))try{await m.mutateAsync({id:i}),_.$e.show({color:"green",message:"Webhook deleted successfully"}),o()}catch(s){console.error(s);let e=(s instanceof R.H?(await s.response.json())?.message:null)||`Something went wrong. Please contact ${c} team.`;_.$e.show({message:e,color:"red",autoClose:5e3})}},r[0]=c,r[1]=d,r[2]=m,r[3]=o,r[4]=i,r[5]=l,r[6]=s):s=r[6];let h=s;return r[7]!==m.isPending||r[8]!==h?(t=(0,a.jsx)(p.$,{size:"compact-xs",variant:"danger",onClick:h,loading:m.isPending,children:"Delete"}),r[7]=m.isPending,r[8]=h,r[9]=t):t=r[9],t}function ea(){let e,s,t,i,l,o,c,d,m=(0,n.c)(20);m[0]===Symbol.for("react.memo_cache_sentinel")?(e=[G.x.Slack,G.x.Generic,G.x.IncidentIO],m[0]=e):e=m[0];let{data:x,refetch:g}=Z.Ay.useWebhooks(e),[y,f]=(0,r.useState)(null);m[1]!==x?.data?(s=Array.isArray(x?.data)&&x?.data||[],m[1]=x?.data,m[2]=s):s=m[2];let b=s;m[3]!==b?(t=(0,ee.cm)(b),m[3]=b,m[4]=t):t=m[4];let w=t,[S,k]=(0,F.j)(),{open:O,close:C}=k;return m[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(h.E,{mb:"xs",children:"Webhooks"}),m[5]=i):i=m[5],m[6]!==y||m[7]!==w||m[8]!==g?(l=0===w.length?(0,a.jsx)(h.E,{size:"sm",c:"dimmed",ta:"center",py:"xl",children:"No webhooks configured yet"}):w.map(e=>{let[s,t]=e,n=(0,ee.dG)(s);return(0,a.jsxs)(j.B,{gap:"xs",children:[(0,a.jsxs)(v.Y,{gap:"xs",mt:"md",mb:"xs",children:[n?.icon,(0,a.jsx)(H.h,{order:6,c:"dimmed",children:(0,ee.w7)(s)})]}),(0,a.jsx)(j.B,{children:t.map(e=>(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)(v.Y,{justify:"space-between",align:"flex-start",children:[(0,a.jsxs)(j.B,{gap:0,children:[(0,a.jsxs)(h.E,{size:"sm",children:[e.name," (",e.service,")"]}),(0,a.jsx)(h.E,{size:"xs",opacity:.7,children:e.url}),e.description&&(0,a.jsx)(h.E,{size:"xxs",opacity:.7,children:e.description})]}),(0,a.jsx)(v.Y,{gap:"xs",children:y!==e._id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.$,{variant:"subtle",color:"gray.4",onClick:()=>f(e._id),size:"compact-xs",leftSection:(0,a.jsx)(P.A,{size:14}),children:"Edit"}),(0,a.jsx)(et,{webhookId:e._id,webhookName:e.name,onSuccess:g})]}):(0,a.jsxs)(p.$,{variant:"subtle",color:"gray.4",onClick:()=>f(null),size:"compact-xs",children:[(0,a.jsx)(A.A,{size:16})," Cancel"]})})]}),y===e._id&&(0,a.jsx)(es.g,{webhook:e,onClose:()=>f(null),onSuccess:()=>{f(null),g()}}),(0,a.jsx)(u.c,{})]},e._id))})]},s)}),m[6]=y,m[7]=w,m[8]=g,m[9]=l):l=m[9],m[10]!==l?(o=(0,a.jsx)(j.B,{children:l}),m[10]=l,m[11]=o):o=m[11],m[12]!==C||m[13]!==S||m[14]!==O||m[15]!==g?(c=S?(0,a.jsx)(es.g,{onClose:C,onSuccess:()=>{g(),C()}}):(0,a.jsx)(p.$,{variant:"secondary",onClick:O,children:"Add Webhook"}),m[12]=C,m[13]=S,m[14]=O,m[15]=g,m[16]=c):c=m[16],m[17]!==o||m[18]!==c?(d=(0,a.jsxs)(a.Fragment,{children:[i,o,c]}),m[17]=o,m[18]=c,m[19]=d):d=m[19],d}var en=t(93108),er=t(61410),ei=t(56514);function el(){let e,s,t,i,l,o,c,d=(0,n.c)(16),{data:m}=(0,en.ZY)(),[v,f]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1);return d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.E,{size:"md",children:"Connections"}),s=(0,a.jsx)(u.c,{my:"md"}),d[0]=e,d[1]=s):(e=d[0],s=d[1]),d[2]!==m||d[3]!==v?(t=m?.map(e=>(0,a.jsxs)(x.a,{children:[(0,a.jsxs)(g.s,{justify:"space-between",align:"flex-start",children:[(0,a.jsxs)(j.B,{gap:"xs",children:[(0,a.jsx)(h.E,{fw:500,size:"lg",children:e.name}),(0,a.jsxs)(h.E,{size:"sm",c:"dimmed",children:[(0,a.jsx)("b",{children:"Host:"})," ",e.host]}),(0,a.jsxs)(h.E,{size:"sm",c:"dimmed",children:[(0,a.jsx)("b",{children:"Username:"})," ",e.username]}),(0,a.jsxs)(h.E,{size:"sm",c:"dimmed",children:[(0,a.jsx)("b",{children:"Password:"})," [Configured]"]})]}),v!==e.id&&(0,a.jsxs)(p.$,{variant:"subtle",onClick:()=>f(e.id),size:"sm",children:[(0,a.jsx)(P.A,{size:14,className:"me-2"})," Edit"]}),v===e.id&&(0,a.jsxs)(p.$,{variant:"subtle",onClick:()=>f(null),size:"sm",children:[(0,a.jsx)(A.A,{size:14,className:"me-2"})," Cancel"]})]}),v===e.id&&(0,a.jsx)(T.B,{connection:e,isNew:!1,onSave:()=>{f(null)},showCancelButton:!1,showDeleteButton:!0}),(0,a.jsx)(u.c,{my:"md"})]},e.id)),d[2]=m,d[3]=v,d[4]=t):t=d[4],d[5]!==t?(i=(0,a.jsx)(j.B,{mb:"md",children:t}),d[5]=t,d[6]=i):i=d[6],d[7]!==m?.length||d[8]!==b?(l=!b&&(!I.VO||(m?.length??0)<1)&&(0,a.jsx)(p.$,{variant:"primary",onClick:()=>w(!0),children:"Add Connection"}),d[7]=m?.length,d[8]=b,d[9]=l):l=d[9],d[10]!==b?(o=b&&(0,a.jsx)(j.B,{gap:"md",children:(0,a.jsx)(T.B,{connection:{id:"new",name:"My New Connection",host:"http://localhost:8123",username:"default",password:""},isNew:!0,onSave:()=>w(!1),onClose:()=>w(!1),showCancelButton:!0})}),d[10]=b,d[11]=o):o=d[11],d[12]!==i||d[13]!==l||d[14]!==o?(c=(0,a.jsxs)(x.a,{id:"connections",children:[e,s,(0,a.jsxs)(y.Z,{children:[i,l,o]})]}),d[12]=i,d[13]=l,d[14]=o,d[15]=c):c=d[15],c}function eo(){let e,s=(0,n.c)(1);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(x.a,{id:"sources",children:[(0,a.jsx)(h.E,{size:"md",children:"Sources"}),(0,a.jsx)(u.c,{my:"md"}),(0,a.jsx)(E.v,{withBorder:!1,variant:"default",showEmptyState:!1})]}),s[0]=e):e=s[0],e}function ec(){let e,s,t,r=(0,n.c)(3);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.E,{size:"md",children:"Integrations"}),s=(0,a.jsx)(u.c,{my:"md"}),r[0]=e,r[1]=s):(e=r[0],s=r[1]),r[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsxs)(x.a,{id:"integrations",children:[e,s,(0,a.jsx)(y.Z,{children:(0,a.jsx)(j.B,{gap:"md",children:(0,a.jsx)(ea,{})})})]}),r[2]=t):t=r[2],t}function ed(){let e,s,t,i,l,o=(0,n.c)(13),{data:c,refetch:m}=Z.Ay.useTeam(),g=Z.Ay.useSetTeamName(),[j,b]=(0,r.useState)(!1),w=c?.name;o[0]!==w?(e={defaultValues:{name:w}},o[0]=w,o[1]=e):e=o[1];let S=(0,d.mN)(e);o[2]!==m||o[3]!==g?(s=async e=>{g.mutate({name:e.name},{onError:em,onSuccess:()=>{_.$e.show({color:"green",message:"Updated team name"}),m(),b(!1)}})},o[2]=m,o[3]=g,o[4]=s):s=o[4];let k=s;return o[5]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(h.E,{size:"md",children:"Team Name"}),i=(0,a.jsx)(u.c,{my:"md"}),o[5]=t,o[6]=i):(t=o[5],i=o[6]),o[7]!==S||o[8]!==j||o[9]!==k||o[10]!==g||o[11]!==c?.name?(l=(0,a.jsxs)(x.a,{id:"team_name",children:[t,i,(0,a.jsx)(y.Z,{children:j?(0,a.jsx)("form",{onSubmit:S.handleSubmit(k),children:(0,a.jsxs)(v.Y,{gap:"xs",children:[(0,a.jsx)(f.k,{size:"xs",placeholder:"My Team",required:!0,error:S.formState.errors.name?.message,...S.register("name",{required:!0}),miw:300,min:1,max:100,autoFocus:!0,onKeyDown:e=>{"Escape"===e.key&&b(!1)}}),(0,a.jsx)(p.$,{type:"submit",size:"xs",variant:"primary",loading:g.isPending,children:"Save"}),(0,a.jsx)(p.$,{type:"button",size:"xs",variant:"secondary",disabled:g.isPending,onClick:()=>b(!1),children:"Cancel"})]})}):(0,a.jsxs)(v.Y,{gap:"lg",children:[(0,a.jsx)("div",{className:"fs-7",children:c?.name}),(0,a.jsx)(p.$,{size:"xs",variant:"secondary",leftSection:(0,a.jsx)(P.A,{size:16}),onClick:()=>{b(!0)},children:"Change"})]})})]}),o[7]=S,o[8]=j,o[9]=k,o[10]=g,o[11]=c?.name,o[12]=l):l=o[12],l}function em(e){_.$e.show({color:"red",message:"Failed to update team name"})}function eh({settingKey:e,label:s,tooltip:t,type:n,defaultValue:i,placeholder:l,min:o,max:c,displayValue:m}){let{data:u,refetch:x}=Z.Ay.useMe(),g=Z.Ay.useUpdateClickhouseSettings(),[y,S]=(0,r.useState)(!1),k=u?.team[e],O=(0,d.mN)({defaultValues:{value:"boolean"===n&&null!=m&&null!=k?m(k):k??i??""}}),C=(0,r.useCallback)(async t=>{try{let a="boolean"===n?t.value===m?.(!0):Number(t.value);g.mutate({[e]:a},{onError:e=>{_.$e.show({color:"red",message:`Failed to update ${s}`})},onSuccess:()=>{_.$e.show({color:"green",message:`Updated ${s}`}),x(),S(!1)}})}catch(e){_.$e.show({color:"red",message:e.message})}},[x,g,e,s,n,m]);return(0,a.jsxs)(j.B,{gap:"xs",mb:"md",children:[(0,a.jsxs)(v.Y,{gap:"xs",children:[(0,a.jsx)(b.l,{size:"md",children:s}),t&&(0,a.jsx)(w.m,{label:t,children:(0,a.jsx)(h.E,{size:"sm",style:{cursor:"help"},children:(0,a.jsx)(X.A,{size:14})})})]}),y&&1?(0,a.jsx)("form",{onSubmit:O.handleSubmit(C),children:(0,a.jsxs)(v.Y,{children:["boolean"===n&&m?(0,a.jsx)(N.A,{control:O.control,name:"value",data:[m(!0),m(!1)],size:"xs",placeholder:"Please select",withAsterisk:!0,miw:300,readOnly:!y,autoFocus:!0,onKeyDown:e=>{"Escape"===e.key&&S(!1)}}):(0,a.jsx)(f.k,{size:"xs",type:"number",placeholder:l||k?.toString()||"Enter value",required:!0,readOnly:!y,error:O.formState.errors.value?.message,...O.register("value",{required:!0}),miw:300,min:o,max:c,autoFocus:!0,onKeyDown:e=>{"Escape"===e.key&&S(!1)}}),(0,a.jsx)(p.$,{type:"submit",size:"xs",variant:"primary",loading:g.isPending,children:"Save"}),(0,a.jsx)(p.$,{type:"button",size:"xs",variant:"secondary",disabled:g.isPending,onClick:()=>{S(!1)},children:"Cancel"})]})}):(0,a.jsxs)(v.Y,{children:[(0,a.jsx)(h.E,{className:"text-white",children:m?m(k,i):k?.toString()||"Not set"}),(0,a.jsx)(p.$,{size:"xs",variant:"secondary",leftSection:(0,a.jsx)(P.A,{size:16}),onClick:()=>S(!0),children:"Change"})]})]})}function eu(){let e,s,t,r,i,l,o,c,d=(0,n.c)(9),g=(0,V.Kh)(),p=ej;d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.E,{size:"md",children:"ClickHouse Client Settings"}),s=(0,a.jsx)(u.c,{my:"md"}),d[0]=e,d[1]=s):(e=d[0],s=d[1]),d[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(eh,{settingKey:"searchRowLimit",label:"Search Row Limit",tooltip:"The number of rows per query for the Search page or search dashboard tiles",type:"number",defaultValue:er.Km,placeholder:`default = ${er.Km}, 0 = unlimited`,min:1,max:1e5,displayValue:p("rows")}),d[2]=t):t=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(eh,{settingKey:"queryTimeout",label:"Query Timeout (seconds)",tooltip:"Sets the max execution time of a query in seconds.",type:"number",defaultValue:er.rb,placeholder:`default = ${er.rb}, 0 = unlimited`,min:0,displayValue:p("seconds")}),d[3]=r):r=d[3],d[4]===Symbol.for("react.memo_cache_sentinel")?(i=m.qs.toLocaleString(),d[4]=i):i=d[4],d[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)(eh,{settingKey:"metadataMaxRowsToRead",label:"Max Rows to Read (METADATA ONLY)",tooltip:"The maximum number of rows that can be read from a table when running a query",type:"number",defaultValue:m.qs,placeholder:`default = ${i}, 0 = unlimited`,min:0,displayValue:p("rows")}),o=(0,a.jsx)(eh,{settingKey:"fieldMetadataDisabled",label:"Field Metadata Queries",tooltip:"Enable to fetch field metadata from ClickHouse",type:"boolean",displayValue:eg}),d[5]=l,d[6]=o):(l=d[5],o=d[6]);let v=`${g} sends windowed queries to ClickHouse in series. This setting parallelizes those queries when it makes sense to. This may cause increased peak load on ClickHouse`;return d[7]!==v?(c=(0,a.jsxs)(x.a,{id:"team_name",children:[e,s,(0,a.jsx)(y.Z,{children:(0,a.jsxs)(j.B,{children:[t,r,l,o,(0,a.jsx)(eh,{settingKey:"parallelizeWhenPossible",label:"Parallelize Queries When Possible",tooltip:v,type:"boolean",displayValue:ex})]})})]}),d[7]=v,d[8]=c):c=d[8],c}function ex(e){return e?"Enabled":"Disabled"}function eg(e){return e?"Disabled":"Enabled"}function ej(e){return(s,t)=>void 0===s||s===t?`${t.toLocaleString()} ${e} (System Default)`:0===s?"Unlimited":`${s.toLocaleString()} ${e}`}let ep=e=>{let s,t,i,l,c,d,m=(0,n.c)(16),{value:h,dataTestId:u}=e,[x,g]=(0,r.useState)(!1);m[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>g(!0),m[0]=s):s=m[0];let j=x?"light":"default";m[1]!==x?(t=x?(0,a.jsx)($.A,{size:14}):(0,a.jsx)(z.A,{size:14}),m[1]=x,m[2]=t):t=m[2];let y=x?"Copied!":"Copy";return m[3]!==t||m[4]!==y?(i=(0,a.jsxs)(v.Y,{wrap:"nowrap",gap:4,ms:"xs",children:[t,y]}),m[3]=t,m[4]=y,m[5]=i):i=m[5],m[6]!==u||m[7]!==h?(l=(0,a.jsx)("div",{"data-test-id":u,className:"text-wrap text-break",children:h}),m[6]=u,m[7]=h,m[8]=l):l=m[8],m[9]!==j||m[10]!==i||m[11]!==l?(c=(0,a.jsx)(p.$,{onClick:s,variant:j,color:"gray",rightSection:i,children:l}),m[9]=j,m[10]=i,m[11]=l,m[12]=c):c=m[12],m[13]!==c||m[14]!==h?(d=(0,a.jsx)(o.CopyToClipboard,{text:h,children:c}),m[13]=c,m[14]=h,m[15]=d):d=m[15],d};function ey(){let e,s,t,i,l,o,c,d,m,g,j,f,b,w,k,O,C=(0,n.c)(29),{data:P,refetch:A}=Z.Ay.useTeam(),{data:X,isLoading:$}=Z.Ay.useMe(),z=Z.Ay.useRotateTeamApiKey(),[T,N]=(0,r.useState)(!1);C[0]!==A||C[1]!==z?(e=()=>{z.mutate(void 0,{onSuccess:()=>{_.$e.show({color:"green",message:"Revoked old API key and generated new key."}),A()},onError:ev}),N(!1)},C[0]=A,C[1]=z,C[2]=e):e=C[2];let E=e;return C[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(h.E,{size:"md",children:"API Keys"}),t=(0,a.jsx)(u.c,{my:"md"}),C[3]=s,C[4]=t):(s=C[3],t=C[4]),C[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(h.E,{mb:"md",children:"Ingestion API Key"}),C[5]=i):i=C[5],C[6]!==P?(l=P?.apiKey&&(0,a.jsx)(ep,{value:P.apiKey,dataTestId:"api-key"}),C[6]=P,C[7]=l):l=C[7],C[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(p.$,{variant:"danger",onClick:()=>N(!0),children:"Rotate API Key"}),C[8]=o):o=C[8],C[9]!==l?(c=(0,a.jsxs)(v.Y,{gap:"xs",children:[l,o]}),C[9]=l,C[10]=c):c=C[10],C[11]===Symbol.for("react.memo_cache_sentinel")?(d=()=>N(!1),C[11]=d):d=C[11],C[12]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsx)(h.E,{size:"xl",children:(0,a.jsx)("b",{children:"Rotate API Key"})}),C[12]=m):m=C[12],C[13]===Symbol.for("react.memo_cache_sentinel")?(g=(0,a.jsxs)(h.E,{size:"md",children:["Rotating the API key will invalidate your existing API key and generate a new one for you. This action is ",(0,a.jsx)("b",{children:"not reversible"}),"."]}),C[13]=g):g=C[13],C[14]===Symbol.for("react.memo_cache_sentinel")?(j=(0,a.jsx)(p.$,{variant:"secondary",className:"mt-2 px-4 ms-2 float-end",size:"sm",onClick:()=>N(!1),children:"Cancel"}),C[14]=j):j=C[14],C[15]!==E?(f=(0,a.jsxs)(S.a.Body,{children:[g,(0,a.jsxs)(v.Y,{justify:"end",children:[j,(0,a.jsx)(p.$,{variant:"danger",className:"mt-2 px-4 float-end",size:"sm",onClick:E,children:"Confirm"})]})]}),C[15]=E,C[16]=f):f=C[16],C[17]!==T||C[18]!==f?(b=(0,a.jsx)(S.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,onClose:d,opened:T,size:"lg",title:m,children:f}),C[17]=T,C[18]=f,C[19]=b):b=C[19],C[20]!==b||C[21]!==c?(w=(0,a.jsxs)(y.Z,{mb:"md",children:[i,c,b]}),C[20]=b,C[21]=c,C[22]=w):w=C[22],C[23]!==$||C[24]!==X?(k=!$&&null!=X&&(0,a.jsx)(y.Z,{children:(0,a.jsxs)(y.Z.Section,{p:"md",children:[(0,a.jsx)(h.E,{mb:"md",children:"Personal API Access Key"}),(0,a.jsx)(ep,{value:X.accessKey,dataTestId:"api-key"})]})}),C[23]=$,C[24]=X,C[25]=k):k=C[25],C[26]!==w||C[27]!==k?(O=(0,a.jsxs)(x.a,{id:"api_keys",children:[s,t,w,k]}),C[26]=w,C[27]=k,C[28]=O):O=C[28],O}function ev(e){_.$e.show({color:"red",message:e.message,autoClose:5e3})}function ef(){let e,s,t,r,i,o,c=(0,n.c)(17),d=(0,V.Kh)(),{data:m,isLoading:h}=Z.Ay.useTeam(),u=m?.allowedAuthMethods!=null&&m?.allowedAuthMethods.length>0;c[0]!==d?(e=(0,a.jsx)(l(),{children:(0,a.jsxs)("title",{children:["My Team - ",d]})}),c[0]=d,c[1]=e):e=c[1];let x=m?.name||"My team";return c[2]!==x?(s=(0,a.jsx)(Q.z,{children:(0,a.jsx)("div",{children:x})}),c[2]=x,c[3]=s):s=c[3],c[4]!==h?(t=h&&(0,a.jsx)(k.o,{mt:"xl",children:(0,a.jsx)(O.a,{color:"dimmed"})}),c[4]=h,c[5]=t):t=c[5],c[6]!==u||c[7]!==h||c[8]!==m?(r=!h&&null!=m&&(0,a.jsxs)(j.B,{my:20,gap:"xl",children:[(0,a.jsx)(eo,{}),(0,a.jsx)(el,{}),(0,a.jsx)(ec,{}),(0,a.jsx)(ed,{}),(0,a.jsx)(eu,{}),(0,a.jsx)(ey,{}),u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{children:"Security Policies"}),null!=m.allowedAuthMethods&&m.allowedAuthMethods.length>0&&(0,a.jsxs)("div",{className:"mb-2 text-muted",children:["Team members can only authenticate via:"," ",(0,a.jsx)("span",{className:"text-capitalize fw-bold",children:m.allowedAuthMethods.join(", ")})]})]}),(0,a.jsx)(q,{})]}),c[6]=u,c[7]=h,c[8]=m,c[9]=r):r=c[9],c[10]!==t||c[11]!==r?(i=(0,a.jsx)("div",{children:(0,a.jsxs)(C.m,{children:[t,r]})}),c[10]=t,c[11]=r,c[12]=i):i=c[12],c[13]!==e||c[14]!==s||c[15]!==i?(o=(0,a.jsxs)("div",{className:"TeamPage",children:[e,s,i]}),c[13]=e,c[14]=s,c[15]=i,c[16]=o):o=c[16],o}ef.getLayout=ei.D;let eb=ef},83171:(e,s,t)=>{"use strict";t.d(s,{m:()=>u});var a=t(6029);t(55729);var n=t(76),r=t(5618),i=t(80616),l=t(37666),o=t(60481),c=t(43016),d={root:"m_7485cace"};let m={},h=(0,r.V)((e,{size:s,fluid:t})=>({root:{"--container-size":t?void 0:(0,n.YC)(s,"container-size")}})),u=(0,c.P9)((e,s)=>{let t=(0,i.Y)("Container",m,e),{classNames:n,className:r,style:c,styles:u,unstyled:x,vars:g,fluid:j,mod:p,...y}=t,v=(0,l.I)({name:"Container",classes:d,props:t,className:r,style:c,classNames:n,styles:u,unstyled:x,vars:g,varsResolver:h});return(0,a.jsx)(o.a,{ref:s,mod:[{fluid:j},p],...v("root"),...y})});u.classes=d,u.displayName="@mantine/core/Container"},84960:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/team",function(){return t(69246)}])},88339:(e,s,t)=>{"use strict";t.d(s,{A:()=>y,V:()=>p});var a=t(6029),n=t(75155),r=t(55729),i=t(65234),l=t.n(i),o=t(15215),c=t(73854),d=t(25062),m=t(22623),h=t(90515),u=t(45172),x=t(95352),g=t(91021);function j(e){let s,t,i,o,c=(0,n.c)(12),{text:m,size:x}=e,g=void 0===x?"md":x,[j,p]=(0,r.useState)(!1),y="xs"===g?14:16,v="xs"===g?"compact-xs":"sm",f=(void 0===m?"":m)??"";c[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>p(!0),c[0]=s):s=c[0];let b=j?"light":"default";c[1]!==j||c[2]!==y?(t=j?(0,a.jsx)(h.A,{size:y,className:"me-2"}):(0,a.jsx)(u.A,{size:y,className:"me-2"}),c[1]=j,c[2]=y,c[3]=t):t=c[3];let w=j?"Copied!":"Copy";return c[4]!==v||c[5]!==b||c[6]!==t||c[7]!==w?(i=(0,a.jsxs)(d.$,{variant:b,size:v,className:"position-absolute top-0 end-0",children:[t,w]}),c[4]=v,c[5]=b,c[6]=t,c[7]=w,c[8]=i):i=c[8],c[9]!==f||c[10]!==i?(o=(0,a.jsx)(l(),{text:f,onCopy:s,children:i}),c[9]=f,c[10]=i,c[11]=o):o=c[11],o}function p(e){let s,t,r,i,l,d,m=(0,n.c)(14),{data:h,formatData:u,enableCopy:g,copyButtonSize:p}=e,y=void 0===u||u,v=void 0!==g&&g,f=void 0===p?"md":p;m[0]!==h||m[1]!==y?(s=y?function(e){try{if(null!=e)return(0,c.GP)(e);return e}catch{return e}}(h):h,m[0]=h,m[1]=y,m[2]=s):s=m[2];let b=s;return m[3]===Symbol.for("react.memo_cache_sentinel")?(t={lineNumbers:!1,foldGutter:!1,highlightActiveLine:!1,highlightActiveLineGutter:!1},r=[(0,o.ll)()],m[3]=t,m[4]=r):(t=m[3],r=m[4]),m[5]!==b?(i=(0,a.jsx)(x.Ay,{indentWithTab:!1,value:b,theme:"dark",basicSetup:t,extensions:r,editable:!1}),m[5]=b,m[6]=i):i=m[6],m[7]!==f||m[8]!==b||m[9]!==v?(l=v&&(0,a.jsx)(j,{text:b,size:f}),m[7]=f,m[8]=b,m[9]=v,m[10]=l):l=m[10],m[11]!==i||m[12]!==l?(d=(0,a.jsxs)("div",{className:"position-relative",children:[i,l]}),m[11]=i,m[12]=l,m[13]=d):d=m[13],d}function y(e){let s,t,r=(0,n.c)(3),{config:i}=e,{data:l}=(0,g.zu)(i);return r[0]===Symbol.for("react.memo_cache_sentinel")?(s={overflow:"hidden"},r[0]=s):s=r[0],r[1]!==l?(t=(0,a.jsx)(m.t,{flex:"auto",shadow:"none",radius:"sm",style:s,children:(0,a.jsx)(p,{data:l,formatData:!1})}),r[1]=l,r[2]=t):t=r[2],t}},89011:e=>{e.exports={sourceSchemaPreviewButton:"SourceSelectControlled_sourceSchemaPreviewButton__qKlsK"}},91758:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var a=(0,t(41495).A)("outline","server","IconServer",[["path",{d:"M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 12m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-1"}],["path",{d:"M7 8l0 .01",key:"svg-2"}],["path",{d:"M7 16l0 .01",key:"svg-3"}]])},92495:(e,s)=>{"use strict";s.AB=function(e){let s,t;return function(e){try{return new URL(e),!0}catch(e){return!1}}(e)&&"slack.com"===((t=(s=new URL(e).hostname).split(".")).length>=2?t.slice(-2).join("."):s)}},92556:(e,s,t)=>{"use strict";t.d(s,{h:()=>g});var a=t(6029);t(55729);var n=t(5618),r=t(80616),i=t(37666),l=t(60481),o=t(43016),c=t(26615);let d=["h1","h2","h3","h4","h5","h6"],m=["xs","sm","md","lg","xl"];var h={root:"m_8a5d1357"};let u={order:1},x=(0,n.V)((e,{order:s,size:t,lineClamp:a,textWrap:n})=>{let r,i=(r=void 0!==t?t:`h${s}`,d.includes(r)?{fontSize:`var(--mantine-${r}-font-size)`,fontWeight:`var(--mantine-${r}-font-weight)`,lineHeight:`var(--mantine-${r}-line-height)`}:m.includes(r)?{fontSize:`var(--mantine-font-size-${r})`,fontWeight:`var(--mantine-h${s}-font-weight)`,lineHeight:`var(--mantine-h${s}-line-height)`}:{fontSize:(0,c.D)(r),fontWeight:`var(--mantine-h${s}-font-weight)`,lineHeight:`var(--mantine-h${s}-line-height)`});return{root:{"--title-fw":i.fontWeight,"--title-lh":i.lineHeight,"--title-fz":i.fontSize,"--title-line-clamp":"number"==typeof a?a.toString():void 0,"--title-text-wrap":n}}}),g=(0,o.P9)((e,s)=>{let t=(0,r.Y)("Title",u,e),{classNames:n,className:o,style:c,styles:d,unstyled:m,order:g,vars:j,size:p,variant:y,lineClamp:v,textWrap:f,mod:b,...w}=t,S=(0,i.I)({name:"Title",props:t,classes:h,className:o,style:c,classNames:n,styles:d,unstyled:m,vars:j,varsResolver:x});return[1,2,3,4,5,6].includes(g)?(0,a.jsx)(l.a,{...S("root"),component:`h${g}`,variant:y,ref:s,mod:[{order:g,"data-line-clamp":"number"==typeof v},b],size:p,...w}):null});g.classes=h,g.displayName="@mantine/core/Title"}},e=>{e.O(0,[7756,883,2928,6171,910,1606,1909,6747,3062,1445,2990,4607,5165,9353,1021,6514,3172,6593,636,8792],()=>e(e.s=84960)),_N_E=e.O()}]);