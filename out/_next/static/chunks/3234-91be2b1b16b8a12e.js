(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3234],{6379:(e,t,a)=>{"use strict";a.d(t,{FC:()=>B,yI:()=>F});var r=a(6029),l=a(75155),n=a(55729),i=a(75828),s=a.n(i),o=a(25605),c=a(43465),d=a(86508),u=a(7913),h=a(92205),m=a(56721),g=a(2055),p=a(13297),x=a(40684),f=a(8454),y=a(2893),v=a(47122),j=a(31292),w=a(88140),b=a(64370),C=a(93463),k=a(82641),A=a(37659),S=a(49109),_=a(33958),D=a(92917),z=a(43152),T=a(7565),E=a(43736),P=a.n(E);let N=new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:2}),M=e=>{let t,a,n=(0,l.c)(7),{current:i,previous:s}=e;if(n[0]!==i||n[1]!==s){a=Symbol.for("react.early_return_sentinel");e:{let e,l,o=0===s?0===i?0:void 0:(i-s)/s;if(void 0==o){a=null;break e}let c=o>0?S.A:_.A;n[4]===Symbol.for("react.memo_cache_sentinel")?(e={display:"inline-flex",alignItems:"center",gap:0},n[4]=e):e=n[4],n[5]!==c?(l=(0,r.jsx)(c,{size:12}),n[5]=c,n[6]=l):l=n[6],t=(0,r.jsxs)("span",{style:e,children:["(",l,N.format(Math.abs(o)),")"]})}n[0]=i,n[1]=s,n[2]=t,n[3]=a}else t=n[2],a=n[3];return a!==Symbol.for("react.early_return_sentinel")?a:t},I=(0,n.memo)(e=>{let t,a,n,i,s,o,c,d,u=(0,l.c)(24),{p:h,previous:m,numberFormat:g}=e;u[0]!==h.color||u[1]!==h.opacity||u[2]!==h.strokeDasharray?(t=(0,r.jsx)("div",{children:(0,r.jsx)("svg",{width:"12",height:"4",children:(0,r.jsx)("line",{x1:"0",y1:"2",x2:"12",y2:"2",stroke:h.color,opacity:h.opacity,strokeDasharray:h.strokeDasharray})})}),u[0]=h.color,u[1]=h.opacity,u[2]=h.strokeDasharray,u[3]=t):t=u[3],u[4]!==h.color?(a={color:h.color},u[4]=h.color,u[5]=a):a=u[5];let p=h.name??h.dataKey;return u[6]!==p?(n=(0,D.kU)(p,50),u[6]=p,u[7]=n):n=u[7],u[8]!==a||u[9]!==n?(i=(0,r.jsx)("span",{style:a,children:n}),u[8]=a,u[9]=n,u[10]=i):i=u[10],u[11]!==g||u[12]!==h.value?(s=g?(0,D.ZV)(h.value,g):h.value,u[11]=g,u[12]=h.value,u[13]=s):s=u[13],u[14]!==h.value||u[15]!==m?(o=m&&(0,r.jsx)(M,{current:h.value,previous:m?.value}),u[14]=h.value,u[15]=m,u[16]=o):o=u[16],u[17]!==i||u[18]!==s||u[19]!==o?(c=(0,r.jsxs)("div",{children:[i,": ",s," ",o]}),u[17]=i,u[18]=s,u[19]=o,u[20]=c):c=u[20],u[21]!==t||u[22]!==c?(d=(0,r.jsxs)("div",{className:"d-flex gap-2 items-center justify-center",children:[t,c]}),u[21]=t,u[22]=c,u[23]=d):d=u[23],d}),L=(0,u.withErrorBoundary)((0,n.memo)(e=>{let t,a=(0,l.c)(24),{active:n,payload:i,label:s,numberFormat:o,lineDataMap:c,previousPeriodOffsetSeconds:d}=e;a[0]!==i?(t=new Map(i.map(X)),a[0]=i,a[1]=t):t=a[1];let u=t;if(n&&i&&i.length){let e,t,l,n,h,m,g=1e3*s;if(a[2]!==g?(e=(0,r.jsx)(T.H,{value:g}),a[2]=g,a[3]=e):e=a[3],a[4]!==s||a[5]!==d?(t=null!=d&&(0,r.jsxs)(r.Fragment,{children:[" (vs ",(0,r.jsx)(T.H,{value:(s-d)*1e3}),")"]}),a[4]=s,a[5]=d,a[6]=t):t=a[6],a[7]!==e||a[8]!==t?(l=(0,r.jsxs)("div",{className:P().chartTooltipHeader,children:[e,t]}),a[7]=e,a[8]=t,a[9]=l):l=a[9],a[10]!==c||a[11]!==o||a[12]!==i||a[13]!==u){let e;a[15]!==c||a[16]!==o||a[17]!==u?(e=e=>{let t=c[e.dataKey]?.previousPeriodKey,a=t!==e.dataKey&&t?u.get(t):void 0;return(0,r.jsx)(I,{p:e,numberFormat:o,previous:a},e.dataKey)},a[15]=c,a[16]=o,a[17]=u,a[18]=e):e=a[18],n=i.sort(H).map(e),a[10]=c,a[11]=o,a[12]=i,a[13]=u,a[14]=n}else n=a[14];return a[19]!==n?(h=(0,r.jsx)("div",{className:P().chartTooltipContent,children:n}),a[19]=n,a[20]=h):h=a[20],a[21]!==l||a[22]!==h?(m=(0,r.jsxs)("div",{className:P().chartTooltip,children:[l,h]}),a[21]=l,a[22]=h,a[23]=m):m=a[23],m}return null}),{onError:console.error,fallback:(0,r.jsx)("div",{className:"text-danger px-2 py-1 m-2 fs-8 font-monospace bg-danger-transparent",children:"An error occurred while rendering the tooltip."})});function R(e){let t,a,i,s,o,c=(0,l.c)(21),{entry:d,expanded:u,isSelected:h,isDisabled:m,onToggle:g}=e,[p,x]=(0,n.useState)(!1),f=p||u,y=m?.3:1,v=h?600:400;c[0]!==d.color||c[1]!==y||c[2]!==v?(t={color:d.color,opacity:y,fontWeight:v,cursor:"pointer"},c[0]=d.color,c[1]=y,c[2]=v,c[3]=t):t=c[3],c[4]!==g?(a=e=>{g?g(e.shiftKey):x(K)},c[4]=g,c[5]=a):a=c[5];let j=h?"Click to show all (Shift+click to deselect)":"Click to show only this (Shift+click for multi-select)",w=m?.3:1,b=d.payload?.strokeDasharray,C=h?2.5:1.5;return c[6]!==d.color||c[7]!==w||c[8]!==b||c[9]!==C?(i=(0,r.jsx)("div",{children:(0,r.jsx)("svg",{width:"12",height:"4",children:(0,r.jsx)("line",{x1:"0",y1:"2",x2:"12",y2:"2",stroke:d.color,opacity:w,strokeDasharray:b,strokeWidth:C})})}),c[6]=d.color,c[7]=w,c[8]=b,c[9]=C,c[10]=i):i=c[10],c[11]!==d.value||c[12]!==f||c[13]!==h?(s=f||h?d.value:(0,D.kU)(`${d.value}`,35),c[11]=d.value,c[12]=f,c[13]=h,c[14]=s):s=c[14],c[15]!==s||c[16]!==t||c[17]!==a||c[18]!==j||c[19]!==i?(o=(0,r.jsxs)("span",{className:`d-flex gap-1 items-center justify-center ${P().legendItem}`,style:t,role:"button",onClick:a,title:j,children:[i,s]}),c[15]=s,c[16]=t,c[17]=a,c[18]=j,c[19]=i,c[20]=o):o=c[20],o}function K(e){return!e}let q=(0,n.memo)(e=>{let{payload:t=[],lineDataMap:a,allLineData:l=[],selectedSeries:i=new Set,onToggleSeries:o}=e,c=i.size>0,d=(0,n.useMemo)(()=>l.length>0?l.map(e=>({dataKey:e.dataKey,value:e.displayName||e.dataKey,color:e.color,payload:{strokeDasharray:e.isDashed?"4 3":"0"}})):t,[l,t]),u=(0,n.useMemo)(()=>{let e=new Map;return d.forEach((t,r)=>{let l=a[t.dataKey]?.currentPeriodKey||"";e.has(l)||e.set(l,r)}),d.sort((t,r)=>{let l=a[t.dataKey]?.currentPeriodKey??"",n=a[r.dataKey]?.currentPeriodKey??"",i=e.get(l)??0;return(e.get(n)??0)-i||t.dataKey.localeCompare(r.dataKey)})},[d,a]),h=u.slice(0,4),m=u.slice(4);return(0,r.jsxs)("div",{className:P().legend,children:[h.map((e,t)=>{let a=i.has(e.value);return(0,r.jsx)(R,{entry:e,isSelected:a,isDisabled:c&&!a,onToggle:t=>o?.(e.value,t)},`item-${t}`)}),m.length?(0,r.jsxs)(A.A,{withinPortal:!0,withArrow:!0,closeOnEscape:!0,closeOnClickOutside:!0,children:[(0,r.jsx)(A.A.Target,{children:(0,r.jsxs)("div",{className:s()(P().legendItem,P().legendMoreLink),children:["+",m.length," more"]})}),(0,r.jsx)(A.A.Dropdown,{p:"xs",children:(0,r.jsx)("div",{className:P().legendTooltipContent,children:m.map((e,t)=>{let a=i.has(e.value);return(0,r.jsx)(R,{entry:e,isSelected:a,isDisabled:c&&!a,onToggle:t=>o?.(e.value,t)},`item-${t}`)})})})]}):null]})}),F=60,B=(0,n.memo)(function({graphResults:e,setIsClickActive:t,isClickActive:a,dateRange:l,lineData:i,referenceLines:s,logReferenceTimestamp:u,displayType:A=k.t2.Line,numberFormat:S,isLoading:_,timestampKey:E="ts_bucket",onTimeRangeSelect:P,showLegend:N=!0,previousPeriodOffsetSeconds:M,selectedSeriesNames:I,onToggleSeries:R,granularity:K,dateRangeEndInclusive:B=!0}){let X=(0,n.useId)().replace(/:/g,""),[H,W]=(0,n.useState)(!1),V=A===k.t2.StackedBar?h.E:m.Q,Y=(0,n.useMemo)(()=>{let e=I&&I.size>0;return i.map(e=>e.dataKey).slice(0,F).filter((t,a)=>{let r=i[a]?.displayName??t;return!e||I.has(r)}).map(e=>{let t=i.findIndex(t=>t.dataKey===e),a=i[t]?.color,l=i[t]?.isDashed?"4 3":"0",n=i[t]?.displayName??e;return"stacked_bar"===A?(0,r.jsx)(g.y,{type:"monotone",dataKey:e,name:n,fill:a,opacity:1,stackId:"1",isAnimationActive:!1,shape:(0,r.jsx)(e=>{let{x:t,y:a,width:l,height:n,fill:i}=e;return(0,r.jsx)("rect",{x:t,y:a,width:l,height:n&&n>0?n+.5:0,fill:i})},{dataKey:e})},e):(0,r.jsx)(p.G,{dataKey:e,type:"monotone",stroke:a,fillOpacity:1,...H?{fill:"none",strokeDasharray:l}:{fill:`url(#time-chart-lin-grad-${X}-${a?.replace("#","").toLowerCase()})`,strokeDasharray:l},name:n,isAnimationActive:!1,connectNulls:!0},e)})},[i,A,X,H,I]),G=(0,n.useMemo)(()=>{if(!(I&&I.size>0))return[0,"auto"];let t=1/0,a=-1/0;if(e.forEach(e=>{i.forEach(r=>{let l=r.displayName||r.dataKey;if(I.has(l)){let l=e[r.dataKey];"number"!=typeof l||isNaN(l)||(t=Math.min(t,l),a=Math.max(a,l))}})}),t!==1/0&&a!==-1/0){let e=(a-t)*.1;return[Math.max(0,t-e),a+e]}return["auto","auto"]},[e,i,I]),O=(0,n.useRef)([0,0]),$=(0,T.a)(),Q=(0,n.useCallback)((e,t)=>$(1e3*e,{format:0===t?"normal":"time"}),[$]),U=(0,n.useCallback)((e,t)=>S?(0,D.ZV)(e,{...S,average:!0,mantissa:0,unit:void 0}):new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e),[S]),[J,Z]=(0,n.useState)(),[ee,et]=(0,n.useState)(),ea=(0,n.useRef)(null),er=(0,n.useMemo)(()=>{let e={};return i.forEach(t=>{e[t.dataKey]=t}),e},[i]),el=(0,n.useMemo)(()=>{let e=(0,z.W6)(l[0],K),t=(0,z.W6)(l[1],K);if((0,o.A)(l[1],t)&&!B&&(t=(0,c.A)(t,{seconds:(0,z.qL)(K)})),A===k.t2.StackedBar){let a=(0,z.qL)(K)/2;e=(0,c.A)(e,{seconds:a}),t=(0,d.A)(t,{seconds:a})}return[e.getTime()/1e3,t.getTime()/1e3]},[l,K,B,A]);return(0,r.jsx)(x.u,{width:"100%",height:"100%",minWidth:0,onResize:(e,t)=>{O.current=[e??1,t??1]},className:_?"effect-pulse":"",children:(0,r.jsxs)(V,{width:500,height:300,data:e,syncId:"hdx",syncMethod:"value",onMouseEnter:()=>W(!0),onMouseLeave:e=>{W(!1),Z(void 0),et(void 0),ea.current=null},onMouseDown:e=>{null!=e&&null!=e.chartX&&null!=e.chartY&&(Z(e.activeLabel),ea.current=e.chartX)},onMouseMove:e=>{W(!0),null!=J&&(et(e.activeLabel),t(void 0))},onMouseUp:e=>{let t=0;if(null!=ea.current&&e?.chartX!=null&&(t=Math.abs(e.chartX-ea.current)),e?.activeLabel!=null&&J===e.activeLabel)Z(void 0),et(void 0),ea.current=null;else if(null!=J&&null!=ee&&t>=20){try{P?.(new Date(1e3*Number.parseInt(J<=ee?J:ee)),new Date(1e3*Number.parseInt(ee>=J?ee:J)))}catch(e){console.error("failed to highlight range",e)}Z(void 0),et(void 0),ea.current=null}else Z(void 0),et(void 0),ea.current=null},onClick:(e,a)=>{null!=e&&null!=e.chartX&&null!=e.chartY&&null!=e.activeLabel&&null==J?t({x:e.chartX,y:e.chartY,activeLabel:e.activeLabel,xPerc:e.chartX/O.current[0],yPerc:e.chartY/O.current[1],activePayload:e.activePayload}):t(void 0),a.stopPropagation()},children:[(0,r.jsx)("defs",{children:D.lm.map(e=>(0,r.jsxs)("linearGradient",{id:`time-chart-lin-grad-${X}-${e.replace("#","").toLowerCase()}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:e,stopOpacity:.15}),(0,r.jsx)("stop",{offset:"10%",stopColor:e,stopOpacity:.003})]},e))}),H&&(0,r.jsx)(f.d,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),(0,r.jsx)(y.W,{dataKey:E??"ts_bucket",domain:el,interval:"preserveStartEnd",scale:"time",type:"number",tickFormatter:Q,minTickGap:100,tick:{fontSize:11,fontFamily:"IBM Plex Mono, monospace"}}),(0,r.jsx)(v.h,{width:40,minTickGap:25,tickFormatter:U,tick:{fontSize:11,fontFamily:"IBM Plex Mono, monospace"},domain:G}),Y,null==a&&(0,r.jsx)(j.m,{content:(0,r.jsx)(L,{numberFormat:S,lineDataMap:er,previousPeriodOffsetSeconds:M}),wrapperStyle:{zIndex:1}}),s,J&&ee?(0,r.jsx)(w.T,{x1:J,x2:ee,strokeOpacity:.3}):null,N&&(0,r.jsx)(b.s,{iconSize:10,verticalAlign:"bottom",content:(0,r.jsx)(q,{lineDataMap:er,allLineData:i,selectedSeries:I||new Set,onToggleSeries:R}),offset:-100}),null!=a?(0,r.jsx)(C.e,{x:a.activeLabel,stroke:"#ccc"}):null,null!=u?(0,r.jsx)(C.e,{x:u,stroke:"#ff5d5b",strokeDasharray:"3 3",label:"Event"}):null]})})});function X(e){return[e.dataKey,e]}function H(e,t){return t.value-e.value}},9211:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(6029),l=a(75155),n=a(1909),i=a(38206);function s(e){let t,a,s,o,c,d=(0,l.c)(16),{field:u,fieldState:h}=(0,n.as)(e),{value:m,onChange:g,onBlur:p,name:x,ref:f}=u;d[0]!==e?({onCreate:t,allowDeselect:s,...a}=e,d[0]=e,d[1]=t,d[2]=a,d[3]=s):(t=d[1],a=d[2],s=d[3]);let y=void 0===s||s,v=e.data?.find(e=>"string"==typeof e?e===m:!("value"in e)||e.value===m);d[4]!==y||d[5]!==g||d[6]!==t?(o=e=>{"_create_new_value"===e&&null!=t?t():(null!==e||y)&&g(e)},d[4]=y,d[5]=g,d[6]=t,d[7]=o):o=d[7];let j=o,w=h.error?.message,b=null==v?null:m;return d[8]!==x||d[9]!==p||d[10]!==f||d[11]!==j||d[12]!==a||d[13]!==w||d[14]!==b?(c=(0,r.jsx)(i.l,{...a,error:w,value:b,onChange:j,onBlur:p,name:x,ref:f}),d[8]=x,d[9]=p,d[10]=f,d[11]=j,d[12]=a,d[13]=w,d[14]=b,d[15]=c):c=d[15],c}},11104:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(6029),l=a(75155),n=a(75828),i=a.n(n),s=a(63085),o=a(76013),c=a(3635);let d=function(e){let t,a,n=(0,l.c)(9),{value:d,onChange:u,options:h}=e;if(n[0]!==u||n[1]!==h||n[2]!==d){let e;n[4]!==u||n[5]!==d?(e=e=>{let{icon:t,label:a,value:l,disabled:n}=e;return(0,r.jsx)(s.m,{label:a,children:(0,r.jsx)(o.M,{size:"xs",me:2,className:i()({"text-brand":d===l,"text-muted-hover":d!==l}),disabled:n,onClick:()=>u(l),children:t})},l)},n[4]=u,n[5]=d,n[6]=e):e=n[6],t=h.map(e),n[0]=u,n[1]=h,n[2]=d,n[3]=t}else t=n[3];return n[7]!==t?(a=(0,r.jsx)(c.Y,{className:"bg-muted px-2 py-2 rounded fs-8",align:"center",gap:0,wrap:"nowrap",children:t}),n[7]=t,n[8]=a):a=n[8],a}},15628:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(6029),l=a(75155),n=a(3635),i=a(34834);let s=function(e){let t,a,s,o,c=(0,l.c)(10),{title:d,toolbarItems:u,children:h,disableReactiveContainer:m}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t={flexGrow:1},c[0]=t):t=c[0],c[1]!==d||c[2]!==u?(a=(!!d||!!u?.length)&&(0,r.jsxs)(n.Y,{justify:"space-between",align:"start",wrap:"nowrap",children:[(0,r.jsx)("span",{style:{flex:1,flexShrink:1,overflow:"hidden"},children:d}),u&&(0,r.jsx)(n.Y,{flex:0,wrap:"nowrap",gap:5,children:u})]}),c[1]=d,c[2]=u,c[3]=a):a=c[3],c[4]!==h||c[5]!==m?(s=m?h:(0,r.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,r.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:0,top:0},children:h})}),c[4]=h,c[5]=m,c[6]=s):s=c[6],c[7]!==a||c[8]!==s?(o=(0,r.jsxs)(i.B,{h:"100%",w:"100%",style:t,children:[a,s]}),c[7]=a,c[8]=s,c[9]=o):o=c[9],o}},17421:(e,t,a)=>{"use strict";a.d(t,{P:()=>i});var r=a(6029);a(55729);var l=a(87383),n=a(8737);let i=({data:e,filename:t,children:a,className:i,title:s,disabled:o=!1,onExportStart:c,onExportComplete:d,onExportError:u,...h})=>{let{CSVDownloader:m}=(0,l.jG)();return o||0===e.length?(0,r.jsx)("div",{className:i,title:o?"Export disabled":"No data to export",style:{opacity:.5,cursor:"not-allowed"},...h,children:a}):(0,r.jsx)(n.N,{className:i,title:s,onClick:()=>{try{if(0===e.length)return void u?.(Error("No data to export"));c?.(),d?.()}catch(e){u?.(e instanceof Error?e:Error("Export failed"))}},...h,children:(0,r.jsx)(m,{data:e,filename:t,config:{quotes:!0,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0},style:{color:"inherit",textDecoration:"none",background:"none",border:"none",padding:0,cursor:"pointer",display:"block",width:"100%",height:"100%"},children:a})})}},34011:e=>{e.exports={tableWrapper:"Table_tableWrapper__u_gzk",tableBorderless:"Table_tableBorderless__C8oJ4",tableDensityZero:"Table_tableDensityZero___MyCd",tableDensityCompact:"Table_tableDensityCompact__VH49r",tableDensityComfortable:"Table_tableDensityComfortable__yAVt1",tableInteractive:"Table_tableInteractive__g4nmr",emptyMessage:"Table_emptyMessage__Grj3p",tableCellButton:"Table_tableCellButton__q1n1W",cursorColResize:"Table_cursorColResize__8J2BT"}},40228:(e,t,a)=>{"use strict";a.d(t,{S:()=>K});var r=a(6029),l=a(55729),n=a(82203),i=a.n(n),s=a(11370),o=a(86508),c=a(35467),d=a(76089),u=a(82641),h=a(95991),m=a(37659),g=a(3635),p=a(34834),x=a(43517),f=a(63085),y=a(25062),v=a(27166),j=a(24589),w=a(78341),b=a(41279),C=a(9841),k=a(45556),A=a(16232),S=a(6876),_=a(43152),D=a(6379),z=a(91021),T=a(57389),E=a(81973),P=a(15628),N=a(35871),M=a(11104),I=a(99082),L=a(88339);function R({activeClickPayload:e,buildSearchUrl:t,onDismiss:a}){let l=null!=e&&null!=e.activePayload&&e.activePayload.length>0;if(!l)return null;let n=e.activePayload.filter(e=>null!=e.value&&!e.dataKey?.endsWith(_.wt)).sort((e,t)=>t.value-e.value);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{children:(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:199},onClick:e=>{e.stopPropagation(),e.preventDefault(),a()},onMouseDown:e=>{e.stopPropagation()}})}),(0,r.jsxs)(m.A,{opened:l,onChange:e=>{e||a()},position:"bottom-start",offset:4,withinPortal:!0,closeOnEscape:!0,withArrow:!0,shadow:"md",children:[(0,r.jsx)(m.A.Target,{children:(0,r.jsx)("div",{style:{position:"absolute",left:e.x??0,top:e.y??0,width:1,height:1,pointerEvents:"none"}})}),(0,r.jsx)(m.A.Dropdown,{p:"xs",maw:300,onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),children:n.length<=1?(0,r.jsx)(i(),{"data-testid":"chart-view-events-link",href:t(n?.[0]?.dataKey,n?.[0]?.value)??"/search",onClick:a,children:(0,r.jsxs)(g.Y,{gap:"xs",children:[(0,r.jsx)(b.A,{size:16}),"View Events"]})}):(0,r.jsxs)(p.B,{gap:"xs",style:{maxHeight:"170px",overflowY:"auto"},children:[(0,r.jsx)(x.E,{c:"gray.5",size:"xs",children:"View Events for:"}),n.map((e,l)=>{let n=t(e.dataKey,e.value);return(0,r.jsx)(f.m,{label:e.name,withArrow:!0,color:"gray",position:"right",children:(0,r.jsx)(i(),{"data-testid":`chart-view-events-link-${e.dataKey}`,href:n??"/search",onClick:a,children:(0,r.jsxs)(g.Y,{gap:"xs",children:[(0,r.jsx)(b.A,{size:12}),(0,r.jsx)(x.E,{size:"xs",truncate:!0,flex:"1",children:e.name})]})})},l)})]})})]})]})}let K=(0,l.memo)(function({config:e,disableQueryChunking:t,disableDrillDown:a,enableParallelQueries:n,enabled:i=!0,logReferenceTimestamp:h,onTimeRangeSelect:m,queryKeyPrefix:p,referenceLines:f,setDisplayType:b,showDisplaySwitcher:K=!0,showLegend:q=!0,sourceId:F,hiddenSeries:B,title:X,toolbarPrefix:H,toolbarSuffix:W,showMVOptimizationIndicator:V=!0,showDateRangeIndicator:Y=!0}){let[G,O]=(0,w.j)(!1),[$,Q]=(0,l.useState)(new Set),U=(0,l.useCallback)((e,t)=>{Q(a=>{let r=new Set(a);return t?r.has(e)?r.delete(e):r.add(e):r.has(e)&&1===r.size?r.clear():(r.clear(),r.add(e)),r})},[]),J=e.dateRange,{displayType:Z,dateRange:ee,granularity:et,fillNulls:ea}=(0,_.GJ)(e),er=(0,l.useMemo)(()=>(0,_.O7)(e),[e]),{data:el}=(0,T.d)(er),{data:en,isLoading:ei}=S.Ay.useMe(),{data:es,isLoading:eo,isError:ec,error:ed,isPlaceholderData:eu,isSuccess:eh}=(0,z.HD)(er,{placeholderData:e=>e,queryKey:[p,er,"chunked",{disableQueryChunking:t,enableParallelQueries:n,parallelizeWhenPossible:en?.team?.parallelizeWhenPossible}],enabled:i&&!ei,enableQueryChunking:!t,enableParallelQueries:n&&en?.team?.parallelizeWhenPossible}),em=(0,l.useMemo)(()=>{let e=!1===er.alignDateRangeToGranularity?(0,_.r4)(J):(0,d.Ol)((0,_.r4)(J),er.granularity);return{...er,dateRange:e}},[er,J]),eg=(0,l.useMemo)(()=>e.compareToPreviousPeriod?(0,s.A)(ee[0],em.dateRange[0]):void 0,[e.compareToPreviousPeriod,ee,em.dateRange]),{data:ep,isLoading:ex}=(0,z.HD)(em,{placeholderData:e=>e,queryKey:[p,em,"chunked"],enabled:!!(i&&e.compareToPreviousPeriod),enableQueryChunking:!0});(0,l.useEffect)(()=>{!ec&&G&&O.close()},[ec,G,O]);let ef=eo||ex||!es?.isComplete||e.compareToPreviousPeriod&&!ep?.isComplete||eu,{data:ey}=(0,E.Fo)({id:F||e.source}),{graphResults:ev,timestampColumn:ej,groupColumns:ew,valueColumns:eb,isSingleValueColumn:eC,lineData:ek}=(0,l.useMemo)(()=>{let t={graphResults:[],timestampColumn:void 0,lineData:[],groupColumns:[],valueColumns:[],isSingleValueColumn:!0};if(null==es||!eh)return t;try{return(0,_.zg)({currentPeriodResponse:es,previousPeriodResponse:e.compareToPreviousPeriod?ep:void 0,dateRange:ee,granularity:et,generateEmptyBuckets:(0,_.xu)(ea),source:ey,hiddenSeries:B,previousPeriodOffsetSeconds:eg})}catch(e){return console.error(e),t}},[es,ee,et,eh,ea,ey,e.compareToPreviousPeriod,ep,B,eg]),[eA,eS]=(0,l.useState)(Z),e_=(0,l.useMemo)(()=>b?Z:eA,[eA,Z,b]),eD=(0,l.useCallback)(e=>{b?b(e):eS(e)},[b]);(0,l.useEffect)(()=>{e.compareToPreviousPeriod&&eS(u.t2.Line)},[e.compareToPreviousPeriod]);let[ez,eT]=(0,l.useState)(void 0),eE=(0,l.useCallback)(e=>{null==ey||a||eT(e)},[ey,a]),eP=(0,l.useMemo)(()=>ez?.activeLabel!=null?new Date(1e3*Number.parseInt(ez.activeLabel)):void 0,[ez]),eN=(0,l.useCallback)((t,a)=>{let r;if(null==eP||null==ey)return null;let l=t?.split(_.Hx),n=[];if(l?.length&&ew?.length&&(!(eC??!0)||(ew?.length??0)===0&&(eb?.length??0)>0?l.slice(1):l).forEach((e,t)=>{null!=ew[t]&&n.push({column:ew[t],value:e})}),a&&Array.isArray(e.select)&&e.select.length>0){let t;if((eC??!0)&&1===e.select.length){let a=e.select[0],r="string"==typeof a?void 0:a.aggFn;_.gT.find(e=>e.value===r)?.isAttributable!==!1&&(t="string"==typeof a?a:a.valueExpression)}else if(l?.length&&(eb?.length??0)>0){let a=l[0],r=eb?.findIndex(e=>e===a);if(null!=r&&r>=0&&r<e.select.length){let a=e.select[r],l="string"==typeof a?void 0:a.aggFn;_.gT.find(e=>e.value===l)?.isAttributable!==!1&&(t="string"==typeof a?a:a.valueExpression)}}t&&(r={expression:t,value:a})}let i=(0,o.A)(eP,{seconds:(0,_.qL)(et)});return(0,_.VH)({source:ey,config:e,dateRange:[eP,i],groupFilters:n,valueRangeFilter:r})},[eP,e,et,ey,ew,eb,eC]),eM=(0,l.useMemo)(()=>{let t=[];H&&H.length>0&&t.push(...H),ey&&V&&t.push((0,r.jsx)(I.A,{config:er,source:ey,variant:"icon"},"db-time-chart-mv-indicator"));let a=el?.optimizedConfig?.dateRange,l=!1!==er.alignDateRangeToGranularity;if(Y&&(a||l)){let n=l?void 0:el?.explanations.find(e=>e.success)?.mvConfig.minGranularity;t.push((0,r.jsx)(N.A,{originalDateRange:e.dateRange,effectiveDateRange:a||er.dateRange,mvGranularity:n},"db-time-chart-date-range-indicator"))}return K&&t.push((0,r.jsx)(M.A,{value:e_,onChange:eD,options:[{value:u.t2.Line,label:"Display as Line Chart",icon:(0,r.jsx)(C.A,{})},{value:u.t2.StackedBar,label:e.compareToPreviousPeriod?"Bar Chart Unavailable When Comparing to Previous Period":"Display as Bar Chart",icon:(0,r.jsx)(k.A,{}),disabled:e.compareToPreviousPeriod}]},"db-time-chart-display-switcher")),W&&W.length>0&&t.push(...W),t},[e,e_,eD,K,ey,H,W,V,Y,el,er]);return(0,r.jsx)(P.A,{title:X,toolbarItems:eM,children:eo&&!es?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"Loading Chart Data..."}):ec?(0,r.jsxs)("div",{className:"h-100 w-100 d-flex g-1 flex-column align-items-center justify-content-center text-muted overflow-auto",children:[(0,r.jsx)(x.E,{ta:"center",size:"sm",mt:"sm",children:"Error loading chart, please check your query or try again later."}),(0,r.jsx)(y.$,{className:"mx-auto",variant:"danger",onClick:()=>O.open(),children:(0,r.jsxs)(g.Y,{gap:"xxs",children:[(0,r.jsx)(A.A,{size:16}),"See Error Details"]})}),(0,r.jsx)(v.a,{opened:G,onClose:()=>O.close(),title:"Error Details",children:(0,r.jsxs)(g.Y,{align:"start",children:[(0,r.jsx)(x.E,{size:"sm",ta:"center",children:"Error Message:"}),(0,r.jsx)(j.C,{block:!0,style:{whiteSpace:"pre-wrap"},children:ed.message}),ed instanceof c.p1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.E,{my:"sm",size:"sm",ta:"center",children:"Sent Query:"}),(0,r.jsx)(L.V,{data:ed?.query})]})]})})]}):0===ev.length?(0,r.jsx)("div",{className:"d-flex h-100 w-100 align-items-center justify-content-center text-muted",children:"No data found within time range."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{activeClickPayload:ez,buildSearchUrl:eN,onDismiss:()=>eT(void 0)}),(0,r.jsx)(D.FC,{dateRange:ee,displayType:e_,graphResults:ev,isClickActive:ez,lineData:ek,isLoading:ef,logReferenceTimestamp:h,numberFormat:e.numberFormat,onTimeRangeSelect:m,referenceLines:f,setIsClickActive:eE,showLegend:q,timestampKey:ej?.name,previousPeriodOffsetSeconds:eg,selectedSeriesNames:$,onToggleSeries:U,granularity:et,dateRangeEndInclusive:er.dateRangeEndInclusive})]})})})},43736:e=>{e.exports={legend:"HDXLineChart_legend__lPU01",legendItem:"HDXLineChart_legendItem____Qwu",legendMoreLink:"HDXLineChart_legendMoreLink__16Wq1",legendTooltipContent:"HDXLineChart_legendTooltipContent__tHXLT",chartTooltip:"HDXLineChart_chartTooltip__hEAmh",chartTooltipHeader:"HDXLineChart_chartTooltipHeader__l9Fb7",chartTooltipContent:"HDXLineChart_chartTooltipContent__vtVBK"}},48423:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var r=a(6029),l=a(75828),n=a.n(l),i=a(3635),s=a(43517),o=a(25062),c=a(97767),d=a(67872),u=a(2485),h=a(79220),m=a(68593),g=a(34011),p=a.n(g);function x({isLast:e,header:t,lastItemButtons:a}){return(0,r.jsx)("th",{className:"overflow-hidden",colSpan:t.colSpan,style:{width:t.getSize()===m.k?"100%":t.getSize(),minWidth:t.getSize()===m.k?0:t.getSize()},children:(0,r.jsxs)(i.Y,{wrap:"nowrap",gap:0,align:"center",children:[t.column.getCanSort()?(0,r.jsx)(o.$,{size:"xxs",p:1,variant:"subtle",color:"gray",onClick:t.column.getToggleSortingHandler(),flex:"1",justify:"space-between","data-testid":"raw-log-table-sort-button",children:(0,r.jsxs)(r.Fragment,{children:[t.isPlaceholder?null:(0,r.jsx)(s.E,{truncate:"end",size:"xs",flex:"1",children:(0,h.Kv)(t.column.columnDef.header,t.getContext())}),t.column.getIsSorted()&&(0,r.jsx)("div",{"data-testid":"raw-log-table-sort-indicator",className:"asc"===t.column.getIsSorted()?"sorted-asc":"sorted-desc",children:(0,r.jsx)(r.Fragment,{children:"asc"===t.column.getIsSorted()?(0,r.jsx)(c.A,{size:12}):(0,r.jsx)(d.A,{size:12})})})]})}):(0,r.jsx)(s.E,{truncate:"end",size:"xs",flex:"1",children:(0,h.Kv)(t.column.columnDef.header,t.getContext())}),(0,r.jsxs)(i.Y,{gap:0,wrap:"nowrap",align:"center",children:[t.column.getCanResize()&&!e&&(0,r.jsx)("div",{onMouseDown:t.getResizeHandler(),onTouchStart:t.getResizeHandler(),className:n()(`resizer ${p().cursorColResize}`,t.column.getIsResizing()&&"isResizing"),children:(0,r.jsx)(u.A,{size:12})}),e&&(0,r.jsx)(i.Y,{gap:2,wrap:"nowrap",children:a})]})]})},t.id)}},55024:(e,t,a)=>{"use strict";a.d(t,{u:()=>l});var r=a(75155);let l=(e,t,a)=>{let l,n,i=(0,r.c)(14);i[0]!==a?(l=void 0===a?{}:a,i[0]=a,i[1]=l):l=i[1];let{maxRows:s,groupColumnName:o}=l,c=void 0===s?4e3:s;e:{let a,r;if(!Array.isArray(e)||0===e.length||!Array.isArray(t)||0===t.length){let e,t;i[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],i[2]=e):e=i[2],i[3]!==c?(t={csvData:e,maxRows:c,isDataEmpty:!0,actualRowCount:0,isLimited:!1},i[3]=c,i[4]=t):t=i[4],n=t;break e}i[5]!==t||i[6]!==e||i[7]!==o||i[8]!==c?(a=((e,t,a={})=>{let{groupColumnName:r}=a;if(!Array.isArray(e))return console.warn("CSV Export: data must be an array"),[];if(!Array.isArray(t)||0===t.length)return console.warn("CSV Export: columns must be a non-empty array"),[];let l=t.filter(e=>!e||"string"!=typeof e.dataKey||"string"!=typeof e.displayName);return l.length>0?(console.warn("CSV Export: Invalid column structure detected",l),[]):e.filter(e=>null!=e&&"object"==typeof e).map((e,a)=>{try{return{...null!=r?{[r]:e.group??""}:{},...Object.fromEntries(t.map(({displayName:t,dataKey:a})=>{let r=e[a];return null==r?[t,""]:"object"==typeof r?[t,JSON.stringify(r)]:[t,String(r)]}))}}catch(e){return console.warn(`CSV Export: Error processing row ${a}:`,e),{}}}).filter(e=>Object.keys(e).length>0)})(e.slice(0,c),t,{groupColumnName:o}),i[5]=t,i[6]=e,i[7]=o,i[8]=c,i[9]=a):a=i[9];let l=a,s=e.length>c;i[10]!==l||i[11]!==c||i[12]!==s?(r={csvData:l,maxRows:c,isDataEmpty:!1,actualRowCount:l.length,isLimited:s},i[10]=l,i[11]=c,i[12]=s,i[13]=r):r=i[13],n=r}return n}},68593:(e,t,a)=>{"use strict";a.d(t,{k:()=>r});let r=99999},78744:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var r=a(75155),l=a(67264),n=a.n(l),i=a(67270),s=a(76089),o=a(93251),c=a(95099),d=a(6876),u=a(49672),h=a(78550),m=a(57389),g=a(81973),p=a(92917),x=a(69519);let f=async({queryKey:e,pageParam:t,signal:a,meta:r})=>{if(null==r)throw Error("Query missing client meta");let{queryClient:l,metadata:n,hasPreviousQueries:o,optimizedConfig:c,source:d}=r,h=!o||t.offset>0||t.windowIndex>0,m=e[2],g=(0,u.W)({queryTimeout:m}),p=e[1],f=c??p,y=(0,s.jN)(f)?function(e,t){let[a,r]=e.dateRange,l=((0,s.es)(e.orderBy)?(0,x.Me)(a,r):(0,x.so)(a,r))[t.windowIndex];if(null==l)throw Error("Invalid time window for page param");return l}(f,t):{startTime:f.dateRange[0],endTime:f.dateRange[1],windowIndex:0,direction:"DESC"},v={...f,dateRange:[y.startTime,y.endTime],limit:{limit:f.limit?.limit,offset:t.offset}},j=await (0,i.PV)(v,n,d?.querySettings),w=m?new AbortController:void 0;w&&m&&setTimeout(()=>w.abort(),1e3*m);let b=(await g.query({query:j.sql,query_params:j.params,format:"JSONCompactEachRowWithNamesAndTypes",abort_signal:w?.signal||a,connectionId:f.connection})).stream().getReader(),C=[];h&&l.setQueryData(e,e=>{let a={data:[],meta:[],chSql:{sql:"",params:{}},window:y};return null==e?{pages:[a],pageParams:[t]}:{pages:[...e.pages,a],pageParams:[...e.pageParams,t]}});let k=[],A=[];async function S(){let{done:a,value:r}=await b.read();if(!a&&null!=r){if(C.push(...r),C.length>=2){let a=r;if(0===k.length){let e=C[0].json(),t=C[1].json();if(e.length!==t.length)throw Error("Invalid JSONCompactEachRowWithNamesAndTypes header rows");for(let a=0;a<e.length;a++)k.push({name:e[a],type:t[a]});a=a.slice(2)}let n=[];for(let e=0;e<a.length;e++){let t=a[e].json(),r={};for(let e=0;e<t.length;e++)r[k[e].name]=t[e];n.push(r),A.push(r)}h&&l.setQueryData(e,e=>{if(null==e)return{pages:[{data:n,meta:k,chSql:j,window:y}],pageParams:[t]};let a=e.pages.slice(0,-1),r=e.pages[e.pages.length-1];return{pages:[...a,{...r,data:[...r.data??[],...n],meta:k,chSql:j,window:y}],pageParams:e.pageParams}})}return await S()}}function _(){l.setQueryData(e,e=>{if(null!=e)return{pages:e.pages.slice(0,-1),pageParams:e.pageParams.slice(0,-1)}})}try{await S()}catch(e){throw h&&_(),e}if(!h)return{data:A,meta:k,chSql:j,window:y};let D=l.getQueryData(e);if(null==D)throw Error("Data not found in cache");let{pages:z}=D,T=z[z.length-1];return _(),T};function y(e,t){var a;let l,i,u,y,j,w,b,C,k,A,S=(0,r.c)(35),{isLive:_,enabled:D,queryKeyPrefix:z}=void 0===t?{}:t,T=void 0===D||D,E=void 0===z?"":z,{data:P,isLoading:N}=d.Ay.useMe(),M=[E,e,P?.team?.queryTimeout],I=(0,o.jE)(),L=(0,h.Ge)(),R=I.getQueriesData({queryKey:[E,(0,p.cJ)(e,["dateRange"])]}).filter(v).length>0,K=!!T;S[0]!==K?(l={enabled:K,placeholderData:void 0},S[0]=K,S[1]=l):l=S[1];let{data:q,isLoading:F}=(0,m.d)(e,l),B=e?.source;S[2]!==B?(i={id:B},S[2]=B,S[3]=i):i=S[3];let{data:X,isLoading:H}=(0,g.Fo)(i);S[4]!==_?(u=e=>_?e:void 0,S[4]=_,S[5]=u):u=S[5];let W=T&&!N&&!F&&!H;S[6]===Symbol.for("react.memo_cache_sentinel")?(y={windowIndex:0,offset:0},S[6]=y):y=S[6],S[7]!==e?(j=(t,a)=>(function(e,t,a){if(null==e)return;let[r,l]=a.dateRange,n=(0,s.es)(a.orderBy)?(0,x.Me)(r,l):(0,x.so)(r,l),i=e.window,o=t.filter(e=>e.window.windowIndex===i.windowIndex).reduce((e,t)=>e+t.data.length,0);if(e.data.length>0)return{windowIndex:i.windowIndex,offset:o};let c=(0,s.jN)(a),d=i.windowIndex+1;if(c&&d<n.length)return{windowIndex:d,offset:0}})(t,a,e),S[7]=e,S[8]=j):j=S[8];let V=q?.optimizedConfig;S[9]!==R||S[10]!==L||S[11]!==I||S[12]!==X||S[13]!==V?(w={queryClient:I,hasPreviousQueries:R,metadata:L,optimizedConfig:V,source:X},S[9]=R,S[10]=L,S[11]=I,S[12]=X,S[13]=V,S[14]=w):w=S[14];let Y=w;S[15]!==_?(b=_?n()("30s"):n()("5m"),S[15]=_,S[16]=b):b=S[16];let G=_?5:void 0;S[17]!==M||S[18]!==j||S[19]!==Y||S[20]!==b||S[21]!==G||S[22]!==u||S[23]!==W?(C={queryKey:M,placeholderData:u,enabled:W,initialPageParam:y,getNextPageParam:j,staleTime:1/0,meta:Y,queryFn:f,gcTime:b,retry:1,refetchOnWindowFocus:!1,maxPages:G},S[17]=M,S[18]=j,S[19]=Y,S[20]=b,S[21]=G,S[22]=u,S[23]=W,S[24]=C):C=S[24];let{data:O,fetchNextPage:$,hasNextPage:Q,isFetching:U,isError:J,error:Z,isLoading:ee}=(0,c.q)(C);S[25]!==O?(k=null==(a=O)||0===a.pages.length?null:{meta:a.pages[0].meta,data:a.pages.flatMap(e=>e.data),chSql:a.pages[0].chSql,window:a.pages[a.pages.length-1].window},S[25]=O,S[26]=k):k=S[26];let et=k,ea=U||N||F,er=ee||N||F;return S[27]!==Z||S[28]!==$||S[29]!==et||S[30]!==Q||S[31]!==J||S[32]!==ea||S[33]!==er?(A={isError:J,error:Z,data:et,fetchNextPage:$,hasNextPage:Q,isFetching:ea,isLoading:er},S[27]=Z,S[28]=$,S[29]=et,S[30]=Q,S[31]=J,S[32]=ea,S[33]=er,S[34]=A):A=S[34],A}function v(e){let[,t]=e;return null!=t}},88339:(e,t,a)=>{"use strict";a.d(t,{A:()=>y,V:()=>f});var r=a(6029),l=a(75155),n=a(55729),i=a(65234),s=a.n(i),o=a(15215),c=a(73854),d=a(25062),u=a(22623),h=a(90515),m=a(45172),g=a(95352),p=a(91021);function x(e){let t,a,i,o,c=(0,l.c)(12),{text:u,size:g}=e,p=void 0===g?"md":g,[x,f]=(0,n.useState)(!1),y="xs"===p?14:16,v="xs"===p?"compact-xs":"sm",j=(void 0===u?"":u)??"";c[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>f(!0),c[0]=t):t=c[0];let w=x?"light":"default";c[1]!==x||c[2]!==y?(a=x?(0,r.jsx)(h.A,{size:y,className:"me-2"}):(0,r.jsx)(m.A,{size:y,className:"me-2"}),c[1]=x,c[2]=y,c[3]=a):a=c[3];let b=x?"Copied!":"Copy";return c[4]!==v||c[5]!==w||c[6]!==a||c[7]!==b?(i=(0,r.jsxs)(d.$,{variant:w,size:v,className:"position-absolute top-0 end-0",children:[a,b]}),c[4]=v,c[5]=w,c[6]=a,c[7]=b,c[8]=i):i=c[8],c[9]!==j||c[10]!==i?(o=(0,r.jsx)(s(),{text:j,onCopy:t,children:i}),c[9]=j,c[10]=i,c[11]=o):o=c[11],o}function f(e){let t,a,n,i,s,d,u=(0,l.c)(14),{data:h,formatData:m,enableCopy:p,copyButtonSize:f}=e,y=void 0===m||m,v=void 0!==p&&p,j=void 0===f?"md":f;u[0]!==h||u[1]!==y?(t=y?function(e){try{if(null!=e)return(0,c.GP)(e);return e}catch{return e}}(h):h,u[0]=h,u[1]=y,u[2]=t):t=u[2];let w=t;return u[3]===Symbol.for("react.memo_cache_sentinel")?(a={lineNumbers:!1,foldGutter:!1,highlightActiveLine:!1,highlightActiveLineGutter:!1},n=[(0,o.ll)()],u[3]=a,u[4]=n):(a=u[3],n=u[4]),u[5]!==w?(i=(0,r.jsx)(g.Ay,{indentWithTab:!1,value:w,theme:"dark",basicSetup:a,extensions:n,editable:!1}),u[5]=w,u[6]=i):i=u[6],u[7]!==j||u[8]!==w||u[9]!==v?(s=v&&(0,r.jsx)(x,{text:w,size:j}),u[7]=j,u[8]=w,u[9]=v,u[10]=s):s=u[10],u[11]!==i||u[12]!==s?(d=(0,r.jsxs)("div",{className:"position-relative",children:[i,s]}),u[11]=i,u[12]=s,u[13]=d):d=u[13],d}function y(e){let t,a,n=(0,l.c)(3),{config:i}=e,{data:s}=(0,p.zu)(i);return n[0]===Symbol.for("react.memo_cache_sentinel")?(t={overflow:"hidden"},n[0]=t):t=n[0],n[1]!==s?(a=(0,r.jsx)(u.t,{flex:"auto",shadow:"none",radius:"sm",style:t,children:(0,r.jsx)(f,{data:s,formatData:!1})}),n[1]=s,n[2]=a):a=n[2],a}},99082:(e,t,a)=>{"use strict";a.d(t,{A:()=>M});var r=a(6029),l=a(75155),n=a(55729),i=a(63085),s=a(76013),o=a(43085),c=a(15683),d=a(27798),u=a(57389),h=a(27166),m=a(43517),g=a(45005),p=a(3635),x=a(39603),f=a(76089),y=a(34834),v=a(48378),j=a(46181),w=a(11088),b=a(67747),C=a(7565);function k({config:e}){let t=(0,n.useMemo)(()=>(0,f.AB)(e.dimensionColumns),[e.dimensionColumns]),a=(0,n.useMemo)(()=>{let t=new Map;for(let{sourceColumn:a="",aggFn:r}of e.aggregatedColumns)t.has(a)?t.get(a)?.push(r):t.set(a,[r]);return Array.from(t.entries()).sort(([e],[t])=>e.localeCompare(t))},[e.aggregatedColumns]);return(0,r.jsxs)(y.B,{gap:"md",children:[(0,r.jsxs)(v.x,{columns:2,children:[(0,r.jsxs)(v.x.Col,{span:1,children:[(0,r.jsxs)(p.Y,{align:"center",mb:"xs",gap:"xs",children:[(0,r.jsx)(m.E,{size:"sm",fw:500,children:"Granularity"}),(0,r.jsx)(i.m,{multiline:!0,maw:400,label:`
              The size of the time buckets into which data is pre-aggregated. 
              Aggregate values can vary slightly between materialized views and the base source 
              table when the selected time range does not align with the view's granularity.
            `,children:(0,r.jsx)(b.A,{size:16})})]}),(0,r.jsx)(j.a,{children:e.minGranularity})]}),e.minDate&&(0,r.jsxs)(v.x.Col,{span:1,children:[(0,r.jsx)(m.E,{size:"sm",fw:500,mb:"xs",children:"Minimum Date"}),(0,r.jsx)(j.a,{children:(0,r.jsx)(C.H,{value:e.minDate,format:"withYear"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.E,{size:"sm",fw:500,mb:"xs",children:"Available Group and Filter Columns"}),(0,r.jsx)(p.Y,{gap:"xs",children:t.map(e=>(0,r.jsx)(j.a,{children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(m.E,{size:"sm",fw:500,mb:"sm",children:"Available Aggregated Columns"}),(0,r.jsxs)(w.X,{children:[(0,r.jsx)(w.X.Thead,{children:(0,r.jsxs)(w.X.Tr,{children:[(0,r.jsx)(w.X.Th,{children:"Column"}),(0,r.jsx)(w.X.Th,{children:"Aggregation"})]})}),(0,r.jsx)(w.X.Tbody,{children:a.map(([e,t])=>(0,r.jsxs)(w.X.Tr,{children:[(0,r.jsx)(w.X.Td,{children:e}),(0,r.jsx)(w.X.Td,{children:(0,r.jsx)(p.Y,{gap:"xs",children:t.map(e=>(0,r.jsx)(j.a,{children:e},e))})})]},e))})]})]})]})}function A(e){return`mv-${e.databaseName}-${e.tableName}`}function S(e){let t,a,n,s,c,d,u,f,y,v,j,w,b=(0,l.c)(33),{mvConfigs:C,explanations:S,opened:T,onClose:E}=e,P=C.length>1;b[0]!==S?(t=new Map(S.map(z)),b[0]=S,b[1]=t):t=b[1];let N=t;if(b[2]!==S||b[3]!==P||b[4]!==E||b[5]!==T){let e=S.find(D)?.mvConfig;n=h.a,c=P?"Materialized Views":"Materialized View",d=T,u=E,f="lg";let t=P?"materialized views":"a materialized view";b[14]!==t?(y=(0,r.jsxs)(m.E,{size:"sm",mb:"sm",children:["This source is configured with"," ",t," for accelerating some aggregations."]}),b[14]=t,b[15]=y):y=b[15],a=g.n,s=e&&A(e),b[2]=S,b[3]=P,b[4]=E,b[5]=T,b[6]=a,b[7]=n,b[8]=s,b[9]=c,b[10]=d,b[11]=u,b[12]=f,b[13]=y}else a=b[6],n=b[7],s=b[8],c=b[9],d=b[10],u=b[11],f=b[12],y=b[13];if(b[16]!==N||b[17]!==C){let e;b[19]!==N?(e=e=>{let t=A(e),a=N.get(t),l=!!a?.errors.length,n=a?.success,s=a?.rowEstimate?.toLocaleString()??"N/A";return(0,r.jsxs)(g.n.Item,{value:t,children:[(0,r.jsx)(g.n.Control,{px:"xs",children:(0,r.jsxs)(p.Y,{justify:"space-between",children:[(0,r.jsx)(m.E,{children:e.tableName}),n?(0,r.jsx)(i.m,{label:`Estimated rows scanned: ${s}`,children:(0,r.jsx)(o.E,{me:"md",color:"var(--color-bg-success)",children:"Active"})}):l?(0,r.jsx)(i.m,{label:"This materialized view is not compatible with the selected query.",children:(0,r.jsx)(o.E,{me:"md",color:"var(--color-bg-warning)",children:"Incompatible"})}):a?(0,r.jsx)(i.m,{label:`Estimated rows scanned: ${s}`,children:(0,r.jsx)(o.E,{me:"md",color:"gray",children:"Skipped"})}):null]})}),(0,r.jsx)(g.n.Panel,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k,{config:e}),l&&(0,r.jsxs)(x.F,{color:"red",mt:"xs",children:[(0,r.jsx)(m.E,{size:"sm",fw:500,mb:"xs",children:"The query cannot be accelerated using this materialized view for the following reason(s):"}),a.errors.map(_)]})]})})]},t)},b[19]=N,b[20]=e):e=b[20],v=C.map(e),b[16]=N,b[17]=C,b[18]=v}else v=b[18];return b[21]!==a||b[22]!==s||b[23]!==v?(j=(0,r.jsx)(a,{defaultValue:s,children:v}),b[21]=a,b[22]=s,b[23]=v,b[24]=j):j=b[24],b[25]!==n||b[26]!==c||b[27]!==d||b[28]!==u||b[29]!==f||b[30]!==y||b[31]!==j?(w=(0,r.jsxs)(n,{title:c,opened:d,onClose:u,size:f,children:[y,j]}),b[25]=n,b[26]=c,b[27]=d,b[28]=u,b[29]=f,b[30]=y,b[31]=j,b[32]=w):w=b[32],w}function _(e,t){return(0,r.jsx)(m.E,{size:"sm",mt:"xs",children:e},t)}function D(e){return e.success}function z(e){return[A(e.mvConfig),e]}let T="var(--color-bg-warning)",E="var(--color-bg-success)";function P(e){let t,a=(0,l.c)(3),{isInWarningState:n,onClick:o}=e;return a[0]!==n||a[1]!==o?(t=n?(0,r.jsx)(i.m,{label:"Not Accelerated",children:(0,r.jsx)(s.M,{onClick:o,children:(0,r.jsx)(c.A,{size:16,color:T})})}):(0,r.jsx)(i.m,{label:"Accelerated",children:(0,r.jsx)(s.M,{onClick:o,children:(0,r.jsx)(d.A,{size:18,color:E})})}),a[0]=n,a[1]=o,a[2]=t):t=a[2],t}function N(e){let t,a=(0,l.c)(4),{isInWarningState:n,onClick:i}=e,s=n?T:E,c=n?"Not Accelerated":"Accelerated";return a[0]!==i||a[1]!==s||a[2]!==c?(t=(0,r.jsx)(o.E,{color:s,onClick:i,className:"cursor-pointer",children:c}),a[0]=i,a[1]=s,a[2]=c,a[3]=t):t=a[3],t}function M(e){let t,a,i,s,o=(0,l.c)(12),{source:c,config:d,variant:h}=e,m=void 0===h?"badge":h,[g,p]=(0,n.useState)(!1),{data:x}=(0,u.d)(d);o[0]!==c.materializedViews?(t=c.materializedViews??[],o[0]=c.materializedViews,o[1]=t):t=o[1];let f=t;if(!f?.length)return null;let y=!!d&&!!x&&!x?.optimizedConfig;return o[2]!==y||o[3]!==m?(a="icon"===m?(0,r.jsx)(P,{isInWarningState:y,onClick:()=>p(!0)}):(0,r.jsx)(N,{isInWarningState:y,onClick:()=>p(!0)}),o[2]=y,o[3]=m,o[4]=a):a=o[4],o[5]!==x||o[6]!==g||o[7]!==f?(i=x&&(0,r.jsx)(S,{mvConfigs:f,explanations:x.explanations,opened:g,onClose:()=>p(!1)}),o[5]=x,o[6]=g,o[7]=f,o[8]=i):i=o[8],o[9]!==a||o[10]!==i?(s=(0,r.jsxs)(r.Fragment,{children:[a,i]}),o[9]=a,o[10]=i,o[11]=s):s=o[11],s}}}]);